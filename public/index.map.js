/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1><$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1><$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});


/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/**
 * Create a cookie with the given name and value and other optional parameters.
 *
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Set the value of a cookie.
 * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Create a cookie with all available options.
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Create a session cookie.
 * @example $.cookie('the_cookie', null);
 * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
 *       used when the cookie was set.
 *
 * @param String name The name of the cookie.
 * @param String value The value of the cookie.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the value of a cookie with the given name.
 *
 * @example $.cookie('the_cookie');
 * @desc Get the value of a cookie.
 *
 * @param String name The name of the cookie.
 * @return The value of the cookie.
 * @type String
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */
jQuery.cookie = function(name, value, options) {
    if (typeof value != 'undefined') { // name and value given, set cookie
        options = options || {};
        if (value === null) {
            value = '';
            options.expires = -1;
        }
        var expires = '';
        if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
            var date;
            if (typeof options.expires == 'number') {
                date = new Date();
                date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
            } else {
                date = options.expires;
            }
            expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
        }
        // CAUTION: Needed to parenthesize options.path and options.domain
        // in the following expressions, otherwise they evaluate to undefined
        // in the packed version for some reason...
        var path = options.path ? '; path=' + (options.path) : '';
        var domain = options.domain ? '; domain=' + (options.domain) : '';
        var secure = options.secure ? '; secure' : '';
        var samesite = options.samesite ? '; samesite=' + (options.samesite) : '';
        document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure,samesite].join('');
    } else { // only name given, get cookie
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
};



jQuery(document).ready(function(){
	var cookieOptions = {expires: 7, path: '/'};
		

});

/*

 arcticModal  jQuery plugin
 Version: 0.3
 Author: Sergey Predvoditelev (sergey.predvoditelev@gmail.com)
 Company: Arctic Laboratory (http://arcticlab.ru/)

 Docs & Examples: http://arcticlab.ru/arcticmodal/

 */
(function(d){var g={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"rgba(0,0,0,0.2)"}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2E3,
ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:d.noop,afterOpen:d.noop,beforeClose:d.noop,afterClose:d.noop,afterLoading:d.noop,afterLoadingOnShow:d.noop,errorLoading:d.noop},j=0,e=d([]),m={isEventOut:function(a,b){var c=!0;d(a).each(function(){d(b.target).get(0)==d(this).get(0)&&(c=!1);0==d(b.target).closest("HTML",d(this).get(0)).length&&(c=!1)});return c}},f={getParentEl:function(a){var b=d(a);return b.data("arcticmodal")?b:(b=
d(a).closest(".arcticmodal-container").data("arcticmodalParentEl"))?b:!1},transition:function(a,b,c,e){e=void 0==e?d.noop:e;switch(c.type){case "fade":"show"==b?a.fadeIn(c.speed,e):a.fadeOut(c.speed,e);break;case "none":"show"==b?a.show():a.hide(),e()}},prepare_body:function(a,b){d(".arcticmodal-close",a.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){b.arcticmodal("close");return!1})},init_el:function(a,b){var c=a.data("arcticmodal");if(!c){c=b;j++;c.modalID=j;c.overlay.block=
d(c.overlay.tpl);c.overlay.block.css(c.overlay.css);c.container.block=d(c.container.tpl);c.body=d(".arcticmodal-container_i2",c.container.block);b.clone?c.body.html(a.clone(!0)):(a.before('<div id="arcticmodalReserve'+c.modalID+'" style="display: none" />'),c.body.html(a));f.prepare_body(c,a);c.closeOnOverlayClick&&c.overlay.block.add(c.container.block).click(function(b){m.isEventOut(d(">*",c.body),b)&&a.arcticmodal("close")});c.container.block.data("arcticmodalParentEl",a);a.data("arcticmodal",c);
e=d.merge(e,a);d.proxy(h.show,a)();if("html"==c.type)return a;if(void 0!=c.ajax.beforeSend){var k=c.ajax.beforeSend;delete c.ajax.beforeSend}if(void 0!=c.ajax.success){var g=c.ajax.success;delete c.ajax.success}if(void 0!=c.ajax.error){var l=c.ajax.error;delete c.ajax.error}var n=d.extend(!0,{url:c.url,beforeSend:function(){void 0==k?c.body.html('<div class="arcticmodal-loading"><div class="b_loading"><div class="b_loading_circle_wrapper"><div class="b_loading_circle_one"></div><div class="b_loading_circle_one b_loading_circle_delayed"></div></div></div></div>'):k(c,a)},success:function(b){a.trigger("afterLoading");c.afterLoading(c,a,b);void 0==g?c.body.html(b):g(c,a,b);f.prepare_body(c,
a);a.trigger("afterLoadingOnShow");c.afterLoadingOnShow(c,a,b)},error:function(){a.trigger("errorLoading");c.errorLoading(c,a);void 0==l?(c.body.html(c.errors.tpl),d(".arcticmodal-error",c.body).html(c.errors.ajax_unsuccessful_load),d(".arcticmodal-close",c.body).click(function(){a.arcticmodal("close");return!1}),c.errors.autoclose_delay&&setTimeout(function(){a.arcticmodal("close")},c.errors.autoclose_delay)):l(c,a)}},c.ajax);c.ajax_request=d.ajax(n);a.data("arcticmodal",c)}},init:function(a){a=
d.extend(!0,{},g,a);if(d.isFunction(this))if(void 0==a)d.error("jquery.arcticmodal: Uncorrect parameters");else if(""==a.type)d.error('jquery.arcticmodal: Don\'t set parameter "type"');else switch(a.type){case "html":if(""==a.content){d.error('jquery.arcticmodal: Don\'t set parameter "content"');break}var b=a.content;a.content="";return f.init_el(d(b),a);case "ajax":if(""==a.url){d.error('jquery.arcticmodal: Don\'t set parameter "url"');break}return f.init_el(d("<div />"),a)}else return this.each(function(){f.init_el(d(this),
d.extend(!0,{},a))})}},h={show:function(){var a=f.getParentEl(this);if(!1===a)d.error("jquery.arcticmodal: Uncorrect call");else{var b=a.data("arcticmodal");b.overlay.block.hide();b.container.block.hide();d("BODY").append(b.overlay.block);d("BODY").append(b.container.block);b.beforeOpen(b,a);a.trigger("beforeOpen");if("hidden"!=b.wrap.css("overflow")){b.wrap.data("arcticmodalOverflow",b.wrap.css("overflow"));var c=b.wrap.outerWidth(!0);b.wrap.css("overflow","hidden");var g=b.wrap.outerWidth(!0);g!=
c&&b.wrap.css("marginRight",g-c+"px")}e.not(a).each(function(){d(this).data("arcticmodal").overlay.block.hide()});f.transition(b.overlay.block,"show",1<e.length?{type:"none"}:b.openEffect);f.transition(b.container.block,"show",1<e.length?{type:"none"}:b.openEffect,function(){b.afterOpen(b,a);a.trigger("afterOpen")});return a}},close:function(){if(d.isFunction(this))e.each(function(){d(this).arcticmodal("close")});else return this.each(function(){var a=f.getParentEl(this);if(!1===a)d.error("jquery.arcticmodal: Uncorrect call");
else{var b=a.data("arcticmodal");!1!==b.beforeClose(b,a)&&(a.trigger("beforeClose"),e.not(a).last().each(function(){d(this).data("arcticmodal").overlay.block.show()}),f.transition(b.overlay.block,"hide",1<e.length?{type:"none"}:b.closeEffect),f.transition(b.container.block,"hide",1<e.length?{type:"none"}:b.closeEffect,function(){b.afterClose(b,a);a.trigger("afterClose");b.clone||d("#arcticmodalReserve"+b.modalID).replaceWith(b.body.find(">*"));b.overlay.block.remove();b.container.block.remove();a.data("arcticmodal",
null);d(".arcticmodal-container").length||(b.wrap.data("arcticmodalOverflow")&&b.wrap.css("overflow",b.wrap.data("arcticmodalOverflow")),b.wrap.css("marginRight",0))}),"ajax"==b.type&&b.ajax_request.abort(),e=e.not(a))}})},setDefault:function(a){d.extend(!0,g,a)}};d(function(){g.wrap=d(document.all&&!document.querySelector?"html":"body")});d(document).bind("keyup.arcticmodal",function(a){var b=e.last();b.length&&b.data("arcticmodal").closeOnEsc&&27===a.keyCode&&b.arcticmodal("close")});d.arcticmodal=
d.fn.arcticmodal=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);d.error("jquery.arcticmodal: Method "+a+" does not exist")}})(jQuery);

/*! jQuery Color v@2.1.0 http://github.com/jquery/jquery-color | jquery.org/license */
(function(a,b){function m(a,b,c){var d=h[b.type]||{};return a==null?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";if(i)return f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1}),d.length?(d.join()==="0,0,0,0"&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,c*6<1?a+(b-a)*c*6:c*2<1?b:c*3<2?a+(b-a)*(2/3-c)*6:a}var c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a("<p>")[0],k,l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)",i.rgba=j.style.backgroundColor.indexOf("rgba")>-1,l(g,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b)return this._rgba=[null,null,null,null],this;if(c.jquery||c.nodeType)c=a(c).css(d),d=b;var i=this,j=a.type(c),o=this._rgba=[],p;d!==b&&(c=[c,d,e,h],j="array");if(j==="string")return this.parse(n(c)||k._default);if(j==="array")return l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this;if(j==="object")return c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if(a==="alpha"||c[a]==null)return;i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===f[b.idx],c})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=this.alpha()===0?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};if(g===null)return;f===null?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d))}),this[d](k)},blend:function(b){if(this._rgba[3]===1)return this;var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});return c[3]===1&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return a==null&&(a=b>2?1:0),b&&b<3&&(a=Math.round(a*100)+"%"),a});return c[3]===1&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(d*255)),"#"+a.map(c,function(a,b){return a=(a||0).toString(16),a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=i*.5,k,l;return g===f?k=0:b===f?k=60*(c-d)/h+360:c===f?k=60*(d-b)/h+120:k=60*(b-c)/h+240,j===0||j===1?l=j:j<=.5?l=h/i:l=h/(2-i),[Math.round(k)%360,l,j,e==null?1:e]},g.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=d<=.5?d*(1+c):d+c-d*c,g=2*d-f,h,i,j;return[Math.round(o(g,f,b+1/3)*255),Math.round(o(g,f,b)*255),Math.round(o(g,f,b-1/3)*255),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){i&&!this[h]&&(this[h]=i(this._rgba));if(c===b)return this[h].slice();var d,e=a.type(c),k=e==="array"||e==="object"?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k[e==="object"?a:b.idx];c==null&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){if(f.fn[b])return;f.fn[b]=function(f){var g=a.type(f),h=b==="alpha"?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx],k;return g==="undefined"?j:(g==="function"&&(f=f.call(this,j),g=a.type(f)),f==null&&e.empty?this:(g==="string"&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*(k[1]==="+"?1:-1))),i[e.idx]=f,this[h](i)))}})}),f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if(a.type(d)!=="string"||(e=n(d))){d=f(e||d);if(!i.rgba&&d._rgba[3]!==1){g=c==="backgroundColor"?b.parentNode:b;while((h===""||h==="transparent")&&g&&g.style)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(j){}d=d.blend(h&&h!=="transparent"?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(d){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);


/*
    jQuery Masked Input Plugin
    Copyright (c) 2007 - 2015 Josh Bush (digitalbush.com)
    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
    Version: 1.4.1
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),function(a,b){return"?"!=a?i[a]?p(b):a:void 0}),D=C.join(""),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join("")}),B.one("unmask",function(){B.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!B.prop("readonly")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){B.get(0)===document.activeElement&&(z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a))},10)}}).on("blur.mask",v).on("keydown.mask",w).on("keypress.mask",x).on("input.mask paste.mask",function(){B.prop("readonly")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off("input.mask").on("input.mask",u),A()})}})});

/*

 arcticModal  jQuery plugin
 Version: 0.3
 Author: Sergey Predvoditelev (sergey.predvoditelev@gmail.com)
 Company: Arctic Laboratory (http://arcticlab.ru/)

 Docs & Examples: http://arcticlab.ru/arcticmodal/

 */
/*
(function(d){var g={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:0.2}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2E3,
ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:d.noop,afterOpen:d.noop,beforeClose:d.noop,afterClose:d.noop,afterLoading:d.noop,afterLoadingOnShow:d.noop,errorLoading:d.noop},j=0,e=d([]),m={isEventOut:function(a,b){var c=!0;d(a).each(function(){d(b.target).get(0)==d(this).get(0)&&(c=!1);0==d(b.target).closest("HTML",d(this).get(0)).length&&(c=!1)});return c}},f={getParentEl:function(a){var b=d(a);return b.data("arcticmodal")?b:(b=
d(a).closest(".arcticmodal-container").data("arcticmodalParentEl"))?b:!1},transition:function(a,b,c,e){e=void 0==e?d.noop:e;switch(c.type){case "fade":"show"==b?a.fadeIn(c.speed,e):a.fadeOut(c.speed,e);break;case "none":"show"==b?a.show():a.hide(),e()}},prepare_body:function(a,b){d(".arcticmodal-close",a.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){b.arcticmodal("close");return!1})},init_el:function(a,b){var c=a.data("arcticmodal");if(!c){c=b;j++;c.modalID=j;c.overlay.block=
d(c.overlay.tpl);c.overlay.block.css(c.overlay.css);c.container.block=d(c.container.tpl);c.body=d(".arcticmodal-container_i2",c.container.block);b.clone?c.body.html(a.clone(!0)):(a.before('<div id="arcticmodalReserve'+c.modalID+'" style="display: none" />'),c.body.html(a));f.prepare_body(c,a);c.closeOnOverlayClick&&c.overlay.block.add(c.container.block).click(function(b){m.isEventOut(d(">*",c.body),b)&&a.arcticmodal("close")});c.container.block.data("arcticmodalParentEl",a);a.data("arcticmodal",c);
e=d.merge(e,a);d.proxy(h.show,a)();if("html"==c.type)return a;if(void 0!=c.ajax.beforeSend){var k=c.ajax.beforeSend;delete c.ajax.beforeSend}if(void 0!=c.ajax.success){var g=c.ajax.success;delete c.ajax.success}if(void 0!=c.ajax.error){var l=c.ajax.error;delete c.ajax.error}var n=d.extend(!0,{url:c.url,beforeSend:function(){void 0==k?c.body.html('<div class="arcticmodal-loading"><div class="b_loading"><div class="b_loading_circle_wrapper"><div class="b_loading_circle_one"></div><div class="b_loading_circle_one b_loading_circle_delayed"></div></div></div></div>'):k(c,a)},success:function(b){a.trigger("afterLoading");c.afterLoading(c,a,b);void 0==g?c.body.html(b):g(c,a,b);f.prepare_body(c,
a);a.trigger("afterLoadingOnShow");c.afterLoadingOnShow(c,a,b)},error:function(){a.trigger("errorLoading");c.errorLoading(c,a);void 0==l?(c.body.html(c.errors.tpl),d(".arcticmodal-error",c.body).html(c.errors.ajax_unsuccessful_load),d(".arcticmodal-close",c.body).click(function(){a.arcticmodal("close");return!1}),c.errors.autoclose_delay&&setTimeout(function(){a.arcticmodal("close")},c.errors.autoclose_delay)):l(c,a)}},c.ajax);c.ajax_request=d.ajax(n);a.data("arcticmodal",c)}},init:function(a){a=
d.extend(!0,{},g,a);if(d.isFunction(this))if(void 0==a)d.error("jquery.arcticmodal: Uncorrect parameters");else if(""==a.type)d.error('jquery.arcticmodal: Don\'t set parameter "type"');else switch(a.type){case "html":if(""==a.content){d.error('jquery.arcticmodal: Don\'t set parameter "content"');break}var b=a.content;a.content="";return f.init_el(d(b),a);case "ajax":if(""==a.url){d.error('jquery.arcticmodal: Don\'t set parameter "url"');break}return f.init_el(d("<div />"),a)}else return this.each(function(){f.init_el(d(this),
d.extend(!0,{},a))})}},h={show:function(){var a=f.getParentEl(this);if(!1===a)d.error("jquery.arcticmodal: Uncorrect call");else{var b=a.data("arcticmodal");b.overlay.block.hide();b.container.block.hide();d("BODY").append(b.overlay.block);d("BODY").append(b.container.block);b.beforeOpen(b,a);a.trigger("beforeOpen");if("hidden"!=b.wrap.css("overflow")){b.wrap.data("arcticmodalOverflow",b.wrap.css("overflow"));var c=b.wrap.outerWidth(!0);b.wrap.css("overflow","hidden");var g=b.wrap.outerWidth(!0);g!=
c&&b.wrap.css("marginRight",g-c+"px")}e.not(a).each(function(){d(this).data("arcticmodal").overlay.block.hide()});f.transition(b.overlay.block,"show",1<e.length?{type:"none"}:b.openEffect);f.transition(b.container.block,"show",1<e.length?{type:"none"}:b.openEffect,function(){b.afterOpen(b,a);a.trigger("afterOpen")});return a}},close:function(){if(d.isFunction(this))e.each(function(){d(this).arcticmodal("close")});else return this.each(function(){var a=f.getParentEl(this);if(!1===a)d.error("jquery.arcticmodal: Uncorrect call");
else{var b=a.data("arcticmodal");!1!==b.beforeClose(b,a)&&(a.trigger("beforeClose"),e.not(a).last().each(function(){d(this).data("arcticmodal").overlay.block.show()}),f.transition(b.overlay.block,"hide",1<e.length?{type:"none"}:b.closeEffect),f.transition(b.container.block,"hide",1<e.length?{type:"none"}:b.closeEffect,function(){b.afterClose(b,a);a.trigger("afterClose");b.clone||d("#arcticmodalReserve"+b.modalID).replaceWith(b.body.find(">*"));b.overlay.block.remove();b.container.block.remove();a.data("arcticmodal",
null);d(".arcticmodal-container").length||(b.wrap.data("arcticmodalOverflow")&&b.wrap.css("overflow",b.wrap.data("arcticmodalOverflow")),b.wrap.css("marginRight",0))}),"ajax"==b.type&&b.ajax_request.abort(),e=e.not(a))}})},setDefault:function(a){d.extend(!0,g,a)}};d(function(){g.wrap=d(document.all&&!document.querySelector?"html":"body")});d(document).bind("keyup.arcticmodal",function(a){var b=e.last();b.length&&b.data("arcticmodal").closeOnEsc&&27===a.keyCode&&b.arcticmodal("close")});d.arcticmodal=
d.fn.arcticmodal=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);d.error("jquery.arcticmodal: Method "+a+" does not exist")}})(jQuery);
*/

/*!
/**
 * Monkey patch jQuery 1.3.1+ to add support for setting or animating CSS
 * scale and rotation independently.
 * https://github.com/zachstronaut/jquery-animate-css-rotate-scale
 * Released under dual MIT/GPL license just like jQuery.
 * 2009-2012 Zachary Johnson www.zachstronaut.com
 */
(function ($) {
    // Updated 2010.11.06
    // Updated 2012.10.13 - Firefox 16 transform style returns a matrix rather than a string of transform functions.  This broke the features of this jQuery patch in Firefox 16.  It should be possible to parse the matrix for both scale and rotate (especially when scale is the same for both the X and Y axis), however the matrix does have disadvantages such as using its own units and also 45deg being indistinguishable from 45+360deg.  To get around these issues, this patch tracks internally the scale, rotation, and rotation units for any elements that are .scale()'ed, .rotate()'ed, or animated.  The major consequences of this are that 1. the scaled/rotated element will blow away any other transform rules applied to the same element (such as skew or translate), and 2. the scaled/rotated element is unaware of any preset scale or rotation initally set by page CSS rules.  You will have to explicitly set the starting scale/rotation value.
    
    function initData($el) {
        var _ARS_data = $el.data('_ARS_data');
        if (!_ARS_data) {
            _ARS_data = {
                rotateUnits: 'deg',
                scale: 1,
                rotate: 0
            };
            
            $el.data('_ARS_data', _ARS_data);
        }
        
        return _ARS_data;
    }
    
    function setTransform($el, data) {
        $el.css('transform', 'rotate(' + data.rotate + data.rotateUnits + ') scale(' + data.scale + ',' + data.scale + ')');
    }
    
    $.fn.rotate = function (val) {
        var $self = $(this), m, data = initData($self);
                        
        if (typeof val == 'undefined') {
            return data.rotate + data.rotateUnits;
        }
        
        m = val.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);
        if (m) {
            if (m[3]) {
                data.rotateUnits = m[3];
            }
            
            data.rotate = m[1];
            
            setTransform($self, data);
        }
        
        return this;
    };
    
    // Note that scale is unitless.
    $.fn.scale = function (val) {
        var $self = $(this), data = initData($self);
        
        if (typeof val == 'undefined') {
            return data.scale;
        }
        
        data.scale = val;
        
        setTransform($self, data);
        
        return this;
    };

    // fx.cur() must be monkey patched because otherwise it would always
    // return 0 for current rotate and scale values
    var curProxied = $.fx.prototype.cur;
    $.fx.prototype.cur = function () {
        if (this.prop == 'rotate') {
            return parseFloat($(this.elem).rotate());
            
        } else if (this.prop == 'scale') {
            return parseFloat($(this.elem).scale());
        }
        
        return curProxied.apply(this, arguments);
    };
    
    $.fx.step.rotate = function (fx) {
        var data = initData($(fx.elem));
        $(fx.elem).rotate(fx.now + data.rotateUnits);
    };
    
    $.fx.step.scale = function (fx) {
        $(fx.elem).scale(fx.now);
    };
    
    /*
    
    Starting on line 3905 of jquery-1.3.2.js we have this code:
    
    // We need to compute starting value
    if ( unit != "px" ) {
        self.style[ name ] = (end || 1) + unit;
        start = ((end || 1) / e.cur(true)) * start;
        self.style[ name ] = start + unit;
    }
    
    This creates a problem where we cannot give units to our custom animation
    because if we do then this code will execute and because self.style[name]
    does not exist where name is our custom animation's name then e.cur(true)
    will likely return zero and create a divide by zero bug which will set
    start to NaN.
    
    The following monkey patch for animate() gets around this by storing the
    units used in the rotation definition and then stripping the units off.
    
    */
    
    var animateProxied = $.fn.animate;
    $.fn.animate = function (prop) {
        if (typeof prop['rotate'] != 'undefined') {
            var $self, data, m = prop['rotate'].toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);
            if (m && m[5]) {
                $self = $(this);
                data = initData($self);
                data.rotateUnits = m[5];
            }
            
            prop['rotate'] = m[1];
        }
        
        return animateProxied.apply(this, arguments);
    };
})(jQuery);


function trim(s) { return rtrim(ltrim(s)); }
function ltrim(s){ return s.replace(/^\s+/, ''); }
function rtrim(s){ return s.replace(/\s+$/, ''); }

/*
 * jQuery autoResize (textarea auto-resizer)
 * @copyright James Padolsey http://james.padolsey.com
 * @version 1.04
*/

(function($){
    
    $.fn.autoResize = function(options) {
        
        // Just some abstracted details,
        // to make plugin users happy:
        var settings = $.extend({
            onResize : function(){
				 
			},
            animate : true,
            animateDuration : 150,
            animateCallback : function(){},
            extraSpace : 1,
            limit: 30000
        }, options);
        
        // Only textarea's auto-resize:
        this.filter('textarea').each(function(){
            
                // Get rid of scrollbars and disable WebKit resizing:
            var textarea = $(this).css({resize:'none','overflow-y':'hidden'}),
            
                // Cache original height, for use later:
                origHeight = textarea.height(),

				                
                // Need clone of textarea, hidden off screen:
                clone = (function(){


                    // Properties which may effect space taken up by chracters:
                    var props = ['height','width','lineHeight','textDecoration','letterSpacing','fontSize','font-family',],
                        propOb = {};
  
                    // Create object of styles to apply:
                    $.each(props, function(i, prop){
                        propOb[prop] = textarea.css(prop);
                    });
                    
                    // Clone the actual textarea removing unique properties
                    // and insert before original textarea:
                    return textarea.clone().removeAttr('id').removeAttr('name').css({
                        position: 'absolute',
                        top: 0,
                        left: -9999
                    }).css(propOb).attr('tabIndex','-1').insertBefore(textarea);
					
					
                })(),
                lastScrollTop = null,
                updateSize = function() {
                    // Prepare the clone:
                    clone.height(0).val($(this).val()).scrollTop(10000);
					
                    // Find the height of text:
                    /*
                    var scrollTop = Math.max(clone.scrollTop(), origHeight) + settings.extraSpace,
                        toChange = $(this).add(clone);
*/
                    var scrollTop = Math.max(clone.scrollTop(), origHeight),
                        toChange = $(this).add(clone);
                    // Don't do anything if scrollTip hasen't changed:
                    if (lastScrollTop === scrollTop) { return; }
                    lastScrollTop = scrollTop;
					
                    // Check for limit:
                    if ( scrollTop >= settings.limit ) {
                        $(this).css('overflow-y','');
                        return;
                    }
                    // Fire off callback:
                    settings.onResize.call(this);
					
                    // Either animate or directly apply height:
                   settings.animate && textarea.css('display') === 'block' ?
                        toChange.stop().animate({height:scrollTop}, settings.animateDuration, settings.animateCallback)
                        : toChange.height(scrollTop);
						
					
                };
				
				
                                  
            // Bind namespaced handlers to appropriate events:
            textarea
                .unbind('.dynSiz')
                .bind('keyup.dynSiz', updateSize)
                .bind('keydown.dynSiz', updateSize)
                .bind('change.dynSiz', updateSize);
            
        });
        
        // Chain:
        return this;
        
    };
    
    
    
})(jQuery);


/*! jQuery number 2.1.3 (c) github.com/teamdf/jquery-number | opensource.teamdf.com/license */
(function(h){function r(f,a){if(this.createTextRange){var c=this.createTextRange();c.collapse(true);c.moveStart("character",f);c.moveEnd("character",a-f);c.select()}else if(this.setSelectionRange){this.focus();this.setSelectionRange(f,a)}}function s(f){var a=this.value.length;f=f.toLowerCase()=="start"?"Start":"End";if(document.selection){a=document.selection.createRange();var c;c=a.duplicate();c.expand("textedit");c.setEndPoint("EndToEnd",a);c=c.text.length-a.text.length;a=c+a.text.length;return f==
"Start"?c:a}else if(typeof this["selection"+f]!="undefined")a=this["selection"+f];return a}var q={codes:{188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};h.fn.number=function(f,a,c,k){k=typeof k==="undefined"?",":k;c=typeof c==="undefined"?".":c;a=typeof a==="undefined"?0:a;var j="\\u"+("0000"+
c.charCodeAt(0).toString(16)).slice(-4),o=RegExp("[^"+j+"0-9]","g"),p=RegExp(j,"g");if(f===true)return this.is("input:text")?this.on({"keydown.format":function(b){var d=h(this),e=d.data("numFormat"),g=b.keyCode?b.keyCode:b.which,m="",i=s.apply(this,["start"]),n=s.apply(this,["end"]),l="";l=false;if(q.codes.hasOwnProperty(g))g=q.codes[g];if(!b.shiftKey&&g>=65&&g<=90)g+=32;else if(!b.shiftKey&&g>=69&&g<=105)g-=48;else if(b.shiftKey&&q.shifts.hasOwnProperty(g))m=q.shifts[g];if(m=="")m=String.fromCharCode(g);
if(g!==8&&m!=c&&!m.match(/[0-9]/)){d=b.keyCode?b.keyCode:b.which;if(d==46||d==8||d==9||d==27||d==13||(d==65||d==82)&&(b.ctrlKey||b.metaKey)===true||(d==86||d==67)&&(b.ctrlKey||b.metaKey)===true||d>=35&&d<=39)return;b.preventDefault();return false}if(i==0&&n==this.value.length||d.val()==0)if(g===8){i=n=1;this.value="";e.init=a>0?-1:0;e.c=a>0?-(a+1):0;r.apply(this,[0,0])}else if(m===c){i=n=1;this.value="0"+c+Array(a+1).join("0");e.init=a>0?1:0;e.c=a>0?-(a+1):0}else{if(this.value.length===0){e.init=
a>0?-1:0;e.c=a>0?-a:0}}else e.c=n-this.value.length;if(a>0&&m==c&&i==this.value.length-a-1){e.c++;e.init=Math.max(0,e.init);b.preventDefault();l=this.value.length+e.c}else if(m==c){e.init=Math.max(0,e.init);b.preventDefault()}else if(a>0&&g==8&&i==this.value.length-a){b.preventDefault();e.c--;l=this.value.length+e.c}else if(a>0&&g==8&&i>this.value.length-a){if(this.value==="")return;if(this.value.slice(i-1,i)!="0"){l=this.value.slice(0,i-1)+"0"+this.value.slice(i);d.val(l.replace(o,"").replace(p,
c))}b.preventDefault();e.c--;l=this.value.length+e.c}else if(g==8&&this.value.slice(i-1,i)==k){b.preventDefault();e.c--;l=this.value.length+e.c}else if(a>0&&i==n&&this.value.length>a+1&&i>this.value.length-a-1&&isFinite(+m)&&!b.metaKey&&!b.ctrlKey&&!b.altKey&&m.length===1){this.value=l=n===this.value.length?this.value.slice(0,i-1):this.value.slice(0,i)+this.value.slice(i+1);l=i}l!==false&&r.apply(this,[l,l]);d.data("numFormat",e)},"keyup.format":function(b){var d=h(this),e=d.data("numFormat");b=b.keyCode?
b.keyCode:b.which;var g=s.apply(this,["start"]);if(!(this.value===""||(b<48||b>57)&&(b<96||b>105)&&b!==8)){d.val(d.val());if(a>0)if(e.init<1){g=this.value.length-a-(e.init<0?1:0);e.c=g-this.value.length;e.init=1;d.data("numFormat",e)}else if(g>this.value.length-a&&b!=8){e.c++;d.data("numFormat",e)}d=this.value.length+e.c;r.apply(this,[d,d])}},"paste.format":function(b){var d=h(this),e=b.originalEvent,g=null;if(window.clipboardData&&window.clipboardData.getData)g=window.clipboardData.getData("Text");
else if(e.clipboardData&&e.clipboardData.getData)g=e.clipboardData.getData("text/plain");d.val(g);b.preventDefault();return false}}).each(function(){var b=h(this).data("numFormat",{c:-(a+1),decimals:a,thousands_sep:k,dec_point:c,regex_dec_num:o,regex_dec:p,init:false});this.value!==""&&b.val(b.val())}):this.each(function(){var b=h(this),d=+b.text().replace(o,"").replace(p,".");b.number(!isFinite(d)?0:+d,a,c,k)});return this.text(h.number.apply(window,arguments))};var t=null,u=null;if(h.isPlainObject(h.valHooks.text)){if(h.isFunction(h.valHooks.text.get))t=
h.valHooks.text.get;if(h.isFunction(h.valHooks.text.set))u=h.valHooks.text.set}else h.valHooks.text={};h.valHooks.text.get=function(f){var a=h(f).data("numFormat");if(a){if(f.value==="")return"";f=+f.value.replace(a.regex_dec_num,"").replace(a.regex_dec,".");return""+(isFinite(f)?f:0)}else if(h.isFunction(t))return t(f)};h.valHooks.text.set=function(f,a){var c=h(f).data("numFormat");if(c)return f.value=h.number(a,c.decimals,c.dec_point,c.thousands_sep);else if(h.isFunction(u))return u(f,a)};h.number=
function(f,a,c,k){k=typeof k==="undefined"?",":k;c=typeof c==="undefined"?".":c;a=!isFinite(+a)?0:Math.abs(a);var j="\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4),o="\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4);f=(f+"").replace(".",c).replace(RegExp(o,"g"),"").replace(RegExp(j,"g"),".").replace(RegExp("[^0-9+-Ee.]","g"),"");f=!isFinite(+f)?0:+f;j="";j=function(p,b){var d=Math.pow(10,b);return""+Math.round(p*d)/d};j=(a?j(f,a):""+Math.round(f)).split(".");if(j[0].length>3)j[0]=j[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,
k);if((j[1]||"").length<a){j[1]=j[1]||"";j[1]+=Array(a-j[1].length+1).join("0")}return j.join(c)}})(jQuery);
/*! lightgallery - v1.3.4 - 2016-09-28
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2016 Sachin N; Licensed Apache 2.0 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){!function(a,b,c,d){"use strict";function e(b,d){if(this.el=b,this.$el=a(b),this.s=a.extend({},f,d),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in c.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=a(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(a(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var f={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};e.prototype.init=function(){var c=this;c.s.preload>c.$items.length&&(c.s.preload=c.$items.length);var d=b.location.hash;d.indexOf("lg="+this.s.galleryId)>0&&(c.index=parseInt(d.split("&slide=")[1],10),a("body").addClass("lg-from-hash"),a("body").hasClass("lg-on")||(setTimeout(function(){c.build(c.index)}),a("body").addClass("lg-on"))),c.s.dynamic?(c.$el.trigger("onBeforeOpen.lg"),c.index=c.s.index||0,a("body").hasClass("lg-on")||setTimeout(function(){c.build(c.index),a("body").addClass("lg-on")})):c.$items.on("click.lgcustom",function(b){try{b.preventDefault(),b.preventDefault()}catch(d){b.returnValue=!1}c.$el.trigger("onBeforeOpen.lg"),c.index=c.s.index||c.$items.index(this),a("body").hasClass("lg-on")||(c.build(c.index),a("body").addClass("lg-on"))})},e.prototype.build=function(b){var c=this;c.structure(),a.each(a.fn.lightGallery.modules,function(b){c.modules[b]=new a.fn.lightGallery.modules[b](c.el)}),c.slide(b,!1,!1),c.s.keyPress&&c.keyPress(),c.$items.length>1&&(c.arrow(),setTimeout(function(){c.enableDrag(),c.enableSwipe()},50),c.s.mousewheel&&c.mousewheel()),c.counter(),c.closeGallery(),c.$el.trigger("onAfterOpen.lg"),c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items"),clearTimeout(c.hideBartimeout),c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)})},e.prototype.structure=function(){var c,d="",e="",f=0,g="",h=this;for(a("body").append('<div class="lg-backdrop"></div>'),a(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),f=0;f<this.$items.length;f++)d+='<div class="lg-item"></div>';if(this.s.controls&&this.$items.length>1&&(e='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(g='<div class="lg-sub-html"></div>'),c='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+d+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+e+g+"</div></div>",a("body").append(c),this.$outer=a(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),h.setTop(),a(b).on("resize.lg orientationchange.lg",function(){setTimeout(function(){h.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var i=this.$outer.find(".lg-inner");i.css("transition-timing-function",this.s.cssEasing),i.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){a(".lg-backdrop").addClass("in")}),setTimeout(function(){h.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=a(b).scrollTop()},e.prototype.setTop=function(){if("100%"!==this.s.height){var c=a(b).height(),d=(c-parseInt(this.s.height,10))/2,e=this.$outer.find(".lg");c>=parseInt(this.s.height,10)?e.css("top",d+"px"):e.css("top","0px")}},e.prototype.doCss=function(){var a=function(){var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=c.documentElement,d=0;for(d=0;d<a.length;d++)if(a[d]in b.style)return!0};return!!a()},e.prototype.isVideo=function(a,b){var c;if(c=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html"),!a&&c)return{html5:!0};var d=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),e=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),f=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),g=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return d?{youtube:d}:e?{vimeo:e}:f?{dailymotion:f}:g?{vk:g}:void 0},e.prototype.counter=function(){this.s.counter&&a(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},e.prototype.addHtml=function(b){var c,d,e=null;if(this.s.dynamic?this.s.dynamicEl[b].subHtmlUrl?c=this.s.dynamicEl[b].subHtmlUrl:e=this.s.dynamicEl[b].subHtml:(d=this.$items.eq(b),d.attr("data-sub-html-url")?c=d.attr("data-sub-html-url"):(e=d.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!e&&(e=d.attr("title")||d.find("img").first().attr("alt")))),!c)if("undefined"!=typeof e&&null!==e){var f=e.substring(0,1);"."!==f&&"#"!==f||(e=this.s.subHtmlSelectorRelative&&!this.s.dynamic?d.find(e).html():a(e).html())}else e="";".lg-sub-html"===this.s.appendSubHtmlTo?c?this.$outer.find(this.s.appendSubHtmlTo).load(c):this.$outer.find(this.s.appendSubHtmlTo).html(e):c?this.$slide.eq(b).load(c):this.$slide.eq(b).append(e),"undefined"!=typeof e&&null!==e&&(""===e?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[b])},e.prototype.preload=function(a){var b=1,c=1;for(b=1;b<=this.s.preload&&!(b>=this.$items.length-a);b++)this.loadContent(a+b,!1,0);for(c=1;c<=this.s.preload&&!(0>a-c);c++)this.loadContent(a-c,!1,0)},e.prototype.loadContent=function(c,d,e){var f,g,h,i,j,k,l=this,m=!1,n=function(c){for(var d=[],e=[],f=0;f<c.length;f++){var h=c[f].split(" ");""===h[0]&&h.splice(0,1),e.push(h[0]),d.push(h[1])}for(var i=a(b).width(),j=0;j<d.length;j++)if(parseInt(d[j],10)>i){g=e[j];break}};if(l.s.dynamic){if(l.s.dynamicEl[c].poster&&(m=!0,h=l.s.dynamicEl[c].poster),k=l.s.dynamicEl[c].html,g=l.s.dynamicEl[c].src,l.s.dynamicEl[c].responsive){var o=l.s.dynamicEl[c].responsive.split(",");n(o)}i=l.s.dynamicEl[c].srcset,j=l.s.dynamicEl[c].sizes}else{if(l.$items.eq(c).attr("data-poster")&&(m=!0,h=l.$items.eq(c).attr("data-poster")),k=l.$items.eq(c).attr("data-html"),g=l.$items.eq(c).attr("href")||l.$items.eq(c).attr("data-src"),l.$items.eq(c).attr("data-responsive")){var p=l.$items.eq(c).attr("data-responsive").split(",");n(p)}i=l.$items.eq(c).attr("data-srcset"),j=l.$items.eq(c).attr("data-sizes")}var q=!1;l.s.dynamic?l.s.dynamicEl[c].iframe&&(q=!0):"true"===l.$items.eq(c).attr("data-iframe")&&(q=!0);var r=l.isVideo(g,c);if(!l.$slide.eq(c).hasClass("lg-loaded")){if(q)l.$slide.eq(c).prepend('<div class="lg-video-cont" style="max-width:'+l.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+g+'"  allowfullscreen="true"></iframe></div></div>');else if(m){var s="";s=r&&r.youtube?"lg-has-youtube":r&&r.vimeo?"lg-has-vimeo":"lg-has-html5",l.$slide.eq(c).prepend('<div class="lg-video-cont '+s+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+h+'" /></div></div>')}else r?(l.$slide.eq(c).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),l.$el.trigger("hasVideo.lg",[c,g,k])):l.$slide.eq(c).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+g+'" /></div>');if(l.$el.trigger("onAferAppendSlide.lg",[c]),f=l.$slide.eq(c).find(".lg-object"),j&&f.attr("sizes",j),i){f.attr("srcset",i);try{picturefill({elements:[f[0]]})}catch(t){console.error("Make sure you have included Picturefill version 2")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&l.addHtml(c),l.$slide.eq(c).addClass("lg-loaded")}l.$slide.eq(c).find(".lg-object").on("load.lg error.lg",function(){var b=0;e&&!a("body").hasClass("lg-from-hash")&&(b=e),setTimeout(function(){l.$slide.eq(c).addClass("lg-complete"),l.$el.trigger("onSlideItemLoad.lg",[c,e||0])},b)}),r&&r.html5&&!m&&l.$slide.eq(c).addClass("lg-complete"),d===!0&&(l.$slide.eq(c).hasClass("lg-complete")?l.preload(c):l.$slide.eq(c).find(".lg-object").on("load.lg error.lg",function(){l.preload(c)}))},e.prototype.slide=function(b,c,d){var e=this.$outer.find(".lg-current").index(),f=this;if(!f.lGalleryOn||e!==b){var g=this.$slide.length,h=f.lGalleryOn?this.s.speed:0,i=!1,j=!1;if(!f.lgBusy){if(this.s.download){var k;k=f.s.dynamic?f.s.dynamicEl[b].downloadUrl!==!1&&(f.s.dynamicEl[b].downloadUrl||f.s.dynamicEl[b].src):"false"!==f.$items.eq(b).attr("data-download-url")&&(f.$items.eq(b).attr("data-download-url")||f.$items.eq(b).attr("href")||f.$items.eq(b).attr("data-src")),k?(a("#lg-download").attr("href",k),f.$outer.removeClass("lg-hide-download")):f.$outer.addClass("lg-hide-download")}if(this.$el.trigger("onBeforeSlide.lg",[e,b,c,d]),f.lgBusy=!0,clearTimeout(f.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){f.addHtml(b)},h),this.arrowDisable(b),c){var l=b-1,m=b+1;0===b&&e===g-1?(m=0,l=g-1):b===g-1&&0===e&&(m=0,l=g-1),this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),f.$slide.eq(l).addClass("lg-prev-slide"),f.$slide.eq(m).addClass("lg-next-slide"),f.$slide.eq(b).addClass("lg-current")}else f.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),e>b?(j=!0,0!==b||e!==g-1||d||(j=!1,i=!0)):b>e&&(i=!0,b!==g-1||0!==e||d||(j=!0,i=!1)),j?(this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(e).addClass("lg-next-slide")):i&&(this.$slide.eq(b).addClass("lg-next-slide"),this.$slide.eq(e).addClass("lg-prev-slide")),setTimeout(function(){f.$slide.removeClass("lg-current"),f.$slide.eq(b).addClass("lg-current"),f.$outer.removeClass("lg-no-trans")},50);f.lGalleryOn?(setTimeout(function(){f.loadContent(b,!0,0)},this.s.speed+50),setTimeout(function(){f.lgBusy=!1,f.$el.trigger("onAfterSlide.lg",[e,b,c,d])},this.s.speed)):(f.loadContent(b,!0,f.s.backdropDuration),f.lgBusy=!1,f.$el.trigger("onAfterSlide.lg",[e,b,c,d])),f.lGalleryOn=!0,this.s.counter&&a("#lg-counter-current").text(b+1)}}},e.prototype.goToNextSlide=function(a){var b=this;b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.loop?(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))},e.prototype.goToPrevSlide=function(a){var b=this;b.lgBusy||(b.index>0?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.loop?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-left-end"),setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))},e.prototype.keyPress=function(){var c=this;this.$items.length>1&&a(b).on("keyup.lg",function(a){c.$items.length>1&&(37===a.keyCode&&(a.preventDefault(),c.goToPrevSlide()),39===a.keyCode&&(a.preventDefault(),c.goToNextSlide()))}),a(b).on("keydown.lg",function(a){c.s.escKey===!0&&27===a.keyCode&&(a.preventDefault(),c.$outer.hasClass("lg-thumb-open")?c.$outer.removeClass("lg-thumb-open"):c.destroy())})},e.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})},e.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),a>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},e.prototype.setTranslate=function(a,b,c){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+c+"px, 0px)"})},e.prototype.touchMove=function(b,c){var d=c-b;Math.abs(d)>15&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),d,0),this.setTranslate(a(".lg-prev-slide"),-this.$slide.eq(this.index).width()+d,0),this.setTranslate(a(".lg-next-slide"),this.$slide.eq(this.index).width()+d,0))},e.prototype.touchEnd=function(a){var b=this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){b.$outer.removeClass("lg-dragging"),0>a&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):a>0&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):Math.abs(a)<5&&b.$el.trigger("onSlideClick.lg"),b.$slide.removeAttr("style")}),setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},b.s.speed+100)},e.prototype.enableSwipe=function(){var a=this,b=0,c=0,d=!1;a.s.enableSwipe&&a.isTouch&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),c=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,c),d=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||(d?(d=!1,a.touchEnd(c-b)):a.$el.trigger("onSlideClick.lg"))}))},e.prototype.enableDrag=function(){var c=this,d=0,e=0,f=!1,g=!1;c.s.enableDrag&&!c.isTouch&&c.doCss()&&(c.$slide.on("mousedown.lg",function(b){c.$outer.hasClass("lg-zoomed")||(a(b.target).hasClass("lg-object")||a(b.target).hasClass("lg-video-play"))&&(b.preventDefault(),c.lgBusy||(c.manageSwipeClass(),d=b.pageX,f=!0,c.$outer.scrollLeft+=1,c.$outer.scrollLeft-=1,c.$outer.removeClass("lg-grab").addClass("lg-grabbing"),c.$el.trigger("onDragstart.lg")))}),a(b).on("mousemove.lg",function(a){f&&(g=!0,e=a.pageX,c.touchMove(d,e),c.$el.trigger("onDragmove.lg"))}),a(b).on("mouseup.lg",function(b){g?(g=!1,c.touchEnd(e-d),c.$el.trigger("onDragend.lg")):(a(b.target).hasClass("lg-object")||a(b.target).hasClass("lg-video-play"))&&c.$el.trigger("onSlideClick.lg"),f&&(f=!1,c.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},e.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1,c=this.$slide.length;this.s.loop&&(0===this.index?b=c-1:this.index===c-1&&(a=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),b>-1&&this.$slide.eq(b).addClass("lg-prev-slide"),this.$slide.eq(a).addClass("lg-next-slide")},e.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(b.deltaY>0?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})},e.prototype.closeGallery=function(){var b=this,c=!1;this.$outer.find(".lg-close").on("click.lg",function(){b.destroy()}),b.s.closable&&(b.$outer.on("mousedown.lg",function(b){c=!!(a(b.target).is(".lg-outer")||a(b.target).is(".lg-item ")||a(b.target).is(".lg-img-wrap"))}),b.$outer.on("mouseup.lg",function(d){(a(d.target).is(".lg-outer")||a(d.target).is(".lg-item ")||a(d.target).is(".lg-img-wrap")&&c)&&(b.$outer.hasClass("lg-dragging")||b.destroy())}))},e.prototype.destroy=function(c){var d=this;c||d.$el.trigger("onBeforeClose.lg"),a(b).scrollTop(d.prevScrollTop),c&&(d.s.dynamic||this.$items.off("click.lg click.lgcustom"),a.removeData(d.el,"lightGallery")),this.$el.off(".lg.tm"),a.each(a.fn.lightGallery.modules,function(a){d.modules[a]&&d.modules[a].destroy()}),this.lGalleryOn=!1,clearTimeout(d.hideBartimeout),this.hideBartimeout=!1,a(b).off(".lg"),a("body").removeClass("lg-on lg-from-hash"),d.$outer&&d.$outer.removeClass("lg-visible"),a(".lg-backdrop").removeClass("in"),setTimeout(function(){d.$outer&&d.$outer.remove(),a(".lg-backdrop").remove(),c||d.$el.trigger("onCloseAfter.lg")},d.s.backdropDuration+50)},a.fn.lightGallery=function(b){return this.each(function(){if(a.data(this,"lightGallery"))try{a(this).data("lightGallery").init()}catch(c){console.error("lightGallery has not initiated properly")}else a.data(this,"lightGallery",new e(this,b))})},a.fn.lightGallery.modules={}}(jQuery,window,document)});
/*!
 * clipboard.js v1.7.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT  Zeno Rocha
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t,e,n;return function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){function o(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=o},{}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}var r=t("./closest");e.exports=o},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var c=t("./is"),l=t("delegate");e.exports=o},{"./is":3,delegate:2}],5:[function(t,e,n){function o(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}e.exports=o},{}],6:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;r<a;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],7:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","select"],r);else if(void 0!==o)r(n,e("select"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function t(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function t(){var e=this,n="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[n?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function t(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function t(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function t(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function t(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function t(){this.removeFake()}},{key:"action",set:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function t(){return this._action}},{key:"target",set:function t(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function t(){return this._target}}]),t}();t.exports=c})},{select:5}],8:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if(void 0!==o)r(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var s=i(e),u=i(n),f=i(o),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return c(e,t),h(e,[{key:"resolveOptions",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function t(e){var n=this;this.listener=(0,f.default)(e,"click",function(t){return n.onClick(t)})}},{key:"onClick",value:function t(e){var n=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:"defaultAction",value:function t(e){return l("action",e)}},{key:"defaultTarget",value:function t(e){var n=l("target",e);if(n)return document.querySelector(n)}},{key:"defaultText",value:function t(e){return l("text",e)}},{key:"destroy",value:function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],n="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),e}(u.default);t.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});// JavaScript Document
/*! jQuery UI - v1.9.2 - 2016-12-21
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.datepicker.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(t,e){function i(e,i){var n,a,o,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,a=n.name,e.href&&a&&"map"===n.nodeName.toLowerCase()?(o=t("img[usemap=#"+a+"]")[0],!!o&&s(o)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var s=this;setTimeout(function(){t(s).focus(),i&&i.call(s)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,a=t(this[0]);a.length&&a[0]!==document;){if(s=a.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(a,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(o,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,i)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=e.length?!0:!1,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,a=t.ui[e].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,s,n,a,o){return t.ui.isOverAxis(e,s,a)&&t.ui.isOverAxis(i,n,o)}}))})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:" ",nextText:" ",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["","","","","","",""],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["","","","","","",""],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(t,e){$.extend(t,e);for(var i in e)(null==e[i]||e[i]==undefined)&&(t[i]=e[i]);return t}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){var i=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var n=this._get(e,"showOn");if(("focus"==n||"both"==n)&&t.focus(this._showDatepicker),"button"==n||"both"==n){var a=this._get(e,"buttonText"),o=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?a:$("<img/>").attr({src:o,alt:a,title:a}))),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])):$.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var s=function(t){for(var e=0,i=0,s=0;t.length>s;s++)t[s].length>e&&(e=t[s].length,i=s);return i};e.setMonth(s(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(s(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var a=this._dialogInst;if(!a){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},$.data(this._dialogInput[0],PROP_NAME,a)}if(extendRemove(a.settings,s||{}),e=e&&e.constructor==Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[r/2-100+l,h/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==s?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==s||"span"==s)&&e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):s?"all"==e?$.extend({},s.settings):this._get(s,e):null;var n=e||{};if("string"==typeof e&&(n={},n[e]=i),s){this._curInst==s&&this._hideDatepicker();var a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(s,"min"),r=this._getMinMaxDate(s,"max");extendRemove(s.settings,n),null!==o&&n.dateFormat!==undefined&&n.minDate===undefined&&(s.settings.minDate=this._formatDate(s,o)),null!==r&&n.dateFormat!==undefined&&n.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,r)),this._attachments($(t),s),this._autoSize(s),this._setDate(s,a),this._updateAlternate(s),this._updateDatepicker(s)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,s=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);n[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,n[0]);var a=$.datepicker._get(e,"onSelect");if(a){var o=$.datepicker._formatDate(e);a.apply(e.input?e.input[0]:null,[o,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),s=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e));i&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(s){$.datepicker.log(s)}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!=t.nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),s=i?i.apply(t,[t,e]):{};if(s!==!1){extendRemove(e.settings,s),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var n=!1;$(t).parents().each(function(){return n|="fixed"==$(this).css("position"),!n});var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),a=$.datepicker._checkOffset(e,a,n),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!e.inline){var o=$.datepicker._get(e,"showAnim"),r=$.datepicker._get(e,"duration"),h=function(){var t=e.dpDiv.find("iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?e.dpDiv.show(o,$.datepicker._get(e,"showOptions"),r,h):e.dpDiv[o||"show"](o?r:null,h),o&&r||h(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}}},_updateDatepicker:function(t){this.maxRows=4;var e=$.datepicker._getBorders(t.dpDiv);instActive=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i=t.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-e[0],top:-e[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var s=this._getNumberOfMonths(t),n=s[1],a=17;if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width","100%"),t.dpDiv[(1!=s[0]||1!=s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var o=t.yearshtml;setTimeout(function(){o===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),o=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),h=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-a:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+o?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&r>s?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>h&&h>n?Math.abs(n+o):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var s=$(t).offset();return[s.left,s.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME))&&this._datepickerShowing){var i=this._get(e,"showAnim"),s=this._get(e,"duration"),n=function(){$.datepicker._tidyDialog(e)};$.effects&&($.effects.effect[i]||$.effects[i])?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),s,n):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1;var a=this._get(e,"onClose");a&&a.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id!=$.datepicker._mainDivId&&0==e.parents("#"+$.datepicker._mainDivId).length&&!e.hasClass($.datepicker.markerClassName)&&!e.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||e.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var s=$(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,e+("M"==i?this._get(n,"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var s=new Date;i.selectedDay=s.getDate(),i.drawMonth=i.selectedMonth=s.getMonth(),i.drawYear=i.selectedYear=s.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var s=$(t),n=this._getInst(s[0]);n["selected"+("M"==i?"Month":"Year")]=n["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,e,i,s){var n=$(t);if(!$(s).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(n[0])){var a=this._getInst(n[0]);a.selectedDay=a.currentDay=$("a",s).html(),a.selectedMonth=a.currentMonth=e,a.selectedYear=a.currentYear=i,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))}},_clearDate:function(t){var e=$(t);this._getInst(e[0]),this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),s=this._getInst(i[0]);e=null!=e?e:this._formatDate(s),s.input&&s.input.val(e),this._updateAlternate(s);var n=this._get(s,"onSelect");n?n.apply(s.input?s.input[0]:null,[e,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t));$(e).each(function(){$(this).val(n)})}},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(null==t||null==e)throw"Invalid arguments";if(e="object"==typeof e?""+e:e+"",""==e)return null;var s=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10);for(var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=-1,l=-1,u=-1,c=-1,d=!1,p=function(e){var i=t.length>_+1&&t.charAt(_+1)==e;return i&&_++,i},f=function(t){var i=p(t),s="@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2,n=RegExp("^\\d{1,"+s+"}"),a=e.substring(v).match(n);if(!a)throw"Missing number at position "+v;return v+=a[0].length,parseInt(a[0],10)},m=function(t,i,s){var n=$.map(p(t)?s:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),a=-1;if($.each(n,function(t,i){var s=i[1];return e.substr(v,s.length).toLowerCase()==s.toLowerCase()?(a=i[0],v+=s.length,!1):undefined}),-1!=a)return a+1;throw"Unknown name at position "+v},g=function(){if(e.charAt(v)!=t.charAt(_))throw"Unexpected literal at position "+v;v++},v=0,_=0;t.length>_;_++)if(d)"'"!=t.charAt(_)||p("'")?g():d=!1;else switch(t.charAt(_)){case"d":u=f("d");break;case"D":m("D",n,a);break;case"o":c=f("o");break;case"m":l=f("m");break;case"M":l=m("M",o,r);break;case"y":h=f("y");break;case"@":var b=new Date(f("@"));h=b.getFullYear(),l=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((f("!")-this._ticksTo1970)/1e4);h=b.getFullYear(),l=b.getMonth()+1,u=b.getDate();break;case"'":p("'")?g():d=!0;break;default:g()}if(e.length>v){var y=e.substr(v);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==h?h=(new Date).getFullYear():100>h&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(s>=h?0:-100)),c>-1)for(l=1,u=c;;){var w=this._getDaysInMonth(h,l-1);if(w>=u)break;l++,u-=w}var b=this._daylightSavingAdjust(new Date(h,l-1,u));if(b.getFullYear()!=h||b.getMonth()+1!=l||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,r=function(e){var i=t.length>d+1&&t.charAt(d+1)==e;return i&&d++,i},h=function(t,e,i){var s=""+e;if(r(t))for(;i>s.length;)s="0"+s;return s},l=function(t,e,i,s){return r(t)?s[e]:i[e]},u="",c=!1;if(e)for(var d=0;t.length>d;d++)if(c)"'"!=t.charAt(d)||r("'")?u+=t.charAt(d):c=!1;else switch(t.charAt(d)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),s,n);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),a,o);break;case"y":u+=r("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":r("'")?u+="'":c=!0;break;default:u+=t.charAt(d)}return u},_possibleChars:function(t){for(var e="",i=!1,s=function(e){var i=t.length>n+1&&t.charAt(n+1)==e;return i&&n++,i},n=0;t.length>n;n++)if(i)"'"!=t.charAt(n)||s("'")?e+=t.charAt(n):i=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(n)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,s,n=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null;i=s=this._getDefaultDate(t);var o=this._getFormatConfig(t);try{i=this.parseDate(n,a,o)||s}catch(r){this.log(r),a=e?"":a}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=a?i.getDate():0,t.currentMonth=a?i.getMonth():0,t.currentYear=a?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},n=function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,$.datepicker._getFormatConfig(t))}catch(i){}for(var s=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=r.exec(e);h;){switch(h[2]||"d"){case"d":case"D":o+=parseInt(h[1],10);break;case"w":case"W":o+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(h[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,a))}h=r.exec(e)}return new Date(n,a,o)},a=null==e||""===e?i:"string"==typeof e?n(e):"number"==typeof e?isNaN(e)?i:s(e):new Date(e.getTime());return a=a&&"Invalid Date"==""+a?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),n==t.selectedMonth&&a==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),s=this._get(t,"showButtonPanel"),n=this._get(t,"hideIfNoPrevNext"),a=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),r=this._get(t,"showCurrentAtPos"),h=this._get(t,"stepMonths"),l=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-r,f=t.drawYear;if(0>p&&(p+=12,f--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-o[0]*o[1]+1,d.getDate()));for(m=c&&c>m?c:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)p--,0>p&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var g=this._get(t,"prevText");g=a?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-h,1)),this._getFormatConfig(t)):g;var v=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":n?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",_=this._get(t,"nextText");_=a?this.formatDate(_,this._daylightSavingAdjust(new Date(f,p+h,1)),this._getFormatConfig(t)):_;var b=this._canAdjustMonth(t,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>":n?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>",y=this._get(t,"currentText"),w=this._get(t,"gotoCurrent")&&t.currentDay?u:e;y=a?this.formatDate(y,w,this._getFormatConfig(t)):y;var x=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"</button>",k=s?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(t,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(i?"":x)+"</div>":"",D=parseInt(this._get(t,"firstDay"),10);D=isNaN(D)?0:D;var C=this._get(t,"showWeek"),T=this._get(t,"dayNames");this._get(t,"dayNamesShort");var M=this._get(t,"dayNamesMin"),S=this._get(t,"monthNames"),N=this._get(t,"monthNamesShort"),I=this._get(t,"beforeShowDay"),P=this._get(t,"showOtherMonths"),A=this._get(t,"selectOtherMonths");this._get(t,"calculateWeek")||this.iso8601Week;for(var z=this._getDefaultDate(t),H="",E=0;o[0]>E;E++){var O="";this.maxRows=4;for(var F=0;o[1]>F;F++){var W=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),L=" ui-corner-all",R="";if(l){if(R+='<div class="ui-datepicker-group',o[1]>1)switch(F){case 0:R+=" ui-datepicker-group-first",L=" ui-corner-"+(i?"right":"left");break;case o[1]-1:R+=" ui-datepicker-group-last",L=" ui-corner-"+(i?"left":"right");break;default:R+=" ui-datepicker-group-middle",L=""}R+='">'}R+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+L+'">'+(/all|left/.test(L)&&0==E?i?b:v:"")+(/all|right/.test(L)&&0==E?i?v:b:"")+this._generateMonthYearHeader(t,p,f,c,d,E>0||F>0,S,N)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var j=C?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",Y=0;7>Y;Y++){var B=(Y+D)%7;j+="<th"+((Y+D+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+T[B]+'">'+M[B]+"</span></th>"}R+=j+"</tr></thead><tbody>";var K=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,K));var q=(this._getFirstDayOfMonth(f,p)-D+7)%7,U=Math.ceil((q+K)/7),V=l?this.maxRows>U?this.maxRows:U:U;this.maxRows=V;for(var J=this._daylightSavingAdjust(new Date(f,p,1-q)),Q=0;V>Q;Q++){R+="<tr>";for(var X=C?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(J)+"</td>":"",Y=0;7>Y;Y++){var G=I?I.apply(t.input?t.input[0]:null,[J]):[!0,""],Z=J.getMonth()!=p,te=Z&&!A||!G[0]||c&&c>J||d&&J>d;X+='<td class="'+((Y+D+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(J.getTime()==W.getTime()&&p==t.selectedMonth&&t._keyEvent||z.getTime()==J.getTime()&&z.getTime()==W.getTime()?" "+this._dayOverClass:"")+(te?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!P?"":" "+G[1]+(J.getTime()==u.getTime()?" "+this._currentClass:"")+(J.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!P||!G[2]?"":' title="'+G[2]+'"')+(te?"":' data-handler="selectDay" data-event="click" data-month="'+J.getMonth()+'" data-year="'+J.getFullYear()+'"')+">"+(Z&&!P?"&#xa0;":te?'<span class="ui-state-default">'+J.getDate()+"</span>":'<a class="ui-state-default'+(J.getTime()==e.getTime()?" ui-state-highlight":"")+(J.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+J.getDate()+"</a>")+"</td>",J.setDate(J.getDate()+1),J=this._daylightSavingAdjust(J)
}R+=X+"</tr>"}p++,p>11&&(p=0,f++),R+="</tbody></table>"+(l?"</div>"+(o[0]>0&&F==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),O+=R}H+=O}return H+=k+($.ui.ie6&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,H},_generateMonthYearHeader:function(t,e,i,s,n,a,o,r){var h=this._get(t,"changeMonth"),l=this._get(t,"changeYear"),u=this._get(t,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',d="";if(a||!h)d+='<span class="ui-datepicker-month">'+o[e]+"</span>";else{var p=s&&s.getFullYear()==i,f=n&&n.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!p||m>=s.getMonth())&&(!f||n.getMonth()>=m)&&(d+='<option value="'+m+'"'+(m==e?' selected="selected"':"")+">"+r[m]+"</option>");d+="</select>"}if(u||(c+=d+(!a&&h&&l?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!l)c+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),_=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(e)?v:e},b=_(g[0]),y=Math.max(b,_(g[1]||""));for(b=s?Math.max(b,s.getFullYear()):b,y=n?Math.min(y,n.getFullYear()):y,t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';y>=b;b++)t.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";t.yearshtml+="</select>",c+=t.yearshtml,t.yearshtml=null}return c+=this._get(t,"yearSuffix"),u&&(c+=(!a&&h&&l?"":"&#xa0;")+d),c+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"==i?e:0),n=t.drawMonth+("M"==i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"==i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return n=s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$})(jQuery);

// 
function disableAllTheseDays(date) {
    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
	//alert(disabledDays[0]);
    for (i = 0; i < disabledDays.length; i++) {
        if($.inArray((m+1) + '-' + d + '-' + y,disabledDays) != -1) {
            return [false];
        }
    }
    return [true];
}





//var nprogress=0; //    ajax 	
function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }


function AjaxClient(dir_name,  // 
                    file_name, //   php
					typeQ, //  GET - POST
					data, //       username=Vasya&age=18&sex=male
					result_function,  //    
					varibl, //     . 
					form_id,  //id        0
					nprogress,  
 					cache,
					onyouself  // ajax  .  jax   
					) {	
					if(form_id==0)
					{
					   var data__ss=data;	
					} else
					{
					   var data__ss=jQuery("#"+form_id).serialize();
					}
					var vv='';
					if(varibl!=null)
					{
						
						if (typeof(varibl) == "string") 
						{
							vv=',"'+varibl+'"';
						} else
						{

						vv=','+varibl;
						}
					}
					
					var cache_ajax=true;
					if (cache === undefined) {
						
					} else
					{
						cache_ajax=cache;
					}
					
					if (onyouself=== undefined) 
					{
						var hop_url='Ajax/'+dir_name+'/'+file_name+'.php';
					} else
					{
						if(onyouself=='local')
						{
						var hop_url=window.location.href;
						} else
						{
						var hop_url=onyouself;	
						}
					}
					if ((nprogress=== undefined)||(nprogress== 0)) 
					{
						/*
					$('#nprogress').show();
					var width=getRandomInt(10,50);
					var width1=getRandomInt(50,70);
					var width2=getRandomInt(70,90);
					var width3=getRandomInt(95,97);
		            $('#nprogress .bar').animate({width: width+"%"}, 1000, function() {  $('#nprogress .bar').animate({width: width1+"%"}, 1000, function() { $('#nprogress .bar').animate({width: width2+"%"}, 2000, function() { $('#nprogress .bar').animate({width: width3+"%"}, 4000, function() {  }); }); }); });
					*/
						$('.loader_ada_forms').show();
						$('.loader_ada1_forms').addClass('select_ada');
						
					}
                    jQuery.ajax({
                    url:     hop_url, //  
                    type:     typeQ, // 
                    dataType: "json",
					cache: cache_ajax,

                    data: data__ss,  //form_id - id  html   
                    success: function(jsondata) { //  
					if ((nprogress=== undefined)||(nprogress== 0)) 
					{
						/*
					  $('#nprogress .bar').stop(true);
					  $('#nprogress .bar').animate({width: "100%"}, 500, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
					*/
						$('.loader_ada_forms').hide();
						$('.loader_ada1_forms').removeClass('select_ada');
					}
					//window.jsozn=$.parseJSON(jsondata);
                    window.jsozn=jsondata;
					//alert(jsozn['debug']);

					if((jsozn['debug']!='')&&(jsozn['debug']!==undefined))
					{
					   //$('.w_size').show();
					   //$('.w_size').empty().append(jsozn['debug']);
					   //alert(jsozn['debug']);

						alert_message('error',' '+jsozn['debug']);

					}
					//alert(result_function);
					
					$.globalEval(result_function+'(jsozn'+vv+')');
					
					
					
                },
                error: function(response) { // 
                }
             });
        }
 
//    Ajax/best/add.php
/*
AjaxClient('best','add','POST',0,'AfterBestAdd',50,'add_best');
AfterBestAdd(data,varibl)
{
	if ( data.status == 'ok' )
	{

	}		
		
	if ( data.status == 'error' )
	{
		
	}	

}

##add.php
$_POST["name"]   
$aRes = array('status' => 'ok', 'nickname' => 'Aramis');
require_once('Services_JSON.php');
$oJson = new Services_JSON();
echo $oJson->encode($aRes);
*/

//     
/*
AjaxClient('best','add1','POST','username=Vasya&age=18&sex=male','AfterBestAdd',null,0);
AfterBestAdd(data)
{
}
##add1.php
$_POST['username']
$_REQUEST['username']   
*/

(function(a){a.fn.circliful=function(b,d){var c=a.extend({fgcolor:"#556b2f",bgcolor:"#eee",fill:false,width:15,dimension:200,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null},b);return this.each(function(){var w=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border"];var f={};var F="";var n=0;var t=a(this);var A=false;var v,G;t.addClass("circliful");e(t);if(t.data("text")!=undefined){v=t.data("text");if(t.data("icon")!=undefined){F=a("<i></i>").addClass("fa "+a(this).data("icon")).css({color:f.iconcolor,"font-size":f.iconsize})}if(t.data("type")!=undefined){j=a(this).data("type");if(j=="half"){s(t,"circle-text-half",(f.dimension/1.45))}else{s(t,"circle-text",f.dimension)}}else{s(t,"circle-text",f.dimension)}}if(a(this).data("total")!=undefined&&a(this).data("part")!=undefined){var I=a(this).data("total")/100;percent=((a(this).data("part")/I)/100).toFixed(3);n=(a(this).data("part")/I).toFixed(3)}else{if(a(this).data("percent")!=undefined){percent=a(this).data("percent")/100;n=a(this).data("percent")}else{percent=c.percent/100}}if(a(this).data("info")!=undefined){G=a(this).data("info");if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){D(t,0.9)}else{D(t,1.25)}}else{D(t,1.25)}}a(this).width(f.dimension+"px");var i=a("<canvas></canvas>").attr({width:f.dimension,height:f.dimension}).appendTo(a(this)).get(0);var g=i.getContext("2d");var r=i.width/2;var q=i.height/2;var C=f.percent*360;var H=C*(Math.PI/180);var l=i.width/2.5;var B=2.3*Math.PI;var z=0;var E=false;var o=f.animationstep===0?n:0;var p=Math.max(f.animationstep,0);var u=Math.PI*2;var h=Math.PI/2;var j="";var k=true;if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){B=2*Math.PI;z=3.13;u=Math.PI*1;h=Math.PI/0.996}}function s(J,x,y){a("<span></span>").appendTo(J).addClass(x).text(v).prepend(F).css({"line-height":y+"px","font-size":f.fontsize+"px"})}function D(y,x){a("<span></span>").appendTo(y).addClass("circle-info-half").css("line-height",(f.dimension*x)+"px")}function e(x){a.each(w,function(y,J){if(x.data(J)!=undefined){f[J]=x.data(J)}else{f[J]=a(c).attr(J)}if(J=="fill"&&x.data("fill")!=undefined){A=true}})}function m(x){g.clearRect(0,0,i.width,i.height);g.beginPath();g.arc(r,q,l,z,B,false);g.lineWidth=f.width+1;g.strokeStyle=f.bgcolor;g.stroke();if(A){g.fillStyle=f.fill;g.fill()}g.beginPath();g.arc(r,q,l,-(h),((u)*x)-h,false);if(f.border=="outline"){g.lineWidth=f.width+13}else{if(f.border=="inline"){g.lineWidth=f.width-13}}g.strokeStyle=f.fgcolor;g.stroke();if(o<n){o+=p;requestAnimationFrame(function(){m(Math.min(o,n)/100)},t)}if(o==n&&k&&typeof(b)!="undefined"){if(a.isFunction(b.complete)){b.complete();k=false}}}m(o/100)})}}(jQuery));
/* jQuery ui-datepicker extension */

/**
 *
 * https://gist.github.com/Artemeey/8bacd37964a8069a2eeee8c9b0bd2e44/
 *
 * Version: 1.0 (15.06.2016)
 * Requires: jQuery v1.8+
 * Requires: jQuery-UI v1.10+
 *
 * Copyright (c) 2016 Artemeey
 * Under MIT and GPL licenses:
 *  http://www.opensource.org/licenses/mit-license.php
 *  http://www.gnu.org/licenses/gpl.html
 *
 * sample:
 * $('.datepicker').datepicker({
		range:'period', // 'period' or 'multiple'
		onSelect:function(dateText, inst, extensionRange){
			// range - new argument!
			switch(inst.settings.range){
				case 'period':
					console.log(extensionRange.startDateText);
					console.log(extensionRange.endDateText);
					console.log(extensionRange.startDate);
					console.log(extensionRange.endDate);
					break;
				case 'multiple':
					console.log(extensionRange.dates); // object, width UTC-TIME keys
					console.log(extensionRange.datesText); // object, width UTC-TIME keys
					break;
			}
		}
	});
 *
 * extension styles:
 * .selected
 * .selected-start
 * .selected-end
 * .first-of-month
 * .last-of-month
 *
 */
 
 $.datepicker._get_original=$.datepicker._get,$.datepicker._get=function(t,e){var i=$.datepicker._get_original(t,e),a=t.settings.range;if(!a)return i;var s=this;switch(a){case"period":case"multiple":var n=$(this.dpDiv).data("datepickerExtensionRange");switch(n||(n=new _datepickerExtension,$(this.dpDiv).data("datepickerExtensionRange",n)),n.range=a,n.range_multiple_max=t.settings.range_multiple_max||0,e){case"onSelect":var r=i;r||(r=function(){}),i=function(t,e){n.onSelect(t,e),r(t,e,n),s._datepickerShowing=!1,setTimeout(function(){s._updateDatepicker(e),s._datepickerShowing=!0}),n.setClassActive(e)};break;case"beforeShowDay":var r=i;r||(r=function(){return[!0,""]}),i=function(t){var e=r(t);return e=n.fillDay(t,e)};break;case"beforeShow":var r=i;r||(r=function(){}),i=function(t,e){r(t,e),n.setClassActive(e)};break;case"onChangeMonthYear":var r=i;r||(r=function(){}),i=function(t,e,i){r(t,e,i),n.setClassActive(i)}}}return i},$.datepicker._setDate_original=$.datepicker._setDate,$.datepicker._setDate=function(t,e,i){var a=t.settings.range;if(!a)return $.datepicker._setDate_original(t,e,i);var s=this.dpDiv.data("datepickerExtensionRange");if(!s)return $.datepicker._setDate_original(t,e,i);switch(a){case"period":("object"!=typeof e||void 0==e.length)&&(e=[e,e]),s.step=0,$.datepicker._setDate_original(t,e[0],i),s.startDate=this._getDate(t),s.startDateText=this._formatDate(t),$.datepicker._setDate_original(t,e[1],i),s.endDate=this._getDate(t),s.endDateText=this._formatDate(t),s.setClassActive(t);break;case"multiple":("object"!=typeof e||void 0==e.length)&&(e=[e]),s.dates=[],s.datesText=[];var n=this;$.map(e,function(e){$.datepicker._setDate_original(t,e,i),s.dates.push(n._getDate(t)),s.datesText.push(n._formatDate(t))}),s.setClassActive(t)}};var _datepickerExtension=function(){this.range=!1,this.range_multiple_max=0,this.step=0,this.dates=[],this.datesText=[],this.startDate=null,this.endDate=null,this.startDateText="",this.endDateText="",this.onSelect=function(t,e){switch(this.range){case"period":return this.onSelectPeriod(t,e);case"multiple":return this.onSelectMultiple(t,e)}},this.onSelectPeriod=function(t,e){this.step++,this.step%=2,this.step?(this.startDate=this.getSelectedDate(e),this.endDate=this.startDate,this.startDateText=t,this.endDateText=this.startDateText):(this.endDate=this.getSelectedDate(e),this.endDateText=t,this.startDate.getTime()>this.endDate.getTime()&&(this.endDate=this.startDate,this.startDate=this.getSelectedDate(e),this.endDateText=this.startDateText,this.startDateText=t))},this.onSelectMultiple=function(t,e){var i=this.getSelectedDate(e),a=-1;$.map(this.dates,function(t,e){t.getTime()==i.getTime()&&(a=e)});var s=$.inArray(t,this.datesText);-1!=a?this.dates.splice(a,1):this.dates.push(i),-1!=s?this.datesText.splice(s,1):this.datesText.push(t),this.range_multiple_max&&this.dates.length>this.range_multiple_max&&(this.dates.splice(0,1),this.datesText.splice(0,1))},this.fillDay=function(t,e){var i=e[1];switch(1==t.getDate()&&(i+=" first-of-month"),t.getDate()==new Date(t.getFullYear(),t.getMonth()+1,0).getDate()&&(i+=" last-of-month"),e[1]=i.trim(),this.range){case"period":return this.fillDayPeriod(t,e);case"multiple":return this.fillDayMultiple(t,e)}},this.fillDayPeriod=function(t,e){if(!this.startDate||!this.endDate)return e;var i=e[1];return t>=this.startDate&&t<=this.endDate&&(i+=" selected"),t.getTime()==this.startDate.getTime()&&(i+=" selected-start"),t.getTime()==this.endDate.getTime()&&(i+=" selected-end"),e[1]=i.trim(),e},this.fillDayMultiple=function(t,e){var i=e[1],a=!1;return $.map(this.dates,function(e){e.getTime()==t.getTime()&&(a=!0)}),a&&(i+=" selected selected-start selected-end"),e[1]=i.trim(),e},this.getSelectedDate=function(t){return new Date(t.selectedYear,t.selectedMonth,t.selectedDay)},this.setClassActive=function(t){var e=this;setTimeout(function(){$("td.selected > *",t.dpDiv).addClass("ui-state-active"),"multiple"==e.range&&$("td:not(.selected)",t.dpDiv).removeClass("ui-datepicker-current-day").children().removeClass("ui-state-active")})}};
/*! jQuery UI - v1.9.2 - 2014-03-21
* http://jqueryui.com
* Includes: jquery.ui.effect.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

jQuery.effects||function(e,t){var i=e.uiBackCompat!==!1,a="ui-effects-";e.effects={effect:{}},function(t,i){function a(e,t,i){var a=c[t.type]||{};return null==e?i||!t.def?null:t.def:(e=a.floor?~~e:parseFloat(e),isNaN(e)?t.def:a.mod?(e+a.mod)%a.mod:0>e?0:e>a.max?a.max:e)}function s(e){var a=u(),s=a._rgba=[];return e=e.toLowerCase(),m(l,function(t,n){var r,o=n.re.exec(e),h=o&&n.parse(o),l=n.space||"rgba";return h?(r=a[l](h),a[d[l].cache]=r[d[l].cache],s=a._rgba=r._rgba,!1):i}),s.length?("0,0,0,0"===s.join()&&t.extend(s,r.transparent),a):r[e]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var r,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),h=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,i,a,s){return new t.Color.fn.parse(e,i,a,s)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},f=t("<p>")[0],m=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(n,o,h,l){if(n===i)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=i);var c=this,p=t.type(n),f=this._rgba=[];return o!==i&&(n=[n,o,h,l],p="array"),"string"===p?this.parse(s(n)||r._default):"array"===p?(m(d.rgba.props,function(e,t){f[t.idx]=a(n[t.idx],t)}),this):"object"===p?(n instanceof u?m(d,function(e,t){n[t.cache]&&(c[t.cache]=n[t.cache].slice())}):m(d,function(t,i){var s=i.cache;m(i.props,function(e,t){if(!c[s]&&i.to){if("alpha"===e||null==n[e])return;c[s]=i.to(c._rgba)}c[s][t.idx]=a(n[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,i.from&&(c._rgba=i.from(c[s])))}),this):i},is:function(e){var t=u(e),a=!0,s=this;return m(d,function(e,n){var r,o=t[n.cache];return o&&(r=s[n.cache]||n.to&&n.to(s._rgba)||[],m(n.props,function(e,t){return null!=o[t.idx]?a=o[t.idx]===r[t.idx]:i})),a}),a},_space:function(){var e=[],t=this;return m(d,function(i,a){t[a.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=u(e),s=i._space(),n=d[s],r=0===this.alpha()?u("transparent"):this,o=r[n.cache]||n.to(r._rgba),h=o.slice();return i=i[n.cache],m(n.props,function(e,s){var n=s.idx,r=o[n],l=i[n],u=c[s.type]||{};null!==l&&(null===r?h[n]=l:(u.mod&&(l-r>u.mod/2?r+=u.mod:r-l>u.mod/2&&(r-=u.mod)),h[n]=a((l-r)*t+r,s)))}),this[s](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),a=i.pop(),s=u(e)._rgba;return u(t.map(i,function(e,t){return(1-a)*s[t]+a*e}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),a=i.pop();return e&&i.push(~~(255*a)),"#"+t.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,a=e[0]/255,s=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(a,s,n),h=Math.min(a,s,n),l=o-h,u=o+h,d=.5*u;return t=h===o?0:a===o?60*(s-n)/l+360:s===o?60*(n-a)/l+120:60*(a-s)/l+240,i=0===d||1===d?d:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],a=e[2],s=e[3],r=.5>=a?a*(1+i):a+i-a*i,o=2*a-r;return[Math.round(255*n(o,r,t+1/3)),Math.round(255*n(o,r,t)),Math.round(255*n(o,r,t-1/3)),s]},m(d,function(e,s){var n=s.props,r=s.cache,o=s.to,l=s.from;u.fn[e]=function(e){if(o&&!this[r]&&(this[r]=o(this._rgba)),e===i)return this[r].slice();var s,h=t.type(e),d="array"===h||"object"===h?e:arguments,c=this[r].slice();return m(n,function(e,t){var i=d["object"===h?e:t.idx];null==i&&(i=c[t.idx]),c[t.idx]=a(i,t)}),l?(s=u(l(c)),s[r]=c,s):u(c)},m(n,function(i,a){u.fn[i]||(u.fn[i]=function(s){var n,r=t.type(s),o="alpha"===i?this._hsla?"hsla":"rgba":e,l=this[o](),u=l[a.idx];return"undefined"===r?u:("function"===r&&(s=s.call(this,u),r=t.type(s)),null==s&&a.empty?this:("string"===r&&(n=h.exec(s),n&&(s=u+parseFloat(n[2])*("+"===n[1]?1:-1))),l[a.idx]=s,this[o](l)))})})}),m(o,function(e,i){t.cssHooks[i]={set:function(e,a){var n,r,o="";if("string"!==t.type(a)||(n=s(a))){if(a=u(n||a),!p.rgba&&1!==a._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===o||"transparent"===o)&&r&&r.style;)try{o=t.css(r,"backgroundColor"),r=r.parentNode}catch(h){}a=a.blend(o&&"transparent"!==o?o:"_default")}a=a.toRgbaString()}try{e.style[i]=a}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,a){t["border"+a+"Color"]=e}),t}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t,i,a=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(a&&a.length&&a[0]&&a[a[0]])for(i=a.length;i--;)t=a[i],"string"==typeof a[t]&&(s[e.camelCase(t)]=a[t]);else for(t in a)"string"==typeof a[t]&&(s[t]=a[t]);return s}function a(t,i){var a,s,r={};for(a in i)s=i[a],t[a]!==s&&(n[a]||(e.fx.step[a]||!isNaN(parseFloat(s)))&&(r[a]=s));return r}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,n,r,o){var h=e.speed(n,r,o);return this.queue(function(){var n,r=e(this),o=r.attr("class")||"",l=h.children?r.find("*").andSelf():r;l=l.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),n=function(){e.each(s,function(e,i){t[i]&&r[i+"Class"](t[i])})},n(),l=l.map(function(){return this.end=i.call(this.el[0]),this.diff=a(this.start,this.end),this}),r.attr("class",o),l=l.map(function(){var t=this,i=e.Deferred(),a=jQuery.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,a),i.promise()}),e.when.apply(e,l.get()).done(function(){n(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,a,s){return i?e.effects.animateClass.call(this,{add:t},i,a,s):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,a,s){return i?e.effects.animateClass.call(this,{remove:t},i,a,s):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,a,s,n,r){return"boolean"==typeof a||a===t?s?e.effects.animateClass.call(this,a?{add:i}:{remove:i},s,n,r):this._toggleClass(i,a):e.effects.animateClass.call(this,{toggle:i},a,s,n)},switchClass:function(t,i,a,s,n){return e.effects.animateClass.call(this,{add:i,remove:t},a,s,n)}})}(),function(){function s(t,i,a,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,a=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=a,a=i,i={}),e.isFunction(a)&&(s=a,a=null),i&&e.extend(t,i),a=a||i.duration,t.duration=e.fx.off?0:"number"==typeof a?a:a in e.fx.speeds?e.fx.speeds[a]:e.fx.speeds._default,t.complete=s||i.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:i&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(a+t[i],e[0].style[t[i]])},restore:function(e,i){var s,n;for(n=0;i.length>n;n++)null!==i[n]&&(s=e.data(a+i[n]),s===t&&(s=""),e.css(i[n],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,a;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=e[1]/t.width}return{x:a,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},a=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},n=document.activeElement;try{n.id}catch(r){n=document.body}return t.wrap(a),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),a=t.parent(),"static"===t.css("position")?(a.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,a){i[a]=t.css(a),isNaN(parseInt(i[a],10))&&(i[a]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),a.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,a,s){return s=s||{},e.each(i,function(e,i){var n=t.cssUnit(i);n[0]>0&&(s[i]=n[0]*a+n[1])}),s}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(n)&&n.call(s[0]),e.isFunction(t)&&t()}var s=e(this),n=a.complete,r=a.mode;(s.is(":hidden")?"hide"===r:"show"===r)?i():o.call(s[0],a,i)}var a=s.apply(this,arguments),n=a.mode,r=a.queue,o=e.effects.effect[a.effect],h=!o&&i&&e.effects[a.effect];return e.fx.off||!o&&!h?n?this[n](a.duration,a.complete):this.each(function(){a.complete&&a.complete.call(this)}):o?r===!1?this.each(t):this.queue(r||"fx",t):h.call(this,{options:a,duration:a.duration,callback:a.complete,mode:a.mode})},_show:e.fn.show,show:function(e){if(n(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(n(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(n(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),a=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(a=[parseFloat(i),t])}),a}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery);




/* ------------------------------------------------------------------------
Class: freezeHeader
Use:freeze header row in html table
Example 1:  $('#tableid').freezeHeader();
Example 2:  $("#tableid").freezeHeader({ 'height': '300px' });
Example 3:  $("table").freezeHeader();
Example 4:  $(".table2").freezeHeader();
Example 5:  $("#tableid").freezeHeader({ 'offset': '50px' });
Author(s): Laerte Mercier Junior, Larry A. Hendrix
Version: 1.0.8
-------------------------------------------------------------------------*/
(function ($) {
    var TABLE_ID = 0;
    $.fn.freezeHeader = function (params) {

        var copiedHeader = false;

        function freezeHeader(elem) {
            var idObj = elem.attr('id') || ('tbl-' + (++TABLE_ID));
            if (elem.length > 0 && elem[0].tagName.toLowerCase() == "table") {

                var obj = {
                    id: idObj,
                    grid: elem,
                    container: null,
                    header: null,
                    divScroll: null,
                    openDivScroll: null,
                    closeDivScroll: null,
                    scroller: null
                };

                if (params && params.height !== undefined) {
                    obj.divScroll = '<div id="hdScroll' + obj.id + '" style="height: ' + params.height + '; overflow-y: scroll">';
                    obj.closeDivScroll = '</div>';
                }

                obj.header = obj.grid.find('thead');

                if (params && params.height !== undefined) {
                    if ($('#hdScroll' + obj.id).length == 0) {
                        obj.grid.wrapAll(obj.divScroll);
                    }
                }

                obj.scroller = params && params.height !== undefined
                   ? $('#hdScroll' + obj.id)
                   : $(window);

                if (params && params.scrollListenerEl !== undefined) {
                    obj.scroller = params.scrollListenerEl;
                }
                obj.scroller.on('scroll', function () {
                    if ($('#hd' + obj.id).length == 0) {
                        obj.grid.before('<div class="freeez" id="hd' + obj.id + '"></div>');
                    }

                    obj.container = $('#hd' + obj.id);

                    if (obj.header.offset() != null) {
                        if (limiteAlcancado(obj, params)) {
                            elem.trigger("freeze:on");
                            if (!copiedHeader) {
                                cloneHeaderRow(obj);
                                copiedHeader = true;
                            }
                        }
                        else {

                            if (($(document).scrollTop() > obj.header.offset().top)) {
                                obj.container.css("position", "absolute");
                                obj.container.css("top", (obj.grid.find("tr:last").offset().top - obj.header.height()) + "px");
                            }
                            else {
                                elem.trigger("freeze:off");
                                obj.container.css("visibility", "hidden");
                                obj.container.css("top", "0px");
                                obj.container.width(0);
                            }
                            copiedHeader = false;
                        }
                    }

                });
            }
        }

        function limiteAlcancado(obj, params) {
            if (params && (params.height !== undefined || params.scrollListenerEl !== undefined)) {
                return (obj.header.offset().top <= obj.scroller.offset().top);
            }
            else {
                var top = obj.header.offset().top;
                if (params) {
                    if (params.offset !== undefined) {
                       top -= parseInt(params.offset.replace('px',''),10);
                    }
                }

                var gridHeight = (obj.grid.height() - obj.header.height() - obj.grid.find("tr:last").height()) + obj.header.offset().top;
                return ($(document).scrollTop() > top && $(document).scrollTop() < gridHeight);
            }
        }

        function cloneHeaderRow(obj) {
            obj.container.html('');
            obj.container.val('');
            var tabela = $('<table style="margin: 0 0;"></table>');
            var atributos = obj.grid.prop("attributes");

            $.each(atributos, function () {
                if (this.name != "id") {
                    tabela.attr(this.name, this.value);
                }
            });

            var clone = obj.header.clone(true);
            
            clone.appendTo(tabela);

            obj.container.append(tabela);
            obj.container.width(obj.header.width());
            obj.container.height(obj.header.height);
            obj.container.find('th').each(function (index) {
                var cellWidth = obj.grid.find('th').eq(index).outerWidth();
				//alert(cellWidth);
                $(this).css('width', cellWidth);
            });

            obj.container.css("visibility", "visible");

            if (params && params.height !== undefined) {
               
                if(params.offset !== undefined){
                    obj.container.css("top", obj.scroller.offset().top + (params.offset.replace("px","") * 1) + "px");
                }
                else
                {
                    obj.container.css("top", obj.scroller.offset().top + "px");
                }
                
            obj.container.css("position", "absolute");
                
            } else if (params && params.scrollListenerEl!== undefined) { 
                obj.container.css("top", obj.scroller.find("thead > tr").innerHeight() + "px");
                obj.container.css("position", "absolute");
                obj.container.css("z-index", "2");
            } else if (params && params.offset !== undefined) {
                obj.container.css("top", params.offset);
                obj.container.css("position", "fixed");
            } else {
                obj.container.css("top", "0px");
                obj.container.css("position", "fixed");
            }
        }

        return this.each(function (i, e) {
            freezeHeader($(e));
        });

    };
})(OLD);
/**
 * fullPage 2.5.6
 * https://github.com/alvarotrigo/fullPage.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */

(function($) {
	$.fn.fullpage = function(options) {
		// Create some defaults, extending them with any options that were provided
		options = $.extend({
			//navigation
			'menu': false,
			'anchors':[],
			'navigation': false,
			'navigationPosition': 'right',
			'navigationColor': '#000',
			'navigationTooltips': [],
			'slidesNavigation': false,
			'slidesNavPosition': 'bottom',
			'scrollBar': false,

			//scrolling
			'css3': true,
			'scrollingSpeed': 700,
			'autoScrolling': true,
			'easing': 'easeInQuart',
			'easingcss3': 'ease',
			'loopBottom': false,
			'loopTop': false,
			'loopHorizontal': true,
			'continuousVertical': false,
			'normalScrollElements': null,
			'scrollOverflow': false,
			'touchSensitivity': 5,
			'normalScrollElementTouchThreshold': 5,

			//Accessibility
			'keyboardScrolling': true,
			'animateAnchor': true,
			'recordHistory': true,

			//design
			'controlArrows': true,
			'controlArrowColor': '#fff',
			"verticalCentered": true,
			'resize': true,
			'sectionsColor' : [],
			'paddingTop': 0,
			'paddingBottom': 0,
			'fixedElements': null,
			'responsive': 0,

			//Custom selectors
			'sectionSelector': '.section',
			'slideSelector': '.slide',


			//events
			'afterLoad': null,
			'onLeave': null,
			'afterRender': null,
			'afterResize': null,
			'afterReBuild': null,
			'afterSlideLoad': null,
			'onSlideLeave': null
		}, options);

	    displayWarnings();

	    //easeInQuart animation included in the plugin
	    $.extend($.easing,{ easeInQuart: function (x, t, b, c, d) { return c*(t/=d)*t*t*t + b; }});

		//Defines the delay to take place before being able to scroll to the next section
		//BE CAREFUL! Not recommened to change it under 400 for a good behavior in laptops and
		//Apple devices (laptops, mouses...)
		var scrollDelay = 600;

		$.fn.fullpage.setAutoScrolling = function(value, type){
			setVariableState('autoScrolling', value, type);

			var element = $('.fp-section.active');

			if(options.autoScrolling && !options.scrollBar){
				$('html, body').css({
					'overflow' : 'hidden',
					'height' : '100%'
				});

				$.fn.fullpage.setRecordHistory(options.recordHistory, 'internal');

				//for IE touch devices
				container.css({
					'-ms-touch-action': 'none',
					'touch-action': 'none'
				});

				if(element.length){
					//moving the container up
					silentScroll(element.position().top);
				}

			}else{
				$('html, body').css({
					'overflow' : 'visible',
					'height' : 'initial'
				});

				$.fn.fullpage.setRecordHistory(false, 'internal');

				//for IE touch devices
				container.css({
					'-ms-touch-action': '',
					'touch-action': ''
				});

				silentScroll(0);

				//scrolling the page to the section with no animation
				$('html, body').scrollTop(element.position().top);
			}

		};

		/**
		* Defines wheter to record the history for each hash change in the URL.
		*/
		$.fn.fullpage.setRecordHistory = function(value, type){
			setVariableState('recordHistory', value, type);
		};

		/**
		* Defines the scrolling speed
		*/
		$.fn.fullpage.setScrollingSpeed = function(value, type){
			setVariableState('scrollingSpeed', value, type);
		};

		/**
		* Adds or remove the possiblity of scrolling through sections by using the mouse wheel or the trackpad.
		*/
		$.fn.fullpage.setMouseWheelScrolling = function (value){
			if(value){
				addMouseWheelHandler();
			}else{
				removeMouseWheelHandler();
			}
		};

		/**
		* Adds or remove the possiblity of scrolling through sections by using the mouse wheel/trackpad or touch gestures.
		* Optionally a second parameter can be used to specify the direction for which the action will be applied.
		*
		* @param directions string containing the direction or directions separated by comma.
		*/
		$.fn.fullpage.setAllowScrolling = function (value, directions){
			if(typeof directions != 'undefined'){
				directions = directions.replace(' ', '').split(',');
				$.each(directions, function (index, direction){
					setIsScrollable(value, direction);
				});
			}
			else if(value){
				$.fn.fullpage.setMouseWheelScrolling(true);
				addTouchHandler();
			}else{
				$.fn.fullpage.setMouseWheelScrolling(false);
				removeTouchHandler();
			}
		};

		/**
		* Adds or remove the possiblity of scrolling through sections by using the keyboard arrow keys
		*/
		$.fn.fullpage.setKeyboardScrolling = function (value){
			options.keyboardScrolling = value;
		};

		$.fn.fullpage.moveSectionUp = function(){
			var prev = $('.fp-section.active').prev('.fp-section');

			//looping to the bottom if there's no more sections above
			if (!prev.length && (options.loopTop || options.continuousVertical)) {
				prev = $('.fp-section').last();
			}

			if (prev.length) {
				scrollPage(prev, null, true);
			}
		};

		$.fn.fullpage.moveSectionDown = function (){
			var next = $('.fp-section.active').next('.fp-section');

			//looping to the top if there's no more sections below
			if(!next.length &&
				(options.loopBottom || options.continuousVertical)){
				next = $('.fp-section').first();
			}

			if(next.length){
				scrollPage(next, null, false);
			}
		};

		$.fn.fullpage.moveTo = function (section, slide){
			var destiny = '';

			if(isNaN(section)){
				destiny = $('[data-anchor="'+section+'"]');
			}else{
				destiny = $('.fp-section').eq( (section -1) );
			}

			if (typeof slide !== 'undefined'){
				scrollPageAndSlide(section, slide);
			}else if(destiny.length > 0){
				scrollPage(destiny);
			}
		};

		$.fn.fullpage.moveSlideRight = function(){
			moveSlide('next');
		};

		$.fn.fullpage.moveSlideLeft = function(){
			moveSlide('prev');
		};

		/**
		 * When resizing is finished, we adjust the slides sizes and positions
		 */
		$.fn.fullpage.reBuild = function(resizing){
			isResizing = true;

			var windowsWidth = $(window).width();
			windowsHeight = $(window).height();  //updating global var

			//text and images resizing
			if (options.resize) {
				resizeMe(windowsHeight, windowsWidth);
			}

			$('.fp-section').each(function(){
				var slidesWrap = $(this).find('.fp-slides');
				var slides = $(this).find('.fp-slide');

				//adjusting the height of the table-cell for IE and Firefox
				if(options.verticalCentered){
					$(this).find('.fp-tableCell').css('height', getTableHeight($(this)) + 'px');
				}

				$(this).css('height', windowsHeight + 'px');

				//resizing the scrolling divs
				if(options.scrollOverflow){
					if(slides.length){
						slides.each(function(){
							createSlimScrolling($(this));
						});
					}else{
						createSlimScrolling($(this));
					}
				}

				//adjusting the position fo the FULL WIDTH slides...
				if (slides.length) {
					landscapeScroll(slidesWrap, slidesWrap.find('.fp-slide.active'));
				}
			});

			var activeSection = $('.fp-section.active');

			//isn't it the first section?
			if(activeSection.index('.fp-section')){
				//adjusting the position for the current section
				scrollPage(activeSection);
			}

			isResizing = false;
			$.isFunction( options.afterResize ) && resizing && options.afterResize.call(container);
			$.isFunction( options.afterReBuild ) && !resizing && options.afterReBuild.call(container);
		};

		//flag to avoid very fast sliding for landscape sliders
		var slideMoving = false;

		var isTouchDevice = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|Windows Phone|Tizen|Bada)/);
		var isTouch = (('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0) || (navigator.maxTouchPoints));
		var container = $(this);
		var windowsHeight = $(window).height();
		var isMoving = false;
		var isResizing = false;
		var lastScrolledDestiny;
		var lastScrolledSlide;
		var nav;
		var wrapperSelector = 'fullpage-wrapper';
		var isScrollAllowed = { 'up':true, 'down':true, 'left':true, 'right':true };
		var originals = $.extend(true, {}, options); //deep copy

		$.fn.fullpage.setAllowScrolling(true);

		//if css3 is not supported, it will use jQuery animations
		if(options.css3){
			options.css3 = support3d();
		}

		if($(this).length){
			container.css({
				'height': '100%',
				'position': 'relative'
			});

			//adding a class to recognize the container internally in the code
			container.addClass(wrapperSelector);
		}

		//trying to use fullpage without a selector?
		else{
			showError('error', "Error! Fullpage.js needs to be initialized with a selector. For example: $('#myContainer').fullpage();");
		}

		//adding internal class names to void problem with common ones
		$(options.sectionSelector).each(function(){
  			$(this).addClass('fp-section');
		});
		$(options.slideSelector).each(function(){
  			$(this).addClass('fp-slide');
		});

		//creating the navigation dots
		if (options.navigation) {
			addVerticalNavigation();
		}

		$('.fp-section').each(function(index){
			var that = $(this);
			var slides = $(this).find('.fp-slide');
			var numSlides = slides.length;

			//if no active section is defined, the 1st one will be the default one
			if(!index && $('.fp-section.active').length === 0) {
				$(this).addClass('active');
			}

			$(this).css('height', windowsHeight + 'px');

			if(options.paddingTop || options.paddingBottom){
				$(this).css('padding', options.paddingTop  + ' 0 ' + options.paddingBottom + ' 0');
			}

			if (typeof options.sectionsColor[index] !==  'undefined') {
				$(this).css('background-color', options.sectionsColor[index]);
			}

			if (typeof options.anchors[index] !== 'undefined') {
				$(this).attr('data-anchor', options.anchors[index]);
			}

			// if there's any slide
			if (numSlides > 1) {
				var sliderWidth = numSlides * 100;
				var slideWidth = 100 / numSlides;

				slides.wrapAll('<div class="fp-slidesContainer" />');
				slides.parent().wrap('<div class="fp-slides" />');

				$(this).find('.fp-slidesContainer').css('width', sliderWidth + '%');

				if(options.controlArrows){
					createSlideArrows($(this));
				}

				if(options.slidesNavigation){
					addSlidesNavigation($(this), numSlides);
				}

				slides.each(function(index) {
					$(this).css('width', slideWidth + '%');

					if(options.verticalCentered){
						addTableClass($(this));
					}
				});

				var startingSlide = that.find('.fp-slide.active');

				//if the slide won#t be an starting point, the default will be the first one
				if(!startingSlide.length){
					slides.eq(0).addClass('active');
				}

				//is there a starting point for a non-starting section?
				else{
					silentLandscapeScroll(startingSlide);
				}

			}else{
				if(options.verticalCentered){
					addTableClass($(this));
				}
			}

		}).promise().done(function(){
			$.fn.fullpage.setAutoScrolling(options.autoScrolling, 'internal');

			//the starting point is a slide?
			var activeSlide = $('.fp-section.active').find('.fp-slide.active');

			//the active section isn't the first one? Is not the first slide of the first section? Then we load that section/slide by default.
			if( activeSlide.length &&  ($('.fp-section.active').index('.fp-section') !== 0 || ($('.fp-section.active').index('.fp-section') === 0 && activeSlide.index() !== 0))){
				silentLandscapeScroll(activeSlide);
			}

			//fixed elements need to be moved out of the plugin container due to problems with CSS3.
			if(options.fixedElements && options.css3){
				$(options.fixedElements).appendTo('body');
			}

			//vertical centered of the navigation + first bullet active
			if(options.navigation){
				nav.css('margin-top', '-' + (nav.height()/2) + 'px');
				nav.find('li').eq($('.fp-section.active').index('.fp-section')).find('a').addClass('active');
			}

			//moving the menu outside the main container if it is inside (avoid problems with fixed positions when using CSS3 tranforms)
			if(options.menu && options.css3 && $(options.menu).closest('.fullpage-wrapper').length){
				$(options.menu).appendTo('body');
			}

			if(options.scrollOverflow){
				if(document.readyState === "complete"){
					createSlimScrollingHandler();
				}
				//after DOM and images are loaded
				$(window).on('load', createSlimScrollingHandler);
			}else{
				$.isFunction( options.afterRender ) && options.afterRender.call(container);
			}

			responsive();

			//getting the anchor link in the URL and deleting the `#`
			var value =  window.location.hash.replace('#', '').split('/');
			var destiny = value[0];

			if(destiny.length){
				var section = $('[data-anchor="'+destiny+'"]');

				if(!options.animateAnchor && section.length){

					if(options.autoScrolling){
						silentScroll(section.position().top);
					}
					else{
						silentScroll(0);
						setBodyClass(destiny);

						//scrolling the page to the section with no animation
						$('html, body').scrollTop(section.position().top);
					}

					activateMenuAndNav(destiny, null);

					$.isFunction( options.afterLoad ) && options.afterLoad.call( section, destiny, (section.index('.fp-section') + 1));

					//updating the active class
					section.addClass('active').siblings().removeClass('active');
				}
			}


			$(window).on('load', function() {
				scrollToAnchor();
			});

		});


		/**
		* Creates the control arrows for the given section
		*/
		function createSlideArrows(section){
			section.find('.fp-slides').after('<div class="fp-controlArrow fp-prev"></div><div class="fp-controlArrow fp-next"></div>');

			if(options.controlArrowColor!='#fff'){
				section.find('.fp-controlArrow.fp-next').css('border-color', 'transparent transparent transparent '+options.controlArrowColor);
				section.find('.fp-controlArrow.fp-prev').css('border-color', 'transparent '+ options.controlArrowColor + ' transparent transparent');
			}

			if(!options.loopHorizontal){
				section.find('.fp-controlArrow.fp-prev').hide();
			}
		}

		/**
		* Creates a vertical navigation bar.
		*/
		function addVerticalNavigation(){
			$('body').append('<div id="fp-nav"><ul></ul></div>');
			nav = $('#fp-nav');

			nav.css('color', options.navigationColor);
			nav.addClass(options.navigationPosition);

			for (var i = 0; i < $('.fp-section').length; i++) {
				var link = '';
				if (options.anchors.length) {
					link = options.anchors[i];
				}

				var li = '<li><a href="#' + link + '"><span></span></a>';

				// Only add tooltip if needed (defined by user)
				var tooltip = options.navigationTooltips[i];
				if (tooltip !== undefined && tooltip != '') {
					li += '<div class="fp-tooltip ' + options.navigationPosition + '">' + tooltip + '</div>';
				}

				li += '</li>';

				nav.find('ul').append(li);
			}
		}

		function createSlimScrollingHandler(){
			$('.fp-section').each(function(){
				var slides = $(this).find('.fp-slide');

				if(slides.length){
					slides.each(function(){
						createSlimScrolling($(this));
					});
				}else{
					createSlimScrolling($(this));
				}

			});
			$.isFunction( options.afterRender ) && options.afterRender.call( this);
		}

		var scrollId;
		var scrollId2;
		var isScrolling = false;

		//when scrolling...
		$(window).on('scroll', scrollHandler);

		function scrollHandler(){
			var currentSection;

			if(!options.autoScrolling || options.scrollBar){
				var currentScroll = $(window).scrollTop();
				var visibleSectionIndex = 0;
				var initial = Math.abs(currentScroll - $('.fp-section').first().offset().top);

				//taking the section which is showing more content in the viewport
				$('.fp-section').each(function(index){
					var current = Math.abs(currentScroll - $(this).offset().top);

					if(current < initial){
						visibleSectionIndex = index;
						initial = current;
					}
				});

				//geting the last one, the current one on the screen
				currentSection = $('.fp-section').eq(visibleSectionIndex);
			}

			if(!options.autoScrolling || options.scrollBar){
				//executing only once the first time we reach the section
				if(!currentSection.hasClass('active')){
					isScrolling = true;
					var leavingSection = $('.fp-section.active');
					var leavingSectionIndex = leavingSection.index('.fp-section') + 1;
					var yMovement = getYmovement(currentSection);
					var anchorLink  = currentSection.data('anchor');
					var sectionIndex = currentSection.index('.fp-section') + 1;
					var activeSlide = currentSection.find('.fp-slide.active');

					if(activeSlide.length){
						var slideAnchorLink = activeSlide.data('anchor');
						var slideIndex = activeSlide.index();
					}

					currentSection.addClass('active').siblings().removeClass('active');

					if(!isMoving){
						$.isFunction( options.onLeave ) && options.onLeave.call( leavingSection, leavingSectionIndex, sectionIndex, yMovement);

						$.isFunction( options.afterLoad ) && options.afterLoad.call( currentSection, anchorLink, sectionIndex);
					}

					activateMenuAndNav(anchorLink, 0);

					if(options.anchors.length && !isMoving){
						//needed to enter in hashChange event when using the menu with anchor links
						lastScrolledDestiny = anchorLink;

						setState(slideIndex, slideAnchorLink, anchorLink, sectionIndex);
					}

					//small timeout in order to avoid entering in hashChange event when scrolling is not finished yet
					clearTimeout(scrollId);
					scrollId = setTimeout(function(){
						isScrolling = false;
					}, 100);
				}
			}

			if(options.scrollBar){
				//for the auto adjust of the viewport to fit a whole section
				clearTimeout(scrollId2);

				scrollId2 = setTimeout(function(){
					if(!isMoving){
						//allows to scroll to an active section and
						//if the section is already active, we prevent firing callbacks
						if($('.fp-section.active').is(currentSection)){
							isResizing = true;
						}
						scrollPage(currentSection);
						isResizing = false;
					}
				}, 1000);
			}
		}


		/**
		* Determines whether the active section or slide is scrollable through and scrolling bar
		*/
		function isScrollable(activeSection){
			//if there are landscape slides, we check if the scrolling bar is in the current one or not
			if(activeSection.find('.fp-slides').length){
				return activeSection.find('.fp-slide.active').find('.fp-scrollable');
			}

			return activeSection.find('.fp-scrollable');
		}

		/**
		* Determines the way of scrolling up or down:
		* by 'automatically' scrolling a section or by using the default and normal scrolling.
		*/
		function scrolling(type, scrollable){
			if (!isScrollAllowed[type]){
				return;
			}
			var check, scrollSection;

			if(type == 'down'){
				check = 'bottom';
				scrollSection = $.fn.fullpage.moveSectionDown;
			}else{
				check = 'top';
				scrollSection = $.fn.fullpage.moveSectionUp;
			}

			if(scrollable.length > 0 ){
				//is the scrollbar at the start/end of the scroll?
				if(isScrolled(check, scrollable)){
					scrollSection();
				}else{
					return true;
				}
			}else{
				// moved up/down
				scrollSection();
			}
		}


		var touchStartY = 0;
		var touchStartX = 0;
		var touchEndY = 0;
		var touchEndX = 0;

		/* Detecting touch events

		* As we are changing the top property of the page on scrolling, we can not use the traditional way to detect it.
		* This way, the touchstart and the touch moves shows an small difference between them which is the
		* used one to determine the direction.
		*/
		function touchMoveHandler(event){
			var e = event.originalEvent;

			// additional: if one of the normalScrollElements isn't within options.normalScrollElementTouchThreshold hops up the DOM chain
			if (!checkParentForNormalScrollElement(event.target)) {

				if(options.autoScrolling){
					//preventing the easing on iOS devices
					event.preventDefault();
				}

				var activeSection = $('.fp-section.active');
				var scrollable = isScrollable(activeSection);

				if (!isMoving && !slideMoving) { //if theres any #
					var touchEvents = getEventsPage(e);

					touchEndY = touchEvents.y;
					touchEndX = touchEvents.x;

					//if movement in the X axys is greater than in the Y and the currect section has slides...
					if (activeSection.find('.fp-slides').length && Math.abs(touchStartX - touchEndX) > (Math.abs(touchStartY - touchEndY))) {

					    //is the movement greater than the minimum resistance to scroll?
					    if (Math.abs(touchStartX - touchEndX) > ($(window).width() / 100 * options.touchSensitivity)) {
					        if (touchStartX > touchEndX) {
					        	if(isScrollAllowed.right){
					            	$.fn.fullpage.moveSlideRight(); //next
					            }
					        } else {
					        	if(isScrollAllowed.left){
					            	$.fn.fullpage.moveSlideLeft(); //prev
					            }
					        }
					    }
					}

					//vertical scrolling (only when autoScrolling is enabled)
					else if(options.autoScrolling){

						//is the movement greater than the minimum resistance to scroll?
						if (Math.abs(touchStartY - touchEndY) > ($(window).height() / 100 * options.touchSensitivity)) {
							if (touchStartY > touchEndY) {
								scrolling('down', scrollable);
							} else if (touchEndY > touchStartY) {
								scrolling('up', scrollable);
							}
						}
					}
				}
			}

		}

		/**
		 * recursive function to loop up the parent nodes to check if one of them exists in options.normalScrollElements
		 * Currently works well for iOS - Android might need some testing
		 * @param  {Element} el  target element / jquery selector (in subsequent nodes)
		 * @param  {int}     hop current hop compared to options.normalScrollElementTouchThreshold
		 * @return {boolean} true if there is a match to options.normalScrollElements
		 */
		function checkParentForNormalScrollElement (el, hop) {
			hop = hop || 0;
			var parent = $(el).parent();

			if (hop < options.normalScrollElementTouchThreshold &&
				parent.is(options.normalScrollElements) ) {
				return true;
			} else if (hop == options.normalScrollElementTouchThreshold) {
				return false;
			} else {
				return checkParentForNormalScrollElement(parent, ++hop);
			}
		}

		function touchStartHandler(event){
			var e = event.originalEvent;

			//stopping the auto scroll to adjust to a section
			if(options.scrollBar){
				$("html,body").stop();
			}

			var touchEvents = getEventsPage(e);
			touchStartY = touchEvents.y;
			touchStartX = touchEvents.x;
		}


		/**
		 * Detecting mousewheel scrolling
		 *
		 * http://blogs.sitepointstatic.com/examples/tech/mouse-wheel/index.html
		 * http://www.sitepoint.com/html5-javascript-mouse-wheel/
		 */
		function MouseWheelHandler(e) {
			if(options.autoScrolling){
				// cross-browser wheel delta
				e = window.event || e;
				var delta = Math.max(-1, Math.min(1,
						(e.wheelDelta || -e.deltaY || -e.detail)));

				//preventing to scroll the site on mouse wheel when scrollbar is present
				if(options.scrollBar){
					e.preventDefault ? e.preventDefault() : e.returnValue = false;
				}

				var activeSection = $('.fp-section.active');
				var scrollable = isScrollable(activeSection);

				if (!isMoving) { //if theres any #
					//scrolling down?
					if (delta < 0) {
						scrolling('down', scrollable);

					//scrolling up?
					}else {
						scrolling('up', scrollable);
					}
				}

				return false;
			}

			if(options.scrollBar){
				//stopping the auto scroll to adjust to a section
				$("html,body").stop();
			}
		}

		function moveSlide(direction){
		    var activeSection = $('.fp-section.active');
		    var slides = activeSection.find('.fp-slides');

		    // more than one slide needed and nothing should be sliding
			if (!slides.length || slideMoving) {
			    return;
			}

		    var currentSlide = slides.find('.fp-slide.active');
		    var destiny = null;

		    if(direction === 'prev'){
		        destiny = currentSlide.prev('.fp-slide');
		    }else{
		        destiny = currentSlide.next('.fp-slide');
		    }

		    //isn't there a next slide in the secuence?
			if(!destiny.length){
				//respect loopHorizontal settin
				if (!options.loopHorizontal) return;

			    if(direction === 'prev'){
			        destiny = currentSlide.siblings(':last');
			    }else{
			        destiny = currentSlide.siblings(':first');
			    }
			}

		    slideMoving = true;

		    landscapeScroll(slides, destiny);
		}

		/**
		* Maintains the active slides in the viewport
		* (Because he `scroll` animation might get lost with some actions, such as when using continuousVertical)
		*/
		function keepSlidesPosition(){
			$('.fp-slide.active').each(function(){
				silentLandscapeScroll($(this));
			});
		}

		/**
		* Scrolls the site to the given element and scrolls to the slide if a callback is given.
		*/
		function scrollPage(element, callback, isMovementUp){
			var dest = element.position();
			if(typeof dest === "undefined"){ return; } //there's no element to scroll, leaving the function

			//local variables
			var v = {
				element: element,
				callback: callback,
				isMovementUp: isMovementUp,
				dest: dest,
				dtop: dest.top,
				yMovement: getYmovement(element),
				anchorLink: element.data('anchor'),
				sectionIndex: element.index('.fp-section'),
				activeSlide: element.find('.fp-slide.active'),
				activeSection: $('.fp-section.active'),
				leavingSection: $('.fp-section.active').index('.fp-section') + 1,

				//caching the value of isResizing at the momment the function is called
				//because it will be checked later inside a setTimeout and the value might change
				localIsResizing: isResizing
			};

			//quiting when destination scroll is the same as the current one
			if((v.activeSection.is(element) && !isResizing) || (options.scrollBar && $(window).scrollTop() === v.dtop)){ return; }

			if(v.activeSlide.length){
				var slideAnchorLink = v.activeSlide.data('anchor');
				var slideIndex = v.activeSlide.index();
			}

			// If continuousVertical && we need to wrap around
			if (options.autoScrolling && options.continuousVertical && typeof (v.isMovementUp) !== "undefined" &&
				((!v.isMovementUp && v.yMovement == 'up') || // Intending to scroll down but about to go up or
				(v.isMovementUp && v.yMovement == 'down'))) { // intending to scroll up but about to go down

				v = createInfiniteSections(v);
			}

			element.addClass('active').siblings().removeClass('active');

			//preventing from activating the MouseWheelHandler event
			//more than once if the page is scrolling
			isMoving = true;

			setState(slideIndex, slideAnchorLink, v.anchorLink, v.sectionIndex);

			//callback (onLeave) if the site is not just resizing and readjusting the slides
			$.isFunction(options.onLeave) && !v.localIsResizing && options.onLeave.call(v.activeSection, v.leavingSection, (v.sectionIndex + 1), v.yMovement);

			performMovement(v);

			//flag to avoid callingn `scrollPage()` twice in case of using anchor links
			lastScrolledDestiny = v.anchorLink;

			//avoid firing it twice (as it does also on scroll)
			if(options.autoScrolling){
				activateMenuAndNav(v.anchorLink, v.sectionIndex);
			}
		}

		/**
		* Performs the movement (by CSS3 or by jQuery)
		*/
		function performMovement(v){
			// using CSS3 translate functionality
			if (options.css3 && options.autoScrolling && !options.scrollBar) {

				var translate3d = 'translate3d(0px, -' + v.dtop + 'px, 0px)';
				transformContainer(translate3d, true);

				setTimeout(function () {
					afterSectionLoads(v);
				}, options.scrollingSpeed);
			}

			// using jQuery animate
			else{
				var scrollSettings = getScrollSettings(v);

				$(scrollSettings.element).animate(
					scrollSettings.options
				, options.scrollingSpeed, options.easing).promise().done(function () { //only one single callback in case of animating  `html, body`
					afterSectionLoads(v);
				});
			}
		}

		/**
		* Gets the scrolling settings depending on the plugin autoScrolling option
		*/
		function getScrollSettings(v){
			var scroll = {};

			if(options.autoScrolling && !options.scrollBar){
				scroll.options = { 'top': -v.dtop};
				scroll.element = '.'+wrapperSelector;
			}else{
				scroll.options = { 'scrollTop': v.dtop};
				scroll.element = 'html, body';
			}

			return scroll;
		}

		/**
		* Adds sections before or after the current one to create the infinite effect.
		*/
		function createInfiniteSections(v){
			// Scrolling down
			if (!v.isMovementUp) {
				// Move all previous sections to after the active section
				$(".fp-section.active").after(v.activeSection.prevAll(".fp-section").get().reverse());
			}
			else { // Scrolling up
				// Move all next sections to before the active section
				$(".fp-section.active").before(v.activeSection.nextAll(".fp-section"));
			}

			// Maintain the displayed position (now that we changed the element order)
			silentScroll($('.fp-section.active').position().top);

			// Maintain the active slides visible in the viewport
			keepSlidesPosition();

			// save for later the elements that still need to be reordered
			v.wrapAroundElements = v.activeSection;

			// Recalculate animation variables
			v.dest = v.element.position();
			v.dtop = v.dest.top;
			v.yMovement = getYmovement(v.element);

			return v;
		}

		/**
		* Fix section order after continuousVertical changes have been animated
		*/
		function continuousVerticalFixSectionOrder (v) {
			// If continuousVertical is in effect (and autoScrolling would also be in effect then),
			// finish moving the elements around so the direct navigation will function more simply
			if (!v.wrapAroundElements || !v.wrapAroundElements.length) {
				return;
			}

			if (v.isMovementUp) {
				$('.fp-section:first').before(v.wrapAroundElements);
			}
			else {
				$('.fp-section:last').after(v.wrapAroundElements);
			}

			silentScroll($('.fp-section.active').position().top);

			// Maintain the active slides visible in the viewport
			keepSlidesPosition();
		}


		/**
		* Actions to do once the section is loaded
		*/
		function afterSectionLoads (v){
			continuousVerticalFixSectionOrder(v);
			//callback (afterLoad) if the site is not just resizing and readjusting the slides
			$.isFunction(options.afterLoad) && !v.localIsResizing && options.afterLoad.call(v.element, v.anchorLink, (v.sectionIndex + 1));

			setTimeout(function () {
				isMoving = false;
				$.isFunction(v.callback) && v.callback.call(this);
			}, scrollDelay);
		}


		/**
		* Scrolls to the anchor in the URL when loading the site
		*/
		function scrollToAnchor(){
			//getting the anchor link in the URL and deleting the `#`
			var value =  window.location.hash.replace('#', '').split('/');
			var section = value[0];
			var slide = value[1];

			if(section){  //if theres any #
				scrollPageAndSlide(section, slide);
			}
		}

		//detecting any change on the URL to scroll to the given anchor link
		//(a way to detect back history button as we play with the hashes on the URL)
		$(window).on('hashchange', hashChangeHandler);

		function hashChangeHandler(){
			if(!isScrolling){
				var value =  window.location.hash.replace('#', '').split('/');
				var section = value[0];
				var slide = value[1];

				if(section.length){
					//when moving to a slide in the first section for the first time (first time to add an anchor to the URL)
					var isFirstSlideMove =  (typeof lastScrolledDestiny === 'undefined');
					var isFirstScrollMove = (typeof lastScrolledDestiny === 'undefined' && typeof slide === 'undefined' && !slideMoving);

					/*in order to call scrollpage() only once for each destination at a time
					It is called twice for each scroll otherwise, as in case of using anchorlinks `hashChange`
					event is fired on every scroll too.*/
					if ((section && section !== lastScrolledDestiny) && !isFirstSlideMove || isFirstScrollMove || (!slideMoving && lastScrolledSlide != slide ))  {
						scrollPageAndSlide(section, slide);
					}
				}
			}
		}


		/**
		 * Sliding with arrow keys, both, vertical and horizontal
		 */
		$(document).keydown(function(e) {
			//Moving the main page with the keyboard arrows if keyboard scrolling is enabled
			if (options.keyboardScrolling && options.autoScrolling) {

				//preventing the scroll with arrow keys
				if(e.which == 40 || e.which == 38){
					e.preventDefault();
				}

				if(!isMoving){
					switch (e.which) {
						//up
						case 38:
						case 33:
							$.fn.fullpage.moveSectionUp();
							break;

						//down
						case 40:
						case 34:
							$.fn.fullpage.moveSectionDown();
							break;

						//Home
						case 36:
							$.fn.fullpage.moveTo(1);
							break;

						//End
						case 35:
							$.fn.fullpage.moveTo( $('.fp-section').length );
							break;

						//left
						case 37:
							$.fn.fullpage.moveSlideLeft();
							break;

						//right
						case 39:
							$.fn.fullpage.moveSlideRight();
							break;

						default:
							return; // exit this handler for other keys
					}
				}
			}
		});

		/**
		* Scrolls to the section when clicking the navigation bullet
		*/
		$(document).on('click touchstart', '#fp-nav a', function(e){
			e.preventDefault();
			var index = $(this).parent().index();
			scrollPage($('.fp-section').eq(index));
		});

		/**
		* Scrolls the slider to the given slide destination for the given section
		*/
		$(document).on('click touchstart', '.fp-slidesNav a', function(e){
			e.preventDefault();
			var slides = $(this).closest('.fp-section').find('.fp-slides');
			var destiny = slides.find('.fp-slide').eq($(this).closest('li').index());

			landscapeScroll(slides, destiny);
		});

		if(options.normalScrollElements){
			$(document).on('mouseenter', options.normalScrollElements, function () {
				$.fn.fullpage.setMouseWheelScrolling(false);
			});

			$(document).on('mouseleave', options.normalScrollElements, function(){
				$.fn.fullpage.setMouseWheelScrolling(true);
			});
		}

		/**
		 * Scrolling horizontally when clicking on the slider controls.
		 */
		$('.fp-section').on('click touchstart', '.fp-controlArrow', function() {
			if ($(this).hasClass('fp-prev')) {
				$.fn.fullpage.moveSlideLeft();
			} else {
				$.fn.fullpage.moveSlideRight();
			}
		});

		/**
		* Scrolls horizontal sliders.
		*/
		function landscapeScroll(slides, destiny){
			var destinyPos = destiny.position();
			var slidesContainer = slides.find('.fp-slidesContainer').parent();
			var slideIndex = destiny.index();
			var section = slides.closest('.fp-section');
			var sectionIndex = section.index('.fp-section');
			var anchorLink = section.data('anchor');
			var slidesNav = section.find('.fp-slidesNav');
			var slideAnchor = destiny.data('anchor');

			//caching the value of isResizing at the momment the function is called
			//because it will be checked later inside a setTimeout and the value might change
			var localIsResizing = isResizing;

			if(options.onSlideLeave){
				var prevSlide = section.find('.fp-slide.active');
				var prevSlideIndex = prevSlide.index();
				var xMovement = getXmovement(prevSlideIndex, slideIndex);

				//if the site is not just resizing and readjusting the slides
				if(!localIsResizing && xMovement!=='none'){
					$.isFunction( options.onSlideLeave ) && options.onSlideLeave.call( prevSlide, anchorLink, (sectionIndex + 1), prevSlideIndex, xMovement);
				}
			}

			destiny.addClass('active').siblings().removeClass('active');


			if(typeof slideAnchor === 'undefined'){
				slideAnchor = slideIndex;
			}

			if(!options.loopHorizontal && options.controlArrows){
				//hidding it for the fist slide, showing for the rest
				section.find('.fp-controlArrow.fp-prev').toggle(slideIndex!=0);

				//hidding it for the last slide, showing for the rest
				section.find('.fp-controlArrow.fp-next').toggle(!destiny.is(':last-child'));
			}

			//only changing the URL if the slides are in the current section (not for resize re-adjusting)
			if(section.hasClass('active')){
				setState(slideIndex, slideAnchor, anchorLink, sectionIndex);
			}

			var afterSlideLoads = function(){
				//if the site is not just resizing and readjusting the slides
				if(!localIsResizing){
					$.isFunction( options.afterSlideLoad ) && options.afterSlideLoad.call( destiny, anchorLink, (sectionIndex + 1), slideAnchor, slideIndex);
				}
				//letting them slide again
				slideMoving = false;
			};

			if(options.css3){
				var translate3d = 'translate3d(-' + destinyPos.left + 'px, 0px, 0px)';

				addAnimation(slides.find('.fp-slidesContainer'), options.scrollingSpeed>0).css(getTransforms(translate3d));

				setTimeout(function(){
					afterSlideLoads();
				}, options.scrollingSpeed, options.easing);
			}else{
				slidesContainer.animate({
					scrollLeft : destinyPos.left
				}, options.scrollingSpeed, options.easing, function() {

					afterSlideLoads();
				});
			}

			slidesNav.find('.active').removeClass('active');
			slidesNav.find('li').eq(slideIndex).find('a').addClass('active');
		}

	    //when resizing the site, we adjust the heights of the sections, slimScroll...
	    $(window).resize(resizeHandler);

	    var previousHeight = windowsHeight;
	    var resizeId;
	    function resizeHandler(){
	    	//checking if it needs to get responsive
	    	responsive();

	    	// rebuild immediately on touch devices
			if (isTouchDevice) {

				//if the keyboard is visible
				if ($(document.activeElement).attr('type') !== 'text') {
					var currentHeight = $(window).height();

					//making sure the change in the viewport size is enough to force a rebuild. (20 % of the window to avoid problems when hidding scroll bars)
					if( Math.abs(currentHeight - previousHeight) > (20 * Math.max(previousHeight, currentHeight) / 100) ){
			        	$.fn.fullpage.reBuild(true);
			        	previousHeight = currentHeight;
			        }
		        }
	      	}else{
	      		//in order to call the functions only when the resize is finished
	    		//http://stackoverflow.com/questions/4298612/jquery-how-to-call-resize-event-only-once-its-finished-resizing
	      		clearTimeout(resizeId);

	        	resizeId = setTimeout(function(){
	        		$.fn.fullpage.reBuild(true);
	        	}, 500);
	      	}
	    }

	    /**
	    * Checks if the site needs to get responsive and disables autoScrolling if so.
	    * A class `fp-responsive` is added to the plugin's container in case the user wants to use it for his own responsive CSS.
	    */
	    function responsive(){
	    	if(options.responsive){
	    		var isResponsive = container.hasClass('fp-responsive');
	    		if ($(window).width() < options.responsive ){
	    			if(!isResponsive){
	    				$.fn.fullpage.setAutoScrolling(false, 'internal');
	    				$('#fp-nav').hide();
						container.addClass('fp-responsive');
	    			}
	    		}else if(isResponsive){
	    			$.fn.fullpage.setAutoScrolling(originals.autoScrolling, 'internal');
	    			$('#fp-nav').show();
					container.removeClass('fp-responsive');
	    		}
	    	}
	    }

	    /**
		* Adds transition animations for the given element
		*/
		function addAnimation(element){
			var transition = 'all ' + options.scrollingSpeed + 'ms ' + options.easingcss3;

			element.removeClass('fp-notransition');
			return element.css({
				'-webkit-transition': transition,
     			'transition': transition
       		});
		}

		/**
		* Remove transition animations for the given element
		*/
		function removeAnimation(element){
			return element.addClass('fp-notransition');
		}

		/**
		 * Resizing of the font size depending on the window size as well as some of the images on the site.
		 */
		function resizeMe(displayHeight, displayWidth) {
			//Standard dimensions, for which the body font size is correct
			var preferredHeight = 825;
			var preferredWidth = 900;

			if (displayHeight < preferredHeight || displayWidth < preferredWidth) {
				var heightPercentage = (displayHeight * 100) / preferredHeight;
				var widthPercentage = (displayWidth * 100) / preferredWidth;
				var percentage = Math.min(heightPercentage, widthPercentage);
				var newFontSize = percentage.toFixed(2);

				$("body").css("font-size", newFontSize + '%');
			} else {
				$("body").css("font-size", '100%');
			}
		}

		/**
		 * Activating the website navigation dots according to the given slide name.
		 */
		function activateNavDots(name, sectionIndex){
			if(options.navigation){
				$('#fp-nav').find('.active').removeClass('active');
				if(name){
					$('#fp-nav').find('a[href="#' + name + '"]').addClass('active');
				}else{
					$('#fp-nav').find('li').eq(sectionIndex).find('a').addClass('active');
				}
			}
		}

		/**
		 * Activating the website main menu elements according to the given slide name.
		 */
		function activateMenuElement(name){
			if(options.menu){
				$(options.menu).find('.active').removeClass('active');
				$(options.menu).find('[data-menuanchor="'+name+'"]').addClass('active');
			}
		}

		function activateMenuAndNav(anchor, index){
			activateMenuElement(anchor);
			activateNavDots(anchor, index);
		}

		/**
		* Return a boolean depending on whether the scrollable element is at the end or at the start of the scrolling
		* depending on the given type.
		*/
		function isScrolled(type, scrollable){
			if(type === 'top'){
				return !scrollable.scrollTop();
			}else if(type === 'bottom'){
				return scrollable.scrollTop() + 1 + scrollable.innerHeight() >= scrollable[0].scrollHeight;
			}
		}

		/**
		* Retuns `up` or `down` depending on the scrolling movement to reach its destination
		* from the current section.
		*/
		function getYmovement(destiny){
			var fromIndex = $('.fp-section.active').index('.fp-section');
			var toIndex = destiny.index('.fp-section');
			if( fromIndex == toIndex){
				return 'none';
			}
			if(fromIndex > toIndex){
				return 'up';
			}
			return 'down';
		}

		/**
		* Retuns `right` or `left` depending on the scrolling movement to reach its destination
		* from the current slide.
		*/
		function getXmovement(fromIndex, toIndex){
			if( fromIndex == toIndex){
				return 'none';
			}
			if(fromIndex > toIndex){
				return 'left';
			}
			return 'right';
		}


		function createSlimScrolling(element){
			//needed to make `scrollHeight` work under Opera 12
			element.css('overflow', 'hidden');

			//in case element is a slide
			var section = element.closest('.fp-section');
			var scrollable = element.find('.fp-scrollable');
			var contentHeight;

			//if there was scroll, the contentHeight will be the one in the scrollable section
			if(scrollable.length){
				contentHeight = scrollable.get(0).scrollHeight;
			}else{
				contentHeight = element.get(0).scrollHeight;
				if(options.verticalCentered){
					contentHeight = element.find('.fp-tableCell').get(0).scrollHeight;
				}
			}

			var scrollHeight = windowsHeight - parseInt(section.css('padding-bottom')) - parseInt(section.css('padding-top'));

			//needs scroll?
			if ( contentHeight > scrollHeight) {
				//was there already an scroll ? Updating it
				if(scrollable.length){
					scrollable.css('height', scrollHeight + 'px').parent().css('height', scrollHeight + 'px');
				}
				//creating the scrolling
				else{
					if(options.verticalCentered){
						element.find('.fp-tableCell').wrapInner('<div class="fp-scrollable" />');
					}else{
						element.wrapInner('<div class="fp-scrollable" />');
					}

					element.find('.fp-scrollable').slimScroll({
						allowPageScroll: true,
						height: scrollHeight + 'px',
						size: '10px',
						alwaysVisible: true
					});
				}
			}

			//removing the scrolling when it is not necessary anymore
			else{
				removeSlimScroll(element);
			}

			//undo
			element.css('overflow', '');
		}

		function removeSlimScroll(element){
			element.find('.fp-scrollable').children().first().unwrap().unwrap();
			element.find('.slimScrollBar').remove();
			element.find('.slimScrollRail').remove();
		}

		function addTableClass(element){
			element.addClass('fp-table').wrapInner('<div class="fp-tableCell" style="height:' + getTableHeight(element) + 'px;" />');
		}

		function getTableHeight(element){
			var sectionHeight = windowsHeight;

			if(options.paddingTop || options.paddingBottom){
				var section = element;
				if(!section.hasClass('fp-section')){
					section = element.closest('.fp-section');
				}

				var paddings = parseInt(section.css('padding-top')) + parseInt(section.css('padding-bottom'));
				sectionHeight = (windowsHeight - paddings);
			}

			return sectionHeight;
		}

		/**
		* Adds a css3 transform property to the container class with or without animation depending on the animated param.
		*/
		function transformContainer(translate3d, animated){
			if(animated){
				addAnimation(container);
			}else{
				removeAnimation(container);
			}

			container.css(getTransforms(translate3d));

			//syncronously removing the class after the animation has been applied.
			setTimeout(function(){
				container.removeClass('fp-notransition');
			},10);
		}


		/**
		* Scrolls to the given section and slide
		*/
		function scrollPageAndSlide(destiny, slide){
			var section;

			if (typeof slide === 'undefined') {
			    slide = 0;
			}

			if(isNaN(destiny)){
				section = $('[data-anchor="'+destiny+'"]');
			}else{
				section = $('.fp-section').eq( (destiny -1) );
			}


			//we need to scroll to the section and then to the slide
			if (destiny !== lastScrolledDestiny && !section.hasClass('active')){
				scrollPage(section, function(){
					scrollSlider(section, slide);
				});
			}
			//if we were already in the section
			else{
				scrollSlider(section, slide);
			}
		}

		/**
		* Scrolls the slider to the given slide destination for the given section
		*/
		function scrollSlider(section, slide){
			if(typeof slide != 'undefined'){
				var slides = section.find('.fp-slides');
				var destiny =  slides.find('[data-anchor="'+slide+'"]');

				if(!destiny.length){
					destiny = slides.find('.fp-slide').eq(slide);
				}

				if(destiny.length){
					landscapeScroll(slides, destiny);
				}
			}
		}

		/**
		* Creates a landscape navigation bar with dots for horizontal sliders.
		*/
		function addSlidesNavigation(section, numSlides){
			section.append('<div class="fp-slidesNav"><ul></ul></div>');
			var nav = section.find('.fp-slidesNav');

			//top or bottom
			nav.addClass(options.slidesNavPosition);

			for(var i=0; i< numSlides; i++){
				nav.find('ul').append('<li><a href="#"><span></span></a></li>');
			}

			//centering it
			nav.css('margin-left', '-' + (nav.width()/2) + 'px');

			nav.find('li').first().find('a').addClass('active');
		}


		/**
		* Sets the state of the website depending on the active section/slide.
		* It changes the URL hash when needed and updates the body class.
		*/
		function setState(slideIndex, slideAnchor, anchorLink, sectionIndex){
			var sectionHash = '';

			if(options.anchors.length){

				//isn't it the first slide?
				if(slideIndex){
					if(typeof anchorLink !== 'undefined'){
						sectionHash = anchorLink;
					}

					//slide without anchor link? We take the index instead.
					if(typeof slideAnchor === 'undefined'){
						slideAnchor = slideIndex;
					}

					lastScrolledSlide = slideAnchor;
					setUrlHash(sectionHash + '/' + slideAnchor);

				//first slide won't have slide anchor, just the section one
				}else if(typeof slideIndex !== 'undefined'){
					lastScrolledSlide = slideAnchor;
					setUrlHash(anchorLink);
				}

				//section without slides
				else{
					setUrlHash(anchorLink);
				}

				setBodyClass(location.hash);
			}
			else if(typeof slideIndex !== 'undefined'){
					setBodyClass(sectionIndex + '-' + slideIndex);
			}
			else{
				setBodyClass(String(sectionIndex));
			}
		}

		/**
		* Sets the URL hash.
		*/
		function setUrlHash(url){
			if(options.recordHistory){
				location.hash = url;
			}else{
				//Mobile Chrome doesn't work the normal way, so... lets use HTML5 for phones :)
				if(isTouchDevice || isTouch){
					history.replaceState(undefined, undefined, "#" + url);
				}else{
					var baseUrl = window.location.href.split('#')[0];
					window.location.replace( baseUrl + '#' + url );
				}
			}
		}

		/**
		* Sets a class for the body of the page depending on the active section / slide
		*/
		function setBodyClass(text){
			//changing slash for dash to make it a valid CSS style
			text = text.replace('/', '-').replace('#','');

			//removing previous anchor classes
			$("body")[0].className = $("body")[0].className.replace(/\b\s?fp-viewing-[^\s]+\b/g, '');

			//adding the current anchor
			$("body").addClass("fp-viewing-" + text);
		}

		/**
		* Checks for translate3d support
		* @return boolean
		* http://stackoverflow.com/questions/5661671/detecting-transform-translate3d-support
		*/
		function support3d() {
			var el = document.createElement('p'),
				has3d,
				transforms = {
					'webkitTransform':'-webkit-transform',
					'OTransform':'-o-transform',
					'msTransform':'-ms-transform',
					'MozTransform':'-moz-transform',
					'transform':'transform'
				};

			// Add it to the body to get the computed style.
			document.body.insertBefore(el, null);

			for (var t in transforms) {
				if (el.style[t] !== undefined) {
					el.style[t] = "translate3d(1px,1px,1px)";
					has3d = window.getComputedStyle(el).getPropertyValue(transforms[t]);
				}
			}

			document.body.removeChild(el);

			return (has3d !== undefined && has3d.length > 0 && has3d !== "none");
		}



		/**
		* Removes the auto scrolling action fired by the mouse wheel and trackpad.
		* After this function is called, the mousewheel and trackpad movements won't scroll through sections.
		*/
		function removeMouseWheelHandler(){
			if (document.addEventListener) {
				document.removeEventListener('mousewheel', MouseWheelHandler, false); //IE9, Chrome, Safari, Oper
				document.removeEventListener('wheel', MouseWheelHandler, false); //Firefox
			} else {
				document.detachEvent("onmousewheel", MouseWheelHandler); //IE 6/7/8
			}
		}


		/**
		* Adds the auto scrolling action for the mouse wheel and trackpad.
		* After this function is called, the mousewheel and trackpad movements will scroll through sections
		*/
		function addMouseWheelHandler(){
			if (document.addEventListener) {
				document.addEventListener("mousewheel", MouseWheelHandler, false); //IE9, Chrome, Safari, Oper
				document.addEventListener("wheel", MouseWheelHandler, false); //Firefox
			} else {
				document.attachEvent("onmousewheel", MouseWheelHandler); //IE 6/7/8
			}
		}


		/**
		* Adds the possibility to auto scroll through sections on touch devices.
		*/
		function addTouchHandler(){
			if(isTouchDevice || isTouch){
				//Microsoft pointers
				var MSPointer = getMSPointer();

				$(document).off('touchstart ' +  MSPointer.down).on('touchstart ' + MSPointer.down, touchStartHandler);
				$(document).off('touchmove ' + MSPointer.move).on('touchmove ' + MSPointer.move, touchMoveHandler);
			}
		}

		/**
		* Removes the auto scrolling for touch devices.
		*/
		function removeTouchHandler(){
			if(isTouchDevice || isTouch){
				//Microsoft pointers
				var MSPointer = getMSPointer();

				$(document).off('touchstart ' + MSPointer.down);
				$(document).off('touchmove ' + MSPointer.move);
			}
		}


		/*
		* Returns and object with Microsoft pointers (for IE<11 and for IE >= 11)
		* http://msdn.microsoft.com/en-us/library/ie/dn304886(v=vs.85).aspx
		*/
		function getMSPointer(){
			var pointer;

			//IE >= 11 & rest of browsers
			if(window.PointerEvent){
				pointer = { down: "pointerdown", move: "pointermove"};
			}

			//IE < 11
			else{
				pointer = { down: "MSPointerDown", move: "MSPointerMove"};
			}

			return pointer;
		}
		/**
		* Gets the pageX and pageY properties depending on the browser.
		* https://github.com/alvarotrigo/fullPage.js/issues/194#issuecomment-34069854
		*/
		function getEventsPage(e){
			var events = [];

			events.y = (typeof e.pageY !== 'undefined' && (e.pageY || e.pageX) ? e.pageY : e.touches[0].pageY);
			events.x = (typeof e.pageX !== 'undefined' && (e.pageY || e.pageX) ? e.pageX : e.touches[0].pageX);

			return events;
		}

		function silentLandscapeScroll(activeSlide){
			$.fn.fullpage.setScrollingSpeed (0, 'internal');
			landscapeScroll(activeSlide.closest('.fp-slides'), activeSlide);
			$.fn.fullpage.setScrollingSpeed(originals.scrollingSpeed, 'internal');
		}

		function silentScroll(top){
			if(options.scrollBar){
				container.scrollTop(top);
			}
			else if (options.css3) {
				var translate3d = 'translate3d(0px, -' + top + 'px, 0px)';
				transformContainer(translate3d, false);
			}
			else {
				container.css("top", -top);
			}
		}

		function getTransforms(translate3d){
			return {
				'-webkit-transform': translate3d,
				'-moz-transform': translate3d,
				'-ms-transform':translate3d,
				'transform': translate3d
			};
		}

		function setIsScrollable(value, direction){
			switch (direction){
				case 'up': isScrollAllowed.up = value; break;
				case 'down': isScrollAllowed.down = value; break;
				case 'left': isScrollAllowed.left = value; break;
				case 'right': isScrollAllowed.right = value; break;
				case 'all': $.fn.fullpage.setAllowScrolling(value);
			}
		}


		/*
		* Destroys fullpage.js plugin events and optinally its html markup and styles
		*/
		$.fn.fullpage.destroy = function(all){
			$.fn.fullpage.setAutoScrolling(false, 'internal');
 			$.fn.fullpage.setAllowScrolling(false);
 			$.fn.fullpage.setKeyboardScrolling(false);


 			$(window)
				.off('scroll', scrollHandler)
  				.off('hashchange', hashChangeHandler)
  				.off('resize', resizeHandler);

			$(document)
				.off('click', '#fp-nav a')
				.off('mouseenter', '#fp-nav li')
				.off('mouseleave', '#fp-nav li')
				.off('click', '.fp-slidesNav a')
  				.off('mouseover', options.normalScrollElements)
  				.off('mouseout', options.normalScrollElements);

			$('.fp-section')
				.off('click', '.fp-controlArrow');

			//lets make a mess!
			if(all){
				destroyStructure();
			}
 		};

 		/*
		* Removes inline styles added by fullpage.js
		*/
		function destroyStructure(){
			//reseting the `top` or `translate` properties to 0
	 		silentScroll(0);

			$('#fp-nav, .fp-slidesNav, .fp-controlArrow').remove();

			//removing inline styles
			$('.fp-section').css( {
				'height': '',
				'background-color' : '',
				'padding': ''
			});

			$('.fp-slide').css( {
				'width': ''
			});

			container.css({
	 			'height': '',
	 			'position': '',
	 			'-ms-touch-action': '',
	 			'touch-action': ''
	 		});

			//removing added classes
			$('.fp-section, .fp-slide').each(function(){
				removeSlimScroll($(this));
				$(this).removeClass('fp-table active');
			});

			removeAnimation(container);
			removeAnimation(container.find('.fp-easing'));

			//Unwrapping content
			container.find('.fp-tableCell, .fp-slidesContainer, .fp-slides').each(function(){
				//unwrap not being use in case there's no child element inside and its just text
				$(this).replaceWith(this.childNodes);
			});

			//scrolling the page to the top with no animation
			$('html, body').scrollTop(0);
		}

		/*
		* Sets the state for a variable with multiple states (original, and temporal)
		* Some variables such as `autoScrolling` or `recordHistory` might change automatically its state when using `responsive` or `autoScrolling:false`.
		* This function is used to keep track of both states, the original and the temporal one.
		* If type is not 'internal', then we assume the user is globally changing the variable.
		*/
		function setVariableState(variable, value, type){
			options[variable] = value;
			if(type !== 'internal'){
				originals[variable] = value;
			}
		}

		/**
		* Displays warnings
		*/
		function displayWarnings(){
			// Disable mutually exclusive settings
			if (options.continuousVertical &&
				(options.loopTop || options.loopBottom)) {
			    options.continuousVertical = false;
			    showError('warn', "Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled");
			}
			if(options.continuousVertical && options.scrollBar){
				options.continuousVertical = false;
				showError('warn', "Option `scrollBar` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled");
			}

			//anchors can not have the same value as any element ID or NAME
			$.each(options.anchors, function(index, name){
				if($('#' + name).length || $('[name="'+name+'"]').length ){
					showError('error', "data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE).");
				}
			});
		}

		function showError(type, text){
			console && console[type] && console[type]('fullPage: ' + text);
		}
	};
})(jQuery);

typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){var i=n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||t;return i},onDomLoad:function(e){r(e)}},typeof n.init!="undefined"&&n.init()}(window),function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(typeof o.initHtml4.initialized!="undefined")return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex(),n;return n=e===t,n},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return typeof e=="undefined"?t=o.savedHashes[o.savedHashes.length-1]:e<0?t=o.savedHashes[o.savedHashes.length+e]:t=o.savedHashes[e],t},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var r=o.getHashByState(e),i;return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e),n;return n=o.discardedStates[t]||!1,n},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t="",r,i,u,a,f=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",r),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):r!==u&&(u=r,f&&r===""?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null,s=null,u=null,a;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),a=o.discardedState(i),a?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},typeof o.init!="undefined"&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage,s.setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode;if(typeof h.init!="undefined")throw new Error("History.js Core has already been loaded...");h.init=function(e){return typeof h.Adapter=="undefined"?!1:(typeof h.initCore!="undefined"&&h.initCore(),typeof h.initHtml4!="undefined"&&h.initHtml4(),!0)},h.initCore=function(d){if(typeof h.initCore.initialized!="undefined")return!1;h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(typeof t!="undefined"&&t!==null){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",t=r.getElementById("log"),i,s,o,u,a;e?(u=Array.prototype.slice.call(arguments),i=u.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n";for(s=1,o=arguments.length;s<o;++s){a=arguments[s];if(typeof a=="object"&&typeof l!="undefined")try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=typeof h.getInternetExplorerMajorVersion.cached!="undefined"?h.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");while((t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0]);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!="undefined"?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1)e+=":"+r.location.port;return e+="/",e},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return e.length===1&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref(),n;return n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"}),n},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(e)||(r==="/"?n=h.getRootUrl()+e.replace(/^\/+/,""):r==="#"?n=h.getPageUrl().replace(/#.*/,"")+e:r==="?"?n=h.getPageUrl().replace(/[\?#].*/,"")+e:t?n=h.getBaseUrl()+e.replace(/^(\.\/)+/,""):n=h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),t},h.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){typeof e=="undefined"&&(e=!0),typeof t=="undefined"&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t=h.extractId(e.url),n;if(!t){n=h.getStateString(e);if(typeof h.stateToId[n]!="undefined")t=h.stateToId[n];else if(typeof h.store.stateToId[n]!="undefined")t=h.store.stateToId[n];else{for(;;){t=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof h.idToState[t]=="undefined"&&typeof h.store.idToState[t]=="undefined")break}h.stateToId[n]=t,h.idToState[t]=e}}return t},h.normalizeState=function(e){var t,n;if(!e||typeof e!="object")e={};if(typeof e.normalized!="undefined")return e;if(!e.data||typeof e.data!="object")e.data={};return t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r),r},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,r;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=l.stringify(n),r},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id,n},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash,n},h.extractId=function(e){var t,n,r,i;return e.indexOf("#")!=-1?i=e.split("#")[0]:i=e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),r=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n=null,r,i;return t=t||!1,r=h.extractId(e),r&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),r=h.getIdByUrl(i)||!1,r&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t=!1,n;return n=h.extractState(e.url),t=n&&n.id!==e.id,t},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1,n,r,i;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return typeof e=="undefined"?t=h.savedStates[h.savedStates.length-1]:e<0?t=h.savedStates[h.savedStates.length+e]:t=h.savedStates[e],t},h.getCurrentIndex=function(){var e=null;return h.savedStates.length<1?e=0:e=h.savedStates.length-1,e},h.getHash=function(e){var t=h.getLocationHref(e),n;return n=h.getHashByUrl(t),n},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t),t},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,i;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t),t},h.setTitle=function(e){var t=e.title,n;t||(n=h.getStateByIndex(0),n&&n.url===e.url&&(t=n.title||h.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){typeof e!="undefined"?h.busy.flag=e:typeof h.busy.flag=="undefined"&&(h.busy.flag=!1);if(!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(h.busy.flag)return;for(e=h.queues.length-1;e>=0;--e){n=h.queues[e];if(n.length===0)continue;r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay)}};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return typeof e=="function"&&(e={callback:e}),typeof t!="undefined"&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref()),n;if(!h.isLastSavedState(t))return n=t,n||(n=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h;return},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h};if(h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var r=!1,i=!1,s,o;return h.doubleCheckComplete(),s=h.getHash(),s?(o=h.extractState(s||h.getLocationHref(),!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,r?i=h.getStateById(r):h.expectedStateId?i=h.getStateById(h.expectedStateId):i=h.extractState(h.getLocationHref()),i||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState){if(!h.idToState.hasOwnProperty(t))continue;e.idToState[t]=h.idToState[t]}for(t in h.urlToId){if(!h.urlToId.hasOwnProperty(t))continue;e.urlToId[t]=h.urlToId[t]}for(t in h.stateToId){if(!h.stateToId.hasOwnProperty(t))continue;e.stateToId[t]=h.stateToId[t]}h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload));if(!h.emulated.pushState){h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval));if(i.vendor==="Apple Computer, Inc."||(i.appCodeName||"")==="Mozilla")h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})}},(!h.options||!h.options.delayInit)&&h.init()}(window)
/*!
* jquery.inputmask.bundle.js
* https://github.com/RobinHerbots/Inputmask
* Copyright (c) 2010 - 2017 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 3.3.11
*/

!function(modules) {
    function __webpack_require__(moduleId) {
        if (installedModules[moduleId]) return installedModules[moduleId].exports;
        var module = installedModules[moduleId] = {
            i: moduleId,
            l: !1,
            exports: {}
        };
        return modules[moduleId].call(module.exports, module, module.exports, __webpack_require__), 
        module.l = !0, module.exports;
    }
    var installedModules = {};
    __webpack_require__.m = modules, __webpack_require__.c = installedModules, __webpack_require__.d = function(exports, name, getter) {
        __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {
            configurable: !1,
            enumerable: !0,
            get: getter
        });
    }, __webpack_require__.n = function(module) {
        var getter = module && module.__esModule ? function() {
            return module.default;
        } : function() {
            return module;
        };
        return __webpack_require__.d(getter, "a", getter), getter;
    }, __webpack_require__.o = function(object, property) {
        return Object.prototype.hasOwnProperty.call(object, property);
    }, __webpack_require__.p = "", __webpack_require__(__webpack_require__.s = 3);
}([ function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(2) ], void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($) {
        return $;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj;
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(10), __webpack_require__(11) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, window, document, undefined) {
        function Inputmask(alias, options, internal) {
            if (!(this instanceof Inputmask)) return new Inputmask(alias, options, internal);
            this.el = undefined, this.events = {}, this.maskset = undefined, this.refreshValue = !1, 
            !0 !== internal && ($.isPlainObject(alias) ? options = alias : (options = options || {}).alias = alias, 
            this.opts = $.extend(!0, {}, this.defaults, options), this.noMasksCache = options && options.definitions !== undefined, 
            this.userOptions = options || {}, this.isRTL = this.opts.numericInput, resolveAlias(this.opts.alias, options, this.opts));
        }
        function resolveAlias(aliasStr, options, opts) {
            var aliasDefinition = Inputmask.prototype.aliases[aliasStr];
            return aliasDefinition ? (aliasDefinition.alias && resolveAlias(aliasDefinition.alias, undefined, opts), 
            $.extend(!0, opts, aliasDefinition), $.extend(!0, opts, options), !0) : (null === opts.mask && (opts.mask = aliasStr), 
            !1);
        }
        function generateMaskSet(opts, nocache) {
            function generateMask(mask, metadata, opts) {
                var regexMask = !1;
                if (null !== mask && "" !== mask || ((regexMask = null !== opts.regex) ? mask = (mask = opts.regex).replace(/^(\^)(.*)(\$)$/, "$2") : (regexMask = !0, 
                mask = ".*")), 1 === mask.length && !1 === opts.greedy && 0 !== opts.repeat && (opts.placeholder = ""), 
                opts.repeat > 0 || "*" === opts.repeat || "+" === opts.repeat) {
                    var repeatStart = "*" === opts.repeat ? 0 : "+" === opts.repeat ? 1 : opts.repeat;
                    mask = opts.groupmarker.start + mask + opts.groupmarker.end + opts.quantifiermarker.start + repeatStart + "," + opts.repeat + opts.quantifiermarker.end;
                }
                var masksetDefinition, maskdefKey = regexMask ? "regex_" + opts.regex : opts.numericInput ? mask.split("").reverse().join("") : mask;
                return Inputmask.prototype.masksCache[maskdefKey] === undefined || !0 === nocache ? (masksetDefinition = {
                    mask: mask,
                    maskToken: Inputmask.prototype.analyseMask(mask, regexMask, opts),
                    validPositions: {},
                    _buffer: undefined,
                    buffer: undefined,
                    tests: {},
                    metadata: metadata,
                    maskLength: undefined
                }, !0 !== nocache && (Inputmask.prototype.masksCache[maskdefKey] = masksetDefinition, 
                masksetDefinition = $.extend(!0, {}, Inputmask.prototype.masksCache[maskdefKey]))) : masksetDefinition = $.extend(!0, {}, Inputmask.prototype.masksCache[maskdefKey]), 
                masksetDefinition;
            }
            if ($.isFunction(opts.mask) && (opts.mask = opts.mask(opts)), $.isArray(opts.mask)) {
                if (opts.mask.length > 1) {
                    opts.keepStatic = null === opts.keepStatic || opts.keepStatic;
                    var altMask = opts.groupmarker.start;
                    return $.each(opts.numericInput ? opts.mask.reverse() : opts.mask, function(ndx, msk) {
                        altMask.length > 1 && (altMask += opts.groupmarker.end + opts.alternatormarker + opts.groupmarker.start), 
                        msk.mask === undefined || $.isFunction(msk.mask) ? altMask += msk : altMask += msk.mask;
                    }), altMask += opts.groupmarker.end, generateMask(altMask, opts.mask, opts);
                }
                opts.mask = opts.mask.pop();
            }
            return opts.mask && opts.mask.mask !== undefined && !$.isFunction(opts.mask.mask) ? generateMask(opts.mask.mask, opts.mask, opts) : generateMask(opts.mask, opts.mask, opts);
        }
        function maskScope(actionObj, maskset, opts) {
            function getMaskTemplate(baseOnInput, minimalPos, includeMode) {
                minimalPos = minimalPos || 0;
                var ndxIntlzr, test, testPos, maskTemplate = [], pos = 0, lvp = getLastValidPosition();
                do {
                    !0 === baseOnInput && getMaskSet().validPositions[pos] ? (test = (testPos = getMaskSet().validPositions[pos]).match, 
                    ndxIntlzr = testPos.locator.slice(), maskTemplate.push(!0 === includeMode ? testPos.input : !1 === includeMode ? test.nativeDef : getPlaceholder(pos, test))) : (test = (testPos = getTestTemplate(pos, ndxIntlzr, pos - 1)).match, 
                    ndxIntlzr = testPos.locator.slice(), (!1 === opts.jitMasking || pos < lvp || "number" == typeof opts.jitMasking && isFinite(opts.jitMasking) && opts.jitMasking > pos) && maskTemplate.push(!1 === includeMode ? test.nativeDef : getPlaceholder(pos, test))), 
                    pos++;
                } while ((maxLength === undefined || pos < maxLength) && (null !== test.fn || "" !== test.def) || minimalPos > pos);
                return "" === maskTemplate[maskTemplate.length - 1] && maskTemplate.pop(), getMaskSet().maskLength = pos + 1, 
                maskTemplate;
            }
            function getMaskSet() {
                return maskset;
            }
            function resetMaskSet(soft) {
                var maskset = getMaskSet();
                maskset.buffer = undefined, !0 !== soft && (maskset.validPositions = {}, maskset.p = 0);
            }
            function getLastValidPosition(closestTo, strict, validPositions) {
                var before = -1, after = -1, valids = validPositions || getMaskSet().validPositions;
                closestTo === undefined && (closestTo = -1);
                for (var posNdx in valids) {
                    var psNdx = parseInt(posNdx);
                    valids[psNdx] && (strict || !0 !== valids[psNdx].generatedInput) && (psNdx <= closestTo && (before = psNdx), 
                    psNdx >= closestTo && (after = psNdx));
                }
                return -1 !== before && closestTo - before > 1 || after < closestTo ? before : after;
            }
            function stripValidPositions(start, end, nocheck, strict) {
                var i, startPos = start, positionsClone = $.extend(!0, {}, getMaskSet().validPositions), needsValidation = !1;
                for (getMaskSet().p = start, i = end - 1; i >= startPos; i--) getMaskSet().validPositions[i] !== undefined && (!0 !== nocheck && (!getMaskSet().validPositions[i].match.optionality && function(pos) {
                    var posMatch = getMaskSet().validPositions[pos];
                    if (posMatch !== undefined && null === posMatch.match.fn) {
                        var prevMatch = getMaskSet().validPositions[pos - 1], nextMatch = getMaskSet().validPositions[pos + 1];
                        return prevMatch !== undefined && nextMatch !== undefined;
                    }
                    return !1;
                }(i) || !1 === opts.canClearPosition(getMaskSet(), i, getLastValidPosition(), strict, opts)) || delete getMaskSet().validPositions[i]);
                for (resetMaskSet(!0), i = startPos + 1; i <= getLastValidPosition(); ) {
                    for (;getMaskSet().validPositions[startPos] !== undefined; ) startPos++;
                    if (i < startPos && (i = startPos + 1), getMaskSet().validPositions[i] === undefined && isMask(i)) i++; else {
                        var t = getTestTemplate(i);
                        !1 === needsValidation && positionsClone[startPos] && positionsClone[startPos].match.def === t.match.def ? (getMaskSet().validPositions[startPos] = $.extend(!0, {}, positionsClone[startPos]), 
                        getMaskSet().validPositions[startPos].input = t.input, delete getMaskSet().validPositions[i], 
                        i++) : positionCanMatchDefinition(startPos, t.match.def) ? !1 !== isValid(startPos, t.input || getPlaceholder(i), !0) && (delete getMaskSet().validPositions[i], 
                        i++, needsValidation = !0) : isMask(i) || (i++, startPos--), startPos++;
                    }
                }
                resetMaskSet(!0);
            }
            function determineTestTemplate(tests, guessNextBest) {
                for (var testPos, testPositions = tests, lvp = getLastValidPosition(), lvTest = getMaskSet().validPositions[lvp] || getTests(0)[0], lvTestAltArr = lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation].toString().split(",") : [], ndx = 0; ndx < testPositions.length && (!((testPos = testPositions[ndx]).match && (opts.greedy && !0 !== testPos.match.optionalQuantifier || (!1 === testPos.match.optionality || !1 === testPos.match.newBlockMarker) && !0 !== testPos.match.optionalQuantifier) && (lvTest.alternation === undefined || lvTest.alternation !== testPos.alternation || testPos.locator[lvTest.alternation] !== undefined && checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","), lvTestAltArr))) || !0 === guessNextBest && (null !== testPos.match.fn || /[0-9a-bA-Z]/.test(testPos.match.def))); ndx++) ;
                return testPos;
            }
            function getTestTemplate(pos, ndxIntlzr, tstPs) {
                return getMaskSet().validPositions[pos] || determineTestTemplate(getTests(pos, ndxIntlzr ? ndxIntlzr.slice() : ndxIntlzr, tstPs));
            }
            function getTest(pos) {
                return getMaskSet().validPositions[pos] ? getMaskSet().validPositions[pos] : getTests(pos)[0];
            }
            function positionCanMatchDefinition(pos, def) {
                for (var valid = !1, tests = getTests(pos), tndx = 0; tndx < tests.length; tndx++) if (tests[tndx].match && tests[tndx].match.def === def) {
                    valid = !0;
                    break;
                }
                return valid;
            }
            function getTests(pos, ndxIntlzr, tstPs) {
                function resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) {
                    function handleMatch(match, loopNdx, quantifierRecurse) {
                        function isFirstMatch(latestMatch, tokenGroup) {
                            var firstMatch = 0 === $.inArray(latestMatch, tokenGroup.matches);
                            return firstMatch || $.each(tokenGroup.matches, function(ndx, match) {
                                if (!0 === match.isQuantifier && (firstMatch = isFirstMatch(latestMatch, tokenGroup.matches[ndx - 1]))) return !1;
                            }), firstMatch;
                        }
                        function resolveNdxInitializer(pos, alternateNdx, targetAlternation) {
                            var bestMatch, indexPos;
                            if (getMaskSet().validPositions[pos - 1] && targetAlternation && getMaskSet().tests[pos]) for (var vpAlternation = getMaskSet().validPositions[pos - 1].locator, tpAlternation = getMaskSet().tests[pos][0].locator, i = 0; i < targetAlternation; i++) if (vpAlternation[i] !== tpAlternation[i]) return vpAlternation.slice(targetAlternation + 1);
                            return (getMaskSet().tests[pos] || getMaskSet().validPositions[pos]) && $.each(getMaskSet().tests[pos] || [ getMaskSet().validPositions[pos] ], function(ndx, lmnt) {
                                var alternation = targetAlternation !== undefined ? targetAlternation : lmnt.alternation, ndxPos = lmnt.locator[alternation] !== undefined ? lmnt.locator[alternation].toString().indexOf(alternateNdx) : -1;
                                (indexPos === undefined || ndxPos < indexPos) && -1 !== ndxPos && (bestMatch = lmnt, 
                                indexPos = ndxPos);
                            }), bestMatch ? bestMatch.locator.slice((targetAlternation !== undefined ? targetAlternation : bestMatch.alternation) + 1) : targetAlternation !== undefined ? resolveNdxInitializer(pos, alternateNdx) : undefined;
                        }
                        if (testPos > 1e4) throw "Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. " + getMaskSet().mask;
                        if (testPos === pos && match.matches === undefined) return matches.push({
                            match: match,
                            locator: loopNdx.reverse(),
                            cd: cacheDependency
                        }), !0;
                        if (match.matches !== undefined) {
                            if (match.isGroup && quantifierRecurse !== match) {
                                if (match = handleMatch(maskToken.matches[$.inArray(match, maskToken.matches) + 1], loopNdx)) return !0;
                            } else if (match.isOptional) {
                                var optionalToken = match;
                                if (match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse)) {
                                    if (latestMatch = matches[matches.length - 1].match, !isFirstMatch(latestMatch, optionalToken)) return !0;
                                    insertStop = !0, testPos = pos;
                                }
                            } else if (match.isAlternator) {
                                var maltMatches, alternateToken = match, malternateMatches = [], currentMatches = matches.slice(), loopNdxCnt = loopNdx.length, altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;
                                if (-1 === altIndex || "string" == typeof altIndex) {
                                    var amndx, currentPos = testPos, ndxInitializerClone = ndxInitializer.slice(), altIndexArr = [];
                                    if ("string" == typeof altIndex) altIndexArr = altIndex.split(","); else for (amndx = 0; amndx < alternateToken.matches.length; amndx++) altIndexArr.push(amndx);
                                    for (var ndx = 0; ndx < altIndexArr.length; ndx++) {
                                        if (amndx = parseInt(altIndexArr[ndx]), matches = [], ndxInitializer = resolveNdxInitializer(testPos, amndx, loopNdxCnt) || ndxInitializerClone.slice(), 
                                        !0 !== (match = handleMatch(alternateToken.matches[amndx] || maskToken.matches[amndx], [ amndx ].concat(loopNdx), quantifierRecurse) || match) && match !== undefined && altIndexArr[altIndexArr.length - 1] < alternateToken.matches.length) {
                                            var ntndx = $.inArray(match, maskToken.matches) + 1;
                                            maskToken.matches.length > ntndx && (match = handleMatch(maskToken.matches[ntndx], [ ntndx ].concat(loopNdx.slice(1, loopNdx.length)), quantifierRecurse)) && (altIndexArr.push(ntndx.toString()), 
                                            $.each(matches, function(ndx, lmnt) {
                                                lmnt.alternation = loopNdx.length - 1;
                                            }));
                                        }
                                        maltMatches = matches.slice(), testPos = currentPos, matches = [];
                                        for (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {
                                            var altMatch = maltMatches[ndx1], dropMatch = !1;
                                            altMatch.alternation = altMatch.alternation || loopNdxCnt;
                                            for (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {
                                                var altMatch2 = malternateMatches[ndx2];
                                                if ("string" != typeof altIndex || -1 !== $.inArray(altMatch.locator[altMatch.alternation].toString(), altIndexArr)) {
                                                    if (function(source, target) {
                                                        return source.match.nativeDef === target.match.nativeDef || source.match.def === target.match.nativeDef || source.match.nativeDef === target.match.def;
                                                    }(altMatch, altMatch2)) {
                                                        dropMatch = !0, altMatch.alternation === altMatch2.alternation && -1 === altMatch2.locator[altMatch2.alternation].toString().indexOf(altMatch.locator[altMatch.alternation]) && (altMatch2.locator[altMatch2.alternation] = altMatch2.locator[altMatch2.alternation] + "," + altMatch.locator[altMatch.alternation], 
                                                        altMatch2.alternation = altMatch.alternation), altMatch.match.nativeDef === altMatch2.match.def && (altMatch.locator[altMatch.alternation] = altMatch2.locator[altMatch2.alternation], 
                                                        malternateMatches.splice(malternateMatches.indexOf(altMatch2), 1, altMatch));
                                                        break;
                                                    }
                                                    if (altMatch.match.def === altMatch2.match.def) {
                                                        dropMatch = !1;
                                                        break;
                                                    }
                                                    if (function(source, target) {
                                                        return null === source.match.fn && null !== target.match.fn && target.match.fn.test(source.match.def, getMaskSet(), pos, !1, opts, !1);
                                                    }(altMatch, altMatch2) || function(source, target) {
                                                        return null !== source.match.fn && null !== target.match.fn && target.match.fn.test(source.match.def.replace(/[\[\]]/g, ""), getMaskSet(), pos, !1, opts, !1);
                                                    }(altMatch, altMatch2)) {
                                                        altMatch.alternation === altMatch2.alternation && -1 === altMatch.locator[altMatch.alternation].toString().indexOf(altMatch2.locator[altMatch2.alternation].toString().split("")[0]) && (altMatch.na = altMatch.na || altMatch.locator[altMatch.alternation].toString(), 
                                                        -1 === altMatch.na.indexOf(altMatch.locator[altMatch.alternation].toString().split("")[0]) && (altMatch.na = altMatch.na + "," + altMatch.locator[altMatch2.alternation].toString().split("")[0]), 
                                                        dropMatch = !0, altMatch.locator[altMatch.alternation] = altMatch2.locator[altMatch2.alternation].toString().split("")[0] + "," + altMatch.locator[altMatch.alternation], 
                                                        malternateMatches.splice(malternateMatches.indexOf(altMatch2), 0, altMatch));
                                                        break;
                                                    }
                                                }
                                            }
                                            dropMatch || malternateMatches.push(altMatch);
                                        }
                                    }
                                    "string" == typeof altIndex && (malternateMatches = $.map(malternateMatches, function(lmnt, ndx) {
                                        if (isFinite(ndx)) {
                                            var alternation = lmnt.alternation, altLocArr = lmnt.locator[alternation].toString().split(",");
                                            lmnt.locator[alternation] = undefined, lmnt.alternation = undefined;
                                            for (var alndx = 0; alndx < altLocArr.length; alndx++) -1 !== $.inArray(altLocArr[alndx], altIndexArr) && (lmnt.locator[alternation] !== undefined ? (lmnt.locator[alternation] += ",", 
                                            lmnt.locator[alternation] += altLocArr[alndx]) : lmnt.locator[alternation] = parseInt(altLocArr[alndx]), 
                                            lmnt.alternation = alternation);
                                            if (lmnt.locator[alternation] !== undefined) return lmnt;
                                        }
                                    })), matches = currentMatches.concat(malternateMatches), testPos = pos, insertStop = matches.length > 0, 
                                    match = malternateMatches.length > 0, ndxInitializer = ndxInitializerClone.slice();
                                } else match = handleMatch(alternateToken.matches[altIndex] || maskToken.matches[altIndex], [ altIndex ].concat(loopNdx), quantifierRecurse);
                                if (match) return !0;
                            } else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[$.inArray(match, maskToken.matches) - 1]) for (var qt = match, qndx = ndxInitializer.length > 0 ? ndxInitializer.shift() : 0; qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max) && testPos <= pos; qndx++) {
                                var tokenGroup = maskToken.matches[$.inArray(qt, maskToken.matches) - 1];
                                if (match = handleMatch(tokenGroup, [ qndx ].concat(loopNdx), tokenGroup)) {
                                    if (latestMatch = matches[matches.length - 1].match, latestMatch.optionalQuantifier = qndx > qt.quantifier.min - 1, 
                                    isFirstMatch(latestMatch, tokenGroup)) {
                                        if (qndx > qt.quantifier.min - 1) {
                                            insertStop = !0, testPos = pos;
                                            break;
                                        }
                                        return !0;
                                    }
                                    return !0;
                                }
                            } else if (match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse)) return !0;
                        } else testPos++;
                    }
                    for (var tndx = ndxInitializer.length > 0 ? ndxInitializer.shift() : 0; tndx < maskToken.matches.length; tndx++) if (!0 !== maskToken.matches[tndx].isQuantifier) {
                        var match = handleMatch(maskToken.matches[tndx], [ tndx ].concat(loopNdx), quantifierRecurse);
                        if (match && testPos === pos) return match;
                        if (testPos > pos) break;
                    }
                }
                function filterTests(tests) {
                    if (opts.keepStatic && pos > 0 && tests.length > 1 + ("" === tests[tests.length - 1].match.def ? 1 : 0) && !0 !== tests[0].match.optionality && !0 !== tests[0].match.optionalQuantifier && null === tests[0].match.fn && !/[0-9a-bA-Z]/.test(tests[0].match.def)) {
                        if (getMaskSet().validPositions[pos - 1] === undefined) return [ determineTestTemplate(tests) ];
                        if (getMaskSet().validPositions[pos - 1].alternation === tests[0].alternation) return [ determineTestTemplate(tests) ];
                        if (getMaskSet().validPositions[pos - 1]) return [ determineTestTemplate(tests) ];
                    }
                    return tests;
                }
                var latestMatch, maskTokens = getMaskSet().maskToken, testPos = ndxIntlzr ? tstPs : 0, ndxInitializer = ndxIntlzr ? ndxIntlzr.slice() : [ 0 ], matches = [], insertStop = !1, cacheDependency = ndxIntlzr ? ndxIntlzr.join("") : "";
                if (pos > -1) {
                    if (ndxIntlzr === undefined) {
                        for (var test, previousPos = pos - 1; (test = getMaskSet().validPositions[previousPos] || getMaskSet().tests[previousPos]) === undefined && previousPos > -1; ) previousPos--;
                        test !== undefined && previousPos > -1 && (ndxInitializer = function(tests) {
                            var locator = [];
                            return $.isArray(tests) || (tests = [ tests ]), tests.length > 0 && (tests[0].alternation === undefined ? 0 === (locator = determineTestTemplate(tests.slice()).locator.slice()).length && (locator = tests[0].locator.slice()) : $.each(tests, function(ndx, tst) {
                                if ("" !== tst.def) if (0 === locator.length) locator = tst.locator.slice(); else for (var i = 0; i < locator.length; i++) tst.locator[i] && -1 === locator[i].toString().indexOf(tst.locator[i]) && (locator[i] += "," + tst.locator[i]);
                            })), locator;
                        }(test), cacheDependency = ndxInitializer.join(""), testPos = previousPos);
                    }
                    if (getMaskSet().tests[pos] && getMaskSet().tests[pos][0].cd === cacheDependency) return filterTests(getMaskSet().tests[pos]);
                    for (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length && !(resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [ mtndx ]) && testPos === pos || testPos > pos); mtndx++) ;
                }
                return (0 === matches.length || insertStop) && matches.push({
                    match: {
                        fn: null,
                        cardinality: 0,
                        optionality: !0,
                        casing: null,
                        def: "",
                        placeholder: ""
                    },
                    locator: [],
                    cd: cacheDependency
                }), ndxIntlzr !== undefined && getMaskSet().tests[pos] ? filterTests($.extend(!0, [], matches)) : (getMaskSet().tests[pos] = $.extend(!0, [], matches), 
                filterTests(getMaskSet().tests[pos]));
            }
            function getBufferTemplate() {
                return getMaskSet()._buffer === undefined && (getMaskSet()._buffer = getMaskTemplate(!1, 1), 
                getMaskSet().buffer === undefined && (getMaskSet().buffer = getMaskSet()._buffer.slice())), 
                getMaskSet()._buffer;
            }
            function getBuffer(noCache) {
                return getMaskSet().buffer !== undefined && !0 !== noCache || (getMaskSet().buffer = getMaskTemplate(!0, getLastValidPosition(), !0)), 
                getMaskSet().buffer;
            }
            function refreshFromBuffer(start, end, buffer) {
                var i, p;
                if (!0 === start) resetMaskSet(), start = 0, end = buffer.length; else for (i = start; i < end; i++) delete getMaskSet().validPositions[i];
                for (p = start, i = start; i < end; i++) if (resetMaskSet(!0), buffer[i] !== opts.skipOptionalPartCharacter) {
                    var valResult = isValid(p, buffer[i], !0, !0);
                    !1 !== valResult && (resetMaskSet(!0), p = valResult.caret !== undefined ? valResult.caret : valResult.pos + 1);
                }
            }
            function casing(elem, test, pos) {
                switch (opts.casing || test.casing) {
                  case "upper":
                    elem = elem.toUpperCase();
                    break;

                  case "lower":
                    elem = elem.toLowerCase();
                    break;

                  case "title":
                    var posBefore = getMaskSet().validPositions[pos - 1];
                    elem = 0 === pos || posBefore && posBefore.input === String.fromCharCode(Inputmask.keyCode.SPACE) ? elem.toUpperCase() : elem.toLowerCase();
                    break;

                  default:
                    if ($.isFunction(opts.casing)) {
                        var args = Array.prototype.slice.call(arguments);
                        args.push(getMaskSet().validPositions), elem = opts.casing.apply(this, args);
                    }
                }
                return elem;
            }
            function checkAlternationMatch(altArr1, altArr2, na) {
                for (var naNdx, altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1), isMatch = !1, naArr = na !== undefined ? na.split(",") : [], i = 0; i < naArr.length; i++) -1 !== (naNdx = altArr1.indexOf(naArr[i])) && altArr1.splice(naNdx, 1);
                for (var alndx = 0; alndx < altArr1.length; alndx++) if (-1 !== $.inArray(altArr1[alndx], altArrC)) {
                    isMatch = !0;
                    break;
                }
                return isMatch;
            }
            function isValid(pos, c, strict, fromSetValid, fromAlternate, validateOnly) {
                function isSelection(posObj) {
                    var selection = isRTL ? posObj.begin - posObj.end > 1 || posObj.begin - posObj.end == 1 : posObj.end - posObj.begin > 1 || posObj.end - posObj.begin == 1;
                    return selection && 0 === posObj.begin && posObj.end === getMaskSet().maskLength ? "full" : selection;
                }
                function _isValid(position, c, strict) {
                    var rslt = !1;
                    return $.each(getTests(position), function(ndx, tst) {
                        for (var test = tst.match, loopend = c ? 1 : 0, chrs = "", i = test.cardinality; i > loopend; i--) chrs += getBufferElement(position - (i - 1));
                        if (c && (chrs += c), getBuffer(!0), !1 !== (rslt = null != test.fn ? test.fn.test(chrs, getMaskSet(), position, strict, opts, isSelection(pos)) : (c === test.def || c === opts.skipOptionalPartCharacter) && "" !== test.def && {
                            c: getPlaceholder(position, test, !0) || test.def,
                            pos: position
                        })) {
                            var elem = rslt.c !== undefined ? rslt.c : c;
                            elem = elem === opts.skipOptionalPartCharacter && null === test.fn ? getPlaceholder(position, test, !0) || test.def : elem;
                            var validatedPos = position, possibleModifiedBuffer = getBuffer();
                            if (rslt.remove !== undefined && ($.isArray(rslt.remove) || (rslt.remove = [ rslt.remove ]), 
                            $.each(rslt.remove.sort(function(a, b) {
                                return b - a;
                            }), function(ndx, lmnt) {
                                stripValidPositions(lmnt, lmnt + 1, !0);
                            })), rslt.insert !== undefined && ($.isArray(rslt.insert) || (rslt.insert = [ rslt.insert ]), 
                            $.each(rslt.insert.sort(function(a, b) {
                                return a - b;
                            }), function(ndx, lmnt) {
                                isValid(lmnt.pos, lmnt.c, !0, fromSetValid);
                            })), rslt.refreshFromBuffer) {
                                var refresh = rslt.refreshFromBuffer;
                                if (refreshFromBuffer(!0 === refresh ? refresh : refresh.start, refresh.end, possibleModifiedBuffer), 
                                rslt.pos === undefined && rslt.c === undefined) return rslt.pos = getLastValidPosition(), 
                                !1;
                                if ((validatedPos = rslt.pos !== undefined ? rslt.pos : position) !== position) return rslt = $.extend(rslt, isValid(validatedPos, elem, !0, fromSetValid)), 
                                !1;
                            } else if (!0 !== rslt && rslt.pos !== undefined && rslt.pos !== position && (validatedPos = rslt.pos, 
                            refreshFromBuffer(position, validatedPos, getBuffer().slice()), validatedPos !== position)) return rslt = $.extend(rslt, isValid(validatedPos, elem, !0)), 
                            !1;
                            return (!0 === rslt || rslt.pos !== undefined || rslt.c !== undefined) && (ndx > 0 && resetMaskSet(!0), 
                            setValidPosition(validatedPos, $.extend({}, tst, {
                                input: casing(elem, test, validatedPos)
                            }), fromSetValid, isSelection(pos)) || (rslt = !1), !1);
                        }
                    }), rslt;
                }
                function setValidPosition(pos, validTest, fromSetValid, isSelection) {
                    if (isSelection || opts.insertMode && getMaskSet().validPositions[pos] !== undefined && fromSetValid === undefined) {
                        var i, positionsClone = $.extend(!0, {}, getMaskSet().validPositions), lvp = getLastValidPosition(undefined, !0);
                        for (i = pos; i <= lvp; i++) delete getMaskSet().validPositions[i];
                        getMaskSet().validPositions[pos] = $.extend(!0, {}, validTest);
                        var j, valid = !0, vps = getMaskSet().validPositions, needsValidation = !1, initialLength = getMaskSet().maskLength;
                        for (i = j = pos; i <= lvp; i++) {
                            var t = positionsClone[i];
                            if (t !== undefined) for (var posMatch = j; posMatch < getMaskSet().maskLength && (null === t.match.fn && vps[i] && (!0 === vps[i].match.optionalQuantifier || !0 === vps[i].match.optionality) || null != t.match.fn); ) {
                                if (posMatch++, !1 === needsValidation && positionsClone[posMatch] && positionsClone[posMatch].match.def === t.match.def) getMaskSet().validPositions[posMatch] = $.extend(!0, {}, positionsClone[posMatch]), 
                                getMaskSet().validPositions[posMatch].input = t.input, fillMissingNonMask(posMatch), 
                                j = posMatch, valid = !0; else if (positionCanMatchDefinition(posMatch, t.match.def)) {
                                    var result = isValid(posMatch, t.input, !0, !0);
                                    valid = !1 !== result, j = result.caret || result.insert ? getLastValidPosition() : posMatch, 
                                    needsValidation = !0;
                                } else if (!(valid = !0 === t.generatedInput) && posMatch >= getMaskSet().maskLength - 1) break;
                                if (getMaskSet().maskLength < initialLength && (getMaskSet().maskLength = initialLength), 
                                valid) break;
                            }
                            if (!valid) break;
                        }
                        if (!valid) return getMaskSet().validPositions = $.extend(!0, {}, positionsClone), 
                        resetMaskSet(!0), !1;
                    } else getMaskSet().validPositions[pos] = $.extend(!0, {}, validTest);
                    return resetMaskSet(!0), !0;
                }
                function fillMissingNonMask(maskPos) {
                    for (var pndx = maskPos - 1; pndx > -1 && !getMaskSet().validPositions[pndx]; pndx--) ;
                    var testTemplate, testsFromPos;
                    for (pndx++; pndx < maskPos; pndx++) getMaskSet().validPositions[pndx] === undefined && (!1 === opts.jitMasking || opts.jitMasking > pndx) && ("" === (testsFromPos = getTests(pndx, getTestTemplate(pndx - 1).locator, pndx - 1).slice())[testsFromPos.length - 1].match.def && testsFromPos.pop(), 
                    (testTemplate = determineTestTemplate(testsFromPos)) && (testTemplate.match.def === opts.radixPointDefinitionSymbol || !isMask(pndx, !0) || $.inArray(opts.radixPoint, getBuffer()) < pndx && testTemplate.match.fn && testTemplate.match.fn.test(getPlaceholder(pndx), getMaskSet(), pndx, !1, opts)) && !1 !== (result = _isValid(pndx, getPlaceholder(pndx, testTemplate.match, !0) || (null == testTemplate.match.fn ? testTemplate.match.def : "" !== getPlaceholder(pndx) ? getPlaceholder(pndx) : getBuffer()[pndx]), !0)) && (getMaskSet().validPositions[result.pos || pndx].generatedInput = !0));
                }
                strict = !0 === strict;
                var maskPos = pos;
                pos.begin !== undefined && (maskPos = isRTL && !isSelection(pos) ? pos.end : pos.begin);
                var result = !0, positionsClone = $.extend(!0, {}, getMaskSet().validPositions);
                if ($.isFunction(opts.preValidation) && !strict && !0 !== fromSetValid && !0 !== validateOnly && (result = opts.preValidation(getBuffer(), maskPos, c, isSelection(pos), opts)), 
                !0 === result) {
                    if (fillMissingNonMask(maskPos), isSelection(pos) && (handleRemove(undefined, Inputmask.keyCode.DELETE, pos, !0, !0), 
                    maskPos = getMaskSet().p), maskPos < getMaskSet().maskLength && (maxLength === undefined || maskPos < maxLength) && (result = _isValid(maskPos, c, strict), 
                    (!strict || !0 === fromSetValid) && !1 === result && !0 !== validateOnly)) {
                        var currentPosValid = getMaskSet().validPositions[maskPos];
                        if (!currentPosValid || null !== currentPosValid.match.fn || currentPosValid.match.def !== c && c !== opts.skipOptionalPartCharacter) {
                            if ((opts.insertMode || getMaskSet().validPositions[seekNext(maskPos)] === undefined) && !isMask(maskPos, !0)) for (var nPos = maskPos + 1, snPos = seekNext(maskPos); nPos <= snPos; nPos++) if (!1 !== (result = _isValid(nPos, c, strict))) {
                                !function(originalPos, newPos) {
                                    var vp = getMaskSet().validPositions[newPos];
                                    if (vp) for (var targetLocator = vp.locator, tll = targetLocator.length, ps = originalPos; ps < newPos; ps++) if (getMaskSet().validPositions[ps] === undefined && !isMask(ps, !0)) {
                                        var tests = getTests(ps).slice(), bestMatch = determineTestTemplate(tests, !0), equality = -1;
                                        "" === tests[tests.length - 1].match.def && tests.pop(), $.each(tests, function(ndx, tst) {
                                            for (var i = 0; i < tll; i++) {
                                                if (tst.locator[i] === undefined || !checkAlternationMatch(tst.locator[i].toString().split(","), targetLocator[i].toString().split(","), tst.na)) {
                                                    var targetAI = targetLocator[i], bestMatchAI = bestMatch.locator[i], tstAI = tst.locator[i];
                                                    targetAI - bestMatchAI > Math.abs(targetAI - tstAI) && (bestMatch = tst);
                                                    break;
                                                }
                                                equality < i && (equality = i, bestMatch = tst);
                                            }
                                        }), (bestMatch = $.extend({}, bestMatch, {
                                            input: getPlaceholder(ps, bestMatch.match, !0) || bestMatch.match.def
                                        })).generatedInput = !0, setValidPosition(ps, bestMatch, !0), getMaskSet().validPositions[newPos] = undefined, 
                                        _isValid(newPos, vp.input, !0);
                                    }
                                }(maskPos, result.pos !== undefined ? result.pos : nPos), maskPos = nPos;
                                break;
                            }
                        } else result = {
                            caret: seekNext(maskPos)
                        };
                    }
                    !1 === result && opts.keepStatic && !strict && !0 !== fromAlternate && (result = function(pos, c, strict) {
                        var lastAlt, alternation, altPos, prevAltPos, i, validPos, altNdxs, decisionPos, validPsClone = $.extend(!0, {}, getMaskSet().validPositions), isValidRslt = !1, lAltPos = getLastValidPosition();
                        for (prevAltPos = getMaskSet().validPositions[lAltPos]; lAltPos >= 0; lAltPos--) if ((altPos = getMaskSet().validPositions[lAltPos]) && altPos.alternation !== undefined) {
                            if (lastAlt = lAltPos, alternation = getMaskSet().validPositions[lastAlt].alternation, 
                            prevAltPos.locator[altPos.alternation] !== altPos.locator[altPos.alternation]) break;
                            prevAltPos = altPos;
                        }
                        if (alternation !== undefined) {
                            decisionPos = parseInt(lastAlt);
                            var decisionTaker = prevAltPos.locator[prevAltPos.alternation || alternation] !== undefined ? prevAltPos.locator[prevAltPos.alternation || alternation] : altNdxs[0];
                            decisionTaker.length > 0 && (decisionTaker = decisionTaker.split(",")[0]);
                            var possibilityPos = getMaskSet().validPositions[decisionPos], prevPos = getMaskSet().validPositions[decisionPos - 1];
                            $.each(getTests(decisionPos, prevPos ? prevPos.locator : undefined, decisionPos - 1), function(ndx, test) {
                                altNdxs = test.locator[alternation] ? test.locator[alternation].toString().split(",") : [];
                                for (var mndx = 0; mndx < altNdxs.length; mndx++) {
                                    var validInputs = [], staticInputsBeforePos = 0, staticInputsBeforePosAlternate = 0, verifyValidInput = !1;
                                    if (decisionTaker < altNdxs[mndx] && (test.na === undefined || -1 === $.inArray(altNdxs[mndx], test.na.split(",")) || -1 === $.inArray(decisionTaker.toString(), altNdxs))) {
                                        getMaskSet().validPositions[decisionPos] = $.extend(!0, {}, test);
                                        var possibilities = getMaskSet().validPositions[decisionPos].locator;
                                        for (getMaskSet().validPositions[decisionPos].locator[alternation] = parseInt(altNdxs[mndx]), 
                                        null == test.match.fn ? (possibilityPos.input !== test.match.def && (verifyValidInput = !0, 
                                        !0 !== possibilityPos.generatedInput && validInputs.push(possibilityPos.input)), 
                                        staticInputsBeforePosAlternate++, getMaskSet().validPositions[decisionPos].generatedInput = !/[0-9a-bA-Z]/.test(test.match.def), 
                                        getMaskSet().validPositions[decisionPos].input = test.match.def) : getMaskSet().validPositions[decisionPos].input = possibilityPos.input, 
                                        i = decisionPos + 1; i < getLastValidPosition(undefined, !0) + 1; i++) (validPos = getMaskSet().validPositions[i]) && !0 !== validPos.generatedInput && /[0-9a-bA-Z]/.test(validPos.input) ? validInputs.push(validPos.input) : i < pos && staticInputsBeforePos++, 
                                        delete getMaskSet().validPositions[i];
                                        for (verifyValidInput && validInputs[0] === test.match.def && validInputs.shift(), 
                                        resetMaskSet(!0), isValidRslt = !0; validInputs.length > 0; ) {
                                            var input = validInputs.shift();
                                            if (input !== opts.skipOptionalPartCharacter && !(isValidRslt = isValid(getLastValidPosition(undefined, !0) + 1, input, !1, fromSetValid, !0))) break;
                                        }
                                        if (isValidRslt) {
                                            getMaskSet().validPositions[decisionPos].locator = possibilities;
                                            var targetLvp = getLastValidPosition(pos) + 1;
                                            for (i = decisionPos + 1; i < getLastValidPosition() + 1; i++) ((validPos = getMaskSet().validPositions[i]) === undefined || null == validPos.match.fn) && i < pos + (staticInputsBeforePosAlternate - staticInputsBeforePos) && staticInputsBeforePosAlternate++;
                                            isValidRslt = isValid((pos += staticInputsBeforePosAlternate - staticInputsBeforePos) > targetLvp ? targetLvp : pos, c, strict, fromSetValid, !0);
                                        }
                                        if (isValidRslt) return !1;
                                        resetMaskSet(), getMaskSet().validPositions = $.extend(!0, {}, validPsClone);
                                    }
                                }
                            });
                        }
                        return isValidRslt;
                    }(maskPos, c, strict)), !0 === result && (result = {
                        pos: maskPos
                    });
                }
                if ($.isFunction(opts.postValidation) && !1 !== result && !strict && !0 !== fromSetValid && !0 !== validateOnly) {
                    var postResult = opts.postValidation(getBuffer(!0), result, opts);
                    if (postResult.refreshFromBuffer && postResult.buffer) {
                        var refresh = postResult.refreshFromBuffer;
                        refreshFromBuffer(!0 === refresh ? refresh : refresh.start, refresh.end, postResult.buffer);
                    }
                    result = !0 === postResult ? result : postResult;
                }
                return result && result.pos === undefined && (result.pos = maskPos), !1 !== result && !0 !== validateOnly || (resetMaskSet(!0), 
                getMaskSet().validPositions = $.extend(!0, {}, positionsClone)), result;
            }
            function isMask(pos, strict) {
                var test = getTestTemplate(pos).match;
                if ("" === test.def && (test = getTest(pos).match), null != test.fn) return test.fn;
                if (!0 !== strict && pos > -1) {
                    var tests = getTests(pos);
                    return tests.length > 1 + ("" === tests[tests.length - 1].match.def ? 1 : 0);
                }
                return !1;
            }
            function seekNext(pos, newBlock) {
                var maskL = getMaskSet().maskLength;
                if (pos >= maskL) return maskL;
                var position = pos;
                for (getTests(maskL + 1).length > 1 && (getMaskTemplate(!0, maskL + 1, !0), maskL = getMaskSet().maskLength); ++position < maskL && (!0 === newBlock && (!0 !== getTest(position).match.newBlockMarker || !isMask(position)) || !0 !== newBlock && !isMask(position)); ) ;
                return position;
            }
            function seekPrevious(pos, newBlock) {
                var tests, position = pos;
                if (position <= 0) return 0;
                for (;--position > 0 && (!0 === newBlock && !0 !== getTest(position).match.newBlockMarker || !0 !== newBlock && !isMask(position) && ((tests = getTests(position)).length < 2 || 2 === tests.length && "" === tests[1].match.def)); ) ;
                return position;
            }
            function getBufferElement(position) {
                return getMaskSet().validPositions[position] === undefined ? getPlaceholder(position) : getMaskSet().validPositions[position].input;
            }
            function writeBuffer(input, buffer, caretPos, event, triggerInputEvent) {
                if (event && $.isFunction(opts.onBeforeWrite)) {
                    var result = opts.onBeforeWrite.call(inputmask, event, buffer, caretPos, opts);
                    if (result) {
                        if (result.refreshFromBuffer) {
                            var refresh = result.refreshFromBuffer;
                            refreshFromBuffer(!0 === refresh ? refresh : refresh.start, refresh.end, result.buffer || buffer), 
                            buffer = getBuffer(!0);
                        }
                        caretPos !== undefined && (caretPos = result.caret !== undefined ? result.caret : caretPos);
                    }
                }
                input !== undefined && (input.inputmask._valueSet(buffer.join("")), caretPos === undefined || event !== undefined && "blur" === event.type ? renderColorMask(input, caretPos, 0 === buffer.length) : android && event && "input" === event.type ? setTimeout(function() {
                    caret(input, caretPos);
                }, 0) : caret(input, caretPos), !0 === triggerInputEvent && (skipInputEvent = !0, 
                $(input).trigger("input")));
            }
            function getPlaceholder(pos, test, returnPL) {
                if ((test = test || getTest(pos).match).placeholder !== undefined || !0 === returnPL) return $.isFunction(test.placeholder) ? test.placeholder(opts) : test.placeholder;
                if (null === test.fn) {
                    if (pos > -1 && getMaskSet().validPositions[pos] === undefined) {
                        var prevTest, tests = getTests(pos), staticAlternations = [];
                        if (tests.length > 1 + ("" === tests[tests.length - 1].match.def ? 1 : 0)) for (var i = 0; i < tests.length; i++) if (!0 !== tests[i].match.optionality && !0 !== tests[i].match.optionalQuantifier && (null === tests[i].match.fn || prevTest === undefined || !1 !== tests[i].match.fn.test(prevTest.match.def, getMaskSet(), pos, !0, opts)) && (staticAlternations.push(tests[i]), 
                        null === tests[i].match.fn && (prevTest = tests[i]), staticAlternations.length > 1 && /[0-9a-bA-Z]/.test(staticAlternations[0].match.def))) return opts.placeholder.charAt(pos % opts.placeholder.length);
                    }
                    return test.def;
                }
                return opts.placeholder.charAt(pos % opts.placeholder.length);
            }
            function checkVal(input, writeOut, strict, nptvl, initiatingEvent) {
                function isTemplateMatch(ndx, charCodes) {
                    return -1 !== getBufferTemplate().slice(ndx, seekNext(ndx)).join("").indexOf(charCodes) && !isMask(ndx) && getTest(ndx).match.nativeDef === charCodes.charAt(charCodes.length - 1);
                }
                var inputValue = nptvl.slice(), charCodes = "", initialNdx = -1, result = undefined;
                if (resetMaskSet(), strict || !0 === opts.autoUnmask) initialNdx = seekNext(initialNdx); else {
                    var staticInput = getBufferTemplate().slice(0, seekNext(-1)).join(""), matches = inputValue.join("").match(new RegExp("^" + Inputmask.escapeRegex(staticInput), "g"));
                    matches && matches.length > 0 && (inputValue.splice(0, matches.length * staticInput.length), 
                    initialNdx = seekNext(initialNdx));
                }
                if (-1 === initialNdx ? (getMaskSet().p = seekNext(initialNdx), initialNdx = 0) : getMaskSet().p = initialNdx, 
                $.each(inputValue, function(ndx, charCode) {
                    if (charCode !== undefined) if (getMaskSet().validPositions[ndx] === undefined && inputValue[ndx] === getPlaceholder(ndx) && isMask(ndx, !0) && !1 === isValid(ndx, inputValue[ndx], !0, undefined, undefined, !0)) getMaskSet().p++; else {
                        var keypress = new $.Event("_checkval");
                        keypress.which = charCode.charCodeAt(0), charCodes += charCode;
                        var lvp = getLastValidPosition(undefined, !0), lvTest = getMaskSet().validPositions[lvp], nextTest = getTestTemplate(lvp + 1, lvTest ? lvTest.locator.slice() : undefined, lvp);
                        if (!isTemplateMatch(initialNdx, charCodes) || strict || opts.autoUnmask) {
                            var pos = strict ? ndx : null == nextTest.match.fn && nextTest.match.optionality && lvp + 1 < getMaskSet().p ? lvp + 1 : getMaskSet().p;
                            result = EventHandlers.keypressEvent.call(input, keypress, !0, !1, strict, pos), 
                            initialNdx = pos + 1, charCodes = "";
                        } else result = EventHandlers.keypressEvent.call(input, keypress, !0, !1, !0, lvp + 1);
                        if (!1 !== result && !strict && $.isFunction(opts.onBeforeWrite)) {
                            var origResult = result;
                            if (result = opts.onBeforeWrite.call(inputmask, keypress, getBuffer(), result.forwardPosition, opts), 
                            (result = $.extend(origResult, result)) && result.refreshFromBuffer) {
                                var refresh = result.refreshFromBuffer;
                                refreshFromBuffer(!0 === refresh ? refresh : refresh.start, refresh.end, result.buffer), 
                                resetMaskSet(!0), result.caret && (getMaskSet().p = result.caret, result.forwardPosition = result.caret);
                            }
                        }
                    }
                }), writeOut) {
                    var caretPos = undefined;
                    document.activeElement === input && result && (caretPos = opts.numericInput ? seekPrevious(result.forwardPosition) : result.forwardPosition), 
                    writeBuffer(input, getBuffer(), caretPos, initiatingEvent || new $.Event("checkval"), initiatingEvent && "input" === initiatingEvent.type);
                }
            }
            function unmaskedvalue(input) {
                if (input) {
                    if (input.inputmask === undefined) return input.value;
                    input.inputmask && input.inputmask.refreshValue && EventHandlers.setValueEvent.call(input);
                }
                var umValue = [], vps = getMaskSet().validPositions;
                for (var pndx in vps) vps[pndx].match && null != vps[pndx].match.fn && umValue.push(vps[pndx].input);
                var unmaskedValue = 0 === umValue.length ? "" : (isRTL ? umValue.reverse() : umValue).join("");
                if ($.isFunction(opts.onUnMask)) {
                    var bufferValue = (isRTL ? getBuffer().slice().reverse() : getBuffer()).join("");
                    unmaskedValue = opts.onUnMask.call(inputmask, bufferValue, unmaskedValue, opts);
                }
                return unmaskedValue;
            }
            function caret(input, begin, end, notranslate) {
                function translatePosition(pos) {
                    return !0 === notranslate || !isRTL || "number" != typeof pos || opts.greedy && "" === opts.placeholder || (pos = getBuffer().join("").length - pos), 
                    pos;
                }
                var range;
                if (begin === undefined) return input.setSelectionRange ? (begin = input.selectionStart, 
                end = input.selectionEnd) : window.getSelection ? (range = window.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode !== input && range.commonAncestorContainer !== input || (begin = range.startOffset, 
                end = range.endOffset) : document.selection && document.selection.createRange && (end = (begin = 0 - (range = document.selection.createRange()).duplicate().moveStart("character", -input.inputmask._valueGet().length)) + range.text.length), 
                {
                    begin: translatePosition(begin),
                    end: translatePosition(end)
                };
                if (begin.begin !== undefined && (end = begin.end, begin = begin.begin), "number" == typeof begin) {
                    begin = translatePosition(begin), end = "number" == typeof (end = translatePosition(end)) ? end : begin;
                    var scrollCalc = parseInt(((input.ownerDocument.defaultView || window).getComputedStyle ? (input.ownerDocument.defaultView || window).getComputedStyle(input, null) : input.currentStyle).fontSize) * end;
                    if (input.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0, mobile || !1 !== opts.insertMode || begin !== end || end++, 
                    input.setSelectionRange) input.selectionStart = begin, input.selectionEnd = end; else if (window.getSelection) {
                        if (range = document.createRange(), input.firstChild === undefined || null === input.firstChild) {
                            var textNode = document.createTextNode("");
                            input.appendChild(textNode);
                        }
                        range.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length), 
                        range.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length), 
                        range.collapse(!0);
                        var sel = window.getSelection();
                        sel.removeAllRanges(), sel.addRange(range);
                    } else input.createTextRange && ((range = input.createTextRange()).collapse(!0), 
                    range.moveEnd("character", end), range.moveStart("character", begin), range.select());
                    renderColorMask(input, {
                        begin: begin,
                        end: end
                    });
                }
            }
            function determineLastRequiredPosition(returnDefinition) {
                var pos, testPos, buffer = getBuffer(), bl = buffer.length, lvp = getLastValidPosition(), positions = {}, lvTest = getMaskSet().validPositions[lvp], ndxIntlzr = lvTest !== undefined ? lvTest.locator.slice() : undefined;
                for (pos = lvp + 1; pos < buffer.length; pos++) ndxIntlzr = (testPos = getTestTemplate(pos, ndxIntlzr, pos - 1)).locator.slice(), 
                positions[pos] = $.extend(!0, {}, testPos);
                var lvTestAlt = lvTest && lvTest.alternation !== undefined ? lvTest.locator[lvTest.alternation] : undefined;
                for (pos = bl - 1; pos > lvp && (((testPos = positions[pos]).match.optionality || testPos.match.optionalQuantifier && testPos.match.newBlockMarker || lvTestAlt && (lvTestAlt !== positions[pos].locator[lvTest.alternation] && null != testPos.match.fn || null === testPos.match.fn && testPos.locator[lvTest.alternation] && checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","), lvTestAlt.toString().split(",")) && "" !== getTests(pos)[0].def)) && buffer[pos] === getPlaceholder(pos, testPos.match)); pos--) bl--;
                return returnDefinition ? {
                    l: bl,
                    def: positions[bl] ? positions[bl].match : undefined
                } : bl;
            }
            function clearOptionalTail(buffer) {
                for (var validPos, rl = determineLastRequiredPosition(), bl = buffer.length, lv = getMaskSet().validPositions[getLastValidPosition()]; rl < bl && !isMask(rl, !0) && (validPos = lv !== undefined ? getTestTemplate(rl, lv.locator.slice(""), lv) : getTest(rl)) && !0 !== validPos.match.optionality && (!0 !== validPos.match.optionalQuantifier && !0 !== validPos.match.newBlockMarker || rl + 1 === bl && "" === (lv !== undefined ? getTestTemplate(rl + 1, lv.locator.slice(""), lv) : getTest(rl + 1)).match.def); ) rl++;
                for (;(validPos = getMaskSet().validPositions[rl - 1]) && validPos && validPos.match.optionality && validPos.input === opts.skipOptionalPartCharacter; ) rl--;
                return buffer.splice(rl), buffer;
            }
            function isComplete(buffer) {
                if ($.isFunction(opts.isComplete)) return opts.isComplete(buffer, opts);
                if ("*" === opts.repeat) return undefined;
                var complete = !1, lrp = determineLastRequiredPosition(!0), aml = seekPrevious(lrp.l);
                if (lrp.def === undefined || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {
                    complete = !0;
                    for (var i = 0; i <= aml; i++) {
                        var test = getTestTemplate(i).match;
                        if (null !== test.fn && getMaskSet().validPositions[i] === undefined && !0 !== test.optionality && !0 !== test.optionalQuantifier || null === test.fn && buffer[i] !== getPlaceholder(i, test)) {
                            complete = !1;
                            break;
                        }
                    }
                }
                return complete;
            }
            function handleRemove(input, k, pos, strict, fromIsValid) {
                if ((opts.numericInput || isRTL) && (k === Inputmask.keyCode.BACKSPACE ? k = Inputmask.keyCode.DELETE : k === Inputmask.keyCode.DELETE && (k = Inputmask.keyCode.BACKSPACE), 
                isRTL)) {
                    var pend = pos.end;
                    pos.end = pos.begin, pos.begin = pend;
                }
                k === Inputmask.keyCode.BACKSPACE && (pos.end - pos.begin < 1 || !1 === opts.insertMode) ? (pos.begin = seekPrevious(pos.begin), 
                getMaskSet().validPositions[pos.begin] !== undefined && getMaskSet().validPositions[pos.begin].input === opts.groupSeparator && pos.begin--) : k === Inputmask.keyCode.DELETE && pos.begin === pos.end && (pos.end = isMask(pos.end, !0) && getMaskSet().validPositions[pos.end] && getMaskSet().validPositions[pos.end].input !== opts.radixPoint ? pos.end + 1 : seekNext(pos.end) + 1, 
                getMaskSet().validPositions[pos.begin] !== undefined && getMaskSet().validPositions[pos.begin].input === opts.groupSeparator && pos.end++), 
                stripValidPositions(pos.begin, pos.end, !1, strict), !0 !== strict && function() {
                    if (opts.keepStatic) {
                        for (var validInputs = [], lastAlt = getLastValidPosition(-1, !0), positionsClone = $.extend(!0, {}, getMaskSet().validPositions), prevAltPos = getMaskSet().validPositions[lastAlt]; lastAlt >= 0; lastAlt--) {
                            var altPos = getMaskSet().validPositions[lastAlt];
                            if (altPos) {
                                if (!0 !== altPos.generatedInput && /[0-9a-bA-Z]/.test(altPos.input) && validInputs.push(altPos.input), 
                                delete getMaskSet().validPositions[lastAlt], altPos.alternation !== undefined && altPos.locator[altPos.alternation] !== prevAltPos.locator[altPos.alternation]) break;
                                prevAltPos = altPos;
                            }
                        }
                        if (lastAlt > -1) for (getMaskSet().p = seekNext(getLastValidPosition(-1, !0)); validInputs.length > 0; ) {
                            var keypress = new $.Event("keypress");
                            keypress.which = validInputs.pop().charCodeAt(0), EventHandlers.keypressEvent.call(input, keypress, !0, !1, !1, getMaskSet().p);
                        } else getMaskSet().validPositions = $.extend(!0, {}, positionsClone);
                    }
                }();
                var lvp = getLastValidPosition(pos.begin, !0);
                if (lvp < pos.begin) getMaskSet().p = seekNext(lvp); else if (!0 !== strict && (getMaskSet().p = pos.begin, 
                !0 !== fromIsValid)) for (;getMaskSet().p < lvp && getMaskSet().validPositions[getMaskSet().p] === undefined; ) getMaskSet().p++;
            }
            function initializeColorMask(input) {
                function findCaretPos(clientx) {
                    var caretPos, e = document.createElement("span");
                    for (var style in computedStyle) isNaN(style) && -1 !== style.indexOf("font") && (e.style[style] = computedStyle[style]);
                    e.style.textTransform = computedStyle.textTransform, e.style.letterSpacing = computedStyle.letterSpacing, 
                    e.style.position = "absolute", e.style.height = "auto", e.style.width = "auto", 
                    e.style.visibility = "hidden", e.style.whiteSpace = "nowrap", document.body.appendChild(e);
                    var itl, inputText = input.inputmask._valueGet(), previousWidth = 0;
                    for (caretPos = 0, itl = inputText.length; caretPos <= itl; caretPos++) {
                        if (e.innerHTML += inputText.charAt(caretPos) || "_", e.offsetWidth >= clientx) {
                            var offset1 = clientx - previousWidth, offset2 = e.offsetWidth - clientx;
                            e.innerHTML = inputText.charAt(caretPos), caretPos = (offset1 -= e.offsetWidth / 3) < offset2 ? caretPos - 1 : caretPos;
                            break;
                        }
                        previousWidth = e.offsetWidth;
                    }
                    return document.body.removeChild(e), caretPos;
                }
                var computedStyle = (input.ownerDocument.defaultView || window).getComputedStyle(input, null), template = document.createElement("div");
                template.style.width = computedStyle.width, template.style.textAlign = computedStyle.textAlign, 
                (colorMask = document.createElement("div")).className = "im-colormask", input.parentNode.insertBefore(colorMask, input), 
                input.parentNode.removeChild(input), colorMask.appendChild(template), colorMask.appendChild(input), 
                input.style.left = template.offsetLeft + "px", $(input).on("click", function(e) {
                    return caret(input, findCaretPos(e.clientX)), EventHandlers.clickEvent.call(input, [ e ]);
                }), $(input).on("keydown", function(e) {
                    e.shiftKey || !1 === opts.insertMode || setTimeout(function() {
                        renderColorMask(input);
                    }, 0);
                });
            }
            function renderColorMask(input, caretPos, clear) {
                function handleStatic() {
                    isStatic || null !== test.fn && testPos.input !== undefined ? isStatic && (null !== test.fn && testPos.input !== undefined || "" === test.def) && (isStatic = !1, 
                    maskTemplate += "</span>") : (isStatic = !0, maskTemplate += "<span class='im-static'>");
                }
                function handleCaret(force) {
                    !0 !== force && pos !== caretPos.begin || document.activeElement !== input || (maskTemplate += "<span class='im-caret' style='border-right-width: 1px;border-right-style: solid;'></span>");
                }
                var test, testPos, ndxIntlzr, maskTemplate = "", isStatic = !1, pos = 0;
                if (colorMask !== undefined) {
                    var buffer = getBuffer();
                    if (caretPos === undefined ? caretPos = caret(input) : caretPos.begin === undefined && (caretPos = {
                        begin: caretPos,
                        end: caretPos
                    }), !0 !== clear) {
                        var lvp = getLastValidPosition();
                        do {
                            handleCaret(), getMaskSet().validPositions[pos] ? (testPos = getMaskSet().validPositions[pos], 
                            test = testPos.match, ndxIntlzr = testPos.locator.slice(), handleStatic(), maskTemplate += buffer[pos]) : (testPos = getTestTemplate(pos, ndxIntlzr, pos - 1), 
                            test = testPos.match, ndxIntlzr = testPos.locator.slice(), (!1 === opts.jitMasking || pos < lvp || "number" == typeof opts.jitMasking && isFinite(opts.jitMasking) && opts.jitMasking > pos) && (handleStatic(), 
                            maskTemplate += getPlaceholder(pos, test))), pos++;
                        } while ((maxLength === undefined || pos < maxLength) && (null !== test.fn || "" !== test.def) || lvp > pos || isStatic);
                        -1 === maskTemplate.indexOf("im-caret") && handleCaret(!0), isStatic && handleStatic();
                    }
                    var template = colorMask.getElementsByTagName("div")[0];
                    template.innerHTML = maskTemplate, input.inputmask.positionColorMask(input, template);
                }
            }
            maskset = maskset || this.maskset, opts = opts || this.opts;
            var undoValue, $el, maxLength, colorMask, inputmask = this, el = this.el, isRTL = this.isRTL, skipKeyPressEvent = !1, skipInputEvent = !1, ignorable = !1, mouseEnter = !1, EventRuler = {
                on: function(input, eventName, eventHandler) {
                    var ev = function(e) {
                        if (this.inputmask === undefined && "FORM" !== this.nodeName) {
                            var imOpts = $.data(this, "_inputmask_opts");
                            imOpts ? new Inputmask(imOpts).mask(this) : EventRuler.off(this);
                        } else {
                            if ("setvalue" === e.type || "FORM" === this.nodeName || !(this.disabled || this.readOnly && !("keydown" === e.type && e.ctrlKey && 67 === e.keyCode || !1 === opts.tabThrough && e.keyCode === Inputmask.keyCode.TAB))) {
                                switch (e.type) {
                                  case "input":
                                    if (!0 === skipInputEvent) return skipInputEvent = !1, e.preventDefault();
                                    break;

                                  case "keydown":
                                    skipKeyPressEvent = !1, skipInputEvent = !1;
                                    break;

                                  case "keypress":
                                    if (!0 === skipKeyPressEvent) return e.preventDefault();
                                    skipKeyPressEvent = !0;
                                    break;

                                  case "click":
                                    if (iemobile || iphone) {
                                        var that = this, args = arguments;
                                        return setTimeout(function() {
                                            eventHandler.apply(that, args);
                                        }, 0), !1;
                                    }
                                }
                                var returnVal = eventHandler.apply(this, arguments);
                                return !1 === returnVal && (e.preventDefault(), e.stopPropagation()), returnVal;
                            }
                            e.preventDefault();
                        }
                    };
                    input.inputmask.events[eventName] = input.inputmask.events[eventName] || [], input.inputmask.events[eventName].push(ev), 
                    -1 !== $.inArray(eventName, [ "submit", "reset" ]) ? null !== input.form && $(input.form).on(eventName, ev) : $(input).on(eventName, ev);
                },
                off: function(input, event) {
                    if (input.inputmask && input.inputmask.events) {
                        var events;
                        event ? (events = [])[event] = input.inputmask.events[event] : events = input.inputmask.events, 
                        $.each(events, function(eventName, evArr) {
                            for (;evArr.length > 0; ) {
                                var ev = evArr.pop();
                                -1 !== $.inArray(eventName, [ "submit", "reset" ]) ? null !== input.form && $(input.form).off(eventName, ev) : $(input).off(eventName, ev);
                            }
                            delete input.inputmask.events[eventName];
                        });
                    }
                }
            }, EventHandlers = {
                keydownEvent: function(e) {
                    var input = this, $input = $(input), k = e.keyCode, pos = caret(input);
                    if (k === Inputmask.keyCode.BACKSPACE || k === Inputmask.keyCode.DELETE || iphone && k === Inputmask.keyCode.BACKSPACE_SAFARI || e.ctrlKey && k === Inputmask.keyCode.X && !function(eventName) {
                        var el = document.createElement("input"), evName = "on" + eventName, isSupported = evName in el;
                        return isSupported || (el.setAttribute(evName, "return;"), isSupported = "function" == typeof el[evName]), 
                        el = null, isSupported;
                    }("cut")) e.preventDefault(), handleRemove(input, k, pos), writeBuffer(input, getBuffer(!0), getMaskSet().p, e, input.inputmask._valueGet() !== getBuffer().join("")), 
                    input.inputmask._valueGet() === getBufferTemplate().join("") ? $input.trigger("cleared") : !0 === isComplete(getBuffer()) && $input.trigger("complete"); else if (k === Inputmask.keyCode.END || k === Inputmask.keyCode.PAGE_DOWN) {
                        e.preventDefault();
                        var caretPos = seekNext(getLastValidPosition());
                        opts.insertMode || caretPos !== getMaskSet().maskLength || e.shiftKey || caretPos--, 
                        caret(input, e.shiftKey ? pos.begin : caretPos, caretPos, !0);
                    } else k === Inputmask.keyCode.HOME && !e.shiftKey || k === Inputmask.keyCode.PAGE_UP ? (e.preventDefault(), 
                    caret(input, 0, e.shiftKey ? pos.begin : 0, !0)) : (opts.undoOnEscape && k === Inputmask.keyCode.ESCAPE || 90 === k && e.ctrlKey) && !0 !== e.altKey ? (checkVal(input, !0, !1, undoValue.split("")), 
                    $input.trigger("click")) : k !== Inputmask.keyCode.INSERT || e.shiftKey || e.ctrlKey ? !0 === opts.tabThrough && k === Inputmask.keyCode.TAB ? (!0 === e.shiftKey ? (null === getTest(pos.begin).match.fn && (pos.begin = seekNext(pos.begin)), 
                    pos.end = seekPrevious(pos.begin, !0), pos.begin = seekPrevious(pos.end, !0)) : (pos.begin = seekNext(pos.begin, !0), 
                    pos.end = seekNext(pos.begin, !0), pos.end < getMaskSet().maskLength && pos.end--), 
                    pos.begin < getMaskSet().maskLength && (e.preventDefault(), caret(input, pos.begin, pos.end))) : e.shiftKey || !1 === opts.insertMode && (k === Inputmask.keyCode.RIGHT ? setTimeout(function() {
                        var caretPos = caret(input);
                        caret(input, caretPos.begin);
                    }, 0) : k === Inputmask.keyCode.LEFT && setTimeout(function() {
                        var caretPos = caret(input);
                        caret(input, isRTL ? caretPos.begin + 1 : caretPos.begin - 1);
                    }, 0)) : (opts.insertMode = !opts.insertMode, caret(input, opts.insertMode || pos.begin !== getMaskSet().maskLength ? pos.begin : pos.begin - 1));
                    opts.onKeyDown.call(this, e, getBuffer(), caret(input).begin, opts), ignorable = -1 !== $.inArray(k, opts.ignorables);
                },
                keypressEvent: function(e, checkval, writeOut, strict, ndx) {
                    var input = this, $input = $(input), k = e.which || e.charCode || e.keyCode;
                    if (!(!0 === checkval || e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || ignorable)) return k === Inputmask.keyCode.ENTER && undoValue !== getBuffer().join("") && (undoValue = getBuffer().join(""), 
                    setTimeout(function() {
                        $input.trigger("change");
                    }, 0)), !0;
                    if (k) {
                        46 === k && !1 === e.shiftKey && "" !== opts.radixPoint && (k = opts.radixPoint.charCodeAt(0));
                        var forwardPosition, pos = checkval ? {
                            begin: ndx,
                            end: ndx
                        } : caret(input), c = String.fromCharCode(k);
                        getMaskSet().writeOutBuffer = !0;
                        var valResult = isValid(pos, c, strict);
                        if (!1 !== valResult && (resetMaskSet(!0), forwardPosition = valResult.caret !== undefined ? valResult.caret : checkval ? valResult.pos + 1 : seekNext(valResult.pos), 
                        getMaskSet().p = forwardPosition), !1 !== writeOut && (setTimeout(function() {
                            opts.onKeyValidation.call(input, k, valResult, opts);
                        }, 0), getMaskSet().writeOutBuffer && !1 !== valResult)) {
                            var buffer = getBuffer();
                            writeBuffer(input, buffer, opts.numericInput && valResult.caret === undefined ? seekPrevious(forwardPosition) : forwardPosition, e, !0 !== checkval), 
                            !0 !== checkval && setTimeout(function() {
                                !0 === isComplete(buffer) && $input.trigger("complete");
                            }, 0);
                        }
                        if (e.preventDefault(), checkval) return !1 !== valResult && (valResult.forwardPosition = forwardPosition), 
                        valResult;
                    }
                },
                pasteEvent: function(e) {
                    var tempValue, input = this, ev = e.originalEvent || e, $input = $(input), inputValue = input.inputmask._valueGet(!0), caretPos = caret(input);
                    isRTL && (tempValue = caretPos.end, caretPos.end = caretPos.begin, caretPos.begin = tempValue);
                    var valueBeforeCaret = inputValue.substr(0, caretPos.begin), valueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);
                    if (valueBeforeCaret === (isRTL ? getBufferTemplate().reverse() : getBufferTemplate()).slice(0, caretPos.begin).join("") && (valueBeforeCaret = ""), 
                    valueAfterCaret === (isRTL ? getBufferTemplate().reverse() : getBufferTemplate()).slice(caretPos.end).join("") && (valueAfterCaret = ""), 
                    isRTL && (tempValue = valueBeforeCaret, valueBeforeCaret = valueAfterCaret, valueAfterCaret = tempValue), 
                    window.clipboardData && window.clipboardData.getData) inputValue = valueBeforeCaret + window.clipboardData.getData("Text") + valueAfterCaret; else {
                        if (!ev.clipboardData || !ev.clipboardData.getData) return !0;
                        inputValue = valueBeforeCaret + ev.clipboardData.getData("text/plain") + valueAfterCaret;
                    }
                    var pasteValue = inputValue;
                    if ($.isFunction(opts.onBeforePaste)) {
                        if (!1 === (pasteValue = opts.onBeforePaste.call(inputmask, inputValue, opts))) return e.preventDefault();
                        pasteValue || (pasteValue = inputValue);
                    }
                    return checkVal(input, !1, !1, isRTL ? pasteValue.split("").reverse() : pasteValue.toString().split("")), 
                    writeBuffer(input, getBuffer(), seekNext(getLastValidPosition()), e, undoValue !== getBuffer().join("")), 
                    !0 === isComplete(getBuffer()) && $input.trigger("complete"), e.preventDefault();
                },
                inputFallBackEvent: function(e) {
                    var input = this, inputValue = input.inputmask._valueGet();
                    if (getBuffer().join("") !== inputValue) {
                        var caretPos = caret(input);
                        if (!1 === function(input, inputValue, caretPos) {
                            if ("." === inputValue.charAt(caretPos.begin - 1) && "" !== opts.radixPoint && ((inputValue = inputValue.split(""))[caretPos.begin - 1] = opts.radixPoint.charAt(0), 
                            inputValue = inputValue.join("")), inputValue.charAt(caretPos.begin - 1) === opts.radixPoint && inputValue.length > getBuffer().length) {
                                var keypress = new $.Event("keypress");
                                return keypress.which = opts.radixPoint.charCodeAt(0), EventHandlers.keypressEvent.call(input, keypress, !0, !0, !1, caretPos.begin - 1), 
                                !1;
                            }
                        }(input, inputValue, caretPos)) return !1;
                        if (inputValue = inputValue.replace(new RegExp("(" + Inputmask.escapeRegex(getBufferTemplate().join("")) + ")*"), ""), 
                        !1 === function(input, inputValue, caretPos) {
                            if (iemobile) {
                                var inputChar = inputValue.replace(getBuffer().join(""), "");
                                if (1 === inputChar.length) {
                                    var keypress = new $.Event("keypress");
                                    return keypress.which = inputChar.charCodeAt(0), EventHandlers.keypressEvent.call(input, keypress, !0, !0, !1, getMaskSet().validPositions[caretPos.begin - 1] ? caretPos.begin : caretPos.begin - 1), 
                                    !1;
                                }
                            }
                        }(input, inputValue, caretPos)) return !1;
                        caretPos.begin > inputValue.length && (caret(input, inputValue.length), caretPos = caret(input));
                        var buffer = getBuffer().join(""), frontPart = inputValue.substr(0, caretPos.begin), backPart = inputValue.substr(caretPos.begin), frontBufferPart = buffer.substr(0, caretPos.begin), backBufferPart = buffer.substr(caretPos.begin), selection = caretPos, entries = "", isEntry = !1;
                        if (frontPart !== frontBufferPart) {
                            selection.begin = 0;
                            for (var fpl = (isEntry = frontPart.length >= frontBufferPart.length) ? frontPart.length : frontBufferPart.length, i = 0; frontPart.charAt(i) === frontBufferPart.charAt(i) && i < fpl; i++) selection.begin++;
                            isEntry && (entries += frontPart.slice(selection.begin, selection.end));
                        }
                        backPart !== backBufferPart && (backPart.length > backBufferPart.length ? isEntry && (selection.end = selection.begin) : backPart.length < backBufferPart.length ? selection.end += backBufferPart.length - backPart.length : backPart.charAt(0) !== backBufferPart.charAt(0) && selection.end++), 
                        writeBuffer(input, getBuffer(), selection), entries.length > 0 ? $.each(entries.split(""), function(ndx, entry) {
                            var keypress = new $.Event("keypress");
                            keypress.which = entry.charCodeAt(0), ignorable = !1, EventHandlers.keypressEvent.call(input, keypress);
                        }) : (selection.begin === selection.end - 1 && caret(input, seekPrevious(selection.begin + 1), selection.end), 
                        e.keyCode = Inputmask.keyCode.DELETE, EventHandlers.keydownEvent.call(input, e)), 
                        e.preventDefault();
                    }
                },
                setValueEvent: function(e) {
                    this.inputmask.refreshValue = !1;
                    var input = this, value = input.inputmask._valueGet(!0);
                    $.isFunction(opts.onBeforeMask) && (value = opts.onBeforeMask.call(inputmask, value, opts) || value), 
                    value = value.split(""), checkVal(input, !0, !1, isRTL ? value.reverse() : value), 
                    undoValue = getBuffer().join(""), (opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate().join("") && input.inputmask._valueSet("");
                },
                focusEvent: function(e) {
                    var input = this, nptValue = input.inputmask._valueGet();
                    opts.showMaskOnFocus && (!opts.showMaskOnHover || opts.showMaskOnHover && "" === nptValue) && (input.inputmask._valueGet() !== getBuffer().join("") ? writeBuffer(input, getBuffer(), seekNext(getLastValidPosition())) : !1 === mouseEnter && caret(input, seekNext(getLastValidPosition()))), 
                    !0 === opts.positionCaretOnTab && !1 === mouseEnter && "" !== nptValue && (writeBuffer(input, getBuffer(), caret(input)), 
                    EventHandlers.clickEvent.apply(input, [ e, !0 ])), undoValue = getBuffer().join("");
                },
                mouseleaveEvent: function(e) {
                    var input = this;
                    if (mouseEnter = !1, opts.clearMaskOnLostFocus && document.activeElement !== input) {
                        var buffer = getBuffer().slice(), nptValue = input.inputmask._valueGet();
                        nptValue !== input.getAttribute("placeholder") && "" !== nptValue && (-1 === getLastValidPosition() && nptValue === getBufferTemplate().join("") ? buffer = [] : clearOptionalTail(buffer), 
                        writeBuffer(input, buffer));
                    }
                },
                clickEvent: function(e, tabbed) {
                    function doRadixFocus(clickPos) {
                        if ("" !== opts.radixPoint) {
                            var vps = getMaskSet().validPositions;
                            if (vps[clickPos] === undefined || vps[clickPos].input === getPlaceholder(clickPos)) {
                                if (clickPos < seekNext(-1)) return !0;
                                var radixPos = $.inArray(opts.radixPoint, getBuffer());
                                if (-1 !== radixPos) {
                                    for (var vp in vps) if (radixPos < vp && vps[vp].input !== getPlaceholder(vp)) return !1;
                                    return !0;
                                }
                            }
                        }
                        return !1;
                    }
                    var input = this;
                    setTimeout(function() {
                        if (document.activeElement === input) {
                            var selectedCaret = caret(input);
                            if (tabbed && (isRTL ? selectedCaret.end = selectedCaret.begin : selectedCaret.begin = selectedCaret.end), 
                            selectedCaret.begin === selectedCaret.end) switch (opts.positionCaretOnClick) {
                              case "none":
                                break;

                              case "radixFocus":
                                if (doRadixFocus(selectedCaret.begin)) {
                                    var radixPos = getBuffer().join("").indexOf(opts.radixPoint);
                                    caret(input, opts.numericInput ? seekNext(radixPos) : radixPos);
                                    break;
                                }

                              default:
                                var clickPosition = selectedCaret.begin, lvclickPosition = getLastValidPosition(clickPosition, !0), lastPosition = seekNext(lvclickPosition);
                                if (clickPosition < lastPosition) caret(input, isMask(clickPosition, !0) || isMask(clickPosition - 1, !0) ? clickPosition : seekNext(clickPosition)); else {
                                    var lvp = getMaskSet().validPositions[lvclickPosition], tt = getTestTemplate(lastPosition, lvp ? lvp.match.locator : undefined, lvp), placeholder = getPlaceholder(lastPosition, tt.match);
                                    if ("" !== placeholder && getBuffer()[lastPosition] !== placeholder && !0 !== tt.match.optionalQuantifier && !0 !== tt.match.newBlockMarker || !isMask(lastPosition, !0) && tt.match.def === placeholder) {
                                        var newPos = seekNext(lastPosition);
                                        (clickPosition >= newPos || clickPosition === lastPosition) && (lastPosition = newPos);
                                    }
                                    caret(input, lastPosition);
                                }
                            }
                        }
                    }, 0);
                },
                dblclickEvent: function(e) {
                    var input = this;
                    setTimeout(function() {
                        caret(input, 0, seekNext(getLastValidPosition()));
                    }, 0);
                },
                cutEvent: function(e) {
                    var input = this, $input = $(input), pos = caret(input), ev = e.originalEvent || e, clipboardData = window.clipboardData || ev.clipboardData, clipData = isRTL ? getBuffer().slice(pos.end, pos.begin) : getBuffer().slice(pos.begin, pos.end);
                    clipboardData.setData("text", isRTL ? clipData.reverse().join("") : clipData.join("")), 
                    document.execCommand && document.execCommand("copy"), handleRemove(input, Inputmask.keyCode.DELETE, pos), 
                    writeBuffer(input, getBuffer(), getMaskSet().p, e, undoValue !== getBuffer().join("")), 
                    input.inputmask._valueGet() === getBufferTemplate().join("") && $input.trigger("cleared");
                },
                blurEvent: function(e) {
                    var $input = $(this), input = this;
                    if (input.inputmask) {
                        var nptValue = input.inputmask._valueGet(), buffer = getBuffer().slice();
                        "" !== nptValue && (opts.clearMaskOnLostFocus && (-1 === getLastValidPosition() && nptValue === getBufferTemplate().join("") ? buffer = [] : clearOptionalTail(buffer)), 
                        !1 === isComplete(buffer) && (setTimeout(function() {
                            $input.trigger("incomplete");
                        }, 0), opts.clearIncomplete && (resetMaskSet(), buffer = opts.clearMaskOnLostFocus ? [] : getBufferTemplate().slice())), 
                        writeBuffer(input, buffer, undefined, e)), undoValue !== getBuffer().join("") && (undoValue = buffer.join(""), 
                        $input.trigger("change"));
                    }
                },
                mouseenterEvent: function(e) {
                    var input = this;
                    mouseEnter = !0, document.activeElement !== input && opts.showMaskOnHover && input.inputmask._valueGet() !== getBuffer().join("") && writeBuffer(input, getBuffer());
                },
                submitEvent: function(e) {
                    undoValue !== getBuffer().join("") && $el.trigger("change"), opts.clearMaskOnLostFocus && -1 === getLastValidPosition() && el.inputmask._valueGet && el.inputmask._valueGet() === getBufferTemplate().join("") && el.inputmask._valueSet(""), 
                    opts.removeMaskOnSubmit && (el.inputmask._valueSet(el.inputmask.unmaskedvalue(), !0), 
                    setTimeout(function() {
                        writeBuffer(el, getBuffer());
                    }, 0));
                },
                resetEvent: function(e) {
                    el.inputmask.refreshValue = !0, setTimeout(function() {
                        $el.trigger("setvalue");
                    }, 0);
                }
            };
            Inputmask.prototype.positionColorMask = function(input, template) {
                input.style.left = template.offsetLeft + "px";
            };
            var valueBuffer;
            if (actionObj !== undefined) switch (actionObj.action) {
              case "isComplete":
                return el = actionObj.el, isComplete(getBuffer());

              case "unmaskedvalue":
                return el !== undefined && actionObj.value === undefined || (valueBuffer = actionObj.value, 
                valueBuffer = ($.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(inputmask, valueBuffer, opts) || valueBuffer : valueBuffer).split(""), 
                checkVal(undefined, !1, !1, isRTL ? valueBuffer.reverse() : valueBuffer), $.isFunction(opts.onBeforeWrite) && opts.onBeforeWrite.call(inputmask, undefined, getBuffer(), 0, opts)), 
                unmaskedvalue(el);

              case "mask":
                !function(elem) {
                    EventRuler.off(elem);
                    var isSupported = function(input, opts) {
                        var elementType = input.getAttribute("type"), isSupported = "INPUT" === input.tagName && -1 !== $.inArray(elementType, opts.supportsInputType) || input.isContentEditable || "TEXTAREA" === input.tagName;
                        if (!isSupported) if ("INPUT" === input.tagName) {
                            var el = document.createElement("input");
                            el.setAttribute("type", elementType), isSupported = "text" === el.type, el = null;
                        } else isSupported = "partial";
                        return !1 !== isSupported ? function(npt) {
                            function getter() {
                                return this.inputmask ? this.inputmask.opts.autoUnmask ? this.inputmask.unmaskedvalue() : -1 !== getLastValidPosition() || !0 !== opts.nullable ? document.activeElement === this && opts.clearMaskOnLostFocus ? (isRTL ? clearOptionalTail(getBuffer().slice()).reverse() : clearOptionalTail(getBuffer().slice())).join("") : valueGet.call(this) : "" : valueGet.call(this);
                            }
                            function setter(value) {
                                valueSet.call(this, value), this.inputmask && $(this).trigger("setvalue");
                            }
                            var valueGet, valueSet;
                            if (!npt.inputmask.__valueGet) {
                                if (!0 !== opts.noValuePatching) {
                                    if (Object.getOwnPropertyDescriptor) {
                                        "function" != typeof Object.getPrototypeOf && (Object.getPrototypeOf = "object" === _typeof("test".__proto__) ? function(object) {
                                            return object.__proto__;
                                        } : function(object) {
                                            return object.constructor.prototype;
                                        });
                                        var valueProperty = Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt), "value") : undefined;
                                        valueProperty && valueProperty.get && valueProperty.set ? (valueGet = valueProperty.get, 
                                        valueSet = valueProperty.set, Object.defineProperty(npt, "value", {
                                            get: getter,
                                            set: setter,
                                            configurable: !0
                                        })) : "INPUT" !== npt.tagName && (valueGet = function() {
                                            return this.textContent;
                                        }, valueSet = function(value) {
                                            this.textContent = value;
                                        }, Object.defineProperty(npt, "value", {
                                            get: getter,
                                            set: setter,
                                            configurable: !0
                                        }));
                                    } else document.__lookupGetter__ && npt.__lookupGetter__("value") && (valueGet = npt.__lookupGetter__("value"), 
                                    valueSet = npt.__lookupSetter__("value"), npt.__defineGetter__("value", getter), 
                                    npt.__defineSetter__("value", setter));
                                    npt.inputmask.__valueGet = valueGet, npt.inputmask.__valueSet = valueSet;
                                }
                                npt.inputmask._valueGet = function(overruleRTL) {
                                    return isRTL && !0 !== overruleRTL ? valueGet.call(this.el).split("").reverse().join("") : valueGet.call(this.el);
                                }, npt.inputmask._valueSet = function(value, overruleRTL) {
                                    valueSet.call(this.el, null === value || value === undefined ? "" : !0 !== overruleRTL && isRTL ? value.split("").reverse().join("") : value);
                                }, valueGet === undefined && (valueGet = function() {
                                    return this.value;
                                }, valueSet = function(value) {
                                    this.value = value;
                                }, function(type) {
                                    if ($.valHooks && ($.valHooks[type] === undefined || !0 !== $.valHooks[type].inputmaskpatch)) {
                                        var valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function(elem) {
                                            return elem.value;
                                        }, valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function(elem, value) {
                                            return elem.value = value, elem;
                                        };
                                        $.valHooks[type] = {
                                            get: function(elem) {
                                                if (elem.inputmask) {
                                                    if (elem.inputmask.opts.autoUnmask) return elem.inputmask.unmaskedvalue();
                                                    var result = valhookGet(elem);
                                                    return -1 !== getLastValidPosition(undefined, undefined, elem.inputmask.maskset.validPositions) || !0 !== opts.nullable ? result : "";
                                                }
                                                return valhookGet(elem);
                                            },
                                            set: function(elem, value) {
                                                var result, $elem = $(elem);
                                                return result = valhookSet(elem, value), elem.inputmask && $elem.trigger("setvalue"), 
                                                result;
                                            },
                                            inputmaskpatch: !0
                                        };
                                    }
                                }(npt.type), function(npt) {
                                    EventRuler.on(npt, "mouseenter", function(event) {
                                        var $input = $(this);
                                        this.inputmask._valueGet() !== getBuffer().join("") && $input.trigger("setvalue");
                                    });
                                }(npt));
                            }
                        }(input) : input.inputmask = undefined, isSupported;
                    }(elem, opts);
                    if (!1 !== isSupported && (el = elem, $el = $(el), -1 === (maxLength = el !== undefined ? el.maxLength : undefined) && (maxLength = undefined), 
                    !0 === opts.colorMask && initializeColorMask(el), android && (el.hasOwnProperty("inputmode") && (el.inputmode = opts.inputmode, 
                    el.setAttribute("inputmode", opts.inputmode)), "rtfm" === opts.androidHack && (!0 !== opts.colorMask && initializeColorMask(el), 
                    el.type = "password")), !0 === isSupported && (EventRuler.on(el, "submit", EventHandlers.submitEvent), 
                    EventRuler.on(el, "reset", EventHandlers.resetEvent), EventRuler.on(el, "mouseenter", EventHandlers.mouseenterEvent), 
                    EventRuler.on(el, "blur", EventHandlers.blurEvent), EventRuler.on(el, "focus", EventHandlers.focusEvent), 
                    EventRuler.on(el, "mouseleave", EventHandlers.mouseleaveEvent), !0 !== opts.colorMask && EventRuler.on(el, "click", EventHandlers.clickEvent), 
                    EventRuler.on(el, "dblclick", EventHandlers.dblclickEvent), EventRuler.on(el, "paste", EventHandlers.pasteEvent), 
                    EventRuler.on(el, "dragdrop", EventHandlers.pasteEvent), EventRuler.on(el, "drop", EventHandlers.pasteEvent), 
                    EventRuler.on(el, "cut", EventHandlers.cutEvent), EventRuler.on(el, "complete", opts.oncomplete), 
                    EventRuler.on(el, "incomplete", opts.onincomplete), EventRuler.on(el, "cleared", opts.oncleared), 
                    android || !0 === opts.inputEventOnly ? el.removeAttribute("maxLength") : (EventRuler.on(el, "keydown", EventHandlers.keydownEvent), 
                    EventRuler.on(el, "keypress", EventHandlers.keypressEvent)), EventRuler.on(el, "compositionstart", $.noop), 
                    EventRuler.on(el, "compositionupdate", $.noop), EventRuler.on(el, "compositionend", $.noop), 
                    EventRuler.on(el, "keyup", $.noop), EventRuler.on(el, "input", EventHandlers.inputFallBackEvent), 
                    EventRuler.on(el, "beforeinput", $.noop)), EventRuler.on(el, "setvalue", EventHandlers.setValueEvent), 
                    undoValue = getBufferTemplate().join(""), "" !== el.inputmask._valueGet(!0) || !1 === opts.clearMaskOnLostFocus || document.activeElement === el)) {
                        var initialValue = $.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(inputmask, el.inputmask._valueGet(!0), opts) || el.inputmask._valueGet(!0) : el.inputmask._valueGet(!0);
                        "" !== initialValue && checkVal(el, !0, !1, isRTL ? initialValue.split("").reverse() : initialValue.split(""));
                        var buffer = getBuffer().slice();
                        undoValue = buffer.join(""), !1 === isComplete(buffer) && opts.clearIncomplete && resetMaskSet(), 
                        opts.clearMaskOnLostFocus && document.activeElement !== el && (-1 === getLastValidPosition() ? buffer = [] : clearOptionalTail(buffer)), 
                        writeBuffer(el, buffer), document.activeElement === el && caret(el, seekNext(getLastValidPosition()));
                    }
                }(el);
                break;

              case "format":
                return valueBuffer = ($.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(inputmask, actionObj.value, opts) || actionObj.value : actionObj.value).split(""), 
                checkVal(undefined, !0, !1, isRTL ? valueBuffer.reverse() : valueBuffer), actionObj.metadata ? {
                    value: isRTL ? getBuffer().slice().reverse().join("") : getBuffer().join(""),
                    metadata: maskScope.call(this, {
                        action: "getmetadata"
                    }, maskset, opts)
                } : isRTL ? getBuffer().slice().reverse().join("") : getBuffer().join("");

              case "isValid":
                actionObj.value ? (valueBuffer = actionObj.value.split(""), checkVal(undefined, !0, !0, isRTL ? valueBuffer.reverse() : valueBuffer)) : actionObj.value = getBuffer().join("");
                for (var buffer = getBuffer(), rl = determineLastRequiredPosition(), lmib = buffer.length - 1; lmib > rl && !isMask(lmib); lmib--) ;
                return buffer.splice(rl, lmib + 1 - rl), isComplete(buffer) && actionObj.value === getBuffer().join("");

              case "getemptymask":
                return getBufferTemplate().join("");

              case "remove":
                if (el && el.inputmask) {
                    $el = $(el), el.inputmask._valueSet(opts.autoUnmask ? unmaskedvalue(el) : el.inputmask._valueGet(!0)), 
                    EventRuler.off(el);
                    Object.getOwnPropertyDescriptor && Object.getPrototypeOf ? Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el), "value") && el.inputmask.__valueGet && Object.defineProperty(el, "value", {
                        get: el.inputmask.__valueGet,
                        set: el.inputmask.__valueSet,
                        configurable: !0
                    }) : document.__lookupGetter__ && el.__lookupGetter__("value") && el.inputmask.__valueGet && (el.__defineGetter__("value", el.inputmask.__valueGet), 
                    el.__defineSetter__("value", el.inputmask.__valueSet)), el.inputmask = undefined;
                }
                return el;

              case "getmetadata":
                if ($.isArray(maskset.metadata)) {
                    var maskTarget = getMaskTemplate(!0, 0, !1).join("");
                    return $.each(maskset.metadata, function(ndx, mtdt) {
                        if (mtdt.mask === maskTarget) return maskTarget = mtdt, !1;
                    }), maskTarget;
                }
                return maskset.metadata;
            }
        }
        var ua = navigator.userAgent, mobile = /mobile/i.test(ua), iemobile = /iemobile/i.test(ua), iphone = /iphone/i.test(ua) && !iemobile, android = /android/i.test(ua) && !iemobile;
        return Inputmask.prototype = {
            dataAttribute: "data-inputmask",
            defaults: {
                placeholder: "_",
                optionalmarker: {
                    start: "[",
                    end: "]"
                },
                quantifiermarker: {
                    start: "{",
                    end: "}"
                },
                groupmarker: {
                    start: "(",
                    end: ")"
                },
                alternatormarker: "|",
                escapeChar: "\\",
                mask: null,
                regex: null,
                oncomplete: $.noop,
                onincomplete: $.noop,
                oncleared: $.noop,
                repeat: 0,
                greedy: !0,
                autoUnmask: !1,
                removeMaskOnSubmit: !1,
                clearMaskOnLostFocus: !0,
                insertMode: !0,
                clearIncomplete: !1,
                alias: null,
                onKeyDown: $.noop,
                onBeforeMask: null,
                onBeforePaste: function(pastedValue, opts) {
                    return $.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(this, pastedValue, opts) : pastedValue;
                },
                onBeforeWrite: null,
                onUnMask: null,
                showMaskOnFocus: !0,
                showMaskOnHover: !0,
                onKeyValidation: $.noop,
                skipOptionalPartCharacter: " ",
                numericInput: !1,
                rightAlign: !1,
                undoOnEscape: !0,
                radixPoint: "",
                radixPointDefinitionSymbol: undefined,
                groupSeparator: "",
                keepStatic: null,
                positionCaretOnTab: !0,
                tabThrough: !1,
                supportsInputType: [ "text", "tel", "password" ],
                ignorables: [ 8, 9, 13, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 0, 229 ],
                isComplete: null,
                canClearPosition: $.noop,
                preValidation: null,
                postValidation: null,
                staticDefinitionSymbol: undefined,
                jitMasking: !1,
                nullable: !0,
                inputEventOnly: !1,
                noValuePatching: !1,
                positionCaretOnClick: "lvp",
                casing: null,
                inputmode: "verbatim",
                colorMask: !1,
                androidHack: !1,
                importDataAttributes: !0
            },
            definitions: {
                "9": {
                    validator: "[0-9-]",
                    cardinality: 1,
                    definitionSymbol: "*"
                },
                a: {
                    validator: "[A-Za-z--]",
                    cardinality: 1,
                    definitionSymbol: "*"
                },
                "*": {
                    validator: "[0-9-A-Za-z--]",
                    cardinality: 1
                }
            },
            aliases: {},
            masksCache: {},
            mask: function(elems) {
                function importAttributeOptions(npt, opts, userOptions, dataAttribute) {
                    if (!0 === opts.importDataAttributes) {
                        var option, dataoptions, optionData, p, importOption = function(option, optionData) {
                            null !== (optionData = optionData !== undefined ? optionData : npt.getAttribute(dataAttribute + "-" + option)) && ("string" == typeof optionData && (0 === option.indexOf("on") ? optionData = window[optionData] : "false" === optionData ? optionData = !1 : "true" === optionData && (optionData = !0)), 
                            userOptions[option] = optionData);
                        }, attrOptions = npt.getAttribute(dataAttribute);
                        if (attrOptions && "" !== attrOptions && (attrOptions = attrOptions.replace(new RegExp("'", "g"), '"'), 
                        dataoptions = JSON.parse("{" + attrOptions + "}")), dataoptions) {
                            optionData = undefined;
                            for (p in dataoptions) if ("alias" === p.toLowerCase()) {
                                optionData = dataoptions[p];
                                break;
                            }
                        }
                        importOption("alias", optionData), userOptions.alias && resolveAlias(userOptions.alias, userOptions, opts);
                        for (option in opts) {
                            if (dataoptions) {
                                optionData = undefined;
                                for (p in dataoptions) if (p.toLowerCase() === option.toLowerCase()) {
                                    optionData = dataoptions[p];
                                    break;
                                }
                            }
                            importOption(option, optionData);
                        }
                    }
                    return $.extend(!0, opts, userOptions), ("rtl" === npt.dir || opts.rightAlign) && (npt.style.textAlign = "right"), 
                    ("rtl" === npt.dir || opts.numericInput) && (npt.dir = "ltr", npt.removeAttribute("dir"), 
                    opts.isRTL = !0), opts;
                }
                var that = this;
                return "string" == typeof elems && (elems = document.getElementById(elems) || document.querySelectorAll(elems)), 
                elems = elems.nodeName ? [ elems ] : elems, $.each(elems, function(ndx, el) {
                    var scopedOpts = $.extend(!0, {}, that.opts);
                    importAttributeOptions(el, scopedOpts, $.extend(!0, {}, that.userOptions), that.dataAttribute);
                    var maskset = generateMaskSet(scopedOpts, that.noMasksCache);
                    maskset !== undefined && (el.inputmask !== undefined && (el.inputmask.opts.autoUnmask = !0, 
                    el.inputmask.remove()), el.inputmask = new Inputmask(undefined, undefined, !0), 
                    el.inputmask.opts = scopedOpts, el.inputmask.noMasksCache = that.noMasksCache, el.inputmask.userOptions = $.extend(!0, {}, that.userOptions), 
                    el.inputmask.isRTL = scopedOpts.isRTL || scopedOpts.numericInput, el.inputmask.el = el, 
                    el.inputmask.maskset = maskset, $.data(el, "_inputmask_opts", scopedOpts), maskScope.call(el.inputmask, {
                        action: "mask"
                    }));
                }), elems && elems[0] ? elems[0].inputmask || this : this;
            },
            option: function(options, noremask) {
                return "string" == typeof options ? this.opts[options] : "object" === (void 0 === options ? "undefined" : _typeof(options)) ? ($.extend(this.userOptions, options), 
                this.el && !0 !== noremask && this.mask(this.el), this) : void 0;
            },
            unmaskedvalue: function(value) {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "unmaskedvalue",
                    value: value
                });
            },
            remove: function() {
                return maskScope.call(this, {
                    action: "remove"
                });
            },
            getemptymask: function() {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "getemptymask"
                });
            },
            hasMaskedValue: function() {
                return !this.opts.autoUnmask;
            },
            isComplete: function() {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "isComplete"
                });
            },
            getmetadata: function() {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "getmetadata"
                });
            },
            isValid: function(value) {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "isValid",
                    value: value
                });
            },
            format: function(value, metadata) {
                return this.maskset = this.maskset || generateMaskSet(this.opts, this.noMasksCache), 
                maskScope.call(this, {
                    action: "format",
                    value: value,
                    metadata: metadata
                });
            },
            analyseMask: function(mask, regexMask, opts) {
                function MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {
                    this.matches = [], this.openGroup = isGroup || !1, this.alternatorGroup = !1, this.isGroup = isGroup || !1, 
                    this.isOptional = isOptional || !1, this.isQuantifier = isQuantifier || !1, this.isAlternator = isAlternator || !1, 
                    this.quantifier = {
                        min: 1,
                        max: 1
                    };
                }
                function insertTestDefinition(mtoken, element, position) {
                    position = position !== undefined ? position : mtoken.matches.length;
                    var prevMatch = mtoken.matches[position - 1];
                    if (regexMask) 0 === element.indexOf("[") || escaped && /\\d|\\s|\\w]/i.test(element) || "." === element ? mtoken.matches.splice(position++, 0, {
                        fn: new RegExp(element, opts.casing ? "i" : ""),
                        cardinality: 1,
                        optionality: mtoken.isOptional,
                        newBlockMarker: prevMatch === undefined || prevMatch.def !== element,
                        casing: null,
                        def: element,
                        placeholder: undefined,
                        nativeDef: element
                    }) : (escaped && (element = element[element.length - 1]), $.each(element.split(""), function(ndx, lmnt) {
                        prevMatch = mtoken.matches[position - 1], mtoken.matches.splice(position++, 0, {
                            fn: null,
                            cardinality: 0,
                            optionality: mtoken.isOptional,
                            newBlockMarker: prevMatch === undefined || prevMatch.def !== lmnt && null !== prevMatch.fn,
                            casing: null,
                            def: opts.staticDefinitionSymbol || lmnt,
                            placeholder: opts.staticDefinitionSymbol !== undefined ? lmnt : undefined,
                            nativeDef: lmnt
                        });
                    })), escaped = !1; else {
                        var maskdef = (opts.definitions ? opts.definitions[element] : undefined) || Inputmask.prototype.definitions[element];
                        if (maskdef && !escaped) {
                            for (var prevalidators = maskdef.prevalidator, prevalidatorsL = prevalidators ? prevalidators.length : 0, i = 1; i < maskdef.cardinality; i++) {
                                var prevalidator = prevalidatorsL >= i ? prevalidators[i - 1] : [], validator = prevalidator.validator, cardinality = prevalidator.cardinality;
                                mtoken.matches.splice(position++, 0, {
                                    fn: validator ? "string" == typeof validator ? new RegExp(validator, opts.casing ? "i" : "") : new function() {
                                        this.test = validator;
                                    }() : new RegExp("."),
                                    cardinality: cardinality || 1,
                                    optionality: mtoken.isOptional,
                                    newBlockMarker: prevMatch === undefined || prevMatch.def !== (maskdef.definitionSymbol || element),
                                    casing: maskdef.casing,
                                    def: maskdef.definitionSymbol || element,
                                    placeholder: maskdef.placeholder,
                                    nativeDef: element
                                }), prevMatch = mtoken.matches[position - 1];
                            }
                            mtoken.matches.splice(position++, 0, {
                                fn: maskdef.validator ? "string" == typeof maskdef.validator ? new RegExp(maskdef.validator, opts.casing ? "i" : "") : new function() {
                                    this.test = maskdef.validator;
                                }() : new RegExp("."),
                                cardinality: maskdef.cardinality,
                                optionality: mtoken.isOptional,
                                newBlockMarker: prevMatch === undefined || prevMatch.def !== (maskdef.definitionSymbol || element),
                                casing: maskdef.casing,
                                def: maskdef.definitionSymbol || element,
                                placeholder: maskdef.placeholder,
                                nativeDef: element
                            });
                        } else mtoken.matches.splice(position++, 0, {
                            fn: null,
                            cardinality: 0,
                            optionality: mtoken.isOptional,
                            newBlockMarker: prevMatch === undefined || prevMatch.def !== element && null !== prevMatch.fn,
                            casing: null,
                            def: opts.staticDefinitionSymbol || element,
                            placeholder: opts.staticDefinitionSymbol !== undefined ? element : undefined,
                            nativeDef: element
                        }), escaped = !1;
                    }
                }
                function verifyGroupMarker(maskToken) {
                    maskToken && maskToken.matches && $.each(maskToken.matches, function(ndx, token) {
                        var nextToken = maskToken.matches[ndx + 1];
                        (nextToken === undefined || nextToken.matches === undefined || !1 === nextToken.isQuantifier) && token && token.isGroup && (token.isGroup = !1, 
                        regexMask || (insertTestDefinition(token, opts.groupmarker.start, 0), !0 !== token.openGroup && insertTestDefinition(token, opts.groupmarker.end))), 
                        verifyGroupMarker(token);
                    });
                }
                function defaultCase() {
                    if (openenings.length > 0) {
                        if (currentOpeningToken = openenings[openenings.length - 1], insertTestDefinition(currentOpeningToken, m), 
                        currentOpeningToken.isAlternator) {
                            alternator = openenings.pop();
                            for (var mndx = 0; mndx < alternator.matches.length; mndx++) alternator.matches[mndx].isGroup = !1;
                            openenings.length > 0 ? (currentOpeningToken = openenings[openenings.length - 1]).matches.push(alternator) : currentToken.matches.push(alternator);
                        }
                    } else insertTestDefinition(currentToken, m);
                }
                function reverseTokens(maskToken) {
                    maskToken.matches = maskToken.matches.reverse();
                    for (var match in maskToken.matches) if (maskToken.matches.hasOwnProperty(match)) {
                        var intMatch = parseInt(match);
                        if (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) {
                            var qt = maskToken.matches[match];
                            maskToken.matches.splice(match, 1), maskToken.matches.splice(intMatch + 1, 0, qt);
                        }
                        maskToken.matches[match].matches !== undefined ? maskToken.matches[match] = reverseTokens(maskToken.matches[match]) : maskToken.matches[match] = function(st) {
                            return st === opts.optionalmarker.start ? st = opts.optionalmarker.end : st === opts.optionalmarker.end ? st = opts.optionalmarker.start : st === opts.groupmarker.start ? st = opts.groupmarker.end : st === opts.groupmarker.end && (st = opts.groupmarker.start), 
                            st;
                        }(maskToken.matches[match]);
                    }
                    return maskToken;
                }
                var match, m, openingToken, currentOpeningToken, alternator, lastMatch, groupToken, tokenizer = /(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g, regexTokenizer = /\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g, escaped = !1, currentToken = new MaskToken(), openenings = [], maskTokens = [];
                for (regexMask && (opts.optionalmarker.start = undefined, opts.optionalmarker.end = undefined); match = regexMask ? regexTokenizer.exec(mask) : tokenizer.exec(mask); ) {
                    if (m = match[0], regexMask) switch (m.charAt(0)) {
                      case "?":
                        m = "{0,1}";
                        break;

                      case "+":
                      case "*":
                        m = "{" + m + "}";
                    }
                    if (escaped) defaultCase(); else switch (m.charAt(0)) {
                      case opts.escapeChar:
                        escaped = !0, regexMask && defaultCase();
                        break;

                      case opts.optionalmarker.end:
                      case opts.groupmarker.end:
                        if (openingToken = openenings.pop(), openingToken.openGroup = !1, openingToken !== undefined) if (openenings.length > 0) {
                            if ((currentOpeningToken = openenings[openenings.length - 1]).matches.push(openingToken), 
                            currentOpeningToken.isAlternator) {
                                alternator = openenings.pop();
                                for (var mndx = 0; mndx < alternator.matches.length; mndx++) alternator.matches[mndx].isGroup = !1, 
                                alternator.matches[mndx].alternatorGroup = !1;
                                openenings.length > 0 ? (currentOpeningToken = openenings[openenings.length - 1]).matches.push(alternator) : currentToken.matches.push(alternator);
                            }
                        } else currentToken.matches.push(openingToken); else defaultCase();
                        break;

                      case opts.optionalmarker.start:
                        openenings.push(new MaskToken(!1, !0));
                        break;

                      case opts.groupmarker.start:
                        openenings.push(new MaskToken(!0));
                        break;

                      case opts.quantifiermarker.start:
                        var quantifier = new MaskToken(!1, !1, !0), mq = (m = m.replace(/[{}]/g, "")).split(","), mq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]), mq1 = 1 === mq.length ? mq0 : isNaN(mq[1]) ? mq[1] : parseInt(mq[1]);
                        if ("*" !== mq1 && "+" !== mq1 || (mq0 = "*" === mq1 ? 0 : 1), quantifier.quantifier = {
                            min: mq0,
                            max: mq1
                        }, openenings.length > 0) {
                            var matches = openenings[openenings.length - 1].matches;
                            (match = matches.pop()).isGroup || ((groupToken = new MaskToken(!0)).matches.push(match), 
                            match = groupToken), matches.push(match), matches.push(quantifier);
                        } else (match = currentToken.matches.pop()).isGroup || (regexMask && null === match.fn && "." === match.def && (match.fn = new RegExp(match.def, opts.casing ? "i" : "")), 
                        (groupToken = new MaskToken(!0)).matches.push(match), match = groupToken), currentToken.matches.push(match), 
                        currentToken.matches.push(quantifier);
                        break;

                      case opts.alternatormarker:
                        if (openenings.length > 0) {
                            var subToken = (currentOpeningToken = openenings[openenings.length - 1]).matches[currentOpeningToken.matches.length - 1];
                            lastMatch = currentOpeningToken.openGroup && (subToken.matches === undefined || !1 === subToken.isGroup && !1 === subToken.isAlternator) ? openenings.pop() : currentOpeningToken.matches.pop();
                        } else lastMatch = currentToken.matches.pop();
                        if (lastMatch.isAlternator) openenings.push(lastMatch); else if (lastMatch.alternatorGroup ? (alternator = openenings.pop(), 
                        lastMatch.alternatorGroup = !1) : alternator = new MaskToken(!1, !1, !1, !0), alternator.matches.push(lastMatch), 
                        openenings.push(alternator), lastMatch.openGroup) {
                            lastMatch.openGroup = !1;
                            var alternatorGroup = new MaskToken(!0);
                            alternatorGroup.alternatorGroup = !0, openenings.push(alternatorGroup);
                        }
                        break;

                      default:
                        defaultCase();
                    }
                }
                for (;openenings.length > 0; ) openingToken = openenings.pop(), currentToken.matches.push(openingToken);
                return currentToken.matches.length > 0 && (verifyGroupMarker(currentToken), maskTokens.push(currentToken)), 
                (opts.numericInput || opts.isRTL) && reverseTokens(maskTokens[0]), maskTokens;
            }
        }, Inputmask.extendDefaults = function(options) {
            $.extend(!0, Inputmask.prototype.defaults, options);
        }, Inputmask.extendDefinitions = function(definition) {
            $.extend(!0, Inputmask.prototype.definitions, definition);
        }, Inputmask.extendAliases = function(alias) {
            $.extend(!0, Inputmask.prototype.aliases, alias);
        }, Inputmask.format = function(value, options, metadata) {
            return Inputmask(options).format(value, metadata);
        }, Inputmask.unmask = function(value, options) {
            return Inputmask(options).unmaskedvalue(value);
        }, Inputmask.isValid = function(value, options) {
            return Inputmask(options).isValid(value);
        }, Inputmask.remove = function(elems) {
            $.each(elems, function(ndx, el) {
                el.inputmask && el.inputmask.remove();
            });
        }, Inputmask.escapeRegex = function(str) {
            var specials = [ "/", ".", "*", "+", "?", "|", "(", ")", "[", "]", "{", "}", "\\", "$", "^" ];
            return str.replace(new RegExp("(\\" + specials.join("|\\") + ")", "gim"), "\\$1");
        }, Inputmask.keyCode = {
            ALT: 18,
            BACKSPACE: 8,
            BACKSPACE_SAFARI: 127,
            CAPS_LOCK: 20,
            COMMA: 188,
            COMMAND: 91,
            COMMAND_LEFT: 91,
            COMMAND_RIGHT: 93,
            CONTROL: 17,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            INSERT: 45,
            LEFT: 37,
            MENU: 93,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SHIFT: 16,
            SPACE: 32,
            TAB: 9,
            UP: 38,
            WINDOWS: 91,
            X: 88
        }, Inputmask;
    });
}, function(module, exports) {
    module.exports = jQuery;
}, function(module, exports, __webpack_require__) {
    "use strict";
    function _interopRequireDefault(obj) {
        return obj && obj.__esModule ? obj : {
            default: obj
        };
    }
    __webpack_require__(4), __webpack_require__(9), __webpack_require__(12), __webpack_require__(13), 
    __webpack_require__(14), __webpack_require__(15);
    var _inputmask2 = _interopRequireDefault(__webpack_require__(1)), _inputmask4 = _interopRequireDefault(__webpack_require__(0)), _jquery2 = _interopRequireDefault(__webpack_require__(2));
    _inputmask4.default === _jquery2.default && __webpack_require__(16), window.Inputmask = _inputmask2.default;
}, function(module, exports, __webpack_require__) {
    var content = __webpack_require__(5);
    "string" == typeof content && (content = [ [ module.i, content, "" ] ]);
    var options = {
        hmr: !0
    };
    options.transform = void 0;
    __webpack_require__(7)(content, options);
    content.locals && (module.exports = content.locals);
}, function(module, exports, __webpack_require__) {
    (module.exports = __webpack_require__(6)(void 0)).push([ module.i, "span.im-caret {\r\n    -webkit-animation: 1s blink step-end infinite;\r\n    animation: 1s blink step-end infinite;\r\n}\r\n\r\n@keyframes blink {\r\n    from, to {\r\n        border-right-color: black;\r\n    }\r\n    50% {\r\n        border-right-color: transparent;\r\n    }\r\n}\r\n\r\n@-webkit-keyframes blink {\r\n    from, to {\r\n        border-right-color: black;\r\n    }\r\n    50% {\r\n        border-right-color: transparent;\r\n    }\r\n}\r\n\r\nspan.im-static {\r\n    color: grey;\r\n}\r\n\r\ndiv.im-colormask {\r\n    display: inline-block;\r\n    border-style: inset;\r\n    border-width: 2px;\r\n    -webkit-appearance: textfield;\r\n    -moz-appearance: textfield;\r\n    appearance: textfield;\r\n}\r\n\r\ndiv.im-colormask > input {\r\n    position: absolute;\r\n    display: inline-block;\r\n    background-color: transparent;\r\n    color: transparent;\r\n    -webkit-appearance: caret;\r\n    -moz-appearance: caret;\r\n    appearance: caret;\r\n    border-style: none;\r\n    left: 0; /*calculated*/\r\n}\r\n\r\ndiv.im-colormask > input:focus {\r\n    outline: none;\r\n}\r\n\r\ndiv.im-colormask > input::-moz-selection{\r\n    background: none;\r\n}\r\n\r\ndiv.im-colormask > input::selection{\r\n    background: none;\r\n}\r\ndiv.im-colormask > input::-moz-selection{\r\n    background: none;\r\n}\r\n\r\ndiv.im-colormask > div {\r\n    color: black;\r\n    display: inline-block;\r\n    width: 100px; /*calculated*/\r\n}", "" ]);
}, function(module, exports) {
    function cssWithMappingToString(item, useSourceMap) {
        var content = item[1] || "", cssMapping = item[3];
        if (!cssMapping) return content;
        if (useSourceMap && "function" == typeof btoa) {
            var sourceMapping = toComment(cssMapping), sourceURLs = cssMapping.sources.map(function(source) {
                return "/*# sourceURL=" + cssMapping.sourceRoot + source + " */";
            });
            return [ content ].concat(sourceURLs).concat([ sourceMapping ]).join("\n");
        }
        return [ content ].join("\n");
    }
    function toComment(sourceMap) {
        return "/*# " + ("sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))) + " */";
    }
    module.exports = function(useSourceMap) {
        var list = [];
        return list.toString = function() {
            return this.map(function(item) {
                var content = cssWithMappingToString(item, useSourceMap);
                return item[2] ? "@media " + item[2] + "{" + content + "}" : content;
            }).join("");
        }, list.i = function(modules, mediaQuery) {
            "string" == typeof modules && (modules = [ [ null, modules, "" ] ]);
            for (var alreadyImportedModules = {}, i = 0; i < this.length; i++) {
                var id = this[i][0];
                "number" == typeof id && (alreadyImportedModules[id] = !0);
            }
            for (i = 0; i < modules.length; i++) {
                var item = modules[i];
                "number" == typeof item[0] && alreadyImportedModules[item[0]] || (mediaQuery && !item[2] ? item[2] = mediaQuery : mediaQuery && (item[2] = "(" + item[2] + ") and (" + mediaQuery + ")"), 
                list.push(item));
            }
        }, list;
    };
}, function(module, exports, __webpack_require__) {
    function addStylesToDom(styles, options) {
        for (var i = 0; i < styles.length; i++) {
            var item = styles[i], domStyle = stylesInDom[item.id];
            if (domStyle) {
                domStyle.refs++;
                for (j = 0; j < domStyle.parts.length; j++) domStyle.parts[j](item.parts[j]);
                for (;j < item.parts.length; j++) domStyle.parts.push(addStyle(item.parts[j], options));
            } else {
                for (var parts = [], j = 0; j < item.parts.length; j++) parts.push(addStyle(item.parts[j], options));
                stylesInDom[item.id] = {
                    id: item.id,
                    refs: 1,
                    parts: parts
                };
            }
        }
    }
    function listToStyles(list, options) {
        for (var styles = [], newStyles = {}, i = 0; i < list.length; i++) {
            var item = list[i], id = options.base ? item[0] + options.base : item[0], part = {
                css: item[1],
                media: item[2],
                sourceMap: item[3]
            };
            newStyles[id] ? newStyles[id].parts.push(part) : styles.push(newStyles[id] = {
                id: id,
                parts: [ part ]
            });
        }
        return styles;
    }
    function insertStyleElement(options, style) {
        var target = getElement(options.insertInto);
        if (!target) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
        var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];
        if ("top" === options.insertAt) lastStyleElementInsertedAtTop ? lastStyleElementInsertedAtTop.nextSibling ? target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling) : target.appendChild(style) : target.insertBefore(style, target.firstChild), 
        stylesInsertedAtTop.push(style); else if ("bottom" === options.insertAt) target.appendChild(style); else {
            if ("object" != typeof options.insertAt || !options.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
            var nextSibling = getElement(options.insertInto + " " + options.insertAt.before);
            target.insertBefore(style, nextSibling);
        }
    }
    function removeStyleElement(style) {
        if (null === style.parentNode) return !1;
        style.parentNode.removeChild(style);
        var idx = stylesInsertedAtTop.indexOf(style);
        idx >= 0 && stylesInsertedAtTop.splice(idx, 1);
    }
    function createStyleElement(options) {
        var style = document.createElement("style");
        return options.attrs.type = "text/css", addAttrs(style, options.attrs), insertStyleElement(options, style), 
        style;
    }
    function createLinkElement(options) {
        var link = document.createElement("link");
        return options.attrs.type = "text/css", options.attrs.rel = "stylesheet", addAttrs(link, options.attrs), 
        insertStyleElement(options, link), link;
    }
    function addAttrs(el, attrs) {
        Object.keys(attrs).forEach(function(key) {
            el.setAttribute(key, attrs[key]);
        });
    }
    function addStyle(obj, options) {
        var style, update, remove, result;
        if (options.transform && obj.css) {
            if (!(result = options.transform(obj.css))) return function() {};
            obj.css = result;
        }
        if (options.singleton) {
            var styleIndex = singletonCounter++;
            style = singleton || (singleton = createStyleElement(options)), update = applyToSingletonTag.bind(null, style, styleIndex, !1), 
            remove = applyToSingletonTag.bind(null, style, styleIndex, !0);
        } else obj.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (style = createLinkElement(options), 
        update = updateLink.bind(null, style, options), remove = function() {
            removeStyleElement(style), style.href && URL.revokeObjectURL(style.href);
        }) : (style = createStyleElement(options), update = applyToTag.bind(null, style), 
        remove = function() {
            removeStyleElement(style);
        });
        return update(obj), function(newObj) {
            if (newObj) {
                if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) return;
                update(obj = newObj);
            } else remove();
        };
    }
    function applyToSingletonTag(style, index, remove, obj) {
        var css = remove ? "" : obj.css;
        if (style.styleSheet) style.styleSheet.cssText = replaceText(index, css); else {
            var cssNode = document.createTextNode(css), childNodes = style.childNodes;
            childNodes[index] && style.removeChild(childNodes[index]), childNodes.length ? style.insertBefore(cssNode, childNodes[index]) : style.appendChild(cssNode);
        }
    }
    function applyToTag(style, obj) {
        var css = obj.css, media = obj.media;
        if (media && style.setAttribute("media", media), style.styleSheet) style.styleSheet.cssText = css; else {
            for (;style.firstChild; ) style.removeChild(style.firstChild);
            style.appendChild(document.createTextNode(css));
        }
    }
    function updateLink(link, options, obj) {
        var css = obj.css, sourceMap = obj.sourceMap, autoFixUrls = void 0 === options.convertToAbsoluteUrls && sourceMap;
        (options.convertToAbsoluteUrls || autoFixUrls) && (css = fixUrls(css)), sourceMap && (css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */");
        var blob = new Blob([ css ], {
            type: "text/css"
        }), oldSrc = link.href;
        link.href = URL.createObjectURL(blob), oldSrc && URL.revokeObjectURL(oldSrc);
    }
    var stylesInDom = {}, isOldIE = function(fn) {
        var memo;
        return function() {
            return void 0 === memo && (memo = fn.apply(this, arguments)), memo;
        };
    }(function() {
        return window && document && document.all && !window.atob;
    }), getElement = function(fn) {
        var memo = {};
        return function(selector) {
            if (void 0 === memo[selector]) {
                var styleTarget = fn.call(this, selector);
                if (styleTarget instanceof window.HTMLIFrameElement) try {
                    styleTarget = styleTarget.contentDocument.head;
                } catch (e) {
                    styleTarget = null;
                }
                memo[selector] = styleTarget;
            }
            return memo[selector];
        };
    }(function(target) {
        return document.querySelector(target);
    }), singleton = null, singletonCounter = 0, stylesInsertedAtTop = [], fixUrls = __webpack_require__(8);
    module.exports = function(list, options) {
        if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");
        (options = options || {}).attrs = "object" == typeof options.attrs ? options.attrs : {}, 
        options.singleton || (options.singleton = isOldIE()), options.insertInto || (options.insertInto = "head"), 
        options.insertAt || (options.insertAt = "bottom");
        var styles = listToStyles(list, options);
        return addStylesToDom(styles, options), function(newList) {
            for (var mayRemove = [], i = 0; i < styles.length; i++) {
                var item = styles[i];
                (domStyle = stylesInDom[item.id]).refs--, mayRemove.push(domStyle);
            }
            newList && addStylesToDom(listToStyles(newList, options), options);
            for (i = 0; i < mayRemove.length; i++) {
                var domStyle = mayRemove[i];
                if (0 === domStyle.refs) {
                    for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();
                    delete stylesInDom[domStyle.id];
                }
            }
        };
    };
    var replaceText = function() {
        var textStore = [];
        return function(index, replacement) {
            return textStore[index] = replacement, textStore.filter(Boolean).join("\n");
        };
    }();
}, function(module, exports) {
    module.exports = function(css) {
        var location = "undefined" != typeof window && window.location;
        if (!location) throw new Error("fixUrls requires window.location");
        if (!css || "string" != typeof css) return css;
        var baseUrl = location.protocol + "//" + location.host, currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");
        return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
            var unquotedOrigUrl = origUrl.trim().replace(/^"(.*)"$/, function(o, $1) {
                return $1;
            }).replace(/^'(.*)'$/, function(o, $1) {
                return $1;
            });
            if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl)) return fullMatch;
            var newUrl;
            return newUrl = 0 === unquotedOrigUrl.indexOf("//") ? unquotedOrigUrl : 0 === unquotedOrigUrl.indexOf("/") ? baseUrl + unquotedOrigUrl : currentDir + unquotedOrigUrl.replace(/^\.\//, ""), 
            "url(" + JSON.stringify(newUrl) + ")";
        });
    };
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask) {
        function isLeapYear(year) {
            return isNaN(year) || 29 === new Date(year, 2, 0).getDate();
        }
        return Inputmask.extendAliases({
            "dd/mm/yyyy": {
                mask: "1/2/y",
                placeholder: "dd/mm/yyyy",
                regex: {
                    val1pre: new RegExp("[0-3]"),
                    val1: new RegExp("0[1-9]|[12][0-9]|3[01]"),
                    val2pre: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|[12][0-9]|3[01])" + escapedSeparator + "[01])");
                    },
                    val2: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|[12][0-9])" + escapedSeparator + "(0[1-9]|1[012]))|(30" + escapedSeparator + "(0[13-9]|1[012]))|(31" + escapedSeparator + "(0[13578]|1[02]))");
                    }
                },
                leapday: "29/02/",
                separator: "/",
                yearrange: {
                    minyear: 1900,
                    maxyear: 2099
                },
                isInYearRange: function(chrs, minyear, maxyear) {
                    if (isNaN(chrs)) return !1;
                    var enteredyear = parseInt(chrs.concat(minyear.toString().slice(chrs.length))), enteredyear2 = parseInt(chrs.concat(maxyear.toString().slice(chrs.length)));
                    return !isNaN(enteredyear) && (minyear <= enteredyear && enteredyear <= maxyear) || !isNaN(enteredyear2) && (minyear <= enteredyear2 && enteredyear2 <= maxyear);
                },
                determinebaseyear: function(minyear, maxyear, hint) {
                    var currentyear = new Date().getFullYear();
                    if (minyear > currentyear) return minyear;
                    if (maxyear < currentyear) {
                        for (var maxYearPrefix = maxyear.toString().slice(0, 2), maxYearPostfix = maxyear.toString().slice(2, 4); maxyear < maxYearPrefix + hint; ) maxYearPrefix--;
                        var maxxYear = maxYearPrefix + maxYearPostfix;
                        return minyear > maxxYear ? minyear : maxxYear;
                    }
                    if (minyear <= currentyear && currentyear <= maxyear) {
                        for (var currentYearPrefix = currentyear.toString().slice(0, 2); maxyear < currentYearPrefix + hint; ) currentYearPrefix--;
                        var currentYearAndHint = currentYearPrefix + hint;
                        return currentYearAndHint < minyear ? minyear : currentYearAndHint;
                    }
                    return currentyear;
                },
                onKeyDown: function(e, buffer, caretPos, opts) {
                    var $input = $(this);
                    if (e.ctrlKey && e.keyCode === Inputmask.keyCode.RIGHT) {
                        var today = new Date();
                        $input.val(today.getDate().toString() + (today.getMonth() + 1).toString() + today.getFullYear().toString()), 
                        $input.trigger("setvalue");
                    }
                },
                getFrontValue: function(mask, buffer, opts) {
                    for (var start = 0, length = 0, i = 0; i < mask.length && "2" !== mask.charAt(i); i++) {
                        var definition = opts.definitions[mask.charAt(i)];
                        definition ? (start += length, length = definition.cardinality) : length++;
                    }
                    return buffer.join("").substr(start, length);
                },
                postValidation: function(buffer, currentResult, opts) {
                    var dayMonthValue, year, bufferStr = buffer.join("");
                    return 0 === opts.mask.indexOf("y") ? (year = bufferStr.substr(0, 4), dayMonthValue = bufferStr.substring(4, 10)) : (year = bufferStr.substring(6, 10), 
                    dayMonthValue = bufferStr.substr(0, 6)), currentResult && (dayMonthValue !== opts.leapday || isLeapYear(year));
                },
                definitions: {
                    "1": {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            var isValid = opts.regex.val1.test(chrs);
                            return strict || isValid || chrs.charAt(1) !== opts.separator && -1 === "-./".indexOf(chrs.charAt(1)) || !(isValid = opts.regex.val1.test("0" + chrs.charAt(0))) ? isValid : (maskset.buffer[pos - 1] = "0", 
                            {
                                refreshFromBuffer: {
                                    start: pos - 1,
                                    end: pos
                                },
                                pos: pos,
                                c: chrs.charAt(0)
                            });
                        },
                        cardinality: 2,
                        prevalidator: [ {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                var pchrs = chrs;
                                isNaN(maskset.buffer[pos + 1]) || (pchrs += maskset.buffer[pos + 1]);
                                var isValid = 1 === pchrs.length ? opts.regex.val1pre.test(pchrs) : opts.regex.val1.test(pchrs);
                                if (isValid && maskset.validPositions[pos] && (opts.regex.val2(opts.separator).test(chrs + maskset.validPositions[pos].input) || (maskset.validPositions[pos].input = "0" === chrs ? "1" : "0")), 
                                !strict && !isValid) {
                                    if (isValid = opts.regex.val1.test(chrs + "0")) return maskset.buffer[pos] = chrs, 
                                    maskset.buffer[++pos] = "0", {
                                        pos: pos,
                                        c: "0"
                                    };
                                    if (isValid = opts.regex.val1.test("0" + chrs)) return maskset.buffer[pos] = "0", 
                                    pos++, {
                                        pos: pos
                                    };
                                }
                                return isValid;
                            },
                            cardinality: 1
                        } ]
                    },
                    "2": {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            var frontValue = opts.getFrontValue(maskset.mask, maskset.buffer, opts);
                            -1 !== frontValue.indexOf(opts.placeholder[0]) && (frontValue = "01" + opts.separator);
                            var isValid = opts.regex.val2(opts.separator).test(frontValue + chrs);
                            return strict || isValid || chrs.charAt(1) !== opts.separator && -1 === "-./".indexOf(chrs.charAt(1)) || !(isValid = opts.regex.val2(opts.separator).test(frontValue + "0" + chrs.charAt(0))) ? isValid : (maskset.buffer[pos - 1] = "0", 
                            {
                                refreshFromBuffer: {
                                    start: pos - 1,
                                    end: pos
                                },
                                pos: pos,
                                c: chrs.charAt(0)
                            });
                        },
                        cardinality: 2,
                        prevalidator: [ {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                isNaN(maskset.buffer[pos + 1]) || (chrs += maskset.buffer[pos + 1]);
                                var frontValue = opts.getFrontValue(maskset.mask, maskset.buffer, opts);
                                -1 !== frontValue.indexOf(opts.placeholder[0]) && (frontValue = "01" + opts.separator);
                                var isValid = 1 === chrs.length ? opts.regex.val2pre(opts.separator).test(frontValue + chrs) : opts.regex.val2(opts.separator).test(frontValue + chrs);
                                return isValid && maskset.validPositions[pos] && (opts.regex.val2(opts.separator).test(chrs + maskset.validPositions[pos].input) || (maskset.validPositions[pos].input = "0" === chrs ? "1" : "0")), 
                                strict || isValid || !(isValid = opts.regex.val2(opts.separator).test(frontValue + "0" + chrs)) ? isValid : (maskset.buffer[pos] = "0", 
                                pos++, {
                                    pos: pos
                                });
                            },
                            cardinality: 1
                        } ]
                    },
                    y: {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            return opts.isInYearRange(chrs, opts.yearrange.minyear, opts.yearrange.maxyear);
                        },
                        cardinality: 4,
                        prevalidator: [ {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                var isValid = opts.isInYearRange(chrs, opts.yearrange.minyear, opts.yearrange.maxyear);
                                if (!strict && !isValid) {
                                    var yearPrefix = opts.determinebaseyear(opts.yearrange.minyear, opts.yearrange.maxyear, chrs + "0").toString().slice(0, 1);
                                    if (isValid = opts.isInYearRange(yearPrefix + chrs, opts.yearrange.minyear, opts.yearrange.maxyear)) return maskset.buffer[pos++] = yearPrefix.charAt(0), 
                                    {
                                        pos: pos
                                    };
                                    if (yearPrefix = opts.determinebaseyear(opts.yearrange.minyear, opts.yearrange.maxyear, chrs + "0").toString().slice(0, 2), 
                                    isValid = opts.isInYearRange(yearPrefix + chrs, opts.yearrange.minyear, opts.yearrange.maxyear)) return maskset.buffer[pos++] = yearPrefix.charAt(0), 
                                    maskset.buffer[pos++] = yearPrefix.charAt(1), {
                                        pos: pos
                                    };
                                }
                                return isValid;
                            },
                            cardinality: 1
                        }, {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                var isValid = opts.isInYearRange(chrs, opts.yearrange.minyear, opts.yearrange.maxyear);
                                if (!strict && !isValid) {
                                    var yearPrefix = opts.determinebaseyear(opts.yearrange.minyear, opts.yearrange.maxyear, chrs).toString().slice(0, 2);
                                    if (isValid = opts.isInYearRange(chrs[0] + yearPrefix[1] + chrs[1], opts.yearrange.minyear, opts.yearrange.maxyear)) return maskset.buffer[pos++] = yearPrefix.charAt(1), 
                                    {
                                        pos: pos
                                    };
                                    if (yearPrefix = opts.determinebaseyear(opts.yearrange.minyear, opts.yearrange.maxyear, chrs).toString().slice(0, 2), 
                                    isValid = opts.isInYearRange(yearPrefix + chrs, opts.yearrange.minyear, opts.yearrange.maxyear)) return maskset.buffer[pos - 1] = yearPrefix.charAt(0), 
                                    maskset.buffer[pos++] = yearPrefix.charAt(1), maskset.buffer[pos++] = chrs.charAt(0), 
                                    {
                                        refreshFromBuffer: {
                                            start: pos - 3,
                                            end: pos
                                        },
                                        pos: pos
                                    };
                                }
                                return isValid;
                            },
                            cardinality: 2
                        }, {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                return opts.isInYearRange(chrs, opts.yearrange.minyear, opts.yearrange.maxyear);
                            },
                            cardinality: 3
                        } ]
                    }
                },
                insertMode: !1,
                autoUnmask: !1
            },
            "mm/dd/yyyy": {
                placeholder: "mm/dd/yyyy",
                alias: "dd/mm/yyyy",
                regex: {
                    val2pre: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[13-9]|1[012])" + escapedSeparator + "[0-3])|(02" + escapedSeparator + "[0-2])");
                    },
                    val2: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|1[012])" + escapedSeparator + "(0[1-9]|[12][0-9]))|((0[13-9]|1[012])" + escapedSeparator + "30)|((0[13578]|1[02])" + escapedSeparator + "31)");
                    },
                    val1pre: new RegExp("[01]"),
                    val1: new RegExp("0[1-9]|1[012]")
                },
                leapday: "02/29/",
                onKeyDown: function(e, buffer, caretPos, opts) {
                    var $input = $(this);
                    if (e.ctrlKey && e.keyCode === Inputmask.keyCode.RIGHT) {
                        var today = new Date();
                        $input.val((today.getMonth() + 1).toString() + today.getDate().toString() + today.getFullYear().toString()), 
                        $input.trigger("setvalue");
                    }
                }
            },
            "yyyy/mm/dd": {
                mask: "y/1/2",
                placeholder: "yyyy/mm/dd",
                alias: "mm/dd/yyyy",
                leapday: "/02/29",
                onKeyDown: function(e, buffer, caretPos, opts) {
                    var $input = $(this);
                    if (e.ctrlKey && e.keyCode === Inputmask.keyCode.RIGHT) {
                        var today = new Date();
                        $input.val(today.getFullYear().toString() + (today.getMonth() + 1).toString() + today.getDate().toString()), 
                        $input.trigger("setvalue");
                    }
                }
            },
            "dd.mm.yyyy": {
                mask: "1.2.y",
                placeholder: "dd.mm.yyyy",
                leapday: "29.02.",
                separator: ".",
                alias: "dd/mm/yyyy"
            },
            "dd-mm-yyyy": {
                mask: "1-2-y",
                placeholder: "dd-mm-yyyy",
                leapday: "29-02-",
                separator: "-",
                alias: "dd/mm/yyyy"
            },
            "mm.dd.yyyy": {
                mask: "1.2.y",
                placeholder: "mm.dd.yyyy",
                leapday: "02.29.",
                separator: ".",
                alias: "mm/dd/yyyy"
            },
            "mm-dd-yyyy": {
                mask: "1-2-y",
                placeholder: "mm-dd-yyyy",
                leapday: "02-29-",
                separator: "-",
                alias: "mm/dd/yyyy"
            },
            "yyyy.mm.dd": {
                mask: "y.1.2",
                placeholder: "yyyy.mm.dd",
                leapday: ".02.29",
                separator: ".",
                alias: "yyyy/mm/dd"
            },
            "yyyy-mm-dd": {
                mask: "y-1-2",
                placeholder: "yyyy-mm-dd",
                leapday: "-02-29",
                separator: "-",
                alias: "yyyy/mm/dd"
            },
            datetime: {
                mask: "1/2/y h:s",
                placeholder: "dd/mm/yyyy hh:mm",
                alias: "dd/mm/yyyy",
                regex: {
                    hrspre: new RegExp("[012]"),
                    hrs24: new RegExp("2[0-4]|1[3-9]"),
                    hrs: new RegExp("[01][0-9]|2[0-4]"),
                    ampm: new RegExp("^[a|p|A|P][m|M]"),
                    mspre: new RegExp("[0-5]"),
                    ms: new RegExp("[0-5][0-9]")
                },
                timeseparator: ":",
                hourFormat: "24",
                definitions: {
                    h: {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            if ("24" === opts.hourFormat && 24 === parseInt(chrs, 10)) return maskset.buffer[pos - 1] = "0", 
                            maskset.buffer[pos] = "0", {
                                refreshFromBuffer: {
                                    start: pos - 1,
                                    end: pos
                                },
                                c: "0"
                            };
                            var isValid = opts.regex.hrs.test(chrs);
                            if (!strict && !isValid && (chrs.charAt(1) === opts.timeseparator || -1 !== "-.:".indexOf(chrs.charAt(1))) && (isValid = opts.regex.hrs.test("0" + chrs.charAt(0)))) return maskset.buffer[pos - 1] = "0", 
                            maskset.buffer[pos] = chrs.charAt(0), pos++, {
                                refreshFromBuffer: {
                                    start: pos - 2,
                                    end: pos
                                },
                                pos: pos,
                                c: opts.timeseparator
                            };
                            if (isValid && "24" !== opts.hourFormat && opts.regex.hrs24.test(chrs)) {
                                var tmp = parseInt(chrs, 10);
                                return 24 === tmp ? (maskset.buffer[pos + 5] = "a", maskset.buffer[pos + 6] = "m") : (maskset.buffer[pos + 5] = "p", 
                                maskset.buffer[pos + 6] = "m"), (tmp -= 12) < 10 ? (maskset.buffer[pos] = tmp.toString(), 
                                maskset.buffer[pos - 1] = "0") : (maskset.buffer[pos] = tmp.toString().charAt(1), 
                                maskset.buffer[pos - 1] = tmp.toString().charAt(0)), {
                                    refreshFromBuffer: {
                                        start: pos - 1,
                                        end: pos + 6
                                    },
                                    c: maskset.buffer[pos]
                                };
                            }
                            return isValid;
                        },
                        cardinality: 2,
                        prevalidator: [ {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                var isValid = opts.regex.hrspre.test(chrs);
                                return strict || isValid || !(isValid = opts.regex.hrs.test("0" + chrs)) ? isValid : (maskset.buffer[pos] = "0", 
                                pos++, {
                                    pos: pos
                                });
                            },
                            cardinality: 1
                        } ]
                    },
                    s: {
                        validator: "[0-5][0-9]",
                        cardinality: 2,
                        prevalidator: [ {
                            validator: function(chrs, maskset, pos, strict, opts) {
                                var isValid = opts.regex.mspre.test(chrs);
                                return strict || isValid || !(isValid = opts.regex.ms.test("0" + chrs)) ? isValid : (maskset.buffer[pos] = "0", 
                                pos++, {
                                    pos: pos
                                });
                            },
                            cardinality: 1
                        } ]
                    },
                    t: {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            return opts.regex.ampm.test(chrs + "m");
                        },
                        casing: "lower",
                        cardinality: 1
                    }
                },
                insertMode: !1,
                autoUnmask: !1
            },
            datetime12: {
                mask: "1/2/y h:s t\\m",
                placeholder: "dd/mm/yyyy hh:mm xm",
                alias: "datetime",
                hourFormat: "12"
            },
            "mm/dd/yyyy hh:mm xm": {
                mask: "1/2/y h:s t\\m",
                placeholder: "mm/dd/yyyy hh:mm xm",
                alias: "datetime12",
                regex: {
                    val2pre: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[13-9]|1[012])" + escapedSeparator + "[0-3])|(02" + escapedSeparator + "[0-2])");
                    },
                    val2: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|1[012])" + escapedSeparator + "(0[1-9]|[12][0-9]))|((0[13-9]|1[012])" + escapedSeparator + "30)|((0[13578]|1[02])" + escapedSeparator + "31)");
                    },
                    val1pre: new RegExp("[01]"),
                    val1: new RegExp("0[1-9]|1[012]")
                },
                leapday: "02/29/",
                onKeyDown: function(e, buffer, caretPos, opts) {
                    var $input = $(this);
                    if (e.ctrlKey && e.keyCode === Inputmask.keyCode.RIGHT) {
                        var today = new Date();
                        $input.val((today.getMonth() + 1).toString() + today.getDate().toString() + today.getFullYear().toString()), 
                        $input.trigger("setvalue");
                    }
                }
            },
            "hh:mm t": {
                mask: "h:s t\\m",
                placeholder: "hh:mm xm",
                alias: "datetime",
                hourFormat: "12"
            },
            "h:s t": {
                mask: "h:s t\\m",
                placeholder: "hh:mm xm",
                alias: "datetime",
                hourFormat: "12"
            },
            "hh:mm:ss": {
                mask: "h:s:s",
                placeholder: "hh:mm:ss",
                alias: "datetime",
                autoUnmask: !1
            },
            "hh:mm": {
                mask: "h:s",
                placeholder: "hh:mm",
                alias: "datetime",
                autoUnmask: !1
            },
            date: {
                alias: "dd/mm/yyyy"
            },
            "mm/yyyy": {
                mask: "1/y",
                placeholder: "mm/yyyy",
                leapday: "donotuse",
                separator: "/",
                alias: "mm/dd/yyyy"
            },
            shamsi: {
                regex: {
                    val2pre: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|1[012])" + escapedSeparator + "[0-3])");
                    },
                    val2: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|1[012])" + escapedSeparator + "(0[1-9]|[12][0-9]))|((0[1-9]|1[012])" + escapedSeparator + "30)|((0[1-6])" + escapedSeparator + "31)");
                    },
                    val1pre: new RegExp("[01]"),
                    val1: new RegExp("0[1-9]|1[012]")
                },
                yearrange: {
                    minyear: 1300,
                    maxyear: 1499
                },
                mask: "y/1/2",
                leapday: "/12/30",
                placeholder: "yyyy/mm/dd",
                alias: "mm/dd/yyyy",
                clearIncomplete: !0
            },
            "yyyy-mm-dd hh:mm:ss": {
                mask: "y-1-2 h:s:s",
                placeholder: "yyyy-mm-dd hh:mm:ss",
                alias: "datetime",
                separator: "-",
                leapday: "-02-29",
                regex: {
                    val2pre: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[13-9]|1[012])" + escapedSeparator + "[0-3])|(02" + escapedSeparator + "[0-2])");
                    },
                    val2: function(separator) {
                        var escapedSeparator = Inputmask.escapeRegex.call(this, separator);
                        return new RegExp("((0[1-9]|1[012])" + escapedSeparator + "(0[1-9]|[12][0-9]))|((0[13-9]|1[012])" + escapedSeparator + "30)|((0[13578]|1[02])" + escapedSeparator + "31)");
                    },
                    val1pre: new RegExp("[01]"),
                    val1: new RegExp("0[1-9]|1[012]")
                },
                onKeyDown: function(e, buffer, caretPos, opts) {}
            }
        }), Inputmask;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = function() {
        return window;
    }.call(exports, __webpack_require__, exports, module)) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = function() {
        return document;
    }.call(exports, __webpack_require__, exports, module)) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask) {
        return Inputmask.extendDefinitions({
            A: {
                validator: "[A-Za-z--]",
                cardinality: 1,
                casing: "upper"
            },
            "&": {
                validator: "[0-9A-Za-z--]",
                cardinality: 1,
                casing: "upper"
            },
            "#": {
                validator: "[0-9A-Fa-f]",
                cardinality: 1,
                casing: "upper"
            }
        }), Inputmask.extendAliases({
            url: {
                definitions: {
                    i: {
                        validator: ".",
                        cardinality: 1
                    }
                },
                mask: "(\\http://)|(\\http\\s://)|(ftp://)|(ftp\\s://)i{+}",
                insertMode: !1,
                autoUnmask: !1,
                inputmode: "url"
            },
            ip: {
                mask: "i[i[i]].i[i[i]].i[i[i]].i[i[i]]",
                definitions: {
                    i: {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            return pos - 1 > -1 && "." !== maskset.buffer[pos - 1] ? (chrs = maskset.buffer[pos - 1] + chrs, 
                            chrs = pos - 2 > -1 && "." !== maskset.buffer[pos - 2] ? maskset.buffer[pos - 2] + chrs : "0" + chrs) : chrs = "00" + chrs, 
                            new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs);
                        },
                        cardinality: 1
                    }
                },
                onUnMask: function(maskedValue, unmaskedValue, opts) {
                    return maskedValue;
                },
                inputmode: "numeric"
            },
            email: {
                mask: "*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",
                greedy: !1,
                onBeforePaste: function(pastedValue, opts) {
                    return (pastedValue = pastedValue.toLowerCase()).replace("mailto:", "");
                },
                definitions: {
                    "*": {
                        validator: "[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",
                        cardinality: 1,
                        casing: "lower"
                    },
                    "-": {
                        validator: "[0-9A-Za-z-]",
                        cardinality: 1,
                        casing: "lower"
                    }
                },
                onUnMask: function(maskedValue, unmaskedValue, opts) {
                    return maskedValue;
                },
                inputmode: "email"
            },
            mac: {
                mask: "##:##:##:##:##:##"
            },
            vin: {
                mask: "V{13}9{4}",
                definitions: {
                    V: {
                        validator: "[A-HJ-NPR-Za-hj-npr-z\\d]",
                        cardinality: 1,
                        casing: "upper"
                    }
                },
                clearIncomplete: !0,
                autoUnmask: !0
            }
        }), Inputmask;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask, undefined) {
        function autoEscape(txt, opts) {
            for (var escapedTxt = "", i = 0; i < txt.length; i++) Inputmask.prototype.definitions[txt.charAt(i)] || opts.definitions[txt.charAt(i)] || opts.optionalmarker.start === txt.charAt(i) || opts.optionalmarker.end === txt.charAt(i) || opts.quantifiermarker.start === txt.charAt(i) || opts.quantifiermarker.end === txt.charAt(i) || opts.groupmarker.start === txt.charAt(i) || opts.groupmarker.end === txt.charAt(i) || opts.alternatormarker === txt.charAt(i) ? escapedTxt += "\\" + txt.charAt(i) : escapedTxt += txt.charAt(i);
            return escapedTxt;
        }
        return Inputmask.extendAliases({
            numeric: {
                mask: function(opts) {
                    if (0 !== opts.repeat && isNaN(opts.integerDigits) && (opts.integerDigits = opts.repeat), 
                    opts.repeat = 0, opts.groupSeparator === opts.radixPoint && ("." === opts.radixPoint ? opts.groupSeparator = "," : "," === opts.radixPoint ? opts.groupSeparator = "." : opts.groupSeparator = ""), 
                    " " === opts.groupSeparator && (opts.skipOptionalPartCharacter = undefined), opts.autoGroup = opts.autoGroup && "" !== opts.groupSeparator, 
                    opts.autoGroup && ("string" == typeof opts.groupSize && isFinite(opts.groupSize) && (opts.groupSize = parseInt(opts.groupSize)), 
                    isFinite(opts.integerDigits))) {
                        var seps = Math.floor(opts.integerDigits / opts.groupSize), mod = opts.integerDigits % opts.groupSize;
                        opts.integerDigits = parseInt(opts.integerDigits) + (0 === mod ? seps - 1 : seps), 
                        opts.integerDigits < 1 && (opts.integerDigits = "*");
                    }
                    opts.placeholder.length > 1 && (opts.placeholder = opts.placeholder.charAt(0)), 
                    "radixFocus" === opts.positionCaretOnClick && "" === opts.placeholder && !1 === opts.integerOptional && (opts.positionCaretOnClick = "lvp"), 
                    opts.definitions[";"] = opts.definitions["~"], opts.definitions[";"].definitionSymbol = "~", 
                    !0 === opts.numericInput && (opts.positionCaretOnClick = "radixFocus" === opts.positionCaretOnClick ? "lvp" : opts.positionCaretOnClick, 
                    opts.digitsOptional = !1, isNaN(opts.digits) && (opts.digits = 2), opts.decimalProtect = !1);
                    var mask = "[+]";
                    if (mask += autoEscape(opts.prefix, opts), !0 === opts.integerOptional ? mask += "~{1," + opts.integerDigits + "}" : mask += "~{" + opts.integerDigits + "}", 
                    opts.digits !== undefined) {
                        opts.radixPointDefinitionSymbol = opts.decimalProtect ? ":" : opts.radixPoint;
                        var dq = opts.digits.toString().split(",");
                        isFinite(dq[0] && dq[1] && isFinite(dq[1])) ? mask += opts.radixPointDefinitionSymbol + ";{" + opts.digits + "}" : (isNaN(opts.digits) || parseInt(opts.digits) > 0) && (opts.digitsOptional ? mask += "[" + opts.radixPointDefinitionSymbol + ";{1," + opts.digits + "}]" : mask += opts.radixPointDefinitionSymbol + ";{" + opts.digits + "}");
                    }
                    return mask += autoEscape(opts.suffix, opts), mask += "[-]", opts.greedy = !1, mask;
                },
                placeholder: "",
                greedy: !1,
                digits: "*",
                digitsOptional: !0,
                enforceDigitsOnBlur: !1,
                radixPoint: ".",
                positionCaretOnClick: "radixFocus",
                groupSize: 3,
                groupSeparator: "",
                autoGroup: !1,
                allowMinus: !0,
                negationSymbol: {
                    front: "-",
                    back: ""
                },
                integerDigits: "+",
                integerOptional: !0,
                prefix: "",
                suffix: "",
                rightAlign: !0,
                decimalProtect: !0,
                min: null,
                max: null,
                step: 1,
                insertMode: !0,
                autoUnmask: !1,
                unmaskAsNumber: !1,
                inputmode: "numeric",
                preValidation: function(buffer, pos, c, isSelection, opts) {
                    if ("-" === c || c === opts.negationSymbol.front) return !0 === opts.allowMinus && (opts.isNegative = opts.isNegative === undefined || !opts.isNegative, 
                    "" === buffer.join("") || {
                        caret: pos,
                        dopost: !0
                    });
                    if (!1 === isSelection && c === opts.radixPoint && opts.digits !== undefined && (isNaN(opts.digits) || parseInt(opts.digits) > 0)) {
                        var radixPos = $.inArray(opts.radixPoint, buffer);
                        if (-1 !== radixPos) return !0 === opts.numericInput ? pos === radixPos : {
                            caret: radixPos + 1
                        };
                    }
                    return !0;
                },
                postValidation: function(buffer, currentResult, opts) {
                    var suffix = opts.suffix.split(""), prefix = opts.prefix.split("");
                    if (currentResult.pos === undefined && currentResult.caret !== undefined && !0 !== currentResult.dopost) return currentResult;
                    var caretPos = currentResult.caret !== undefined ? currentResult.caret : currentResult.pos, maskedValue = buffer.slice();
                    opts.numericInput && (caretPos = maskedValue.length - caretPos - 1, maskedValue = maskedValue.reverse());
                    var charAtPos = maskedValue[caretPos];
                    if (charAtPos === opts.groupSeparator && (charAtPos = maskedValue[caretPos += 1]), 
                    caretPos === maskedValue.length - opts.suffix.length - 1 && charAtPos === opts.radixPoint) return currentResult;
                    charAtPos !== undefined && charAtPos !== opts.radixPoint && charAtPos !== opts.negationSymbol.front && charAtPos !== opts.negationSymbol.back && (maskedValue[caretPos] = "?", 
                    opts.prefix.length > 0 && caretPos >= (!1 === opts.isNegative ? 1 : 0) && caretPos < opts.prefix.length - 1 + (!1 === opts.isNegative ? 1 : 0) ? prefix[caretPos - (!1 === opts.isNegative ? 1 : 0)] = "?" : opts.suffix.length > 0 && caretPos >= maskedValue.length - opts.suffix.length - (!1 === opts.isNegative ? 1 : 0) && (suffix[caretPos - (maskedValue.length - opts.suffix.length - (!1 === opts.isNegative ? 1 : 0))] = "?")), 
                    prefix = prefix.join(""), suffix = suffix.join("");
                    var processValue = maskedValue.join("").replace(prefix, "");
                    if (processValue = processValue.replace(suffix, ""), processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                    processValue = processValue.replace(new RegExp("[-" + Inputmask.escapeRegex(opts.negationSymbol.front) + "]", "g"), ""), 
                    processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back) + "$"), ""), 
                    isNaN(opts.placeholder) && (processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.placeholder), "g"), "")), 
                    processValue.length > 1 && 1 !== processValue.indexOf(opts.radixPoint) && ("0" === charAtPos && (processValue = processValue.replace(/^\?/g, "")), 
                    processValue = processValue.replace(/^0/g, "")), processValue.charAt(0) === opts.radixPoint && "" !== opts.radixPoint && !0 !== opts.numericInput && (processValue = "0" + processValue), 
                    "" !== processValue) {
                        if (processValue = processValue.split(""), (!opts.digitsOptional || opts.enforceDigitsOnBlur && "blur" === currentResult.event) && isFinite(opts.digits)) {
                            var radixPosition = $.inArray(opts.radixPoint, processValue), rpb = $.inArray(opts.radixPoint, maskedValue);
                            -1 === radixPosition && (processValue.push(opts.radixPoint), radixPosition = processValue.length - 1);
                            for (var i = 1; i <= opts.digits; i++) opts.digitsOptional && (!opts.enforceDigitsOnBlur || "blur" !== currentResult.event) || processValue[radixPosition + i] !== undefined && processValue[radixPosition + i] !== opts.placeholder.charAt(0) ? -1 !== rpb && maskedValue[rpb + i] !== undefined && (processValue[radixPosition + i] = processValue[radixPosition + i] || maskedValue[rpb + i]) : processValue[radixPosition + i] = currentResult.placeholder || opts.placeholder.charAt(0);
                        }
                        if (!0 !== opts.autoGroup || "" === opts.groupSeparator || charAtPos === opts.radixPoint && currentResult.pos === undefined && !currentResult.dopost) processValue = processValue.join(""); else {
                            var addRadix = processValue[processValue.length - 1] === opts.radixPoint && currentResult.c === opts.radixPoint;
                            processValue = Inputmask(function(buffer, opts) {
                                var postMask = "";
                                if (postMask += "(" + opts.groupSeparator + "*{" + opts.groupSize + "}){*}", "" !== opts.radixPoint) {
                                    var radixSplit = buffer.join("").split(opts.radixPoint);
                                    radixSplit[1] && (postMask += opts.radixPoint + "*{" + radixSplit[1].match(/^\d*\??\d*/)[0].length + "}");
                                }
                                return postMask;
                            }(processValue, opts), {
                                numericInput: !0,
                                jitMasking: !0,
                                definitions: {
                                    "*": {
                                        validator: "[0-9?]",
                                        cardinality: 1
                                    }
                                }
                            }).format(processValue.join("")), addRadix && (processValue += opts.radixPoint), 
                            processValue.charAt(0) === opts.groupSeparator && processValue.substr(1);
                        }
                    }
                    if (opts.isNegative && "blur" === currentResult.event && (opts.isNegative = "0" !== processValue), 
                    processValue = prefix + processValue, processValue += suffix, opts.isNegative && (processValue = opts.negationSymbol.front + processValue, 
                    processValue += opts.negationSymbol.back), processValue = processValue.split(""), 
                    charAtPos !== undefined) if (charAtPos !== opts.radixPoint && charAtPos !== opts.negationSymbol.front && charAtPos !== opts.negationSymbol.back) (caretPos = $.inArray("?", processValue)) > -1 ? processValue[caretPos] = charAtPos : caretPos = currentResult.caret || 0; else if (charAtPos === opts.radixPoint || charAtPos === opts.negationSymbol.front || charAtPos === opts.negationSymbol.back) {
                        var newCaretPos = $.inArray(charAtPos, processValue);
                        -1 !== newCaretPos && (caretPos = newCaretPos);
                    }
                    opts.numericInput && (caretPos = processValue.length - caretPos - 1, processValue = processValue.reverse());
                    var rslt = {
                        caret: charAtPos === undefined || currentResult.pos !== undefined ? caretPos + (opts.numericInput ? -1 : 1) : caretPos,
                        buffer: processValue,
                        refreshFromBuffer: currentResult.dopost || buffer.join("") !== processValue.join("")
                    };
                    return rslt.refreshFromBuffer ? rslt : currentResult;
                },
                onBeforeWrite: function(e, buffer, caretPos, opts) {
                    if (e) switch (e.type) {
                      case "keydown":
                        return opts.postValidation(buffer, {
                            caret: caretPos,
                            dopost: !0
                        }, opts);

                      case "blur":
                      case "checkval":
                        var unmasked;
                        if (function(opts) {
                            opts.parseMinMaxOptions === undefined && (null !== opts.min && (opts.min = opts.min.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                            "," === opts.radixPoint && (opts.min = opts.min.replace(opts.radixPoint, ".")), 
                            opts.min = isFinite(opts.min) ? parseFloat(opts.min) : NaN, isNaN(opts.min) && (opts.min = Number.MIN_VALUE)), 
                            null !== opts.max && (opts.max = opts.max.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                            "," === opts.radixPoint && (opts.max = opts.max.replace(opts.radixPoint, ".")), 
                            opts.max = isFinite(opts.max) ? parseFloat(opts.max) : NaN, isNaN(opts.max) && (opts.max = Number.MAX_VALUE)), 
                            opts.parseMinMaxOptions = "done");
                        }(opts), null !== opts.min || null !== opts.max) {
                            if (unmasked = opts.onUnMask(buffer.join(""), undefined, $.extend({}, opts, {
                                unmaskAsNumber: !0
                            })), null !== opts.min && unmasked < opts.min) return opts.isNegative = opts.min < 0, 
                            opts.postValidation(opts.min.toString().replace(".", opts.radixPoint).split(""), {
                                caret: caretPos,
                                dopost: !0,
                                placeholder: "0"
                            }, opts);
                            if (null !== opts.max && unmasked > opts.max) return opts.isNegative = opts.max < 0, 
                            opts.postValidation(opts.max.toString().replace(".", opts.radixPoint).split(""), {
                                caret: caretPos,
                                dopost: !0,
                                placeholder: "0"
                            }, opts);
                        }
                        return opts.postValidation(buffer, {
                            caret: caretPos,
                            placeholder: "0",
                            event: "blur"
                        }, opts);

                      case "_checkval":
                        return {
                            caret: caretPos
                        };
                    }
                },
                regex: {
                    integerPart: function(opts, emptyCheck) {
                        return emptyCheck ? new RegExp("[" + Inputmask.escapeRegex(opts.negationSymbol.front) + "+]?") : new RegExp("[" + Inputmask.escapeRegex(opts.negationSymbol.front) + "+]?\\d+");
                    },
                    integerNPart: function(opts) {
                        return new RegExp("[\\d" + Inputmask.escapeRegex(opts.groupSeparator) + Inputmask.escapeRegex(opts.placeholder.charAt(0)) + "]+");
                    }
                },
                definitions: {
                    "~": {
                        validator: function(chrs, maskset, pos, strict, opts, isSelection) {
                            var isValid = strict ? new RegExp("[0-9" + Inputmask.escapeRegex(opts.groupSeparator) + "]").test(chrs) : new RegExp("[0-9]").test(chrs);
                            if (!0 === isValid) {
                                if (!0 !== opts.numericInput && maskset.validPositions[pos] !== undefined && "~" === maskset.validPositions[pos].match.def && !isSelection) {
                                    var processValue = maskset.buffer.join(""), pvRadixSplit = (processValue = (processValue = processValue.replace(new RegExp("[-" + Inputmask.escapeRegex(opts.negationSymbol.front) + "]", "g"), "")).replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back) + "$"), "")).split(opts.radixPoint);
                                    pvRadixSplit.length > 1 && (pvRadixSplit[1] = pvRadixSplit[1].replace(/0/g, opts.placeholder.charAt(0))), 
                                    "0" === pvRadixSplit[0] && (pvRadixSplit[0] = pvRadixSplit[0].replace(/0/g, opts.placeholder.charAt(0))), 
                                    processValue = pvRadixSplit[0] + opts.radixPoint + pvRadixSplit[1] || "";
                                    var bufferTemplate = maskset._buffer.join("");
                                    for (processValue === opts.radixPoint && (processValue = bufferTemplate); null === processValue.match(Inputmask.escapeRegex(bufferTemplate) + "$"); ) bufferTemplate = bufferTemplate.slice(1);
                                    isValid = (processValue = (processValue = processValue.replace(bufferTemplate, "")).split(""))[pos] === undefined ? {
                                        pos: pos,
                                        remove: pos
                                    } : {
                                        pos: pos
                                    };
                                }
                            } else strict || chrs !== opts.radixPoint || maskset.validPositions[pos - 1] !== undefined || (maskset.buffer[pos] = "0", 
                            isValid = {
                                pos: pos + 1
                            });
                            return isValid;
                        },
                        cardinality: 1
                    },
                    "+": {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            return opts.allowMinus && ("-" === chrs || chrs === opts.negationSymbol.front);
                        },
                        cardinality: 1,
                        placeholder: ""
                    },
                    "-": {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            return opts.allowMinus && chrs === opts.negationSymbol.back;
                        },
                        cardinality: 1,
                        placeholder: ""
                    },
                    ":": {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            var radix = "[" + Inputmask.escapeRegex(opts.radixPoint) + "]", isValid = new RegExp(radix).test(chrs);
                            return isValid && maskset.validPositions[pos] && maskset.validPositions[pos].match.placeholder === opts.radixPoint && (isValid = {
                                caret: pos + 1
                            }), isValid;
                        },
                        cardinality: 1,
                        placeholder: function(opts) {
                            return opts.radixPoint;
                        }
                    }
                },
                onUnMask: function(maskedValue, unmaskedValue, opts) {
                    if ("" === unmaskedValue && !0 === opts.nullable) return unmaskedValue;
                    var processValue = maskedValue.replace(opts.prefix, "");
                    return processValue = processValue.replace(opts.suffix, ""), processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                    "" !== opts.placeholder.charAt(0) && (processValue = processValue.replace(new RegExp(opts.placeholder.charAt(0), "g"), "0")), 
                    opts.unmaskAsNumber ? ("" !== opts.radixPoint && -1 !== processValue.indexOf(opts.radixPoint) && (processValue = processValue.replace(Inputmask.escapeRegex.call(this, opts.radixPoint), ".")), 
                    processValue = processValue.replace(new RegExp("^" + Inputmask.escapeRegex(opts.negationSymbol.front)), "-"), 
                    processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back) + "$"), ""), 
                    Number(processValue)) : processValue;
                },
                isComplete: function(buffer, opts) {
                    var maskedValue = buffer.join("");
                    if (buffer.slice().join("") !== maskedValue) return !1;
                    var processValue = maskedValue.replace(opts.prefix, "");
                    return processValue = processValue.replace(opts.suffix, ""), processValue = processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                    "," === opts.radixPoint && (processValue = processValue.replace(Inputmask.escapeRegex(opts.radixPoint), ".")), 
                    isFinite(processValue);
                },
                onBeforeMask: function(initialValue, opts) {
                    if (opts.isNegative = undefined, initialValue = initialValue.toString().charAt(initialValue.length - 1) === opts.radixPoint ? initialValue.toString().substr(0, initialValue.length - 1) : initialValue.toString(), 
                    "" !== opts.radixPoint && isFinite(initialValue)) {
                        var vs = initialValue.split("."), groupSize = "" !== opts.groupSeparator ? parseInt(opts.groupSize) : 0;
                        2 === vs.length && (vs[0].length > groupSize || vs[1].length > groupSize || vs[0].length <= groupSize && vs[1].length < groupSize) && (initialValue = initialValue.replace(".", opts.radixPoint));
                    }
                    var kommaMatches = initialValue.match(/,/g), dotMatches = initialValue.match(/\./g);
                    if (initialValue = dotMatches && kommaMatches ? dotMatches.length > kommaMatches.length ? (initialValue = initialValue.replace(/\./g, "")).replace(",", opts.radixPoint) : kommaMatches.length > dotMatches.length ? (initialValue = initialValue.replace(/,/g, "")).replace(".", opts.radixPoint) : initialValue.indexOf(".") < initialValue.indexOf(",") ? initialValue.replace(/\./g, "") : initialValue.replace(/,/g, "") : initialValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator), "g"), ""), 
                    0 === opts.digits && (-1 !== initialValue.indexOf(".") ? initialValue = initialValue.substring(0, initialValue.indexOf(".")) : -1 !== initialValue.indexOf(",") && (initialValue = initialValue.substring(0, initialValue.indexOf(",")))), 
                    "" !== opts.radixPoint && isFinite(opts.digits) && -1 !== initialValue.indexOf(opts.radixPoint)) {
                        var decPart = initialValue.split(opts.radixPoint)[1].match(new RegExp("\\d*"))[0];
                        if (parseInt(opts.digits) < decPart.toString().length) {
                            var digitsFactor = Math.pow(10, parseInt(opts.digits));
                            initialValue = initialValue.replace(Inputmask.escapeRegex(opts.radixPoint), "."), 
                            initialValue = (initialValue = Math.round(parseFloat(initialValue) * digitsFactor) / digitsFactor).toString().replace(".", opts.radixPoint);
                        }
                    }
                    return initialValue;
                },
                canClearPosition: function(maskset, position, lvp, strict, opts) {
                    var vp = maskset.validPositions[position], canClear = vp.input !== opts.radixPoint || null !== maskset.validPositions[position].match.fn && !1 === opts.decimalProtect || vp.input === opts.radixPoint && maskset.validPositions[position + 1] && null === maskset.validPositions[position + 1].match.fn || isFinite(vp.input) || position === lvp || vp.input === opts.groupSeparator || vp.input === opts.negationSymbol.front || vp.input === opts.negationSymbol.back;
                    return !canClear || "+" !== vp.match.nativeDef && "-" !== vp.match.nativeDef || (opts.isNegative = !1), 
                    canClear;
                },
                onKeyDown: function(e, buffer, caretPos, opts) {
                    var $input = $(this);
                    if (e.ctrlKey) switch (e.keyCode) {
                      case Inputmask.keyCode.UP:
                        $input.val(parseFloat(this.inputmask.unmaskedvalue()) + parseInt(opts.step)), $input.trigger("setvalue");
                        break;

                      case Inputmask.keyCode.DOWN:
                        $input.val(parseFloat(this.inputmask.unmaskedvalue()) - parseInt(opts.step)), $input.trigger("setvalue");
                    }
                }
            },
            currency: {
                prefix: "$ ",
                groupSeparator: ",",
                alias: "numeric",
                placeholder: "0",
                autoGroup: !0,
                digits: 2,
                digitsOptional: !1,
                clearMaskOnLostFocus: !1
            },
            decimal: {
                alias: "numeric"
            },
            integer: {
                alias: "numeric",
                digits: 0,
                radixPoint: ""
            },
            percentage: {
                alias: "numeric",
                digits: 2,
                digitsOptional: !0,
                radixPoint: ".",
                placeholder: "0",
                autoGroup: !1,
                min: 0,
                max: 100,
                suffix: " %",
                allowMinus: !1
            }
        }), Inputmask;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask) {
        function maskSort(a, b) {
            var maska = (a.mask || a).replace(/#/g, "9").replace(/\)/, "9").replace(/[+()#-]/g, ""), maskb = (b.mask || b).replace(/#/g, "9").replace(/\)/, "9").replace(/[+()#-]/g, ""), maskas = (a.mask || a).split("#")[0], maskbs = (b.mask || b).split("#")[0];
            return 0 === maskbs.indexOf(maskas) ? -1 : 0 === maskas.indexOf(maskbs) ? 1 : maska.localeCompare(maskb);
        }
        var analyseMaskBase = Inputmask.prototype.analyseMask;
        return Inputmask.prototype.analyseMask = function(mask, regexMask, opts) {
            function reduceVariations(masks, previousVariation, previousmaskGroup) {
                previousVariation = previousVariation || "", previousmaskGroup = previousmaskGroup || maskGroups, 
                "" !== previousVariation && (previousmaskGroup[previousVariation] = {});
                for (var variation = "", maskGroup = previousmaskGroup[previousVariation] || previousmaskGroup, i = masks.length - 1; i >= 0; i--) maskGroup[variation = (mask = masks[i].mask || masks[i]).substr(0, 1)] = maskGroup[variation] || [], 
                maskGroup[variation].unshift(mask.substr(1)), masks.splice(i, 1);
                for (var ndx in maskGroup) maskGroup[ndx].length > 500 && reduceVariations(maskGroup[ndx].slice(), ndx, maskGroup);
            }
            function rebuild(maskGroup) {
                var mask = "", submasks = [];
                for (var ndx in maskGroup) $.isArray(maskGroup[ndx]) ? 1 === maskGroup[ndx].length ? submasks.push(ndx + maskGroup[ndx]) : submasks.push(ndx + opts.groupmarker.start + maskGroup[ndx].join(opts.groupmarker.end + opts.alternatormarker + opts.groupmarker.start) + opts.groupmarker.end) : submasks.push(ndx + rebuild(maskGroup[ndx]));
                return 1 === submasks.length ? mask += submasks[0] : mask += opts.groupmarker.start + submasks.join(opts.groupmarker.end + opts.alternatormarker + opts.groupmarker.start) + opts.groupmarker.end, 
                mask;
            }
            var maskGroups = {};
            return opts.phoneCodes && (opts.phoneCodes && opts.phoneCodes.length > 1e3 && (reduceVariations((mask = mask.substr(1, mask.length - 2)).split(opts.groupmarker.end + opts.alternatormarker + opts.groupmarker.start)), 
            mask = rebuild(maskGroups)), mask = mask.replace(/9/g, "\\9")), analyseMaskBase.call(this, mask, regexMask, opts);
        }, Inputmask.extendAliases({
            abstractphone: {
                groupmarker: {
                    start: "<",
                    end: ">"
                },
                countrycode: "",
                phoneCodes: [],
                mask: function(opts) {
                    return opts.definitions = {
                        "#": Inputmask.prototype.definitions[9]
                    }, opts.phoneCodes.sort(maskSort);
                },
                keepStatic: !0,
                onBeforeMask: function(value, opts) {
                    var processedValue = value.replace(/^0{1,2}/, "").replace(/[\s]/g, "");
                    return (processedValue.indexOf(opts.countrycode) > 1 || -1 === processedValue.indexOf(opts.countrycode)) && (processedValue = "+" + opts.countrycode + processedValue), 
                    processedValue;
                },
                onUnMask: function(maskedValue, unmaskedValue, opts) {
                    return maskedValue.replace(/[()#-]/g, "");
                },
                inputmode: "tel"
            }
        }), Inputmask;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    "function" == typeof Symbol && Symbol.iterator;
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask) {
        return Inputmask.extendAliases({
            Regex: {
                mask: "r",
                greedy: !1,
                repeat: "*",
                regex: null,
                regexTokens: null,
                tokenizer: /\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,
                quantifierFilter: /[0-9]+[^,]/,
                isComplete: function(buffer, opts) {
                    return new RegExp(opts.regex, opts.casing ? "i" : "").test(buffer.join(""));
                },
                definitions: {
                    r: {
                        validator: function(chrs, maskset, pos, strict, opts) {
                            function RegexToken(isGroup, isQuantifier) {
                                this.matches = [], this.isGroup = isGroup || !1, this.isQuantifier = isQuantifier || !1, 
                                this.quantifier = {
                                    min: 1,
                                    max: 1
                                }, this.repeaterPart = void 0;
                            }
                            function validateRegexToken(token, fromGroup) {
                                var isvalid = !1;
                                fromGroup && (regexPart += "(", openGroupCount++);
                                for (var mndx = 0; mndx < token.matches.length; mndx++) {
                                    var matchToken = token.matches[mndx];
                                    if (!0 === matchToken.isGroup) isvalid = validateRegexToken(matchToken, !0); else if (!0 === matchToken.isQuantifier) {
                                        var crrntndx = $.inArray(matchToken, token.matches), matchGroup = token.matches[crrntndx - 1], regexPartBak = regexPart;
                                        if (isNaN(matchToken.quantifier.max)) {
                                            for (;matchToken.repeaterPart && matchToken.repeaterPart !== regexPart && matchToken.repeaterPart.length > regexPart.length && !(isvalid = validateRegexToken(matchGroup, !0)); ) ;
                                            (isvalid = isvalid || validateRegexToken(matchGroup, !0)) && (matchToken.repeaterPart = regexPart), 
                                            regexPart = regexPartBak + matchToken.quantifier.max;
                                        } else {
                                            for (var i = 0, qm = matchToken.quantifier.max - 1; i < qm && !(isvalid = validateRegexToken(matchGroup, !0)); i++) ;
                                            regexPart = regexPartBak + "{" + matchToken.quantifier.min + "," + matchToken.quantifier.max + "}";
                                        }
                                    } else if (void 0 !== matchToken.matches) for (var k = 0; k < matchToken.length && !(isvalid = validateRegexToken(matchToken[k], fromGroup)); k++) ; else {
                                        var testExp;
                                        if ("[" == matchToken.charAt(0)) {
                                            testExp = regexPart, testExp += matchToken;
                                            for (j = 0; j < openGroupCount; j++) testExp += ")";
                                            isvalid = (exp = new RegExp("^(" + testExp + ")$", opts.casing ? "i" : "")).test(bufferStr);
                                        } else for (var l = 0, tl = matchToken.length; l < tl; l++) if ("\\" !== matchToken.charAt(l)) {
                                            testExp = regexPart, testExp = (testExp += matchToken.substr(0, l + 1)).replace(/\|$/, "");
                                            for (var j = 0; j < openGroupCount; j++) testExp += ")";
                                            var exp = new RegExp("^(" + testExp + ")$", opts.casing ? "i" : "");
                                            if (isvalid = exp.test(bufferStr)) break;
                                        }
                                        regexPart += matchToken;
                                    }
                                    if (isvalid) break;
                                }
                                return fromGroup && (regexPart += ")", openGroupCount--), isvalid;
                            }
                            var bufferStr, groupToken, cbuffer = maskset.buffer.slice(), regexPart = "", isValid = !1, openGroupCount = 0;
                            null === opts.regexTokens && function() {
                                var match, m, currentToken = new RegexToken(), opengroups = [];
                                for (opts.regexTokens = []; match = opts.tokenizer.exec(opts.regex); ) switch ((m = match[0]).charAt(0)) {
                                  case "(":
                                    opengroups.push(new RegexToken(!0));
                                    break;

                                  case ")":
                                    groupToken = opengroups.pop(), opengroups.length > 0 ? opengroups[opengroups.length - 1].matches.push(groupToken) : currentToken.matches.push(groupToken);
                                    break;

                                  case "{":
                                  case "+":
                                  case "*":
                                    var quantifierToken = new RegexToken(!1, !0), mq = (m = m.replace(/[{}]/g, "")).split(","), mq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]), mq1 = 1 === mq.length ? mq0 : isNaN(mq[1]) ? mq[1] : parseInt(mq[1]);
                                    if (quantifierToken.quantifier = {
                                        min: mq0,
                                        max: mq1
                                    }, opengroups.length > 0) {
                                        var matches = opengroups[opengroups.length - 1].matches;
                                        (match = matches.pop()).isGroup || ((groupToken = new RegexToken(!0)).matches.push(match), 
                                        match = groupToken), matches.push(match), matches.push(quantifierToken);
                                    } else (match = currentToken.matches.pop()).isGroup || ((groupToken = new RegexToken(!0)).matches.push(match), 
                                    match = groupToken), currentToken.matches.push(match), currentToken.matches.push(quantifierToken);
                                    break;

                                  default:
                                    opengroups.length > 0 ? opengroups[opengroups.length - 1].matches.push(m) : currentToken.matches.push(m);
                                }
                                currentToken.matches.length > 0 && opts.regexTokens.push(currentToken);
                            }(), cbuffer.splice(pos, 0, chrs), bufferStr = cbuffer.join("");
                            for (var i = 0; i < opts.regexTokens.length; i++) {
                                var regexToken = opts.regexTokens[i];
                                if (isValid = validateRegexToken(regexToken, regexToken.isGroup)) break;
                            }
                            return isValid;
                        },
                        cardinality: 1
                    }
                }
            }
        }), Inputmask;
    });
}, function(module, exports, __webpack_require__) {
    "use strict";
    var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj;
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    !function(factory) {
        __WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(2), __webpack_require__(1) ], 
        void 0 !== (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
    }(function($, Inputmask) {
        return void 0 === $.fn.inputmask && ($.fn.inputmask = function(fn, options) {
            var nptmask, input = this[0];
            if (void 0 === options && (options = {}), "string" == typeof fn) switch (fn) {
              case "unmaskedvalue":
                return input && input.inputmask ? input.inputmask.unmaskedvalue() : $(input).val();

              case "remove":
                return this.each(function() {
                    this.inputmask && this.inputmask.remove();
                });

              case "getemptymask":
                return input && input.inputmask ? input.inputmask.getemptymask() : "";

              case "hasMaskedValue":
                return !(!input || !input.inputmask) && input.inputmask.hasMaskedValue();

              case "isComplete":
                return !input || !input.inputmask || input.inputmask.isComplete();

              case "getmetadata":
                return input && input.inputmask ? input.inputmask.getmetadata() : void 0;

              case "setvalue":
                $(input).val(options), input && void 0 === input.inputmask && $(input).triggerHandler("setvalue");
                break;

              case "option":
                if ("string" != typeof options) return this.each(function() {
                    if (void 0 !== this.inputmask) return this.inputmask.option(options);
                });
                if (input && void 0 !== input.inputmask) return input.inputmask.option(options);
                break;

              default:
                return options.alias = fn, nptmask = new Inputmask(options), this.each(function() {
                    nptmask.mask(this);
                });
            } else {
                if ("object" == (void 0 === fn ? "undefined" : _typeof(fn))) return nptmask = new Inputmask(fn), 
                void 0 === fn.mask && void 0 === fn.alias ? this.each(function() {
                    if (void 0 !== this.inputmask) return this.inputmask.option(fn);
                    nptmask.mask(this);
                }) : this.each(function() {
                    nptmask.mask(this);
                });
                if (void 0 === fn) return this.each(function() {
                    (nptmask = new Inputmask(options)).mask(this);
                });
            }
        }), $.fn.inputmask;
    });
} ]);
// jQuery Mask Plugin v1.14.15
// github.com/igorescobar/jQuery-Mask-Plugin
var $jscomp={scope:{},findInternal:function(a,l,d){a instanceof String&&(a=String(a));for(var p=a.length,h=0;h<p;h++){var b=a[h];if(l.call(d,b,h,a))return{i:h,v:b}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[l]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,l,d,p){if(l){d=$jscomp.global;a=a.split(".");for(p=0;p<a.length-1;p++){var h=a[p];h in d||(d[h]={});d=d[h]}a=a[a.length-1];p=d[a];l=l(p);l!=p&&null!=l&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:l})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
(function(a,l,d){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(l||d)})(function(a){var l=function(b,e,f){var c={invalid:[],getCaret:function(){try{var a,r=0,g=b.get(0),e=document.selection,f=g.selectionStart;if(e&&-1===navigator.appVersion.indexOf("MSIE 10"))a=e.createRange(),a.moveStart("character",-c.val().length),r=a.text.length;else if(f||"0"===f)r=f;return r}catch(C){}},setCaret:function(a){try{if(b.is(":focus")){var c,
g=b.get(0);g.setSelectionRange?g.setSelectionRange(a,a):(c=g.createTextRange(),c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select())}}catch(B){}},events:function(){b.on("keydown.mask",function(a){b.data("mask-keycode",a.keyCode||a.which);b.data("mask-previus-value",b.val());b.data("mask-previus-caret-pos",c.getCaret());c.maskDigitPosMapOld=c.maskDigitPosMap}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",c.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},
100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){d===c.val()||b.data("changed")||b.trigger("change");b.data("changed",!1)}).on("blur.mask",function(){d=c.val()}).on("focus.mask",function(b){!0===f.selectOnFocus&&a(b.target).select()}).on("focusout.mask",function(){f.clearIfNotMatch&&!h.test(c.val())&&c.val("")})},getRegexMask:function(){for(var a=[],b,c,f,n,d=0;d<e.length;d++)(b=m.translation[e.charAt(d)])?(c=b.pattern.toString().replace(/.{1}$|^.{1}/g,""),f=b.optional,
(b=b.recursive)?(a.push(e.charAt(d)),n={digit:e.charAt(d),pattern:c}):a.push(f||b?c+"?":c)):a.push(e.charAt(d).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));a=a.join("");n&&(a=a.replace(new RegExp("("+n.digit+"(.*"+n.digit+")?)"),"($1)?").replace(new RegExp(n.digit,"g"),n.pattern));return new RegExp(a)},destroyEvents:function(){b.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(a){var c=b.is("input")?"val":"text";if(0<arguments.length){if(b[c]()!==a)b[c](a);
c=b}else c=b[c]();return c},calculateCaretPosition:function(){var a=b.data("mask-previus-value")||"",e=c.getMasked(),g=c.getCaret();if(a!==e){var f=b.data("mask-previus-caret-pos")||0,e=e.length,d=a.length,m=a=0,h=0,l=0,k;for(k=g;k<e&&c.maskDigitPosMap[k];k++)m++;for(k=g-1;0<=k&&c.maskDigitPosMap[k];k--)a++;for(k=g-1;0<=k;k--)c.maskDigitPosMap[k]&&h++;for(k=f-1;0<=k;k--)c.maskDigitPosMapOld[k]&&l++;g>d?g=10*e:f>=g&&f!==d?c.maskDigitPosMapOld[g]||(f=g,g=g-(l-h)-a,c.maskDigitPosMap[g]&&(g=f)):g>f&&
(g=g+(h-l)+m)}return g},behaviour:function(f){f=f||window.event;c.invalid=[];var e=b.data("mask-keycode");if(-1===a.inArray(e,m.byPassKeys)){var e=c.getMasked(),g=c.getCaret();setTimeout(function(){c.setCaret(c.calculateCaretPosition())},a.jMaskGlobals.keyStrokeCompensation);c.val(e);c.setCaret(g);return c.callbacks(f)}},getMasked:function(a,b){var g=[],d=void 0===b?c.val():b+"",n=0,h=e.length,q=0,l=d.length,k=1,r="push",p=-1,t=0,y=[],v,z;f.reverse?(r="unshift",k=-1,v=0,n=h-1,q=l-1,z=function(){return-1<
n&&-1<q}):(v=h-1,z=function(){return n<h&&q<l});for(var A;z();){var x=e.charAt(n),w=d.charAt(q),u=m.translation[x];if(u)w.match(u.pattern)?(g[r](w),u.recursive&&(-1===p?p=n:n===v&&n!==p&&(n=p-k),v===p&&(n-=k)),n+=k):w===A?(t--,A=void 0):u.optional?(n+=k,q-=k):u.fallback?(g[r](u.fallback),n+=k,q-=k):c.invalid.push({p:q,v:w,e:u.pattern}),q+=k;else{if(!a)g[r](x);w===x?(y.push(q),q+=k):(A=x,y.push(q+t),t++);n+=k}}d=e.charAt(v);h!==l+1||m.translation[d]||g.push(d);g=g.join("");c.mapMaskdigitPositions(g,
y,l);return g},mapMaskdigitPositions:function(a,b,e){a=f.reverse?a.length-e:0;c.maskDigitPosMap={};for(e=0;e<b.length;e++)c.maskDigitPosMap[b[e]+a]=1},callbacks:function(a){var h=c.val(),g=h!==d,m=[h,a,b,f],q=function(a,b,c){"function"===typeof f[a]&&b&&f[a].apply(this,c)};q("onChange",!0===g,m);q("onKeyPress",!0===g,m);q("onComplete",h.length===e.length,m);q("onInvalid",0<c.invalid.length,[h,a,b,c.invalid,f])}};b=a(b);var m=this,d=c.val(),h;e="function"===typeof e?e(c.val(),void 0,b,f):e;m.mask=
e;m.options=f;m.remove=function(){var a=c.getCaret();m.options.placeholder&&b.removeAttr("placeholder");b.data("mask-maxlength")&&b.removeAttr("maxlength");c.destroyEvents();c.val(m.getCleanVal());c.setCaret(a);return b};m.getCleanVal=function(){return c.getMasked(!0)};m.getMaskedVal=function(a){return c.getMasked(!1,a)};m.init=function(d){d=d||!1;f=f||{};m.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch;m.byPassKeys=a.jMaskGlobals.byPassKeys;m.translation=a.extend({},a.jMaskGlobals.translation,f.translation);
m=a.extend(!0,{},m,f);h=c.getRegexMask();if(d)c.events(),c.val(c.getMasked());else{f.placeholder&&b.attr("placeholder",f.placeholder);b.data("mask")&&b.attr("autocomplete","off");d=0;for(var l=!0;d<e.length;d++){var g=m.translation[e.charAt(d)];if(g&&g.recursive){l=!1;break}}l&&b.attr("maxlength",e.length).data("mask-maxlength",!0);c.destroyEvents();c.events();d=c.getCaret();c.val(c.getMasked());c.setCaret(d)}};m.init(!b.is("input"))};a.maskWatchers={};var d=function(){var b=a(this),e={},f=b.attr("data-mask");
b.attr("data-mask-reverse")&&(e.reverse=!0);b.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0);"true"===b.attr("data-mask-selectonfocus")&&(e.selectOnFocus=!0);if(p(b,f,e))return b.data("mask",new l(this,f,e))},p=function(b,e,f){f=f||{};var c=a(b).data("mask"),d=JSON.stringify;b=a(b).val()||a(b).text();try{return"function"===typeof e&&(e=e(b)),"object"!==typeof c||d(c.options)!==d(f)||c.mask!==e}catch(t){}},h=function(a){var b=document.createElement("div"),d;a="on"+a;d=a in b;d||(b.setAttribute(a,
"return;"),d="function"===typeof b[a]);return d};a.fn.mask=function(b,d){d=d||{};var e=this.selector,c=a.jMaskGlobals,h=c.watchInterval,c=d.watchInputs||c.watchInputs,t=function(){if(p(this,b,d))return a(this).data("mask",new l(this,b,d))};a(this).each(t);e&&""!==e&&c&&(clearInterval(a.maskWatchers[e]),a.maskWatchers[e]=setInterval(function(){a(document).find(e).each(t)},h));return this};a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)};a.fn.unmask=function(){clearInterval(a.maskWatchers[this.selector]);
delete a.maskWatchers[this.selector];return this.each(function(){var b=a(this).data("mask");b&&b.remove().removeData("mask")})};a.fn.cleanVal=function(){return this.data("mask").getCleanVal()};a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements;(b instanceof a?b:a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(d)};h={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&
h("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{};h=a.jMaskGlobals=a.extend(!0,{},h,a.jMaskGlobals);h.dataMask&&a.applyDataMask();setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},h.watchInterval)},window.jQuery,window.Zepto);

/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler 0 gmail  com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.3
 */
;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"=== typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e= h(e);break}e=l?$(e):$(e,q);case "object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&& "%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()}, set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});
/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.2 (modified for fullpage.js)
 *
 */
(function(f){jQuery.fn.extend({slimScroll:function(g){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);this.each(function(){function s(d){d=d||window.event;
var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}function m(d,f,g){k=!1;var e=d,h=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),h),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());
e=l*(b[0].scrollHeight-b.outerHeight());g&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"}));b.scrollTop(e);b.trigger("slimscrolling",~~e);u();p()}function C(){window.addEventListener?(this.addEventListener("DOMMouseScroll",s,!1),this.addEventListener("mousewheel",s,!1)):document.attachEvent("onmousewheel",s)}function v(){r=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:r+"px"});var a=r==b.outerHeight()?"none":"block";c.css({display:a})}
function u(){v();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;B=l;r>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&w||x||y||(c.fadeOut("slow"),h.fadeOut("slow"))},1E3))}var w,x,y,A,z,r,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.parent().find("."+a.barClass),h=b.parent().find("."+
a.railClass);v();if(f.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in g)n=parseInt(a.scrollTo);else if("scrollBy"in g)n+=parseInt(a.scrollBy);else if("destroy"in g){c.remove();h.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height="auto"==g.height?b.parent().height():g.height;n=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",
overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var h=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?
"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};h.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(h);a.railDraggable&&c.bind("mousedown",function(a){var b=f(document);y=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});
b.bind("mouseup.slimscroll",function(a){y=!1;p();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});h.hover(function(){u()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){w=!0;u();p()},function(){w=!1;p()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&
(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});v();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
/*! lg-fullscreen - v1.0.0 - 2016-09-20
* http://sachinchoolur.github.io/lightGallery
* Copyright (c) 2016 Sachin N; Licensed GPLv3 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){!function(a,b,c,d){"use strict";var e={fullScreen:!0},f=function(b){return this.core=a(b).data("lightGallery"),this.$el=a(b),this.core.s=a.extend({},e,this.core.s),this.init(),this};f.prototype.init=function(){var a="";if(this.core.s.fullScreen){if(!(c.fullscreenEnabled||c.webkitFullscreenEnabled||c.mozFullScreenEnabled||c.msFullscreenEnabled))return;a='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(a),this.fullScreen()}},f.prototype.requestFullscreen=function(){var a=c.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},f.prototype.exitFullscreen=function(){c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()},f.prototype.fullScreen=function(){var b=this;a(c).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){b.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement||c.msFullscreenElement?b.exitFullscreen():b.requestFullscreen()})},f.prototype.destroy=function(){this.exitFullscreen(),a(c).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},a.fn.lightGallery.modules.fullscreen=f}(jQuery,window,document)});
/*! lg-thumbnail - v1.0.0 - 2016-09-20
* http://sachinchoolur.github.io/lightGallery
* Copyright (c) 2016 Sachin N; Licensed GPLv3 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){!function(a,b,c,d){"use strict";var e={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},f=function(b){return this.core=a(b).data("lightGallery"),this.core.s=a.extend({},e,this.core.s),this.$el=a(b),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.left=0,this.init(),this};f.prototype.init=function(){var a=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){a.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb?(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},f.prototype.build=function(){function c(a,b,c){var d,h=e.core.isVideo(a,c)||{},i="";h.youtube||h.vimeo||h.dailymotion?h.youtube?d=e.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+h.youtube[1]+"/"+e.core.s.youtubeThumbSize+".jpg":b:h.vimeo?e.core.s.loadVimeoThumbnail?(d="//i.vimeocdn.com/video/error_"+g+".jpg",i=h.vimeo[1]):d=b:h.dailymotion&&(d=e.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+h.dailymotion[1]:b):d=b,f+='<div data-vimeo-id="'+i+'" class="lg-thumb-item" style="width:'+e.core.s.thumbWidth+"px; margin-right: "+e.core.s.thumbMargin+'px"><img src="'+d+'" /></div>',i=""}var d,e=this,f="",g="",h='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":g="640";break;case"thumbnail_medium":g="200x150";break;case"thumbnail_small":g="100x75"}if(e.core.$outer.addClass("lg-has-thumb"),e.core.$outer.find(".lg").append(h),e.$thumbOuter=e.core.$outer.find(".lg-thumb-outer"),e.thumbOuterWidth=e.$thumbOuter.width(),e.core.s.animateThumb&&e.core.$outer.find(".lg-thumb").css({width:e.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&e.$thumbOuter.css("height",e.core.s.thumbContHeight+"px"),e.core.s.dynamic)for(var i=0;i<e.core.s.dynamicEl.length;i++)c(e.core.s.dynamicEl[i].src,e.core.s.dynamicEl[i].thumb,i);else e.core.$items.each(function(b){e.core.s.exThumbImage?c(a(this).attr("href")||a(this).attr("data-src"),a(this).attr(e.core.s.exThumbImage),b):c(a(this).attr("href")||a(this).attr("data-src"),a(this).find("img").attr("src"),b)});e.core.$outer.find(".lg-thumb").html(f),d=e.core.$outer.find(".lg-thumb-item"),d.each(function(){var b=a(this),c=b.attr("data-vimeo-id");c&&a.getJSON("//www.vimeo.com/api/v2/video/"+c+".json?callback=?",{format:"json"},function(a){b.find("img").attr("src",a[0][e.core.s.vimeoThumbSize])})}),d.eq(e.core.index).addClass("active"),e.core.$el.on("onBeforeSlide.lg.tm",function(){d.removeClass("active"),d.eq(e.core.index).addClass("active")}),d.on("click.lg touchend.lg",function(){var b=a(this);setTimeout(function(){(e.thumbClickable&&!e.core.lgBusy||!e.core.doCss())&&(e.core.index=b.index(),e.core.slide(e.core.index,!1,!0))},50)}),e.core.$el.on("onBeforeSlide.lg.tm",function(){e.animateThumb(e.core.index)}),a(b).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){e.animateThumb(e.core.index),e.thumbOuterWidth=e.$thumbOuter.width()},200)})},f.prototype.setTranslate=function(a){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+a+"px, 0px, 0px)"})},f.prototype.animateThumb=function(a){var b=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case"left":c=0;break;case"middle":c=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":c=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*a-1-c,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(b.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||b.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||b.css("left",-this.left+"px"),this.setTranslate(this.left)}},f.prototype.enableThumbDrag=function(){var c=this,d=0,e=0,f=!1,g=!1,h=0;c.$thumbOuter.addClass("lg-grab"),c.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(a){c.thumbTotalWidth>c.thumbOuterWidth&&(a.preventDefault(),d=a.pageX,f=!0,c.core.$outer.scrollLeft+=1,c.core.$outer.scrollLeft-=1,c.thumbClickable=!1,c.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),a(b).on("mousemove.lg.thumb",function(a){f&&(h=c.left,g=!0,e=a.pageX,c.$thumbOuter.addClass("lg-dragging"),h-=e-d,h>c.thumbTotalWidth-c.thumbOuterWidth&&(h=c.thumbTotalWidth-c.thumbOuterWidth),h<0&&(h=0),c.setTranslate(h))}),a(b).on("mouseup.lg.thumb",function(){g?(g=!1,c.$thumbOuter.removeClass("lg-dragging"),c.left=h,Math.abs(e-d)<c.core.s.swipeThreshold&&(c.thumbClickable=!0)):c.thumbClickable=!0,f&&(f=!1,c.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},f.prototype.enableThumbSwipe=function(){var a=this,b=0,c=0,d=!1,e=0;a.core.$outer.find(".lg-thumb").on("touchstart.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b=c.originalEvent.targetTouches[0].pageX,a.thumbClickable=!1)}),a.core.$outer.find(".lg-thumb").on("touchmove.lg",function(f){a.thumbTotalWidth>a.thumbOuterWidth&&(f.preventDefault(),c=f.originalEvent.targetTouches[0].pageX,d=!0,a.$thumbOuter.addClass("lg-dragging"),e=a.left,e-=c-b,e>a.thumbTotalWidth-a.thumbOuterWidth&&(e=a.thumbTotalWidth-a.thumbOuterWidth),e<0&&(e=0),a.setTranslate(e))}),a.core.$outer.find(".lg-thumb").on("touchend.lg",function(){a.thumbTotalWidth>a.thumbOuterWidth&&d?(d=!1,a.$thumbOuter.removeClass("lg-dragging"),Math.abs(c-b)<a.core.s.swipeThreshold&&(a.thumbClickable=!0),a.left=e):a.thumbClickable=!0})},f.prototype.toogle=function(){var a=this;a.core.s.toogleThumb&&(a.core.$outer.addClass("lg-can-toggle"),a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),a.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){a.core.$outer.toggleClass("lg-thumb-open")}))},f.prototype.thumbkeyPress=function(){var c=this;a(b).on("keydown.lg.thumb",function(a){38===a.keyCode?(a.preventDefault(),c.core.$outer.addClass("lg-thumb-open")):40===a.keyCode&&(a.preventDefault(),c.core.$outer.removeClass("lg-thumb-open"))})},f.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(a(b).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},a.fn.lightGallery.modules.Thumbnail=f}(jQuery,window,document)});
/* Modernizr 2.0.6 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-csstransforms-csstransforms3d-csstransitions-iepp-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function C(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),d=(a+" "+o.join(c+" ")+c).split(" ");return B(d,b)}function B(a,b){for(var d in a)if(k[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function A(a,b){return!!~(""+a).indexOf(b)}function z(a,b){return typeof a===b}function y(a,b){return x(n.join(a+";")+(b||""))}function x(a){k.cssText=a}var d="2.0.6",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l,m=Object.prototype.toString,n=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),o="Webkit Moz O ms Khtml".split(" "),p={},q={},r={},s=[],t=function(a,c,d,e){var f,h,j,k=b.createElement("div");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:i+(d+1),k.appendChild(j);f=["&shy;","<style>",a,"</style>"].join(""),k.id=i,k.innerHTML+=f,g.appendChild(k),h=c(k,a),k.parentNode.removeChild(k);return!!h},u,v={}.hasOwnProperty,w;!z(v,c)&&!z(v.call,c)?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],c)};var D=function(a,c){var d=a.join(""),f=c.length;t(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=i.csstransforms3d.offsetLeft===9},f,c)}([,["@media (",n.join("transform-3d),("),i,")","{#csstransforms3d{left:9px;position:absolute}}"].join("")],[,"csstransforms3d"]);p.csstransforms=function(){return!!B(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},p.csstransforms3d=function(){var a=!!B(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d);return a},p.csstransitions=function(){return C("transitionProperty")};for(var E in p)w(p,E)&&(u=E.toLowerCase(),e[u]=p[E](),s.push((e[u]?"":"no-")+u));x(""),j=l=null,a.attachEvent&&function(){var a=b.createElement("div");a.innerHTML="<elem></elem>";return a.childNodes.length!==1}()&&function(a,b){function s(a){var b=-1;while(++b<g)a.createElement(f[b])}a.iepp=a.iepp||{};var d=a.iepp,e=d.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",f=e.split("|"),g=f.length,h=new RegExp("(^|\\s)("+e+")","gi"),i=new RegExp("<(/*)("+e+")","gi"),j=/^\s*[\{\}]\s*$/,k=new RegExp("(^|[^\\n]*?\\s)("+e+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),l=b.createDocumentFragment(),m=b.documentElement,n=m.firstChild,o=b.createElement("body"),p=b.createElement("style"),q=/print|all/,r;d.getCSS=function(a,b){if(a+""===c)return"";var e=-1,f=a.length,g,h=[];while(++e<f){g=a[e];if(g.disabled)continue;b=g.media||b,q.test(b)&&h.push(d.getCSS(g.imports,b),g.cssText),b="all"}return h.join("")},d.parseCSS=function(a){var b=[],c;while((c=k.exec(a))!=null)b.push(((j.exec(c[1])?"\n":c[1])+c[2]+c[3]).replace(h,"$1.iepp_$2")+c[4]);return b.join("\n")},d.writeHTML=function(){var a=-1;r=r||b.body;while(++a<g){var c=b.getElementsByTagName(f[a]),d=c.length,e=-1;while(++e<d)c[e].className.indexOf("iepp_")<0&&(c[e].className+=" iepp_"+f[a])}l.appendChild(r),m.appendChild(o),o.className=r.className,o.id=r.id,o.innerHTML=r.innerHTML.replace(i,"<$1font")},d._beforePrint=function(){p.styleSheet.cssText=d.parseCSS(d.getCSS(b.styleSheets,"all")),d.writeHTML()},d.restoreHTML=function(){o.innerHTML="",m.removeChild(o),m.appendChild(r)},d._afterPrint=function(){d.restoreHTML(),p.styleSheet.cssText=""},s(b),s(l);d.disablePP||(n.insertBefore(p,n.firstChild),p.media="print",p.className="iepp-printshim",a.attachEvent("onbeforeprint",d._beforePrint),a.attachEvent("onafterprint",d._afterPrint))}(a,b),e._version=d,e._prefixes=n,e._domPrefixes=o,e.testProp=function(a){return B([a])},e.testAllProps=C,e.testStyles=t,g.className=g.className.replace(/\bno-js\b/,"")+(f?" js "+s.join(" "):"");return e}(this,this.document),function(a,b,c){function k(a){return!a||a=="loaded"||a=="complete"}function j(){var a=1,b=-1;while(p.length- ++b)if(p[b].s&&!(a=p[b].r))break;a&&g()}function i(a){var c=b.createElement("script"),d;c.src=a.s,c.onreadystatechange=c.onload=function(){!d&&k(c.readyState)&&(d=1,j(),c.onload=c.onreadystatechange=null)},m(function(){d||(d=1,j())},H.errorTimeout),a.e?c.onload():n.parentNode.insertBefore(c,n)}function h(a){var c=b.createElement("link"),d;c.href=a.s,c.rel="stylesheet",c.type="text/css";if(!a.e&&(w||r)){var e=function(a){m(function(){if(!d)try{a.sheet.cssRules.length?(d=1,j()):e(a)}catch(b){b.code==1e3||b.message=="security"||b.message=="denied"?(d=1,m(function(){j()},0)):e(a)}},0)};e(c)}else c.onload=function(){d||(d=1,m(function(){j()},0))},a.e&&c.onload();m(function(){d||(d=1,j())},H.errorTimeout),!a.e&&n.parentNode.insertBefore(c,n)}function g(){var a=p.shift();q=1,a?a.t?m(function(){a.t=="c"?h(a):i(a)},0):(a(),j()):q=0}function f(a,c,d,e,f,h){function i(){!o&&k(l.readyState)&&(r.r=o=1,!q&&j(),l.onload=l.onreadystatechange=null,m(function(){u.removeChild(l)},0))}var l=b.createElement(a),o=0,r={t:d,s:c,e:h};l.src=l.data=c,!s&&(l.style.display="none"),l.width=l.height="0",a!="object"&&(l.type=d),l.onload=l.onreadystatechange=i,a=="img"?l.onerror=i:a=="script"&&(l.onerror=function(){r.e=r.r=1,g()}),p.splice(e,0,r),u.insertBefore(l,s?null:n),m(function(){o||(u.removeChild(l),r.r=r.e=o=1,j())},H.errorTimeout)}function e(a,b,c){var d=b=="c"?z:y;q=0,b=b||"j",C(a)?f(d,a,b,this.i++,l,c):(p.splice(this.i++,0,a),p.length==1&&g());return this}function d(){var a=H;a.loader={load:e,i:0};return a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=r&&!s,u=s?l:n.parentNode,v=a.opera&&o.call(a.opera)=="[object Opera]",w="webkitAppearance"in l.style,x=w&&"async"in b.createElement("script"),y=r?"object":v||x?"img":"script",z=w?"img":y,A=Array.isArray||function(a){return o.call(a)=="[object Array]"},B=function(a){return Object(a)===a},C=function(a){return typeof a=="string"},D=function(a){return o.call(a)=="[object Function]"},E=[],F={},G,H;H=function(a){function f(a){var b=a.split("!"),c=E.length,d=b.pop(),e=b.length,f={url:d,origUrl:d,prefixes:b},g,h;for(h=0;h<e;h++)g=F[b[h]],g&&(f=g(f));for(h=0;h<c;h++)f=E[h](f);return f}function e(a,b,e,g,h){var i=f(a),j=i.autoCallback;if(!i.bypass){b&&(b=D(b)?b:b[a]||b[g]||b[a.split("/").pop().split("?")[0]]);if(i.instead)return i.instead(a,b,e,g,h);e.load(i.url,i.forceCSS||!i.forceJS&&/css$/.test(i.url)?"c":c,i.noexec),(D(b)||D(j))&&e.load(function(){d(),b&&b(i.origUrl,h,g),j&&j(i.origUrl,h,g)})}}function b(a,b){function c(a){if(C(a))e(a,h,b,0,d);else if(B(a))for(i in a)a.hasOwnProperty(i)&&e(a[i],h,b,i,d)}var d=!!a.test,f=d?a.yep:a.nope,g=a.load||a.both,h=a.callback,i;c(f),c(g),a.complete&&b.load(a.complete)}var g,h,i=this.yepnope.loader;if(C(a))e(a,0,i,0);else if(A(a))for(g=0;g<a.length;g++)h=a[g],C(h)?e(h,0,i,0):A(h)?H(h):B(h)&&b(h,i);else B(a)&&b(a,i)},H.addPrefix=function(a,b){F[a]=b},H.addFilter=function(a){E.push(a)},H.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",G=function(){b.removeEventListener("DOMContentLoaded",G,0),b.readyState="complete"},0)),a.yepnope=d()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
(function (window, undefined) {
    "use strict";
    // test for REM unit support
    var cssremunit =  function() {
        var div = document.createElement( 'div' );
            div.style.cssText = 'font-size: 1rem;';

        return (/rem/).test(div.style.fontSize);
    },

    // filter returned links for stylesheets
    isStyleSheet = function () {
        var styles = document.getElementsByTagName('link'),
            filteredLinks = [];

        for ( var i = 0; i < styles.length; i++) {
            if ( styles[i].rel.toLowerCase() === 'stylesheet' && styles[i].getAttribute('data-norem') === null ) {

                filteredLinks.push( styles[i].href );
            }
        }

        return filteredLinks;
    },

   processLinks = function () {
        //prepare to match each link
        for( var i = 0; i < links.length; i++ ){
            xhr( links[i], storeCSS );
        }
    },

    storeCSS = function ( response, link ) {

        preCSS.push(response.responseText);
        CSSLinks.push(link);

        if( CSSLinks.length === links.length ){
            for( var j = 0; j <  CSSLinks.length; j++ ){
                matchCSS( preCSS[j], CSSLinks[j] );
            }

            if( ( links = importLinks.slice(0) ).length > 0 ){ //after finishing all current links, set links equal to the new imports found
                CSSLinks = [];
                preCSS = [];
                importLinks = [];
                processLinks();
            } else {
                buildCSS();
            }
        }
    },

    matchCSS = function ( sheetCSS, link ) { // collect all of the rules from the xhr response texts and match them to a pattern
        var clean = removeMediaQueries( sheetCSS ).replace(/\/\*[\s\S]*?\*\//g, ''), // remove MediaQueries and comments
            pattern = /[\w\d\s\-\/\\\[\]:,.'"*()<>+~%#^$_=|@]+\{[\w\d\s\-\/\\%#:!;,.'"*()]+\d*\.?\d+rem[\w\d\s\-\/\\%#:!;,.'"*()]*\}/g, //find selectors that use rem in one or more of their rules
            current = clean.match(pattern),
            remPattern =/\d*\.?\d+rem/g,
            remCurrent = clean.match(remPattern),
            sheetPathPattern = /(.*\/)/,
            sheetPath = sheetPathPattern.exec(link)[0], //relative path to css file specified in @import
            importPattern = /@import (?:url\()?['"]?([^'\)"]*)['"]?\)?[^;]*/gm, //matches all @import variations outlined at: https://developer.mozilla.org/en-US/docs/Web/CSS/@import
            importStatement;

        while( (importStatement = importPattern.exec(sheetCSS)) !== null ){
            if( importStatement[1].indexOf("/") === 0 ) { // check if the value of importStatement[1] is a root relative path, in which case it shouldn't be concatenated with sheetPath
                importLinks.push( importStatement[1] );
            } else {
                importLinks.push( sheetPath + importStatement[1] );
            }
        }

        if( current !== null && current.length !== 0 ){
            found = found.concat( current ); // save all of the blocks of rules with rem in a property
            foundProps = foundProps.concat( remCurrent ); // save all of the properties with rem
        }
    },

    buildCSS = function () { // first build each individual rule from elements in the found array and then add it to the string of rules.
        var pattern = /[\w\d\s\-\/\\%#:,.'"*()]+\d*\.?\d+rem[\w\d\s\-\/\\%#:!,.'"*()]*[;}]/g; // find properties with rem values in them
        for( var i = 0; i < found.length; i++ ){
            rules = rules + found[i].substr(0,found[i].indexOf("{")+1); // save the selector portion of each rule with a rem value
            var current = found[i].match( pattern );
            for( var j = 0; j<current.length; j++ ){ // build a new set of with only the selector and properties that have rem in the value
                rules = rules + current[j];
                if( j === current.length-1 && rules[rules.length-1] !== "}" ){
                    rules = rules + "\n}";
                }
            }
        }

        parseCSS();
    },

    parseCSS = function () { // replace each set of parentheses with evaluated content
        for( var i = 0; i < foundProps.length; i++ ){
            css[i] = Math.round( parseFloat(foundProps[i].substr(0,foundProps[i].length-3)*fontSize) ) + 'px';
        }

        loadCSS();
    },

    loadCSS = function () { // replace and load the new rules
        for( var i = 0; i < css.length; i++ ){ // only run this loop as many times as css has entries
            if( css[i] ){
                rules = rules.replace( foundProps[i],css[i] ); // replace old rules with our processed rules
            }
        }
        var remcss = document.createElement( 'style' );
        remcss.setAttribute( 'type', 'text/css' );
        remcss.id = 'remReplace';
        document.getElementsByTagName( 'head' )[0].appendChild( remcss );   // create the new element
        if( remcss.styleSheet ) {
            remcss.styleSheet.cssText = rules; // IE8 will not support innerHTML on read-only elements, such as STYLE
        } else {
            remcss.appendChild( document.createTextNode( rules ) );
        }
    },

    xhr = function ( url, callback ) { // create new XMLHttpRequest object and run it
        try {
            //try to create a request object
            //arranging the two conditions this way is for IE7/8's benefit
            //so that it works with any combination of ActiveX or Native XHR settings, 
            //as long as one or the other is enabled; but if both are enabled
            //it prefers ActiveX, which means it still works with local files
            //(Native XHR in IE7/8 is blocked and throws "access is denied",
            // but ActiveX is permitted if the user allows it [default is to prompt])
            var xhr = window.ActiveXObject ? ( new ActiveXObject('Microsoft.XMLHTTP') || new ActiveXObject('Msxml2.XMLHTTP') ) : new XMLHttpRequest();

            xhr.open( 'GET', url, true );
            xhr.onreadystatechange = function() {
                if ( xhr.readyState === 4 ){
                    callback(xhr, url);
                } // else { callback function on AJAX error }
            };

            xhr.send( null );
        } catch (e){
            if ( window.XDomainRequest ) {
                var xdr = new XDomainRequest();
                xdr.open('get', url);
                xdr.onload = function() {
                    callback(xdr, url);
                };
                xdr.onerror = function() {
                    return false; // xdr load fail
                };
                xdr.send();
            }
        }
    },

    // Remove queries.
    removeMediaQueries = function(css) {
        // Test for Media Query support
        if ( !window.matchMedia && !window.msMatchMedia ) {
            // If the browser doesn't support media queries, we find all @media declarations in the CSS and remove them.
            // Note: Since @rules can't be nested in the CSS spec, we're safe to just check for the closest following "}}" to the "@media".
            css = css.replace(/@media[\s\S]*?\}\s*\}/g, "");
        }

        return css;
    };

    if( !cssremunit() ){ // this checks if the rem value is supported
        var rules = '', // initialize the rules variable in this scope so it can be used later
            links = isStyleSheet(), // initialize the array holding the sheets urls for use later
            importLinks = [], //initialize the array holding the import sheet urls for use later
            found = [], // initialize the array holding the found rules for use later
            foundProps = [], // initialize the array holding the found properties for use later
            preCSS = [], // initialize array that holds css before being parsed
            CSSLinks = [], //initialize array holding css links returned from xhr
            css = [], // initialize the array holding the parsed rules for use later
            fontSize = '';

        // Notice: rem is a "root em" that means that in case when html element size was changed by css
        // or style we should not change document.documentElement.fontSize to 1em - only body size should be changed
        // to 1em for calculation

        fontSize = (function () {
            var doc = document,
                docElement = doc.documentElement,
                body = doc.body || doc.createElement('body'),
                isFakeBody = !doc.body,
                div = doc.createElement('div'),
                currentSize = body.style.fontSize,
                size;

            if ( isFakeBody ) {
                docElement.appendChild( body );
            }

            div.style.cssText = 'width:1em; position:absolute; visibility:hidden; padding: 0;';

            body.style.fontSize = '1em';

            body.appendChild( div );
            size = div.offsetWidth;

            if ( isFakeBody ) {
                docElement.removeChild( body );
            }
            else {
                body.removeChild( div );
                body.style.fontSize = currentSize;
            }

            return size;
        }());

        processLinks();
    } // else { do nothing, you are awesome and have REM support }

})(window);

/*! Respond.js v1.4.2: min/max-width media query polyfill
 * Copyright 2014 Scott Jehl
 * Licensed under MIT
 * http://j.mp/respondjs */

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */
(function(w) {
  "use strict";
  w.matchMedia = w.matchMedia || function(doc, undefined) {
    var bool, docElem = doc.documentElement, refNode = docElem.firstElementChild || docElem.firstChild, fakeBody = doc.createElement("body"), div = doc.createElement("div");
    div.id = "mq-test-1";
    div.style.cssText = "position:absolute;top:-100em";
    fakeBody.style.background = "none";
    fakeBody.appendChild(div);
    return function(q) {
      div.innerHTML = '&shy;<style media="' + q + '"> #mq-test-1 { width: 42px; }</style>';
      docElem.insertBefore(fakeBody, refNode);
      bool = div.offsetWidth === 42;
      docElem.removeChild(fakeBody);
      return {
        matches: bool,
        media: q
      };
    };
  }(w.document);
})(this);

(function(w) {
  "use strict";
  var respond = {};
  w.respond = respond;
  respond.update = function() {};
  var requestQueue = [], xmlHttp = function() {
    var xmlhttpmethod = false;
    try {
      xmlhttpmethod = new w.XMLHttpRequest();
    } catch (e) {
      xmlhttpmethod = new w.ActiveXObject("Microsoft.XMLHTTP");
    }
    return function() {
      return xmlhttpmethod;
    };
  }(), ajax = function(url, callback) {
    var req = xmlHttp();
    if (!req) {
      return;
    }
    req.open("GET", url, true);
    req.onreadystatechange = function() {
      if (req.readyState !== 4 || req.status !== 200 && req.status !== 304) {
        return;
      }
      callback(req.responseText);
    };
    if (req.readyState === 4) {
      return;
    }
    req.send(null);
  }, isUnsupportedMediaQuery = function(query) {
    return query.replace(respond.regex.minmaxwh, "").match(respond.regex.other);
  };
  respond.ajax = ajax;
  respond.queue = requestQueue;
  respond.unsupportedmq = isUnsupportedMediaQuery;
  respond.regex = {
    media: /@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,
    keyframes: /@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,
    comments: /\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,
    urls: /(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,
    findStyles: /@media *([^\{]+)\{([\S\s]+?)$/,
    only: /(only\s+)?([a-zA-Z]+)\s?/,
    minw: /\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,
    maxw: /\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,
    minmaxwh: /\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,
    other: /\([^\)]*\)/g
  };
  respond.mediaQueriesSupported = w.matchMedia && w.matchMedia("only all") !== null && w.matchMedia("only all").matches;
  if (respond.mediaQueriesSupported) {
    return;
  }
  var doc = w.document, docElem = doc.documentElement, mediastyles = [], rules = [], appendedEls = [], parsedSheets = {}, resizeThrottle = 30, head = doc.getElementsByTagName("head")[0] || docElem, base = doc.getElementsByTagName("base")[0], links = head.getElementsByTagName("link"), lastCall, resizeDefer, eminpx, getEmValue = function() {
    var ret, div = doc.createElement("div"), body = doc.body, originalHTMLFontSize = docElem.style.fontSize, originalBodyFontSize = body && body.style.fontSize, fakeUsed = false;
    div.style.cssText = "position:absolute;font-size:1em;width:1em";
    if (!body) {
      body = fakeUsed = doc.createElement("body");
      body.style.background = "none";
    }
    docElem.style.fontSize = "100%";
    body.style.fontSize = "100%";
    body.appendChild(div);
    if (fakeUsed) {
      docElem.insertBefore(body, docElem.firstChild);
    }
    ret = div.offsetWidth;
    if (fakeUsed) {
      docElem.removeChild(body);
    } else {
      body.removeChild(div);
    }
    docElem.style.fontSize = originalHTMLFontSize;
    if (originalBodyFontSize) {
      body.style.fontSize = originalBodyFontSize;
    }
    ret = eminpx = parseFloat(ret);
    return ret;
  }, applyMedia = function(fromResize) {
    var name = "clientWidth", docElemProp = docElem[name], currWidth = doc.compatMode === "CSS1Compat" && docElemProp || doc.body[name] || docElemProp, styleBlocks = {}, lastLink = links[links.length - 1], now = new Date().getTime();
    if (fromResize && lastCall && now - lastCall < resizeThrottle) {
      w.clearTimeout(resizeDefer);
      resizeDefer = w.setTimeout(applyMedia, resizeThrottle);
      return;
    } else {
      lastCall = now;
    }
    for (var i in mediastyles) {
      if (mediastyles.hasOwnProperty(i)) {
        var thisstyle = mediastyles[i], min = thisstyle.minw, max = thisstyle.maxw, minnull = min === null, maxnull = max === null, em = "em";
        if (!!min) {
          min = parseFloat(min) * (min.indexOf(em) > -1 ? eminpx || getEmValue() : 1);
        }
        if (!!max) {
          max = parseFloat(max) * (max.indexOf(em) > -1 ? eminpx || getEmValue() : 1);
        }
        if (!thisstyle.hasquery || (!minnull || !maxnull) && (minnull || currWidth >= min) && (maxnull || currWidth <= max)) {
          if (!styleBlocks[thisstyle.media]) {
            styleBlocks[thisstyle.media] = [];
          }
          styleBlocks[thisstyle.media].push(rules[thisstyle.rules]);
        }
      }
    }
    for (var j in appendedEls) {
      if (appendedEls.hasOwnProperty(j)) {
        if (appendedEls[j] && appendedEls[j].parentNode === head) {
          head.removeChild(appendedEls[j]);
        }
      }
    }
    appendedEls.length = 0;
    for (var k in styleBlocks) {
      if (styleBlocks.hasOwnProperty(k)) {
        var ss = doc.createElement("style"), css = styleBlocks[k].join("\n");
        ss.type = "text/css";
        ss.media = k;
        head.insertBefore(ss, lastLink.nextSibling);
        if (ss.styleSheet) {
          ss.styleSheet.cssText = css;
        } else {
          ss.appendChild(doc.createTextNode(css));
        }
        appendedEls.push(ss);
      }
    }
  }, translate = function(styles, href, media) {
    var qs = styles.replace(respond.regex.comments, "").replace(respond.regex.keyframes, "").match(respond.regex.media), ql = qs && qs.length || 0;
    href = href.substring(0, href.lastIndexOf("/"));
    var repUrls = function(css) {
      return css.replace(respond.regex.urls, "$1" + href + "$2$3");
    }, useMedia = !ql && media;
    if (href.length) {
      href += "/";
    }
    if (useMedia) {
      ql = 1;
    }
    for (var i = 0; i < ql; i++) {
      var fullq, thisq, eachq, eql;
      if (useMedia) {
        fullq = media;
        rules.push(repUrls(styles));
      } else {
        fullq = qs[i].match(respond.regex.findStyles) && RegExp.$1;
        rules.push(RegExp.$2 && repUrls(RegExp.$2));
      }
      eachq = fullq.split(",");
      eql = eachq.length;
      for (var j = 0; j < eql; j++) {
        thisq = eachq[j];
        if (isUnsupportedMediaQuery(thisq)) {
          continue;
        }
        mediastyles.push({
          media: thisq.split("(")[0].match(respond.regex.only) && RegExp.$2 || "all",
          rules: rules.length - 1,
          hasquery: thisq.indexOf("(") > -1,
          minw: thisq.match(respond.regex.minw) && parseFloat(RegExp.$1) + (RegExp.$2 || ""),
          maxw: thisq.match(respond.regex.maxw) && parseFloat(RegExp.$1) + (RegExp.$2 || "")
        });
      }
    }
    applyMedia();
  }, makeRequests = function() {
    if (requestQueue.length) {
      var thisRequest = requestQueue.shift();
      ajax(thisRequest.href, function(styles) {
        translate(styles, thisRequest.href, thisRequest.media);
        parsedSheets[thisRequest.href] = true;
        w.setTimeout(function() {
          makeRequests();
        }, 0);
      });
    }
  }, ripCSS = function() {
    for (var i = 0; i < links.length; i++) {
      var sheet = links[i], href = sheet.href, media = sheet.media, isCSS = sheet.rel && sheet.rel.toLowerCase() === "stylesheet";
      if (!!href && isCSS && !parsedSheets[href]) {
        if (sheet.styleSheet && sheet.styleSheet.rawCssText) {
          translate(sheet.styleSheet.rawCssText, href, media);
          parsedSheets[href] = true;
        } else {
          if (!/^([a-zA-Z:]*\/\/)/.test(href) && !base || href.replace(RegExp.$1, "").split("/")[0] === w.location.host) {
            if (href.substring(0, 2) === "//") {
              href = w.location.protocol + href;
            }
            requestQueue.push({
              href: href,
              media: media
            });
          }
        }
      }
    }
    makeRequests();
  };
  ripCSS();
  respond.update = ripCSS;
  respond.getEmValue = getEmValue;
  function callMedia() {
    applyMedia(true);
  }
  if (w.addEventListener) {
    w.addEventListener("resize", callMedia, false);
  } else if (w.attachEvent) {
    w.attachEvent("onresize", callMedia);
  }
})(this);
/**
 * jQuery CSS Customizable Scrollbar
 *
 * Copyright 2015, Yuriy Khabarov
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * If you found bug, please contact me via email <13real008@gmail.com>
 *
 * @author Yuriy Khabarov aka Gromo
 * @version 0.2.10
 * @url https://github.com/gromo/jquery.scrollbar/
 *
 */
;
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else {
        factory(root.jQuery);
    }
}(this, function ($) {
    'use strict';

    // init flags & variables
    var debug = false;

    var browser = {
        data: {
            index: 0,
            name: 'scrollbar'
        },
        macosx: /mac/i.test(navigator.platform),
        mobile: /android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),
        overlay: null,
        scroll: null,
        scrolls: [],
        webkit: /webkit/i.test(navigator.userAgent) && !/edge\/\d+/i.test(navigator.userAgent)
    };

    browser.scrolls.add = function (instance) {
        this.remove(instance).push(instance);
    };
    browser.scrolls.remove = function (instance) {
        while ($.inArray(instance, this) >= 0) {
            this.splice($.inArray(instance, this), 1);
        }
        return this;
    };

    var defaults = {
        "autoScrollSize": true,     // automatically calculate scrollsize
        "autoUpdate": true,         // update scrollbar if content/container size changed
        "debug": false,             // debug mode
        "disableBodyScroll": false, // disable body scroll if mouse over container
        "duration": 200,            // scroll animate duration in ms
        "ignoreMobile": false,      // ignore mobile devices
        "ignoreOverlay": false,     // ignore browsers with overlay scrollbars (mobile, MacOS)
        "scrollStep": 30,           // scroll step for scrollbar arrows
        "showArrows": false,        // add class to show arrows
        "stepScrolling": true,      // when scrolling to scrollbar mousedown position

        "scrollx": null,            // horizontal scroll element
        "scrolly": null,            // vertical scroll element

        "onDestroy": null,          // callback function on destroy,
        "onInit": null,             // callback function on first initialization
        "onScroll": null,           // callback function on content scrolling
        "onUpdate": null            // callback function on init/resize (before scrollbar size calculation)
    };


    var BaseScrollbar = function (container) {

        if (!browser.scroll) {
            browser.overlay = isScrollOverlaysContent();
            browser.scroll = getBrowserScrollSize();
            updateScrollbars();

            $(window).resize(function () {
                var forceUpdate = false;
                if (browser.scroll && (browser.scroll.height || browser.scroll.width)) {
                    var scroll = getBrowserScrollSize();
                    if (scroll.height !== browser.scroll.height || scroll.width !== browser.scroll.width) {
                        browser.scroll = scroll;
                        forceUpdate = true; // handle page zoom
                    }
                }
                updateScrollbars(forceUpdate);
            });
        }

        this.container = container;
        this.namespace = '.scrollbar_' + browser.data.index++;
        this.options = $.extend({}, defaults, window.jQueryScrollbarOptions || {});
        this.scrollTo = null;
        this.scrollx = {};
        this.scrolly = {};

        container.data(browser.data.name, this);
        browser.scrolls.add(this);
    };

    BaseScrollbar.prototype = {

        destroy: function () {

            if (!this.wrapper) {
                return;
            }

            this.container.removeData(browser.data.name);
            browser.scrolls.remove(this);

            // init variables
            var scrollLeft = this.container.scrollLeft();
            var scrollTop = this.container.scrollTop();

            this.container.insertBefore(this.wrapper).css({
                "height": "",
                "margin": "",
                "max-height": ""
            })
                .removeClass('scroll-content scroll-scrollx_visible scroll-scrolly_visible')
                .off(this.namespace)
                .scrollLeft(scrollLeft)
                .scrollTop(scrollTop);

            this.scrollx.scroll.removeClass('scroll-scrollx_visible').find('div').andSelf().off(this.namespace);
            this.scrolly.scroll.removeClass('scroll-scrolly_visible').find('div').andSelf().off(this.namespace);

            this.wrapper.remove();

            $(document).add('body').off(this.namespace);

            if ($.isFunction(this.options.onDestroy)){
                this.options.onDestroy.apply(this, [this.container]);
            }
        },
        init: function (options) {

            // init variables
            var S = this,
                c = this.container,
                cw = this.containerWrapper || c,
                namespace = this.namespace,
                o = $.extend(this.options, options || {}),
                s = {x: this.scrollx, y: this.scrolly},
                w = this.wrapper;

            var initScroll = {
                "scrollLeft": c.scrollLeft(),
                "scrollTop": c.scrollTop()
            };

            // do not init if in ignorable browser
            if ((browser.mobile && o.ignoreMobile)
                || (browser.overlay && o.ignoreOverlay)
                || (browser.macosx && !browser.webkit) // still required to ignore nonWebKit browsers on Mac
                ) {
                return false;
            }

            // init scroll container
            if (!w) {
                this.wrapper = w = $('<div>').addClass('scroll-wrapper').addClass(c.attr('class'))
                    .css('position', c.css('position') == 'absolute' ? 'absolute' : 'fixed')
                    .insertBefore(c).append(c);

                if (c.is('textarea')) {
                    this.containerWrapper = cw = $('<div>').insertBefore(c).append(c);
                    w.addClass('scroll-textarea');
                }

                cw.addClass('scroll-content').css({
                    "height": "auto",
                    "margin-bottom": browser.scroll.height * -1 + 'px',
                    "margin-right": browser.scroll.width * -1 + 'px',
                    "max-height": ""
                });

                c.on('scroll' + namespace, function (event) {
                    if ($.isFunction(o.onScroll)) {
                        o.onScroll.call(S, {
                            "maxScroll": s.y.maxScrollOffset,
                            "scroll": c.scrollTop(),
                            "size": s.y.size,
                            "visible": s.y.visible
                        }, {
                            "maxScroll": s.x.maxScrollOffset,
                            "scroll": c.scrollLeft(),
                            "size": s.x.size,
                            "visible": s.x.visible
                        });
                    }
                    s.x.isVisible && s.x.scroll.bar.css('left', c.scrollLeft() * s.x.kx + 'px');
                    s.y.isVisible && s.y.scroll.bar.css('top', c.scrollTop() * s.y.kx + 'px');
                });

                /* prevent native scrollbars to be visible on #anchor click */
                w.on('scroll' + namespace, function () {
                    w.scrollTop(0).scrollLeft(0);
                });

                if (o.disableBodyScroll) {
                    var handleMouseScroll = function (event) {
                        isVerticalScroll(event) ?
                            s.y.isVisible && s.y.mousewheel(event) :
                            s.x.isVisible && s.x.mousewheel(event);
                    };
                    w.on('MozMousePixelScroll' + namespace, handleMouseScroll);
                    w.on('mousewheel' + namespace, handleMouseScroll);

                    if (browser.mobile) {
                        w.on('touchstart' + namespace, function (event) {
                            var touch = event.originalEvent.touches && event.originalEvent.touches[0] || event;
                            var originalTouch = {
                                "pageX": touch.pageX,
                                "pageY": touch.pageY
                            };
                            var originalScroll = {
                                "left": c.scrollLeft(),
                                "top": c.scrollTop()
                            };
                            $(document).on('touchmove' + namespace, function (event) {
                                var touch = event.originalEvent.targetTouches && event.originalEvent.targetTouches[0] || event;
                                c.scrollLeft(originalScroll.left + originalTouch.pageX - touch.pageX);
                                c.scrollTop(originalScroll.top + originalTouch.pageY - touch.pageY);
                                event.preventDefault();
                            });
                            $(document).on('touchend' + namespace, function () {
                                $(document).off(namespace);
                            });
                        });
                    }
                }
                if ($.isFunction(o.onInit)){
                    o.onInit.apply(this, [c]);
                }
            } else {
                cw.css({
                    "height": "auto",
                    "margin-bottom": browser.scroll.height * -1 + 'px',
                    "margin-right": browser.scroll.width * -1 + 'px',
                    "max-height": ""
                });
            }

            // init scrollbars & recalculate sizes
            $.each(s, function (d, scrollx) {

                var scrollCallback = null;
                var scrollForward = 1;
                var scrollOffset = (d === 'x') ? 'scrollLeft' : 'scrollTop';
                var scrollStep = o.scrollStep;
                var scrollTo = function () {
                    var currentOffset = c[scrollOffset]();
                    c[scrollOffset](currentOffset + scrollStep);
                    if (scrollForward == 1 && (currentOffset + scrollStep) >= scrollToValue)
                        currentOffset = c[scrollOffset]();
                    if (scrollForward == -1 && (currentOffset + scrollStep) <= scrollToValue)
                        currentOffset = c[scrollOffset]();
                    if (c[scrollOffset]() == currentOffset && scrollCallback) {
                        scrollCallback();
                    }
                }
                var scrollToValue = 0;

                if (!scrollx.scroll) {

                    scrollx.scroll = S._getScroll(o['scroll' + d]).addClass('scroll-' + d);

                    if(o.showArrows){
                        scrollx.scroll.addClass('scroll-element_arrows_visible');
                    }

                    scrollx.mousewheel = function (event) {

                        if (!scrollx.isVisible || (d === 'x' && isVerticalScroll(event))) {
                            return true;
                        }
                        if (d === 'y' && !isVerticalScroll(event)) {
                            s.x.mousewheel(event);
                            return true;
                        }

                        var delta = event.originalEvent.wheelDelta * -1 || event.originalEvent.detail;
                        var maxScrollValue = scrollx.size - scrollx.visible - scrollx.offset;

                        if ((delta > 0 && scrollToValue < maxScrollValue) || (delta < 0 && scrollToValue > 0)) {
                            scrollToValue = scrollToValue + delta;
                            if (scrollToValue < 0)
                                scrollToValue = 0;
                            if (scrollToValue > maxScrollValue)
                                scrollToValue = maxScrollValue;

                            S.scrollTo = S.scrollTo || {};
                            S.scrollTo[scrollOffset] = scrollToValue;
                            setTimeout(function () {
                                if (S.scrollTo) {
                                    c.stop().animate(S.scrollTo, 240, 'linear', function () {
                                        scrollToValue = c[scrollOffset]();
                                    });
                                    S.scrollTo = null;
                                }
                            }, 1);
                        }

                        event.preventDefault();
                        return false;
                    };

                    scrollx.scroll
                        .on('MozMousePixelScroll' + namespace, scrollx.mousewheel)
                        .on('mousewheel' + namespace, scrollx.mousewheel)
                        .on('mouseenter' + namespace, function () {
                            scrollToValue = c[scrollOffset]();
                        });

                    // handle arrows & scroll inner mousedown event
                    scrollx.scroll.find('.scroll-arrow, .scroll-element_track')
                        .on('mousedown' + namespace, function (event) {

                            if (event.which != 1) // lmb
                                return true;

                            scrollForward = 1;

                            var data = {
                                "eventOffset": event[(d === 'x') ? 'pageX' : 'pageY'],
                                "maxScrollValue": scrollx.size - scrollx.visible - scrollx.offset,
                                "scrollbarOffset": scrollx.scroll.bar.offset()[(d === 'x') ? 'left' : 'top'],
                                "scrollbarSize": scrollx.scroll.bar[(d === 'x') ? 'outerWidth' : 'outerHeight']()
                            };
                            var timeout = 0, timer = 0;

                            if ($(this).hasClass('scroll-arrow')) {
                                scrollForward = $(this).hasClass("scroll-arrow_more") ? 1 : -1;
                                scrollStep = o.scrollStep * scrollForward;
                                scrollToValue = scrollForward > 0 ? data.maxScrollValue : 0;
                            } else {
                                scrollForward = (data.eventOffset > (data.scrollbarOffset + data.scrollbarSize) ? 1
                                    : (data.eventOffset < data.scrollbarOffset ? -1 : 0));
                                scrollStep = Math.round(scrollx.visible * 0.75) * scrollForward;
                                scrollToValue = (data.eventOffset - data.scrollbarOffset -
                                    (o.stepScrolling ? (scrollForward == 1 ? data.scrollbarSize : 0)
                                        : Math.round(data.scrollbarSize / 2)));
                                scrollToValue = c[scrollOffset]() + (scrollToValue / scrollx.kx);
                            }

                            S.scrollTo = S.scrollTo || {};
                            S.scrollTo[scrollOffset] = o.stepScrolling ? c[scrollOffset]() + scrollStep : scrollToValue;

                            if (o.stepScrolling) {
                                scrollCallback = function () {
                                    scrollToValue = c[scrollOffset]();
                                    clearInterval(timer);
                                    clearTimeout(timeout);
                                    timeout = 0;
                                    timer = 0;
                                };
                                timeout = setTimeout(function () {
                                    timer = setInterval(scrollTo, 40);
                                }, o.duration + 100);
                            }

                            setTimeout(function () {
                                if (S.scrollTo) {
                                    c.animate(S.scrollTo, o.duration);
                                    S.scrollTo = null;
                                }
                            }, 1);

                            return S._handleMouseDown(scrollCallback, event);
                        });

                    // handle scrollbar drag'n'drop
                    scrollx.scroll.bar.on('mousedown' + namespace, function (event) {

                        if (event.which != 1) // lmb
                            return true;

                        var eventPosition = event[(d === 'x') ? 'pageX' : 'pageY'];
                        var initOffset = c[scrollOffset]();

                        scrollx.scroll.addClass('scroll-draggable');

                        $(document).on('mousemove' + namespace, function (event) {
                            var diff = parseInt((event[(d === 'x') ? 'pageX' : 'pageY'] - eventPosition) / scrollx.kx, 10);
                            c[scrollOffset](initOffset + diff);
                        });

                        return S._handleMouseDown(function () {
                            scrollx.scroll.removeClass('scroll-draggable');
                            scrollToValue = c[scrollOffset]();
                        }, event);
                    });
                }
            });

            // remove classes & reset applied styles
            $.each(s, function (d, scrollx) {
                var scrollClass = 'scroll-scroll' + d + '_visible';
                var scrolly = (d == "x") ? s.y : s.x;

                scrollx.scroll.removeClass(scrollClass);
                scrolly.scroll.removeClass(scrollClass);
                cw.removeClass(scrollClass);
            });

            // calculate init sizes
            $.each(s, function (d, scrollx) {
                $.extend(scrollx, (d == "x") ? {
                    "offset": parseInt(c.css('left'), 10) || 0,
                    "size": c.prop('scrollWidth'),
                    "visible": w.width()
                } : {
                    "offset": parseInt(c.css('top'), 10) || 0,
                    "size": c.prop('scrollHeight'),
                    "visible": w.height()
                });
            });

            // update scrollbar visibility/dimensions
            this._updateScroll('x', this.scrollx);
            this._updateScroll('y', this.scrolly);

            if ($.isFunction(o.onUpdate)){
                o.onUpdate.apply(this, [c]);
            }

            // calculate scroll size
            $.each(s, function (d, scrollx) {

                var cssOffset = (d === 'x') ? 'left' : 'top';
                var cssFullSize = (d === 'x') ? 'outerWidth' : 'outerHeight';
                var cssSize = (d === 'x') ? 'width' : 'height';
                var offset = parseInt(c.css(cssOffset), 10) || 0;

                var AreaSize = scrollx.size;
                var AreaVisible = scrollx.visible + offset;

                var scrollSize = scrollx.scroll.size[cssFullSize]() + (parseInt(scrollx.scroll.size.css(cssOffset), 10) || 0);

                if (o.autoScrollSize) {
                    scrollx.scrollbarSize = parseInt(scrollSize * AreaVisible / AreaSize, 10);
                    scrollx.scroll.bar.css(cssSize, scrollx.scrollbarSize + 'px');
                }

                scrollx.scrollbarSize = scrollx.scroll.bar[cssFullSize]();
                scrollx.kx = ((scrollSize - scrollx.scrollbarSize) / (AreaSize - AreaVisible)) || 1;
                scrollx.maxScrollOffset = AreaSize - AreaVisible;
            });

            c.scrollLeft(initScroll.scrollLeft).scrollTop(initScroll.scrollTop).trigger('scroll');
        },

        /**
         * Get scrollx/scrolly object
         *
         * @param {Mixed} scroll
         * @returns {jQuery} scroll object
         */
        _getScroll: function (scroll) {
            var types = {
                advanced: [
                    '<div class="scroll-element">',
                    '<div class="scroll-element_corner"></div>',
                    '<div class="scroll-arrow scroll-arrow_less"></div>',
                    '<div class="scroll-arrow scroll-arrow_more"></div>',
                    '<div class="scroll-element_outer">',
                    '<div class="scroll-element_size"></div>', // required! used for scrollbar size calculation !
                    '<div class="scroll-element_inner-wrapper">',
                    '<div class="scroll-element_inner scroll-element_track">', // used for handling scrollbar click
                    '<div class="scroll-element_inner-bottom"></div>',
                    '</div>',
                    '</div>',
                    '<div class="scroll-bar">', // required
                    '<div class="scroll-bar_body">',
                    '<div class="scroll-bar_body-inner"></div>',
                    '</div>',
                    '<div class="scroll-bar_bottom"></div>',
                    '<div class="scroll-bar_center"></div>',
                    '</div>',
                    '</div>',
                    '</div>'
                ].join(''),
                simple: [
                    '<div class="scroll-element">',
                    '<div class="scroll-element_outer">',
                    '<div class="scroll-element_size"></div>', // required! used for scrollbar size calculation !
                    '<div class="scroll-element_track"></div>', // used for handling scrollbar click
                    '<div class="scroll-bar"></div>', // required
                    '</div>',
                    '</div>'
                ].join('')
            };
            if (types[scroll]) {
                scroll = types[scroll];
            }
            if (!scroll) {
                scroll = types['simple'];
            }
            if (typeof (scroll) == 'string') {
                scroll = $(scroll).appendTo(this.wrapper);
            } else {
                scroll = $(scroll);
            }
            $.extend(scroll, {
                bar: scroll.find('.scroll-bar'),
                size: scroll.find('.scroll-element_size'),
                track: scroll.find('.scroll-element_track')
            });
            return scroll;
        },

        _handleMouseDown: function(callback, event) {

            var namespace = this.namespace;

            $(document).on('blur' + namespace, function () {
                $(document).add('body').off(namespace);
                callback && callback();
            });
            $(document).on('dragstart' + namespace, function (event) {
                event.preventDefault();
                return false;
            });
            $(document).on('mouseup' + namespace, function () {
                $(document).add('body').off(namespace);
                callback && callback();
            });
            $('body').on('selectstart' + namespace, function (event) {
                event.preventDefault();
                return false;
            });

            event && event.preventDefault();
            return false;
        },

        _updateScroll: function (d, scrollx) {

            var container = this.container,
                containerWrapper = this.containerWrapper || container,
                scrollClass = 'scroll-scroll' + d + '_visible',
                scrolly = (d === 'x') ? this.scrolly : this.scrollx,
                offset = parseInt(this.container.css((d === 'x') ? 'left' : 'top'), 10) || 0,
                wrapper = this.wrapper;

            var AreaSize = scrollx.size;
            var AreaVisible = scrollx.visible + offset;

            scrollx.isVisible = (AreaSize - AreaVisible) > 1; // bug in IE9/11 with 1px diff
            if (scrollx.isVisible) {
                scrollx.scroll.addClass(scrollClass);
                scrolly.scroll.addClass(scrollClass);
                containerWrapper.addClass(scrollClass);
            } else {
                scrollx.scroll.removeClass(scrollClass);
                scrolly.scroll.removeClass(scrollClass);
                containerWrapper.removeClass(scrollClass);
            }

            if (d === 'y') {
                if(container.is('textarea') || AreaSize < AreaVisible){
                    containerWrapper.css({
                        "height": (AreaVisible + browser.scroll.height) + 'px',
                        "max-height": "none"
                    });
                } else {
                    containerWrapper.css({
                        //"height": "auto", // do not reset height value: issue with height:100%!
                        "max-height": (AreaVisible + browser.scroll.height) + 'px'
                    });
                }
            }

            if (scrollx.size != container.prop('scrollWidth')
                || scrolly.size != container.prop('scrollHeight')
                || scrollx.visible != wrapper.width()
                || scrolly.visible != wrapper.height()
                || scrollx.offset != (parseInt(container.css('left'), 10) || 0)
                || scrolly.offset != (parseInt(container.css('top'), 10) || 0)
                ) {
                $.extend(this.scrollx, {
                    "offset": parseInt(container.css('left'), 10) || 0,
                    "size": container.prop('scrollWidth'),
                    "visible": wrapper.width()
                });
                $.extend(this.scrolly, {
                    "offset": parseInt(container.css('top'), 10) || 0,
                    "size": this.container.prop('scrollHeight'),
                    "visible": wrapper.height()
                });
                this._updateScroll(d === 'x' ? 'y' : 'x', scrolly);
            }
        }
    };

    var CustomScrollbar = BaseScrollbar;

    /*
     * Extend jQuery as plugin
     *
     * @param {Mixed} command to execute
     * @param {Mixed} arguments as Array
     * @return {jQuery}
     */
    $.fn.scrollbar = function (command, args) {
        if (typeof command !== 'string') {
            args = command;
            command = 'init';
        }
        if (typeof args === 'undefined') {
            args = [];
        }
        if (!$.isArray(args)) {
            args = [args];
        }
        this.not('body, .scroll-wrapper').each(function () {
            var element = $(this),
                instance = element.data(browser.data.name);
            if (instance || command === 'init') {
                if (!instance) {
                    instance = new CustomScrollbar(element);
                }
                if (instance[command]) {
                    instance[command].apply(instance, args);
                }
            }
        });
        return this;
    };

    /**
     * Connect default options to global object
     */
    $.fn.scrollbar.options = defaults;


    /**
     * Check if scroll content/container size is changed
     */

    var updateScrollbars = (function () {
        var timer = 0,
            timerCounter = 0;

        return function (force) {
            var i, container, options, scroll, wrapper, scrollx, scrolly;
            for (i = 0; i < browser.scrolls.length; i++) {
                scroll = browser.scrolls[i];
                container = scroll.container;
                options = scroll.options;
                wrapper = scroll.wrapper;
                scrollx = scroll.scrollx;
                scrolly = scroll.scrolly;
                if (force || (options.autoUpdate && wrapper && wrapper.is(':visible') &&
                    (container.prop('scrollWidth') != scrollx.size || container.prop('scrollHeight') != scrolly.size || wrapper.width() != scrollx.visible || wrapper.height() != scrolly.visible))) {
                    scroll.init();

                    if (options.debug) {
                        window.console && console.log({
                            scrollHeight: container.prop('scrollHeight') + ':' + scroll.scrolly.size,
                            scrollWidth: container.prop('scrollWidth') + ':' + scroll.scrollx.size,
                            visibleHeight: wrapper.height() + ':' + scroll.scrolly.visible,
                            visibleWidth: wrapper.width() + ':' + scroll.scrollx.visible
                        }, true);
                        timerCounter++;
                    }
                }
            }
            if (debug && timerCounter > 10) {
                window.console && console.log('Scroll updates exceed 10');
                updateScrollbars = function () {};
            } else {
                clearTimeout(timer);
                timer = setTimeout(updateScrollbars, 300);
            }
        };
    })();

    /* ADDITIONAL FUNCTIONS */
    /**
     * Get native browser scrollbar size (height/width)
     *
     * @param {Boolean} actual size or CSS size, default - CSS size
     * @returns {Object} with height, width
     */
    function getBrowserScrollSize(actualSize) {

        if (browser.webkit && !actualSize) {
            return {
                "height": 0,
                "width": 0
            };
        }

        if (!browser.data.outer) {
            var css = {
                "border": "none",
                "box-sizing": "content-box",
                "height": "200px",
                "margin": "0",
                "padding": "0",
                "width": "200px"
            };
            browser.data.inner = $("<div>").css($.extend({}, css));
            browser.data.outer = $("<div>").css($.extend({
                "left": "-1000px",
                "overflow": "scroll",
                "position": "absolute",
                "top": "-1000px"
            }, css)).append(browser.data.inner).appendTo("body");
        }

        browser.data.outer.scrollLeft(1000).scrollTop(1000);

        return {
            "height": Math.ceil((browser.data.outer.offset().top - browser.data.inner.offset().top) || 0),
            "width": Math.ceil((browser.data.outer.offset().left - browser.data.inner.offset().left) || 0)
        };
    }

    /**
     * Check if native browser scrollbars overlay content
     *
     * @returns {Boolean}
     */
    function isScrollOverlaysContent() {
        var scrollSize = getBrowserScrollSize(true);
        return !(scrollSize.height || scrollSize.width);
    }

    function isVerticalScroll(event) {
        var e = event.originalEvent;
        if (e.axis && e.axis === e.HORIZONTAL_AXIS)
            return false;
        if (e.wheelDeltaX)
            return false;
        return true;
    }


    /**
     * Extend AngularJS as UI directive
     * and expose a provider for override default config
     *
     */
    if (window.angular) {
        (function (angular) {
            angular.module('jQueryScrollbar', [])
                .provider('jQueryScrollbar', function () {
                    var defaultOptions = defaults;
                    return {
                        setOptions: function (options) {
                            angular.extend(defaultOptions, options);
                        },
                        $get: function () {
                            return {
                                options: angular.copy(defaultOptions)
                            };
                        }
                    };
                })
                .directive('jqueryScrollbar', ['jQueryScrollbar', '$parse', function (jQueryScrollbar, $parse) {
                    return {
                        "restrict": "AC",
                        "link": function (scope, element, attrs) {
                            var model = $parse(attrs.jqueryScrollbar),
                                options = model(scope);
                            element.scrollbar(options || jQueryScrollbar.options)
                                .on('$destroy', function () {
                                    element.scrollbar('destroy');
                                });
                        }
                    };
                }]);
        })(window.angular);
    }
}));

/**
* Customized version of iScroll.js 0.0.8
* It fixes bugs affecting its integration with fullpage.js
* @license
*/
/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
(function (window, document, Math) {
var rAF = window.requestAnimationFrame  ||
    window.webkitRequestAnimationFrame  ||
    window.mozRequestAnimationFrame     ||
    window.oRequestAnimationFrame       ||
    window.msRequestAnimationFrame      ||
    function (callback) { window.setTimeout(callback, 1000 / 60); };

var utils = (function () {
    var me = {};

    var _elementStyle = document.createElement('div').style;
    var _vendor = (function () {
        var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],
            transform,
            i = 0,
            l = vendors.length;

        for ( ; i < l; i++ ) {
            transform = vendors[i] + 'ransform';
            if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);
        }

        return false;
    })();

    function _prefixStyle (style) {
        if ( _vendor === false ) return false;
        if ( _vendor === '' ) return style;
        return _vendor + style.charAt(0).toUpperCase() + style.substr(1);
    }

    me.getTime = Date.now || function getTime () { return new Date().getTime(); };

    me.extend = function (target, obj) {
        for ( var i in obj ) {
            target[i] = obj[i];
        }
    };

    me.addEvent = function (el, type, fn, capture) {
        el.addEventListener(type, fn, !!capture);
    };

    me.removeEvent = function (el, type, fn, capture) {
        el.removeEventListener(type, fn, !!capture);
    };

    me.prefixPointerEvent = function (pointerEvent) {
        return window.MSPointerEvent ?
            'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8):
            pointerEvent;
    };

    me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
        var distance = current - start,
            speed = Math.abs(distance) / time,
            destination,
            duration;

        deceleration = deceleration === undefined ? 0.0006 : deceleration;

        destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
        duration = speed / deceleration;

        if ( destination < lowerMargin ) {
            destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;
            distance = Math.abs(destination - current);
            duration = distance / speed;
        } else if ( destination > 0 ) {
            destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;
            distance = Math.abs(current) + destination;
            duration = distance / speed;
        }

        return {
            destination: Math.round(destination),
            duration: duration
        };
    };

    var _transform = _prefixStyle('transform');

    me.extend(me, {
        hasTransform: _transform !== false,
        hasPerspective: _prefixStyle('perspective') in _elementStyle,
        hasTouch: 'ontouchstart' in window,
        hasPointer: !!(window.PointerEvent || window.MSPointerEvent), // IE10 is prefixed
        hasTransition: _prefixStyle('transition') in _elementStyle
    });

    /*
    This should find all Android browsers lower than build 535.19 (both stock browser and webview)
    - galaxy S2 is ok
    - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`
    - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S3 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S4 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S5 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
   - galaxy S6 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
  */
    me.isBadAndroid = (function() {
        var appVersion = window.navigator.appVersion;
        // Android browser is not a chrome browser.
        if (/Android/.test(appVersion) && !(/Chrome\/\d/.test(appVersion))) {
            var safariVersion = appVersion.match(/Safari\/(\d+.\d)/);
            if(safariVersion && typeof safariVersion === "object" && safariVersion.length >= 2) {
                return parseFloat(safariVersion[1]) < 535.19;
            } else {
                return true;
            }
        } else {
            return false;
        }
    })();

    me.extend(me.style = {}, {
        transform: _transform,
        transitionTimingFunction: _prefixStyle('transitionTimingFunction'),
        transitionDuration: _prefixStyle('transitionDuration'),
        transitionDelay: _prefixStyle('transitionDelay'),
        transformOrigin: _prefixStyle('transformOrigin')
    });

    me.hasClass = function (e, c) {
        var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
        return re.test(e.className);
    };

    me.addClass = function (e, c) {
        if ( me.hasClass(e, c) ) {
            return;
        }

        var newclass = e.className.split(' ');
        newclass.push(c);
        e.className = newclass.join(' ');
    };

    me.removeClass = function (e, c) {
        if ( !me.hasClass(e, c) ) {
            return;
        }

        var re = new RegExp("(^|\\s)" + c + "(\\s|$)", 'g');
        e.className = e.className.replace(re, ' ');
    };

    me.offset = function (el) {
        var left = -el.offsetLeft,
            top = -el.offsetTop;

        // jshint -W084
        while (el = el.offsetParent) {
            left -= el.offsetLeft;
            top -= el.offsetTop;
        }
        // jshint +W084

        return {
            left: left,
            top: top
        };
    };

    me.preventDefaultException = function (el, exceptions) {
        for ( var i in exceptions ) {
            if ( exceptions[i].test(el[i]) ) {
                return true;
            }
        }

        return false;
    };

    me.extend(me.eventType = {}, {
        touchstart: 1,
        touchmove: 1,
        touchend: 1,

        mousedown: 2,
        mousemove: 2,
        mouseup: 2,

        pointerdown: 3,
        pointermove: 3,
        pointerup: 3,

        MSPointerDown: 3,
        MSPointerMove: 3,
        MSPointerUp: 3
    });

    me.extend(me.ease = {}, {
        quadratic: {
            style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
            fn: function (k) {
                return k * ( 2 - k );
            }
        },
        circular: {
            style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',   // Not properly "circular" but this looks better, it should be (0.075, 0.82, 0.165, 1)
            fn: function (k) {
                return Math.sqrt( 1 - ( --k * k ) );
            }
        },
        back: {
            style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
            fn: function (k) {
                var b = 4;
                return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;
            }
        },
        bounce: {
            style: '',
            fn: function (k) {
                if ( ( k /= 1 ) < ( 1 / 2.75 ) ) {
                    return 7.5625 * k * k;
                } else if ( k < ( 2 / 2.75 ) ) {
                    return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;
                } else if ( k < ( 2.5 / 2.75 ) ) {
                    return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;
                } else {
                    return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;
                }
            }
        },
        elastic: {
            style: '',
            fn: function (k) {
                var f = 0.22,
                    e = 0.4;

                if ( k === 0 ) { return 0; }
                if ( k == 1 ) { return 1; }

                return ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );
            }
        }
    });

    me.tap = function (e, eventName) {
        var ev = document.createEvent('Event');
        ev.initEvent(eventName, true, true);
        ev.pageX = e.pageX;
        ev.pageY = e.pageY;
        e.target.dispatchEvent(ev);
    };

    me.click = function (e) {
        var target = e.target,
            ev;

        if ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {
            // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent
            // initMouseEvent is deprecated.
            ev = document.createEvent(window.MouseEvent ? 'MouseEvents' : 'Event');
            ev.initEvent('click', true, true);
            ev.view = e.view || window;
            ev.detail = 1;
            ev.screenX = target.screenX || 0;
            ev.screenY = target.screenY || 0;
            ev.clientX = target.clientX || 0;
            ev.clientY = target.clientY || 0;
            ev.ctrlKey = !!e.ctrlKey;
            ev.altKey = !!e.altKey;
            ev.shiftKey = !!e.shiftKey;
            ev.metaKey = !!e.metaKey;
            ev.button = 0;
            ev.relatedTarget = null;
            ev._constructed = true;
            target.dispatchEvent(ev);
        }
    };

    return me;
})();
function IScroll (el, options) {
    this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;
    this.scroller = this.wrapper.children[0];
    this.scrollerStyle = this.scroller.style;       // cache style for better performance

    this.options = {

        resizeScrollbars: true,

        mouseWheelSpeed: 20,

        snapThreshold: 0.334,

// INSERT POINT: OPTIONS
        disablePointer : !utils.hasPointer,
        disableTouch : utils.hasPointer || !utils.hasTouch,
        disableMouse : utils.hasPointer || utils.hasTouch,
        startX: 0,
        startY: 0,
        scrollY: true,
        directionLockThreshold: 5,
        momentum: true,

        bounce: true,
        bounceTime: 600,
        bounceEasing: '',

        preventDefault: true,
        preventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|LABEL)$/ },

        HWCompositing: true,
        useTransition: true,
        useTransform: true,
        bindToWrapper: typeof window.onmousedown === "undefined"
    };

    for ( var i in options ) {
        this.options[i] = options[i];
    }

    // Normalize options
    this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';

    this.options.useTransition = utils.hasTransition && this.options.useTransition;
    this.options.useTransform = utils.hasTransform && this.options.useTransform;

    this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;
    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;

    // If you want eventPassthrough I have to lock one of the axes
    this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;
    this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;

    // With eventPassthrough we also need lockDirection mechanism
    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;
    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;

    this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;

    this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;

    if ( this.options.tap === true ) {
        this.options.tap = 'tap';
    }

    // https://github.com/cubiq/iscroll/issues/1029
    if (!this.options.useTransition && !this.options.useTransform) {
        if(!(/relative|absolute/i).test(this.scrollerStyle.position)) {
            this.scrollerStyle.position = "relative";
        }
    }

    if ( this.options.shrinkScrollbars == 'scale' ) {
        this.options.useTransition = false;
    }

    this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;

// INSERT POINT: NORMALIZATION

    // Some defaults
    this.x = 0;
    this.y = 0;
    this.directionX = 0;
    this.directionY = 0;
    this._events = {};

// INSERT POINT: DEFAULTS

    this._init();
    this.refresh();

    this.scrollTo(this.options.startX, this.options.startY);
    this.enable();
}

IScroll.prototype = {
    version: '5.2.0',

    _init: function () {
        this._initEvents();

        if ( this.options.scrollbars || this.options.indicators ) {
            this._initIndicators();
        }

        if ( this.options.mouseWheel ) {
            this._initWheel();
        }

        if ( this.options.snap ) {
            this._initSnap();
        }

        if ( this.options.keyBindings ) {
            this._initKeys();
        }

// INSERT POINT: _init

    },

    destroy: function () {
        this._initEvents(true);
        clearTimeout(this.resizeTimeout);
        this.resizeTimeout = null;
        this._execEvent('destroy');
    },

    _transitionEnd: function (e) {
        if ( e.target != this.scroller || !this.isInTransition ) {
            return;
        }

        this._transitionTime();
        if ( !this.resetPosition(this.options.bounceTime) ) {
            this.isInTransition = false;
            this._execEvent('scrollEnd');
        }
    },

    _start: function (e) {
        // React to left mouse button only
        if ( utils.eventType[e.type] != 1 ) {
          // for button property
          // http://unixpapa.com/js/mouse.html
          var button;
        if (!e.which) {
          /* IE case */
          button = (e.button < 2) ? 0 :
                   ((e.button == 4) ? 1 : 2);
        } else {
          /* All others */
          button = e.button;
        }
            if ( button !== 0 ) {
                return;
            }
        }

        if ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {
            return;
        }

        if ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
            e.preventDefault();
        }

        var point = e.touches ? e.touches[0] : e,
            pos;

        this.initiated  = utils.eventType[e.type];
        this.moved      = false;
        this.distX      = 0;
        this.distY      = 0;
        this.directionX = 0;
        this.directionY = 0;
        this.directionLocked = 0;

        this.startTime = utils.getTime();

        if ( this.options.useTransition && this.isInTransition ) {
            this._transitionTime();
            this.isInTransition = false;
            pos = this.getComputedPosition();
            this._translate(Math.round(pos.x), Math.round(pos.y));
            this._execEvent('scrollEnd');
        } else if ( !this.options.useTransition && this.isAnimating ) {
            this.isAnimating = false;
            this._execEvent('scrollEnd');
        }

        this.startX    = this.x;
        this.startY    = this.y;
        this.absStartX = this.x;
        this.absStartY = this.y;
        this.pointX    = point.pageX;
        this.pointY    = point.pageY;

        this._execEvent('beforeScrollStart');
    },

    _move: function (e) {
        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
            return;
        }

        if ( this.options.preventDefault ) {    // increases performance on Android? TODO: check!
            e.preventDefault();
        }

        var point       = e.touches ? e.touches[0] : e,
            deltaX      = point.pageX - this.pointX,
            deltaY      = point.pageY - this.pointY,
            timestamp   = utils.getTime(),
            newX, newY,
            absDistX, absDistY;

        this.pointX     = point.pageX;
        this.pointY     = point.pageY;

        this.distX      += deltaX;
        this.distY      += deltaY;
        absDistX        = Math.abs(this.distX);
        absDistY        = Math.abs(this.distY);

        // We need to move at least 10 pixels for the scrolling to initiate
        if ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {
            return;
        }

        // If you are scrolling in one direction lock the other
        if ( !this.directionLocked && !this.options.freeScroll ) {
            if ( absDistX > absDistY + this.options.directionLockThreshold ) {
                this.directionLocked = 'h';     // lock horizontally
            } else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {
                this.directionLocked = 'v';     // lock vertically
            } else {
                this.directionLocked = 'n';     // no lock
            }
        }

        if ( this.directionLocked == 'h' ) {
            if ( this.options.eventPassthrough == 'vertical' ) {
                e.preventDefault();
            } else if ( this.options.eventPassthrough == 'horizontal' ) {
                this.initiated = false;
                return;
            }

            deltaY = 0;
        } else if ( this.directionLocked == 'v' ) {
            if ( this.options.eventPassthrough == 'horizontal' ) {
                e.preventDefault();
            } else if ( this.options.eventPassthrough == 'vertical' ) {
                this.initiated = false;
                return;
            }

            deltaX = 0;
        }

        deltaX = this.hasHorizontalScroll ? deltaX : 0;
        deltaY = this.hasVerticalScroll ? deltaY : 0;

        newX = this.x + deltaX;
        newY = this.y + deltaY;

        // Slow down if outside of the boundaries
        if ( newX > 0 || newX < this.maxScrollX ) {
            newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;
        }
        if ( newY > 0 || newY < this.maxScrollY ) {
            newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;
        }

        this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
        this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;

        if ( !this.moved ) {
            this._execEvent('scrollStart');
        }

        this.moved = true;

        this._translate(newX, newY);

/* REPLACE START: _move */

        if ( timestamp - this.startTime > 300 ) {
            this.startTime = timestamp;
            this.startX = this.x;
            this.startY = this.y;
        }

/* REPLACE END: _move */

    },

    _end: function (e) {
        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
            return;
        }

        if ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
            e.preventDefault();
        }

        var point = e.changedTouches ? e.changedTouches[0] : e,
            momentumX,
            momentumY,
            duration = utils.getTime() - this.startTime,
            newX = Math.round(this.x),
            newY = Math.round(this.y),
            distanceX = Math.abs(newX - this.startX),
            distanceY = Math.abs(newY - this.startY),
            time = 0,
            easing = '';

        this.isInTransition = 0;
        this.initiated = 0;
        this.endTime = utils.getTime();

        // reset if we are outside of the boundaries
        if ( this.resetPosition(this.options.bounceTime) ) {
            return;
        }

        this.scrollTo(newX, newY);  // ensures that the last position is rounded

        // we scrolled less than 10 pixels
        if ( !this.moved ) {
            if ( this.options.tap ) {
                utils.tap(e, this.options.tap);
            }

            if ( this.options.click ) {
                utils.click(e);
            }

            this._execEvent('scrollCancel');
            return;
        }

        if ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {
            this._execEvent('flick');
            return;
        }

        // start momentum animation if needed
        if ( this.options.momentum && duration < 300 ) {
            momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };
            momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };
            newX = momentumX.destination;
            newY = momentumY.destination;
            time = Math.max(momentumX.duration, momentumY.duration);
            this.isInTransition = 1;
        }


        if ( this.options.snap ) {
            var snap = this._nearestSnap(newX, newY);
            this.currentPage = snap;
            time = this.options.snapSpeed || Math.max(
                    Math.max(
                        Math.min(Math.abs(newX - snap.x), 1000),
                        Math.min(Math.abs(newY - snap.y), 1000)
                    ), 300);
            newX = snap.x;
            newY = snap.y;

            this.directionX = 0;
            this.directionY = 0;
            easing = this.options.bounceEasing;
        }

// INSERT POINT: _end

        if ( newX != this.x || newY != this.y ) {
            // change easing function when scroller goes out of the boundaries
            if ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {
                easing = utils.ease.quadratic;
            }

            this.scrollTo(newX, newY, time, easing);
            return;
        }

        this._execEvent('scrollEnd');
    },

    _resize: function () {
        var that = this;

        clearTimeout(this.resizeTimeout);

        this.resizeTimeout = setTimeout(function () {
            that.refresh();
        }, this.options.resizePolling);
    },

    resetPosition: function (time) {
        var x = this.x,
            y = this.y;

        time = time || 0;

        if ( !this.hasHorizontalScroll || this.x > 0 ) {
            x = 0;
        } else if ( this.x < this.maxScrollX ) {
            x = this.maxScrollX;
        }

        if ( !this.hasVerticalScroll || this.y > 0 ) {
            y = 0;
        } else if ( this.y < this.maxScrollY ) {
            y = this.maxScrollY;
        }

        if ( x == this.x && y == this.y ) {
            return false;
        }

        this.scrollTo(x, y, time, this.options.bounceEasing);

        return true;
    },

    disable: function () {
        this.enabled = false;
    },

    enable: function () {
        this.enabled = true;
    },

    refresh: function () {
        var rf = this.wrapper.offsetHeight;     // Force reflow

        this.wrapperWidth   = this.wrapper.clientWidth;
        this.wrapperHeight  = this.wrapper.clientHeight;

/* REPLACE START: refresh */

        this.scrollerWidth  = this.scroller.offsetWidth;
        this.scrollerHeight = this.scroller.offsetHeight;

        this.maxScrollX     = this.wrapperWidth - this.scrollerWidth;
        this.maxScrollY     = this.wrapperHeight - this.scrollerHeight;

/* REPLACE END: refresh */

        this.hasHorizontalScroll    = this.options.scrollX && this.maxScrollX < 0;
        this.hasVerticalScroll      = this.options.scrollY && this.maxScrollY < 0;

        if ( !this.hasHorizontalScroll ) {
            this.maxScrollX = 0;
            this.scrollerWidth = this.wrapperWidth;
        }

        if ( !this.hasVerticalScroll ) {
            this.maxScrollY = 0;
            this.scrollerHeight = this.wrapperHeight;
        }

        this.endTime = 0;
        this.directionX = 0;
        this.directionY = 0;

        this.wrapperOffset = utils.offset(this.wrapper);

        this._execEvent('refresh');

        this.resetPosition();

// INSERT POINT: _refresh

    },

    on: function (type, fn) {
        if ( !this._events[type] ) {
            this._events[type] = [];
        }

        this._events[type].push(fn);
    },

    off: function (type, fn) {
        if ( !this._events[type] ) {
            return;
        }

        var index = this._events[type].indexOf(fn);

        if ( index > -1 ) {
            this._events[type].splice(index, 1);
        }
    },

    _execEvent: function (type) {
        if ( !this._events[type] ) {
            return;
        }

        var i = 0,
            l = this._events[type].length;

        if ( !l ) {
            return;
        }

        for ( ; i < l; i++ ) {
            this._events[type][i].apply(this, [].slice.call(arguments, 1));
        }
    },

    scrollBy: function (x, y, time, easing) {
        x = this.x + x;
        y = this.y + y;
        time = time || 0;

        this.scrollTo(x, y, time, easing);
    },

    scrollTo: function (x, y, time, easing) {
        easing = easing || utils.ease.circular;

        this.isInTransition = this.options.useTransition && time > 0;
        var transitionType = this.options.useTransition && easing.style;
        if ( !time || transitionType ) {
                if(transitionType) {
                    this._transitionTimingFunction(easing.style);
                    this._transitionTime(time);
                }
            this._translate(x, y);
        } else {
            this._animate(x, y, time, easing.fn);
        }
    },

    scrollToElement: function (el, time, offsetX, offsetY, easing) {
        el = el.nodeType ? el : this.scroller.querySelector(el);

        if ( !el ) {
            return;
        }

        var pos = utils.offset(el);

        pos.left -= this.wrapperOffset.left;
        pos.top  -= this.wrapperOffset.top;

        // if offsetX/Y are true we center the element to the screen
        if ( offsetX === true ) {
            offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);
        }
        if ( offsetY === true ) {
            offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);
        }

        pos.left -= offsetX || 0;
        pos.top  -= offsetY || 0;

        pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;
        pos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;

        time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;

        this.scrollTo(pos.left, pos.top, time, easing);
    },

    _transitionTime: function (time) {
        if (!this.options.useTransition) {
            return;
        }
        time = time || 0;
        var durationProp = utils.style.transitionDuration;
        if(!durationProp) {
            return;
        }

        this.scrollerStyle[durationProp] = time + 'ms';

        if ( !time && utils.isBadAndroid ) {
            this.scrollerStyle[durationProp] = '0.0001ms';
            // remove 0.0001ms
            var self = this;
            rAF(function() {
                if(self.scrollerStyle[durationProp] === '0.0001ms') {
                    self.scrollerStyle[durationProp] = '0s';
                }
            });
        }


        if ( this.indicators ) {
            for ( var i = this.indicators.length; i--; ) {
                this.indicators[i].transitionTime(time);
            }
        }


// INSERT POINT: _transitionTime

    },

    _transitionTimingFunction: function (easing) {
        this.scrollerStyle[utils.style.transitionTimingFunction] = easing;


        if ( this.indicators ) {
            for ( var i = this.indicators.length; i--; ) {
                this.indicators[i].transitionTimingFunction(easing);
            }
        }


// INSERT POINT: _transitionTimingFunction

    },

    _translate: function (x, y) {
        if ( this.options.useTransform ) {

/* REPLACE START: _translate */

            this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;

/* REPLACE END: _translate */

        } else {
            x = Math.round(x);
            y = Math.round(y);
            this.scrollerStyle.left = x + 'px';
            this.scrollerStyle.top = y + 'px';
        }

        this.x = x;
        this.y = y;


    if ( this.indicators ) {
        for ( var i = this.indicators.length; i--; ) {
            this.indicators[i].updatePosition();
        }
    }


// INSERT POINT: _translate

    },

    _initEvents: function (remove) {
        var eventType = remove ? utils.removeEvent : utils.addEvent,
            target = this.options.bindToWrapper ? this.wrapper : window;

        eventType(window, 'orientationchange', this);
        eventType(window, 'resize', this);

        if ( this.options.click ) {
            eventType(this.wrapper, 'click', this, true);
        }

        if ( !this.options.disableMouse ) {
            eventType(this.wrapper, 'mousedown', this);
            eventType(target, 'mousemove', this);
            eventType(target, 'mousecancel', this);
            eventType(target, 'mouseup', this);
        }

        if ( utils.hasPointer && !this.options.disablePointer ) {
            eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);
            eventType(target, utils.prefixPointerEvent('pointermove'), this);
            eventType(target, utils.prefixPointerEvent('pointercancel'), this);
            eventType(target, utils.prefixPointerEvent('pointerup'), this);
        }

        if ( utils.hasTouch && !this.options.disableTouch ) {
            eventType(this.wrapper, 'touchstart', this);
            eventType(target, 'touchmove', this);
            eventType(target, 'touchcancel', this);
            eventType(target, 'touchend', this);
        }

        eventType(this.scroller, 'transitionend', this);
        eventType(this.scroller, 'webkitTransitionEnd', this);
        eventType(this.scroller, 'oTransitionEnd', this);
        eventType(this.scroller, 'MSTransitionEnd', this);
    },

    getComputedPosition: function () {
        var matrix = window.getComputedStyle(this.scroller, null),
            x, y;

        if ( this.options.useTransform ) {
            matrix = matrix[utils.style.transform].split(')')[0].split(', ');
            x = +(matrix[12] || matrix[4]);
            y = +(matrix[13] || matrix[5]);
        } else {
            x = +matrix.left.replace(/[^-\d.]/g, '');
            y = +matrix.top.replace(/[^-\d.]/g, '');
        }

        return { x: x, y: y };
    },
    _initIndicators: function () {
        var interactive = this.options.interactiveScrollbars,
            customStyle = typeof this.options.scrollbars != 'string',
            indicators = [],
            indicator;

        var that = this;

        this.indicators = [];

        if ( this.options.scrollbars ) {
            // Vertical scrollbar
            if ( this.options.scrollY ) {
                indicator = {
                    el: createDefaultScrollbar('v', interactive, this.options.scrollbars),
                    interactive: interactive,
                    defaultScrollbars: true,
                    customStyle: customStyle,
                    resize: this.options.resizeScrollbars,
                    shrink: this.options.shrinkScrollbars,
                    fade: this.options.fadeScrollbars,
                    listenX: false
                };

                this.wrapper.appendChild(indicator.el);
                indicators.push(indicator);
            }

            // Horizontal scrollbar
            if ( this.options.scrollX ) {
                indicator = {
                    el: createDefaultScrollbar('h', interactive, this.options.scrollbars),
                    interactive: interactive,
                    defaultScrollbars: true,
                    customStyle: customStyle,
                    resize: this.options.resizeScrollbars,
                    shrink: this.options.shrinkScrollbars,
                    fade: this.options.fadeScrollbars,
                    listenY: false
                };

                this.wrapper.appendChild(indicator.el);
                indicators.push(indicator);
            }
        }

        if ( this.options.indicators ) {
            // TODO: check concat compatibility
            indicators = indicators.concat(this.options.indicators);
        }

        for ( var i = indicators.length; i--; ) {
            this.indicators.push( new Indicator(this, indicators[i]) );
        }

        // TODO: check if we can use array.map (wide compatibility and performance issues)
        function _indicatorsMap (fn) {
            if (that.indicators) {
                for ( var i = that.indicators.length; i--; ) {
                    fn.call(that.indicators[i]);
                }
            }
        }

        if ( this.options.fadeScrollbars ) {
            this.on('scrollEnd', function () {
                _indicatorsMap(function () {
                    this.fade();
                });
            });

            this.on('scrollCancel', function () {
                _indicatorsMap(function () {
                    this.fade();
                });
            });

            this.on('scrollStart', function () {
                _indicatorsMap(function () {
                    this.fade(1);
                });
            });

            this.on('beforeScrollStart', function () {
                _indicatorsMap(function () {
                    this.fade(1, true);
                });
            });
        }


        this.on('refresh', function () {
            _indicatorsMap(function () {
                this.refresh();
            });
        });

        this.on('destroy', function () {
            _indicatorsMap(function () {
                this.destroy();
            });

            delete this.indicators;
        });
    },

    _initWheel: function () {
        utils.addEvent(this.wrapper, 'wheel', this);
        utils.addEvent(this.wrapper, 'mousewheel', this);
        utils.addEvent(this.wrapper, 'DOMMouseScroll', this);

        this.on('destroy', function () {
            clearTimeout(this.wheelTimeout);
            this.wheelTimeout = null;
            utils.removeEvent(this.wrapper, 'wheel', this);
            utils.removeEvent(this.wrapper, 'mousewheel', this);
            utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);
        });
    },

    _wheel: function (e) {
        if ( !this.enabled ) {
            return;
        }

        var wheelDeltaX, wheelDeltaY,
            newX, newY,
            that = this;

        if ( this.wheelTimeout === undefined ) {
            that._execEvent('scrollStart');
        }

        // Execute the scrollEnd event after 400ms the wheel stopped scrolling
        clearTimeout(this.wheelTimeout);
        this.wheelTimeout = setTimeout(function () {
            if(!that.options.snap) {
                that._execEvent('scrollEnd');
            }
            that.wheelTimeout = undefined;
        }, 400);

        if ( 'deltaX' in e ) {
            if (e.deltaMode === 1) {
                wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;
                wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;
            } else {
                wheelDeltaX = -e.deltaX;
                wheelDeltaY = -e.deltaY;
            }
        } else if ( 'wheelDeltaX' in e ) {
            wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;
            wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;
        } else if ( 'wheelDelta' in e ) {
            wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;
        } else if ( 'detail' in e ) {
            wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;
        } else {
            return;
        }

        wheelDeltaX *= this.options.invertWheelDirection;
        wheelDeltaY *= this.options.invertWheelDirection;

        if ( !this.hasVerticalScroll ) {
            wheelDeltaX = wheelDeltaY;
            wheelDeltaY = 0;
        }

        if ( this.options.snap ) {
            newX = this.currentPage.pageX;
            newY = this.currentPage.pageY;

            if ( wheelDeltaX > 0 ) {
                newX--;
            } else if ( wheelDeltaX < 0 ) {
                newX++;
            }

            if ( wheelDeltaY > 0 ) {
                newY--;
            } else if ( wheelDeltaY < 0 ) {
                newY++;
            }

            this.goToPage(newX, newY);

            return;
        }

        newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);
        newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);

        this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;
        this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;

        if ( newX > 0 ) {
            newX = 0;
        } else if ( newX < this.maxScrollX ) {
            newX = this.maxScrollX;
        }

        if ( newY > 0 ) {
            newY = 0;
        } else if ( newY < this.maxScrollY ) {
            newY = this.maxScrollY;
        }

        this.scrollTo(newX, newY, 0);

// INSERT POINT: _wheel
    },

    _initSnap: function () {
        this.currentPage = {};

        if ( typeof this.options.snap == 'string' ) {
            this.options.snap = this.scroller.querySelectorAll(this.options.snap);
        }

        this.on('refresh', function () {
            var i = 0, l,
                m = 0, n,
                cx, cy,
                x = 0, y,
                stepX = this.options.snapStepX || this.wrapperWidth,
                stepY = this.options.snapStepY || this.wrapperHeight,
                el;

            this.pages = [];

            if ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {
                return;
            }

            if ( this.options.snap === true ) {
                cx = Math.round( stepX / 2 );
                cy = Math.round( stepY / 2 );

                while ( x > -this.scrollerWidth ) {
                    this.pages[i] = [];
                    l = 0;
                    y = 0;

                    while ( y > -this.scrollerHeight ) {
                        this.pages[i][l] = {
                            x: Math.max(x, this.maxScrollX),
                            y: Math.max(y, this.maxScrollY),
                            width: stepX,
                            height: stepY,
                            cx: x - cx,
                            cy: y - cy
                        };

                        y -= stepY;
                        l++;
                    }

                    x -= stepX;
                    i++;
                }
            } else {
                el = this.options.snap;
                l = el.length;
                n = -1;

                for ( ; i < l; i++ ) {
                    if ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {
                        m = 0;
                        n++;
                    }

                    if ( !this.pages[m] ) {
                        this.pages[m] = [];
                    }

                    x = Math.max(-el[i].offsetLeft, this.maxScrollX);
                    y = Math.max(-el[i].offsetTop, this.maxScrollY);
                    cx = x - Math.round(el[i].offsetWidth / 2);
                    cy = y - Math.round(el[i].offsetHeight / 2);

                    this.pages[m][n] = {
                        x: x,
                        y: y,
                        width: el[i].offsetWidth,
                        height: el[i].offsetHeight,
                        cx: cx,
                        cy: cy
                    };

                    if ( x > this.maxScrollX ) {
                        m++;
                    }
                }
            }

            this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);

            // Update snap threshold if needed
            if ( this.options.snapThreshold % 1 === 0 ) {
                this.snapThresholdX = this.options.snapThreshold;
                this.snapThresholdY = this.options.snapThreshold;
            } else {
                this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);
                this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);
            }
        });

        this.on('flick', function () {
            var time = this.options.snapSpeed || Math.max(
                    Math.max(
                        Math.min(Math.abs(this.x - this.startX), 1000),
                        Math.min(Math.abs(this.y - this.startY), 1000)
                    ), 300);

            this.goToPage(
                this.currentPage.pageX + this.directionX,
                this.currentPage.pageY + this.directionY,
                time
            );
        });
    },

    _nearestSnap: function (x, y) {
        if ( !this.pages.length ) {
            return { x: 0, y: 0, pageX: 0, pageY: 0 };
        }

        var i = 0,
            l = this.pages.length,
            m = 0;

        // Check if we exceeded the snap threshold
        if ( Math.abs(x - this.absStartX) < this.snapThresholdX &&
            Math.abs(y - this.absStartY) < this.snapThresholdY ) {
            return this.currentPage;
        }

        if ( x > 0 ) {
            x = 0;
        } else if ( x < this.maxScrollX ) {
            x = this.maxScrollX;
        }

        if ( y > 0 ) {
            y = 0;
        } else if ( y < this.maxScrollY ) {
            y = this.maxScrollY;
        }

        for ( ; i < l; i++ ) {
            if ( x >= this.pages[i][0].cx ) {
                x = this.pages[i][0].x;
                break;
            }
        }

        l = this.pages[i].length;

        for ( ; m < l; m++ ) {
            if ( y >= this.pages[0][m].cy ) {
                y = this.pages[0][m].y;
                break;
            }
        }

        if ( i == this.currentPage.pageX ) {
            i += this.directionX;

            if ( i < 0 ) {
                i = 0;
            } else if ( i >= this.pages.length ) {
                i = this.pages.length - 1;
            }

            x = this.pages[i][0].x;
        }

        if ( m == this.currentPage.pageY ) {
            m += this.directionY;

            if ( m < 0 ) {
                m = 0;
            } else if ( m >= this.pages[0].length ) {
                m = this.pages[0].length - 1;
            }

            y = this.pages[0][m].y;
        }

        return {
            x: x,
            y: y,
            pageX: i,
            pageY: m
        };
    },

    goToPage: function (x, y, time, easing) {
        easing = easing || this.options.bounceEasing;

        if ( x >= this.pages.length ) {
            x = this.pages.length - 1;
        } else if ( x < 0 ) {
            x = 0;
        }

        if ( y >= this.pages[x].length ) {
            y = this.pages[x].length - 1;
        } else if ( y < 0 ) {
            y = 0;
        }

        var posX = this.pages[x][y].x,
            posY = this.pages[x][y].y;

        time = time === undefined ? this.options.snapSpeed || Math.max(
            Math.max(
                Math.min(Math.abs(posX - this.x), 1000),
                Math.min(Math.abs(posY - this.y), 1000)
            ), 300) : time;

        this.currentPage = {
            x: posX,
            y: posY,
            pageX: x,
            pageY: y
        };

        this.scrollTo(posX, posY, time, easing);
    },

    next: function (time, easing) {
        var x = this.currentPage.pageX,
            y = this.currentPage.pageY;

        x++;

        if ( x >= this.pages.length && this.hasVerticalScroll ) {
            x = 0;
            y++;
        }

        this.goToPage(x, y, time, easing);
    },

    prev: function (time, easing) {
        var x = this.currentPage.pageX,
            y = this.currentPage.pageY;

        x--;

        if ( x < 0 && this.hasVerticalScroll ) {
            x = 0;
            y--;
        }

        this.goToPage(x, y, time, easing);
    },

    _initKeys: function (e) {
        // default key bindings
        var keys = {
            pageUp: 33,
            pageDown: 34,
            end: 35,
            home: 36,
            left: 37,
            up: 38,
            right: 39,
            down: 40
        };
        var i;

        // if you give me characters I give you keycode
        if ( typeof this.options.keyBindings == 'object' ) {
            for ( i in this.options.keyBindings ) {
                if ( typeof this.options.keyBindings[i] == 'string' ) {
                    this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);
                }
            }
        } else {
            this.options.keyBindings = {};
        }

        for ( i in keys ) {
            this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];
        }

        utils.addEvent(window, 'keydown', this);

        this.on('destroy', function () {
            utils.removeEvent(window, 'keydown', this);
        });
    },

    _key: function (e) {
        if ( !this.enabled ) {
            return;
        }

        var snap = this.options.snap,   // we are using this alot, better to cache it
            newX = snap ? this.currentPage.pageX : this.x,
            newY = snap ? this.currentPage.pageY : this.y,
            now = utils.getTime(),
            prevTime = this.keyTime || 0,
            acceleration = 0.250,
            pos;

        if ( this.options.useTransition && this.isInTransition ) {
            pos = this.getComputedPosition();

            this._translate(Math.round(pos.x), Math.round(pos.y));
            this.isInTransition = false;
        }

        this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;

        switch ( e.keyCode ) {
            case this.options.keyBindings.pageUp:
                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
                    newX += snap ? 1 : this.wrapperWidth;
                } else {
                    newY += snap ? 1 : this.wrapperHeight;
                }
                break;
            case this.options.keyBindings.pageDown:
                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
                    newX -= snap ? 1 : this.wrapperWidth;
                } else {
                    newY -= snap ? 1 : this.wrapperHeight;
                }
                break;
            case this.options.keyBindings.end:
                newX = snap ? this.pages.length-1 : this.maxScrollX;
                newY = snap ? this.pages[0].length-1 : this.maxScrollY;
                break;
            case this.options.keyBindings.home:
                newX = 0;
                newY = 0;
                break;
            case this.options.keyBindings.left:
                newX += snap ? -1 : 5 + this.keyAcceleration>>0;
                break;
            case this.options.keyBindings.up:
                newY += snap ? 1 : 5 + this.keyAcceleration>>0;
                break;
            case this.options.keyBindings.right:
                newX -= snap ? -1 : 5 + this.keyAcceleration>>0;
                break;
            case this.options.keyBindings.down:
                newY -= snap ? 1 : 5 + this.keyAcceleration>>0;
                break;
            default:
                return;
        }

        if ( snap ) {
            this.goToPage(newX, newY);
            return;
        }

        if ( newX > 0 ) {
            newX = 0;
            this.keyAcceleration = 0;
        } else if ( newX < this.maxScrollX ) {
            newX = this.maxScrollX;
            this.keyAcceleration = 0;
        }

        if ( newY > 0 ) {
            newY = 0;
            this.keyAcceleration = 0;
        } else if ( newY < this.maxScrollY ) {
            newY = this.maxScrollY;
            this.keyAcceleration = 0;
        }

        this.scrollTo(newX, newY, 0);

        this.keyTime = now;
    },

    _animate: function (destX, destY, duration, easingFn) {
        var that = this,
            startX = this.x,
            startY = this.y,
            startTime = utils.getTime(),
            destTime = startTime + duration;

        function step () {
            var now = utils.getTime(),
                newX, newY,
                easing;

            if ( now >= destTime ) {
                that.isAnimating = false;
                that._translate(destX, destY);

                if ( !that.resetPosition(that.options.bounceTime) ) {
                    that._execEvent('scrollEnd');
                }

                return;
            }

            now = ( now - startTime ) / duration;
            easing = easingFn(now);
            newX = ( destX - startX ) * easing + startX;
            newY = ( destY - startY ) * easing + startY;
            that._translate(newX, newY);

            if ( that.isAnimating ) {
                rAF(step);
            }
        }

        this.isAnimating = true;
        step();
    },
    handleEvent: function (e) {
        switch ( e.type ) {
            case 'touchstart':
            case 'pointerdown':
            case 'MSPointerDown':
            case 'mousedown':
                this._start(e);
                break;
            case 'touchmove':
            case 'pointermove':
            case 'MSPointerMove':
            case 'mousemove':
                this._move(e);
                break;
            case 'touchend':
            case 'pointerup':
            case 'MSPointerUp':
            case 'mouseup':
            case 'touchcancel':
            case 'pointercancel':
            case 'MSPointerCancel':
            case 'mousecancel':
                this._end(e);
                break;
            case 'orientationchange':
            case 'resize':
                this._resize();
                break;
            case 'transitionend':
            case 'webkitTransitionEnd':
            case 'oTransitionEnd':
            case 'MSTransitionEnd':
                this._transitionEnd(e);
                break;
            case 'wheel':
            case 'DOMMouseScroll':
            case 'mousewheel':
                this._wheel(e);
                break;
            case 'keydown':
                this._key(e);
                break;
            case 'click':
                if ( this.enabled && !e._constructed ) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                break;
        }
    }
};
function createDefaultScrollbar (direction, interactive, type) {
    var scrollbar = document.createElement('div'),
        indicator = document.createElement('div');

    if ( type === true ) {
        scrollbar.style.cssText = 'position:absolute;z-index:9999';
        indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';
    }

    indicator.className = 'iScrollIndicator';

    if ( direction == 'h' ) {
        if ( type === true ) {
            scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';
            indicator.style.height = '100%';
        }
        scrollbar.className = 'iScrollHorizontalScrollbar';
    } else {
        if ( type === true ) {
            scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';
            indicator.style.width = '100%';
        }
        scrollbar.className = 'iScrollVerticalScrollbar';
    }

    scrollbar.style.cssText += ';overflow:hidden';

    if ( !interactive ) {
        scrollbar.style.pointerEvents = 'none';
    }

    scrollbar.appendChild(indicator);

    return scrollbar;
}

function Indicator (scroller, options) {
    this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;
    this.wrapperStyle = this.wrapper.style;
    this.indicator = this.wrapper.children[0];
    this.indicatorStyle = this.indicator.style;
    this.scroller = scroller;

    this.options = {
        listenX: true,
        listenY: true,
        interactive: false,
        resize: true,
        defaultScrollbars: false,
        shrink: false,
        fade: false,
        speedRatioX: 0,
        speedRatioY: 0
    };

    for ( var i in options ) {
        this.options[i] = options[i];
    }

    this.sizeRatioX = 1;
    this.sizeRatioY = 1;
    this.maxPosX = 0;
    this.maxPosY = 0;

    if ( this.options.interactive ) {
        if ( !this.options.disableTouch ) {
            utils.addEvent(this.indicator, 'touchstart', this);
            utils.addEvent(window, 'touchend', this);
        }
        if ( !this.options.disablePointer ) {
            utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
            utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);
        }
        if ( !this.options.disableMouse ) {
            utils.addEvent(this.indicator, 'mousedown', this);
            utils.addEvent(window, 'mouseup', this);
        }
    }

    if ( this.options.fade ) {
        this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;
        var durationProp = utils.style.transitionDuration;
        if(!durationProp) {
            return;
        }
        this.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms';
        // remove 0.0001ms
        var self = this;
        if(utils.isBadAndroid) {
            rAF(function() {
                if(self.wrapperStyle[durationProp] === '0.0001ms') {
                    self.wrapperStyle[durationProp] = '0s';
                }
            });
        }
        this.wrapperStyle.opacity = '0';
    }
}

Indicator.prototype = {
    handleEvent: function (e) {
        switch ( e.type ) {
            case 'touchstart':
            case 'pointerdown':
            case 'MSPointerDown':
            case 'mousedown':
                this._start(e);
                break;
            case 'touchmove':
            case 'pointermove':
            case 'MSPointerMove':
            case 'mousemove':
                this._move(e);
                break;
            case 'touchend':
            case 'pointerup':
            case 'MSPointerUp':
            case 'mouseup':
            case 'touchcancel':
            case 'pointercancel':
            case 'MSPointerCancel':
            case 'mousecancel':
                this._end(e);
                break;
        }
    },

    destroy: function () {
        if ( this.options.fadeScrollbars ) {
            clearTimeout(this.fadeTimeout);
            this.fadeTimeout = null;
        }
        if ( this.options.interactive ) {
            utils.removeEvent(this.indicator, 'touchstart', this);
            utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
            utils.removeEvent(this.indicator, 'mousedown', this);

            utils.removeEvent(window, 'touchmove', this);
            utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
            utils.removeEvent(window, 'mousemove', this);

            utils.removeEvent(window, 'touchend', this);
            utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);
            utils.removeEvent(window, 'mouseup', this);
        }

        if ( this.options.defaultScrollbars ) {
            this.wrapper.parentNode.removeChild(this.wrapper);
        }
    },

    _start: function (e) {
        var point = e.touches ? e.touches[0] : e;

        e.preventDefault();
        e.stopPropagation();

        this.transitionTime();

        this.initiated = true;
        this.moved = false;
        this.lastPointX = point.pageX;
        this.lastPointY = point.pageY;

        this.startTime  = utils.getTime();

        if ( !this.options.disableTouch ) {
            utils.addEvent(window, 'touchmove', this);
        }
        if ( !this.options.disablePointer ) {
            utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);
        }
        if ( !this.options.disableMouse ) {
            utils.addEvent(window, 'mousemove', this);
        }

        this.scroller._execEvent('beforeScrollStart');
    },

    _move: function (e) {
        var point = e.touches ? e.touches[0] : e,
            deltaX, deltaY,
            newX, newY,
            timestamp = utils.getTime();

        if ( !this.moved ) {
            this.scroller._execEvent('scrollStart');
        }

        this.moved = true;

        deltaX = point.pageX - this.lastPointX;
        this.lastPointX = point.pageX;

        deltaY = point.pageY - this.lastPointY;
        this.lastPointY = point.pageY;

        newX = this.x + deltaX;
        newY = this.y + deltaY;

        this._pos(newX, newY);

// INSERT POINT: indicator._move

        e.preventDefault();
        e.stopPropagation();
    },

    _end: function (e) {
        if ( !this.initiated ) {
            return;
        }

        this.initiated = false;

        e.preventDefault();
        e.stopPropagation();

        utils.removeEvent(window, 'touchmove', this);
        utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
        utils.removeEvent(window, 'mousemove', this);

        if ( this.scroller.options.snap ) {
            var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);

            var time = this.options.snapSpeed || Math.max(
                    Math.max(
                        Math.min(Math.abs(this.scroller.x - snap.x), 1000),
                        Math.min(Math.abs(this.scroller.y - snap.y), 1000)
                    ), 300);

            if ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {
                this.scroller.directionX = 0;
                this.scroller.directionY = 0;
                this.scroller.currentPage = snap;
                this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);
            }
        }

        if ( this.moved ) {
            this.scroller._execEvent('scrollEnd');
        }
    },

    transitionTime: function (time) {
        time = time || 0;
        var durationProp = utils.style.transitionDuration;
        if(!durationProp) {
            return;
        }

        this.indicatorStyle[durationProp] = time + 'ms';

        if ( !time && utils.isBadAndroid ) {
            this.indicatorStyle[durationProp] = '0.0001ms';
            // remove 0.0001ms
            var self = this;
            rAF(function() {
                if(self.indicatorStyle[durationProp] === '0.0001ms') {
                    self.indicatorStyle[durationProp] = '0s';
                }
            });
        }
    },

    transitionTimingFunction: function (easing) {
        this.indicatorStyle[utils.style.transitionTimingFunction] = easing;
    },

    refresh: function () {
        this.transitionTime();

        if ( this.options.listenX && !this.options.listenY ) {
            this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';
        } else if ( this.options.listenY && !this.options.listenX ) {
            this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';
        } else {
            this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';
        }

        if ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {
            utils.addClass(this.wrapper, 'iScrollBothScrollbars');
            utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');

            if ( this.options.defaultScrollbars && this.options.customStyle ) {
                if ( this.options.listenX ) {
                    this.wrapper.style.right = '8px';
                } else {
                    this.wrapper.style.bottom = '8px';
                }
            }
        } else {
            utils.removeClass(this.wrapper, 'iScrollBothScrollbars');
            utils.addClass(this.wrapper, 'iScrollLoneScrollbar');

            if ( this.options.defaultScrollbars && this.options.customStyle ) {
                if ( this.options.listenX ) {
                    this.wrapper.style.right = '2px';
                } else {
                    this.wrapper.style.bottom = '2px';
                }
            }
        }

        var r = this.wrapper.offsetHeight;  // force refresh

        if ( this.options.listenX ) {
            this.wrapperWidth = this.wrapper.clientWidth;
            if ( this.options.resize ) {
                this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);
                this.indicatorStyle.width = this.indicatorWidth + 'px';
            } else {
                this.indicatorWidth = this.indicator.clientWidth;
            }

            this.maxPosX = this.wrapperWidth - this.indicatorWidth;

            if ( this.options.shrink == 'clip' ) {
                this.minBoundaryX = -this.indicatorWidth + 8;
                this.maxBoundaryX = this.wrapperWidth - 8;
            } else {
                this.minBoundaryX = 0;
                this.maxBoundaryX = this.maxPosX;
            }

            this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));
        }

        if ( this.options.listenY ) {
            this.wrapperHeight = this.wrapper.clientHeight;
            if ( this.options.resize ) {
                this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);
                this.indicatorStyle.height = this.indicatorHeight + 'px';
            } else {
                this.indicatorHeight = this.indicator.clientHeight;
            }

            this.maxPosY = this.wrapperHeight - this.indicatorHeight;

            if ( this.options.shrink == 'clip' ) {
                this.minBoundaryY = -this.indicatorHeight + 8;
                this.maxBoundaryY = this.wrapperHeight - 8;
            } else {
                this.minBoundaryY = 0;
                this.maxBoundaryY = this.maxPosY;
            }

            this.maxPosY = this.wrapperHeight - this.indicatorHeight;
            this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));
        }

        this.updatePosition();
    },

    updatePosition: function () {
        var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
            y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;

        if ( !this.options.ignoreBoundaries ) {
            if ( x < this.minBoundaryX ) {
                if ( this.options.shrink == 'scale' ) {
                    this.width = Math.max(this.indicatorWidth + x, 8);
                    this.indicatorStyle.width = this.width + 'px';
                }
                x = this.minBoundaryX;
            } else if ( x > this.maxBoundaryX ) {
                if ( this.options.shrink == 'scale' ) {
                    this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);
                    this.indicatorStyle.width = this.width + 'px';
                    x = this.maxPosX + this.indicatorWidth - this.width;
                } else {
                    x = this.maxBoundaryX;
                }
            } else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {
                this.width = this.indicatorWidth;
                this.indicatorStyle.width = this.width + 'px';
            }

            if ( y < this.minBoundaryY ) {
                if ( this.options.shrink == 'scale' ) {
                    this.height = Math.max(this.indicatorHeight + y * 3, 8);
                    this.indicatorStyle.height = this.height + 'px';
                }
                y = this.minBoundaryY;
            } else if ( y > this.maxBoundaryY ) {
                if ( this.options.shrink == 'scale' ) {
                    this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);
                    this.indicatorStyle.height = this.height + 'px';
                    y = this.maxPosY + this.indicatorHeight - this.height;
                } else {
                    y = this.maxBoundaryY;
                }
            } else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {
                this.height = this.indicatorHeight;
                this.indicatorStyle.height = this.height + 'px';
            }
        }

        this.x = x;
        this.y = y;

        if ( this.scroller.options.useTransform ) {
            this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;
        } else {
            this.indicatorStyle.left = x + 'px';
            this.indicatorStyle.top = y + 'px';
        }
    },

    _pos: function (x, y) {
        if ( x < 0 ) {
            x = 0;
        } else if ( x > this.maxPosX ) {
            x = this.maxPosX;
        }

        if ( y < 0 ) {
            y = 0;
        } else if ( y > this.maxPosY ) {
            y = this.maxPosY;
        }

        x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;
        y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;

        this.scroller.scrollTo(x, y);
    },

    fade: function (val, hold) {
        if ( hold && !this.visible ) {
            return;
        }

        clearTimeout(this.fadeTimeout);
        this.fadeTimeout = null;

        var time = val ? 250 : 500,
            delay = val ? 0 : 300;

        val = val ? '1' : '0';

        this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';

        this.fadeTimeout = setTimeout((function (val) {
            this.wrapperStyle.opacity = val;
            this.visible = +val;
        }).bind(this, val), delay);
    }
};

IScroll.utils = utils;

if ( typeof module != 'undefined' && module.exports ) {
    module.exports = IScroll;
} else if ( typeof define == 'function' && define.amd ) {
        define( function () { return IScroll; } );
} else {
    window.IScroll = IScroll;
}

})(window, document, Math);


/*!
* Scrolloverflow 2.0.0 module for fullPage.js >= 3
* https://github.com/alvarotrigo/fullPage.js
* @license MIT licensed
*
* Copyright (C) 2015 alvarotrigo.com - A project by Alvaro Trigo
*/
(function (window, document) {
    window.fp_scrolloverflow = (function() {

        // keeping central set of classnames and selectors
        var SCROLLABLE =            'fp-scrollable';
        var SCROLLABLE_SEL =        '.' + SCROLLABLE;

        var ACTIVE =                'active';
        var ACTIVE_SEL =            '.' + ACTIVE;

        var SECTION =               'fp-section';
        var SECTION_SEL =           '.' + SECTION;
        var SECTION_ACTIVE_SEL =    SECTION_SEL + ACTIVE_SEL;

        var SLIDE =                 'fp-slide';
        var SLIDE_SEL =             '.' + SLIDE;
        var SLIDE_ACTIVE_SEL =      SLIDE_SEL + ACTIVE_SEL;

        var SLIDES_WRAPPER =        'fp-slides';
        var SLIDES_WRAPPER_SEL =    '.' + SLIDES_WRAPPER;

        var TABLE_CELL =            'fp-tableCell';
        var TABLE_CELL_SEL =        '.' + TABLE_CELL;

        var RESPONSIVE =            'fp-responsive';
        var AUTO_HEIGHT_RESPONSIVE= 'fp-auto-height-responsive';

        /*
        * Turns iScroll `mousewheel` option off dynamically
        * https://github.com/cubiq/iscroll/issues/1036
        */
        IScroll.prototype.wheelOn = function () {
            this.wrapper.addEventListener('wheel', this);
            this.wrapper.addEventListener('mousewheel', this);
            this.wrapper.addEventListener('DOMMouseScroll', this);
        };

        /*
        * Turns iScroll `mousewheel` option on dynamically
        * https://github.com/cubiq/iscroll/issues/1036
        */
        IScroll.prototype.wheelOff = function () {
            this.wrapper.removeEventListener('wheel', this);
            this.wrapper.removeEventListener('mousewheel', this);
            this.wrapper.removeEventListener('DOMMouseScroll', this);
        };

        /**
        * Returns an integer representing the padding dimensions in px.
        */
        function getPaddings(element){
            var section = fp_utils.closest(element, SECTION_SEL);
            if(section != null){
                return parseInt(getComputedStyle(section)['padding-bottom']) + parseInt(getComputedStyle(section)['padding-top']);
            }
            return 0;
        }

        function scrollBarHandler(){
            var self = this;
            self.options = null;

            self.init = function(options, iscrollOptions){
                self.options = options;
                self.iscrollOptions = iscrollOptions;

                if(document.readyState === 'complete'){
                    createScrollBarForAll();
                    fullpage_api.shared.afterRenderActions();
                }
                //after DOM and images are loaded
                window.addEventListener('load', function(){
                    createScrollBarForAll();
                    fullpage_api.shared.afterRenderActions();
                });

                return self;
            };

            /**
            * Creates the scrollbar for the sections and slides in the site
            */
            function createScrollBarForAll(){
                if(fp_utils.hasClass(document.body, RESPONSIVE)){
                    removeResponsiveScrollOverflows();
                }
                else{
                    forEachSectionAndSlide(createScrollBar);
                }
            }

            /**
            * Checks if the element needs scrollbar and if the user wants to apply it.
            * If so it creates it.
            *
            * @param {Object} element   jQuery object of the section or slide
            */
            function createScrollBar(element){
                //User doesn't want scrollbar here? Sayonara baby!
                if(fp_utils.hasClass(element, 'fp-noscroll')) return;

                //necessary to make `scrollHeight` work under Opera 12
                fp_utils.css(element, {'overflow': 'hidden'});

                var scrollOverflowHandler = self.options.scrollOverflowHandler;
                var wrap = scrollOverflowHandler.wrapContent();
                var section = fp_utils.closest(element, SECTION_SEL); //in case element is a slide
                var scrollable = scrollOverflowHandler.scrollable(element);
                var contentHeight;
                var paddings = getPaddings(section);

                //if there was scroll, the contentHeight will be the one in the scrollable section
                if(scrollable != null){
                    contentHeight = scrollOverflowHandler.scrollHeight(element);
                }
                else{
                    contentHeight = element.scrollHeight - paddings;
                    if(self.options.verticalCentered){
                        contentHeight = $(TABLE_CELL_SEL, element)[0].scrollHeight - paddings;
                    }
                }

                var scrollHeight = fp_utils.getWindowHeight() - paddings;

                //needs scroll?
                if ( contentHeight > scrollHeight) {
                    //did we already have an scrollbar ? Updating it
                    if(scrollable != null){
                        scrollOverflowHandler.update(element, scrollHeight);
                    }
                     //creating the scrolling
                    else{
                        if(self.options.verticalCentered){
                            fp_utils.wrapInner($(TABLE_CELL_SEL, element)[0], wrap.scroller);
                            fp_utils.wrapInner($(TABLE_CELL_SEL, element)[0], wrap.scrollable);
                        }else{
                            fp_utils.wrapInner(element, wrap.scroller);
                            fp_utils.wrapInner(element, wrap.scrollable);
                        }
                        scrollOverflowHandler.create(element, scrollHeight, self.iscrollOptions);
                    }
                }

                //removing the scrolling when it is not necessary anymore
                else{
                    scrollOverflowHandler.remove(element);
                }

                //undo
                fp_utils.css(element, {'overflow': ''});
            }

            /**
            * Applies a callback function to each section in the site
            * or the slides within them
            */
            function forEachSectionAndSlide(callback){
                $(SECTION_SEL).forEach(function(section){
                    var slides = $(SLIDE_SEL, section);

                    if(slides.length){
                        slides.forEach(function(slide){
                            callback(slide);
                        });
                    }else{
                        callback(section);
                    }
                });
            }

            /**
            * Removes scrollOverflow for sections using the class `fp-auto-height-responsive`
            */
            function removeResponsiveScrollOverflows(){
                var scrollOverflowHandler = self.options.scrollOverflowHandler;
                forEachSectionAndSlide(function(element){
                    if(fp_utils.hasClass( fp_utils.closest(element, SECTION_SEL), AUTO_HEIGHT_RESPONSIVE)){
                        scrollOverflowHandler.remove(element);
                    }
                });
            }

            //public functions
            self.createScrollBarForAll = createScrollBarForAll;
        }

        /**
         * An object to handle overflow scrolling.
         * This uses jquery.slimScroll to accomplish overflow scrolling.
         * It is possible to pass in an alternate scrollOverflowHandler
         * to the fullpage.js option that implements the same functions
         * as this handler.
         *
         * @type {Object}
         */
        var $ = null;
        var iscrollHandler = {
            refreshId: null,
            iScrollInstances: [],

            // Default options for iScroll.js used when using scrollOverflow
            iscrollOptions: {
                scrollbars: true,
                mouseWheel: true,
                hideScrollbars: false,
                fadeScrollbars: false,
                disableMouse: true,
                interactiveScrollbars: true
            },

            init: function(options){
                $ = fp_utils.$;

                var isTouch = (('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0) || (navigator.maxTouchPoints));

                //fixing bug in iScroll with links: https://github.com/cubiq/iscroll/issues/783
                iscrollHandler.iscrollOptions.click = isTouch; // see #2035

                //extending iScroll options with the user custom ones
                iscrollHandler.iscrollOptions = fp_utils.deepExtend(iscrollHandler.iscrollOptions, options.scrollOverflowOptions);

                return new scrollBarHandler().init(options, iscrollHandler.iscrollOptions);
            },

            // Enables or disables the mouse wheel for the active section or all slides in it
            toggleWheel: function(value){
                var scrollable = $(SCROLLABLE_SEL, $(SECTION_ACTIVE_SEL)[0]);
                scrollable.forEach(function(item){
                    var iScrollInstance = item.fp_iscrollInstance;
                    if(iScrollInstance != null){
                        if(value){
                            iScrollInstance.wheelOn();
                        }
                        else{
                            iScrollInstance.wheelOff();
                        }
                    }
                });
            },

            /**
            * Turns off iScroll for the destination section.
            * When scrolling very fast on some trackpads (and Apple laptops) the inertial scrolling would
            * scroll the destination section/slide before the sections animations ends.
            */
            onLeave: function(){
                iscrollHandler.toggleWheel(false);
            },

            // Turns off iScroll for the leaving section
            beforeLeave: function(){
                iscrollHandler.onLeave()
            },

            // Turns on iScroll on section load
            afterLoad: function(){
                iscrollHandler.toggleWheel(true);
            },

            /**
             * Called when overflow scrolling is needed for a section.
             *
             * @param  {Object} element      jQuery object containing current section
             * @param  {Number} scrollHeight Current window height in pixels
             */
            create: function(element, scrollHeight, iscrollOptions) {
                var scrollable = $(SCROLLABLE_SEL, element);

                scrollable.forEach(function(item) {
                    fp_utils.css(item, {'height': scrollHeight + 'px'});

                    var iScrollInstance = item.fp_iscrollInstance;
                    if (iScrollInstance != null) {
                        iscrollHandler.iScrollInstances.forEach(function(instance){
                            instance.destroy();
                        });
                    }

                    iScrollInstance = new IScroll(item, iscrollOptions);
                    iscrollHandler.iScrollInstances.push(iScrollInstance);

                    if(!fp_utils.hasClass(fp_utils.closest(element, SECTION_SEL), ACTIVE)){
                        //off by default until the section gets active
                        iScrollInstance.wheelOff();
                    }

                    item.fp_iscrollInstance = iScrollInstance;
                });
            },

            /**
             * Return a boolean depending on whether the scrollable element is a
             * the end or at the start of the scrolling depending on the given type.
             *
             * @param  {String}  type       Either 'top' or 'bottom'
             * @param  {Object}  scrollable jQuery object for the scrollable element
             * @return {Boolean}
             */
            isScrolled: function(type, scrollable) {
                var scroller = scrollable.fp_iscrollInstance;

                //no scroller?
                if (!scroller) {
                    return true;
                }

                if (type === 'top'){
                    return scroller.y >= 0 && !fp_utils.getScrollTop(scrollable);
                } else if (type === 'bottom') {
                    return (0 - scroller.y) + fp_utils.getScrollTop(scrollable) + 1 + scrollable.offsetHeight >= scrollable.scrollHeight;
                }
            },

            /**
             * Returns the scrollable element for the given section.
             * If there are landscape slides, will only return a scrollable element
             * if it is in the active slide.
             *
             * @param  {Object}  activeSection jQuery object containing current section
             * @return {Boolean}
             */
            scrollable: function(activeSection){
                // if there are landscape slides, we check if the scrolling bar is in the current one or not
                if ($(SLIDES_WRAPPER_SEL, activeSection).length) {
                    return $(SCROLLABLE_SEL, $(SLIDE_ACTIVE_SEL, activeSection)[0] )[0];
                }
                return $(SCROLLABLE_SEL, activeSection)[0];
            },

            /**
             * Returns the scroll height of the wrapped content.
             * If this is larger than the window height minus section padding,
             * overflow scrolling is needed.
             *
             * @param  {Object} element jQuery object containing current section
             * @return {Number}
             */
            scrollHeight: function(element) {
                return $('.fp-scroller', $(SCROLLABLE_SEL, element)[0] )[0].scrollHeight;
            },

            /**
             * Called when overflow scrolling is no longer needed for a section.
             *
             * @param  {Object} element      jQuery object containing current section
             */
            remove: function(element) {
                if(element == null) return;

                var scrollable = $(SCROLLABLE_SEL, element)[0];
                if (scrollable != null) {
                    var iScrollInstance = scrollable.fp_iscrollInstance;
                    if(iScrollInstance != null){
                        iScrollInstance.destroy();
                    }

                    scrollable.fp_iscrollInstance = null;

                    //unwrapping...
                    $('.fp-scroller', element)[0].outerHTML = $('.fp-scroller', element)[0].innerHTML;
                    $(SCROLLABLE_SEL, element)[0].outerHTML = $(SCROLLABLE_SEL, element)[0].innerHTML;
                }
            },

            /**
             * Called when overflow scrolling has already been setup but the
             * window height has potentially changed.
             *
             * @param  {Object} element      jQuery object containing current section
             * @param  {Number} scrollHeight Current window height in pixels
             */
            update: function(element, scrollHeight) {
                //using a timeout in order to execute the refresh function only once when `update` is called multiple times in a
                //short period of time.
                //it also comes on handy because iScroll requires the use of timeout when using `refresh`.
                clearTimeout(iscrollHandler.refreshId);
                iscrollHandler.refreshId = setTimeout(function(){
                    iscrollHandler.iScrollInstances.forEach(function(instance){
                        instance.refresh();

                        //ugly hack that we are forced to use due to the timeout delay
                        //otherwise done on the fullpage.js reBuild function
                        fullpage_api.silentMoveTo(fp_utils.index($(SECTION_ACTIVE_SEL)[0]) + 1);
                    });
                }, 150);

                //updating the wrappers height
                fp_utils.css($(SCROLLABLE_SEL, element)[0], {'height': scrollHeight + 'px'});
                fp_utils.css($(SCROLLABLE_SEL, element)[0].parentNode, {'height': scrollHeight + getPaddings(element) + 'px'});
            },

            /**
             * Called to get any additional elements needed to wrap the section
             * content in order to facilitate overflow scrolling.
             *
             * @return {String|Object} Can be a string containing HTML,
             *                         a DOM element, or jQuery object.
             */
            wrapContent: function() {
                var scrollable = document.createElement('div');
                scrollable.className = SCROLLABLE;

                var scroller = document.createElement('div');
                scroller.className = 'fp-scroller';

                return {
                    scrollable: scrollable,
                    scroller: scroller
                };
            }
        };

        return {
            iscrollHandler: iscrollHandler
        };
    })();
})(window, document);
$(function (){

    //   -   
    $('body').on("change keyup input click",'.js-password-acc',password_acc);
    //  
    $('body').on("change keyup input click",'.js-type-soft-view',view_type);

    //   

    $('body').on("change keyup input click",'.price_xvg_,.count_xvg_,.delivery_xvg_',itogprice_xvg);


    $('body').on("change keyup input click",'.js-del-items-basket-view',del_acc_material);


    $('body').on("change keyup input click",'.js-add-acc-save',save_acc);


    $('body').on("change keyup input click",'.js-edit-acc-more',edit_more_acc);
    $('body').on("change keyup input click",'.js-dell-acc-more',dell_more_acc);

    $('body').on("change keyup input click",'.tabs_006U',{key: "006U"},tabs_acc);


    $('body').on("change keyup input click",'.js-reject-acc',RejectFoA);
    $('body').on("change keyup input click",'.js-forward-acc',ForwardFoA);

    $('body').on("change keyup input click",'.js-sign-a1',SingFoA);

    $('body').on("change keyup input click",'.js-sign-end',SingFoEnd);

    $('body').on("change keyup input click",'.js-sign-pay',SingFoPay);

    $('body').on("change",'.js-id-kto-ajax',kto_fns);

    $(".drop-radio").find("li").bind('click', dropliradio);

    //$('#acc_3').bind('change', changeacc_3);
    //$('#acc_2').bind('change', changeacc_2(2));
    //$('#acc_4').bind('change', changeacc_2(4));
    $('body').on("change",'#acc_3',{key: "3"},changeacc);
    $('body').on("change",'#acc_2',{key: "2"},changeacc);
    $('body').on("change",'#acc_7',{key: "7"},changeacc);
    $('body').on("change",'#acc_8',{key: "8"},changeacc);
    $('body').on("change",'#acc_9',{key: "9"},changeacc);
    $('body').on("change",'#acc_4',{key: "4"},changeacc);
});



function changeacc(event) {
    var iu=$('.content_block').attr('iu');

    $.cookie("acc_"+event.data.key+iu, null, {path:'/',domain: window.is_session,secure: false});
    CookieList("acc_"+event.data.key+iu,$(this).val(),'add');

    $('.js-reload-top').removeClass('active-r');
    $('.js-reload-top').addClass('active-r');


    if(event.data.key==7)
    {
        //  
        //  ,
        var data = 'url='+window.location.href+'&id='+$(this).val();
        //alert(data);
        AjaxClient('acc','select_town','GET',data,'AfterSelectTown',0,0);
        $('.js-kvartal').remove();
        $('.js-object-c').remove();

    }
    if(event.data.key==8)
    {
        //  
        //  
        var data = 'url='+window.location.href+'&id='+$(this).val();
        //alert(data);
        AjaxClient('acc','select_kvartal','GET',data,'AfterSelectKvartal',0,0);
        $('.js-object-c').remove();


    }

};



function AfterSelectTown(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
        return;
    }

    if ( data.status=='ok' ) {

        $('.js-city').after(data.echo);
        $(".slct").unbind('click.sys');
        $(".slct").bind('click.sys', slctclick);
        $(".drop").find("li").unbind('click');
        $(".drop").find("li").bind('click', dropli);
        Zindex();
        $(".drop-radio").find("li").unbind('click');
        $(".drop-radio").find("li").bind('click', dropliradio);
    }

}

function AfterSelectKvartal(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
        return;
    }

    if ( data.status=='ok' ) {

        $('.js-kvartal').after(data.echo);
        $(".slct").unbind('click.sys');
        $(".slct").bind('click.sys', slctclick);
        $(".drop").find("li").unbind('click');
        $(".drop").find("li").bind('click', dropli);
        Zindex();
        $(".drop-radio").find("li").unbind('click');
        $(".drop-radio").find("li").bind('click', dropliradio);
    }

}

function dropliradio() {

    var active_old=$(this).parent().parent().find(".slct").attr("data_src");
    var active_new=$(this).find("a").attr("rel");

    var f=$(this).find("a").text();
    var e=$(this).find("a").attr("rel");
    var drop_object=$(this).parents('.drop-radio');

    if ($(this).find('i').is(".active_task_cb"))
    {
        $(this).find('i').removeClass("active_task_cb");
    } else
    {
        $(this).find('i').addClass("active_task_cb");
    }


    //    
    var select_li='';
    var select_li_text='';
    drop_object.find('li').each(function(i,elem) {
        if ($(this).find('i').is(".active_task_cb")) {  if(select_li==''){select_li=$(this).find("a").attr("rel");
            select_li_text=$(this).find("a").text();
        } else {select_li=select_li+','+$(this).find("a").attr("rel");
            select_li_text=select_li_text+', '+$(this).find("a").text();
        }}
    });


    if(drop_object.is('.js-no-nul-select'))
    {
        //             
        if(select_li=='')
        {
            drop_object.find('li').each(function(i,elem) {
                if(select_li==''){select_li=$(this).find("a").attr("rel");
                    select_li_text=$(this).find("a").text();
                } else {select_li=select_li+','+$(this).find("a").attr("rel");
                    select_li_text=select_li_text+', '+$(this).find("a").text();
                }
            });
            drop_object.find('i').addClass("active_task_cb");
        }


    }

    /*
                if(e!=0)
                {
                    $(this).parents('.left_drop').find('label').addClass('active_label');
                } else
                    {
$(this).parents('.left_drop').find('label').removeClass('active_label');
                    }
    */
    /*
  $(this).parent().find("li").removeClass("sel_active");
  $(this).addClass("sel_active");
*/


    // $(this).parent().parent().find(".slct").removeClass("active").html(f);
    $(this).parent().parent().find(".slct").empty().append(select_li_text);
    $(this).parent().parent().find(".slct").attr("data_src",select_li);

    //$(this).parent().parent().find(".drop").hide();
    // $(this).parent().parent().find(".drop").css("transform", "scaleY(0)");

    $(this).parent().parent().find("input").val(select_li).change();



}



function kto_fns()
{
    //alert("!");
    var kto=$(this).val().slice(1);
    var new_s=$(this).val()[0];
    if(new_s=='n')
    {
        //    

        //    
        $('.js-ajax-new-profi[id=1]').trigger('click');

        $('.js-options-supply-1').hide();

        $('.js-options-supply-1').after('<div class="b_loading_small js-metka" style="position:relative; margin-bottom: 20px; "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');

        var data = 'url='+window.location.href+'&inn='+kto;
        //alert(data);
        AjaxClient('acc','new_contractor','GET',data,'Afterkto_fns',0,0);

    }
}

function Afterkto_fns(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
        return;
    }

    if ( data.status=='ok' ) {

        $('.js-options-supply-1').find('[name=name_contractor]').val(data.name).trigger('click');
        $('.js-options-supply-1').find('[name=address_contractor]').val(data.adress).trigger('click');
        $('.js-options-supply-1').find('[name=dir_contractor]').val(data.dir).trigger('click');
        $('.js-options-supply-1').find('[name=inn_contractor]').val(data.inn).trigger('click');
        $('.js-options-supply-1').find('[name=ogrn_contractor]').val(data.ogrn).trigger('click');

        $('.js-options-supply-1').find('[name=name_small_contractor]').val(data.name_small);
        $('.js-options-supply-1').find('[name=status_contractor]').val(data.status_f);

        $('.js-metka').remove();
        $('.js-options-supply-1').slideDown("slow");
        return;
    }
    alert_message('error','  .   .');
}


function AfterSignAcc(data,update)
{

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        var iu=$('.content_block').attr('iu');

        var cookie_flag_current = $.cookie('current_supply_'+iu);

        //     
        if((cookie_flag_current!=null)&&(cookie_flag_current==update)) {
            $.cookie("current_supply_" + iu, null, {
                path: '/',
                domain: window.is_session,
                secure: false,
                samesite: 'lax'
            });
            $.cookie("basket_score_" + iu, null, {
                path: '/',
                domain: window.is_session,
                secure: false,
                samesite: 'lax'
            });
            $.cookie("basket_supply_" + iu, null, {
                path: '/',
                domain: window.is_session,
                secure: false,
                samesite: 'lax'
            });

            $('.js-basket-supply-acc').hide();
            $('.js-basket-supply-acc').removeClass('more-active-s');
            $('.js-basket-supply-acc').removeClass('more-active-s1');
            $('.js-basket-supply-acc .more_supply1').find('i').empty();

            //   
            $('.checher_supply').removeClass('checher_supply');

            //   
            $('.score_active').removeClass('score_active');

        }
            //    
            $('[rel_score='+update+']').next().find('[rel=2]').parents('li').hide();
            $('[rel_score='+update+']').next().find('[rel=3]').parents('li').hide();
            $('[rel_score='+update+']').next().find('[rel=4]').parents('li').hide();


            //        
            $('[rel_score='+update+']').find('.js-state-acc-link').remove();
            $('[rel_score='+update+']').find('i').after(data.echo);


            //    
            var hf=$('[rel_score='+update+']').parents('[supply_stock]');
            hf.each(function(i,elem) {
                var rttt=$(this).attr('supply_stock');
                var hf1= [];
                hf1=rttt.split('_');
                //alert(hf1[0]);
                UpdateStatusADA(hf1[0]);
            });

        alert_message('ok','   ');


        }



    if ( data.status=='error' ) {

        alert_message('error', ' -   ');
    }

    var box = $('.box-modal:last');
    clearInterval(timerId);
    box.find('.arcticmodal-close').click();

}

// 
function RejectFoA()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_acc_reject.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}


// 
function ForwardFoA()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_acc_forward.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}

function SingFoA()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
            if (fo.find('input').val() == 1) {
                //    
                var pre = $('.preorders_block_global').attr('id_pre');
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_add_acc_remark.php?id=' + pre,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });


            } else {
                //    
                $('#js-form-next-sign').submit();
            }
        }
    }
}

function SingFoEnd()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
                //    
                var pre = $('.preorders_block_global').attr('id_pre');
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_yes_bill.php?id=' + pre,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });
        }
    }
}

function SingFoPay()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
            //    
            var pre = $('.preorders_block_global').attr('id_pre');
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_booker_yes.php?id=' + pre,
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }
    }
}

//  
var tabs_acc = function(event) {
    //event.data.key

    var uoo=$(this).attr("id");


    if(uoo!=0) {
        $(this).parents('.mm_w-preorders').addClass('active-trips-menu');
    } else
    {

        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    }

    if ( $(this).is(".active") )
    {
        //  
        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    } else
    {
        //alert(event.data.key);
        if(uoo!=0) {
            $(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            $(this).parents('.mm_w-preorders').next().slideDown("slow");

            /*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

            //var key_='002U';

            var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
                '&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
            //alert(data);
            AjaxClient('acc','tabs_info','GET',data,'AfterTabsInfoAcc',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
        }
    }
}

//   
function AfterTabsInfoAcc(data,update)
{
    if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
        //$('.form'+update[1]+' .px_bg').empty().append(data.query);

        //$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

        //$('.form'+update[1]+' .js-tabs_docc').hide();
        //$('.form'+update[1]+' .js-tabs_'+update[0]).show();

        NumberBlockFile();
        ToolTip();
        if((update[0]==3)||(update[0]==4))
        {
            $(".slct").unbind('click.sys');
            $(".slct").bind('click.sys', slctclick);
            $(".drop").find("li").unbind('click');
            $(".drop").find("li").bind('click', dropli);
            //$('#typesay').unbind('change', changesay);
            //$('#typesay').bind('change', changesay);
            //alert("!");
        }

    }
}

function edit_more_acc()
{
    var oppf=$(this).parents('[id_pre]').attr("id_pre");

    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_edit_acc_more.php?id=' + oppf,
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });
}



function dell_more_acc()
{
    var oppf=$(this).parents('[id_pre]').attr("id_pre");

    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_dell_soply.php?id=' + oppf,
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });
}


//    
function save_acc()
{
    var err = 0;
    $('.js-save-form-acc').find('.gloab').each(function(i,elem) {
        if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            err++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });

    if(err==0) {

        $('.js-save-form-acc').submit();

    } else
    {
        alert_message('error','   ');
    }
}


//     
function del_acc_material(event)
{

    var cc_mat=$('.js-acc-block').length;
//alert(cc_mat);
    if(cc_mat>1) {
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_dell_material_acc.php?id=' + $(this).attr("id_rel"),
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
    event.stopPropagation();
}

//     
var itogprice_xvg = function() {

    var box_active = $(this).closest('.box-modal');
    var xvg=$('.js-acc-block');
    box_active.find('.js-add-acc-block-x').show();
    //$('#yes_soply11').show();
    //$('#yes_soply12').show();
    var summ_xvg=0;
    xvg.each(function(i,elem) {

        $(this).find('.count_xvg_').parents('.input_2021').removeClass('redaas');
        $(this).find('.price_xvg_').parents('.input_2021').removeClass('redaas');

        var count= parseFloat($(this).find('.count_xvg_').val());
        var count_max= parseFloat($(this).find('.count_xvg_').attr('max'));
        var price= parseFloat(ctrim($(this).find('.price_xvg_').val()));
        var price_max= parseFloat(ctrim($(this).find('.price_xvg_').attr('max')));
        // var max_count=parseFloat($('#count_work_'+id_trr).attr('max'));

        if(count>count_max)
        {
            //     
            $(this).find('.count_xvg_').parents('.input_2021').addClass('redaas');
            //box_active.find('.js-add-acc-block-x').hide();
        }
        if(price>price_max)
        {
            //     
            $(this).find('.price_xvg_').parents('.input_2021').addClass('redaas');
        }


        var value=(count*price).toFixed(2);

        if((value!=0)&&(value!='')&&($.isNumeric(value)))
        {
            $(this).find('.all_price_count_xvg span').empty().append($.number(value, 2, '.', ' '));
            summ_xvg=(parseFloat(summ_xvg)+parseFloat(value)).toFixed(2);

        } else
        {
            $(this).find('.all_price_count_xvg span').empty().append('0');
        }


    });

//
    if($('.delivery_xvg_').length!=0) {
        var delivery = parseFloat(ctrim($('.delivery_xvg_').val()));

        if ((delivery != 0) && (delivery != '') && ($.isNumeric(delivery))) {

            summ_xvg = (parseFloat(summ_xvg) + parseFloat(delivery)).toFixed(2);
        }


        if($('.delivery_xvg_').parents('.items_acc_basket').find('.pay_summ_bill1').length!=0) {

            if ((delivery != 0) && (delivery != '') && ($.isNumeric(delivery))) {

                $('.delivery_xvg_').parents('.items_acc_basket').find('.pay_summ_bill1').empty().append($.number(delivery, 2, '.', ' '));

            } else
            {
                $('.delivery_xvg_').parents('.items_acc_basket').find('.pay_summ_bill1').empty().append(0);
            }

        }


    }



    $('.all_summa_xvg').find('span').empty().append($.number(summ_xvg, 2, '.', ' '));
    if(summ_xvg>0)
    {
        //$('.all_xvg').show();
        $('.all_xvg').slideDown( "slow" );
    } else
    {
        //$('.all_xvg').hide();
        $('.all_xvg').slideUp( "slow" );
    }



}

//  
function password_acc()
{
    var cb_h=$(this).parents('.password_acc').find('input');
    if(cb_h.val()!=$(this).attr('id'))
    {
        cb_h.val($(this).attr('id'));

        $(this).parents('.password_acc').find('.choice-radio i').removeClass('active_task_cb');
        $(this).parents('.password_acc').find('.input-choice-click-pass').removeClass('active_pass');

        $(this).find('.choice-radio i').addClass('active_task_cb');
        $(this).addClass('active_pass');
    }
}

function view_type()
{

    var t_soft=$('.js-type-soft-view1').val();
    if(t_soft==1)
    {
        $('.js-options-supply-1').slideDown("slow"); //
        $('.js-options-supply-0').slideUp("slow"); //

    } else
    {
        $('.js-options-supply-0').slideDown("slow");
        $('.js-options-supply-1').slideUp("slow");
    }
}

var delay1 = (function(th){
    var timer = 0;
    return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
    };
})();

var delays = (function(){
    var timer = 0;
    return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
    };
})();


$(document).ready(function() {


// 
    $('body').on("click", '.js-upload-file', UploadInvoice);

    $('body').on("dragover", '.js-image-gl', FileDragHover);
    $('body').on("dragleave", '.js-image-gl', FileDragHover1);

    $('body').on("drop", '.js-image-gl', FileSelectHandler);

//      
    $('body').on("change", '.js-file-load', UploadScanSChange);
//  
    $('body').on("change keyup input click", '.js-image-gl .js-dell-image', DellImageBlock);

//      
    NumberBlockFile();

});


//    
function FileDragHover(e){
    e.stopPropagation();
    e.preventDefault();
    $(this).addClass('draghover');
}
function FileDragHover1(e){
    e.stopPropagation();
    e.preventDefault();
    $(this).removeClass('draghover');
}

function FileSelectHandler(e)
{
    FileDragHover(e);


    if (typeof(window.FileReader) == 'undefined') {

        alert_message('error','   ');
    }

    //    FileList
    var file = e.originalEvent.dataTransfer.files;

    //     File
    for (var i = 0, f; f = file[i]; i++){
        //ParseFile(f);
        var id_block=$(this).find('.js-upload-file').attr('type_block');   //   
        var id_type=$(this).find('.js-upload-file').attr('type_load');     //  1-   2-    
        var id_object=$(this).find('.js-upload-file').attr('id_object');

        var formaa=$('[name=myfile]').parents('form');
        formaa.attr('type_load',id_type);
        formaa.attr('type_block',id_block);
        formaa.attr('id_object',id_object);


        var type=id_type;
        var number_block=id_block;

        var id_object=id_object;

        var gll=$('div[type_block="'+number_block+'"]').parents('.js-image-gl');

        //      
        var number_li = (gll.find('.li-image').length+1);

        //file = this.files[0];
        if (f) {
            var size_blu='';
            if(gll.find('.list-image-icons').length!=0)
            {
                size_blu='<span class="type-img"></span>';
            }


            gll.find('.list-image').append('<div number_li="'+number_li+'" class="li-image"><span class="name-img"><a>'+f.name+'</a></span>'+size_blu+'<span class="del-img js-dell-image"></span><span class="size-img">'+(f.size / 1024 / 1024).toFixed(2)+' </span><div class="progress-img"><div class="p-img" style="width: 0%;"></div></div></div>');

            gll.find('.list-image').show();

            gll.find('.js-upload-file').hide().addClass('eshe-load-file');  //     

            //    
            gll.find('[number_li='+number_li+'] .p-img').show();


            uploadS(f,type,id_object,number_li,number_block);
        }
        return false;

    }
}
function ParseFile(file) {
    alert(
        "<p>File information: <strong>" + file.name +
        "</strong> type: <strong>" + file.type +
        "</strong> size: <strong>" + file.size +
        "</strong> bytes</p>"
    );
}


//  -	    
//  |
// \/
var UploadInvoice = function()
{
    var id_block=$(this).attr('type_block');   //   
    var id_type=$(this).attr('type_load');     //  1-   2-    
    var id_object=$(this).attr('id_object');

    var formaa=$('[name=myfile]').parents('form');
    formaa.attr('type_load',id_type);
    formaa.attr('type_block',id_block);
    formaa.attr('id_object',id_object);

    $('[name=myfile]').trigger('click');
}

//      
//  |
// \/
function NumberBlockFile() {
    //alert("!");
//   .                 
    var number_file=1;
    $('.js-upload-file').each(function (i, elem) {
        $(this).attr('type_block',number_file);
        number_file++;
    });


    //       input=file    
    //alert($('.form_up').length);
    if($('.form_up').length==0)
    {

        $('body').append('<form class="form_up"><input class="js-file-load" type="file" name="myfile"></form>');
    }



}






//  -	    
//  |
// \/
var UploadScanSChange = function()
{
    var type=$(this).parents('form').attr('type_load');
    var number_block=$(this).parents('form').attr('type_block');

    var id_object=$(this).parents('form').attr('id_object');


    //alert(id_object);
    var gll=$('div[type_block="'+number_block+'"]').parents('.js-image-gl');

    //      
    var number_li = (gll.find('.li-image').length+1);

    file = this.files[0];
    if (file) {
var size_blu='';
       if(gll.find('.list-image-icons').length!=0)
       {
           size_blu='<span class="type-img"></span>';
       }


        gll.find('.list-image').append('<div number_li="'+number_li+'" class="li-image"><span class="name-img"><a>'+this.files[0].name+'</a></span>'+size_blu+'<span class="del-img js-dell-image"></span><span class="size-img">'+(this.files[0].size / 1024 / 1024).toFixed(2)+' </span><div class="progress-img"><div class="p-img" style="width: 0%;"></div></div></div>');

        gll.find('.list-image').show();

        gll.find('.js-upload-file').hide().addClass('eshe-load-file');  //     

        //    
        gll.find('[number_li='+number_li+'] .p-img').show();


        uploadS(file,type,id_object,number_li,number_block);
    }
    return false;
}

//  -	   
//  |
// \/
function DellImageBlock()
{
    var li=$(this).parents('.li-image');
    var list=$(this).parents('.list-image');
    DellFile($(this).attr('id'));
    //    input
    $(this).parents('.js-image-gl').find('input').val(DellValString('dell',',',$(this).parents('.js-image-gl').find('input').val(),$(this).attr('id')));


    li.slideUp("slow", function () {
        $(this).remove();
        if (list.find('.li-image').length == 0) {
            list.slideUp("slow");
            list.parents('.js-image-gl').find('.js-upload-file').removeClass('eshe-load-file');
        }

        var number_li = 1;
        list.find('.li-image').each(function (i, elem) {

            $(this).attr('number_li', number_li);
            number_li++;

        });


    });





}

//  -	    
//  |
// \/
function uploadS(file,type,id_object,number_li,number_block) {
    var gll=$('div[type_block='+number_block+']').parents('.js-image-gl');
    var xhr = new XMLHttpRequest();

    //     ,
    //  status == 200,   ,  
    xhr.onload = xhr.onerror = function() {
        //alert(this.status);
        if (this.status == 200) {


            gll.find('.js-upload-file').show();
            gll.find('[number_li='+number_li+'] .p-img').width(0).hide();
            gll.find('[number_li='+number_li+']').addClass('yes-load');
//alert("!!!");
            alert_message('ok',' ');
            //   input  id 

            if(type==14)
            {
                //   
                //alert_message('ok','');
                updatecash(id_object);

            }

            var r=JSON.parse(this.responseText);
            //alert_message('ok',r.type);
            gll.find('[number_li='+number_li+'] .del-img').attr('id',r.echo);

            if(gll.find('[number_li='+number_li+'] .type-img').length!=0)
            {
                gll.find('[number_li='+number_li+'] .type-img').empty().append(r.type);
            }

            gll.find('[number_li='+number_li+'] .name-img a').attr('href',r.link);

            name_sql_image=r.echo;  //id   

            var inpu=gll.find('input');
            //alert(inpu.val());
            if(inpu.val()=='')
            {
                inpu.val(name_sql_image);
            } else
            {
                inpu.val(inpu.val()+','+name_sql_image);
            }


            //UpdateImageSupply(id);
        }
        else {
            gll.find('.js-upload-file').show();
            gll.find('[number_li='+number_li+'] .p-img').width(0).hide();
            gll.find('[number_li='+number_li+']').addClass('no-load');
            alert_message('error','  .  ');
            setTimeout(function () {
                gll.find('[number_li=' + number_li + ']').slideUp("slow", function () {
                    var list=$(this).parents('.list-image');
                    $(this).remove();



                    if (list.find('.li-image').length == 0) {
                        list.slideUp("slow");
                        gll.find('.js-upload-file').removeClass('eshe-load-file');
                    }
                });
            }, 3000);
        }
    };

    //   
    xhr.upload.onprogress = function(event) {
        var widths=Math.round((event.loaded*100)/event.total);
        gll.find('[number_li='+number_li+'] .p-img').width(widths);
    }

    xhr.open("POST", "Ajax/file/upload.php", true);
    //xhr.send(file);

    var formData = new FormData();
    formData.append("thefile", file);
    formData.append("type",type);
    formData.append("object",id_object);
    xhr.send(formData);

}

//   
//  |
// \/
function DellFile(id)
{
    if(id!='')
    {
        var data ='id='+id;

        AjaxClient('file','dell','GET',data,'AfterZero',0,0);
    }
}
// 
//  |
// \/
function AfterZero(data,update){}
//        
//  |
// \/
//DellValString('dell',',','2,5,8',5) - >    2,8
function DellValString(command,separator,string,val)
{
//dell - add
    var text = '';
    if (command == 'dell') {

        var cc = string.split(separator);
        var lp = 0;
        for (var t = 0; t < cc.length; t++) {
            if (cc[t] != val) {
                if (cc[t] != '') {
                    if (lp == 0) {
                        text = cc[t];
                    } else {
                        text = text + separator + cc[t];
                    }
                    lp++;
                }
            }
        }


    } else {
        //
        if (jQuery.trim(string) != '') {
            text = string + separator + val;
        } else {
            text = val;
        }


    }
    return text;
}

// JavaScript Document
$(function (){

//     +	
$('body').on("change keyup input click",'.js-add-group',AddGroup);	
//     -	
$('body').on("change keyup input click",'.js-dell-group',DellGroup);	

});



//     -	
//  |
// \/
function DellGroup()
{
	var group=$(this).parents('.js-group');
	
	group.slideUp("slow",function () {group.remove();  });
	
}


//     +	
//  |
// \/
function AddGroup()
{
	//alert("!!");
	var group=$(this).parents('.js-group');
	var class_group='';
	if(group.is('.group-right'))
	{
			class_group='group-right';
	}
	
	var group_html=group.html();
	
	group.after('<div class="js-group '+class_group+' contact-group line-group">'+group_html+'</div>');
	
	var next_group=group.next();
	
	next_group.find('.active_in_2018').removeClass('active_in_2018');
	next_group.find('.required_in_2018').removeClass('required_in_2018');
	
	
	if(next_group.find('.js-dell-group').length==0)
		{
	next_group.find('.js-add-group').after('<div data-tooltip="" class="dell-group js-dell-group"><div></div></div>');
		}
	ToolTip();
	next_group.find('input').val('');
	next_group.find('textarea').val('');
	
	//   textarea  resize     
	next_group.find('.js-resize-block').each(function(i,elem) {
		
		if($(this).find('textarea').length==2)
			{
				$(this).find('textarea').first().remove();
				$(this).find('textarea').removeAttr('style');
				$(this).find('textarea').autoResize({extraSpace : 10});
			}
		
		
	});
	
	
	next_group.find('.list_2018').removeClass('active_in_2018').removeClass('active1_in_2018');
	next_group.find('.list_2018 input').val('');
	next_group.find('.list_2018 .sel_active').removeClass('sel_active');
	
	next_group.find('.slct').attr('data_src','').empty();
	
	//jQuery.scrollTo(next_group, 1000, {offset:-70});
	
	Zindex();
	SelectUpdate();
}// JavaScript Document

//    
//  |
// \/
function SelectUpdate()
{
	$(".slct").unbind('click.sys');
    $(".slct").bind('click.sys', slctclick);
	$(".drop").find("li").unbind('click');
	$(".drop").find("li").bind('click', dropli);
}

$(function () {
    $('body').on("change keyup input click",'.js-zame-tours',form_doc_rate);
    $('body').on("change keyup input click",'.js-ok-rate-chat-left',ok_rate_form_chat_left);
});

function form_doc_rate() {

    if (!$(this).parents('.plus_comm_vot').find('.form-rate-ok1').is(".show-form-rate1")) {
        //alert("!!");


        if ($(this).parents('.plus_comm_vot').find('.form-rate-ok1').length != 0) {
            $('.form-rate-ok1').removeClass('show-form-rate1');
            $(this).parents('.plus_comm_vot').find('.form-rate-ok1').addClass('show-form-rate1');
            $(this).parents('.plus_comm_vot').find('.form-rate-ok1 .tyyo1').focus();


        }

        //input_2018();

    }
}

/**
 *  -      
 *
 */
function ok_rate_form_chat_left(event)
{
    //   
    var rate_b= $(this).parents('.form-rate-ok1').find('.tyyo1').val();
    //lert(rate_b);
    if(jQuery.trim(rate_b)!='')
    {
        //      
        $(this).parents('.form-rate-ok1').removeClass('show-form-rate1');
        //console.log(" .");

        $(this).parents('td').find('.zame_kk').addClass('yes-note');

        $(this).parents('td').find('.commun').empty().append(rate_b);
        $(this).parents('td').find('.commun_hide').val(1);
        // post formu

        event.stopPropagation();
    } else
    {
        $(this).parents('.form-rate-ok1').removeClass('show-form-rate1');
        //console.log(" .");

        $(this).parents('td').find('.zame_kk').removeClass('yes-note');
        $(this).parents('td').find('.commun').empty();

        $(this).parents('td').find('.commun_hide').val(0);

        event.stopPropagation();
    }
}
$(function (){

    //   -   
    $('body').on("change keyup input click",'.js-password-docs',password_docs);
    //  

    $('body').on("change keyup input click",'.js-add-docs',add_docs_2021);
    //   




    $('body').on("change keyup input click",'.js-add-docs-save',save_docs);


    $('body').on("change keyup input click",'.js-edit-docs-more',edit_more_docs);

    $('body').on("change keyup input click",'.tabs_007U',{key: "007U"},tabs_docs);


    $('body').on("change keyup input click",'.js-reject-docs',RejectFoD);
    $('body').on("change keyup input click",'.js-forward-docs',ForwardFoD);

    $('body').on("change keyup input click",'.js-sign-a2',SingFoD);



});

function add_docs_2021()
{
    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_add_docs_2021.php',
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });

}


// 
function RejectFoD()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_docs_reject.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}


// 
function ForwardFoD()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_docs_forward.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}

function SingFoD()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
            if (fo.find('input').val() == 1) {
                //    
                var pre = $('.preorders_block_global').attr('id_pre');
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_add_docs_remark.php?id=' + pre,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });


            } else {
                //    
                $('#js-form-next-sign').submit();
            }
        }
    }
}



//  
var tabs_docs = function(event) {
    //event.data.key

    var uoo=$(this).attr("id");


    if(uoo!=0) {
        $(this).parents('.mm_w-preorders').addClass('active-trips-menu');
    } else
    {

        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    }

    if ( $(this).is(".active") )
    {
        //  
        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    } else
    {
        //alert(event.data.key);
        if(uoo!=0) {
            $(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            $(this).parents('.mm_w-preorders').next().slideDown("slow");

            /*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

            //var key_='002U';

            var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
                '&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
            //alert(data);
            AjaxClient('docs','tabs_info','GET',data,'AfterTabsInfodocs',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
        }
    }
}

//   
function AfterTabsInfodocs(data,update)
{
    if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
        //$('.form'+update[1]+' .px_bg').empty().append(data.query);

        //$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

        //$('.form'+update[1]+' .js-tabs_docc').hide();
        //$('.form'+update[1]+' .js-tabs_'+update[0]).show();

        NumberBlockFile();
        ToolTip();
        if((update[0]==3)||(update[0]==4))
        {
            $(".slct").unbind('click.sys');
            $(".slct").bind('click.sys', slctclick);
            $(".drop").find("li").unbind('click');
            $(".drop").find("li").bind('click', dropli);
            //$('#typesay').unbind('change', changesay);
            //$('#typesay').bind('change', changesay);
            //alert("!");
        }

    }
}

function edit_more_docs()
{
    var oppf=$(this).parents('[id_pre]').attr("id_pre");

    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_edit_docs_more.php?id=' + oppf,
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });
}


//    
function save_docs()
{
    var err = 0;
    $('.js-save-form-docs').find('.gloab').each(function(i,elem) {
        if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            err++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });

    if(err==0) {

        $('.js-save-form-docs').submit();

    } else
    {
        alert_message('error','   ');
    }
}




//  
function password_docs()
{
    var cb_h=$(this).parents('.password_docs').find('input');
    if(cb_h.val()!=$(this).attr('id'))
    {
        cb_h.val($(this).attr('id'));

        $(this).parents('.password_docs').find('.choice-radio i').removeClass('active_task_cb');
        $(this).parents('.password_docs').find('.input-choice-click-pass').removeClass('active_pass');

        $(this).find('.choice-radio i').addClass('active_task_cb');
        $(this).addClass('active_pass');
        view_type();
    }
}






$(function () {

    $('body').on("change keyup input click",'.js-add_nar',save_naryad);
   // $(".add_nar").bind('click', save_naryad);
});



// 
function save_naryad()
{
    var error=0;

    $('.messa:visible').find('.text_finery_message_').removeClass('error_formi');
    $('.messa:visible').find('.text_finery_message_').each(function(i,elem) {

        var text=$(this).val();
        if(text=='')
        {
            error=1;
            $(this).addClass('error_formi');
        }
    });
    $('.work__s').find('.price_finery_').removeClass('error_formi');
    $('.work__s').find('.count_finery_').removeClass('error_formi');
    $('.mat').find('.price_finery_mater_').removeClass('error_formi');
    $('.mat').find('.count_finery_mater_').removeClass('error_formi');

    $('.messa:visible').each(function(i,elem) {
        var id_work=$(this).attr('id_mes');
        //        


        //      
        var aa = id_work.split('_');
        if(aa.length==1)
        {
            // 
        } else
        {
            //
        }
        id_work=aa[0];

        var count=$('.work__s[rel_id='+id_work+']').find('.count_finery_').val();
        var price=$('.work__s[rel_id='+id_work+']').find('.price_finery_').val();
        $('.work__s[rel_id='+id_work+']').find('.price_finery_').removeClass('error_formi');
        $('.work__s[rel_id='+id_work+']').find('.count_finery_').removeClass('error_formi');
        if((count==0)||(count=='')||(!$.isNumeric(count)))
        {
            $('.work__s[rel_id='+id_work+']').find('.count_finery_').addClass('error_formi');
            error=1;
        }
        if((price==0)||(price=='')||(!$.isNumeric(price)))
        {
            $('.work__s[rel_id='+id_work+']').find('.price_finery_').addClass('error_formi');
            error=1;
        }


        $('.mat[rel_w='+id_work+']').each(function(i,elem) {
            var count=$(this).find('.count_finery_mater_').val();
            var price=$(this).find('.price_finery_mater_').val();
            $(this).find('.price_finery_mater_').removeClass('error_formi');
            $(this).find('.count_finery_mater_').removeClass('error_formi');
            //if((count==0)||(count=='')||(!$.isNumeric(count)))

            if((count=='')||(!$.isNumeric(count)))
            {
                $(this).find('.count_finery_mater_').addClass('error_formi');
                error=1;
            }
            /*
            if((price==0)||(price=='')||(!$.isNumeric(price)))
            {
                $(this).find('.price_finery_mater_').addClass('error_formi');
                error=1;
            }
            */

        });


    });

    $('.js-add-worder-material .gloab2').each(function(i,elem) {
        if($(this).val() == '')  { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            error++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });
    if(error!=0)
    {

        alert_message('error','   ');

    } else
    {
        $('#lalala_add_form').submit();
    }



}



//      

window.search_min = 1;  //     
window.search_deley=800;	//    -  
window.search_class='.loll_soply';	//    -  

var delay1 = (function(th){ 
  var timer = 0;
  return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
  };
})();


//  
var tabs_app = function(event) {
	//event.data.key

	var uoo=$(this).attr("id");


	if(uoo!=0) {
		$(this).parents('.mm_w-preorders').addClass('active-trips-menu');
	} else
	{

		$(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
		$(this).parents('.mm_w-preorders').next().empty().hide();
		$(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
	}

	if ( $(this).is(".active") )
	{
		//  
		$(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
		$(this).parents('.mm_w-preorders').next().empty().hide();
		$(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
	} else
	{
		//alert(event.data.key);
		if(uoo!=0) {
			$(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
			$(this).parents('.mm_w-preorders').next().slideDown("slow");

			/*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
			$(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
			$(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

			//var key_='002U';

			var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
				'&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
			//alert(data);
			AjaxClient('app','tabs_info','GET',data,'AfterTabsInfoApp',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
		}
	}
}



function AddDopSW()
{

	if ( $(this).is("[for]") )
	{
		if($.isNumeric($(this).attr("for")))
		{
			$.arcticmodal({
				type: 'ajax',
				url: 'forms/form_add_dop_2021.php?id='+$(this).attr("for"),
				beforeOpen: function (data, el) {
					//     ajax 
					$('.loader_ada_forms').show();
					$('.loader_ada1_forms').addClass('select_ada');
				},
				afterLoading: function (data, el) {
					//    ajax
					data.body.parents('.arcticmodal-container').addClass('yoi');
					$('.loader_ada_forms').hide();
					$('.loader_ada1_forms').removeClass('select_ada');
				},
				beforeClose: function (data, el) { //    ArcticModal
					if (typeof timerId !== "undefined") {
						clearInterval(timerId);
					}
					BodyScrool();
				}

			});
		}
	}

	return false;

}


function dop_smeta_scroll()
{
	var id_soply=$(this).parents('.material-dop').attr('rel_dop');

	jQuery.scrollTo('.block_i[rel='+id_soply+']', 1000, {offset:-120});

	if(!$('.block_i[rel='+id_soply+']').is('.active'))
	{
		$('.block_i[rel='+id_soply+']').find('.i__').trigger('click');
	}

}


function dop_smeta_scroll_1()
{
	var id_soply=$(this).attr('ukr_id');
	var blockk_ukr=$('.jop[rel_id='+id_soply+']').parents(".block_i");
	if(!blockk_ukr.is('.active'))
	{
		blockk_ukr.find('.i__').trigger('click');
	}
	jQuery.scrollTo('.jop[rel_id='+id_soply+']', 1000, {offset:-140});



}



//   
function ctrim(str)
{
	str = str.replace(/\s/g, '');
	return str;
}


//       
var validate11 = function() {
  $(this).val($(this).val().replace(/[^\d.]*/g, '').replace(/([.])[.]+/g, '$1').replace(/^[^\d]*(\d+([.]\d{0,5})?).*$/g, '$1'));
}


function UploadInvoice_old()
{
	var id_upload=$(this).attr('id_upload');
	$('[name=myfiles'+id_upload+']').trigger('click');
}


function UploadReportsChange_old()
{
	var id=$(this).parents('form').attr('id_sc');
	file = this.files[0];
	if (file) {
		uploadRR_old(file,id);
	}
	return false;
}
function uploadRR_old(file,id) {

	var xhr = new XMLHttpRequest();

	//     ,
	//  status == 200,   ,  
	xhr.onload = xhr.onerror = function() {
		// alert(this.status);
		if (this.status == 200) {

			$('[id_upload='+id+']').show(); //
			$('.scap_load_'+id).find('.scap_load__').width(0);
			$('.scap_load_'+id).hide();
			$('.scap_load_'+id).after();
			//UpdateImageReports(id);
			alert_message('ok','  ');
			autoReloadHak();
		} else {

			$('[id_upload='+id+']').show();
			$('.scap_load_'+id).find('.scap_load__').width(0);
			$('.scap_load_'+id).hide();
		}
	};

	//   
	xhr.upload.onprogress = function(event) {
		$('[id_upload='+id+']').hide();
		$('.scap_load_'+id).show();
		var widths=Math.round((event.loaded*100)/event.total);
		$('.scap_load_'+id).find('.scap_load__').width(widths+'%');
	}

	xhr.open("POST", "users/upload.php", true);
	//xhr.send(file);

	var formData = new FormData();
	formData.append("thefile", file);
	formData.append("id",id);
	xhr.send(formData);

}



//    
function save_setting()
{


	var err = 0;
//alert($('.js-form-register .gloab').length);
	$('.js-form-gloab .gloab').each(function(i,elem) {
		if($(this).val() == '')  { $(this).parents('.input_2021').addClass('required_in_2021');
			$(this).parents('.list_2021').addClass('required_in_2021');
			err++;
			//alert($(this).attr('name'));
		} else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
	});

	//alert(err);

	if(err==0)
	{
		$('.js-form-gloab  .js-save-setting').hide().after('<div class="b_loading_small" style="position:relative; width: 40px;padding-top: 7px;top: auto;right: auto;left: calc(50% - 20px);"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');

		//AjaxClient('notification','even','GET',data,'AfterNofi',1,0,1);
		//AjaxClient('tedner','add','POST',0,'AfterAddFormTender',0,'js-form-tender-new',1);
		$('#lalala_add_form').submit();

	} else
	{
		//       
		//jQuery.scrollTo('.required_in_2018:first', 1000, {offset:-70});
		//ErrorBut('.js-form-tender-new .js-add-tender-form',' !');
		alert_message('error','   ');
	}


}




//   
//  |
// \/
function Eye()
{
	if($(this).is('.ais-open'))
	{
		$(this).removeClass('ais-open');
		$(this).parents('.input_2021').find('.input_new_2021').attr('type','password');
	} else
	{
		$(this).addClass('ais-open');
		$(this).parents('.input_2021').find('.input_new_2021').attr('type','text');
	}
}



function count_task()
{
var count_dr=$('.hidden-count-task').text();
if(count_dr!='')
{
	$('.menu-09-count').empty().append($('.hidden-count-task').text());
	$('.menu-09-count').show();
}

}


//   url
//var url = "http://someUrl.ru?param1=123&param2=234&param3=435";
//var url1 = removeParam("param1", url);
function removeParam(key, sourceURL) {
	var splitUrl = sourceURL.split('?'),
		rtn = splitUrl[0],
		param,
		params_arr = [],
		queryString = (sourceURL.indexOf("?") !== -1) ? splitUrl[1] : '';

	if (queryString !== '') {
		params_arr = queryString.split('&');
		for (var i = params_arr.length - 1; i >= 0; i -= 1) {
			param = params_arr[i].split('=')[0];
			if (param === key) {
				params_arr.splice(i, 1);
			}
		}
		rtn = rtn + '?' + params_arr.join('&');
	}

	if(rtn.toString().slice(-1)=='?')
	{
		rtn=rtn.slice(0, -1);
	}

	return rtn;
}



// 
function ForwardFo()
{
	if(!$(this).is('.gray-bb')) {
		var pre = $('.preorders_block_global').attr('id_pre');
		$.arcticmodal({
			type: 'ajax',
			url: 'forms/form_add_app_forward.php?id=' + pre,
			beforeOpen: function (data, el) {
				//     ajax 
				$('.loader_ada_forms').show();
				$('.loader_ada1_forms').addClass('select_ada');
			},
			afterLoading: function (data, el) {
				//    ajax
				data.body.parents('.arcticmodal-container').addClass('yoi');
				$('.loader_ada_forms').hide();
				$('.loader_ada1_forms').removeClass('select_ada');
			},
			beforeClose: function (data, el) { //    ArcticModal
				if (typeof timerId !== "undefined") {
					clearInterval(timerId);
				}
				BodyScrool();
			}

		});
	}
}

// 
function RejectFo()
{
	if(!$(this).is('.gray-bb')) {
		var pre = $('.preorders_block_global').attr('id_pre');
		$.arcticmodal({
			type: 'ajax',
			url: 'forms/form_add_app_reject.php?id=' + pre,
			beforeOpen: function (data, el) {
				//     ajax 
				$('.loader_ada_forms').show();
				$('.loader_ada1_forms').addClass('select_ada');
			},
			afterLoading: function (data, el) {
				//    ajax
				data.body.parents('.arcticmodal-container').addClass('yoi');
				$('.loader_ada_forms').hide();
				$('.loader_ada1_forms').removeClass('select_ada');
			},
			beforeClose: function (data, el) { //    ArcticModal
				if (typeof timerId !== "undefined") {
					clearInterval(timerId);
				}
				BodyScrool();
			}

		});
	}
}

function SingFo()
{
	if(!$(this).is('.gray-bb')) {
		var fo = $(this);
		if (!fo.hasClass("gray-bb")) {
			//alert("!");
			if (fo.find('input').val() == 1) {
				//    
				var pre = $('.preorders_block_global').attr('id_pre');
				$.arcticmodal({
					type: 'ajax',
					url: 'forms/form_add_app_remark.php?id=' + pre,
					beforeOpen: function (data, el) {
						//     ajax 
						$('.loader_ada_forms').show();
						$('.loader_ada1_forms').addClass('select_ada');
					},
					afterLoading: function (data, el) {
						//    ajax
						data.body.parents('.arcticmodal-container').addClass('yoi');
						$('.loader_ada_forms').hide();
						$('.loader_ada1_forms').removeClass('select_ada');
					},
					beforeClose: function (data, el) { //    ArcticModal
						if (typeof timerId !== "undefined") {
							clearInterval(timerId);
						}
						BodyScrool();
					}

				});


			} else {
				//    
				$('#js-form-next-sign').submit();
			}
		}
	}
}

function MemoButType(elem)
{

	var bbt=elem.parents('.save_button');
	if(elem.val()==1)
	{
		bbt.addClass('yellow-bb');

	} else
	{
		bbt.removeClass('yellow-bb');
	}
	bbt.find('.js-son').hide();
	bbt.find('[son='+elem.val()+']').show();
}


//  2021
function input_2021()
{
	//        
	$(".input_new_2021").each(function (index, value) {

		var input=$.trim($(this).val());
		if(input!='')
		{
			$(this).parents('.input_2021').addClass('active_in_2021');
		}
	});

}
//   chtckbox    
//  |
// \/
function CheckboxGroup(event)
{
	/*
    var active_old = $(this).parent().parent().find(".slct").attr("data_src");
    var active_new = $(this).find("a").attr("rel");
    */
//var f = $(this).find("a").text();

	//   no_active_check    
	if(!$(this).is('.no_active_check')) {


		var e = $(this).find("input").first().val();
		var drop_object = $(this).parents('.js-group-c');

		var active_jj = 0;

		if ($(this).find('i').is(".active_task_cb")) {

			$(this).find('i').removeClass("active_task_cb");
			$(this).find('input').last().val(0);
			active_jj = 1;
		} else {

			$(this).find('i').addClass("active_task_cb");
			$(this).find('input').last().val(1);

		}


		//    
		var select_li = '';
		drop_object.find('.js-checkbox-group').each(function (i, elem) {
			if ($(this).find('i').is(".active_task_cb")) {
				if (select_li == '') {
					select_li = $(this).find("input").first().val();
				} else {
					select_li = select_li + ',' + $(this).find("input").first().val();
				}
			}
		});


		//       
		if (drop_object.is('.js-tolko-one')) {


			//select_li = one_li.find("a").attr("rel");
			drop_object.find('i').removeClass("active_task_cb");

			drop_object.find('.js-checkbox-group').each(function (i, elem) {
				$(this).find('input').last().val(0);
			});
			//alert(active_jj);
			if (active_jj == 0) {
				$(this).find('i').addClass("active_task_cb");
				$(this).find('input').last().val(1);
			}

		}


		//               
		//  -       
		//       

		if (drop_object.is('.js-one-all-select')) {

			var one_li = drop_object.find('.js-checkbox-group').first();


			//        
			if (select_li == '') {

				one_li.trigger('click');
				return;

			}

			//            
			if (($(this).find('i').is(".active_task_cb")) && (e == 0) && ((select_li != '') && (select_li != '0'))) {

				select_li = one_li.find("a").attr("rel");
				drop_object.find('i').removeClass("active_task_cb");

				drop_object.find('.js-checkbox-group').each(function (i, elem) {
					$(this).find('input').last().val(0);
				});


				one_li.find('i').addClass("active_task_cb");
				one_li.find('input').last().val(1);

			}


			//            
			if (e != 0) {
				var count_all_li = drop_object.find('.js-checkbox-group').length;
				var count_active_li = drop_object.find('.active_task_cb').length;
				//alert(count_all_li);
				if (parseInt(count_active_li + 1) == count_all_li) {
					drop_object.find('i').removeClass("active_task_cb");

					drop_object.find('.js-checkbox-group').each(function (i, elem) {
						$(this).find('input').last().val(0);
					});


					one_li.find('i').addClass("active_task_cb");
					one_li.find('input').last().val(1);
				}
			}


			//alert(select_li_text);
			// -          
			if ((select_li != '') && (select_li != '0')) {
				if (one_li.find('i').is('.active_task_cb')) {
					one_li.trigger('click');
					return;
				}
			}

		}
		MemoButType($(this).find("input"));
		event.stopPropagation();
	}
}

function animation_teps_supply()
{
	$('.teps_supply').each(function(i,elem) {
	$(this).animate({width: $(this).attr('rel_w')+"%"}, 2000, function() {  });
});
}

//   textarea resize   
//  |
// \/
function AutoResizeT()
{
	//$(this).autoResize({extraSpace : 10});

	$('.js-autoResize').each(function(i,elem) {
		$(this).autoResize({extraSpace : 10});
	});

}

//         
//  |
// \/
function KeyUpInput2021()
{
	if($(this).is('.gloab'))
	{
		if(($(this).val()!='')&&($(this).val()!=0))
			$(this).parents('.input_2021').removeClass('required_in_2021');
		$(this).parents('.input_2021').removeClass('error_2021');
	}
}


//         
//  |
// \/
function KeyUpInput()
{
	if($(this).is('.gloab'))
	{
		if(($(this).val()!='')&&($(this).val()!=0))
			$(this).parents('.input_2018').removeClass('required_in_2018');
		$(this).parents('.input_2018').removeClass('error_2018');
	}
}


//   
//  |
// \/
function ToolTipInput(){



	$(".help-icon").mousemove(function (eventObject) {

		var inputx=$(this).parents('.input_2021');

		if(inputx.length==0)
		{
			var inputx=$(this).parents('.js-helps');
		}

		if(inputx.find('.toolhelp').length==0)
		{
			inputx.prepend('<div class="toolhelp"><span></span></div>');
		}

		var toolh=inputx.find(".toolhelp");
		var toolhs=inputx.find(".toolhelp span");
		$data_tooltip = $(this).attr("help");
		toolhs.text($data_tooltip);
		var offset = $(this).offset();


		if((eventObject.pageX-250)<=($(window).width()/2))
		{
			toolh.css({
				"top" : '0px',
				"right" : - (toolh.outerWidth() + 40)

			});


			setTimeout ( function () { toolh.fadeIn(500); }, 	400 );


		}else
		{

			toolh.hide();


		}
	}).mouseout(function () { var toolh=$(this).parents('.input_2021').find(".toolhelp");


		if(toolh.length==0)
		{
			var toolh=$(this).parents('.js-helps').find(".toolhelp");
		}


		toolh.remove(); });


}

//   js forms //      
//  |
// \/
function initializeFormsJs()
{
	try {
		//    js forms.                
		forms_js_load();
	} catch (error) {
		//  ,  ,     
		$.getScript( window.src_forms, function( data, textStatus, jqxhr ) {
			console.log("yes load script");
		});
	}
}

function LoadFFo()
{
	console.log("  ");
	if(window.yesform==1) {
		clearInterval(TimerScript);
		ScriptForms();
	}
}



// 
//  |
// \/
function autoReloadHak(){
	var goal = self.location;
	location.href = goal;
}

//          
//  |
// \/
function BodyScrool()
{

	if($('.arcticmodal-container').length==1)
	{
		$('body').css( "margin-right", "0px" );
		$('body').css( "overflow", "auto" );
	}
}





function dell_invoice()
{
	var attr=$(this).attr('id_rel');
	$('[invoice_material='+attr+']').hide();
	
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_invoice.php?id='+attr,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	
}





function  UpdateImageInvoiceAkt(id,type)
{	
	var data ='url='+window.location.href+'&id='+id+'&type='+type;
    AjaxClient('invoices','update_akt','GET',data,'AfterUpdateAkt',type,0);	
}








function ErrorMax()
{
	
	var max=parseFloat($(this).attr('max'));
	$(this).removeClass('redaas_invcoice');
	var count=parseFloat($(this).val());
	
	//alert(id);
	
	if((count!='')&&(max<count)&&(count!='0'))
	{
			$(this).addClass('redaas_invcoice');
	} else
	{
			//$('[invoices_messa='+id+']').find('.count_defect_in_').removeClass('redaas_invcoice');
	}
	
}







//        

function BrakError()
{
	
	var id=$(this).parents('[invoice_group]').attr('invoice_group');
	$('[invoices_messa='+id+']').find('.count_defect_in_').removeClass('redaas_invcoice');
	var count=parseFloat($('[invoice_material='+id+']').find('.count_in_').val());
	var count_akt=parseFloat($('[invoices_messa='+id+']').find('.count_defect_in_').val());
	
	//alert(id);
	
	if((count_akt!='')&&(count_akt>count)&&(count!=''))
	{
			$('[invoices_messa='+id+']').find('.count_defect_in_').addClass('redaas_invcoice');
	} else
	{
			//$('[invoices_messa='+id+']').find('.count_defect_in_').removeClass('redaas_invcoice');
	}
	
}




function countErrorMax()
{
	
	var xvg=$('.count_in_');
	xvg.each(function(i,elem) {
		var max=parseFloat($(this).attr('max'));
	    $(this).removeClass('redaas_invcoice');
	    var count=parseFloat($(this).val());
		
	    if((count!='')&&(max<count)&&(count!='0'))
	    {
			$(this).addClass('redaas_invcoice');
	    }
	});
}






function search_posta_li2()
{
	$('.contractor_add').hide();
	$('.select-mania-theme-orange1').show();
	
	$('.new_contractor_').val(0);	
}

function plus_postt()
{
	$('.contractor_add').show();
	$('.contractor__').hide();
	$('.new_contractor_').val(1);
}


function yoop_click()
{
	//alert("!");
	var hl=$(this).parents('.yoop_');
	if ( hl.is(".hide_yoop") )
    {
		
		hl.removeClass('hide_yoop');
		
	} else
		{
			hl.addClass('hide_yoop');
		}
}


function search_posta_li()
{
	$('.loll_drop').css("transform", "scaleY(0)");
	$('.post_p').val($(this).find('a').attr('rel'));
	$(this).parents('.loll_div').removeClass('required_in_2018');
	$('[name=number_soply]').val($(this).find('a').text().toUpperCase());
	$('[name=number_soply]').attr('val_old',$(this).find('a').text().toUpperCase());
	$('.b-loading-message').empty().hide();
}

function search_posta1()
{
if($.trim($(this).val().length) >= 1)
		{
		  $('.loll_drop').css("transform", "scaleY(1)");	
		} 
}
	
function search_posta()
{
	    //    
	//alert("!!");
	if($(this).attr("readonly")==undefined) {
		if($.trim($(this).val().length) >= 1)
		{
		  $(this).parents('.loll_div').find('.loll_dell').show();	
		} else
		{
			$(this).parents('.loll_div').find('.loll_dell').hide();
		}
	var th=$(this);
	
    delay1(function(th){
		//alert(th.val());
		
		if($.trim($(window.search_class).val().length) >= window.search_min)
		{
             // alert($(window.search_class).val());  
			$('.b-loading-message').empty().hide();
			 $('.b-loading').show();
			 $(this).parents('.loll_div').find('.loll_drop').css("transform", "scaleY(0)");
			 
				var data ='url='+window.location.href+'&query='+$(window.search_class).val()+'&active='+$('.post_p').val();
	           AjaxClient('supply','search_contractor','GET',data,'Aftersearch_posta',1,0);	
			
			  // ajax  
			
			  //   
		}
		
    }, window.search_deley,$(this));
	}
}




function Aftersearch_posta(data,update)
{
	if ( data.status=='reg' )
    {
		$('.b-loading').hide();
		WindowLogin();
	}
	
	if ( data.status=='yes' )
    {				
		$('.loll_drop').empty().append(data.echo).css("transform", "scaleY(1)");
		$('.b-loading').hide();
	}
	
	if ( data.status=='ok' )
    {
		$('.b-loading').hide();
		$('.b-loading-message').empty().append('  ').show();
		//   
	}
	
}

//    
function InputFocusNew2021()
{
	var val_input=$(this).val();
	var label=$(this).prev('label');
	var input_div=$(this).parents('.input_2021');

	if(!input_div.is('.active_in_2021'))
	{
		input_div.addClass('active_in_2021');
	}

	if(!input_div.is('.active1_in_2021'))
	{
		input_div.addClass('active1_in_2021');
	}

	//   
	var calendar=input_div.find('.cal_2021');
	if(calendar.length!=0)
	{
		$(".date___2019").show();
	}



}
//    
function InputBlurNew2021()
{
	if($(this).is('.gloab')) {
		//alert($(this).val());
		var val_input = $(this).val();
		var label = $(this).prev('label');
		var input_div = $(this).parents('.input_2021');

		input_div.removeClass('active1_in_2021');

		if (val_input == '') {
			input_div.removeClass('active_in_2021');
		}


		if (!$(this).is('.date2021_mask')) {
			//      
			if (($(this).is('.required')) && (val_input == '') && (!input_div.is('.required_in_2021'))) {
				input_div.addClass('required_in_2021');
			} else {
				if (($(this).is('.required')) && (val_input != '')) {
					input_div.removeClass('required_in_2021');
				}
			}
		} else {
			if (($(this).is('.required')) && ((val_input == '') || (val_input == '..')) && (!input_div.is('.required_in_2021'))) {
				input_div.addClass('required_in_2021');
			} else {
				if (($(this).is('.required')) && (val_input != '') && (val_input != '..')) {
					input_div.removeClass('required_in_2021');
				}
			}


		}

	}
}


//    
function InputFocusNew()
{
	var val_input=$(this).val();
	var label=$(this).prev('label');
	var input_div=$(this).parents('.input_2018');
	
	if(!input_div.is('.active_in_2018'))
	{
		input_div.addClass('active_in_2018');	
	}
	
	if(!input_div.is('.active1_in_2018'))
	{
		input_div.addClass('active1_in_2018');	
	}
	
	//   
	var calendar=input_div.find('.cal_2018');
	if(calendar.length!=0)
	{
			$(".date___2019").show();	
	}
	
	 
	
}
//    
function InputBlurNew()
{
	/*
	//alert($(this).val());
	var val_input=$(this).val();
	var label=$(this).prev('label');
	var input_div=$(this).parents('.input_2018');
	
	input_div.removeClass('active1_in_2018');
	
	if(val_input=='')
	{
		input_div.removeClass('active_in_2018');	
	}
	if(!$(this).is('.date2018_mask'))
	{
	  //      
	  if(($(this).is('.required'))&&(val_input=='')&&(!input_div.is('.required_in_2018')))
	  {
		input_div.addClass('required_in_2018');	
	  } else
	  {
		if(($(this).is('.required'))&&(val_input!=''))
		{
		  input_div.removeClass('required_in_2018');
		}
	  }
	} else
	{
	  if(($(this).is('.required'))&&((val_input=='')||(val_input=='..'))&&(!input_div.is('.required_in_2018')))
	  {
		input_div.addClass('required_in_2018');	
	  } else
	  {
		if(($(this).is('.required'))&&(val_input!='')&&(val_input!='..'))
		{
		  input_div.removeClass('required_in_2018');
		}
	  }
		
		
	}
		*/
	var val_input=$(this).val();
	var label=$(this).prev('label');
	var input_div=$(this).parents('.input_2018');

	input_div.removeClass('active1_in_2018');

	if(val_input=='')
	{
		input_div.removeClass('active_in_2018');
		if($(this).is('.gloab'))
		{
			input_div.addClass('required_in_2018');
		}else
		{
			input_div.removeClass('required_in_2018');
		}
	}
	
}



//   
function DellImageInvoice()
{
	var for_id=$(this).attr('for');
	var data ='url='+window.location.href+'&id='+for_id;
    AjaxClient('invoices','del_img','GET',data,'AfterDellImageInvoice',for_id,0);	
}

//   
function UpdateContractorInvoice()
{
	var val=$(this).val();
	if(($.isNumeric(val))&&(val!=0))
	{
		$('.add_material_invoice').attr('col',val);
    }
}







function DellImageSupply()
{
	var for_id=$(this).attr('for');
	var data ='url='+window.location.href+'&id='+for_id;
    AjaxClient('supply','del_img','GET',data,'AfterDellImageSupply',for_id,0);	
}

function UpdateImageSupply(id)
{
	var data ='url='+window.location.href+'&id='+id;
    AjaxClient('supply','update_img','GET',data,'AfterUpdateImageSupply',id,0);	
}

function UpdateImageInvoice(id)
{
	var data ='url='+window.location.href+'&id='+id;
    AjaxClient('invoices','update_img','GET',data,'AfterUpdateImageInvoice',id,0);	
}

//     " "
function UpdateWalletStatus(id)
{
	$('.billl[rel_id='+id+']').find('.status_wallet_ada').empty();
	$('.billl[rel_id='+id+']').find('.button_ada_wall').empty().append('<div class="loader_inter"><div></div><div></div><div></div><div></div></div>');
	
	var data ='url='+window.location.href+'&id='+id;			
	
    AjaxClient('bill','bill_status','GET',data,'AfterWalletSTx',id,0);	
}

function message_load()
{
	if( $('.history_message').is(':visible') ) { 
	$('.history_message').hide();
	
	var for_id=$('.content_block').attr('id_content');	
    var data ='url='+window.location.href+'&id='+for_id+'&n_st='+$('.content_block').attr('n')+'&s='+$('.history_message').attr('s_m');
    AjaxClient('message','load_message','GET',data,'AfterMESS',for_id,0);	
	}
}

//  
function xvg_yes()
{
	var iu=$('.content_block').attr('iu');
	var id_bill=$(this).attr('rel_bill');
	
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_yes_bill.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	
}


// 
function booker_yes()
{
	var iu=$('.content_block').attr('iu');
	var id_bill=$(this).attr('rel_booker');

	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_booker_yes.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	 		
		
		
	
	
}

//   
function xvg_yes1()
{

	var attr=$(this).attr('rel_bill');

	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_edit_stock.php?id='+attr,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	
}

//   
function xvg_no1()
{
	var iu=$('.content_block').attr('iu');
	var id_bill=$(this).attr('rel_bill');

	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_stock.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	 		
		
		
	
	
}



//   
function xvg_no()
{
	var iu=$('.content_block').attr('iu');
	var id_bill=$(this).attr('rel_bill');

	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_no_bill.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
	 		
		
		
	
	
}





function vall_supply() {  
	var el_v=$(this).val();
	
	
	$('[rel_status='+$(this).attr('rel')+']').hide();
	var data ='url='+window.location.href+'&id='+$(this).attr('rel')+'&val='+el_v;
	AjaxClient('supply','status_work','GET',data,'Aftervall_supply',$(this).attr('rel'),0);			
};

function option_mat1() {
	var el_v=$(this).val();
	var id_bill=$(this).parents('[rel_id]').attr('rel_id');
	//var id_soply=soply.attr('rel_score');

		
	
	if(el_v==1)	
	{
		// 
		
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_edit_yes_bill.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
		
		//var data ='url='+window.location.href+'&id='+id_soply;
	    //AjaxClient('supply','dell_soply','GET',data,'Afterdell_soply',id_soply,0);		
		
	}
		if(el_v==2)	
	{
		// 
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_yes_bill.php?id='+id_bill,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });	
	}
	
}



function option_mat() {
	var el_v=$(this).val();
	var id_soply=$(this).parents('[supply_id]').attr('supply_id');
	//var id_soply=soply.attr('rel_score');

	
	if(el_v==1)	
	{
		// 
		
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_soply_sklad_2021.php?id='+id_soply,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
		
		//var data ='url='+window.location.href+'&id='+id_soply;
	    //AjaxClient('supply','dell_soply','GET',data,'Afterdell_soply',id_soply,0);		
		
	}
	
	
}

function UpdateCostFinery(id)
{

	var count=parseFloat($('.mat[rel_mat='+id+']').find('.mater_').val());
	var count_my=parseFloat($('.mat[rel_mat='+id+']').find('.count_finery_mater_').attr('my'));
	var id_stock=parseFloat($('.mat[rel_mat='+id+']').find('[id_stock_m]').attr('id_stock_m'));
	
	//alert(count_my);
	
	if((count!='')&&(count!=0)&&(id_stock!='')&&(id_stock!=0)&&(count_my!='')&&(count_my!=0)&&(count_my>=count))
    {
		$('.mat[rel_mat='+id+']').find('.price_finery_mater_').val('');
		//alert("!!");
		
			var rel_id=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').parents('.mat').attr('rel_w');
	var rel_mat=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').parents('.mat').attr('rel_mat');
	
	var max=parseFloat($('.mat[rel_mat='+id+']').find('.price_finery_mater_').attr('max'));
	var my=parseFloat($('.mat[rel_mat='+id+']').find('.price_finery_mater_').attr('my'));
	
	var value=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').val();	
	$('.mat[rel_mat='+id+']').find('.price_finery_mater_').removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		//if(((parseFloat(value)!=max)&&(!isNaN(max)))||(parseFloat(value)>my))
			if(((parseFloat(value)!=max)&&(!isNaN(max))))
			{
				//     
				$('.mat[rel_mat='+id+']').find('.price_finery_mater_').addClass('redaas');

			} 
				
	} 
		
		serv_mess_m($('.mat[rel_mat='+id+']').find('.price_finery_mater_'));
		summ_finery1(id);
		
		if($('[name=id_naa]').length!=0)
			{
				 	var data ='url='+window.location.href+'&id='+id_stock+'&count='+count+'&fin='+$('[name=id_naa]').val();
			} else
				{
		
		
	   	var data ='url='+window.location.href+'&id='+id_stock+'&count='+count;
	    
				}
		AjaxClient('finery','update_cost','GET',data,'AfterUpdateCostFinery',id,0);	
	} else
	{
	
		if($('[name=status_naryad]').length==0)
		{	
	$('.mat[rel_mat='+id+']').find('.price_finery_mater_').val('');
		}
		
	var rel_id=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').parents('.mat').attr('rel_w');
	var rel_mat=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').parents('.mat').attr('rel_mat');
	
	var max=parseFloat($('.mat[rel_mat='+id+']').find('.price_finery_mater_').attr('max'));
	var my=parseFloat($('.mat[rel_mat='+id+']').find('.price_finery_mater_').attr('my'));
	
	var value=$('.mat[rel_mat='+id+']').find('.price_finery_mater_').val();	
	$('.mat[rel_mat='+id+']').find('.price_finery_mater_').removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		//if(((parseFloat(value)!=max)&&(!isNaN(max)))||(parseFloat(value)>my))
			if(((parseFloat(value)!=max)&&(!isNaN(max))))
			{
				//     
				$('.mat[rel_mat='+id+']').find('.price_finery_mater_').addClass('redaas');

			} 
				
	} 	
		

	   serv_mess_m($('.mat[rel_mat='+id+']').find('.price_finery_mater_'));
	   summ_finery1(id);


	}

}


function xvg_bill()
{
	var id_soply=$(this).attr('rel_score');
	
	jQuery.scrollTo('.billl[rel_id='+id_soply+']', 1000, {offset:-120});
}







function scroll_to_bottom(speed) {
	var height= $("body").height(); 
	$("html,body").animate({"scrollTop":height},speed); 
}

 function inWindow(s){
  var scrollTop = $(window).scrollTop();
  var windowHeight = $(window).height();
  var currentEls = $(s);
  var result = [];
  currentEls.each(function(){
    var el = $(this);
    var offset = el.offset();
    if(scrollTop <= offset.top && (el.height() + offset.top) < (scrollTop + windowHeight))
      result.push(this);
  });
  return $(result);
  

}
//  
function windowSize()
{
  sl_message_width();	
}

function trim_number($number)
{
	$number=$number.replace(/\s+/g,'');
	return $number;
}

//    
function Dialog(e)
{
  if($(e.target).closest(".del_dialog").length==0)
  {
	var dialog_id=$(this).attr('rel_diagol');
	$(this).attr('href','/message/dialog/'+dialog_id+'/');
	$(this).trigger('Click');

  }
}
//    
function animation_teps()
{
	$('.teps').each(function(i,elem) {
		$(this).css('width', $(this).attr('rel_w')+"%");
		//$(this).animate({width: $(this).attr('rel_w')+"%"}, 2000, function() {  });
	});


}

//     
function sl_message_width()
{
	setTimeout ( function () {  
	if($('.smeta1').length)
		{
	var width_jk4=$('.smeta1').find('.jk4').outerWidth();  // 
	var width_jk44=$('.smeta1').find('.jk44').outerWidth(); // . 
			
	//var width_jk5=$('.smeta1').find('.jk5').outerWidth();
	//var width_jk6=$('.smeta1').find('.jk6').outerWidth();
	
    var width_jk7=$('.smeta1').find('.jk6').outerWidth();	 // 	
	var table=$('.smeta1').width();  // 
	//alert(table);	
	var ww=table-width_jk4-width_jk44-width_jk7-20;
			
			
	$('.smeta1').find('.mess_slu').width(ww);
			
	$('.smeta1').find('.hs').width((width_jk4+width_jk44));
		}
	
   }, 1000 );
	
}

//     float
function maskk(thiss)
{
	thiss.val(thiss.val().replace(/[^\d.]*/g, '').replace(/([.])[.]+/g, '$1').replace(/^[^\d]*(\d+([.]\d{0,5})?).*$/g, '$1'));
	//alert(thiss.val());
	if($('[name=save_zayy]').length > 0)
		{
	savedefault_zay(thiss);
		} else
			{
    savedefault(thiss);
			}
	
}


function maskk_max(thiss)
{
	
	var max_=0;
	//alert("!");
	var count=parseFloat(thiss.val());
	//alert(count);
var readonly=0; //   
	if ( thiss.is('[readonly]') ) { readonly=1; }

	if(count>0)
		{
	
	var mat=thiss.parents('.mat');	
	var id_stock=mat.find('.my_material').attr('id_stock_m');
	var my_stock=mat.find('.my_material').attr('count');
	
	
	$('[id_stock_m='+id_stock+']').each(function(i,elem) {
			var count_input=parseFloat($(this).parents('.mat').find('.count_finery_mater_').val());
		    if((count_input!='')&&(count_input>0))
			{
		       max_=max_ + parseFloat(count_input);
			}
    });
	max_=max_-	count;	


	//          

if(readonly==0) {
	if ((count + max_) > parseFloat(my_stock)) {
		//alert(max_);
		//alert(count);
		thiss.val(thiss.val().slice(0, -1));
	}
}
			
			
 }

	
	
	var max_=0;
	//alert("!");
	var count=parseFloat(thiss.val());
	//alert(count);
	if(count>0)
		{
	
	var mat=thiss.parents('.mat');	
	var id_stock=mat.find('.my_material').attr('id_stock_m');
	var my_stock=mat.find('.my_material').attr('count');
	
	
	$('[id_stock_m='+id_stock+']').each(function(i,elem) {
			var count_input=parseFloat($(this).parents('.mat').find('.count_finery_mater_').val());
		    if((count_input!='')&&(count_input>0))
			{
		       max_=max_ + parseFloat(count_input);
			}
    });
	max_=max_-	count;

			if(readonly==0) {
				if ((count + max_) > parseFloat(my_stock)) {
					//alert(max_);
					//alert(count);
					thiss.val('');
				}
			}
			
			
 }
		
	
	
}


//   
function maskk1(thiss)
{
	//console.log(thiss.val());
	thiss.val(thiss.val().replace(/[^\d]*/g, '').replace(/([])[]+/g, '$1').replace(/^[^\d]*(\d+([]\d{0,5})?).*$/g, '$1'));

	//console.log(thiss.val());

		if($('[name=save_zayy]').length > 0)
		{
	savedefault_zay(thiss);
		} else
			{
	savedefault(thiss);				
			}
}


var ChangeSupply=function() {
	var tr_s=$(this).parents('.suppp_tr');
	var rel_tr_s=tr_s.attr('rel_id');
	if(!tr_s.is('.active_supplyx'))
	{
	  tr_s.addClass('active_supplyx');
		$('[supply_stock='+rel_tr_s+']').show();
	} else
	{
		tr_s.removeClass('active_supplyx');
		$('[supply_stock='+rel_tr_s+']').hide();
	}
}


var slide_skkk = function() {
	
	if(!$(this).is('.slide_onon'))
	{
		$(this).find('.sklad_plus_uss').slideDown( "slow" ); 
		$(this).addClass('slide_onon');
	} else
	{
		$(this).find('.sklad_plus_uss').slideUp("slow"); 
		$(this).removeClass('slide_onon');			
	}
	
}

//   
var menuclick = function() {
	var tr_s=$(this).next(".menu_supply").find('.drops');
	if(tr_s.is(".active_menu_s")) 
	  {
		  tr_s.removeClass("active_menu_s");
		  tr_s.css("transform", "scaleY(0)");
	  } else
	  {
		  tr_s.addClass("active_menu_s");
		  tr_s.css("transform", "scaleY(1)");
	  }
}


//        
var label_show_load = function() {
	
	$('.label_s').each(function(i,elem) {
	if($(this).prev('label').length)
	{
	   if($(this).val()=='')
		   {
			   $(this).prev('label').hide();
			   
		   } else
			   {
				   
				   $(this).prev('label').show();
			   }
	
	}
	
	});
	
}


//   
var label_show = function() {
	
	
	if($(this).prev('label').length)
	{
	   if($(this).val()=='')
		   {
			   $(this).prev('label').hide();
			   
		   } else
			   {
				   
				   $(this).prev('label').show();
			   }
	
	}
	
	
	
}



function MydblclickXX()
{
var max_=0;
	if($(this).attr('readonly')==undefined) { 
	//alert("!");
	var count=$(this).attr('max');
	//alert(count);

	
	var mat=$(this).parents('.mat');	
	var id_stock=mat.find('.my_material').attr('id_stock_m');
	var my_stock=mat.find('.my_material').attr('count');
	
	
	$('[id_stock_m='+id_stock+']').each(function(i,elem) {
			var count_input=parseFloat($(this).parents('.mat').find('.count_finery_mater_').val());
	
		    if((count_input!='')&&(count_input>0)&&((!isNaN(count_input))))
			{
		       max_=max_ + parseFloat(count_input);
			}
    });
		/*
		if(count!='')
			{
	max_=max_- parseFloat(count);	
			}
			*/
		//alert(max_);
	
	if(parseFloat(count+max_)<=parseFloat(my_stock))
	{
		
		 $(this).val($(this).attr('max')).change();
				if($('[name=save_zayy]').length > 0)
		{
	savedefault_zay($(this));
		} else
			{
	   savedefault($(this));
			}
		
	}
			
		
		
		
	}
}







//   
function Mydblclick()
{
	if($(this).attr('readonly')==undefined) { 
	   $(this).val($(this).attr('max')).change();
				if($('[name=save_zayy]').length > 0)
		{
	savedefault_zay($(this));
		} else
			{
	   savedefault($(this));
			}
	}
	
}

//    
function serv_mess(id_trr)
{
	var id_work=$('.work__s[id_trr='+id_trr+']').attr('rel_id');
	var count=parseFloat($('#count_work_'+id_trr).val());
	var price=parseFloat($('#price_work_'+id_trr).val());
	//alert(price);
	var max_count=parseFloat($('#count_work_'+id_trr).attr('max'));	
	var max_price=parseFloat($('#price_work_'+id_trr).attr('max'));
	var flag_show=0;
	var count_raz=0;
	var price_raz=0;
	if(count>max_count) {flag_show=1; count_raz=max_count; } else {  count_raz=count; }
	if(price>max_price) {flag_show=1;}
	//alert(flag_show);
	//$('.w_size').append(' '+flag_show);
	
	//      
	$('.work__s[id_trr='+id_trr+']').find('.exceed').empty();
	var exceed=0; //  
	if($('.exceed').length)
		{
			exceed=1;
			var exceed_summ= ((count_raz*max_price)-(count*price)).toFixed(2);
			if(exceed_summ>0)
				{
					exceed=0;
				}
		}
	
	
	if(flag_show==1)
	{	
	   // 			
	   $('.work__s[id_trr='+id_trr+']').next().find('.messa').stop(true).slideDown( "slow", function() {  $(this).css("height", "");  });
	   //alert("!");
	   if(exceed==1) {$('.work__s[id_trr='+id_trr+']').find('.exceed').empty().append('+'+$.number(Math.abs(exceed_summ), 2, '.', ' '));	}
		//alert("!!");
	   //$('.messa[id_mes='+id_work+']').stop(true).slideDown( "slow" );
	} else
	{
		//$('.messa[id_mes='+id_work+']').stop(true).slideUp( "slow" );
		$('.work__s[id_trr='+id_trr+']').next().find('.messa').stop(true).slideUp( "slow" );
		 //if(exceed==1) {$('.work__s[id_trr='+id_trr+']').find('.exceed').empty();	}
		
	}
}

//    
function serv_mess_m(thiss)
{
	//alert("!!!");
	var rel_mat=thiss.parents('.mat').attr('rel_mat');
	
	//alert(rel_mat);
	
	var count=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').val());
	var price=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').val());
	
	//alert(price);
	var max_count=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').attr('max'));
	var max_my=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').attr('my'));
	var max_price=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').attr('max'));
	var flag_show=0;
	var count_raz=0;
	var price_raz=0;
	//alert(max_count);
	//alert(count);
	if((count!='')||(count==0))
		{
			//alert(count);
	if(((count!=max_count)&&(!isNaN(max_count)))||(count==0)) {flag_show=1; count_raz=max_count; } else {  count_raz=count; }
	//if(price>max_price) {flag_show=1;}
		
	if($('[name=status_naryad]').length==0)
		{
	if(count>max_my) {flag_show=2;}
		}
			
		}
	//alert(flag_show);
	//$('.w_size').append(' '+flag_show);
	//alert(count);
	/*
	if((count!='')&&(count!=0))
	{
	  UpdateCostFinery(rel_mat);
	}
	*/
		//      
	$('.mat[rel_mat='+rel_mat+']').find('.exceed').empty();
	var exceed=0; //  
	if($('.exceed').length)
		{
			exceed=1;
			var exceed_summ= ((count_raz*max_price)-(count*price)).toFixed(2);
			if(exceed_summ>0)
				{
					exceed=0;
				}
		}
	//alert(flag_show);
	if(flag_show==1)
	{	
	   // 			
	   $('.mat[rel_mat='+rel_mat+']').next().find('.messa').stop(true).slideDown( "slow" );
		$('.mat[rel_mat='+rel_mat+']').next().next().find('.messa_my').stop(true).slideUp( "slow" );
		if(exceed==1) { $('.mat[rel_mat='+rel_mat+']').find('.exceed').empty().append('+'+$.number(Math.abs(exceed_summ), 2, '.', ' '));	}
		//alert("!!");
	   //$('.messa[id_mes='+id_work+']').stop(true).slideDown( "slow" );
	} else
	{
		//$('.messa[id_mes='+id_work+']').stop(true).slideUp( "slow" );
		$('.mat[rel_mat='+rel_mat+']').next().find('.messa').stop(true).slideUp( "slow" );	
		
		
		if(flag_show==2)
	    {
			$('.mat[rel_mat='+rel_mat+']').next().next().find('.messa_my').stop(true).slideDown( "slow" );
			
			$('.js-ut_nar').hide();
			$('.js-pod_nar').hide();
			$('.js-add_nar').show();
			
			
		} else
		{
			$('.mat[rel_mat='+rel_mat+']').next().next().find('.messa_my').stop(true).slideUp( "slow" );	
		}
			
		
	}
	
}

//     -   
function serv_mess_m_app(thiss)
{
	var rel_mat=thiss.parents('.mat_zz').attr('rel_mat_zz');
	
	var count=$('.mat_zz[rel_mat_zz='+rel_mat+']').find('.count_app_mater_').val();
	//var price=$('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').val();
	
	//alert(price);
	var max_count=parseFloat($('.mat_zz[rel_mat_zz='+rel_mat+']').find('.count_app_mater_').attr('max'));	
	//var max_price=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').attr('max'));
	var flag_show=0;
		var count_raz=0;
	//var price_raz=0;
	if(count>max_count) {flag_show=1; count_raz=max_count; } else {  count_raz=count; }
	//if(price>max_price) {flag_show=1;}
	//alert(flag_show);
	//$('.w_size').append(' '+flag_show);
	
	
	if(flag_show==1)
	{	
	   // 			
	   $('.mat_zz[rel_mat_zz='+rel_mat+']').next().next().find('.messa').stop(true).slideDown( "slow" );
		//if(exceed==1) { $('.mat[rel_mat='+rel_mat+']').find('.exceed').empty().append('+'+$.number(Math.abs(exceed_summ), 2, '.', ' '));	}
		//alert("!!");
	   //$('.messa[id_mes='+id_work+']').stop(true).slideDown( "slow" );
	} else
	{
		//$('.messa[id_mes='+id_work+']').stop(true).slideUp( "slow" );
		$('.mat_zz[rel_mat_zz='+rel_mat+']').next().next().find('.messa').stop(true).slideUp( "slow" );	
		
	}
	
}

//   
function summ_finery1(rel_mat)
{
	
	var count=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').val());
	var price=parseFloat($('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').val());
	
	var sum=$('.mat[rel_mat='+rel_mat+']').find('.summa_finery_mater_');
	
	var value=(count*price).toFixed(2);
	//alert(sum);
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
	  sum.empty().append($.number(value, 2, '.', ' '));
	} else
		{
	  sum.empty();
		}	
	UpdateItog();
}

//       
function summ_finery(id_trr)
{
	var rel_id=$('.work__s[id_trr='+id_trr+']').attr('rel_id');
	var count=parseFloat($('#count_work_'+id_trr).val());
	var count_all_work=parseFloat($('#count_work_'+id_trr).attr('all'));
	var price=parseFloat($('#price_work_'+id_trr).val());
	var sum=$('#summa_finery_'+id_trr);
	var value=(count*price).toFixed(2);
	//alert(sum);
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
	sum.empty().append($.number(value, 2, '.', ' '));
	} else
		{
	sum.empty();
		}
	
	//      
	if((count!=0)&&(count!='')&&($.isNumeric(count)))
	{
//alert("!!");
	   $('.mat[rel_w='+rel_id+']').each(function(i,elem) {
	    var count_all_matt = parseFloat($(this).find('.count_finery_mater_').attr('all'));
		var count_ost_matt = parseFloat($(this).find('.count_finery_mater_').attr('ost'));
		   
		//var count_end = ((count_all_matt*count)/count_all_work).toFixed(4);
		   var count_end = ((count_all_matt*count)/count_all_work).toFixed(3);
		var flag_soot=1;   
		//alert(count_all_matt);
		//alert(count);   
		   //alert(count_all_work);   
		//  -      
		// -      
		if(count_end>count_ost_matt)
		{
		  count_est=count_end;	 //EST -  
		  //count_end=count_ost_matt;
			count_end=count_ost_matt.toFixed(3);
		  flag_soot=0;  
		}
		
		 
		   
		if(flag_soot==1)
			{
		$(this).find('.count_finery_mater_').attr('placeholder','MAX - '+count_end);
		$(this).find('.count_finery_mater_').attr('max',count_end);
												  
		$(this).find('.hidden_max_count').val(count_end);										  
		$(this).find('.count_finery_mater_').prev('label').empty().append('MAX ('+count_end+')');
		$(this).find('.count_finery_mater_').change();   
			} else
				{
		$(this).find('.count_finery_mater_').attr('placeholder','MAX - '+count_end+' EST - '+count_est);
		$(this).find('.count_finery_mater_').attr('max',count_end);
												  
		$(this).find('.hidden_max_count').val(count_end);										  
		$(this).find('.count_finery_mater_').prev('label').empty().append('MAX ('+count_end+')'+' EST ('+count_est+')');
		$(this).find('.count_finery_mater_').change();  				
					
					
				}
				
       });
	} else
	{
	
	   $('.mat[rel_w='+rel_id+']').each(function(i,elem) {

		
		$(this).find('.count_finery_mater_').attr('placeholder','');
		$(this).find('.count_finery_mater_').attr('max','');
		$(this).find('.count_finery_mater_').prev('label').empty();
		$(this).find('.count_finery_mater_').change();  
		  $(this).find('.hidden_max_count').val("");	 
		   
       });		
	
	}
	UpdateItog();
}

// 
function del_dialog()
{
	if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_dialog.php?id='+$(this).attr("for"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
}

//     

function DellZayvaMaterial()
{

	if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_material_zayava.php?id='+$(this).attr("id_rel")+'&n='+$(this).attr("naryd"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;	
}

function DellZayvaMaterial1()
{

	if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_material_zayava1.php?id='+$(this).attr("id_rel")+'&n='+$(this).attr("zayu"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;	
}

//    
function DellNarydWork()
{
	if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_no_ajax.php?id='+$(this).attr("id_rel")+'&n='+$(this).attr("naryd"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
}

//    
function DellZayZay()
{
	if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_zay_zay.php?id='+$(this).attr("id_rel"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
}

//  
function DellNaryd()
{
	if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_nariad.php?id='+$(this).attr("id_rel"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
}

//   
function DellNarydWork1()
{
 if($(this).is("[id_rel]"))
 {
  if($.isNumeric($(this).attr("id_rel")))
  {
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_work_is_nariad.php?id='+$(this).attr("id_rel")+'&n='+$(this).attr("naryd"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
 }
}

 if($(this).parents('.my_no').length!=0)
 {
	 $('.pod_zay').hide(); $('.add_zay').show();
 }

  
return false;
}


//  
function password_butt()
{
	var cb_h=$(this).parents('.password_turs').find('input');
	if(cb_h.val()!=$(this).attr('id'))
	{
		cb_h.val($(this).attr('id'));

		$(this).parents('.password_turs').find('.choice-radio i').removeClass('active_task_cb');
		$(this).parents('.password_turs').find('.input-choice-click-pass').removeClass('active_pass');

		$(this).find('.choice-radio i').addClass('active_task_cb');
		$(this).addClass('active_pass');
	}
}



//      
function BasketUpdate_Z(dom_id)
{
	var cookie = $.cookie(window.b_cm+'_'+dom_id);
	//alert(window.b_co);
	var cc = cookie.split('.');
	var counts=cc.length;
	$('.basket_order').empty().append(counts);
	$('.count_workssss').val(counts);
}


//    
function BasketUpdate(dom_id)
{
	var cookie = $.cookie(window.b_co+'_'+dom_id);
	//alert(window.b_co);
	var cc = cookie.split('.');
	var counts=cc.length;
	$('.basket_order').empty().append(counts);
	$('.count_workssss').val(counts);
}

function updatecash(id)
{
	       var data ='url='+window.location.href+'&id='+id;
	        AjaxClient('cashbox','update_cash','GET',data,'AfterUCASH',id,0);
}


function UpdateItog()
{
	var sum_work=0;
	var sum_mat=0;
	
	//lert($('.work__s').find('.summ_price').text());
	//alert($('.work__s').find('.summ_price').length);
	$('.work__s').find('.summ_price').each(function(i,elem) {
		if($(this).text()!='')
			{
		var vall=parseFloat(trim_number($(this).text()));
	     if ((vall!='')&&(vall!=0)) {sum_work=sum_work+vall;	}
			}
    });
	$('.mat[rel_w]').find('.summa_finery_mater_').each(function(i,elem) {
				if($(this).text()!='')
			{
		var vall=parseFloat(trim_number($(this).text()));
	     if ((vall!='')&&(vall!=0)) {sum_mat=sum_mat+vall;	}
			}
    });
	
	
	var sum_exceed=0;
	$('.previ').hide();
	$('.exceed').each(function(i,elem) {
			if($(this).text()!='')
			{
		var vall=parseFloat(trim_number($(this).text()));
	     if ((vall!='')&&(vall!=0)) {sum_exceed=sum_exceed+vall;	}
			}
    });	
	if(sum_exceed!=0)
	{
		//$.number( 5020.2364, 2, ',', ' ');   // Outputs: 5 020,21	
		$('.previ').find('.itogsumall1').empty().append('+'+$.number(sum_exceed, 2, '.', ' '));	
		$('.previ').show();	
	}
	
	
	//alert(sum_work);
	$('.itogsummat').empty().append($.number(sum_mat.toFixed(2), 2, '.', ' '));
	$('.itogsumwork').empty().append($.number(sum_work.toFixed(2), 2, '.', ' '));
	//$('.itogsumall').empty().append($.number((sum_work+sum_mat).toFixed(2), 2, '.', ' '));	
}
//     - 
function HistoryN1(event) {


	var block_his=$(this).parents('.edit_panel11_mat').find('.history_act_mat');
	$('.history_act_mat').not(block_his).hide();




	var block_his=$(this).parents('.edit_panel11_mat').find('.history_act_mat');
	//alert($('#yourID:visible').length);
	if(block_his.is(':visible'))
	{

		//alert("2");
		//
		block_his.slideUp("slow");
		//event.stopPropagation();

	} else
	{
		block_his.slideDown("slow");
		//alert("3");
	}

}

//    
function HistoryN()
{
	var id_rel=$(this).attr('for');
	if($(this).is('.shows'))
	{
		$(this).removeClass('shows');
		$('.histtory[rel_h='+id_rel+']').hide();
	} else
	{
	  if($('.histtory[rel_h='+id_rel+']').length)
	  {
		 $(this).addClass('shows');
		 $('.histtory[rel_h='+id_rel+']').show();
	  } else
	  {
			$('.loader_history[fo='+id_rel+']').show();
		    $(this).addClass('shows');
		    	
	        var data ='url='+window.location.href+'&id='+id_rel;
	        AjaxClient('prime','history_works','GET',data,'AfterHIST',id_rel,0);
			  
	  }
	
	}
}
function AfterHIST(data,update)
{
	if ( data.status=='reg' )
    {
		var loader=$('.loader_history[fo='+update+']');
		loader.hide();
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {				
		var loader=$('.loader_history[fo='+update+']');
		loader.hide();
		loader.after(data.echo);
	}
	
}

//        
function MmyHandlerApp()
{
	maskk($(this));
	
	var rel_id=$(this).parents('.mat_zz').attr('rel_w');
	var rel_mat=$(this).parents('.mat_zz').attr('mat_zz');
	var loader=$('[id_loader='+rel_mat+']');
	var max=parseFloat($(this).attr('max'));
	
	
	
	var value=$(this).val();	
	$(this).removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		if(parseFloat(value)>max)
			{
				//     
				$(this).addClass('redaas');
			} 
			var pr=Math.round(parseFloat(loader.attr('rel_w'))+((value*(100-parseFloat(loader.attr('rel_w'))))/max));
		    if(pr>100) {pr=100;}		
		    loader.stop(true).animate({width: pr+"%"}, 2000);		
	} else
	{
		// 
		loader.stop(true).animate({width: loader.attr('rel_w')+"%"}, 2000);	
	}
		
	serv_mess_m_app($(this));
	
	//    
	
	
	
	
}


//        
function MmyHandlerXX()
{
	var rel_mat=$(this).parents('.mat').attr('rel_mat');	
	var count=$('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').val();
	var old_count=$('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').attr('old_count');
	//alert(old_count);
	if((count!='')&&(count!=0))
	{
		if(old_count!=count)
			{
	  $('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').attr('old_count',count);	
	  UpdateCostFinery(rel_mat);
			}
	}	else
		{
			
				$('.mat[rel_mat='+rel_mat+']').find('.price_finery_mater_').val('').removeClass('redaas');
					if(old_count!=count)
			{
	  $('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').attr('old_count',count);	

			}
			
		}
	
}



//        
function MmyHandler()
{
	maskk($(this));
	
	maskk_max($(this));

	//alert("!");
	var rel_id=$(this).parents('.mat').attr('rel_w');
	var rel_mat=$(this).parents('.mat').attr('rel_mat');
	
	var max=parseFloat($(this).attr('max'));
	var my=parseFloat($(this).attr('my'));
	var protocol_my=1; //         
	if($('.yes_signedd_jops').length)
	{
		protocol_my=0;
	}


	var value=$(this).val();	
	$(this).removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		//my         
		//if(((parseFloat(value)!=max)&&(!isNaN(max)))||(parseFloat(value)>my))
		if(((parseFloat(value)!=max)&&(!isNaN(max))))
			{
				//     
				$(this).addClass('redaas');
				//alert("!");
			}

		if(protocol_my==1)
		{
			if(parseFloat(value)>my)
			{
				$(this).addClass('redaas');
			}
		}
				
	} 
	
	
	
	/*
	var rel_mat=$(this).parents('.mat').attr('rel_mat');	
	var count=$('.mat[rel_mat='+rel_mat+']').find('.count_finery_mater_').val();
	
	if((count!='')&&(count!=0))
	{
	  UpdateCostFinery(rel_mat);
	}	
	*/
	
	
	
	serv_mess_m($(this));
	summ_finery1(rel_mat);
	
	//    
	
	
	
	
}


//      
function myHandler()
{
	maskk($(this));
	var rel_id=$(this).parents('.work__s').attr('rel_id');
	var id_trr=$(this).parents('.work__s').attr('id_trr');
	var loader=$('[id_loader='+rel_id+']');
	var max=parseFloat($(this).attr('max'));
	var value=parseFloat($(this).val());

	$(this).removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		//alert(value);
		
		if(parseFloat(value)>max)
			{
				//     
				$(this).addClass('redaas');
				//alert("!");
			}
		var pr=Math.round(parseFloat(loader.attr('rel_w'))+((value*(100-parseFloat(loader.attr('rel_w'))))/max));
		if(pr>100) {pr=100;}		
		loader.stop(true).animate({width: pr+"%"}, 2000);	
	} else
	{
		// 
		loader.stop(true).animate({width: loader.attr('rel_w')+"%"}, 2000);	
	}
	serv_mess(id_trr);
	summ_finery(id_trr);
	
	//    
	
	
	
	
}

//        
function myHandler1()
{
	//alert('var1-'+$(this).val());
	maskk($(this));

	//alert('var2-'+$(this).val());

	var rel_id=$(this).parents('.work__s').attr('rel_id');
	var id_trr=$(this).parents('.work__s').attr('id_trr');
	
	var max=parseFloat($(this).attr('max'));
	var value=$(this).val();
	
	$(this).removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		//alert(value);
		if(parseFloat(value)>max)
			{
				//     
				//alert(max);
				$(this).addClass('redaas');
			}
		
	} 
	serv_mess(id_trr);
	summ_finery(id_trr);
}







//     ajax
function initializeTimer() {
	
	var endDate = new Date(); //    
	var endDate =((endDate/1000)+1800)*1000; //30 
	var currentDate = new Date(); //   
	var seconds = (endDate-currentDate) / 1000; //      
	if (seconds > 0) { //  -     
		var minutes = seconds/60; //      
		var hours = minutes/60; //      
		minutes = (hours - Math.floor(hours)) * 60; //  -     
		hours = Math.floor(hours); //      
		seconds = Math.floor((minutes - Math.floor(minutes)) * 60); //  -     
		minutes = Math.floor(minutes); //    -     
		
		setTimePage(hours,minutes,seconds); //    
		
		function secOut() {
		  if (seconds == 0) { //    
			  if (minutes == 0) { //    
				  if (hours == 0) { //    
					  showMessage(timerId); //     
				  }
				  else {
					  hours--; //  - 
					  minutes = 59; //   
					  seconds = 59; //  
				  }
			  }
			  else {
				  minutes--; //  - 
				  seconds = 59; //  
			  }
		  }
		  else {
			  seconds--; //  - 
		  }
		  setTimePage(hours,minutes,seconds); //     
		}
		timerId = setInterval(secOut, 1000) //      
	}
	else {
		//alert("   ");
	}
}

//    
function setTimePage(h,m,s) { //     

    if(m<10){ m='0'+m;}
	if(s<10){ s='0'+s;}
	
    $('.clock_table').empty().append(m+':'+s);
	
	if(m<5)
	{
		$('.clock_table').show();
	}
}

// ,    
function showMessage(timerId) { 
	clearInterval(timerId); 
	$.arcticmodal('close');	
}

//    
function WindowLogin()
{
	  $(document).unbind('mousemove.time keydown.time scroll.time');
	  //  
	  //$.cookie('user_id', null, {path:'/'});  
	  //$.cookie('da', null, {path:'/'}); 

	clearInterval(timerId);
	$.arcticmodal('close');

	  //   
	/*
	  $.arcticmodal({
    type: 'ajax',
    url: 'forms/login.php?url='+window.location.href,
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	 
    }

  });*/

	$.arcticmodal({
		type: 'ajax',
		url: 'forms/login_new.php?url='+window.location.href,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

	});



	  
	  
	  
      idleState = true; 	
}

function autoReloadHak(){
  var goal = self.location;
  location.href = goal;
}
function TimeHak()
{

	var tsl = $.cookie('tsl');
	//alert(tsl);
	//alert(cookie_new);
	if((tsl!=null)&&(tsl==1) )
	{
	  autoReloadHak();
	}
}


//         
function TimeSystem()
{ 
  //$('.debug').empty().append($.cookie("tss"));	
	
  if((!isNaN(localStorage.getItem('tss')))) 
  { 
	//$('.debug').empty().append('!1');
	if(idTimeStampe!=localStorage.getItem('tss'))
   {
	   // $('.debug').empty().append(localStorage.getItem('tss'));
		idTimeStampe=localStorage.getItem('tss');   
	    clearTimeout(idleTimer); //    
	    idleState = false;
        idleTimer = setTimeout(timesss, idleWait);	   
	   }
   }
}





//  
function NotificationSystem()
{ 
  //
  if($('.users_rule').is('[not]')) 
  {  		
    var data='tk='+$('.users_rule').attr('not');	
    nprogress=1;	  
    AjaxClient('notification','even','GET',data,'AfterNofi',1,0);	
  }
}



function NotifSystem()
{
//        	
 if(typeof NotifVar == "undefined")	
 { 
  //timerS = setInterval(TimeSystem, 1000);	 
  $(document).bind('mousemove.notif keydown.notif scroll.notif', function(){
    clearTimeout(idleTimerx); //    
	 
     // $.cookie('tss', $.now(), {expires: 1,path: '/'});
	  
	  //$('.debug').empty().append($.cookie('tss'));	  
	  
    if(idleStatex == true){ 
      //    
      idleWait_yes=idleWait_start;
	  clearInterval(timerSx);
	  timerSx = setInterval(NotificationSystem, idleWait_yes); 
	  NotificationSystem();	
    }
 
    idleStatex = false;
	idleWait_yes=idleWait_start; 
	//clearInterval(timerSx);
	//timerSx = setInterval(NotificationSystem, idleWait_yes);   
	  
    idleTimerx = setTimeout(timesssx, idleWait_stop);
	 
  });
  timerSx = setInterval(NotificationSystem, idleWait_yes); 
  $("body").trigger("mousemove"); //   ,   	
 }
}

//     10 
function timesssx() { 
	  
	  //       
      //    
	  //alert('  ');
	  //$(document).unbind('mousemove.time keydown.time scroll.time');
	  //  
	  //$.cookie('user_id', null, {path:'/'});  
	  //$.cookie('da', null, {path:'/'}); 
	  
	  //   
	  idleWait_yes=idleWait_end;
      idleStatex = true; 
	  clearInterval(timerSx);
	  timerSx = setInterval(NotificationSystem, idleWait_yes); 
    }


//                
function updateloginhak()
{
	timerH = setInterval(TimeHak, 15000);	
}

//         
function ExitSystem()
{
 if(typeof LoginVar == "undefined")	
 { 
  timerS = setInterval(TimeSystem, 1000);	 
  $(document).bind('mousemove.time keydown.time scroll.time', function(){
    clearTimeout(idleTimer); //    
	 
      //$.cookie('tss', $.now(), {expires: 100,path: '/'});
	  localStorage.setItem('tss', $.now());
	 // $.cookie('tss', $.now());
	  //$('.debug').empty().append($.cookie("tss"));
	  //$.cookie('tss', $.now(), {expires: 60,path: '/',domain: window.is_session,secure: false};
	  //$.cookie('iss', 's', {expires: 60,path: '/'});
	  
	    
	  
    if(idleState == true){ 
      //    
    }
 
    idleState = false;
    idleTimer = setTimeout(timesss, idleWait);
  });
 
  $("body").trigger("mousemove"); //   ,   	
 }
}
//    
function timesss() { 
	  clearInterval(timerS);
	  //       
	  setTimeout ( function () { autoReloadHak(); }, 60000 );
      //    
	  //alert('  ');
	  $(document).unbind('mousemove.time keydown.time scroll.time');
	  //  
	  //$.cookie('user_id', null, {path:'/'});  
	  //$.cookie('da', null, {path:'/'}); 
	  $.cookie("tsl", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
	  //   

	/*
	  $.arcticmodal({
    type: 'ajax',
    url: 'forms/login.php?url='+window.location.href,
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	 
    }

  });
	*/
	$.arcticmodal({
		type: 'ajax',
		url: 'forms/login_new.php?url='+window.location.href,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

	});
	  
      idleState = true; 
    }







//               
function BasketMaterial()
{
	var id_dom=$('.content_block').attr('dom');
	if($('.add_v_zay').length)
	{
	var cookie = $.cookie(window.b_co+'_'+id_dom);
	} else
	{
	var cookie = $.cookie(window.b_cm+'_'+id_dom);		
	}
	//alert(window.b_co);
	//alert(id_dom);
	
	if($('.add_v_zay').length)
	{
	//    
	if(cookie==null) {  $('.js-count-mat-update-app').slideUp("slow"); $('.js-update-mat-app').hide(); } else
	{
		$('.js-update-mat-app').show();
		var cc = cookie.split('.');
	    var counts=cc.length;
		$('.js-count-mat-update-app').empty().append(counts);

		$('.js-count-mat-update-app').slideDown("slow");

		//$('.naryd_end i').css('transform','scale(2)');
		//$('.naryd_end i').scale(1.5);
		/*
		$('.font-rank-inner11').animate({scale: "1.5"}, 200, function() {  $('.font-rank-inner11').animate({scale: "1"}, 200); });
*/

		 $('#nprogress').show();
		$('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
	}
	} else
	{		
	
	// 		
	
	if(cookie==null) { $('.material_end').remove();  $('.material_inv').remove();} else
	{
		
		if(!$("div").is(".material_end")) {
			$('.add_mmm').after('<div class="material_end" data-tooltip="   "><a href="app/add/' + id_dom + '/">d<i></i></a></div>');
		}
		if(!$("div").is(".material_inv")) {

			$('.add_iii').after('<div class="material_inv" data-tooltip=" "><a href="invoices/add/'+id_dom+'/">H<i></i></a></div>');

		}
		var cc = cookie.split('.');
	    var counts=cc.length;
		$('.material_end i').empty().append(counts);
		$('.material_inv i').empty().append(counts);
		//$('.naryd_end i').css('transform','scale(2)');
		//$('.naryd_end i').scale(1.5);
		$('.material_end i').animate({scale: "1.5"}, 200, function() {  $('.material_end i').animate({scale: "1"}, 200); });

		$('.material_inv i').animate({scale: "1.5"}, 200, function() {  $('.material_inv i').animate({scale: "1"}, 200); });

		 $('#nprogress').show();
		$('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
	}
	}
	
	//       
	/*
	var numOpt=$('.block_i');
	$('.block_i').find('.count_basket_razdel').empty();
	numOpt.each(function (index, value) 
	{ 
			var cc=$(this).find('.checher').length;
			if(cc!=0)
			{
			   $(this).find('.count_basket_razdel').empty().append(cc);	
			}
	});
	*/
}



//         -         
function BasketFinery()
{
	var id_dom=$('.content_block').attr('dom');
	var cookie = $.cookie(window.b_co+'_'+id_dom);
	//alert(window.b_co);
	//alert(cookie);
	if(($('.add_v_naryad').length)||($('.add_v_zay').length))
	{
		//alert("!");
	//   
		/*
	if(cookie==null) { $('.font-rank11').remove(); $('.js-add_nar').hide(); $('.add_zayy').hide(); $('.js-update-mat-app').hide();     } else
	{
		$('.js-add_nar').show();
		$('.add_zayy').show();
		$('.js-update-mat-app').show();

		var cc = cookie.split('.');
	    var counts=cc.length;
		$('.font-rank-inner11').empty().append(counts);
		//$('.naryd_end i').css('transform','scale(2)');
		//$('.naryd_end i').scale(1.5);
		$('.font-rank-inner11').animate({scale: "1.5"}, 200, function() {  $('.font-rank-inner11').animate({scale: "1"}, 200); });
		 $('#nprogress').show();
		$('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
	}
*/

		if(cookie==null) {  $('.js-count-mat-update-app').slideUp("slow"); $('.js-add_nar').hide(); } else
		{
			$('.js-add_nar').show();
			var cc = cookie.split('.');
			var counts=cc.length;
			$('.js-count-mat-update-app').empty().append(counts);

			$('.js-count-mat-update-app').slideDown("slow");

			//$('.naryd_end i').css('transform','scale(2)');
			//$('.naryd_end i').scale(1.5);
			/*
            $('.font-rank-inner11').animate({scale: "1.5"}, 200, function() {  $('.font-rank-inner11').animate({scale: "1"}, 200); });
    */

			$('#nprogress').show();
			$('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
		}


	} else
	{		
	// 		
	
	if(cookie==null) { $('.naryd_end').remove(); } else
	{
		
		if(!$("div").is(".naryd_end"))
		{
			$('.add_nnn').after('<div class="naryd_end" data-tooltip=" "><a href="worder/add/'+id_dom+'/">4<i></i></a></div>');
		}
		var cc = cookie.split('.');
	    var counts=cc.length;
		$('.naryd_end i').empty().append(counts);
		//$('.naryd_end i').css('transform','scale(2)');
		//$('.naryd_end i').scale(1.5);
		$('.naryd_end i').animate({scale: "1.5"}, 200, function() {  $('.naryd_end i').animate({scale: "1"}, 200); });
		 $('#nprogress').show();
		$('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });
	}
	}
	//       
	var numOpt=$('.block_i');
	$('.block_i').find('.count_basket_razdel').empty();
	numOpt.each(function (index, value) 
	{ 
			var cc=$(this).find('.checher').length;
			if(cc!=0)
			{
			   $(this).find('.count_basket_razdel').empty().append(cc);	
			}
	});
}


function compareNumbers(a, b) {
  return a - b;
}

//        
function CookieListS(name,id,command,sort,split)
{
//del - add
//alert($.cookie(name));
	var cookie = $.cookie(name);
	//alert(cookie);
	if(cookie==null) { $.cookie(name, id, {expires: 60,path: '/',domain: window.is_session,secure: false,samesite:'lax'});
	} else
	{
		if(command=='del')
		{

			var cc = cookie.split(split);
			var text='';
			var lp=0;
			for ( var t = 0; t < cc.length; t++ )
			{
				if(cc[t]!=id)
				{
					if(cc[t]!='')
					{
						if(lp==0)
						{
							text=cc[t];
						} else
						{
							text=text+split+cc[t];
						}
						lp++;
					}
				}
			}
			if(text=='')
			{
				$.cookie(name, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
			} else
			{
				$.cookie(name, text, {path: '/',domain: window.is_session,secure: false,samesite:'lax'});  //60 
			}

		} else
		{
			//alert(sort);
			if (sort === undefined) {
				$.cookie(name, cookie+split+id, {path: '/',domain: window.is_session,secure: false,samesite:'lax'}); //60 
			} else
			{
				if(sort=='sort')
				{
					var jon_cookie=cookie+split+id;
					var jon_cc = jon_cookie.split(split);

					jon_cc= jon_cc.sort(compareNumbers);
					//alert(jon_cc.join("."));
					$.cookie(name, jon_cc.join(split), {path: '/',domain: window.is_session,secure: false,samesite:'lax'}); //60 

				}

			}



		}
	}
	//alert(cookie);
}


//     
function CookieList(name,id,command,sort)
{
//del - add
//alert($.cookie(name));
var cookie = $.cookie(name);
	//alert(cookie);
if(cookie==null) { $.cookie(name, id, {expires: 60,path: '/',domain: window.is_session,secure: false,samesite:'lax'});
 } else
{
	if(command=='del')
	{
		
	var cc = cookie.split('.');
	var text='';
	var lp=0;
	for ( var t = 0; t < cc.length; t++ ) 
	{ 
	  if(cc[t]!=id)
	  {
		  if(cc[t]!='')
		  {	  
		    if(lp==0)
		    {
			  text=cc[t];
		    } else
		    {
			  text=text+'.'+cc[t];
		    }
		    lp++;
		  }
	  }
	}
	if(text=='')
	{
		$.cookie(name, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
	} else
	{
	    $.cookie(name, text, {path: '/',domain: window.is_session,secure: false,samesite:'lax'});  //60 
	}
	
	} else
	{
		//alert(sort);
		  if (sort === undefined) {
               $.cookie(name, cookie+'.'+id, {path: '/',domain: window.is_session,secure: false,samesite:'lax'}); //60 
          } else
	      {
				  if(sort=='sort')
				  {
						var jon_cookie=cookie+'.'+id;
					    var jon_cc = jon_cookie.split('.'); 
					  
					   jon_cc= jon_cc.sort(compareNumbers);
					   //alert(jon_cc.join("."));
					   $.cookie(name, jon_cc.join("."), {path: '/',domain: window.is_session,secure: false,samesite:'lax'}); //60 
					    
				  }
				  
		  }
		
		
		
	}
}
	//alert(cookie);
}



//  
function ToolTip()
{
	
$("[data-tooltip]").mousemove(function (eventObject) {
		
		if(!$("div").is("#tooltip"))
		{
		  $("body").append('<div id="tooltip"></div>');
		}

        $data_tooltip = $(this).attr("data-tooltip");
     $("#tooltip").html($data_tooltip);
	var offset = $(this).offset();
	
	    
	//$('.debug').empty().append(offset.left+'-'+$(window).width()+'-'+$('#tooltip').width()+'-'+eventObject.pageX);
	//var razn=offset.left+$('#tooltip').width();

	if(eventObject.pageX>=($(window).width()/2))
		{
        $("#tooltip").css({ 
                         "top" : eventObject.pageY + 5,
                        "left" : eventObject.pageX - $('#tooltip').outerWidth() - 5
		
                     })
                     .show();			
		}else
	{
        $("#tooltip").css({ 
                         "top" : eventObject.pageY + 5,
                        "left" : eventObject.pageX + 5
                     })
                     .show();
	}
    }).mouseout(function () { $("#tooltip").remove(); });

}

//    
var close_all_razdel = function() {
		
		var id_content=$('.content_block').attr('id_content');		
		$('.block_i .i__').parent().parent().removeClass("active");
		$.cookie("l_"+id_content, null, {path:'/'}); 
		$('.block_i .i__').empty().append("+");		  
}

//  
//  
 var minlen = 3; //   
 var paddingtop = 30; //    
 var scrollspeed = 200; //  
 var keyint = 2000; //    
 var term = '';
 var n = 0;
 var search_step=0;
 var time_keyup = 0;
 var time_search = 0;

var  dosearch = function() {
	window.search_step=0;
  term = $('.search_seb').find('input').val();
  $('var.highlight').each(function(){ $(this).after($(this).html()).remove(); });
  var t = '';
  var n=0;
  if(term!='')
	  {
  $('.s_j').each(function(){ 

    $(this).html($(this).html().replace(new RegExp(term, 'ig'), '<var class="highlight">$&</var>')); 

   }); 
	  }
    n = $('var.highlight').length; 
	window.n_search_prime=n;
   $('.result_s').show();
   $('.result_s').find('.se_prev').hide();
   if (n==0)
	   {
    $('.result_s').find('div').empty().append(': 0');
	$('.result_s').find('.se_next').hide();
	   }
   else
	   {
    $('.result_s').find('div').empty().append(': <span class="s_ss">'+n+'</span>'); 
	$('.result_s').find('.se_next').show();
	   }
   if (n>1) 
   {
    window.irr = 1;
    $('var.highlight').each(function(irr){ $(this).attr('nss', window.irr); window.irr++;  });
   } 
  
 }
var search_p = function()
{
	dosearch();	
}

var error_anim=function()
{
	//alert($(this).attr('id'));
	setTimeout ( function () { alert($(this).attr('id')); $(this).removeClass('error_formi'); }, 2000 );	
}

var search_prev = function()
{
	window.search_step--;
	if(window.search_step>=0)
	{					
		if($('[nss='+window.search_step+']').parents('.block_i').length)
			{
				if(!$('[nss='+window.search_step+']').parents('.block_i').is(".active"))
					{						
						$('[nss='+window.search_step+']').parents('.block_i').find('.i__').parent().parent().addClass("active");
						var id_content=$('.content_block').attr('id_content');
		                CookieList("l_"+id_content,$('[nss='+window.search_step+']').parents('.block_i').find('.i__').parent().parent().attr('rel'),'add');
		                $('[nss='+window.search_step+']').parents('.block_i').find('.i__').empty().append("-");
					}
				
				
			}
		
		
		jQuery.scrollTo('[nss='+window.search_step+']', 1000, {offset:-200});	
	} 

	if(window.search_step<window.n_search_prime)
		{
			
			$('.result_s').find('.se_next').show();
			
		}
	
	
	if(window.search_step==1)
		{
			$('.result_s').find('.se_prev').hide();
			$('.result_s').find('.se_next').show();
			
		} else
			{
				//$('.result_s').find('.se_prev').hide();
				
			}
		
}

var search_next = function()
{
	window.search_step++;
	if(window.search_step<=window.n_search_prime)
	{					
		if($('[nss='+window.search_step+']').parents('.block_i').length)
			{
				if(!$('[nss='+window.search_step+']').parents('.block_i').is(".active"))
					{
						$('[nss='+window.search_step+']').parents('.block_i').find('.i__').parent().parent().addClass("active");
						var id_content=$('.content_block').attr('id_content');
		                CookieList("l_"+id_content,$('[nss='+window.search_step+']').parents('.block_i').find('.i__').parent().parent().attr('rel'),'add');
		                $('[nss='+window.search_step+']').parents('.block_i').find('.i__').empty().append("-");
						
						
					}
				
				
			}
		
		
		jQuery.scrollTo('[nss='+window.search_step+']', 1000, {offset:-200});	
	} 

	if(window.search_step==window.n_search_prime)
		{
			$('.result_s').find('.se_next').hide();
		}
	
	if(window.search_step!=0)
		{
			$('.result_s').find('.se_prev').show();
			
		} else
		{
				$('.result_s').find('.se_prev').hide();
				
		}
	
}

var search_prime = function()
{

	$('.icon1').hide();
	$('.search_seb').show();
	$('.search_seb').width('400px');
	$('.search_seb').find('input').focus();
	window.show_search=1;
	if($('.search_seb').find('input').val()!='')
	{
			dosearch();			
	}
	
}
//  
//  


var send_meee= function()
{

	var tt=$('#otziv_area').val();
	
	var err = [0];
		
	$(".otziv_mess").removeClass('error_formi');
	//$("#number_r").removeClass('error_formi');
 
  
    if($("#otziv_area").val() == '')
	{
		$(".otziv_mess").addClass('error_formi');
		err[0]=1;		
	} else
		{
	
var for_id=$('.content_block').attr('id_content');	
var data ='url='+window.location.href+'&id='+for_id+'&text='+$('#otziv_area').val();	
AjaxClient('message','send_message_global','GET',data,'AfterSendMM',for_id,0);	
$("#otziv_area").val('');			

		}
	
}


//   
var beznal_upload=function()
{
	var id=$(this).attr('id_bez');
	if($.isNumeric($(this).attr("id_bez")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_bez_dialog.php?id='+$(this).attr("id_bez"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}



//  
var SendMessage= function()
{
	var id_user=$(this).attr('sm');
	//   
	var you_id_user=$('[iu]').attr('iu');
	
	if(you_id_user!=id_user)
		{
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_message.php?id='+id_user,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

  });
		}
}



//   
var UploadScan = function()
{
	var id_upload=$(this).attr('id_upload');
	$('[name=myfile'+id_upload+']').trigger('click');
}


  function log(html) {
      $('#log').empty().append(html);
    }

function upload(file,id) {

      var xhr = new XMLHttpRequest();

      //     ,
      //  status == 200,   ,  
      xhr.onload = xhr.onerror = function() {
        if (this.status == 200) {
          
		  $('[id_upload='+id+']').remove();
		  $('.scap_load_'+id).remove(); 
		  updatecash(id);
        } else {
          $('[id_upload='+id+']').show();
		  $('.scap_load_'+id).find('.scap_load__').width(0); 
		  $('.scap_load_'+id).hide();
        }
      };

      //   
      xhr.upload.onprogress = function(event) {
		$('[id_upload='+id+']').hide();  
		$('.scap_load_'+id).show();  
		var widths=Math.round((event.loaded*100)/event.total);
		$('.scap_load_'+id).find('.scap_load__').width(widths);  
      }

      xhr.open("POST", "implementer/upload.php", true);
      //xhr.send(file);
	
	 var formData = new FormData();
     formData.append("thefile", file);
	 formData.append("id",id);
     xhr.send(formData);

    }




var UploadScanChange = function()
{
	var id=$(this).parents('form').attr('id_sc');
	file = this.files[0];
	      if (file) {
        upload(file,id);
      } 
      return false;	
}

// 
/*
var view_notification = function()
{
	if( $('.noti_block').is(':visible') ) {   $('.noti_block').remove(); $('.view__not').hide(); $('.not_li').find('i').hide();  } else 
	{ 	 
	  $('.menu1').append('<div class="noti_block"><div class="title_noti"><ul class="t_ul"><li></li><li><i class="noti_co" style="display:none;"><span class="noti_coc"></span></i></li></ul></div><div class="scro"></div></div>');
	  //     
	  $('.noti_block').find('.scro').empty().append('<div class="loader_inter"><div></div><div></div><div></div><div></div></div>');
	  var data ='';

      AjaxClient('notification','view_notification','GET',data,'AfterVVN',1,0);	
	}
}
*/

// 
var option_imlementer = function()
{
  var id= $('.content_block').attr('id_content');
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_option_implementer.php?id='+id,
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });	
}


// 
var add_imlementer = function()
{
  //var id= $(this).attr('for');

	/*
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_add_implementer.php?id=1',
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	clearInterval(timerId);
    }

  });*/
	$.arcticmodal({
		type: 'ajax',
		url: 'forms/form_add_implementer_2022.php?id=1',
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

	});


}


// 
var option_imlementer1 = function()
{
  var id= $(this).attr('for');
  /*
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_option_implementer.php?id='+id,
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	clearInterval(timerId);
    }

  });
  */
	$.arcticmodal({
		type: 'ajax',
		url: 'forms/form_option_implementer.php?id='+id,
		beforeOpen: function (data, el) {
			//     ajax 
			$('.loader_ada_forms').show();
			$('.loader_ada1_forms').addClass('select_ada');
		},
		afterLoading: function (data, el) {
			//    ajax
			data.body.parents('.arcticmodal-container').addClass('yoi');
			$('.loader_ada_forms').hide();
			$('.loader_ada1_forms').removeClass('select_ada');
		},
		beforeClose: function (data, el) { //    ArcticModal
			if (typeof timerId !== "undefined") {
				clearInterval(timerId);
			}
			BodyScrool();
		}

	});


}

//   
var pay_imlementer_avans = function()
{
  var id= $(this).attr('id_avans');
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_pay_implementer_avans.php?id='+id,
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });




}

//  
var pay_imlementer = function()
{
  var id= $(this).attr('id_rel');
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_pay_implementer.php?id='+id,
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });		
}


//      
var hist_mu_prime = function()
{
	
var id= $(this).parents('[rel_id]').attr('rel_id');
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_history_realiz_work.php?id='+id,
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });	
}


//   
var house_options = function()
{
if ( $('.content_block').is("[dom]") )
{
	if($.isNumeric($('.content_block').attr("dom")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_object_options.php?id='+$('.content_block').attr("dom"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;

		
}

//     
var summ_view = function()
{
	
	if( $('.summ_blogi').is(':visible') ) { 
	$('.summ_blogi').hide();
	$('.top_bl').find('h2').removeClass('margin_sum ');	
	$(this).removeAttr('on');
	CookieList("it_",'on','del');	
	} else
	{
	$('.summ_blogi').show();
	$('.top_bl').find('h2').addClass('margin_sum ');
	$(this).attr('on','show');
	CookieList("it_",'on','add');	
	}
	
}


// 
var take_invoice = function()
{
   $('#lalala_pod_form').submit();	
}


// 
var sign_naryad = function()
{


   $('#lalala_pod_form').submit();	



}


// 
var seal_naryad = function()
{
   $('#lalala_seal_form').submit();	
}

// 
var disband_naryad = function()
{
   $('#lalala_disband_form').submit();	
}

// 
var shoot_naryad = function()
{
   $('#lalala_shoot_form').submit();	
}

//      
var decision_mess_app = function()
{
	var dec=-1;
	if(!$(this).parents('.edit_123').is('.ready'))
	{
		$('.pod_zay').hide(); $('.add_zay').show();
		$(this).parents('.edit_123').find('i').removeClass('active');
	   	if($(this).is('.yes')) { dec=1; }
		if($(this).is('.no')) { dec=0; }
		$(this).addClass('active');
		//alert(dec);
		$(this).parents('.messa').find('.decision_mes').val(dec);
	}
}

//       
var decision_mess = function()
{
	var dec=-1;
	if(!$(this).parents('.edit_122').is('.ready'))
	{
		$('.js-pod_nar').hide(); $('.js-add_nar').show();
		$(this).parents('.edit_122').find('i').removeClass('active');
	   	if($(this).is('.yes')) { dec=1; }
		if($(this).is('.no')) { dec=0; }
		$(this).addClass('active');
		//alert(dec);
		$(this).parents('.messa').find('.decision_mes').val(dec);
	}
}


//   
var save_zayava = function()
{
	var error=0;

	$('.messa:visible').find('.text_zayva_message_').removeClass('error_formi');




	$('.messa:visible').find('.text_zayva_message_').each(function(i,elem) {
	
		var text=$(this).val();
		if(text=='')
	    {
			error=1;
			$(this).addClass('error_formi');
		}
    });


	$('.mat_zz').find('.count_app_mater_').removeClass('error_formi');
	$('.mat_zz').find('.calendar_zay').removeClass('error_formi');
	
	$('.messa:visible').each(function(i,elem) {
	    var id_work=$(this).attr('id_mes');
		//        
		
		
		
		var count=$('.mat_zz[mat_zz='+id_work+']').find('.count_app_mater_').val();
		//var price=$('.mat_zz[rel_id='+id_work+']').find('.price_finery_').val();
		
		$('.mat_zz[mat_zz='+id_work+']').find('.count_app_mater_').removeClass('error_formi');
		//$('.mat_zz[mat_zz='+id_work+']').find('.date_r_base').removeClass('error_formi');
		
		if((count==0)||(count=='')||(!$.isNumeric(count)))
	    {
			$('.mat_zz[mat_zz='+id_work+']').find('.count_app_mater_').addClass('error_formi');
			error=1;
		}

		
		/*
		$('.mat[rel_w='+id_work+']').each(function(i,elem) {
		var count=$(this).find('.count_finery_mater_').val();
		var price=$(this).find('.price_finery_mater_').val();
		$(this).find('.price_finery_mater_').removeClass('error_formi');
		$(this).find('.count_finery_mater_').removeClass('error_formi');	
		if((count==0)||(count=='')||(!$.isNumeric(count)))
	    {
			$(this).find('.count_finery_mater_').addClass('error_formi');
			error=1;
		}
		if((price==0)||(price=='')||(!$.isNumeric(price)))
	    {
			$(this).find('.price_finery_mater_').addClass('error_formi');
			error=1;
		}
		});
		*/
		
    });
	$('.js-add-app-material .gloab').each(function(i,elem) {
		if($(this).val() == '')  { $(this).parents('.input_2018').addClass('required_in_2018');
			$(this).parents('.list_2018').addClass('required_in_2018');
			error++;
			//alert($(this).attr('name'));
		} else {$(this).parents('.input_2018').removeClass('required_in_2018');$(this).parents('.list_2018').removeClass('required_in_2018');}
	});



	if(error!=0)
		{
			alert_message('error','     ');
			//$('.error_text_add').empty().append('     ');
			
			//setTimeout ( function () { $('.error_text_add').empty(); }, 7000 );

			
		} else
		{	
		    $('#lalala_add_form').submit();		
		}
	
	
		
}





//       
var edit_m_button_click = function() {
	
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_edit_material_2021.php?id='+$(this).attr("for"),
    beforeOpen: function (data, el) {
		//     ajax 
		$('.loader_ada_forms').show();
		$('.loader_ada1_forms').addClass('select_ada');
	},
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;

	
	
}

//       
var del_m_button_click = function() {
	
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_material.php?id='+$(this).attr("for"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;

}

//       
var add_m_button_click = function() {
	
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_add_material_2021.php?id='+$(this).attr("for"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
	
}

// 
var DellNotif = function() {
if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
       var data ='url='+window.location.href+'&id='+$(this).attr("id_rel");
       AjaxClient('notification','del_notif','GET',data,'AfterDellNot',$(this).attr("id_rel"),0);
	   $('[rel_noti='+$(this).is("[id_rel]")+']').hide();	
}
}
  
return false;
	
}


//   
var DellPay = function() {
if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_pay.php?id='+$(this).attr("id_rel"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
	
}

//   
var DellCash = function() {
if ( $(this).is("[id_rel]") )
{
	if($.isNumeric($(this).attr("id_rel")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_disband_cash.php?id='+$(this).attr("id_rel"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
	
}


//     
var del_button_click = function() {
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_work.php?id='+$(this).attr("for"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
	
}

//     
var edit_button_click = function() {
	
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_edit_work_2021.php?id='+$(this).attr("for"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;

	
	};

//   
var block_i_i = function() {	

var id_content=$('.content_block').attr('id_content');
	  
	   if($(this).parent().parent().is(".active")) 
	  {
		  $(this).parent().parent().removeClass("active");
		  CookieList("l_"+id_content,$(this).parent().parent().attr('rel'),'del');
		  $(this).empty().append("+");
	  } else
	  {
		  $(this).parent().parent().addClass("active");
		  CookieList("l_"+id_content,$(this).parent().parent().attr('rel'),'add');
		  $(this).empty().append("-");
	  }	
	  
	
};


//    
var MaterialSelectAll = function() {

		  $('[rel_id]').each(function(i,elem) {
			  
	        var length_all_mat_1=$(this).nextUntil(".loader_tr").length;
			var count_all_mnmnm_1=0;  
			$(this).nextUntil(".loader_tr").each(function(i,elem) {
				  
				 	 if($(this).is(".chechers")) 
	                 { 
	                    count_all_mnmnm_1++;
					 }
              });  
			if(count_all_mnmnm_1==length_all_mat_1)
		    { 
			  $(this).find('.addd_icon_mateo').addClass("activ_matt");
			} else
			{
			  $(this).find('.addd_icon_mateo').removeClass("activ_matt");
			}
          });	

}
	
//           
var basket_all_material = function(thisss) {
 
	var length_all_mat=thisss.parents('.material').prevAll('[rel_id]:first').nextUntil(".loader_tr").length;
	var count_all_mnmnm=0;
	thisss.parents('.material').prevAll('[rel_id]:first').nextUntil(".loader_tr").each(function(i,elem) {
				  
				 	 if($(this).is(".chechers")) 
	                 { 
	                    count_all_mnmnm++;
					 }
              });
	//alert(length_all_mat);
	if(count_all_mnmnm==length_all_mat)
		{
			thisss.parents('.material').prevAll('[rel_id]:first').find('.addd_icon_mateo').addClass("activ_matt");
		} else
			{
				thisss.parents('.material').prevAll('[rel_id]:first').find('.addd_icon_mateo').removeClass("activ_matt");
			}
	
}

//       
var add_material_click = function() {
	  if($(this).is(".activ_matt")) 
	  {
		  //      
		  //$(this).parents('[rel_id]').nextUntil(".loader_tr").remove();
		  $(this).removeClass("activ_matt");
		  
		  $(this).parents('[rel_id]').nextUntil(".loader_tr").each(function(i,elem) {
			  
	           $(this).find('.nm_nm').trigger("click");
          });
		  
	  } else
		  {
			  //   .      
			  $(this).addClass("activ_matt");
			  
			  
		  	  $(this).parents('[rel_id]').nextUntil(".loader_tr").each(function(i,elem) {
				  
				 	 if(!$(this).is(".chechers")) 
	                 { 
	                    $(this).find('.nm_nm').trigger("click");
					 }
              });
		  $(this).addClass("activ_matt");			  
		  }
	
}


//     -    
var nm_div = function() {
	
	var id_dom=$('.content_block').attr('dom');
	if(!$('.add_v_zay').length)
	{
	  if($(this).parents('[rel_ma]').is(".chechers")) 
	  {
		  // 
		  $(this).parent().parent().removeClass("chechers");

		  CookieList(window.b_cm+"_"+id_dom,$(this).parents('[rel_ma]').attr('rel_ma'),'del','sort');	
		 // alert($(this).parents('[rel_id]').attr('rel_id'));
		  BasketMaterial(); 
		  basket_all_material($(this));
		  ToolTip();
	  } else
	  {
		  $(this).parent().parent().addClass("chechers");
		  CookieList(window.b_cm+"_"+id_dom,$(this).parents('[rel_ma]').attr('rel_ma'),'add','sort');
		  BasketMaterial();	
		  basket_all_material($(this));
		  ToolTip();	  
	  }	
	} else
	{
		if($(this).parents('[rel_ma]').is(".chechers")) 
	  {
		  // 
		  $(this).parent().parent().removeClass("chechers");
		  CookieList(window.b_co+"_"+id_dom,$(this).parents('[rel_ma]').attr('rel_ma'),'del','sort');	
		 // alert($(this).parents('[rel_id]').attr('rel_id'));
		  BasketMaterial(); 
		  basket_all_material($(this));
		  ToolTip();
	  } else
	  {
		  $(this).parent().parent().addClass("chechers");
		  CookieList(window.b_co+"_"+id_dom,$(this).parents('[rel_ma]').attr('rel_ma'),'add','sort');
		  BasketMaterial();	
		  basket_all_material($(this));
		  ToolTip();	  
	  }		
	}
	
}

//         
var close_prime_dom = function() {
   //CookieList(window.b_co+"_"+id_dom,$(this).parents('[rel_id]').attr('rel_id'),'del');
   var id_dom=$('.content_block').attr('dom'); 
   $.cookie("pr_", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
	//alert("!");
   $('.close_prime_dom_a')[0].click(); ;	
}




//     -   
var st_div = function() {
	
	var id_dom=$('.content_block').attr('dom');
	
	  if($(this).parents('[rel_id]').is(".checher")) 
	  {
		  $(this).parent().parent().removeClass("checher");
		  CookieList(window.b_co+"_"+id_dom,$(this).parents('[rel_id]').attr('rel_id'),'del');	
		 // alert($(this).parents('[rel_id]').attr('rel_id'));
		  BasketFinery();  
		  ToolTip();
	  } else
	  {
		  $(this).parent().parent().addClass("checher");
		  CookieList(window.b_co+"_"+id_dom,$(this).parents('[rel_id]').attr('rel_id'),'add');
		  BasketFinery();	
		  ToolTip();	  
	  }	
	
}

//    
var del_sebe = function() {
	



if ( $('.content_block').is("[dom]") )
{
	if($.isNumeric($('.content_block').attr("dom")))
	{
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_dell_sebe.php?id='+$('.content_block').attr("dom"),
	  beforeOpen: function (data, el) {
		  //     ajax 
		  $('.loader_ada_forms').show();
		  $('.loader_ada1_forms').addClass('select_ada');
	  },
	  afterLoading: function (data, el) {
		  //    ajax
		  data.body.parents('.arcticmodal-container').addClass('yoi');
		  $('.loader_ada_forms').hide();
		  $('.loader_ada1_forms').removeClass('select_ada');
	  },
	  beforeClose: function (data, el) { //    ArcticModal
		  if (typeof timerId !== "undefined") {
			  clearInterval(timerId);
		  }
		  BodyScrool();
	  }

  });
}
}
  
return false;
	
	};


//     . , ,   ,  ,  ,    ..
//    , , 
var update_block = function() {
	//  
	$(".block_i .i__").unbind('click');
	$(".block_i .i__").bind('click', block_i_i);
	//     
	$(".edit_icon_block").unbind('click');
    $(".edit_icon_block").bind('click', edit_button_block);
	$(".del_icon_block").unbind('click');
    $(".del_icon_block").bind('click', del_button_block);
	$(".add_icon_block").unbind('click');
    $(".add_icon_block").bind('click', add_button_rabota);	
	//     
	$('.st_div').unbind( "click");
	$('.st_div').bind( "click", st_div);
	
	//       
	$('.nm_nm').unbind( "click");
	$('.nm_nm').bind( "click", nm_div);
	
	//     
	$(".edit_icon").unbind('click');
	$(".edit_icon").bind('click', edit_button_click);
	
	
	$(".UGRAFE").unbind('click');
	$(".UGRAFE").bind('click', edit_grafik_click);
	
	
	$(".del_icon").unbind('click');
	$(".del_icon").bind('click', del_button_click);	
	$(".addd_icon").unbind('click');
	$(".addd_icon").bind('click', add_m_button_click);	
	
	//addd_icon_mateo
	$(".addd_icon_mateo").unbind('click');
	$(".addd_icon_mateo").bind('click', add_material_click);	
	
	
	//   
	$(".edit_icon_m").unbind('click');
	$(".edit_icon_m").bind('click', edit_m_button_click);
	$(".del_icon_m").unbind('click');
	$(".del_icon_m").bind('click', del_m_button_click);		
}

var savedefault = function (thiss)
{
	if($('#save').length)
	{
	var wdefault=thiss.attr('defaultv');
	if(thiss.val()!=wdefault)
	{
	   $('#save').attr('save','1');
    } 
	
	var atrr=$('#save').attr('save');
	if(atrr==1)
		{
			$('.js-add_nar').show();
			$('.js-pod_nar').hide();
		}
	}
}

//  
//  |
// \/

window.SliceMM = function() {
	var tr_s=$('.burger_ok');
	var mobile=$('.mobile-nav');
	if(tr_s.is(".active"))
	{
		tr_s.removeClass("active");
		mobile.removeClass("act");
		$('body').removeClass("menu-open");

	} else
	{
		tr_s.addClass("active");
		mobile.addClass("act");
		$('body').addClass("menu-open");
	}


}

var savedefault_zay = function (thiss)
{
	//lert("!");
	if($('#save').length)
	{
	var wdefault=thiss.attr('defaultv');
	if(thiss.val()!=wdefault)
	{
	   $('#save').attr('save','1');
    } 
	
	var atrr=$('#save').attr('save');
	if(atrr==1)
		{
			$('.add_zay').show();
			$('.pod_zay').hide();
		}
	}
}


$(function (){
	animation_teps();
$(window).on('resize',windowSize);	

$('.loader_ada').remove();
$('.loader_ada1').remove();
		
	
BasketFinery(); //  	
BasketMaterial(); //  
MaterialSelectAll(); //      
	
jQuery('.scrollbar-inner').scrollbar(); //    
ToolTip();  //  
sl_message_width();
$('.label_s').bind("change keyup input click", label_show);

//   -   
	$('body').on("change keyup input click",'.js-password-butt',password_butt);
	//   chtckbox    
	$('body').on("change keyup input click",'.js-checkbox-group',CheckboxGroup);


	$('body').on("change keyup input click",'.js-type-soft-view1',MemoButType);

$('body').on("change keyup input click",'.tabs_005U',{key: "005U"},tabs_app);

	$('body').on("change keyup input click",'.js-sign-a',SingFo);


	$('body').on("change keyup input click",'.js-reject-app',RejectFo);
	$('body').on("change keyup input click",'.js-forward-app',ForwardFo);

//        		
//$('.smeta1').on("change keyup input click",'.count_mask',function(){ $(this).val($(this).val().replace(/[^\d.]*/g, '').replace(/([.])[.]+/g, '$1').replace(/^[^\d]*(\d+([.]\d{0,5})?).*$/g, '$1'));  });
	$('body').on("click",'.burger_ok',SliceMM);
	$('.menu_x').clone().appendTo(".mobile-nav span");
//
$('body').on("keyup",'.loll_soply',search_posta);	
$('body').on("click",'.loll_soply',search_posta1);	
$('body').on("change keyup input click",'.loll_drop li',search_posta_li);
$('body').on("change keyup input click",'.label_exitt',search_posta_li2);
	

$('body').on("change keyup input click",'.loll_plus',plus_postt)	

$('.suppp_tr').on("change keyup input click",'.yoop_click',yoop_click)	

	
$('.save_button2').bind("change keyup input click", send_meee);
	
$('.content').on("click",'.send_mess',SendMessage);	
$('.help_user').on("click",'.send_mess',SendMessage);

//$('.menu_jjs').on("change keyup input click",'.menu_click',menuclick);

$('body').on("change keyup input click",'.menu_click',menuclick);

//$('.menu_click').bind("change keyup input click", menuclick);
	
$('.js-close_prime_dom	').on('click', close_prime_dom);
	
$('.pay_imp').on("click",'.beznal_upload',beznal_upload);		
	

$('.div_dialog').on("click",'.dialog_a',function(e) {  if($(e.target).closest(".del_dialog").length==0)
  {
	var dialog_id=$(this).attr('rel_diagol');
	$(this).attr('href','/message/dialog/'+dialog_id+'/');
	$(this).trigger('Click');

  } });


	
var UploadScanS = function()
{
	var id_upload=$(this).attr('id_upload');
	$('[name=myfile'+id_upload+']').trigger('click');
}


var UploadInvoiceAkt = function()
{
	var id_upload_a=$(this).attr('id_upload_a');
	$('[name=myfileakt'+id_upload_a+']').trigger('click');
}
var UploadInvoicePhoto = function()
{
	var id_upload_a1=$(this).attr('id_upload_a1');
	$('[name=myfilephoto'+id_upload_a1+']').trigger('click');
}

	
var UploadInvoice = function()
{
	var id_upload=$(this).attr('id_upload');
	$('[name=myfile'+id_upload+']').trigger('click');
}


function uploadS(file,id) {

      var xhr = new XMLHttpRequest();

      //     ,
      //  status == 200,   ,  
      xhr.onload = xhr.onerror = function() {
        if (this.status == 200) {
          
		  $('[id_upload='+id+']').show(); //
		  $('.scap_load_'+id).find('.scap_load__').width(0); 
		  $('.scap_load_'+id).hide();
		  UpdateImageSupply(id);
        } else {
          $('[id_upload='+id+']').show();
		  $('.scap_load_'+id).find('.scap_load__').width(0); 
		  $('.scap_load_'+id).hide();
        }
      };

      //   
      xhr.upload.onprogress = function(event) {
		$('[id_upload='+id+']').hide();  
		$('.scap_load_'+id).show();  
		var widths=Math.round((event.loaded*100)/event.total);
		$('.scap_load_'+id).find('.scap_load__').width(widths);  
      }

      xhr.open("POST", "supply/upload.php", true);
      //xhr.send(file);
	
	 var formData = new FormData();
     formData.append("thefile", file);
	 formData.append("id",id);
     xhr.send(formData);

    }
//   
function uploadIA(file,id) {

      var xhr = new XMLHttpRequest();

      //     ,
      //  status == 200,   ,  
      xhr.onload = xhr.onerror = function() {
        if (this.status == 200) {
          
		$('[id_upload_a='+id+']').next().find('.b_loading_circle_wrapper_small').hide();
			$('[id_upload_a='+id+']').show();  
			
		  UpdateImageInvoiceAkt(id,0);
        } else {
		$('[id_upload_a='+id+']').next().find('.b_loading_circle_wrapper_small').hide();
			$('[id_upload_a='+id+']').show();  
		
        }
      };

      //   
      xhr.upload.onprogress = function(event) {
		 //    
		$('[id_upload_a='+id+']').hide();  
		$('[id_upload_a='+id+']').next().find('.b_loading_circle_wrapper_small').show();
      }

      xhr.open("POST", "invoices/upload_akt.php", true);
      //xhr.send(file);
	
	 var formData = new FormData();
     formData.append("thefile", file);
	 formData.append("id",id);
     xhr.send(formData);

    }

//  	
function uploadIP(file,id) {

      var xhr = new XMLHttpRequest();

      //     ,
      //  status == 200,   ,  
      xhr.onload = xhr.onerror = function() {
        if (this.status == 200) {
          
		$('[id_upload_a1='+id+']').next().find('.b_loading_circle_wrapper_small').hide();
			$('[id_upload_a1='+id+']').show();  
		  UpdateImageInvoiceAkt(id,1);
        } else {
		$('[id_upload_a1='+id+']').next().find('.b_loading_circle_wrapper_small').hide();
			$('[id_upload_a1='+id+']').show();  
		
        }
      };

      //   
      xhr.upload.onprogress = function(event) {
		 //    
		$('[id_upload_a1='+id+']').hide();  
		$('[id_upload_a1='+id+']').next().find('.b_loading_circle_wrapper_small').show();
      }

      xhr.open("POST", "invoices/upload_photo.php", true);
      //xhr.send(file);
	
	 var formData = new FormData();
     formData.append("thefile", file);
	 formData.append("id",id);
     xhr.send(formData);

    }	
	
function uploadI(file,id) {

      var xhr = new XMLHttpRequest();

      //     ,
      //  status == 200,   ,  
      xhr.onload = xhr.onerror = function() {
        if (this.status == 200) {
          
		  $('[id_upload='+id+']').show(); //
		  $('.scap_load_'+id).find('.scap_load__').width(0); 
		  $('.scap_load_'+id).hide();
		  UpdateImageInvoice(id);
        } else {
          $('[id_upload='+id+']').show();
		  $('.scap_load_'+id).find('.scap_load__').width(0); 
		  $('.scap_load_'+id).hide();
        }
      };

      //   
      xhr.upload.onprogress = function(event) {
		$('[id_upload='+id+']').hide();  
		$('.scap_load_'+id).show();  
		var widths=Math.round((event.loaded*100)/event.total);
		$('.scap_load_'+id).find('.scap_load__').width(widths);  
      }

      xhr.open("POST", "invoices/upload.php", true);
      //xhr.send(file);
	
	 var formData = new FormData();
     formData.append("thefile", file);
	 formData.append("id",id);
     xhr.send(formData);

    }

	
var UploadInvoicePhotoChange = function()
{
	var id=$(this).parents('form').attr('id_a');
	file = this.files[0];
	      if (file) {
        uploadIP(file,id);
      } 
      return false;	
}		

var UploadInvoiceAktChange = function()
{
	
	var id=$(this).parents('form').attr('id_a');
	file = this.files[0];
	      if (file) {
        uploadIA(file,id);
      } 
      return false;	
}	
	

var UploadInvoiceChange = function()
{
	var id=$(this).parents('form').attr('id_sc');
	file = this.files[0];
	      if (file) {
        uploadI(file,id);
      } 
      return false;	
}

var UploadScanSChange = function()
{
	var id=$(this).parents('form').attr('id_sc');
	file = this.files[0];
	      if (file) {
        uploadS(file,id);
      } 
      return false;	
}

	//        	
//$('.count_mask').bind("change keyup input click", validate11);

	$('body').on("change keyup input click",'.count_mask',validate11)

	$('.block_invoice_20188').on("change keyup input click",".del_invoice", dell_invoice);

//	$('.invoice_block').on("change keyup input click",".del_invoice_material", dell_invoice_material);
//	$('.invoice_block').on("change keyup input click",".material_defect", material_defect);
	
//	$('.invoice_block').on("change keyup input click",".del_invoice_akt", material_defect_dell);
	
	
	$('.messa_form_a').on("change",'.invoice_file_photo',UploadInvoicePhotoChange);
	$('.messa_form_a').on("change",'.invoice_file_akt',UploadInvoiceAktChange);	
	
	$('.invoice_block').on("click",".add_akt_defect", UploadInvoiceAkt);	
	$('.invoice_block').on("click",".add_akt_defect1", UploadInvoicePhoto);
	
	$('.invoice_block').on("change keyup input click",".count_defect_in_,.text_zayva_message_,.del_invoice_akt",function(){ $(this).parents('[invoices_messa]').find('.print_invoice_akt').hide(); });

//   
	$('body').on("click",'.ais',Eye);

	$('body').on("change keyup input click",".js-save-setting", save_setting);
	
	$('.invoice_block').on("change keyup input click",".count_defect_in_,.count_in_", BrakError);
	
		$('.invoice_block').on("change keyup input click",".count_in_", ErrorMax);
	


	
	
$('.invoice_block').on("change",'#ispol_invoice',UpdateContractorInvoice);
//$('.invoice_block').on("change",'#ispol_type_invoice',nds_invoice);
	


$('.img_invoice_div').on("click",'.del_image_invoice',DellImageInvoice);	

$('.img_invoice_div').on("click",'.invoice_upload',UploadInvoice);
$('.img_invoice_div').on("change",'.sc_sc_loo12',UploadInvoiceChange);


//   
	$('.l_photo').on("change keyup input click",'.invoice_upload',UploadInvoice_old);
	$('.content').on("change",'.sc_sc_loos2',UploadReportsChange_old);

$('body').on("click",'.soply_upload',UploadScanS);
$('body').on("change",'.sc_sc_loo11',UploadScanSChange);


	$('body').on("change keyup input click",'.js-dop-add_svv',AddDopSW);

$('.bill_table').on("change keyup input click",'.xvg_bill_score',xvg_bill);	

$('.bill_table').on("change keyup input click",'.xvg_no',xvg_no);
$('.bill_table').on("change keyup input click",'.xvg_yes',xvg_yes);
	
$('.stock_table_list').on("change keyup input click",'.xvg_no1',xvg_no1);	
$('.stock_table_list').on("change keyup input click",'.xvg_yes1',xvg_yes1);		

$('.booker_table').on("change keyup input click",'.booker_yes',booker_yes);	
	
$('.pay_imp').on("click",'.naryd_upload',UploadScan);
$('.pay_imp').on("change",'.sc_sc_loo',UploadScanChange);
$('.pay_imp').on("click",'.rasp_pay',DellCash);
$('.pay_imp').on("click",'.del_pay',DellPay);


jQuery(document).on("focus click",'.input_new_2018',InputFocusNew);	
jQuery(document).on("blur",'.input_new_2018',InputBlurNew);
	jQuery(document).on("keyup",'.input_new_2018',KeyUpInput);

	jQuery(document).on("focus click",'.input_new_2021',InputFocusNew2021);
	jQuery(document).on("blur",'.input_new_2021',InputBlurNew2021);



	//jQuery(document).on("focus click",'.input_new_2021',InputFocusNew2021);
	//jQuery(document).on("blur",'.input_new_2021',InputBlurNew2021);
	jQuery(document).on("keyup",'.input_new_2021',KeyUpInput2021);


	//jQuery(document).on("click",'.print_stock_',PrintStock_);
	
$('.suppp_tr').on("click",'.supply_tr_o',ChangeSupply);


$('.notif_imp').on("click",'.del_notif',DellNotif);
	$('.notif_div_2018').on("click",'.del_notif',DellNotif);



$('.mat_zz').on("click",'.del_material_zayva',DellZayvaMaterial);		
$('.mat_zz').on("click",'.del_material_zayva1',DellZayvaMaterial1);	
$('.work__s').on("click",'.del_naryd_work',DellNarydWork);	
$('.work__s').on("click",'.del_naryd_work1',DellNarydWork1);
$('.smeta2').on("click",'.del_naryd',DellNaryd);
$('.smeta2').on("click",'.del_zay_zay',DellZayZay);	


//       
$('.work__s').on("click",'.history_icon',HistoryN);
	$('.mattx,.js-more-acc-view').on("click",'.history_icon',HistoryN1);

//        
$('.mat_zz').on("change keyup input click",'.count_app_mater_',MmyHandlerApp);		
	
//      
//$('.mat').on("change keyup input click",'.price_finery_mater_',MmyHandler);	
$('body').on("change keyup input click",'.s-j-dop',dop_smeta_scroll);

	$('body').on("change keyup input click",'.ukr',dop_smeta_scroll_1);

	
//      
$('.mat').on("change keyup input click",'.count_finery_mater_',MmyHandler);	
$('.mat').on("change keyup input click",'.count_finery_mater_',MmyHandlerXX);		
//     
$('.work__s').on("change keyup input click",'.count_finery_',myHandler);	
//     
$('.work__s').on("change keyup input click",'.price_finery_',myHandler1);
//         
$('.work__s').on("dblclick",'.count_finery_,.price_finery_',Mydblclick);	
$('.mat').on("dblclick",'.count_finery_mater_',Mydblclick);	
	
setTimeout ( function () { 
	
	// -          .  
	$('.workx').on("change keyup input click",'.count_finery_,.price_finery_,.text_finery_message_',function(){ if($(this).attr('readonly')==undefined) {  var thiss = $(this);   var id_s=thiss.parents('[work]').attr('work'); $('[work='+id_s+']').find('.edit_12').remove();  $('[work='+id_s+']').find('.edit_122').find('i').removeClass('active'); $('[work='+id_s+']').find('.decision_mes').val("-1");   }  });	

	// -          .  
	$('.mattx').on("change keyup input click",'.count_finery_mater_,.price_finery_mater_,.text_finery_message_',function(){ if($(this).attr('readonly')==undefined) {  var thiss = $(this); var work=thiss.parents('[work]').attr('work');   var id_s=thiss.parents('[rel_matx]').attr('rel_matx'); $('[id_mes='+work+'_'+id_s+']').find('.edit_12').remove(); $('[id_mes='+work+'_'+id_s+']').find('.edit_122').find('i').removeClass('active'); $('[id_mes='+work+'_'+id_s+']').find('.decision_mes').val("-1");     }  });	

	
		//              
	$('.my_n').on("change keyup input click.naryd",'.count_finery_mater_,.price_finery_mater_,.text_finery_message_,.count_finery_,.price_finery_,.slct_box,#date_table,#date_table1',function(){ $('.js-pod_nar').hide(); $('.js-add_nar').show();  });
	
	
	
	// -          .      
	$('.my_nn').on("change keyup input click",'.count_app_mater_,.calendar_zay,.text_zayva_message_',function(){if(($(this).attr('readonly')==undefined)||(($(this).attr('disabled')==undefined)&&($(this).is('.calendar_zay')))) {  var thiss = $(this); var work=thiss.parents('[mat_zz]').attr('mat_zz'); $('[mat_zz='+work+']').find('.edit_12').remove(); $('[mat_zz='+work+']').find('.edit_123').find('i').removeClass('active'); $('[mat_zz='+work+']').find('.decision_mes').val("-1");     }  });	
	//             
	$('.my_nn').on("change keyup input click",'.count_app_mater_,.calendar_zay,.text_zayva_message_,.js-zame-tours',function(){  if(($(this).attr('readonly')==undefined)||(($(this).attr('disabled')==undefined)&&($(this).is('.calendar_zay')))) {  $('.pod_zay').hide(); $('.add_zay').show(); }   });

	$('.js-acc-view').on("change keyup input click",'.count_xvg_,.price_xvg_,.delivery_xvg_',function(){  if(($(this).attr('readonly')==undefined)||(($(this).attr('disabled')==undefined)&&($(this).is('.calendar_zay')))) {  $('.pod_zay').hide(); $('.add_zay').show(); }   });

	
	$('.zay_2020').on("change keyup input click",'.del_material_zayva1,.zayva_del_naf',function(){ if(($(this).attr('readonly')==undefined)||(($(this).attr('disabled')==undefined)&&($(this).is('.calendar_zay')))) {  $('.pod_zay').hide(); $('.add_zay').show(); } });
	
	
	}, 2000 );
	


//          -   	
$('.mat_zz').on("dblclick",'.count_app_mater_',Mydblclick);
	
//    
idleTimer = null;
timerS = null;	
timerH=null;	
idleState = false; //  
idleWait = 30*60*1000; //    . (1/1000 ) - 30 
idTimeStampe=0;	
ExitSystem();
//    
	

//window.is_session='eico.atsun.ru';
	

// 	
idleTimerx = null;
timerSx = null;	
idleStatex = false; //  
idleWait_start = 30*1000; //   notification -  30  
idleWait_stop = 5*60*1000; //           - 5 	
idleWait_end = 2*60*1000; //   notification      5  -  2 
idleWait_yes=idleWait_start;	
idTimeStampex=0;	
NotifSystem();
$('<audio id="chatAudio"><source src="notify.ogg" type="audio/ogg"><source src="notify.mp3" type="audio/mpeg"><source src="notify.wav" type="audio/wav"></audio>').appendTo('body');	
// 	
	
nprogress=0; //    ajax 	

//1000 .
	setInterval(function(){ $this=inWindow(".Effectbbo");  if(inWindow(".Effectbbo").length!=0) {   setTimeout ( function () {  $this.removeClass('yes_bbs1'); }, 5000 );  }  }, 1000); // 1000 .




update_block();
$('.menu1').on("click",'.count_numb_score',save_soply);

	
	

//$('.mkr_,.smeta2').on("change",'.option_mat',option_mat);	

$('.mkr_').on("change",'.option_mat',option_mat);		
	
$('.button_ada_wall').on("change",'.option_mat1',option_mat1);	
	
//$('.scope_scope').on("change",'.option_score1',option_score1);
$('.statusis').on("change",'.vall_supply', vall_supply);	
//$(".drops").find("li").bind('click', droplis);
	
$('.menu_top,.smeta2').on("click",'.drops li',droplis);	
// 



$('.skladd_nei').bind('click', slide_skkk);		
	
	
//    
$(".pay_baks,.js-pay_baks_top").bind('click', pay_imlementer);

// 
$(".pay_avans,.js-pay_avans_top").bind('click', pay_imlementer_avans);
	
//   	
$(".imp_option").bind('click', option_imlementer);	
	
// 	
$(".edit_implem").bind('click', option_imlementer1);

// 	
$(".add__ispoln").bind('click', add_imlementer);	

// 
$(".del_dialog").bind('click', del_dialog);	
	
// 
//$(".view__not").bind('click', view_notification);
	
//         
$(".edit_122").find('i').bind('click', decision_mess);		

//         
$(".edit_123").find('i').bind('click', decision_mess_app);		
	
//    
//$(".add_nar").bind('click', save_naryad);


	

//      
//$(".add_invoice1").bind('click', add_invoice1);
	
	
	


//    
//$(".add_invoicess1").bind('click', save_invoicess1);

//      
$(".js-add-app").bind('click', save_zayava);
	
//    
$(".js-pod_pro").bind('click', sign_naryad);

//    
$(".transfer_invoicess").bind('click', take_invoice);		
	
//    
$(".sogl_pro").bind('click', sign_naryad);	
	
//    
$(".js-ut_nar").bind('click', seal_naryad);

//    
$(".js-rasp_nar").bind('click', disband_naryad);
	
// 
$(".shoot").bind('click', shoot_naryad);	
	
$('#lalala_add_form').on("change keyup input click",'.error_formi', function(){ $this = $(this); setTimeout ( function () {$this.removeClass('error_formi');  }, 2000 ); });	
	
//    
$(".del__seb").bind('click', del_sebe);

//   
$(".icon17").bind('click', summ_view);	


//  	
$('.icon3').bind('click', search_prime);

//      	
window.show_search=0;	
$("body").click(function(e) {
	
    if(($(e.target).closest(".search_seb").length==0)&&($(e.target).closest(".icon3").length==0) ){
		//alert(window.show_search);
		//          
		if(window.show_search==1)
			{
				//alert("!");
				//$('.debug').empty().append($(e.target).attr("class"));
	$('.icon1-xxx').show();
	$('.search_seb').hide();
	$('.search_seb').width('60px');
				window.show_search=0;
				 $('var.highlight').each(function(){ $(this).after($(this).html()).remove(); });
			}
	}
	
	/*
	if(($(e.target).closest(".loll_drop").length==0)  ){
	       $('.loll_drop').hide();		
	}	
	*/
	
	if(($(e.target).closest(".noti_block").length==0)&&($(e.target).closest(".view__not").length==0)  ){
		if( $('.noti_block').is(':visible') ) {
	       $('.noti_block').remove();
	       $('.view__not').hide(); $('.not_li').find('i').hide();	
		}
		}

	if(($(e.target).closest(".history_act_mat").length==0)&&($(e.target).closest(".edit_panel11_mat").length==0)  ){
		if( $('.history_act_mat').is(':visible') ) {

			$('.history_act_mat').hide();
			e.stopPropagation();
			//alert("1");
		}
	}


	
});

//       	
$('.result_s').find('.se_next').bind('click', search_next);
$('.result_s').find('.se_prev').bind('click', search_prev);
	
//        	
$('.search_seb').find('i').bind('click', search_p);

//  enter  
$("#search_text").keypress(function(e){
	     	   if(e.keyCode==13){
	     	   dosearch();
	     	   }
	     	 });
	

$("#otziv_area").keypress(function(e){
	     	   if(e.keyCode==13){
	     	   send_meee();
	     	   }
	     	 });	
	

//      	
$('#search_text').keyup(function(){
  var d1 = new Date();
  time_keyup = d1.getTime();
  if ($('#search_text').val()!=term) // ,   
   if ($('#search_text').val().length>=minlen) { //   
    setTimeout(function(){ //   
     var d2 = new Date();
     time_search = d2.getTime();
     if (time_search-time_keyup>=keyint) //    
      dosearch(); //    ,   
    }, keyint); 
   }
   else
    $('.result_s').hide(); //   ,    DIV   
 });		

//        	
$('.menu1').on("click",'.naryd_end i', function(){ $(this).prev('a')[0].click(); });
	
$('.menu1').on("click",'.material_end i', function(){ $(this).prev('a')[0].click(); });		

$('.text_finery_message_').bind('change keyup input click', function(){  savedefault($(this)); });

$('.text_zayva_message_').bind('change keyup input click', function(){  savedefault_zay($(this)); });	
	
//  	
$(".icon2").bind('click', house_options);	
	
//      
$(".hist_mu").bind('click', hist_mu_prime);	
	

	
	//  
$(".close_all_r").bind('click', close_all_razdel);

	//      
$(".cal_223").bind('click', function() {  $(this).prev('.calendar_t').trigger('focus');});	
	
//
//
//
$("#email_formi").keyup(function(){

	var email = $("#email_formi").val();

    if(email != '')
    {

	} else
	{
		$("#email_formi").addClass('error_formi');
	
	}	
	
	
});

$("#password_formi,#email_formi").keypress(function(e){
	     	   if(e.keyCode==13){
				   $('#yes1').trigger('click');
			   }
});
	
$("#password_formi").keyup(function(){

	if(($("#password_formi").val()=='')||($("#password_formi").val()==0))
	{
		$("#password_formi").addClass('error_formi');

	} else
	{
		$("#password_formi").removeClass('error_formi');
	}
	
});

$('#yes1').on( "click", function() {


  //    
   var email = $("#email_formi").val();
   var err = [0,0];
  
   $("#email_formi").removeClass('error_formi');
   $("#password_formi").removeClass('error_formi');
  
    if(email != '')
    {
		/*
    if(isValidEmailAddress(email))
    {  
	
	
	} else
	{
		$("#email_formi").addClass('error_formi');
		err[0]=1;
	}
	*/
	} else
	{
		$("#email_formi").addClass('error_formi');
		err[0]=1;		
	}
	if(($("#password_formi").val()=='')||($("#password_formi").val()==0))
	{
		$("#password_formi").addClass('error_formi');
		err[1]=1;
	}
	
	if((err[0]==0)&&(err[1]==0))
	{
	   $('#pod_form').submit();	
	}
	

	
});
//
//
//

	//           
$('.menu1').on('click','.menu3_prime li',  function(){ $(this).children('a')[0].click(); });
	
//    
	/*
$('.hide_left,.mobile').on( "click", function() {
	var est=0;
	if($(".iss").is(".big,.small")) 
	{
	   est=1;	
	}
	if(est==0)
	{
		if( $('.left_menu').is(':visible') ) 
		{
			$(".iss").addClass('small');
			$.cookie('iss', 's', {expires: 60,path: '/'});
			
		} else
		{
			$(".iss").addClass('big');
			$.cookie('iss', 'b', {expires: 60,path: '/'});
		}
				
	} else
	{
	  if($(".iss").is(".big")) 
	  {
		 $(".iss").removeClass('big');
		 $(".iss").addClass('small');
		 $.cookie('iss', 's', {expires: 60,path: '/'});
	  } else
	  {
		 $(".iss").removeClass('small');
		 $(".iss").addClass('big');  
		 $.cookie('iss', 'b', {expires: 60,path: '/'});
	  }
	  
	}

sl_message_width();
});
*/
//    
	$('.hide_left,.mobile').on( "click", function() {
		var est=0;
		if($(".iss").is(".big,.small"))
		{
			est=1;
		}
		if(est==0)
		{
			if( $('.left_menu').is(':visible') )
			{
				$(".iss").addClass('small');
				$.cookie('iss', 's', {expires: 60,path: '/'});

			} else
			{
				//$(".iss").removeClass('small');
				$(".iss").addClass('big');
				$.cookie('iss', 'b', {expires: 60,path: '/'});
			}

		} else
		{
			if($(".iss").is(".big"))
			{
				$(".iss").removeClass('big');
				$(".iss").addClass('small');
				$.cookie('iss', 's', {expires: 60,path: '/'});
			} else
			{
				$(".iss").removeClass('small');
				$(".iss").addClass('big');
				$.cookie('iss', 'b', {expires: 60,path: '/'});
			}

		}

		sl_message_width();
	});
	
	
/*    */
$(document).mouseup(function (e) {
    var container = $(".select_box");
    if (container.has(e.target).length === 0){
        //       
	    //$(".drop_box").hide();
		$(".drop_box").css("transform", "scaleY(0)");
		$(".slct_box").removeClass("active");
    }
	
	
	var container1 = $(".menu_supply");
    if (container.has(e.target).length === 0){
        //       
	   	container1.find(".drops").css("transform", "scaleY(0)");
		container1.find(".drops").removeClass('active_menu_s');
    }

	var container22 = $(".loll_drop");
    if (container22.has(e.target).length === 0){
        //       
	   	container22.css("transform", "scaleY(0)");
		
		if($('.post_p').val()=='')
		{
		   $('.loll_div').addClass('required_in_2018');
		   $('.b-loading-message').empty().append('   ').show();
		} else
		{
		  $('[name=number_soply]').val($('[name=number_soply]').attr('val_old'));
			$(".loll_drop").empty();
			$('.b-loading-message').hide();
		}
		
		
    }


	var to_k = $(".form-rate-ok1");
	if (to_k.has(e.target).length === 0){
		//       
		//to_k.find(".drops").css("transform", "scaleY(0)");
		to_k.removeClass('show-form-rate1');
	}
	
	
});
window.slctclick_box1 = function() { 


if($(this).parents('.select_box').find('input').attr('readonly')==undefined) {  
	
	  if($(this).is(".active")) 
	  {
		  $(this).removeClass("active");
		 // $(this).next().hide();
		  $(this).next().css("transform", "scaleY(0)");
	  } else
	  {
		  $(this).addClass("active");
		 // $(this).next().show();
		  $(this).next().css("transform", "scaleY(1)");
	  }




var elemss_box=$(this).attr('data_src');	


$('.slct_box').each(function(i,elem) 
{
    var att=$(this).attr('data_src');
	if ($(this).attr('data_src')!=elemss_box) {  	
			$(this).removeClass("active");
			//$(this).next().hide();
		$(this).next().css("transform", "scaleY(0)");
	} 
});	
	
}
	 
		  
//return false;

}

$('body').on("click",'.slct_box',slctclick_box1);
//$(".slct_box").bind('click', slctclick_box);

//$(".slct_box").bind('click', slctclick_box1);


window.dropli_box1 = function() { 

var active_old=$(this).parent().parent().find(".slct_box").attr("data_src");
var active_new=$(this).find("a").attr("rel");

			  var f=$(this).find("a").text();
			  var e=$(this).find("a").attr("rel");
			  
			  if(active_old!=active_new)
			  {
			    $(this).parent().find("li").removeClass("sel_active");
			    $(this).addClass("sel_active");
			  
			
			  
			 // $(this).parent().parent().find(".slct").removeClass("active").html(f);
			   $(this).parent().parent().find(".slct_box").removeClass("active").empty().append(f);
			   $(this).parent().parent().find(".slct_box").attr("data_src",e);
			  
			  // $(this).parent().parent().find(".drop_box").hide();
			   $(this).parent().parent().find(".drop_box").css("transform", "scaleY(0)"); 
				  
			   $(this).parent().parent().find("input").val(e).change();
			   savedefault($(this).parent().parent().find("input"));	  
			  } else
			  {
				 //$(this).parent().parent().find(".drop_box").hide();
				  $(this).parent().parent().find(".drop_box").css("transform", "scaleY(0)");
				 $(this).parent().parent().find(".slct_box").removeClass("active"); 
			  }
		  

}

$('body').on("click",'.drop_box li',dropli_box1);
//$(".drop_box").find("li").bind('click', dropli_box);

//$(".drop_box").find("li").bind('click', dropli_box1);
		
	

//  -    	
//  -    
//  -    	

	
	
/*    */
	/*
$(document).mouseup(function (e) {
    var container = $(".select");
    if (container.has(e.target).length === 0){
        //       
	    //$(".drop").hide();
		$(".drop").css("transform", "scaleY(0)");
		$(".slct").removeClass("active");
    }
});
*/
	$(document).mouseup(function (e) {
		var container = $(".select");
		var open_cont_list = $(".js-drop-search");
		var open_cont_list1 = $(".js-open-search");
		/*
        if ((container.has(e.target).length === 0)&&(!open_cont_list.is(e.target))&&(!open_cont_list1.is(e.target)))
        {
            //       
            //$(".drop").hide();
            //alert("!");
            $(".drop").css("transform", "scaleY(0)");
            $(".slct").removeClass("active");
            $(".drop").parents('.input-search-list').find('i').removeClass('open-search-active');
        }
        */
		//alert(container.has(e.target).length);
		if ((container.has(e.target).length === 0)&&(!open_cont_list.is(e.target))&&(!open_cont_list1.is(e.target)))
		{
			//       
			//$(".drop").hide();
			//alert("!");
			$(".drop").css("transform", "scaleY(0)");
			$(".drop-radio").css("transform", "scaleY(0)");
			$(".slct").removeClass("active");
			$(".drop").parents('.input-search-list').find('i').removeClass('open-search-active');
			$(".drop-radio").parents('.input-search-list').find('i').removeClass('open-search-active');
		}


	});


window.slctclick = function() {

	if($(this).parents('.select').find('input').attr('readonly')==undefined) {

		if($(this).is(".active"))
		{
			$(this).removeClass("active");
			//$(this).next().hide();
			$(this).next().css("transform", "scaleY(0)");
			$(this).parents('.list_2021').removeClass('active1_in_2018x');
		} else
		{
			$(this).addClass("active");
			//$(this).next().show();
			$(this).next().css("transform", "scaleY(1)");

			$(this).parents('.list_2021').addClass('active1_in_2018x');
		}




		var elemss=$(this).attr('list_number');
//var elemss1=$(this);

		$('.slct').not(this).each(function(i,elem)
		{
			var att=$(this).attr('data_src');
			//   
			//if($(this).not(elemss1))
			//	{

			//if ($(this).attr('list_number')!=elemss) {
			$(this).removeClass("active");
			//$(this).next().hide();
			$(this).next().css("transform", "scaleY(0)");
			$(this).parents('.list_2021').removeClass('active1_in_2018x');
			//}
		});

//    
		$('.drop-search').each(function(i,elem)
		{
			$(this).parents('.input-search-list').find('i').removeClass('open-search-active');
			$(this).css("transform", "scaleY(0)");

		});



		return false;
	}

/*
	  if($(this).is(".active")) 
	  {
		  $(this).removeClass("active");
		  //$(this).next().hide();
		  $(this).next().css("transform", "scaleY(0)");
	  } else
	  {
		  $(this).addClass("active");
		  //$(this).next().show();
		  $(this).next().css("transform", "scaleY(1)");
	  }




var elemss=$(this).attr('list_number');	


$('.slct').each(function(i,elem) 
{
    var att=$(this).attr('data_src');
	//   
	if ($(this).attr('list_number')!=elemss) {  	
			$(this).removeClass("active");
			//$(this).next().hide();
		$(this).next().css("transform", "scaleY(0)");
	} 
});	
	
	
	 
		  
return false;
*/
}

$(".slct").bind('click.sys', slctclick);


function droplis() { 
//alert("!");
var active_old=$(this).parent().attr("data_src");
var active_new=$(this).find("a").attr("rel");
		

			 // var f=$(this).find("a").text();
			 var e=$(this).find("a").attr("rel");
			  
	if(!$(this).parent().is(".no_active"))
		{
	
	
			  if(active_old!=active_new)
			  {
			    $(this).parent().find("li").removeClass("sel_active_sss");
			    $(this).addClass("sel_active_sss");
				$(this).parent().attr("data_src",e);  
			  
			
			  
			   // $(this).parent().parent().find(".slct").removeClass("active").html(f);
			   //$(this).parent().parent().find(".slct").removeClass("active").empty().append(f);
			   // $(this).parent().parent().find(".slct").attr("data_src",e);
			  
			   //$(this).parent().parent().find(".drop").hide();
			   //$(this).parent().parent().find(".drop").css("transform", "scaleY(0)");
			  
			   $(this).parent().parent().find("input").val(e).change();
			  } else
			  {
				 //$(this).parent().parent().find(".drop").hide();
				 //$(this).parent().parent().find(".drop").css("transform", "scaleY(0)");
				  
				 //$(this).parent().parent().find(".slct").removeClass("active"); 
			  }
		} else
			{
				$(this).parent().parent().find("input").val(e).change();
				
			}

}	
	
window.dropli = function() { 

var active_old=$(this).parent().parent().find(".slct").attr("data_src");
var active_new=$(this).find("a").attr("rel");

			  var f=$(this).find("a").text();
			  var e=$(this).find("a").attr("rel");
			  
			  if(active_old!=active_new)
			  {
			    $(this).parent().find("li").removeClass("sel_active");
			    $(this).addClass("sel_active");
			  
			
			  
			 // $(this).parent().parent().find(".slct").removeClass("active").html(f);
			   $(this).parent().parent().find(".slct").removeClass("active").empty().append(f);
			   $(this).parent().parent().find(".slct").attr("data_src",e);
				  $(this).parents('.list_2021').addClass('active_in_2018x');
			   //$(this).parent().parent().find(".drop").hide();
				  $(this).parent().parent().find(".drop").css("transform", "scaleY(0)");
			  
			   $(this).parent().parent().find("input").val(e).change();
			  } else
			  {
				 //$(this).parent().parent().find(".drop").hide();
				  $(this).parent().parent().find(".drop").css("transform", "scaleY(0)");
				  
				 $(this).parent().parent().find(".slct").removeClass("active"); 
			  }
		  

}
$(".drop").find("li").bind('click', dropli);



	
//$('#save').bind('change', changesave);	

var list_number	= function() {
	var active_new=$(this).find("a").attr("rel");
	if(active_new==2)
		{
			$("#date_table").show(); 
		}
}



	/*     */
	var changesort2w = function() {
		$.cookie("su_2w", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
		CookieList("su_2w",$(this).val(),'add');
		$('.js-reload-top').removeClass('active-r');
		$('.js-reload-top').addClass('active-r');


		if($(this).val()==2)
		{
			//   
			/*
            $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_calendar.php',
            afterLoading: function(data, el) {
                //alert('afterLoading');
            },
            afterLoadingOnShow: function(data, el) {
                //alert('afterLoadingOnShow');
            },
            afterClose: function(data, el) { //    ArcticModal
            clearInterval(timerId);
            }

          });
          */
			$("#date_table").show();
			//$("#date_table").focus();
		}

	};
	$('#sort2w').bind('change', changesort2w);







/*     */
var changesort2 = function() {  
$.cookie("su_2", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_2",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');


if($(this).val()==2)
{
	//   
	/*
	$.arcticmodal({
    type: 'ajax',
    url: 'forms/form_calendar.php',
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	clearInterval(timerId);
    }

  });
  */
	$("#date_table").show(); 
	//$("#date_table").focus();
}

};
$('#sort2').bind('change', changesort2);	
	
	
$('[list_number=t2]').next().find('li').bind('click', list_number);		

var changesort1 = function() {  
$.cookie("su_1", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_1",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');


};
$('#sort1').bind('change', changesort1);	


	
var changesort_stock3 = function() {  
$.cookie("su_st_3", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_st_3",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');

};
$('#sort_stock3').bind('change', changesort_stock3);		
	

var changesort_stock1 = function() {  
$.cookie("su_st_1", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_st_1",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');

};
$('#sort_stock1').bind('change', changesort_stock1);	
	
var changesort_stock2__= function() {  
	$.cookie("su_st_2", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
	$(this).prev().val('');

	$('.js--sort').removeClass('greei_input');
	$('.js--sort').find('input').removeAttr('readonly');



	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');
	$(this).hide();	
}
	var changesort_stock2w= function() {
		$.cookie("su_st_2w", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
		CookieList("su_st_2w",$(this).val(),'add');
		$('.js-reload-top').removeClass('active-r');
		$('.js-reload-top').addClass('active-r');
		if($(this).val()!='')
		{
			$(this).next().show();
			//   
			//$('.js--sort').addClass('greei_input');
			//$('.js--sort').find('input').prop('readonly',true);

		}else
		{
			$(this).next().hide();
			//   
			//$('.js--sort').removeClass('greei_input');
			//$('.js--sort').find('input').removeAttr('readonly');

		}


	};
var changesort_stock2= function() {  
$.cookie("su_st_2", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_st_2",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');
	if($(this).val()!='')
	{
		$(this).next().show();
		//   
		$('.js--sort').addClass('greei_input');
		$('.js--sort').find('input').prop('readonly',true);

	}else
	{
		$(this).next().hide();
		//   
		$('.js--sort').removeClass('greei_input');
		$('.js--sort').find('input').removeAttr('readonly');

	}


};
$('.name_stock_search_input').bind('change keyup input click', changesort_stock2);

	$('.name_stock_search_inputw').bind('change keyup input click', changesort_stock2w);

	$('.dell_stock_search').bind('change keyup input click', changesort_stock2__);





/*
var vall_basket2 = function() {  
	var el_v=$(this).val();
	//alert(el_v);
	if(el_v==1)
	{	
		// 
		save_soply();
	}
	if(el_v==2)
	{
		// 
		var iu=$('.content_block').attr('iu');		
		$.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
		$.cookie("basket_score_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
		$.cookie("basket_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
		
		$('.current_score').find('.number_score').empty();
		$('.current_score').find('.count_numb_score').empty();
		$('.current_score').hide();
		$('.more_supply2').hide();
		
		$('.checher_supply').removeClass('checher_supply');
		$('.score_active').removeClass('score_active');
	}	
	if(el_v==3)
	{
	  //
		var iu=$('.content_block').attr('iu');	
		var cookie_flag_current = $.cookie('current_supply_'+iu);
	//alert(cookie_new);
	if(cookie_flag_current!=null) 
	{	
		id_soply=cookie_flag_current;
	
		
		
		 $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_update_soply.php?id='+id_soply,
			 beforeOpen: function (data, el) {
				 //     ajax 
				 $('.loader_ada_forms').show();
				 $('.loader_ada1_forms').addClass('select_ada');
			 },
			 afterLoading: function (data, el) {
				 //    ajax
				 data.body.parents('.arcticmodal-container').addClass('yoi');
				 $('.loader_ada_forms').hide();
				 $('.loader_ada1_forms').removeClass('select_ada');
			 },
			 beforeClose: function (data, el) { //    ArcticModal
				 if (typeof timerId !== "undefined") {
					 clearInterval(timerId);
				 }
				 BodyScrool();
			 }

  });	
	}
	}
};	
*/
	
	/*
var vall_basket = function() {  
	var el_v=$(this).val();
	//alert(el_v);
	if(el_v==1)
	{
	    //  
		add_soply();
		
	}
	
	if(el_v==2)
	{
		// 
		erase_basket();
	}
	
	
	//$('[rel_status='+$(this).attr('rel')+']').hide();
	//var data ='url='+window.location.href+'&id='+$(this).attr('rel')+'&val='+el_v;
	//AjaxClient('supply','status_work','GET',data,'Aftervall_supply',$(this).attr('rel'),0);			
};	
*/
//$('.vall_basket').bind('change', vall_basket);
//$('.vall_basket2').bind('change', vall_basket2);

//$('.option_score1').bind('change', option_score1);		

var changesortbill4 = function() {  
$.cookie("bi_4", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("bi_4",$(this).val(),'add');
$('.show_sort_supply').removeClass('active_supply');
$('.show_sort_supply').addClass('active_supply');	

};
$('#sortb4').bind('change', changesortbill4);		

var changesortbill3 = function() {  
$.cookie("bi_3", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("bi_3",$(this).val(),'add');
$('.show_sort_supply').removeClass('active_supply');
$('.show_sort_supply').addClass('active_supply');	

};
$('#sortb3').bind('change', changesortbill3);	
	
var changesort3 = function() {  
$.cookie("su_3", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_3",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');


};
$('#sort3').bind('change', changesort3);	
	
	
var changesort4 = function() {  
$.cookie("su_4", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_4",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');


};
$('#sort4').bind('change', changesort4);	
	
	

var changesort_stock4 = function() {  
$.cookie("su_st_4", null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
CookieList("su_st_4",$(this).val(),'add');
	$('.js-reload-top').removeClass('active-r');
	$('.js-reload-top').addClass('active-r');

};
$('#sort_stock4').bind('change', changesort_stock4);	
	

/*    */
var changecity = function() {  

 //  
var data ='url='+window.location.href+'&id='+$(this).val();
$('.menu2_prime').hide();
$('.menu3_prime').hide();
AjaxClient('menu_prime','city','GET',data,'AfterChangeCity','1',0);	

};
$('#city').bind('change', changecity);
	
	

window.changekvartal = function() {  

 //  
var data ='url='+window.location.href+'&id='+$(this).val();
$('.menu3_prime').hide();
AjaxClient('menu_prime','kvartal','GET',data,'AfterChangeKvartal','1',0);	

};
$('#kvartal').bind('change', changekvartal);

});
 

function AfterUpdateCostFinery(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		$('.mat[rel_mat='+update+']').find('.price_finery_mater_').val(data.cost);
		
		
	var rel_id=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').parents('.mat').attr('rel_w');
	var rel_mat=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').parents('.mat').attr('rel_mat');
	
	var max=parseFloat($('.mat[rel_mat='+update+']').find('.price_finery_mater_').attr('max'));
	var my=parseFloat($('.mat[rel_mat='+update+']').find('.price_finery_mater_').attr('my'));
	//alert(max);
	var value=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').val();	
	$('.mat[rel_mat='+update+']').find('.price_finery_mater_').removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		if(((parseFloat(value)>max)&&(!isNaN(max)))||(parseFloat(value)>my))
			{
				//     
				$('.mat[rel_mat='+update+']').find('.price_finery_mater_').addClass('redaas');
			} 				
	} 
		
		
	    serv_mess_m($('.mat[rel_mat='+update+']').find('.price_finery_mater_'));
	    summ_finery1(update);
	}
	if ( data.status=='error' )
    {
		$('.mat[rel_mat='+update+']').find('.price_finery_mater_').val('');
		
		
					var rel_id=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').parents('.mat').attr('rel_w');
	var rel_mat=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').parents('.mat').attr('rel_mat');
	
	var max=parseFloat($('.mat[rel_mat='+update+']').find('.price_finery_mater_').attr('max'));
	var my=parseFloat($('.mat[rel_mat='+update+']').find('.price_finery_mater_').attr('my'));
	
	var value=$('.mat[rel_mat='+update+']').find('.price_finery_mater_').val();	
	$('.mat[rel_mat='+update+']').find('.price_finery_mater_').removeClass('redaas');
	if((value!=0)&&(value!='')&&($.isNumeric(value)))
	{
		if(((parseFloat(value)!=max)&&(!isNaN(max)))||(parseFloat(value)>my))
			{
				//     
				$('.mat[rel_mat='+update+']').find('.price_finery_mater_').addClass('redaas');	
			} 
				
	} 		
		
		
		serv_mess_m($('.mat[rel_mat='+update+']').find('.price_finery_mater_'));
	    summ_finery1(update);
	}
}


//  
function AfterSendMM(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		//   
		if($('.sego_mess').length==0)
		{
			$('.padding_mess').append('<div class="dialog_clear"></div><div class="message_date"><div><span class="sego_mess"></span></div></div>');	
		}
		$('.padding_mess').append('<div class="dialog_clear"></div>'+data.echo);
		scroll_to_bottom(2000);
		$('#otziv_area').val('');
	}
}



//       
function AfterUpdateAkt(data,update)
{
	
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		
		if(update==0)
			{
				$('[invoices_messa='+data.id+']').find('.img_akt ul').empty().append(data.echo);
			} else
				
				{
					$('[invoices_messa='+data.id+']').find('.img_akt1 ul').empty().append(data.echo);
				}
		
		
	}
	
	
}





//  
function Afterupdate_status(data,update)
{
	if ( data.status=='ok' )
    {
		//alert(update);
	    var cc = update.split('.');
	    for ( var t = 0; t < cc.length; t++ ) 
	    { 	
		     $('[supply_id='+cc[t]+']').find('.statusis').empty().append(data.basket[t]);
			$('[supply_id='+cc[t]+']').find('.mkr_').empty();
			
	    }
		
		
		
	}
	
	
	
}


function Aftervall_supply(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		//alert(update);
		$('[rel_status='+update+']').after(data.status_echo).remove();
		
		var si= $('[rel_status='+update+']').parents('[supply_stock]').attr('supply_stock');
		
		var si1=si.split('_');
		UpdateStatusADA(si1[0]);
		
		
		
	}
	if ( data.status=='error' )
    {
		
		
		
	}
}


function AfterChangeCity(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		$('.menu2_prime').remove();
        $('.menu3_prime').remove();
		$('.menu1_prime').after(data.echo);
		$(".slct").unbind('click.sys');
		$(".slct").bind('click.sys', slctclick);
		$(".drop").find("li").unbind('click');
		$(".drop").find("li").bind('click', dropli);
		$('#kvartal').unbind('change');
		$('#kvartal').bind('change', changekvartal);
		
	} 
	if ( data.status=='error' )
    {		
		$('.menu2_prime').show();
        $('.menu3_prime').show();	
	}
	//alert(data.echo);
}

function AfterNofi(data,update)
{
	nprogress=0;
	if ( data.status=='update' )
    {
		//         
		var dialog=0;
		var date='';
		if($('.message_block').length!=0)
		{
		   dialog = $('.message_block').attr('id_content');
		   date=$('[dmes_e]:last').attr('dmes_e');	
		}
			
		
		
		var data ='tk='+data.token+'&id_dialog='+dialog+'&date='+date;
		AjaxClient('notification','notification','GET',data,'AfterNotification','1',0);
	}
}

//    
function AfterDellMaterialInvoice(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	} 
	if ( data.status=='ok' )
    {
		$('[invoice_material='+update+']').remove();
		$('[invoices_messa='+update+']').next().remove();
		$('[invoices_messa='+update+']').remove();
		
		
		itog_invoice();
	}
}

//    (jpg)
function AfterDellImageInvoice(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	} 
	if ( data.status=='ok' )
    {
		$('.img_invoice').find('[sop='+update+']').remove();
		//  li 0      
		if($('.img_invoice').find('li').length==0)
		{
				$('.img_invoice').hide();
		}
	}
}





//    (jpg)  
function AfterDellImageSupply(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	} 
	if ( data.status=='ok' )
    {
		$('.img_ssoply').find('[sop='+update+']').remove();
		//  li 0      
		if($('.img_ssoply').find('li').length==0)
		{
				$('.img_ssoply').hide();
		}
	}
}


//    
function AfterUpdateImageInvoice(data,update)
{
	nprogress=0;
	if ( data.status=='reg' )
    {
		WindowLogin();
	} else
		{
	if ( data.status=='ok' )
    {
		$('.img_invoice').find('ul').empty().append(data.echo);
		$('.img_invoice').show();
		ToolTip();
	}
		}
}

//    
function AfterUpdateImageSupply(data,update)
{
	nprogress=0;
	if ( data.status=='reg' )
    {
		WindowLogin();
	} else
		{
	if ( data.status=='ok' )
    {
		$('.img_ssoply').find('ul').empty().append(data.echo);
		$('.img_ssoply').show();
		ToolTip();
	}
		}
}

//  
function AfterDellNot(data,update)
{
	nprogress=0;
	if ( data.status=='reg' )
	{
		WindowLogin();
	} else
	{
		if ( data.status=='ok' )
		{
			//        
			$('[rel_noti='+update+']').remove();
			if( $('.noti_block').is(':visible') ) {
				var tips=parseInt(trim_number($('.noti_block').find('.noti_coc').text()));
				if ((tips!='')&&(tips!=0))
				{
					tips=tips-1;
					if(tips==0)
					{
						$('.noti_block').remove();
						$('.view__not').hide();
						$('.not_li').find('i').hide();
					}
					{
						$('.noti_block').find('.noti_coc').empty().append(tips);
						$('.not_li').find('i').empty().append(tips);

					}
				}
			}

		} else
		{
			$('[rel_noti='+update+']').show();

		}
	}
}

//   
function AfterTabsInfoApp(data,update)
{
	if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

	if ( data.status=='reg' )
	{
		WindowLogin();
	}

	if ( data.status=='ok' )
	{
		$('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
		//$('.form'+update[1]+' .px_bg').empty().append(data.query);

		//$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

		//$('.form'+update[1]+' .js-tabs_docc').hide();
		//$('.form'+update[1]+' .js-tabs_'+update[0]).show();

		NumberBlockFile();
		ToolTip();
		if((update[0]==3)||(update[0]==4))
		{
			$(".slct").unbind('click.sys');
			$(".slct").bind('click.sys', slctclick);
			$(".drop").find("li").unbind('click');
			$(".drop").find("li").bind('click', dropli);
			//$('#typesay').unbind('change', changesay);
			//$('#typesay').bind('change', changesay);
			//alert("!");
		}

	}
}

//  
function AfterVVN(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		$('.noti_block').find('.scro').empty().append(data.echo);
		$('.noti_block').find('.noti_coc').empty().append(data.not);
		$('.noti_block').find('.noti_co').show();
		$('.noti_block').on("click",'.del_notif',DellNotif);	
	}
}

function AfterNotification(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		$('.users_rule').attr('not',data.tk);
		if(data.not==0)
		{
			//     0	
			$('.not_li').find('i').empty();
			$('.not_li').find('i').hide();
			$('.view__not').hide();
		} else
		{
			$('.not_li').find('i').empty().append(data.not);
			$('.not_li').find('i').show();
			$('.view__not').show();
			$('#chatAudio')[0].play();
			
			//         -   
			if($('.view__not').length)
			{
				if( $('.noti_block').is(':visible') ) {	
					// 
					$('.noti_block').find('.scro').empty().append('<div class="loader_inter"><div></div><div></div><div></div><div></div></div>');
	                var data ='';
                    AjaxClient('notification','view_notification','GET',data,'AfterVVN',1,0);	
				} else
				{
					//   	
					$('.menu1').append('<div class="noti_block"><div class="title_noti"><ul class="t_ul"><li> </li><li><i class="noti_co" style="display:none;"><span class="noti_coc"></span></i></li></ul></div><div class="scro">'+data.echo+'</div></div>');
					setTimeout ( function () { $( '.noti_block' ).remove (); }, 5000 );
				}
					
			}
			
			
		}
		//
		if(data.echo_m==0)
		{
			//     0	
			$('.mess_li').find('i').empty();
			$('.mess_li').hide();
			//$('.view__not').hide(); //
		} else
		{
			$('.mess_li').find('i').empty().append(data.echo_m);
			$('.mess_li').find('i').show();
			//$('.view__not').show(); //
			$('#chatAudio')[0].play();					
			
			if($('.message_block').length!=0)
		    {
				
				if($('.sego_mess').length==0)
		        {
			       $('.padding_mess').append('<div class="dialog_clear"></div><div class="message_date"><div><span class="sego_mess"></span></div></div>');	
		        }
				
		        $('.padding_mess').append('<div class="dialog_clear"></div>'+data.echo_dialog);
				
				
				scroll_to_bottom(2000);
			}
			
			
		}
	}
}
	
	
function AfterMESS(data,update)
{
		if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
		$('.content_block').attr('n',data.n_st);
		$('.history_message').attr('s_m',data.poo);
		var B = document.body;
		var sc=B.scrollHeight;
		
		$('.padding_mess').prepend(data.echo);
	
		
		window.scrollTo(0,(B.scrollHeight - sc  + B.scrollTop));
		if( data.eshe==1 )
			{
		$('.padding_mess').prepend($('.history_message'));
		$('.history_message').show();
			} else
				{
					$('.history_message').remove();
				}
	}
		if ( data.status=='error' )
    {
		$('.history_message').remove();
	}
	
}

function AfterUCASH(data,update)
{
	$('[cl_pay='+update+']').empty().append(data.echo);
	$('[or_pay='+update+']').empty().append('<div class="font-rank rasp_pay" data-tooltip="" id_rel="'+update+'"><span class="font-rank-inner">x</span></div>');
			$('.pay_summ2').remove();
		$('.pay_summ3').remove();
		$('.pay_summ4').remove();
		$('.j_cash').after(data.echo2);
	ToolTip();


	NumberBlockFile();


}




//      
function AfterWalletSTx(data,update)
{
	//alert(update);
	$('.billl[rel_id='+update+']').find('.loader_inter').remove();
	
	if ( data.status=='reg' )
    {
		$('.b-loading').hide();
		WindowLogin();
	}
	
	
	if ( data.status=='ok' )
    {
		$('.billl[rel_id='+update+']').find('.status_wallet_ada').empty().append(data.echo);
	    $('.billl[rel_id='+update+']').find('.button_ada_wall').empty().append(data.button);
	}
}

function AfterChangeKvartal(data,update)
{
	if ( data.status=='reg' )
    {
		WindowLogin();
	}
	
	if ( data.status=='ok' )
    {
        $('.menu3_prime').remove();
		$('.menu2_prime').after(data.echo);
		$(".slct").unbind('click.sys');
		$(".slct").bind('click.sys', slctclick);
		$(".drop").find("li").unbind('click');
		$(".drop").find("li").bind('click', dropli);
		
		
	} 
	if ( data.status=='error' )
    {		
        $('.menu3_prime').show();	
	}
	//alert(data.echo);
}

//  -    
//  -    
//  -    


/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-csstransforms3d-csstransitions-shiv-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["","<style>",a,"</style>"].join(""),k.id=h,(l?k:m).innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e});var G=function(a,c){var d=a.join(""),f=c.length;w(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=(i.csstransforms3d&&i.csstransforms3d.offsetLeft)===9&&i.csstransforms3d.offsetHeight===3},f,c)}([,["@media (",m.join("transform-3d),("),h,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a},q.csstransitions=function(){return F("transition")};for(var H in q)y(q,H)&&(v=H.toLowerCase(),e[v]=q[H](),t.push((e[v]?"":"no-")+v));return z(""),i=k=null,function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};



<!--
//v1.7
// Flash Player Version Detection
// Detect Client Browser type
// Copyright 2005-2008 Adobe Systems Incorporated.  All rights reserved.
var isIE  = (navigator.appVersion.indexOf("MSIE") != -1) ? true : false;
var isWin = (navigator.appVersion.toLowerCase().indexOf("win") != -1) ? true : false;
var isOpera = (navigator.userAgent.indexOf("Opera") != -1) ? true : false;
function ControlVersion()
{
	var version;
	var axo;
	var e;
	// NOTE : new ActiveXObject(strFoo) throws an exception if strFoo isn't in the registry
	try {
		// version will be set for 7.X or greater players
		axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
		version = axo.GetVariable("$version");
	} catch (e) {
	}
	if (!version)
	{
		try {
			// version will be set for 6.X players only
			axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
			
			// installed player is some revision of 6.0
			// GetVariable("$version") crashes for versions 6.0.22 through 6.0.29,
			// so we have to be careful. 
			
			// default to the first public version
			version = "WIN 6,0,21,0";
			// throws if AllowScripAccess does not exist (introduced in 6.0r47)		
			axo.AllowScriptAccess = "always";
			// safe to call for 6.0r47 or greater
			version = axo.GetVariable("$version");
		} catch (e) {
		}
	}
	if (!version)
	{
		try {
			// version will be set for 4.X or 5.X player
			axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");
			version = axo.GetVariable("$version");
		} catch (e) {
		}
	}
	if (!version)
	{
		try {
			// version will be set for 3.X player
			axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");
			version = "WIN 3,0,18,0";
		} catch (e) {
		}
	}
	if (!version)
	{
		try {
			// version will be set for 2.X player
			axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
			version = "WIN 2,0,0,11";
		} catch (e) {
			version = -1;
		}
	}
	
	return version;
}
// JavaScript helper required to detect Flash Player PlugIn version information
function GetSwfVer(){
	// NS/Opera version >= 3 check for Flash plugin in plugin array
	var flashVer = -1;
	
	if (navigator.plugins != null && navigator.plugins.length > 0) {
		if (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]) {
			var swVer2 = navigator.plugins["Shockwave Flash 2.0"] ? " 2.0" : "";
			var flashDescription = navigator.plugins["Shockwave Flash" + swVer2].description;
			var descArray = flashDescription.split(" ");
			var tempArrayMajor = descArray[2].split(".");			
			var versionMajor = tempArrayMajor[0];
			var versionMinor = tempArrayMajor[1];
			var versionRevision = descArray[3];
			if (versionRevision == "") {
				versionRevision = descArray[4];
			}
			if (versionRevision[0] == "d") {
				versionRevision = versionRevision.substring(1);
			} else if (versionRevision[0] == "r") {
				versionRevision = versionRevision.substring(1);
				if (versionRevision.indexOf("d") > 0) {
					versionRevision = versionRevision.substring(0, versionRevision.indexOf("d"));
				}
			}
			var flashVer = versionMajor + "." + versionMinor + "." + versionRevision;
		}
	}
	// MSN/WebTV 2.6 supports Flash 4
	else if (navigator.userAgent.toLowerCase().indexOf("webtv/2.6") != -1) flashVer = 4;
	// WebTV 2.5 supports Flash 3
	else if (navigator.userAgent.toLowerCase().indexOf("webtv/2.5") != -1) flashVer = 3;
	// older WebTV supports Flash 2
	else if (navigator.userAgent.toLowerCase().indexOf("webtv") != -1) flashVer = 2;
	else if ( isIE && isWin && !isOpera ) {
		flashVer = ControlVersion();
	}	
	return flashVer;
}
// When called with reqMajorVer, reqMinorVer, reqRevision returns true if that version or greater is available
function DetectFlashVer(reqMajorVer, reqMinorVer, reqRevision)
{
	versionStr = GetSwfVer();
	if (versionStr == -1 ) {
		return false;
	} else if (versionStr != 0) {
		if(isIE && isWin && !isOpera) {
			// Given "WIN 2,0,0,11"
			tempArray         = versionStr.split(" "); 	// ["WIN", "2,0,0,11"]
			tempString        = tempArray[1];			// "2,0,0,11"
			versionArray      = tempString.split(",");	// ['2', '0', '0', '11']
		} else {
			versionArray      = versionStr.split(".");
		}
		var versionMajor      = versionArray[0];
		var versionMinor      = versionArray[1];
		var versionRevision   = versionArray[2];
        	// is the major.revision >= requested major.revision AND the minor version >= requested minor
		if (versionMajor > parseFloat(reqMajorVer)) {
			return true;
		} else if (versionMajor == parseFloat(reqMajorVer)) {
			if (versionMinor > parseFloat(reqMinorVer))
				return true;
			else if (versionMinor == parseFloat(reqMinorVer)) {
				if (versionRevision >= parseFloat(reqRevision))
					return true;
			}
		}
		return false;
	}
}
function AC_AddExtension(src, ext)
{
  if (src.indexOf('?') != -1)
    return src.replace(/\?/, ext+'?'); 
  else
    return src + ext;
}
function AC_Generateobj(objAttrs, params, embedAttrs) 
{ 
  var str = '';
  if (isIE && isWin && !isOpera)
  {
    str += '<object ';
    for (var i in objAttrs)
    {
      str += i + '="' + objAttrs[i] + '" ';
    }
    str += '>';
    for (var i in params)
    {
      str += '<param name="' + i + '" value="' + params[i] + '" /> ';
    }
    str += '</object>';
  }
  else
  {
    str += '<embed ';
    for (var i in embedAttrs)
    {
      str += i + '="' + embedAttrs[i] + '" ';
    }
    str += '> </embed>';
  }
  document.write(str);
}
function AC_FL_RunContent(){
  var ret = 
    AC_GetArgs
    (  arguments, ".swf", "movie", "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
     , "application/x-shockwave-flash"
    );
  AC_Generateobj(ret.objAttrs, ret.params, ret.embedAttrs);
}
function AC_SW_RunContent(){
  var ret = 
    AC_GetArgs
    (  arguments, ".dcr", "src", "clsid:166B1BCA-3F9C-11CF-8075-444553540000"
     , null
    );
  AC_Generateobj(ret.objAttrs, ret.params, ret.embedAttrs);
}
function AC_GetArgs(args, ext, srcParamName, classid, mimeType){
  var ret = new Object();
  ret.embedAttrs = new Object();
  ret.params = new Object();
  ret.objAttrs = new Object();
  for (var i=0; i < args.length; i=i+2){
    var currArg = args[i].toLowerCase();    
    switch (currArg){	
      case "classid":
        break;
      case "pluginspage":
        ret.embedAttrs[args[i]] = args[i+1];
        break;
      case "src":
      case "movie":	
        args[i+1] = AC_AddExtension(args[i+1], ext);
        ret.embedAttrs["src"] = args[i+1];
        ret.params[srcParamName] = args[i+1];
        break;
      case "onafterupdate":
      case "onbeforeupdate":
      case "onblur":
      case "oncellchange":
      case "onclick":
      case "ondblclick":
      case "ondrag":
      case "ondragend":
      case "ondragenter":
      case "ondragleave":
      case "ondragover":
      case "ondrop":
      case "onfinish":
      case "onfocus":
      case "onhelp":
      case "onmousedown":
      case "onmouseup":
      case "onmouseover":
      case "onmousemove":
      case "onmouseout":
      case "onkeypress":
      case "onkeydown":
      case "onkeyup":
      case "onload":
      case "onlosecapture":
      case "onpropertychange":
      case "onreadystatechange":
      case "onrowsdelete":
      case "onrowenter":
      case "onrowexit":
      case "onrowsinserted":
      case "onstart":
      case "onscroll":
      case "onbeforeeditfocus":
      case "onactivate":
      case "onbeforedeactivate":
      case "ondeactivate":
      case "type":
      case "codebase":
      case "id":
        ret.objAttrs[args[i]] = args[i+1];
        break;
      case "width":
      case "height":
      case "align":
      case "vspace": 
      case "hspace":
      case "class":
      case "title":
      case "accesskey":
      case "name":
      case "tabindex":
        ret.embedAttrs[args[i]] = ret.objAttrs[args[i]] = args[i+1];
        break;
      default:
        ret.embedAttrs[args[i]] = ret.params[args[i]] = args[i+1];
    }
  }
  ret.objAttrs["classid"] = classid;
  if (mimeType) ret.embedAttrs["type"] = mimeType;
  return ret;
}


(function($) {

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// ----------------------------------------- DATA ----------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	var Data = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ defaults

		//default settings values
		defaults: {
			//style
			width: '100%', 
			size: 'medium', 
			themes: [], 
			//texts
			placeholder: 'Select an item', 
			//controls
			removable: false, 
			empty: false, 
			search: false, 
			//ajax
			ajax: false, 
			data: {}, 
			//positionning
			scrollContainer: null, 
			zIndex: null
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ setDefaults

		//set default settings values
		setup: function(opts) {
			//controls provided settings keys
			var defKeys = Object.keys(this.defaults);
			var optKeys = Object.keys(opts);
			var isOk = true;
			optKeys.forEach(function(k) {
				if($.inArray(k, defKeys) === -1) {
					console.error('selectMania | wrong setup settings');
					isOk = false;
				}
			});
			//if provided settings are ok
			if(isOk) {
				this.defaults = $.extend(true, {}, Data.defaults, opts);
			}
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// ---------------------------------------- ENGINE ---------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	var Engine = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ internalSettings

		//insert internal data into settings object
		internalSettings: function($originalSelect, settings) {
			var thisEngine = this;
			//initialize interal data
			settings.multiple = false;
			settings.values = [];
			//if select is multiple
			settings.multiple = $originalSelect.is('[multiple]');
			//if select is disabled
			settings.disabled = $originalSelect.is('[disabled]');
			//loop through selected options
			$originalSelect.find('option:selected').each(function() {
				//insert selected value data
				settings.values.push({
					value: this.value, 
					text: this.text
				});
			});
			//send back settings
			return settings;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ getAttrSettings

		//get selectMania settings stored as attributes
		getAttrSettings: function($originalSelect) {
			var attrData = {};
			//available attributes
			var attrs = ['width','size','placeholder','removable','empty','search','scrollContainer','zIndex'];
			//loop through attributes
			attrs.forEach(function(attr) {
				//if attribute is set on select
				if($originalSelect.is('[data-'+attr+']')) {
					//insert data
					var elAttr = $originalSelect.attr('data-'+attr);
					if(elAttr === 'true' || elAttr === 'false') {
						elAttr = elAttr === 'true';
					}
					attrData[attr] = elAttr;
				}
			});
			//send back select attributes data
			return attrData;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ initialize

		//initialize selectMania on original select
		initialize: function($originalSelect, userSettings) {
			var thisEngine = this;
			//clone settings before starting work
			var settings = $.extend(true, {}, userSettings);
			//get select settings stored as attributes
			var attrSettings = thisEngine.getAttrSettings($originalSelect);
			//merge settings with attributes
			settings = $.extend(settings, attrSettings);
			//set selected value as empty if explicitly asked
			if(settings.empty) {
				$originalSelect.val('');
			}
			//insert internal data into settings
			settings = thisEngine.internalSettings($originalSelect, settings);
			//control ajax function type and size
			if(thisEngine.controlSettings($originalSelect, settings)) {
				//build selectMania elements
				var $builtSelect = Build.build($originalSelect, settings);
				//attach original select element to selectMania element
				$builtSelect.data('selectMania-originalSelect', $originalSelect);
				//attach selectMania element to original select element
				$originalSelect.data('selectMania-element', $builtSelect);
				//if ajax is activated
				if(settings.ajax !== false) {
					//initialize ajax data
					thisEngine.initAjax($builtSelect, settings);
				}
				//update clean values icon display
				thisEngine.updateClean($builtSelect);
				//add witness / hding class original select element
				$originalSelect.addClass('select-mania-original');
				//insert selectMania element before original select
				$builtSelect.insertBefore($originalSelect);
				//move original select into selectMania element
				$originalSelect.appendTo($builtSelect);
				//bind selectMania element
				Binds.bind($builtSelect);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ update

		//update selectMania element according to original select element
		update: function($originalSelect) {
			var thisEngine = this;
			//selectMania elements
			var $selectManiaEl = $originalSelect.data('selectMania-element');
			var $valueList = $selectManiaEl.find('.select-mania-values').first();
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			var $itemList = $dropdown.find('.select-mania-items').first();
			//update disabled status
			if($originalSelect.is('[disabled]')) {
				$selectManiaEl.addClass('select-mania-disabled');
			}
			else {
				$selectManiaEl.removeClass('select-mania-disabled');
			}
			//remove selectMania values and items
			$selectManiaEl.find('.select-mania-value').remove();
			$itemList.empty();
			//build and insert selected values
			$originalSelect.find('option:selected').each(function() {
				if($(this).is(':selected')) {
					$valueList.append(Build.buildValue({
						value: this.value, 
						text: this.text
					}));
				}
			});
			//build and insert items
			$itemList.append(Build.buildItemList($originalSelect.children()));
			//update clean values icon display
			thisEngine.updateClean($selectManiaEl);
			//rebind selectMania element
			Binds.bind($selectManiaEl);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ destroy

		//destroy selectMania on targeted original select
		destroy: function($originalSelect) {
			//selectMania element
			var $selectManiaEl = $originalSelect.data('selectMania-element');
			//move original select out of the selectMania element
			$originalSelect.insertAfter($selectManiaEl);
			//remove selectMania element
			$selectManiaEl.remove();
			//remove class from original select
			$originalSelect.removeClass('select-mania-original');
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ openDropdown / closeDropdown

		//open items dropdown
		openDropdown: function($dropdown) {
			var thisEngine = this;
			//select-mania element
			var $selectManiaEl = $dropdown.closest('.select-mania');
			//if scroll container option is set
			if($selectManiaEl.is('[data-selectMania-scrollContainer]')) {
				//scroll container element
				var $scrollContainer = $($selectManiaEl.attr('data-selectMania-scrollContainer'));
				//position absolute dropdown
				Engine.positionDropdown($dropdown);
				//apply positionning class
				$dropdown.addClass('select-mania-absolute');
				//bind scroll container to close dropdown on scroll
				$scrollContainer.off('scroll.selectMania').on('scroll.selectMania', function() {
					//unbind close dropdown on scrolling
					$scrollContainer.off('scroll.selectMania');
					//close open dropdown
					Engine.closeDropdown($('.select-mania-dropdown.open'));
				});
				//reposition dropdown when window is resized
				$(window).off('resize.selectMania').on('resize.selectMania', function() {
					//position absolute dropdown
					Engine.positionDropdown($dropdown);
				});
			}
			//open dropdown
			$dropdown.stop().addClass('open').slideDown(100);
			//scroll dropdown to top
			$dropdown.find('.select-mania-items').scrollTop(0);
			//focus search input
			thisEngine.focusSearch($dropdown);
			//bind keyboard control
			$(document).off('keydown.selectMania').on('keydown.selectMania', Binds.keyboardControl);
		}, 

		//close items dropdown
		closeDropdown: function($dropdown) {
			var $selectManiaEl = $dropdown.data('selectMania-element');
			//unbind keyboard control
			$(document).off('keydown.selectMania');
			//remove every hover class from items
			$dropdown.find('.select-mania-item').removeClass('select-mania-hover');
			//if dropdown has aboslute positionning
			if($dropdown.hasClass('select-mania-absolute')) {
				//select-mania inner element
				var $selectManiaInner = $dropdown
					.data('selectMania-element')
					.find('.select-mania-inner')
					.first();
				//move back the dropdown inside select-mania element
				$dropdown
					.removeClass('open')
					.hide()
					.insertAfter(
						$selectManiaInner
					);
				//unbind repositioning on resize
				$(window).off('resize.selectMania');
				//unbind close dropdown on scrolling
				var $scrollContainer = $($selectManiaEl.attr('data-selectMania-scrollContainer'));
				if($scrollContainer.length > 0) {
					$scrollContainer.off('scroll.selectMania');
				}
			}
			//if dropdown has standard positionning
			else {
				//close dropdown
				$dropdown.stop().removeClass('open').slideUp(100);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ positionDropdown

		//position dropdown relative to its select-mania element
		positionDropdown: function($dropdown) {
			var $selectManiaEl = $dropdown.data('selectMania-element');
			//item list scroll data
			var $itemList = $dropdown.find('.select-mania-items');
			var itemListScroll = $itemList.scrollTop();
			//data for calculating dropdown absolute position
			var selectManiaElPos = $selectManiaEl.offset();
			var selectManiaElWidth = $selectManiaEl.outerWidth();
			var selectManiaElHeight = $selectManiaEl.outerHeight();
			//append dropdown to body in absolute position
			$dropdown.appendTo('body').css({
				position: 'absolute', 
				top: selectManiaElPos.top + selectManiaElHeight, 
				left: selectManiaElPos.left, 
				width: selectManiaElWidth
			});
			//force item list scroll to its initial state
			$itemList.scrollTop(itemListScroll);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ selectItem

		//perform item selection in dropdown
		selectItem: function($item) {
			//dropdown element
			var $dropdown = $item.closest('.select-mania-dropdown');
			//selectMania element
			var $selectManiaEl = $dropdown.data('selectMania-element');
			//select original element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//if item not already selected
			if(!$item.is('.select-mania-selected')) {
				//clicked item value
				var itemVal = $item.attr('data-value');
				
				//build value element
				var $value = Build.buildValue({
					
					value: itemVal, 
					text: $item.text()
				});
				//if select multiple
				if($selectManiaEl.is('.select-mania-multiple')) {
					//insert value element in selectMania values
					$selectManiaEl.find('.select-mania-values').append($value);
					//add value in original select element
					Engine.addMultipleVal($originalSelect, itemVal);
				}
				//if select not multiple
				else {
					//unselect every other items
					$dropdown.find('.select-mania-item').removeClass('select-mania-selected');
					//insert value element in selectMania values
					$selectManiaEl.find('.select-mania-values .select-mania-value').remove();
					$selectManiaEl.find('.select-mania-values').append($value);
					//change value in original select element
					$originalSelect.val(itemVal);
				}
				//set clicked item as selected
				$item.addClass('select-mania-selected');
				//trigger original select change event
				$originalSelect.trigger('change');
			}
			//if absolute position dropdown
			if($dropdown.is('.select-mania-absolute')) {
				//position absolute dropdown
				Engine.positionDropdown($dropdown);
			}
			//if select not multiple
			if(!$selectManiaEl.is('.select-mania-multiple')) {
				//close dropdown
				Engine.closeDropdown($dropdown);
			}
			//update clear values icon display
			Engine.updateClean($selectManiaEl);
			//rebind selectMania element
			Binds.bind($selectManiaEl);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ focusSearch

		//focus search input in dropdown
		focusSearch: function($dropdown) {
			$dropdown.find('.select-mania-search-input').focus();
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ addMultipleVal

		//add value to multiple original select
		addMultipleVal: function($originalSelect, val) {
			var originalVals = $originalSelect.val();
			if(!(originalVals instanceof Array)) {
				originalVals = [];
			}
			originalVals.push(val);
			$originalSelect.val(originalVals);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ removeMultipleVal

		//remove value from multiple original select
		removeMultipleVal: function($originalSelect, val) {
			var originalVals = $originalSelect.val();
			if(!(originalVals instanceof Array)) {
				originalVals = [];
			}
			originalVals.splice($.inArray(val, originalVals), 1);
			$originalSelect.val(originalVals);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ updateClean

		//display / hide clean values icon according to current values
		updateClean: function($selectManiaEl) {
			//original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//if value is not empty
			if($originalSelect.val() !== null && $originalSelect.val().length > 0) {
				//display clean values icon
				$selectManiaEl.find('.select-mania-clear-icon').show();
			}
			//if empty value
			else {
				//hide clean values icon
				$selectManiaEl.find('.select-mania-clear-icon').hide();
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ doSearch

		//do search in items dropdown
		doSearch: function($selectManiaEl) {
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//search value
			var searchVal = $dropdown.find('.select-mania-search-input').first().val().toLowerCase().trim();
			//if empty search value
			if(searchVal === '') {
				//display all items
				$dropdown.find('.select-mania-group, .select-mania-item').removeClass('select-mania-hidden');
				//stop function
				return;
			}
			//loop through dropdown items
			$dropdown.find('.select-mania-item').each(function() {
				//if item text matches search value
				if($(this).text().toLowerCase().indexOf(searchVal) !== -1) {
					//display item
					$(this).removeClass('select-mania-hidden');
				}
				//if item text don't match search value
				else {
					//hide item
					$(this).addClass('select-mania-hidden');
				}
			});
			//show / hide optgroups if contain results / empty
			$dropdown.find('.select-mania-group').each(function() {
				if($(this).find('.select-mania-item:not(.select-mania-hidden)').length > 0) {
					$(this).removeClass('select-mania-hidden');
				}
				else {
					$(this).addClass('select-mania-hidden');
				}
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ doSearchAjax

		//do ajax search in items dropdown
		doSearchAjax: function($selectManiaEl) {
			var thisEngine = this;
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//search value
			var thisSearch = $dropdown.find('.select-mania-search-input').first().val();
			//pause ajax scroll
			$selectManiaEl.data('selectMania-ajaxReady', false);
			//reset current page number
			$selectManiaEl.data('selectMania-ajaxPage', 1);
			//loading icon
			thisEngine.dropdownLoading($selectManiaEl);
			//call ajax function
			var thisAjaxFunction = $selectManiaEl.data('selectMania-ajaxFunction');
			var thisAjaxData = $selectManiaEl.data('selectMania-ajaxData');
			thisAjaxFunction(thisSearch, 1, thisAjaxData, function(optHTML) {
				//remove loading icon
				thisEngine.dropdownLoading($selectManiaEl, true);
				//replace current items with sent options
				Engine.replaceItems($selectManiaEl, optHTML);
				//rebind select
				Binds.bind($selectManiaEl);
				//reset ajax scroll data
				thisEngine.initAjax($selectManiaEl);
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ addItems / replaceItems

		//add items to dropdown
		addItems: function($selectManiaEl, optionsHTML) {
			var thisEngine = this;
			thisEngine.addOrReplaceItems($selectManiaEl, optionsHTML, false);
		}, 

		//replace dropdown items
		replaceItems: function($selectManiaEl, optionsHTML) {
			var thisEngine = this;
			thisEngine.addOrReplaceItems($selectManiaEl, optionsHTML, true);
		}, 

		//add / replace dropdown items
		addOrReplaceItems: function($selectManiaEl, optionsHTML, replace) {
			var thisEngine = this;
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//items dropdown
			var $itemsContainer = $dropdown.find('.select-mania-items');
			//options jquery parsing
			var $options = $(optionsHTML);
			//get selectMania element values
			var selectedVals = thisEngine.getVal($selectManiaEl);
			//loop through selected values
			selectedVals.forEach(function(val) {
				$options
					//search for options matching selected value
					.filter(function() {
						return $(this).attr('value') === val.value && $(this).text() === val.text;
					})
					//set matching options as selected
					.prop('selected', true);
			});
			//build items list
			$builtItems = Build.buildItemList($options);
			//if items are meant to be replaced
			if(replace === true) {
				//empty old options except selected ones
				$originalSelect.find('option').remove(':not(:checked)');
				//empty items dropdown
				$itemsContainer.empty();
			}
			//add items to selectMania dropdown
			$itemsContainer.append($builtItems);
			//add options to original select element
			$originalSelect.append($options);
			//rebind selectMania element
			Binds.bind($selectManiaEl);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ initAjax

		//reset selectMania element ajax data and attach ajax function
		initAjax: function($selectManiaEl, settings) {
			//if ajax settings are provided to be attached
			if(typeof settings === 'object') {
				//attach ajax function
				if(settings.hasOwnProperty('ajax') && typeof settings.ajax === 'function') {
					$selectManiaEl.data('selectMania-ajaxFunction', settings.ajax);
				}
				//attach ajax data
				if(settings.hasOwnProperty('data') && typeof settings.data === 'object') {
					$selectManiaEl.data('selectMania-ajaxData', settings.data);
				}
			}
			//reset ajax data
			$selectManiaEl.data('selectMania-ajaxPage', 1);
			$selectManiaEl.data('selectMania-ajaxReady', true);
			$selectManiaEl.data('selectMania-ajaxScrollDone', false);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ dropdownLoading

		//display / hide loading icon inside items dropdown
		dropdownLoading: function($selectManiaEl, hide) {
			//if hide icon requested
			var isHide = false;
			if(typeof hide !== 'undefined' && hide === true) {
				isHide = true;
			}
			//dropdown inner list element
			var $dropdownContainer = $selectManiaEl.find('.select-mania-items-container').first();
			//remove loading icon if exists
			$dropdownContainer.find('.icon-loading-container').remove();
			//if show icon requested
			if(isHide !== true) {
				//build loading icon
				var $loadingIcon = $('<div class="icon-loading-container"></div>');
				$loadingIcon.append('<i class="icon-loading"></i>');
				//insert loading icon
				$dropdownContainer.append($loadingIcon);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ getVal

		//get parsed selected values
		getVal: function($selectManiaEl) {
			var valObjs = [];
			//loop though values elements
			$selectManiaEl.find('.select-mania-value').each(function() {
				//selected value text
				var thisText = $(this).find('.select-mania-value-text').first().text();
				//insert selected value object
				valObjs.push({
					 
					value: $(this).attr('data-value'), 
					text: thisText
				});
			});
			//send back parsed selected values
			return valObjs;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ clear

		//clear select values
		clear: function($selectManiaEl) {
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//empty selectMania values
			$selectManiaEl.find('.select-mania-value').remove();
			//unselect items in dropdown
			$dropdown.find('.select-mania-item').removeClass('select-mania-selected');
			//empty values in original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			if($selectManiaEl.is('.select-mania-multiple')) {
				$originalSelect.val([]);
			}
			else {
				$originalSelect.val('');
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ setVal

		//set parsed values as selected values
		setVal: function($selectManiaEl, valObjs) {
			var thisEngine = this;
			//original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//clear select values before setting provided values
			thisEngine.clear($selectManiaEl);
			//if there's more than one value in the values and select is not multiple
			if(valObjs.length > 1 && !$selectManiaEl.is('.select-mania-multiple')) {
				//keep only first value
				valObjs = valObjs.slice(0, 1);
			}
			//loop through values
			valObjs.forEach(function(val) {
				//parse value object
				var valObj = $.extend({
					value: '', 
					text: '', 
					selected: true
				}, val);
				//set value in selectMania element
				thisEngine.setOneValSelectMania($selectManiaEl, valObj);
				//set value in original select
				thisEngine.setOneValOriginal($originalSelect, valObj);
			});
			//update clean values icon display
			thisEngine.updateClean($selectManiaEl);
			//rebind selectMania element
			Binds.bind($selectManiaEl);
		}, 

		//set one value on selectMania element
		setOneValSelectMania: function($selectMania, valObj) {
			//build value element for selectMania element
			var $value = Build.buildValue(valObj);
			//insert built value element in selectMania element
			$selectMania.find('.select-mania-values').append($value);
			//check if corresponding item exists in dropdown
			var $searchItem = $selectMania.find('.select-mania-item[data-value="'+valObj.value+'"]').filter(function() {
				return $(this).text() === valObj.text;
			});
			//if item exists in dropdown
			if($searchItem.length > 0) {
				//set item as selected
				$searchItem.first().addClass('select-mania-selected');
			}
		}, 

		//set one value on original select element
		setOneValOriginal: function($originalSelect, valObj) {
			//check if corresponding option exists in original select
			var $searchOpt = $originalSelect.find('option[value="'+valObj.value+'"]').filter(function() {
				return $(this).text() === valObj.text;
			});
			//if option doesn't exist in original select
			if($searchOpt.length < 1) {
				//build option for original select
				var $option = Build.buildOption(valObj);
				//insert built option in original select
				$originalSelect.append($option);
			}
			//if option already exists in original select
			else {
				//fond option element
				var $foundOption = $searchOpt.first();
				//set option as selected
				$foundOption[0].selected = true;
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ controls

		//control target element
		controlTarget: function($target, controls) {
			//error if element is not a select
			if($.inArray('isSelect', controls) !== -1 && !$target.is('select')) {
				console.error('selectMania | invalid select element');
				console.log($target[0]);
				return false;
			}
			//error if plugin not initialized
			if($.inArray('isInitialized', controls) !== -1 && !$target.hasClass('select-mania-original')) {
				console.error('selectMania | select is not initialized');
				console.log($target[0]);
				return false;
			}
			//error if plugin already initialized
			if($.inArray('notInitialized', controls) !== -1 && $target.hasClass('select-mania-original')) {
				console.error('selectMania | ignore because already initialized');
				console.log($target[0]);
				return false;
			}
			//control method was called on single element
			if($.inArray('isSingle', controls) !== -1 && $target.length > 1) {
				console.error('selectMania | check method can be called on single element only');
				console.log($target[0]);
				return false;
			}
			//if control ok
			return true;
		}, 

		//control selectMania settings
		controlSettings: function($target, settings) {
			//control ajax function type
			if(settings.ajax !== false && typeof settings.ajax !== 'function') {
				settings.ajax = false;
				console.error('selectMania | invalid ajax function');
				console.log($target[0]);
				console.log(settings);
				return false;
			}
			//error if invalid size provided
			if($.inArray(settings.size, ['tiny','small','medium','large']) === -1) {
				settings.size = 'medium';
				console.error('selectMania | invalid size');
				console.log($target[0]);
				console.log(settings);
				return false;
			}
			//error if invalid sroll container provided
			if(settings.scrollContainer !== null && $(settings.scrollContainer).length < 1) {
				settings.scrollContainer = null;
				console.error('selectMania | invalid scroll container');
				console.log($target[0]);
				console.log(settings);
				return false;
			}
			//error if invalid sroll container provided
			if(settings.zIndex !== null && (isNaN(parseInt(settings.zIndex)) || !isFinite(settings.zIndex))) {
				settings.zIndex = null;
				console.error('selectMania | invalid z-index');
				console.log($target[0]);
				console.log(settings);
				return false;
			}
			//if control ok
			return true;
		}, 

		//control selectMania values
		controlValues: function($target, values) {
			//error if values is not an array
			if(!(values instanceof Array)) {
				console.error('selectMania | values parameter is not a valid array');
				console.log($target[0]);
				console.log(values);
				return false;
			}
			//if control ok
			return true;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ navigateItem

		//navigate hover to next or previous item in dropdown
		navigateItem: function($dropdown, nextOrPrevious) {
			//selectMania element
			var $selectManiaEl = $dropdown.closest('.select-mania');
			//item scrollable list
			var $itemList = $dropdown.find('.select-mania-items');
			//active enabled items
			var validItemSelector = '.select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden)';
			if($selectManiaEl.hasClass('select-mania-multiple')) {
				validItemSelector += ':not(.select-mania-selected)';
			}
			var $validItems = $dropdown.find(validItemSelector);
			//current hovered item
			var $hoveredItem = $dropdown.find(validItemSelector+'.select-mania-hover');
			//item to target
			var $targetItem = $();
			//if there is currently a hovered item
			if($hoveredItem.length > 0) {
				//if arrow up get previous item
				if(nextOrPrevious === 'next') {
					$targetItem = $validItems.slice($validItems.index($hoveredItem) + 1).first();
				}
				//if arrow down get next item
				else if(nextOrPrevious === 'previous') {
					$targetItem = $validItems.slice(0, $validItems.index($hoveredItem)).last();
				}
			}
			//no current hovered item
			else {
				//hovers first item
				$targetItem = $validItems.first();
			}
			//if target item exists hover this item
			if($targetItem.length > 0) {
				//remove hover from every item
				$dropdown.find('.select-mania-item').removeClass('select-mania-hover');
				//add hover class to target item
				$targetItem.addClass('select-mania-hover');
				//data for item visibility calculation
				var $targetItemPosition = $targetItem.position();
				var $targetItemHeight = $targetItem.outerHeight(true);
				var $itemListHeight = $itemList.height();
				var $itemListScrollTop = $itemList.scrollTop();
				//if target item not visible in item list (above)
				if($targetItemPosition.top < 0) {
					//scroll to see item
					$itemList.scrollTop($itemListScrollTop + $targetItemPosition.top);
				}
				//if target item not visible in item list (below)
				else if($targetItemPosition.top + $targetItemHeight > $itemListHeight) {
					//scroll to see item
					$itemList.scrollTop($itemListScrollTop + $targetItemPosition.top + $targetItemHeight - $itemListHeight);
				}
			}
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// ---------------------------------------- BUILD ----------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

var Build = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ build

		//build selectMania element
		build: function($originalSelect, settings) {
			var thisBuild = this;
			//class for selectMania size
			var sizeClass = 'select-mania-'+settings.size;
			//explicit selectMania width style
			var widthStyle = 'style="width:'+settings.width+';"';
			//general selectMania div
			var $selectManiaEl = $('<div class="select-mania '+sizeClass+'" '+widthStyle+'></div>');
			//class for multiple
			if(settings.multiple) {
				$selectManiaEl.addClass('select-mania-multiple');
			}
			//class for disabled
			if(settings.disabled) {
				$selectManiaEl.addClass('select-mania-disabled');
			}
			//classes for themes
			if(settings.themes instanceof Array && settings.themes.length > 0) {
				//loop through themes
				settings.themes.forEach(function(theme) {
					//applies theme class
					$selectManiaEl.addClass('select-mania-theme-'+theme);
				});
			}
			//class for activated ajax
			if(settings.ajax !== false) {
				$selectManiaEl.addClass('select-mania-ajax');
			}
			//attribute for scroll container
			if(settings.scrollContainer !== null) {
				$selectManiaEl.attr('data-selectMania-scrollContainer', settings.scrollContainer);
			}
			//build inner elements
			var $innerElements = thisBuild.buildInner(settings);
			//build dropdown
			var $dropdown = thisBuild.buildDropdown($originalSelect, settings);
			//insert elements
			$selectManiaEl.append($innerElements).append($dropdown);
			//attach dropdown to select-mania element
			$selectManiaEl.data('selectMania-dropdown', $dropdown);
			//attach select-mania element to dropdown
			$dropdown.data('selectMania-element', $selectManiaEl);
			//send back selectMania element
			return $selectManiaEl;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildInner

		//build inner elements
		buildInner: function(settings) {
			var thisBuild = this;
			//inner div
			var $inner = $('<div class="select-mania-inner"></div>');
			//values div
			var $values = $('<div class="select-mania-values"></div>');
			//insert placeholder
			var $placeholder = $('<div class="select-mania-placeholder">'+settings.placeholder+'</div>');
			$values.append($placeholder);
			//insert selected values
			settings.values.forEach(function(val) {
				$values.append(thisBuild.buildValue(val));
			});
			$inner.append($values);
			//insert clean values icon
			var $clean = $('<div class="select-mania-clear"></div>');
			if(settings.removable || settings.multiple) {
				$clean.append('<i class="select-mania-clear-icon icon-cross">');
			}
			$inner.append($clean);
			$inner.append('<div class="select-mania-add"><i class="select-mania-add-icon icon-add"></div>');
			//insert dropdown arrow icon
			$inner.append($('<div class="select-mania-arrow"><i class="select-mania-arrow-icon icon-arrow-down"></i></div>'));
			//send back inner elements
			return $inner;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildValue

		//build selected value
		buildValue: function(valObj) {
			//selected value element html
			var valHtml = '<div class="select-mania-value"  data-value="'+valObj.value+'">'+
				'<div class="select-mania-value-text">'+valObj.text+'</div>'+
				'<div class="select-mania-value-clear">'+
					'<i class="select-mania-value-clear-icon icon-cross"></i>'+
				'</div>'+
			'</div>';
			//send back selected value element
			return $(valHtml);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildOption

		//build option for original select
		buildOption: function(valObj) {
			//build option
			var $opt = $('<option value="'+valObj.value+'">'+valObj.text+'</option>');
			//set option selected status
			$opt[0].selected = valObj.selected;
			//send back option element
			return $opt;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildDropdown

		//build items dropdown
		buildDropdown: function($originalSelect, settings) {
			var thisBuild = this;
			//class for sizing
			var sizeClass = 'select-mania-'+settings.size;
			//dropdown element
			var $dropdown = $('<div class="select-mania-dropdown '+sizeClass+'"></div>');
			//classe si select multiple
			if(settings.multiple) {
				$dropdown.addClass('select-mania-multiple');
			}
			//insert search input in dropdown if activated
			if(settings.search) {
				var $dropdownSearch = $('<div class="select-mania-dropdown-search"></div>');
				$dropdownSearch.append('<input class="select-mania-search-input" />');
				$dropdown.append($dropdownSearch);
			}
			//build items container
			var $itemListContainer = $('<div class="select-mania-items-container"></div>');
			var $itemList = $('<div class="select-mania-items"></div>');
			//build and insert items list
			$itemList.append(thisBuild.buildItemList($originalSelect.children()));
			//insert items list into dropdown
			$itemListContainer.append($itemList);
			$dropdown.append($itemListContainer);
			//classes for themes
			if(settings.themes instanceof Array && settings.themes.length > 0) {
				//loop through themes
				settings.themes.forEach(function(theme) {
					//applies theme class
					$dropdown.addClass('select-mania-theme-'+theme);
				});
			}
			//if zIndex setting is set
			if(settings.zIndex !== null) {
				$dropdown.css('z-index', settings.zIndex);
			}
			//send back items dropdown
			return $dropdown;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildItemGroup

		//build items list
		buildItemList: function($optList) {
			var thisBuild = this;
			//empty item list
			var $itemList = $();
			//loop through original select children
			$optList.each(function() {
				//if optgroup
				if($(this).is('optgroup')) {
					//build and insert item group
					$itemList = $itemList.add(thisBuild.buildItemGroup($(this)));
				}
				//if option
				else if($(this).is('option')) {
					//build and insert item
					$itemList = $itemList.add(thisBuild.buildItem($(this)));
				}
			});
			//send back build items list
			return $itemList;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildItemGroup

		//build dropdown items group
		buildItemGroup: function($optgroupEl) {
			var thisBuild = this;
			//build group element
			var $group = $('<div class="select-mania-group"></div>');
			var $groupInner = $('<div class="select-mania-group-inner"></div>');
			//build group title element
			var $groupTitle = $('<div class="select-mania-group-title"></div>');
			//if group icon is set
			if($optgroupEl.is('[data-icon]')) {
				//insert group title icon
				$groupTitle.append('<div class="select-mania-group-icon"><i class="'+$optgroupEl.attr('data-icon')+'"></i></div>');
			}
			//insert group title text
			$groupTitle.append('<div class="select-mania-group-text">'+$optgroupEl.attr('label')+'</div>');
			//insert group title in group element
			$group.append($groupTitle);
			//if group is disabled set class
			var groupIsDisabled = $optgroupEl.is(':disabled');
			if(groupIsDisabled) {
				$group.addClass('select-mania-disabled');
			}
			//build and insert items
			$optgroupEl.find('option').each(function() {
				$groupInner.append(thisBuild.buildItem($(this), groupIsDisabled));
			});
			$group.append($groupInner);
			//send back items group
			return $group;
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ buildItem

		//build dropdown item
		buildItem: function($optionEl, forceDisabled) {
			var optionEl = $optionEl[0];
			
			//build item html
			var $item = $('<div class="select-mania-item" data-value="'+optionEl.value+'"></div>');
			//if option icon is set
			
			if($optionEl.is('[class]')) {
				//insert item icon
				$item.addClass($optionEl.attr('class'));
			}
			
			
			if($optionEl.is('[data-icon]')) {
				//insert item icon
				$item.append('<div class="select-mania-item-icon"><i class="'+$optionEl.attr('data-icon')+'"></i></div>');
			}
			//insert item text
			$item.append('<div class="select-mania-item-text">'+optionEl.text+'</div>');
			//if item is disabled set class
			if($optionEl.is(':disabled') || Tools.def(forceDisabled) === true) {
				$item.addClass('select-mania-disabled');
			}
			//if item is selected add class
			if($optionEl.is(':selected')) {
				$item.addClass('select-mania-selected');
			}
			//send back item
			return $item;
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// ---------------------------------------- BINDS ----------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	var Binds = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ bind

		//bind all selectMania controls
		bind: function($selectManiaEl) {
			var thisBinds = this;
			//original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//if select is not disabled
			if(!$selectManiaEl.is('.select-mania-disabled')) {
				//click outside select
				$(document).off('click.selectMania').on('click.selectMania', thisBinds.documentClick);
				//focus / blur original select element
				$originalSelect.off('focus.selectMania').on('focus.selectMania', thisBinds.focus);
				$originalSelect.off('blur.selectMania').on('blur.selectMania', thisBinds.blur);
				//clear values
				$selectManiaEl.find('.select-mania-clear-icon').off('click.selectMania').on('click.selectMania', thisBinds.clearValues);
				
				// 
				//$selectManiaEl.find('.select-mania-add-icon').off('click.selectMania').on('click.selectMania', thisBinds.add_mania);
				
				
				//clear select multiple individual value
				$selectManiaEl.find('.select-mania-value-clear-icon').off('click.selectMania').on('click.selectMania', thisBinds.clearValue);
				//open / close dropdown
				$selectManiaEl.find('.select-mania-inner').off('click.selectMania').on('click.selectMania', thisBinds.dropdownToggle);
				//item hover in dropdown
				$dropdown.find('.select-mania-item:not(.select-mania-disabled)').off('mouseenter.selectMania').on('mouseenter.selectMania', thisBinds.hoverItem);
				//item selection in dropdown
				$dropdown.find('.select-mania-item:not(.select-mania-disabled)').off('click.selectMania').on('click.selectMania', thisBinds.itemSelection);
				//search input in dropdown
				$dropdown.find('.select-mania-search-input').off('input.selectMania').on('input.selectMania', thisBinds.inputSearch);
				//prevents body scroll when reached dropdown top or bottom
				$dropdown.find('.select-mania-items').off('wheel.selectMania').on('wheel.selectMania', thisBinds.scrollControl);
				//ajax scroll
				if($selectManiaEl.is('.select-mania-ajax')) {
					$dropdown.find('.select-mania-items').off('scroll.selectMania').on('scroll.selectMania', thisBinds.scrollAjax);
				}
			}
			//if select is disabled unbind controls
			else {
				//focus / blur original select element
				$originalSelect.off('focus.selectMania');
				$originalSelect.off('blur.selectMania');
				//clear values
				$selectManiaEl.find('.select-mania-clear-icon').off('click.selectMania');
				//clear select multiple individual value
				$selectManiaEl.find('.select-mania-value-clear-icon').off('click.selectMania');
				//open / close dropdown
				$selectManiaEl.find('.select-mania-inner').off('click.selectMania');
				//item hover in dropdown
				$dropdown.find('.select-mania-item:not(.select-mania-disabled)').off('mouseenter.selectMania');
				//item selection in dropdown
				$dropdown.find('.select-mania-item:not(.select-mania-disabled)').off('click.selectMania');
				//search input in dropdown
				$dropdown.find('.select-mania-search-input').off('input.selectMania');
				//prevents body scroll when reached dropdown top or bottom
				$dropdown.find('.select-mania-items').off('wheel.selectMania');
				//ajax scroll
				$dropdown.find('.select-mania-items').off('scroll.selectMania');
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ dropdownToggle

		//BIND ONLY - open / close dropdown
		dropdownToggle: function(e) {
			e.stopPropagation();
			//select-mania element
			var $selectManiaEl = $(this).closest('.select-mania');
			//dropdown element
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//if dropdown open
			if($dropdown.is('.open')) {
				//close dropdown
				Engine.closeDropdown($dropdown);
			}
			//if dropdown closed
			else {
				//close every open dropdown
				Engine.closeDropdown($('.select-mania-dropdown.open'));
				//open target dropdown
				Engine.openDropdown($dropdown);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ documentClick

		//BIND ONLY - click outside select
		documentClick: function(e) {
			//if click not in open dropdown
			if($(e.target).closest('.select-mania-dropdown').length < 1) {
				//close every open dropdown
				Engine.closeDropdown($('.select-mania-dropdown.open'));
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ clearValues

		//BIND ONLY - clear values
		clearValues: function(e) {
			e.stopPropagation();
			//selectMania element
			var $selectManiaEl = $(this).closest('.select-mania');
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			//clear values
			Engine.clear($selectManiaEl);
			//if absolute position dropdown
			if($dropdown.is('.select-mania-absolute')) {
				//position absolute dropdown
				Engine.positionDropdown($dropdown);
			}
			//trigger original select change event
			$originalSelect.trigger('change');
			//update clear values icon display
			Engine.updateClean($selectManiaEl);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ clearValue
     /*
		add_mania: function(e) {
			e.stopPropagation();
			$('.select-mania').hide();	
			$('.add_sklad_pl').show();
			$('.new_sklad_name').val(1);
		},
	*/	
		//BIND ONLY - clear select multiple individual value
		clearValue: function(e) {
			e.stopPropagation();
			//selectMania element
			var $selectManiaEl = $(this).closest('.select-mania');
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//value to delete
			var $value = $(this).closest('.select-mania-value');
			//unselect item in dropdown
			$dropdown
				.find('.select-mania-item[data-value="'+$value.attr('data-value')+'"]')
				.removeClass('select-mania-selected');
			//remove value from selectMania element
			$value.remove();
			//remove value from original select element
			var $originalSelect = $selectManiaEl.data('selectMania-originalSelect');
			Engine.removeMultipleVal($originalSelect, $value.attr('data-value'));
			//if absolute position dropdown
			if($dropdown.is('.select-mania-absolute')) {
				//position absolute dropdown
				Engine.positionDropdown($dropdown);
			}
			//trigger original select change event
			$originalSelect.trigger('change');
			//update clear values icon display
			Engine.updateClean($selectManiaEl);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ itemSelection

		//BIND ONLY - item selection in dropdown
		itemSelection: function() {
			var $selectedItem = $(this);
			//select item in dropdown
			Engine.selectItem($selectedItem);
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ inputSearch

		//BIND ONLY - dropdown search input
		inputSearch: function() {
			var $input = $(this);
			//selectMania element
			$selectManiaEl = $input.closest('.select-mania-dropdown').data('selectMania-element');
			//timer duration according to select multiple or not
			var thisTime = 200;
			if($selectManiaEl.is('.select-mania-ajax')) {
				thisTime = 400;
			}
			//clear timeout
			clearTimeout($input.data('selectMania-searchTimer'));
			//search input timeout
			$input.data('selectMania-searchTimer', setTimeout(function() {
				//ajax search
				if($selectManiaEl.is('.select-mania-ajax')) {
					Engine.doSearchAjax($selectManiaEl);
				}
				//normal search
				else {
					Engine.doSearch($selectManiaEl);
				}
			}, thisTime));
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ scrollAjax

		//BIND ONLY - dropdown ajax scroll
		scrollAjax: function(e) {
			var $itemList = $(this);
			//dropdown element
			var $dropdown = $itemList.closest('.select-mania-dropdown');
			//selectMania element
			var $selectManiaEl = $dropdown.data('selectMania-element');
			//if ajax scroll is not over
			if($selectManiaEl.data('selectMania-ajaxScrollDone') !== true) {
				//if scroll reached bottom with 12px tolerance
				if($itemList.scrollTop() >= $itemList[0].scrollHeight - $itemList.outerHeight() - 12) {
					//if ajax scroll is ready
					if($selectManiaEl.data('selectMania-ajaxReady') === true) {
						//page number to call
						var thisPage = $selectManiaEl.data('selectMania-ajaxPage') + 1;
						//search value
						var thisSearch = $selectManiaEl.find('.select-mania-search-input').first().val();
						//pause ajax scroll
						$selectManiaEl.data('selectMania-ajaxReady', false);
						//enregistre nouvelle page en cours
						$selectManiaEl.data('selectMania-ajaxPage', thisPage);
						//loading icon
						Engine.dropdownLoading($selectManiaEl);
						//call ajax function
						var thisAjaxFunction = $selectManiaEl.data('selectMania-ajaxFunction');
						var thisAjaxData = $selectManiaEl.data('selectMania-ajaxData');
						thisAjaxFunction(thisSearch, thisPage, thisAjaxData, function(optHTML) {
							//remove loading icon
							Engine.dropdownLoading($selectManiaEl, true);
							//if options returned
							if(optHTML.trim() !== '') {
								//add items to dropdown from sent options
								Engine.addItems($selectManiaEl, optHTML);
								//rebind selectMania element
								Binds.bind($selectManiaEl);
								//set ajax scroll as ready
								$selectManiaEl.data('selectMania-ajaxReady', true);
							}
							//if no options sent back
							else {
								//ajax scroll is over
								$selectManiaEl.data('selectMania-ajaxScrollDone', true);
							}
						});
					}
				}
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ scrollControl

		//BIND ONLY - prevents body scroll when reached dropdown top or bottom
		scrollControl: function(e) {
			var $thisDropdown = $(this);
			if(e.originalEvent.deltaY < 0) {
				return ($thisDropdown.scrollTop() > 0);
			}
			else {
				return($thisDropdown.scrollTop() + $thisDropdown.innerHeight() < $thisDropdown[0].scrollHeight);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ focus / blur

		//BIND ONLY - focus selectMania when original select is focused
		focus: function(e) {
			var $originalSelect = $(this);
			//selectMania element
			var $selectManiaEl = $originalSelect.data('selectMania-element');
			//add focus class to selectMania element
			$selectManiaEl.addClass('select-mania-focused');
			//bind keyboard dropdown opening
			$originalSelect.off('keydown.selectMania').on('keydown.selectMania', Binds.keyboardOpening);
		}, 

		//BIND ONLY - unfocus selectMania when original select is focused
		blur: function(e) {
			var $originalSelect = $(this);
			//selectMania element
			var $selectManiaEl = $originalSelect.data('selectMania-element');
			//remove focus class from selectMania element
			$selectManiaEl.removeClass('select-mania-focused');
			//unbind keyboard dropdown opening
			$originalSelect.off('keydown.selectMania');
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ hoverItem

		//BIND ONLY - hover status on dropdown items
		hoverItem: function(e) {
			var $item = $(this);
			//dropdown
			var $dropdown = $item.closest('.select-mania-dropdown');
			//remove hover from every item
			$dropdown.find('.select-mania-item').removeClass('select-mania-hover');
			//apply hover class
			$item.addClass('select-mania-hover');
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ keyboardOpening / keyboardControl

		//BIND ONLY - keyboard dropdown opening
		keyboardOpening: function(e) {
			var $originalSelect = $(this);
			//selectMania element
			var $selectManiaEl = $originalSelect.data('selectMania-element');
			//dropdown
			var $dropdown = $selectManiaEl.data('selectMania-dropdown');
			//list of key codes triggering opening beside characters (enter, spacebar, arrow keys)
			var openingKeys = [13,32,37,38,39,40];
			//if dropdown is closed and triggering key pressed
			if(!$dropdown.hasClass('open') && $.inArray(e.keyCode, openingKeys) !== -1) {
				e.preventDefault();
				e.stopPropagation();
				//unfocus original select
				$originalSelect.blur();
				//opens dropdown
				Engine.openDropdown($dropdown);
			}
		}, 

		//BIND ONLY - keyboard control within dropdown
		keyboardControl: function(e) {
			//currently open dropdown
			var $dropdown = $('.select-mania-dropdown.open').first();
			//list of control keys (tab, enter, escape, arrow up, arrow down)
			var controlKeys = [9,13,27,38,40];
			//if a selectMania dropdown is open and key pressed is a control key
			if($dropdown.length > 0 && $.inArray(e.keyCode, controlKeys) !== -1) {
				e.preventDefault();
				e.stopPropagation();
				//switch key pressed
				switch(e.keyCode) {
					//enter
					case 13:
						//currently hovered element
						var $hoverItem = $dropdown.find('.select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden).select-mania-hover').first();
						//if hovered element exists
						if($hoverItem.length > 0) {
							//select item in dropdown
							Engine.selectItem($hoverItem);
						}
						break;
					//tab
					case 9:
					//escape
					case 27:
						//close dropdown
						Engine.closeDropdown($dropdown);
						break;
					//arrow up
					case 38:
						//hover previous item in dropdown
						Engine.navigateItem($dropdown, 'previous');
						break;
					//arrow down
					case 40:
						//hover next item in dropdown
						Engine.navigateItem($dropdown, 'next');
						break;
				}
			}
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// ---------------------------------------- TOOLS ----------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	var Tools = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ def

		//force null if var is undefined
		def: function(v) {
			if(typeof v === 'undefined') {
				return null;
			}
			return v;
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// --------------------------------------- METHODS --------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	var Methods = {

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ init

		//initialize selectMania
		init: function(opts) {
			//settings provided by user
			var settings = $.extend(true, {}, Data.defaults, opts);
			//loop through targeted elements
			return this.each(function() {
				//current select to initialize
				var $originalSelect = $(this);
				//controls if element is a select and plugin is not already initialized
				if(Engine.controlTarget($originalSelect, ['isSelect','notInitialized'])) {
					//initialize selectMania on original select
					Engine.initialize($originalSelect, settings);
				}
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ update

		//update selectMania items and values
		update: function() {
			//loop through targeted elements
			return this.each(function() {
				//current select to destroy
				var $originalSelect = $(this);
				//controls if selectMania initialized
				if(Engine.controlTarget($originalSelect, ['isInitialized'])) {
					//update selectMania
					Engine.update($originalSelect);
				}
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ destroy

		//destroy selectMania
		destroy: function() {
			//loop through targeted elements
			return this.each(function() {
				//current select to destroy
				var $originalSelect = $(this);
				//controls if selectMania initialized
				if(Engine.controlTarget($originalSelect, ['isInitialized'])) {
					//destroy selectMania
					Engine.destroy($originalSelect);
				}
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ check

		//check if selectMania initialized
		check: function() {
			//controls method was called on single element
			if(Engine.controlTarget(this, ['isSingle'])) {
				//send back if plugin initialized or not
				return this.hasClass('select-mania-original');
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ get

		//returns parsed selected values
		get: function() {
			//controls if single element and plugin initialized
			if(Engine.controlTarget(this, ['isSingle','isInitialized'])) {
				//selectMania element
				var $selectManiaEl = this.data('selectMania-element');
				//get and return parsed selected values
				return Engine.getVal($selectManiaEl);
			}
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ set

		//set parsed values as selected values
		set: function(values) {
			//controls if single element and plugin initialized
			if(Engine.controlTarget(this, ['isSingle','isInitialized'])) {
				//controls values are valid
				if(Engine.controlValues(this, values)) {
					//selectMania element
					var $selectManiaEl = this.data('selectMania-element');
					//get and return parsed selected values
					Engine.setVal($selectManiaEl, values);
				}
			}					
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ clear

		//clear values
		clear: function() {
			//loop through targeted elements
			return this.each(function() {
				//current select to destroy
				var $originalSelect = $(this);
				//controls if plugin initialized
				if(Engine.controlTarget($originalSelect, ['isInitialized'])) {
					//selectMania element
					var $selectManiaEl = $originalSelect.data('selectMania-element');
					//clear values
					Engine.clear($selectManiaEl);
					//trigger original select change event
					$originalSelect.trigger('change');
					//update clear values icon display
					Engine.updateClean($selectManiaEl);
				}
			});
		}, 

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ setup

		//setup default settings values
		setup: function() {
			//loop through targeted elements
			return this.each(function() {
				//current select to destroy
				var $originalSelect = $(this);
				//controls if plugin initialized
				if(Engine.controlTarget($originalSelect, ['isInitialized'])) {
					//selectMania element
					var $selectManiaEl = $originalSelect.data('selectMania-element');
					//clear values
					Engine.clear($selectManiaEl);
					//trigger original select change event
					$originalSelect.trigger('change');
					//update clear values icon display
					Engine.updateClean($selectManiaEl);
				}
			});
		}

	};

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //
// --------------------------------------- HANDLER ---------------------------------------- //
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ //

	//plugin methods handler
	$.fn.selectMania = function(methodOrOpts) {
		//stop right away if targeted element empty
		if(this.length < 1) { return; }
		//call method
		if(Methods[methodOrOpts]) {
			//remove method name from call arguments
			var slicedArguments = Array.prototype.slice.call(arguments, 1);
			//call targeted mathod with arguments
			return Methods[methodOrOpts].apply(this, slicedArguments);
		}
		//call init
		else if(typeof methodOrOpts === 'object' || !methodOrOpts) {
			//call init with arguments
			return Methods.init.apply(this, arguments);
		}
		//error
		else {
			console.error('selectMania | wrong method called');
			console.log(this);
		}
	};

	//plugin setup handler
	$.extend({
		selectManiaSetup: function(opts) {
			//set default settings values
			Data.setup(opts);
		}
	});

})(jQuery);




(function(a){a.fn.circliful=function(b,d){var c=a.extend({fgcolor:"#556b2f",bgcolor:"#eee",fill:false,width:15,dimension:200,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null},b);return this.each(function(){var w=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border"];var f={};var F="";var n=0;var t=a(this);var A=false;var v,G;t.addClass("circliful");e(t);if(t.data("text")!=undefined){v=t.data("text");if(t.data("icon")!=undefined){F=a("<i></i>").addClass("fa "+a(this).data("icon")).css({color:f.iconcolor,"font-size":f.iconsize})}if(t.data("type")!=undefined){j=a(this).data("type");if(j=="half"){s(t,"circle-text-half",(f.dimension/1.45))}else{s(t,"circle-text",f.dimension)}}else{s(t,"circle-text",f.dimension)}}if(a(this).data("total")!=undefined&&a(this).data("part")!=undefined){var I=a(this).data("total")/100;percent=((a(this).data("part")/I)/100).toFixed(3);n=(a(this).data("part")/I).toFixed(3)}else{if(a(this).data("percent")!=undefined){percent=a(this).data("percent")/100;n=a(this).data("percent")}else{percent=c.percent/100}}if(a(this).data("info")!=undefined){G=a(this).data("info");if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){D(t,0.9)}else{D(t,1.25)}}else{D(t,1.25)}}a(this).width(f.dimension+"px");var i=a("<canvas></canvas>").attr({width:f.dimension,height:f.dimension}).appendTo(a(this)).get(0);var g=i.getContext("2d");var r=i.width/2;var q=i.height/2;var C=f.percent*360;var H=C*(Math.PI/180);var l=i.width/2.5;var B=2.3*Math.PI;var z=0;var E=false;var o=f.animationstep===0?n:0;var p=Math.max(f.animationstep,0);var u=Math.PI*2;var h=Math.PI/2;var j="";var k=true;if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){B=2*Math.PI;z=3.13;u=Math.PI*1;h=Math.PI/0.996}}function s(J,x,y){a("<span></span>").appendTo(J).addClass(x).text(v).prepend(F).css({"line-height":y+"px","font-size":f.fontsize+"px"})}function D(y,x){a("<span></span>").appendTo(y).addClass("circle-info-half").css("line-height",(f.dimension*x)+"px")}function e(x){a.each(w,function(y,J){if(x.data(J)!=undefined){f[J]=x.data(J)}else{f[J]=a(c).attr(J)}if(J=="fill"&&x.data("fill")!=undefined){A=true}})}function m(x){g.clearRect(0,0,i.width,i.height);g.beginPath();g.arc(r,q,l,z,B,false);g.lineWidth=f.width+1;g.strokeStyle=f.bgcolor;g.stroke();if(A){g.fillStyle=f.fill;g.fill()}g.beginPath();g.arc(r,q,l,-(h),((u)*x)-h,false);if(f.border=="outline"){g.lineWidth=f.width+13}else{if(f.border=="inline"){g.lineWidth=f.width-13}}g.strokeStyle=f.fgcolor;g.stroke();if(o<n){o+=p;requestAnimationFrame(function(){m(Math.min(o,n)/100)},t)}if(o==n&&k&&typeof(b)!="undefined"){if(a.isFunction(b.complete)){b.complete();k=false}}}m(o/100)})}}(jQuery));



!function(e){"use strict";function t(e,t){if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",t-e),a.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function a(e){var t=this.value.length;if(e="start"==e.toLowerCase()?"Start":"End",document.selection){var a,i,n,l=document.selection.createRange();return a=l.duplicate(),a.expand("textedit"),a.setEndPoint("EndToEnd",l),i=a.text.length-l.text.length,n=i+l.text.length,"Start"==e?i:n}return"undefined"!=typeof this["selection"+e]&&(t=this["selection"+e]),t}var i={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};e.fn.number=function(n,l,s,r){r="undefined"==typeof r?",":r,s="undefined"==typeof s?".":s,l="undefined"==typeof l?0:l;var u="\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4),h=new RegExp("[^"+u+"0-9]","g"),o=new RegExp(u,"g");return n===!0?this.is("input:text")?this.on({"keydown.format":function(n){var u=e(this),h=u.data("numFormat"),o=n.keyCode?n.keyCode:n.which,c="",v=a.apply(this,["start"]),d=a.apply(this,["end"]),p="",f=!1;if(i.codes.hasOwnProperty(o)&&(o=i.codes[o]),!n.shiftKey&&o>=65&&90>=o?o+=32:!n.shiftKey&&o>=69&&105>=o?o-=48:n.shiftKey&&i.shifts.hasOwnProperty(o)&&(c=i.shifts[o]),""==c&&(c=String.fromCharCode(o)),8!=o&&45!=o&&127!=o&&c!=s&&!c.match(/[0-9]/)){var g=n.keyCode?n.keyCode:n.which;if(46==g||8==g||127==g||9==g||27==g||13==g||(65==g||82==g||80==g||83==g||70==g||72==g||66==g||74==g||84==g||90==g||61==g||173==g||48==g)&&(n.ctrlKey||n.metaKey)===!0||(86==g||67==g||88==g)&&(n.ctrlKey||n.metaKey)===!0||g>=35&&39>=g||g>=112&&123>=g)return;return n.preventDefault(),!1}if(0==v&&d==this.value.length?8==o?(v=d=1,this.value="",h.init=l>0?-1:0,h.c=l>0?-(l+1):0,t.apply(this,[0,0])):c==s?(v=d=1,this.value="0"+s+new Array(l+1).join("0"),h.init=l>0?1:0,h.c=l>0?-(l+1):0):45==o?(v=d=2,this.value="-0"+s+new Array(l+1).join("0"),h.init=l>0?1:0,h.c=l>0?-(l+1):0,t.apply(this,[2,2])):(h.init=l>0?-1:0,h.c=l>0?-l:0):h.c=d-this.value.length,h.isPartialSelection=v==d?!1:!0,l>0&&c==s&&v==this.value.length-l-1)h.c++,h.init=Math.max(0,h.init),n.preventDefault(),f=this.value.length+h.c;else if(45!=o||0==v&&0!=this.value.indexOf("-"))if(c==s)h.init=Math.max(0,h.init),n.preventDefault();else if(l>0&&127==o&&v==this.value.length-l-1)n.preventDefault();else if(l>0&&8==o&&v==this.value.length-l)n.preventDefault(),h.c--,f=this.value.length+h.c;else if(l>0&&127==o&&v>this.value.length-l-1){if(""===this.value)return;"0"!=this.value.slice(v,v+1)&&(p=this.value.slice(0,v)+"0"+this.value.slice(v+1),u.val(p)),n.preventDefault(),f=this.value.length+h.c}else if(l>0&&8==o&&v>this.value.length-l){if(""===this.value)return;"0"!=this.value.slice(v-1,v)&&(p=this.value.slice(0,v-1)+"0"+this.value.slice(v),u.val(p)),n.preventDefault(),h.c--,f=this.value.length+h.c}else 127==o&&this.value.slice(v,v+1)==r?n.preventDefault():8==o&&this.value.slice(v-1,v)==r?(n.preventDefault(),h.c--,f=this.value.length+h.c):l>0&&v==d&&this.value.length>l+1&&v>this.value.length-l-1&&isFinite(+c)&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&1===c.length&&(p=d===this.value.length?this.value.slice(0,v-1):this.value.slice(0,v)+this.value.slice(v+1),this.value=p,f=v);else n.preventDefault();f!==!1&&t.apply(this,[f,f]),u.data("numFormat",h)},"keyup.format":function(i){var n,s=e(this),r=s.data("numFormat"),u=i.keyCode?i.keyCode:i.which,h=a.apply(this,["start"]),o=a.apply(this,["end"]);0!==h||0!==o||189!==u&&109!==u||(s.val("-"+s.val()),h=1,r.c=1-this.value.length,r.init=1,s.data("numFormat",r),n=this.value.length+r.c,t.apply(this,[n,n])),""===this.value||(48>u||u>57)&&(96>u||u>105)&&8!==u&&46!==u&&110!==u||(s.val(s.val()),l>0&&(r.init<1?(h=this.value.length-l-(r.init<0?1:0),r.c=h-this.value.length,r.init=1,s.data("numFormat",r)):h>this.value.length-l&&8!=u&&(r.c++,s.data("numFormat",r))),46!=u||r.isPartialSelection||(r.c++,s.data("numFormat",r)),n=this.value.length+r.c,t.apply(this,[n,n]))},"paste.format":function(t){var a=e(this),i=t.originalEvent,n=null;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):i.clipboardData&&i.clipboardData.getData&&(n=i.clipboardData.getData("text/plain")),a.val(n),t.preventDefault(),!1}}).each(function(){var t=e(this).data("numFormat",{c:-(l+1),decimals:l,thousands_sep:r,dec_point:s,regex_dec_num:h,regex_dec:o,init:this.value.indexOf(".")?!0:!1});""!==this.value&&t.val(t.val())}):this.each(function(){var t=e(this),a=+t.text().replace(h,"").replace(o,".");t.number(isFinite(a)?+a:0,l,s,r)}):this.text(e.number.apply(window,arguments))};var n=null,l=null;e.isPlainObject(e.valHooks.text)?(e.isFunction(e.valHooks.text.get)&&(n=e.valHooks.text.get),e.isFunction(e.valHooks.text.set)&&(l=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(t){var a,i=e(t),l=i.data("numFormat");return l?""===t.value?"":(a=+t.value.replace(l.regex_dec_num,"").replace(l.regex_dec,"."),(0===t.value.indexOf("-")?"-":"")+(isFinite(a)?a:0)):e.isFunction(n)?n(t):void 0},e.valHooks.text.set=function(t,a){var i=e(t),n=i.data("numFormat");if(n){var s=e.number(a,n.decimals,n.dec_point,n.thousands_sep);return e.isFunction(l)?l(t,s):t.value=s}return e.isFunction(l)?l(t,a):void 0},e.number=function(e,t,a,i){i="undefined"==typeof i?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":i,a="undefined"==typeof a?new Number(.1).toLocaleString().charAt(1):a,t=isFinite(+t)?Math.abs(t):0;var n="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),l="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",a).replace(new RegExp(l,"g"),"").replace(new RegExp(n,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var s=isFinite(+e)?+e:0,r="",u=function(e,t){return""+ +(Math.round((""+e).indexOf("e")>0?e:e+"e+"+t)+"e-"+t)};return r=(t?u(s,t):""+Math.round(s)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(a)}}(jQuery);
//# sourceMappingURL=jquery.number.min.js.map
//  index.js
//-------------------------------
// update_block 




var date_graf = function() {
	
	
	if($('#date_hidden_table_gr1').val()>$('#date_hidden_table_gr2').val())
		{
			
			$('#date_hidden_table_gr2').val('');
			$('#date_table_gr2').val('');
			
			
		}
	
	
}


//     
var edit_grafik_click = function() {
	
if ( $(this).is("[for]") )
{
	if($.isNumeric($(this).attr("for")))
	{
		/*
  $.arcticmodal({
    type: 'ajax',
    url: 'forms/form_edit_grafic.php?id='+$(this).attr("for"),
    afterLoading: function(data, el) {
        //alert('afterLoading');
    },
    afterLoadingOnShow: function(data, el) {
        //alert('afterLoadingOnShow');
    },
	afterClose: function(data, el) { //    ArcticModal
	clearInterval(timerId);
    }

  });
*/


		$.arcticmodal({
			type: 'ajax',
			url: 'forms/form_edit_grafic.php?id='+$(this).attr("for"),
			beforeOpen: function (data, el) {
				//     ajax 
				$('.loader_ada_forms').show();
				$('.loader_ada1_forms').addClass('select_ada');
			},
			afterLoading: function (data, el) {
				//    ajax
				data.body.parents('.arcticmodal-container').addClass('yoi');
				$('.loader_ada_forms').hide();
				$('.loader_ada1_forms').removeClass('select_ada');
			},
			beforeClose: function (data, el) { //    ArcticModal
				if (typeof timerId !== "undefined") {
					clearInterval(timerId);
				}
				BodyScrool();
			}

		});






}
	
}
  
return false;

	
	};
$(function () {


    width_auto_input();


    var $input = $('.js-input-width-auto'),
        $buffer = $('.input-buffer');

    $input.on('input', function () {
        $buffer.text($input.val());
        $input.width($buffer.width());
    });

});

function width_auto_input()
{
    $('.js-input-width-auto').each(function(i,elem)
    {
        $(this).after('<div class="input-buffer"></div>');

    });
}
$(function (){

    //    
    //$(".add_invoicess").bind('click', save_invoicess);
    $('body').on("change keyup input click",'.add_invoicess',save_invoicess);

    $('body').on("change keyup input click",'.add_material_invoice',AddInvoiceMaterial);

    $('body').on("change keyup input click",'.js-type-stock-view',view_stock);

    $('body').on("change keyup input click",'.del_invoice_material', dell_invoice_material);
    $('body').on("change keyup input click",'.del_invoice_material_prime', dell_invoice_material_prime);

    $('body').on("change keyup input click",'.js-ispol_type_invoice',nds_invoice);


    $('body').on("change keyup input click",'.price_nds_in_,.price_in_,.count_in_,.count_defect_in_,.del_invoice_akt,.material_defect', itog_invoice);
    $('body').on("change keyup input click",'.checkbox_cost_inv', change_option_invoice);


    $('body').on("change keyup input click",'.material_defect', material_defect);

    $('body').on("change keyup input click",'.del_invoice_akt', material_defect_dell);


    $('body').on("click",'.mild_mild', mild_div);

    $('body').on("click",'.mild_mild_dav', mild_div_dav);

    $('body').on("click",'.mild_mild_tra', mild_tra);

    //    
    $('body').on("change keyup input click",'.add_invoicess1', save_invoicess1);

    $('body').on("change keyup input click",'.price_nds_in_,.price_in_,.count_in_,.slct_box,#date_table,[name=number_invoices],[name=ispol_work],.js-ispol_type_invoice,.upload-but-2022,.upload-but-2021,.js-dell-image,.del_image_invoice,.del_invoice_material,.add_material_invoice,.count_defect_in_,.text_zayva_message_,.material_defect,.del_invoice_akt,.checkbox_cost_inv,.mild_mild,.mild_mild_dav,.mild_mild_nds',function(){  $('.transfer_invoicess').hide(); $('.add_invoicess1').show();   });


    $('body').on("click",'.mild_mild_nds',mild_nds);

});


function mild_nds()
{
    if($(this).parents('.mild-nds').is(".chechers")) {
        $('.mild-nds').removeClass("chechers");
        $('.cost-bottom-js-x').removeClass('yes-nds');
        $('.js-nds-cost-material').val(1);


    } else
    {
        $(this).parents('.mild-nds').addClass("chechers");
        $('.cost-bottom-js-x').addClass('yes-nds');
        $('.js-nds-cost-material').val(0);


    }

    itog_invoice();

}


function mild_div()
{
    if($(this).parents('.mild').is(".chechers")) {
        $(this).parents('.mild').removeClass("chechers");
        $(this).parents('[invoice_material]').find('.mild_inp').val(0);

       var nds=$('.js-ispol_type_invoice').val();
        if(nds!=1) {
         //   $('.cost-bottom-js-x').removeClass('nono-checker');
         //   $('.cost-bottom-js-x').find('.mild-nds').show();
        }

        if(!$('.js-number-invoice-x').is('[readonly]')) {

            $(this).parents('[invoice_material]').find('.price_in_').prop('readonly', false).removeClass('grey_edit');
        }

    } else
    {
        $(this).parents('.mild').addClass("chechers");
        $(this).parents('[invoice_material]').find('.mild_inp').val(1);

      //  $('.cost-bottom-js-x').addClass('nono-checker');
      //  $('.cost-bottom-js-x').find('.mild-nds').hide();


       // $(this).parents('[invoice_material]').find('.price_nds_in_').removeAttr('readonly').removeClass('grey_edit');
       // $(this).parents('[invoice_material]').find('.price_nds_in_').prop('readonly',true).addClass('grey_edit');
       // $(this).parents('[invoice_material]').find('.price_nds_in_').val(0);
        $(this).parents('[invoice_material]').find('.price_in_').val(0);
        $(this).parents('[invoice_material]').find('.price_in_').prop('readonly',true).addClass('grey_edit');


    }
    itog_invoice();


}

function mild_tra()
{
    var id_dom=$('.users_rule').attr('ui');
    //alert(id_dom);


    //            - 
    if($('.transfer_check_val').val()==0)
    {

        $.cookie("material"+id_dom+"_"+id_dom, null, {path:'/',domain: window.is_session,secure: false});
        $('.transfer_check_val').val(1);
    }

    if($(this).parents('.mild_tra').is(".chechers")) {


        var stock_hj=$(this).parents('[invoice_material]').find('.stock_inp').val();
        $('.stock_inp[value='+stock_hj+']').parents('[invoice_material]').find('.mild_mild_tra').each(function(i,elem) {
            $(this).parents('.mild_tra').removeClass("chechers");
            $(this).parents('.transfer_check').removeClass("chechersx");
        });


        //  
        CookieListS("material"+id_dom+"_"+id_dom,$(this).parents('[invoice_material]').find('.stock_inp_mater').val(),'del','sort',',');
    } else
    {
        //$(this).parents('.mild_tra').addClass("chechers");

        var stock_hj=$(this).parents('[invoice_material]').find('.stock_inp').val();
        $('.stock_inp[value='+stock_hj+']').parents('[invoice_material]').find('.mild_mild_tra').each(function(i,elem) {
            $(this).parents('.mild_tra').addClass("chechers");
            $(this).parents('.transfer_check').addClass("chechersx");
        });



        //  
        CookieListS("material"+id_dom+"_"+id_dom,$(this).parents('[invoice_material]').find('.stock_inp_mater').val(),'add','sort',',');
    }

    //        id_stock         



    //    -   

    var cookiex = $.cookie("material"+id_dom+"_"+id_dom);
    //alert(window.b_co);
    if(cookiex!=null)
    {
        var cc = cookiex.split('.');
        var counts = cc.length;
        console.log(counts);
        if (counts != 0) {
            $('.transfer_invoicess_2022').show();
        } else {
            $('.transfer_invoicess_2022').hide();
        }
    } else
    {
        $('.transfer_invoicess_2022').hide();
    }

}


function mild_div_dav()
{
    if($(this).parents('.mild_dav').is(".chechers")) {
        $(this).parents('.mild_dav').removeClass("chechers");
        $(this).parents('[invoice_material]').find('.alien_inp').val(0);
        $(this).parents('[invoice_material]').find('.name_invoice_dava').removeClass("dava");
        $(this).parents('[invoice_material]').find('.chat_kk').remove();

    } else
    {
        $(this).parents('.mild_dav').addClass("chechers");
        $(this).parents('[invoice_material]').find('.alien_inp').val(1);
        $(this).parents('[invoice_material]').find('.name_invoice_dava').addClass("dava");
        $(this).parents('[invoice_material]').find('.name_invoice_dava').after('<div class="chat_kk" data-tooltip=" "></div>');
    }



}


function save_invoicess1()
{
    var error=0;

    $('.save__s').removeClass('error_formi');
    $('.akt_ss').removeClass('redaas_invcoice');

    if($('#ispol').val()==0)
    {
        $('#ispol').prev().prev().addClass('error_formi');
        error=1;
    }
    if($('#date_hidden_table').val()=='')
    {
        $('#date_hidden_table').next('.save__s').addClass('error_formi');
        error=1;
    }
    if($('#number_invoice').val()=='')
    {
        $('#number_invoice').addClass('error_formi');
        error=1;
    }


    $('.messa_invoice:visible').each(function(i,elem) {
        var id=$(this).attr('invoices_messa');


        var count=parseFloat($('[invoice_material='+id+']').find('.count_in_').val());
        var count_akt=parseFloat($('[invoices_messa='+id+']').find('.count_defect_in_').val());
        var comment=$('[invoices_messa='+id+']').find('.text_zayva_message_').val();
        //alert(id);

        if((count_akt=='')||(count_akt>count)||(count_akt==0))
        {
            error=1;
            alert_message('error','  ');
        }

        var akt_photo=$('[invoices_messa='+id+']').find('.photo-akt-invoice .li-image').length;

        if(akt_photo==0)
        {
            error=1;
            alert_message('error','    ');
        }

        if((comment==''))
        {
            error=1;
            alert_message('error','   ');
        }




    });


    if(error==1)
    {
/*
        $('.error_text_add').empty().append('     ').show();
        setTimeout ( function () { $('.error_text_add').hide(); }, 7000 );
*/
        alert_message('error','   ');
    } else
    {
        $('#lalala_add_form').submit();
    }



}

//   
function material_defect_dell()
{
    var attr=$(this).attr('id_rel');
    $('[invoice_material='+attr+']').find('.defect_inp').val('0');
    $('[invoice_material='+attr+']').next().hide();
    $('[invoices_messa='+attr+']').find('.count_defect_in_').val('');
    $('[invoices_messa='+attr+']').find('.text_zayva_message_').val('');
}


// -    
function material_defect()
{
    var attr=$(this).attr('id_rel');
    var defect=$('[invoice_material='+attr+']').find('.defect_inp').val();

    if(defect==0)
    {
        $('[invoice_material='+attr+']').find('.defect_inp').val('1');
        $('[invoice_material='+attr+']').next().show();
    } else
    {
        $('[invoice_material='+attr+']').find('.defect_inp').val('0');
        $('[invoice_material='+attr+']').next().hide();
        $('[invoices_messa='+attr+']').find('.count_defect_in_').val('');
        $('[invoices_messa='+attr+']').find('.text_zayva_message_').val('');
    }
}

function change_option_invoice()
{
    var nds_x=$('[name=nds_ff]').val();
    $('.price_in_,.price_nds_in_').val(0);

    var nds=$('.js-ispol_type_invoice').val();
    var nds_budet=0;
    if(nds==0)
    {
        nds_budet=1;
    }
    $('.js-ispol_type_invoice').prev('ul').find('a[rel='+nds_budet+']').trigger('click');



    if(nds_x==0)
    {
        $('[name=nds_ff]').val('1');
        $('.yes_nds').parents('th').removeClass('active_n_ac');
        $('.no_nds').parents('th').addClass('active_n_ac');
    } else
    {
        $('[name=nds_ff]').val('0');
        $('.no_nds').parents('th').removeClass('active_n_ac');
        $('.yes_nds').parents('th').addClass('active_n_ac');
    }
    nds_invoice();
}

function cost_mild()
{
    //           
    $('[invoice_material]').each(function(i,elem) {
 var mild =$(this).find('.mild_inp').val();
if(mild==1)
{
    $(this).find('.price_nds_in_').prop('readonly',true).addClass('grey_edit');
    $(this).find('.price_nds_in_').val(0);
    $(this).find('.price_in_').val(0);
    $(this).find('.price_in_').prop('readonly',true).addClass('grey_edit');
}

    });


}


function nds_invoice()
{
    var nds=$('.js-ispol_type_invoice').val();
    var nds_material=$('.js-nds-cost-material').val();

    if($('.js-number-invoice-x').is('[readonly]'))
    {
        $('.price_in_,.price_nds_in_').attr('readonly','true').addClass('grey_edit');
    }
    $('[name=nds_ff]').val(nds);


    if(nds_material==0)
    {
        //    
        $('.mild-nds').addClass("chechers");
        $('.mild-nds').parents('.cost-bottom-js-x').addClass('yes-nds');
    }



    if(nds==1)
    {
        // 
        //->     
        //$('.price_nds_in_').prop('readonly',true).addClass('grey_edit');
        //$('.cosy_title').empty().append('');
        $('.cost-bottom-js-x').find('.mild-nds').hide();
        $('.cost-bottom-js-x').addClass('nono-checker');

        //$('.price_in_').prev('label').empty().append('');
        //$('.price_nds_in_').val(0);
        //$('.title_itog_invoice').empty().append(' ');

        //$('.checkbox_cost_inv').hide();

    } else
    {

        //if(!$('.mild').is(".chechers")) {
            // 
            $('.cost-bottom-js-x').find('.mild-nds').show();
            $('.cost-bottom-js-x').removeClass('nono-checker');
        //}

/*
        $('.checkbox_cost_inv').show();
        $('.cosy_title').empty().append('  <div class="checkbox_cost_inv no_nds"><i></i></div>');

        if($('.yes_nds').length==0)
        {
            $('.checkbox_cost_inv').remove();
        }

        $('.price_in_').prev('label').empty().append('  ');

        var nds_x=$('[name=nds_ff]').val();
        var mojno= $('.js-number-invoice-x').is('.grey_edit');
        if(!$('.js-number-invoice-x').is('.grey_edit'))
        {

            if((nds_x==0))
            {

                $('.price_nds_in_').removeAttr('readonly').removeClass('grey_edit');
                $('.price_in_').val(0);
                $('.price_in_').prop('readonly',true).addClass('grey_edit');
            } else
            {
                $('.price_in_').removeAttr('readonly').removeClass('grey_edit');
                $('.price_nds_in_').val(0);
                $('.price_nds_in_').prop('readonly',true).addClass('grey_edit');
            }
        }
        $('.title_itog_invoice').empty().append('   ');


        var nds_x=$('[name=nds_ff]').val();
        $('.yes_nds,.no_nds').parents('th').removeClass('active_n_ac');
        if(nds_x==0)
        {
            $('.yes_nds').parents('th').addClass('active_n_ac');
        } else
        {
            $('.no_nds').parents('th').addClass('active_n_ac');
        }
*/
    }




    //  
    itog_invoice();
    //cosy_title
}

//  
function itog_invoice()
{
    //alert("!");
    var nds=$('.js-ispol_type_invoice').val();  //    
    var nds_material=$('.js-nds-cost-material').val(); //  

    //alert(nds);
    var xvg=$('[invoice_material]');
    var summ_xvg=0;
    var summ_defect=0;
    xvg.each(function(i,elem) {


        var count= parseFloat($(this).find('.count_in_').val());
        var price= parseFloat($(this).find('.price_in_').val());
      //  var price_nds= parseFloat($(this).find('.price_nds_in_').val());
        var defect_in=parseFloat($(this).find('.defect_inp').val());
/*
        if(nds==0)
        {
            //   

            //         

            var nds_x=$('[name=nds_ff]').val();


            //alert(price_nds);
            if((price_nds!=0)&&(price_nds!='')&&($.isNumeric(price_nds))&&(nds_x==0))
            {
                var value=(count*price_nds).toFixed(2);
                $(this).find('.price_in_').val(((price_nds*100)/118).toFixed(2));
                if(price_nds==0)
                {
                    //$(this).val(0);
                }


                if(defect_in!=0)
                {
                    var count_defff=$(this).next().find('.count_defect_in_').val();
                    if(($.isNumeric(count_defff))&&(count_defff!=''))
                    {
                        summ_defect=(summ_defect+(count_defff*price_nds));
                    }
                }

            } else
            {
                //        +18% 
                if((nds_x==1)&&($.isNumeric(price))&&(price!=''))
                {
                    var value=(count*(price*1.18)).toFixed(2);
                    $(this).find('.price_nds_in_').val((price*1.18).toFixed(2));
                }


                if(defect_in!=0)
                {
                    var count_defff=$(this).next().find('.count_defect_in_').val();
                    if(($.isNumeric(count_defff))&&(count_defff!=''))
                    {
                        summ_defect=(summ_defect+(count_defff*(price*1.18)));
                    }
                }


            }
        } else
        {*/
            // 

            //    
            var value=(count*price).toFixed(2);

            if(defect_in!=0)
            {
                var count_defff=$(this).next().find('.count_defect_in_').val();
                if(($.isNumeric(count_defff))&&(count_defff!=''))
                {
                    summ_defect=(summ_defect+(count_defff*price));
                }
            }

       // }


        if((value!=0)&&(value!='')&&($.isNumeric(value)))
        {
            $(this).find('.summa_ii').empty().append(value);
            summ_xvg=(parseFloat(summ_xvg)+parseFloat(value)).toFixed(2);
        } else
        {
            $(this).find('.summa_ii').empty().append('0');
        }


    });


    //  
    if((summ_defect!=0)&&(summ_defect!='')&&($.isNumeric(summ_defect)))
    {
        $('.itogss_defect').show();
        $('.itog_invoice_defect').empty().append(summ_defect.toFixed(2));

    } else
    {
        $('.itogss_defect').hide();
        $('.itog_invoice_defect').empty().append('0');
    }




    $('.js-itog-all-text').empty().append(summ_xvg);


    $('.js-itog-nds-all').hide();
    $('.js-itog-vnds-all').hide();
    $('.js-itog-snds-all').hide();

    if(summ_xvg!=0)
    {
        if(nds==1)
        {
            //   

        } else
        {
            //   
            if(nds_material==1)
            {
                //       
                var summ_xvg_nds=(summ_xvg*0.2).toFixed(2);
                $('.js-itog-nds-text').empty().append(summ_xvg_nds);
                $('.js-itog-nds-all').show();

                var all_ssd=(parseFloat(summ_xvg_nds)+parseFloat(summ_xvg)).toFixed(2);
                $('.js-itog-snds-text').empty().append(all_ssd);
                $('.js-itog-snds-all').show();

            } else
            {
                //       
                var summ_xvg_nds=((summ_xvg*0.2)/1.2).toFixed(2);

                $('.js-itog-vnds-text').empty().append(summ_xvg_nds);
                $('.js-itog-vnds-all').show();
            }


        }


    }


/*
    if((summ_xvg!=0)&&(nds==0))
    {
        var summ_xvg_nds=(summ_xvg/1.18*0.18).toFixed(2);
        $('.itog_invoice_nds').empty().append(summ_xvg_nds);
        $('.itogss_nds').show();
    } else
    {
        $('.itog_invoice_nds').empty();
        $('.itogss_nds').hide();
    }
*/



}


function dell_invoice_material_prime()
{
    var attr=$(this).attr('id_rel');


    var id_dom=$('[name=dom]').val();

    CookieList(window.b_cm+"_"+id_dom,attr,'del','sort');
alert(window.b_cm+"_"+id_dom);

    $('[invoice_material='+attr+']').remove();
    $('[invoices_messa='+attr+']').next().remove();
    $('[invoices_messa='+attr+']').remove();


    itog_invoice();

}

function dell_invoice_material()
{
    var attr=$(this).attr('id_rel');
    $('[invoice_material='+attr+']').hide();
    $('[invoices_messa='+attr+']').hide();

    var data ='url='+window.location.href+'&id='+attr;
    AjaxClient('invoices','dell_material','GET',data,'AfterDellMaterialInvoice',attr,0);

}

function view_stock()
{
//alert("!");
    var t_soft=$('.js-type-stock-view1').val();
    if(t_soft==1)
    {
        $('.js-options-invoice-1').slideDown("slow"); //
        $('.js-options-invoice-0').slideUp("slow"); //
        $('.no_bill_material').hide();
        $('.search_bill').hide();

    } else
    {
        $('.js-options-invoice-0').slideDown("slow");
        $('.js-options-invoice-1').slideUp("slow");
    }
}

//   
function AddInvoiceMaterial()
{
    if ( $(this).is("[for]") )
    {
        if($.isNumeric($(this).attr("for")))
        {
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_add_material_invoice_2021.php?id='+$(this).attr("for")+'&col='+$(this).attr("col"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }
    }

    return false;
}

//   
function save_invoicess()
{
    //alert("!");
    var err = 0;
    $('.js-save-form-invoices').find('.gloab').each(function(i,elem) {
        if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            err++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });

    var new_firm_fns=$('.js-save-form-invoices').find('.js-type-soft-view1').val();
    if(new_firm_fns==0)
    {
        $('.js-save-form-invoices').find('.gloab2').each(function(i,elem) {
            if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
                $(this).parents('.list_2021').addClass('required_in_2021');
                err++;
                //alert($(this).attr('name'));
            } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
        });
    } else
    {
        $('.js-save-form-invoices').find('.gloab1').each(function(i,elem) {
            if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
                $(this).parents('.list_2021').addClass('required_in_2021');
                err++;
                //alert($(this).attr('name'));
            } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
        });
    }

    if(err==0) {

        $('.js-save-form-invoices').submit();

    } else
    {
        alert_message('error','   ');
    }



}
$(function () {
    $('body').on("change keyup input click",'.js-status-1c-mat',StatusMC);

   // $('body').on("change keyup input click",'.mild-1c',ClickPosa);
   // $('body').on("change keyup input click",'.mild-1c',CheckboxGroup);
   $('body').on("change keyup input click",'.js-matic-ko',mild_matic);

    $('body').on("change keyup input click",'.js-acc-ko',acc_matic);

    $('body').on("change keyup input click",'.js-1c-matic',view_matic);

    $('body').on("change keyup input click",'.js-rout-unit',rout_matic);


    $('body').on("change keyup input click",'.js-load-click-1c',acc_1c_matic);


    $('body').on("change keyup input click",'.js-i-remove-meta',remove_meta);

    $('body').on("change keyup input click",'.js-add_invoicess112',add_meta_mm);


});

function add_meta_mm()
{
    $('#lalala_add_form').submit();
}


function remove_meta()
{
    var box = $('.box-modal:last');

    $(this).parents('.meta_units_1c').remove();
    box.find('.js-form2').attr('cor','');
}


function load_basket_1c(keyy)
{
    var box = $('.box-modal:last');

    var line_mati=$('.material-1c[id_key='+keyy+']');


var odni=0;


    if(line_mati.find('[name="mat[cor_unit][]"]').val()!='') {
        var sso='';
        var mass_sso=line_mati.find('[name="mat[cor_unit][]"]').val().split(";");
        var sso='1 '+mass_sso[0]+' = '+mass_sso[2]+' '+mass_sso[1];
        //      
        box.find('.vsego-1c-zero i').empty().append(sso);

    } else
    {
        box.find('.vsego-1c-zero').hide();
        odni=1;
    }

    var count_mm=parseFloat($.trim(line_mati.find('.js-col-1c').text()));
    var all_mm=count_mm;
    count_mm=$.number(count_mm.toFixed(3), 3, '.', ' ');
    count_mm = count_mm.replace(/(\d+)([.,]0+)/, "$1");
    box.find('.vsego-1c-one i').empty().append(count_mm);
    box.find('.vsego-1c-one span').empty().append(' '+line_mati.find('.js-ed-1c').text());

    if(odni==1)
    {
        box.find('.vsego-1c-two i').empty().append(count_mm);
        box.find('.vsego-1c-two').attr('all',all_mm);

        box.find('.vsego-1c-two span').empty().append(' '+line_mati.find('.js-ed-1c').text());
    } else
    {
        //       
        if(mass_sso[0].toLowerCase()==line_mati.find('.js-ed-1c').text().toLowerCase())
        {
            var count_type=(parseFloat($.trim(mass_sso[2]))*count_mm);
            var all_mm=count_type;
            count_type=$.number(count_type.toFixed(3), 3, '.', ' ');
            count_type = count_type.replace(/[,.]?0+$/, '');
            box.find('.vsego-1c-two i').empty().append(count_type);
            box.find('.vsego-1c-two').attr('all',all_mm);
            box.find('.vsego-1c-two span').empty().append(' '+mass_sso[1]);
        } else
        {

            var count_type=(count_mm/parseFloat($.trim(mass_sso[2])));
            //console.log(count_type);
            var all_mm=count_type;
            count_type=$.number(count_type.toFixed(4), 4, '.', ' ');
            //console.log(count_type);
            count_type = count_type.replace(/[,.]?0+$/, '');
            //console.log(count_type);
            box.find('.vsego-1c-two i').empty().append(count_type);
            box.find('.vsego-1c-two').attr('all',all_mm);
            box.find('.vsego-1c-two span').empty().append(' '+mass_sso[0]);

        }


    }



    //       
    //    
    var uop=line_mati.find('[name="mat[acc][]"]').val();

    if(uop!='') {

        var cor_mass = uop.split(',');

        for (var t = 0; t < cor_mass.length; t++) {
            //console.log()
            $('.material-1c-vibor[id_key='+cor_mass[t]+']').find('.js-acc-ko').trigger('click');
        }
    }
}


function animation_teps_1c()
{
    $('.teps_1c').each(function(i,elem) {
        $(this).animate({width: $(this).attr('rel_w')+"%"}, 1000, function() {  });
    });
}

function acc_1c_matic()
{
    var id_stock=$(this).parents('.material-1c').find('[name="mat[id_stock][]"]').val();
    var cont=$('.ca-1c').val();
    var keyy=$(this).parents('.material-1c').attr('id_key');

    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_acc_invoice_1c.php?id_stock='+id_stock+'&cont='+cont+'&key='+keyy,
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });


}


function rout_matic()
{
    var box = $('.box-modal:last');
    var label=box.find('.search_bill_ed_34 label i');
var poll=label.first().text();
    label.first().empty().append(label.last().text());
    label.last().empty().append(poll);
}


//  
//  |
// \/
function js_edit_matic_mat_stock()
{

    var box = $('.box-modal:last');
    var box_active = $(this).closest('.box-modal');
    var err = 0;

var id_stock=0;
var new_stock=0;
var unit_stock='';
var usd=[];
    usd['new']=0;
    box_active.find('.js-edit-matic-block-x').hide().after('<div class="b_loading_small" style="position:relative; width: 40px;padding-top: 17px;top: auto;right: auto;left: auto; display: inline-block;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');


    if(box_active.find('.matic-op').val()==1)
    {

        //.      
        new_stock=1;
        usd['new']=1;
    } else
    {
        //  id_stock      
        box_active.find('.js-matic-ko').each(function(i,elem) {

            if($(this).find('input').last().val()==1)
            {

                id_stock=$(this).find('input').first().val();
                unit_stock=$(this).find('input').eq(1).val();
                usd['id_stock']=id_stock;
                usd['units']=unit_stock;
                usd['name']=$(this).parents('.material-1c-vibor').find('.nm').text();
                usd['cor']=box_active.find('.js-form-save-1c').attr('cor');

                return false;

            }

        });

        if(new_stock==0)
        {
            //    
            if(box_active.find('.js-hidden-search').val()!='')
            {
                id_stock=box_active.find('.js-hidden-search').val();
                unit_stock=box_active.find('.js-hidden-unit').val();
                usd['id_stock']=id_stock;
                usd['units']=unit_stock;
                usd['cor']=box_active.find('.js-form-save-1c').attr('cor');

                usd['name']=box_active.find('.js-hidden-name-m').val();
            }
        }
    }
    if((new_stock==0)&&(id_stock==0))
    {
        alert_message('error','     ');
        box.find('.js-edit-matic-block-x').show();
        box.find('.b_loading_small').remove();

    } else
    {
        //             
        if(new_stock==0)
        {

            unit_stock=unit_stock.toLowerCase();
            unit_invoice=$('.unit-opa').text().toLowerCase();

            var corr=box_active.find('.js-form-save-1c').attr('cor');

            if((unit_stock==unit_invoice)||(corr!=''))
            {
                //       
                alert_message('ok','');
                usd['cor']=box_active.find('.js-form-save-1c').attr('cor');
                saveStock1c($(this),usd);

                clearInterval(timerId);
                box.find('.arcticmodal-close').click();


            } else
            {
                box.find('.js-edit-matic-block-x').show();
                box.find('.b_loading_small').remove();


                var unit1 = unit_stock;
                var unit2=unit_invoice;
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_units_invoice.php?u='+unit1+'&u1='+unit2,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });


            }



        } else
        {

            //       
            alert_message('ok','');
            saveStock1c($(this),usd);

            clearInterval(timerId);
            box.find('.arcticmodal-close').click();


        }



    }


}


function js_edit_matic_mat_stock_acc()
{

    var box = $('.box-modal:last');
    var box_active = $(this).closest('.box-modal');
    var err = 0;

    var acc=box_active.find('.js-form2').attr('acc');
    var id_key=box_active.find('.js-form2').attr('keyss');
    //if(acc!='')
   // {

        box_active.find('.js-edit-matic-block-xxx').hide().after('<div class="b_loading_small" style="position:relative; width: 40px;padding-top: 17px;top: auto;right: auto;left: auto; display: inline-block;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');

        alert_message('ok','');
        clearInterval(timerId);
        box.find('.arcticmodal-close').click();

        $('.material-1c[id_key='+id_key+']').find('[name="mat[acc][]"]').val(acc);

        if(acc!='') {

            $('.material-1c[id_key=' + id_key + ']').find('.js-load-click-1c').addClass('green_1c');
        } else
        {
            $('.material-1c[id_key=' + id_key + ']').find('.js-load-click-1c').removeClass('green_1c');
        }
/*
    } else
    {
        alert_message('error','    ');
        box.find('.js-edit-matic-block-xxx').show();
        box.find('.b_loading_small').remove();
    }
*/





}

function js_edit_matic_mat_stock_ed()
{

    var box = $('.box-modal:last');
    var box_active = $(this).closest('.box-modal');
    var error = 0;



    box.find('.gloab').each(function(i,elem) {
        if($(this).val() == '')  { $(this).parents('.input_2018').addClass('required_in_2018');
            $(this).parents('.list_2018').addClass('required_in_2018');
            error++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2018').removeClass('required_in_2018');$(this).parents('.list_2018').removeClass('required_in_2018');}
    });


    if(error!=0)
    {

        alert_message('error','   ');

    } else
    {
        var label=box.find('.search_bill_ed_34 label i');
        var cor_new='';

        box.find('.input_2021').each(function(i,elem) {
if(cor_new=='')
{
    cor_new=''+$(this).find('label i').text();
} else
{
    cor_new=cor_new+';'+$(this).find('label i').text()+';'+$(this).find('input').val().replace(/\s+/g, '');
}

        });
        //alert(cor_new);


        clearInterval(timerId);
        box.find('.arcticmodal-close').click();
        var box = $('.box-modal:last');

        box.find('.js-form-save-1c').attr('cor',cor_new);
        box.find('.js-edit-matic-block-x').trigger('click');

        // 
        //      
    }

}

//         
function LoadSave1c(keyy)
{
    //alert(keyy);
    var box_active = $('.box-modal:last');
    var line_mati=$('.material-1c[id_key='+keyy+']');
    var dal=0;
    if(line_mati.find('[name="mat[edit][]"]').val()==1)
    {
        //   
        // 

        if($('.js-matic-ko').length!=0)
        {
            // -   
            $('.js-matic-ko').find('input[name="pro[type][]"]').val()
            box_active.find('.js-matic-ko').each(function(i,elem) {

                if($(this).find('input[name="pro[type][]"]').val()==line_mati.find('[name="mat[id_stock][]"]').val())
                {

                    $(this).trigger('click');
                    dal=1;

if(line_mati.find('[name="mat[cor_unit][]"]').val()!='') {
    var sso='';
    var mass_sso=line_mati.find('[name="mat[cor_unit][]"]').val().split(";");
    var sso='1 '+mass_sso[0]+' = '+mass_sso[2]+' '+mass_sso[1];
    //      
    $(this).parents('.material-1c-vibor').find('.nm').after('<span class="meta_units_1c">' + sso + '<i class="js-i-remove-meta closa-meta"></i></span>');


    box_active.find('.js-form-save-1c').attr('cor',line_mati.find('[name="mat[cor_unit][]"]').val());
}

                    return false;
                }

            });

        }
        if(dal==0)
        {
            if(line_mati.find('[name="mat[new][]"]').val()==1)
            {
                //  
                box_active.find('.js-1c-matic[id=1]').trigger('click');
            } else
            {
                // -      
                box_active.find('.js-1c-matic[id=0]').trigger('click');
                box_active.find('.js-mat-inv-posta10').val(line_mati.find('[name="mat[id_stock][]"]').val());
                box_active.find('.js-hidden-unit').val(line_mati.find('[name="mat[unit][]"]').val());
                box_active.find('.js-hidden-name-m').val(line_mati.find('.stock_name_mat').text());

                box_active.find('.js-keyup-search').val(line_mati.find('.stock_name_mat').text());
                //       
                if(line_mati.find('[name="mat[cor_unit][]"]').val()!=0)
                {

                }


            }
        }

    }
}


function saveStock1c(thiss,usd)
{
    var keyss=$('.js-form-save-1c').attr('keyss');
    var line_mat_c=$('.material-1c[id_key='+keyss+']');

    line_mat_c.find('[name="mat[edit][]"]').val(1);
    line_mat_c.find('[name="mat[new][]"]').val(usd["new"]);
    line_mat_c.find('[name="mat[id_stock][]"]').val(usd["id_stock"]);
    line_mat_c.find('[name="mat[unit][]"]').val(usd["units"]);
    line_mat_c.find('[name="mat[cor_unit][]"]').val(usd["cor"]);

    //      0
    //line_mat_c.find('[name="mat[cor_unit]"]').val(0);
if(usd["new"]==1)
{
    line_mat_c.find('.js-status-1c-mat').after('<span id_status="' + keyss + '" data-tooltip="   " class="stock_name_mat js-status-1c-mat">   </span>').remove();
} else {
    line_mat_c.find('.js-status-1c-mat').after('<span id_status="' + keyss + '" data-tooltip="   " class="stock_name_mat js-status-1c-mat">' + usd["name"] + '</span>').remove();
}

  //   
    SearchBill1c( keyss,usd);

    ToolTip();
}

function SearchBill1c( keyss,usd)
{
    var id_file=$('.id-file').val();
    $('.material-1c[id_key='+keyss+']').find('.js-load-click-1c').hide();

    var data = 'url=' + window.location.href + '&id_stock=' + usd["id_stock"] +
        '&file=' + id_file+'&key='+ keyss;
    //alert(data);
    AjaxClient('invoices','search_bill_1c','GET',data,'AfterSearchBill1c',keyss,0,1);


}


//   
function AfterSearchBill1c(data,update) {

    if (data.status == 'reg') {
        WindowLogin();
    }

    if (data.status == 'ok') {

        $('.material-1c[id_key='+update+']').find('.js-load-click-1c').show();

    }
    if (data.status == 'no') {

        $('.material-1c[id_key='+update+']').find('.js-load-click-1c').hide();

    }
}

function acc_matic() {

    if(!$(this).is('.no_active_check')) {
        var per_acc = '';

        var box_active = $('.box-modal:last');
        var cor_acc = box_active.find('.js-form2').attr('acc');

        var all_mat = box_active.find('.vsego-1c-two').attr('all');
        var ost_mat = parseFloat(all_mat);

        if (cor_acc != '') {
            var cor_mass = cor_acc.split(',');
        } else {
            var cor_mass = [];
        }


        if ($('.js-acc-ko').length != 0) {
            // -   


            var active = $(this).find('input').last().val();
            var id_active = $(this).find('input').first().val();

            //  
            if (active == 0) {

                i = cor_mass.indexOf(id_active);
                if (i >= 0) {
                    cor_mass.splice(i, 1);

                    //   chekc    
                    box_active.find('.js-acc-ko').removeClass('no_active_check');


                }

            } else {
                cor_mass.push(id_active);

            }
            //  console.log(cor_mass);

            var new_cor_acc = cor_mass.join(',');

            box_active.find('.js-form2').attr('acc', new_cor_acc);

//alert(new_cor_acc);

            //  console.log(new_cor_acc);

            /*
            box_active.find('.js-acc-ko').each(function (i, elem) {

                var count_this = $(this).find('input').eq(1).val();

            });
*/
            //     
            //box_active.find('.teps_1c').attr('rel_w', box_active.find('.teps_1c').attr('rel_all'));

            box_active.find('.teps_1c').each(function (i, elem) {

               $(this).attr('rel_w', $(this).attr('rel_all'));

            });


            //         

            for (var t = 0; t < cor_mass.length; t++) {

                var line_mi = $('.material-1c-vibor[id_key="' + cor_mass[t] + '"]');
                var count = parseFloat(line_mi.find('.js-acc-ko input').eq(1).val());
                console.log('  -'+count);
                if (count <= ost_mat) {
                    line_mi.find('.teps_1c').attr('rel_w', '100');
                } else {
                    //        
                    //    
                    var ty1 = parseFloat(line_mi.find('.teps_1c').attr('all_acc'));
                    var ty2 = parseFloat(line_mi.find('.teps_1c').attr('all_inv'));
                    var teper = ty2 + ost_mat;

                    var new_pr = teper * 100 / ty1;
//console.log('teper='+teper);
                   // console.log(new_pr);
                    line_mi.find('.teps_1c').attr('rel_w', Math.floor(new_pr));

                }
                ost_mat = ost_mat - count;
            }
            //console.log('ost_mat'+ost_mat);

            if (ost_mat < 0) {
                ost_mat = 0;
            }

            //   
            box_active.find('.vsego-1c-two i').empty().append(ost_mat);

            if (ost_mat == 0) {
                //           
                //.no_active_check
                box_active.find('.material-1c-vibor').each(function (i, elem) {

                    //  
                    i = cor_mass.indexOf($(this).attr('id_key'));
                    if (i >= 0) {} else
                    {
                        $(this).find('.js-acc-ko').addClass('no_active_check');
                    }


                });


            }


        }
        //  
        // trep
        // 
        //     
        animation_teps_1c();
    }
}

function mild_matic()
{

    //    
    var active_mm=$('.js-matic-cc').find('.active_task_cb').parents('.js-1c-matic');

//alert(active_mm.length);
    active_mm.find('i').removeClass("active_task_cb");
    active_mm.find('input').last().val('');
$('.matic-op').val('');

    var box = $('.box-modal:last');

    box.find('.js-form-save-1c').attr('cor','');
box.find('.meta_units_1c').remove();

}


function view_matic()
{
//alert("!");
    var t_soft=$('.js-type-stock-prime1').val();

    //    
    var act_matic=$('.js-group-c').find('.active_task_cb').parents('.js-checkbox-group');
    //alert(act_matic.length);
    if(act_matic.length!=0) {

        act_matic.find('i').removeClass("active_task_cb");
        act_matic.find('input').last().val(0);

    }
    var box = $('.box-modal:last');

    box.find('.js-form-save-1c').attr('cor','');
    box.find('.meta_units_1c').remove();

    if(t_soft==1)
    {
        $('.js-options-invoice-1').slideDown("slow"); //
        $('.js-options-invoice-0').slideUp("slow"); //
        $('.search_bill_ed').hide();

    } else
    {
        $('.js-options-invoice-0').slideDown("slow");
        $('.js-options-invoice-1').slideUp("slow");

        if($('.js-mat-inv-posta10').val()!='') {
            $('.search_bill_ed').show();
        }
    }
}



function StatusMC()
{
                //    
                var pre = $(this).attr('id_status');
var id_file=$('.id-file').val();


var key=$(this).parents('.material-1c').attr('id_key');


                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_1c_material_stock.php?number=' + pre+'&id='+id_file+'&key='+key,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });
}

function SealWo()
{
    //    
    $('#lalala_seal_form').submit();
}


// 
function ForwardWo()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_worder_forward.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}


function RejectWo()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_worder_reject.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}



//   
var save_worder = function()
{
    var error=0;

    $('.messa:visible').find('.text_finery_message_').removeClass('error_formi');
    $('.messa:visible').find('.text_finery_message_').each(function(i,elem) {

        var text=$(this).val();
        if(text=='')
        {
            error=1;
            $(this).addClass('error_formi');
        }
    });
    $('.work__s').find('.price_finery_').removeClass('error_formi');
    $('.work__s').find('.count_finery_').removeClass('error_formi');
    $('.mat').find('.price_finery_mater_').removeClass('error_formi');
    $('.mat').find('.count_finery_mater_').removeClass('error_formi');

    $('.messa:visible').each(function(i,elem) {
        var id_work=$(this).attr('id_mes');
        //        


        //      
        var aa = id_work.split('_');
        if(aa.length==1)
        {
            // 
        } else
        {
            //
        }
        id_work=aa[0];

        var count=$('.work__s[rel_id='+id_work+']').find('.count_finery_').val();
        var price=$('.work__s[rel_id='+id_work+']').find('.price_finery_').val();
        $('.work__s[rel_id='+id_work+']').find('.price_finery_').removeClass('error_formi');
        $('.work__s[rel_id='+id_work+']').find('.count_finery_').removeClass('error_formi');
        if((count==0)||(count=='')||(!$.isNumeric(count)))
        {
            $('.work__s[rel_id='+id_work+']').find('.count_finery_').addClass('error_formi');
            error=1;
        }
        if((price==0)||(price=='')||(!$.isNumeric(price)))
        {
            $('.work__s[rel_id='+id_work+']').find('.price_finery_').addClass('error_formi');
            error=1;
        }


        $('.mat[rel_w='+id_work+']').each(function(i,elem) {
            var count=$(this).find('.count_finery_mater_').val();
            var price=$(this).find('.price_finery_mater_').val();
            $(this).find('.price_finery_mater_').removeClass('error_formi');
            $(this).find('.count_finery_mater_').removeClass('error_formi');
            //if((count==0)||(count=='')||(!$.isNumeric(count)))

            if((count=='')||(!$.isNumeric(count)))
            {
                $(this).find('.count_finery_mater_').addClass('error_formi');
                error=1;
            }
            /*
            if((price==0)||(price=='')||(!$.isNumeric(price)))
            {
                $(this).find('.price_finery_mater_').addClass('error_formi');
                error=1;
            }
            */

        });


    });
    $('.js-add-worder-material .gloab').each(function(i,elem) {
        if($(this).val() == '')  { $(this).parents('.input_2018').addClass('required_in_2018');
            $(this).parents('.list_2018').addClass('required_in_2018');
            error++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2018').removeClass('required_in_2018');$(this).parents('.list_2018').removeClass('required_in_2018');}
    });


    if(error!=0)
    {

        alert_message('error','   ');

    } else
    {
        $('#lalala_add_form').submit();
    }




}


function calc_open_2021_rang() {
    //alert_message('ok','');
    $("#date_table1").show();
//$("#date_table").focus();
    $('.bookingBox1').css({
        display: 'block'
    });
}


//  
var tabs_worder = function(event) {
    //event.data.key

    var uoo=$(this).attr("id");


    if(uoo!=0) {
        $(this).parents('.mm_w-preorders').addClass('active-trips-menu');
    } else
    {

        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    }

    if ( $(this).is(".active") )
    {
        //  
        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    } else
    {
        //alert(event.data.key);
        if(uoo!=0) {
            $(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            $(this).parents('.mm_w-preorders').next().slideDown("slow");

            /*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

            //var key_='002U';

            var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
                '&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
            //alert(data);
            AjaxClient('worder','tabs_info','GET',data,'AfterTabsInfoWorder',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
        }
    }
}

//   
function AfterTabsInfoWorder(data,update)
{
    if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
        //$('.form'+update[1]+' .px_bg').empty().append(data.query);

        //$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

        //$('.form'+update[1]+' .js-tabs_docc').hide();
        //$('.form'+update[1]+' .js-tabs_'+update[0]).show();

        NumberBlockFile();
        ToolTip();
        if((update[0]==3)||(update[0]==4))
        {
            $(".slct").unbind('click.sys');
            $(".slct").bind('click.sys', slctclick);
            $(".drop").find("li").unbind('click');
            $(".drop").find("li").bind('click', dropli);
            //$('#typesay').unbind('change', changesay);
            //$('#typesay').bind('change', changesay);
            //alert("!");
        }

    }
}



window.search_min2 = 0;  //     
window.search_deley2=500;	//    -  

$(function () {

    var delays = (function(){
        var timer = 0;
        return function(callback, ms){
            clearTimeout (timer);
            timer = setTimeout(callback, ms);
        };
    })();
//  -  
    $('body').on("keyup",".js-keyup-search",KeyUpS);
    $('body').on("click",".js-keyup-search",ClickUpS);
   // 
    $('body').on("change keyup input click",'.js-drop-search li',drop_search);  //  
    $('body').on("change keyup input click",'.js-open-search',open_search);  //  
});
function ClickUpS() {
    var yioo=$(this).attr('oneli');
  if($(this).val()==yioo)
  {
      $(this).val('');
  }

}

function KeyUpS() {
    // 
    var search_input2=$(this);
    var sopen=$(this).attr('sopen');
    var options=0;
    if($(this).is('[fns]'))
    {
        options=$(this).attr('fns');
    }

    var ls=search_input2.parents('.input_2021').attr('list_number');

    search_input2.parents('.input_2021').find('.js-hidden-search').val(0);

    if(jQuery.trim(search_input2.val().length) >= 1)
    {
        $('.fox_dell1').show();
    } else
    {
        $('.fox_dell1').hide();
    }
    delays(function(){

        if(jQuery.trim(search_input2.val().length) >= search_min2)
        {
            var data ='url='+window.location.href+
                '&search='+encodeURIComponent(search_input2.val())+'&option='+options;

            search_input2.parents('.input_2021').find('.b_loading_small').empty().append('<div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div>').show();


            AjaxClient('search',sopen,'GET',data,'AfterSearchTuroper',ls+','+sopen,0,1);




        }
    }, search_deley2);
}

//        
function AfterSearchTuroper(d,c){

    if(c!=null){ if (typeof(c) == "string") { c = c.split(','); } else { c[0]=c; } }

//$('.b_loading_small').remove();
//$('.fox_dell1').show();
    //alert(c);
    var input_search_after=$('.input-search-list[list_number='+c[0]+']').find('.js-keyup-search[sopen='+c[1]+']');


    if(d.status=="ok")
    {




        input_search_after.parents('.input_2021').find('.js-drop-search').empty().append(d.query);

        input_search_after.parents('.input_2021').find('.js-drop-search').css("transform", "scaleY(1)");

        input_search_after.parents('.input-search-list').find('i').addClass('open-search-active');

    }else{   input_search_after.parents('.input_2021').find('.js-drop-search').css("transform", "scaleY(0)");  }

    //$('#sort5c').unbind('change');
    //$('#sort5c').bind('change', changesort5c);

    var uiii=input_search_after.attr('oneli');

    if(uiii!='') {
        input_search_after.parents('.input_2021').find('.js-drop-search').prepend('<li><a href="javascript:void(0);" rel="0">' + uiii + '</a></li>');
    }
    input_search_after.parents('.input_2021').find('.b_loading_small').hide();
}


//    input
function open_search()
{
    var i_open = $(this).parents('.input-search-list').find('i');
    //alert("11");
    if(i_open.is(".open-search-active"))
    {
        i_open.removeClass('open-search-active');
        $(this).parents('.input-search-list').find('.js-drop-search').css("transform", "scaleY(0)");
    } else
    {

        i_open.addClass('open-search-active');
        $(this).parents('.input-search-list').find('.js-drop-search').css("transform", "scaleY(1)");
    }


    //       
    $('.slct').each(function(i,elem)
    {
        $(this).removeClass("active");
        $(this).next().css("transform", "scaleY(0)");
    });


    elemss=$(this).parents('.input-search-list').attr('list_number');
    //        
    $('.drop-search').each(function(i,elem)
    {
        if ($(this).parents('.input_2021').attr('list_number')!=elemss)
        {
            $(this).parents('.input-search-list').find('i').removeClass('open-search-active');
            $(this).parents('.input-search-list').find('.js-drop-search').css("transform", "scaleY(0)");
        }
    });



}

//    input
function drop_search()
{
    var f1=$(this).find("a").html();
    var obj = $("<div>" + f1 + "</div>");
    obj.find(".green-base").remove();
    var f=obj.text();
    //var f=$(this).find("a").text();


    var e=$(this).find("a").attr("rel");

    var input_pr=$(this).parents('.input_2021');

    input_pr.find('.click-search-name').empty().append(f).slideDown("slow");
    input_pr.find('.click-search-icon').slideDown("slow");

    input_pr.find('.js-hidden-search').val(e).change();

    input_pr.find('.js-keyup-search').val(f);

    input_pr.removeClass('required_in_2021');
    $(this).parents('.input-search-list').find('i').removeClass('open-search-active');

    input_2021();

    //      
    if($(this).parents('.js-stock-1c').length!=0)
    {
        input_pr.find('.js-hidden-unit').val($(this).find(".search_units_stock").text());

        input_pr.find('.js-hidden-name-m').val($(this).find('a').text());


    }


}
/*

 logitech 401
 Radion 20010
 Samsung l3000 - 
...
|
V
        

*/
$(document).ready(function() {


// 
    $('body').on("click", '.js-more', JsMoreB);
//      

});


//  -	   
//  |
// \/
function JsMoreB()
{

    var mmor=$(this).parents('.js-more-block');

    if(mmor.is('.show-more-all'))
    {
        mmor.removeClass('show-more-all');
    } else
    {
        mmor.addClass('show-more-all');
    }




}

$(function (){


});
$(function () {

    $('body').on("change keyup input click",'.js-edit-dop-sm',DopSmetaEdit);
    $('body').on("change keyup input click",'.js-del-dop-sm',DopDelSme);

// 
    $(".add__razdel").bind('change keyup input click', add_button_block);

    $('.material-prime-v2').on("click",'.history_icon',HistoryN1);


    $('body').on("click",'.js-sort-prime-material',SortMatPrime);

})

function DopDelSme()
{
    if ( $(this).is("[for]") )
    {
        if($.isNumeric($(this).attr("for")))
        {
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_dell_dop_2021.php?id='+$(this).attr("for"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }
    }

    return false;
}

function DopSmetaEdit()
{

    if ( $(this).is("[for]") )
    {
        if($.isNumeric($(this).attr("for")))
        {
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_edit_dop_2021.php?id='+$(this).attr("for"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }
    }

    return false;



}



function SortMatPrime()
{
var id_house=$(this).attr('for');

var sort=$(this).attr('sort');
    var tr = $('tr[work_house='+id_house+']');
    //alert(tr.length);

    if(sort==0) {
        var alphabeticallyOrderedTr = tr.get().sort(function (a, b) {
            return $(a).find(".s_j_name_sort").text().toLowerCase().localeCompare($(b).find(".s_j_name_sort").text().toLowerCase());
        });
        $(this).attr('sort',1);
    } else
    {
        var alphabeticallyOrderedTr = tr.get().sort(function (a, b) {
            return $(a).attr("rel_ma").localeCompare($(b).attr("rel_ma"));
        });
        $(this).attr('sort',0);
    }

    //$("#container").append(alphabeticallyOrderedTr);
    //console.log(alphabeticallyOrderedTr);

    //    .         
    if($('tr[rel_id='+id_house+']').next().is("[dop_house]"))
    {
        $('[rel_id_dop_x='+id_house+']').last().after(alphabeticallyOrderedTr);
    } else {


        $('tr[rel_id=' + id_house + ']').after(alphabeticallyOrderedTr);
    }
}


//   
function del_button_block()  {



    if ( $(this).is("[for]") )
    {
        if($.isNumeric($(this).attr("for")))
        {
            /*
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_dell_block.php?id='+$(this).attr("for"),
                afterLoading: function(data, el) {
                    //alert('afterLoading');
                },
                afterLoadingOnShow: function(data, el) {
                    //alert('afterLoadingOnShow');
                },
                afterClose: function(data, el) { //    ArcticModal
                    clearInterval(timerId);
                }

            });
            */

            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_dell_block_new.php?id=' + $(this).attr("for"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });


        }
    }

    return false;


}



//   
function edit_button_block()
{


    if ($(this).is("[for]")) {
        if ($.isNumeric($(this).attr("for"))) {
            /*
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_edit_block.php?id=' + $(this).attr("for"),
                afterLoading: function (data, el) {
                    //alert('afterLoading');
                },
                afterLoadingOnShow: function (data, el) {
                    //alert('afterLoadingOnShow');
                },
                afterClose: function (data, el) { //    ArcticModal
                    clearInterval(timerId);
                }

            });
*/

            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_edit_block_new.php?id=' + $(this).attr("for"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });


        }
    }

    return false;


}


//     
function add_button_rabota() {

    if($(this).is("[for]"))
    {
        if($.isNumeric($(this).attr("for")))
        {
            /*
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_add_rabota.php?id='+$(this).attr("for")+'&freez='+$('#frezezz').val(),
                afterLoading: function(data, el) {
                    //alert('afterLoading');
                },
                afterLoadingOnShow: function(data, el) {
                    //alert('afterLoadingOnShow');
                },
                afterClose: function(data, el) { //    ArcticModal
                    clearInterval(timerId);
                }

            });
*/
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_add_rabota_new.php?id='+$(this).attr("for")+'&freez='+$('#frezezz').val(),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }
            });
        }
    }

    return false;

}

//   
function add_button_block() {



    if ( $('.content_block').is("[dom]") )
    {

        if($.isNumeric($('.content_block').attr("dom")))
        {

            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_add_block.php?id='+$('.content_block').attr("dom"),
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });





        }
    }

    return false;


}
//    
//style - ok error war
//alert_message('error','   ');
function alert_message(style,text)
{
	
	var maxValue = 1;
$(".alert_wrapper .div-box").find('.alert-message').each(function() { 
      value = $(this).attr("alert-id");
  if(value > maxValue) {
    maxValue = value;
  }
});

	
	$('.alert_wrapper .div-box').prepend(function () { $(this).find('.alert-message ').addClass('show-alert'); },'<div alert-id="'+(maxValue+1)+'" class="  alert-message '+style+'-a"><div class="alert-icon"></div><div class="alert-content">'+text+'</div><div class="alert-close js-alert-close"></div></div>');

	setTimeout ( function () {  $('.alert-message[alert-id='+(maxValue+1)+']').addClass('show-alert'); }, 500 );	
	
	//$('.alert_wrapper .div-box').find('.alert-message').first().addClass('show-alert');
	
	setTimeout ( function () {  $('.alert-message[alert-id='+(maxValue+1)+']').addClass('hide-alert'); 
							 

				setTimeout ( function () {  $('.alert-message[alert-id='+(maxValue+1)+']').remove(); 
							 
							 
							 
							 
							 }, 500 );
							 
							 }, 5000 );
}
$(function () {


//      
    $('body').on("change keyup input click",'.js-add-stock', add_invoice1);
    $('body').on("change keyup input click",'.js-print-stock',PrintStock_);
});

//   
function add_invoice1()
{


    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_add_stock.php',
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });

}


//   
function PrintStock_()
{
    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_print_stock.php?id='+$('#sort_stock4').val(),
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });
}


$(function (){

    $('.material-prime-v22').on("click",'.history_icon',HistoryN1);


    //       
    $('body').on("change keyup input click",'.menu_jjs .js-menu-jjs-basket',menu_supply_basket_21);
    $('body').on("change keyup input click",'.menu_jjs .js-menu-jjs-basket-acc',menu_supply_basket_acc_21);
    $('.scope_scope').on("change",'.option_score1',option_score1);

    $('.tr_dop_supply').on("click",'.st_div_supply',st_div_supply);
    //$('.menu1').on("click",'.score_plus,.score_',add_soply);
    //   
    basket_supply();

    $('.js-call-no-v').find('.drop').on("change keyup input click","li",list_number);

    $('body').on("change keyup input click",'.js-dava-click',dava_supply);


    $('body').on("change keyup input click",'.js-showx-click',showx_take);


    $('body').on("change keyup input click",'.js-waves-app',waves);

});


function waves()
{
    var id_pole=$(this).parents('.tr_dop_supply').attr('supply_id');
    //alert(cookie_new);

        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_waves_app.php?id=' + id_pole,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });

}


//         
//  |
// \/
function js_edit_supply_mat_stock()
{
    var box_active = $(this).closest('.box-modal');
    var err = 0;
//alert($('.js-form-register .gloab').length);
// alert("!!");
    box_active.find('.js-form-supply-mats .gloab').each(function(i,elem) {
        if($(this).val() == '')  { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            err++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });


    var contractor_new=box_active.find('.js-type-stock-prime1').val();


    if(contractor_new==0)
    {
        box_active.find('.js-form-supply-mats .gloab2').each(function(i,elem) {
            if($(this).val() == '')  { $(this).parents('.input_2021').addClass('required_in_2021');
                $(this).parents('.list_2021').addClass('required_in_2021');
                err++;
                //alert($(this).attr('name'));
            } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
        });
    } else
    {
        box_active.find('.js-form-supply-mats .gloab1').each(function(i,elem) {
            if($(this).val() == '')  { $(this).parents('.input_2021').addClass('required_in_2021');
                $(this).parents('.list_2021').addClass('required_in_2021');
                err++;
                //alert($(this).attr('name'));
            } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
        });
    }


    // js-type-soft-view1 0 1
    /*
    var iu=$('.content_block').attr('iu');
    var cookie_flag_current = $.cookie('current_supply_'+iu);
    //alert(cookie_new);
    if(cookie_flag_current==null)
    {
        var ssup='basket_supply_';
    } else
    {
        var ssup='basket_score_';
    }

    var basket_score_ = $.cookie(ssup+iu);
    var cc = basket_score_.split('.');
    var xvg='';



    if(cc.length==0)
    {
        err++;
    }

*/





    if(err==0)
    {
        var for_id=box_active.find('.gloab-cc').attr('for');


        AjaxClient('supply','svyz_sklad','POST',0,'AfterSVS',for_id,'form_supply_edit_mat_stock');

        box_active.find('.js-edit-supply-block-x').hide().after('<div class="b_loading_small" style="position:relative; width: 40px;padding-top: 17px;top: auto;right: auto;left: auto; display: inline-block;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');

    } else
    {
        //       
        //jQuery.scrollTo('.required_in_2018:first', 1000, {offset:-70});
        //ErrorBut('.js-form-tender-new .js-add-tender-form',' !');
        alert_message('error','   ');
    }
}


function list_number() {
    //alert("!");
//.next().find('li')
    var active_new=$(this).find('a').attr("rel");
    //alert(active_new);
    if(active_new==2)
    {
        $("#date_table").show();
        //$("#date_table").focus();
        $('.bookingBox_range').css({
            display:'block'
        });
    }
}

function showx_take()
{
    var active_new=$(this).find('.choice-radio i');
    var iu=$('.users_rule').attr('ui');

    var fpx=1;
    if(!active_new.is('.active_task_cb')) {
        var fpx = 0;
    }


    $.cookie("showx_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
    CookieList("showx_"+iu,fpx,'add');

 autoReloadHak();
    /*
    if(fpx==1)
    {
$('.js-dava-hide').hide();
    } else
    {
        $('.js-dava-hide').show();
    }
    */

    //     


}

function dava_supply()
{
    var active_new=$(this).find('.choice-radio i');
    var iu=$('.content_block').attr('iu');

    var fpx=1;
    if(!active_new.is('.active_task_cb')) {
        var fpx = 0;
    }


    $.cookie("dava_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
    CookieList("dava_"+iu,fpx,'add');
    $('.js-reload-top').removeClass('active-r');
    $('.js-reload-top').addClass('active-r');

    /*
    if(fpx==1)
    {
$('.js-dava-hide').hide();
    } else
    {
        $('.js-dava-hide').show();
    }
    */

    //     


}


//  
function erase_basket()
{
    var u_key=$('.users_rule').attr('iu');
    var iu=$('.content_block').attr('iu');
    $.cookie("basket_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});

    $('.checher_supply').removeClass('checher_supply');
    basket_supply();
}

//       
function menu_supply_basket_21(event)
{
    event.stopPropagation();

    var rel=$(this).find('a').attr('rel');
//alert(rel);
    if(rel==2)
    {
        // 
        erase_basket();

    }
    if(rel==1)
    {
        //  
        if (typeof timerId != 'undefined') {

            clearInterval(timerId);
            $.arcticmodal('close');

        }

        event.stopPropagation();
        add_soply();
/*
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/items/form_basket.php',
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
*/
    }

}


//       
function menu_supply_basket_acc_21(event)
{
    event.stopPropagation();

    var rel=$(this).find('a').attr('rel');
//alert(rel);
    if(rel==1)
    {
        //
        save_soply();

    }
    if(rel==2)
    {
        // 
        var iu=$('.content_block').attr('iu');
        $.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
        $.cookie("basket_score_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
        $.cookie("basket_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});


        //  
        /*
        $('.current_score').find('.number_score').empty();
        $('.current_score').find('.count_numb_score').empty();
        $('.current_score').hide();
        $('.more_supply2').hide();
*/
        $('.js-basket-supply-acc').hide();
        $('.js-basket-supply-acc').removeClass('more-active-s');
        $('.js-basket-supply-acc').removeClass('more-active-s1');
        $('.js-basket-supply-acc .more_supply1').find('i').empty();

        //   
        $('.checher_supply').removeClass('checher_supply');

        //   
        $('.score_active').removeClass('score_active');

        alert_message('ok','  ');
    }

    if(rel==3)
    {

        //var id_acc_s= $(this).parents('.menu_supply').prev().attr('rel_score');
        var cookie_flag_current = $.cookie('current_supply_'+iu);
        //alert(cookie_new);
        if(cookie_flag_current!=null) {
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_sign_acc.php?id=' + cookie_flag_current,
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }

        /*
        //
        if (typeof timerId != 'undefined') {

            clearInterval(timerId);
            $.arcticmodal('close');

        }

        event.stopPropagation();


        //
        var iu=$('.content_block').attr('iu');
        var cookie_flag_current = $.cookie('current_supply_'+iu);
        //alert(cookie_new);
        if(cookie_flag_current!=null)
        {
            id_soply=cookie_flag_current;


            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_update_soply.php?id='+id_soply,
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });
        }
*/
        /*
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/items/form_basket.php',
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });
        */
    }

}


//  /  
function basket_supply()
{

    var u_key=$('.users_rule').attr('iu');
    var iu=$('.content_block').attr('iu');
    var cookie_new = $.cookie('basket_supply_'+iu);
    var cookie_score = $.cookie('basket_score_'+iu);
    var cookie_flag_current = $.cookie('current_supply_'+iu);
    //alert(cookie_new);
    if(cookie_flag_current==null)
    {
        //     
        if(cookie_new==null) {

            $('.js-basket-supply').hide();
            $('.js-basket-supply').removeClass('more-active-s');

            //$('.add_score').remove(); $('.more_supply').hide();
        } else
        {
            $('.js-basket-supply').addClass('more-active-s');
            $('.js-basket-supply').show();

            $('.add_nar').show();
            $('.add_zayy').show();
            if(!$(".add_score").length)
            {
                //$('.add_sss').after('<a data-tooltip=" " class="add_score"><i class="score_plus"></i><i class="score_"></i></a>');
                //$('.more_supply').show();

                ToolTip();
            }
            var cc = cookie_new.split('.');
            var counts=cc.length;
            $('.add_score .score_').empty().append(counts);

            $('.js-basket-supply .more_supply1').find('i').empty().append(counts);
            $('.js-basket-supply').addClass('more-active-s');

            /*
                       $('.add_score .score_').animate({scale: "1.5"}, 200, function() {  $('.add_score .score_').animate({scale: "1"}, 200); });
                       $('#nprogress').show();
                       $('#nprogress .bar').animate({width: "100%"}, 200, function() {  $('#nprogress').hide(); $('#nprogress .bar').width('0'); });*/
        }
    } else
    {

        $('.js-basket-supply').hide();
        $('.js-basket-supply').removeClass('more-active-s');

        $('.js-basket-supply-acc').show();
        $('.js-basket-supply-acc').removeClass('more-active-s1');
        $('.js-basket-supply-acc').addClass('more-active-s');
        //   
        /*
        $('.add_score').remove(); $('.more_supply').hide();
        $('.current_score').show();  $('.more_supply2').show();

        $('.current_score').find('.count_scire').show();
        $('.menu_supply').find('[rel=1]').parents('li').show();
*/
        //$('.js-basket-supply-acc .menu_supply').find('[rel=1]').parents('li').show();
        //$('.js-basket-supply-acc .more_supply1').find('i').empty().append(counts);


        if(cookie_score!=null)
        {
            var cc = cookie_score.split('.');
            var counts=cc.length;
        } else
        {
            counts='';
            //$('.current_score').find('.count_scire').hide();
            //$('.menu_supply').find('[rel=1]').parents('li').hide();
            $('.js-basket-supply-acc').addClass('more-active-s1');
            $('.js-basket-supply-acc').removeClass('more-active-s');

        }

        //$('.add_score .score_').empty().append(counts);
        //$('.current_score').find('.count_numb_score').empty().append(counts);
        $('.js-basket-supply-acc .more_supply1').find('i').empty().append(counts);
        //$('.current_score').find('.count_scire').hide();

    }

}

//  
function add_soply()
{
    var u_key=$('.users_rule').attr('iu');
    var iu=$('.content_block').attr('iu');
    var cookie_new = $.cookie('basket_supply_'+iu);
    if(cookie_new!=null)
    {



        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_soply_2021.php',
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });



    }

}

//     - /   
function st_div_supply() {

    var u_key=$('.users_rule').attr('iu');
    var iu=$('.content_block').attr('iu');
    var tr=$(this).parents('.tr_dop_supply');

    //var cookie_new = $.cookie('basket_supply_'+iu);
    var cookie_flag_current = $.cookie('current_supply_'+iu);
    //alert(cookie_new);
    if(cookie_flag_current==null)
    {
        var ssup='basket_supply_';
    } else
    {
        var ssup='basket_score_';
    }

    //alert(ssup);
    if(tr.is(".checher_supply"))
    {
        tr.removeClass("checher_supply");
        CookieList(ssup+iu,tr.attr('supply_id'),'del');
        // alert($(this).parents('[rel_id]').attr('rel_id'));
        basket_supply();
        ToolTip();
    } else
    {
        tr.addClass("checher_supply");
        CookieList(ssup+iu,tr.attr('supply_id'),'add');
        basket_supply();
        ToolTip();
    }


}

//  
function save_soply() {
    var iu=$('.content_block').attr('iu');
    var cookie_flag_current = $.cookie('current_supply_'+iu);
    //alert(cookie_new);
    if(cookie_flag_current!=null)
    {

        var data ='url='+window.location.href;
        AjaxClient('supply','update_soply','GET',data,'Afterupdate_soply',1,0);

    }

}

//   
function Afterupdate_soply(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        var iu=$('.content_block').attr('iu');

        var basket_score_ = $.cookie('basket_score_'+iu);
        var cookie_flag_current = $.cookie('current_supply_'+iu);
        var cc = basket_score_.split('.');


        //        

        $('[rel_score='+cookie_flag_current+']').next().remove();
        $('[rel_score='+cookie_flag_current+']').remove();

        for ( var t = 0; t < cc.length; t++ )
        {
            var tr=$('[supply_id='+cc[t]+']');



            tr.find('.scope_scope').append('<div rel_score="'+cookie_flag_current+'" data-tooltip=" '+data.number+' ('+data.dates+')" class="menu_click score_a"><span>'+data.number+' ('+data.date+')</span><strong><label>'+$.number(parseFloat(data.sum).toFixed(2), 2, '.', ' ')+'</label></strong><i>'+cc.length+'</i><form class="none" target = "_blank"  action="acc/'+cookie_flag_current+'/" style=" padding:0; margin:0;" method="post" enctype="multipart/form-data"><input name="a" value="open" type="hidden"></form></div><div class="menu_supply menu_su122"><ul class="drops no_active" data_src="0" style="left: -50px; top: 5px; transform: scaleY(0);"><li><a href="javascript:void(0);" rel="1"></a></li><li><a href="javascript:void(0);" rel="2"> </a></li><li><a href="javascript:void(0);" rel="3"></a></li><li><a href="javascript:void(0);" rel="4"></a></li></ul><input rel="x" name="vall" class="option_score1" value="0" type="hidden"></div>');


/*
            tr.find('.scope_scope').append('<div rel_score="'+cookie_flag_current+'" class="menu_click score_a  "><i>'+cc.length+'</i><span>'+data.number+'</span></div><div class="menu_supply menu_su122"><ul class="drops no_active" data_src="0" style="left: -50px; top: 5px; transform: scaleY(0);"><li><a href="javascript:void(0);" rel="1"></a></li><li><a href="javascript:void(0);" rel="2"> </a></li><li><a href="javascript:void(0);" rel="3"></a></li><li><a href="javascript:void(0);" rel="4"></a></li></ul><input rel="x" name="vall" class="option_score1" value="0" type="hidden"></div>');
*/
        }
        alert_message('ok','  ');





        $.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
        $.cookie("basket_score_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
        $.cookie("basket_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});

        /*
        $('.current_score').find('.number_score').empty();
        $('.current_score').find('.count_numb_score').empty();
        $('.current_score').hide();
        $('.more_supply2').hide();
        */

        $('.js-basket-supply-acc').hide();
        $('.js-basket-supply-acc').removeClass('more-active-s');
        $('.js-basket-supply-acc').removeClass('more-active-s1');
        $('.js-basket-supply-acc .more_supply1').find('i').empty();
        $('.js-basket-supply-acc .more_supply1').find('.dop-21').empty();

        $('.checher_supply').removeClass('checher_supply');
        $('.score_active').removeClass('score_active');

    }
    if ( data.status=='error' )
    {

    }
}


function option_score1() {
    var el_v=$(this).val();
    var soply=$(this).parents('.menu_supply').prev();
    var id_soply=soply.attr('rel_score');
    if(el_v==2)
    {
        // 

        $('.checher_supply').removeClass('checher_supply');



        var iu=$('.content_block').attr('iu');
        $.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
        CookieList("current_supply_"+iu,id_soply,'add');

        $('.score_active').removeClass('score_active');
        $('[rel_score='+id_soply+']').addClass('score_active');





        var data ='url='+window.location.href+'&id='+id_soply;
        AjaxClient('supply','current_soply','GET',data,'Aftercurrent_soply',id_soply,0);
    }
    if(el_v==3)
    {

        // 
        var id_acc_s= $(this).parents('.menu_supply').prev().attr('rel_score');
        //alert(id_acc_s);
            $.arcticmodal({
                type: 'ajax',
                url: 'forms/form_sign_acc.php?id=' + id_acc_s,
                beforeOpen: function (data, el) {
                    //     ajax 
                    $('.loader_ada_forms').show();
                    $('.loader_ada1_forms').addClass('select_ada');
                },
                afterLoading: function (data, el) {
                    //    ajax
                    data.body.parents('.arcticmodal-container').addClass('yoi');
                    $('.loader_ada_forms').hide();
                    $('.loader_ada1_forms').removeClass('select_ada');
                },
                beforeClose: function (data, el) { //    ArcticModal
                    if (typeof timerId !== "undefined") {
                        clearInterval(timerId);
                    }
                    BodyScrool();
                }

            });


    }
    if(el_v==1)
    {

        // 
        $('[rel_score='+id_soply+']:first').find('form').submit();

/*
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_update_soply.php?id='+id_soply,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
        */
    }




    if(el_v==4)
    {
        // 

        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_dell_soply.php?id='+id_soply,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });

        //var data ='url='+window.location.href+'&id='+id_soply;
        //AjaxClient('supply','dell_soply','GET',data,'Afterdell_soply',id_soply,0);

    }


}

//  
/*
function Afterapp_soply(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('[rel_score='+update+']').addClass('score_app');


        var hf=$('[rel_score='+update+']').parents('[supply_stock]');
        hf.each(function(i,elem) {
            var rttt=$(this).attr('supply_stock');
            var hf1= [];
            hf1=rttt.split('_');
            //alert(hf1[0]);
            UpdateStatusADA(hf1[0]);
        });

        //alert(hf.length);

        //var hf1=hf.split('_');
        //alert(hf1[0]);
        //UpdateStatusADA(hf1[0]);


        var iu=$('.content_block').attr('iu');

        $('[rel_score='+update+']').next().find('[rel=2]').parents('li').hide();
        $('[rel_score='+update+']').next().find('[rel=3]').parents('li').hide();
        $('[rel_score='+update+']').next().find('[rel=4]').parents('li').hide();

        var cookie_flag_current = $.cookie('current_supply_'+iu);
        if((cookie_flag_current!=null)&&(cookie_flag_current==update))
        {
            $.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
            $.cookie("basket_score_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
            $.cookie("basket_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});

            $('.current_score').find('.number_score').empty();
            $('.current_score').find('.count_numb_score').empty();
            $('.current_score').hide();
            $('.more_supply2').hide();

            $('.checher_supply').removeClass('checher_supply');
            $('.score_active').removeClass('score_active');
        }

        var id_mateo='';
        $('[rel_score='+update+']').each(function (index, value) {
            if(index==0)
            {
                id_mateo=id_mateo+$(this).parents('[supply_id]').attr('supply_id');
            } else
            {
                id_mateo=id_mateo+'.'+$(this).parents('[supply_id]').attr('supply_id');
            }

        });
        var data ='url='+window.location.href+'&id='+id_mateo;
        AjaxClient('supply','update_status','GET',data,'Afterupdate_status',id_mateo,0);

    }
    if ( data.status=='error' )
    {

    }
}
*/
//        
function UpdateStatusADA(id)
{
    if(id!=0)
    {
        $('[id_ada='+id+']').hide().after('<div class="loader_inter"><div></div><div></div><div></div><div></div></div>');
        var data ='url='+window.location.href+'&id='+id;
        AjaxClient('supply','update_ada','GET',data,'AfterUpdateStatusADA',id,0);
    }
}

//      
function AfterUpdateStatusADA(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='error' )
    {
        $('.loader_inter').remove();
    }


    if ( data.status=='ok' )
    {
        $('[id_ada='+update+']').empty().append(data.echo);
        ToolTip();
        $('.loader_inter').remove();
        $('[id_ada='+update+']').show();
    }
}


//  
function Aftercurrent_soply(data,update)
{
    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        var iu=$('.content_block').attr('iu');
        $('.js-basket-supply-acc').show();
        $('.js-basket-supply-acc').find('.dop-21').empty().append('<label> </label>'+data.status_echo);
        $('.js-basket-supply-acc').find('i').empty().append(data.count);
       // $('.current_score').show();

        $.cookie("basket_score_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});

        CookieList("basket_score_"+iu,data.basket,'add');

        //          id
        var cc = data.basket.split('.');
        for ( var t = 0; t < cc.length; t++ )
        {
            $('[supply_id='+cc[t]+']').addClass('checher_supply');
        }
        basket_supply();
    }
    if ( data.status=='error' )
    {

    }
}


function tek_acc(id)
{

    $('.checher_supply').removeClass('checher_supply');



    var iu=$('.content_block').attr('iu');
    $.cookie("current_supply_"+iu, null, {path:'/',domain: window.is_session,secure: false,samesite:'lax'});
    CookieList("current_supply_"+iu,id,'add');

    $('.score_active').removeClass('score_active');
    $('[rel_score='+id+']').addClass('score_active');





    var data ='url='+window.location.href+'&id='+id;
    AjaxClient('supply','current_soply','GET',data,'Aftercurrent_soply',id,0);


}
$(function (){

    //   -   
    $('body').on("change keyup input click",'.js-password-tender',password_tender);
    //  

    $('body').on("change keyup input click",'.js-add-tender',add_tender_2021);
    //   




    $('body').on("change keyup input click",'.js-add-tender-save',save_tender);


    $('body').on("change keyup input click",'.js-edit-tender-more',edit_more_tender);

    $('body').on("change keyup input click",'.tabs_007U',{key: "007U"},tabs_tender);


    $('body').on("change keyup input click",'.js-reject-tender',RejectFoD);
    $('body').on("change keyup input click",'.js-forward-tender',ForwardFoD);

    $('body').on("change keyup input click",'.js-sign-a2',SingFoD);



});

function add_tender_2021()
{
    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_add_tender_2021.php',
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });

}


// 
function RejectFoD()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_tender_reject.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}


// 
function ForwardFoD()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_tender_forward.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}

function SingFoD()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
            if (fo.find('input').val() == 1) {
                //    
                var pre = $('.preorders_block_global').attr('id_pre');
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_add_tender_remark.php?id=' + pre,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });


            } else {
                //    
                $('#js-form-next-sign').submit();
            }
        }
    }
}



//  
var tabs_tender = function(event) {
    //event.data.key

    var uoo=$(this).attr("id");


    if(uoo!=0) {
        $(this).parents('.mm_w-preorders').addClass('active-trips-menu');
    } else
    {

        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    }

    if ( $(this).is(".active") )
    {
        //  
        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    } else
    {
        //alert(event.data.key);
        if(uoo!=0) {
            $(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            $(this).parents('.mm_w-preorders').next().slideDown("slow");

            /*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

            //var key_='002U';

            var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
                '&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
            //alert(data);
            AjaxClient('tender','tabs_info','GET',data,'AfterTabsInfotender',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
        }
    }
}

//   
function AfterTabsInfotender(data,update)
{
    if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
        //$('.form'+update[1]+' .px_bg').empty().append(data.query);

        //$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

        //$('.form'+update[1]+' .js-tabs_docc').hide();
        //$('.form'+update[1]+' .js-tabs_'+update[0]).show();

        NumberBlockFile();
        ToolTip();
        if((update[0]==3)||(update[0]==4))
        {
            $(".slct").unbind('click.sys');
            $(".slct").bind('click.sys', slctclick);
            $(".drop").find("li").unbind('click');
            $(".drop").find("li").bind('click', dropli);
            //$('#typesay').unbind('change', changesay);
            //$('#typesay').bind('change', changesay);
            //alert("!");
        }

    }
}

function edit_more_tender()
{
    var oppf=$(this).parents('[id_pre]').attr("id_pre");

    $.arcticmodal({
        type: 'ajax',
        url: 'forms/form_edit_tender_more.php?id=' + oppf,
        beforeOpen: function (data, el) {
            //     ajax 
            $('.loader_ada_forms').show();
            $('.loader_ada1_forms').addClass('select_ada');
        },
        afterLoading: function (data, el) {
            //    ajax
            data.body.parents('.arcticmodal-container').addClass('yoi');
            $('.loader_ada_forms').hide();
            $('.loader_ada1_forms').removeClass('select_ada');
        },
        beforeClose: function (data, el) { //    ArcticModal
            if (typeof timerId !== "undefined") {
                clearInterval(timerId);
            }
            BodyScrool();
        }

    });
}


//    
function save_tender()
{
    var err = 0;
    $('.js-save-form-tender').find('.gloab').each(function(i,elem) {
        if(($(this).val() == '')||($(this).val() == '0')) { $(this).parents('.input_2021').addClass('required_in_2021');
            $(this).parents('.list_2021').addClass('required_in_2021');
            err++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2021').removeClass('required_in_2021');$(this).parents('.list_2021').removeClass('required_in_2021');}
    });

    if(err==0) {

        $('.js-save-form-tender').submit();

    } else
    {
        alert_message('error','   ');
    }
}




//  
function password_tender()
{
    var cb_h=$(this).parents('.password_tender').find('input');
    if(cb_h.val()!=$(this).attr('id'))
    {
        cb_h.val($(this).attr('id'));

        $(this).parents('.password_tender').find('.choice-radio i').removeClass('active_task_cb');
        $(this).parents('.password_tender').find('.input-choice-click-pass').removeClass('active_pass');

        $(this).find('.choice-radio i').addClass('active_task_cb');
        $(this).addClass('active_pass');
        view_type();
    }
}






$(function () {

//    
    $('body').on("change keyup input click",'.tabs_009U',{key: "009U"},tabs_worder);
    //  
    $('body').on("click",'.cal_rang_2021',calc_open_2021_rang);

    $('body').on("change keyup input click",'.menu_jjs .js-menu-jjs-print',menu_print);

    $('body').on("change keyup input click",'.js-reject-worder',RejectWo);

    $('body').on("change keyup input click",'.js-forward-worder',ForwardWo);

    $('body').on("change keyup input click",'.js-sign-worder',SingWo);


    $('body').on("change keyup input click",'.js-sign-seal',SealWo);


    //      
    $(".js-add-worder").bind('click', save_worder);

    setTimeout ( function () {
        //              
    $('.my_no').on("change keyup input click.naryd",'.count_finery_mater_,.price_finery_mater_,.text_finery_message_,.count_finery_,.price_finery_,.slct_box,#date_table,#date_table1,[name=ispol_work],.js-worder-20-2',

    function(){  if(($(this).attr('readonly')==undefined)||(($(this).attr('disabled')==undefined)&&(($(this).is('.cal_rang_2021'))||($(this).is('.cal_2021'))))) {  $('.pod_zay').hide(); $('.add_zay').show(); }   }



        );


}, 2000 );

});


function menu_print(event)
{
        event.stopPropagation();

        var rel=$(this).find('a').attr('rel');

    }



function SingWo()
{
    if(!$(this).is('.gray-bb')) {
        var fo = $(this);
        if (!fo.hasClass("gray-bb")) {
            //alert("!");
            if (fo.find('input').val() == 1) {
                //    
                var pre = $('.preorders_block_global').attr('id_pre');
                $.arcticmodal({
                    type: 'ajax',
                    url: 'forms/form_add_worder_remark.php?id=' + pre,
                    beforeOpen: function (data, el) {
                        //     ajax 
                        $('.loader_ada_forms').show();
                        $('.loader_ada1_forms').addClass('select_ada');
                    },
                    afterLoading: function (data, el) {
                        //    ajax
                        data.body.parents('.arcticmodal-container').addClass('yoi');
                        $('.loader_ada_forms').hide();
                        $('.loader_ada1_forms').removeClass('select_ada');
                    },
                    beforeClose: function (data, el) { //    ArcticModal
                        if (typeof timerId !== "undefined") {
                            clearInterval(timerId);
                        }
                        BodyScrool();
                    }

                });


            } else {
                //    
                $('#js-form-next-sign').submit();
            }
        }
    }
}

function SealWo()
{
    //    
    $('#lalala_seal_form').submit();
}


// 
function ForwardWo()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_worder_forward.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}


function RejectWo()
{
    if(!$(this).is('.gray-bb')) {
        var pre = $('.preorders_block_global').attr('id_pre');
        $.arcticmodal({
            type: 'ajax',
            url: 'forms/form_add_worder_reject.php?id=' + pre,
            beforeOpen: function (data, el) {
                //     ajax 
                $('.loader_ada_forms').show();
                $('.loader_ada1_forms').addClass('select_ada');
            },
            afterLoading: function (data, el) {
                //    ajax
                data.body.parents('.arcticmodal-container').addClass('yoi');
                $('.loader_ada_forms').hide();
                $('.loader_ada1_forms').removeClass('select_ada');
            },
            beforeClose: function (data, el) { //    ArcticModal
                if (typeof timerId !== "undefined") {
                    clearInterval(timerId);
                }
                BodyScrool();
            }

        });
    }
}



//   
var save_worder = function()
{
    var error=0;

    $('.messa:visible').find('.text_finery_message_').removeClass('error_formi');
    $('.messa:visible').find('.text_finery_message_').each(function(i,elem) {

        var text=$(this).val();
        if(text=='')
        {
            error=1;
            $(this).addClass('error_formi');
        }
    });
    $('.work__s').find('.price_finery_').removeClass('error_formi');
    $('.work__s').find('.count_finery_').removeClass('error_formi');
    $('.mat').find('.price_finery_mater_').removeClass('error_formi');
    $('.mat').find('.count_finery_mater_').removeClass('error_formi');

    $('.messa:visible').each(function(i,elem) {
        var id_work=$(this).attr('id_mes');
        //        


        //      
        var aa = id_work.split('_');
        if(aa.length==1)
        {
            // 
        } else
        {
            //
        }
        id_work=aa[0];

        var count=$('.work__s[rel_id='+id_work+']').find('.count_finery_').val();
        var price=$('.work__s[rel_id='+id_work+']').find('.price_finery_').val();
        $('.work__s[rel_id='+id_work+']').find('.price_finery_').removeClass('error_formi');
        $('.work__s[rel_id='+id_work+']').find('.count_finery_').removeClass('error_formi');
        if((count==0)||(count=='')||(!$.isNumeric(count)))
        {
            $('.work__s[rel_id='+id_work+']').find('.count_finery_').addClass('error_formi');
            error=1;
        }
        if((price==0)||(price=='')||(!$.isNumeric(price)))
        {
            $('.work__s[rel_id='+id_work+']').find('.price_finery_').addClass('error_formi');
            error=1;
        }


        $('.mat[rel_w='+id_work+']').each(function(i,elem) {
            var count=$(this).find('.count_finery_mater_').val();
            var price=$(this).find('.price_finery_mater_').val();
            $(this).find('.price_finery_mater_').removeClass('error_formi');
            $(this).find('.count_finery_mater_').removeClass('error_formi');
            //if((count==0)||(count=='')||(!$.isNumeric(count)))

            if((count=='')||(!$.isNumeric(count)))
            {
                $(this).find('.count_finery_mater_').addClass('error_formi');
                error=1;
            }
            /*
            if((price==0)||(price=='')||(!$.isNumeric(price)))
            {
                $(this).find('.price_finery_mater_').addClass('error_formi');
                error=1;
            }
            */

        });


    });
    $('.js-add-worder-material .gloab').each(function(i,elem) {
        if($(this).val() == '')  { $(this).parents('.input_2018').addClass('required_in_2018');
            $(this).parents('.list_2018').addClass('required_in_2018');
            error++;
            //alert($(this).attr('name'));
        } else {$(this).parents('.input_2018').removeClass('required_in_2018');$(this).parents('.list_2018').removeClass('required_in_2018');}
    });


    if(error!=0)
    {

        alert_message('error','   ');

    } else
    {
        $('#lalala_add_form').submit();
    }




}


function calc_open_2021_rang() {
    //alert_message('ok','');
    $("#date_table1").show();
//$("#date_table").focus();
    $('.bookingBox1').css({
        display: 'block'
    });
}


//  
var tabs_worder = function(event) {
    //event.data.key

    var uoo=$(this).attr("id");


    if(uoo!=0) {
        $(this).parents('.mm_w-preorders').addClass('active-trips-menu');
    } else
    {

        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    }

    if ( $(this).is(".active") )
    {
        //  
        $(this).parents('.mm_w-preorders').removeClass('active-trips-menu');
        $(this).parents('.mm_w-preorders').next().empty().hide();
        $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
    } else
    {
        //alert(event.data.key);
        if(uoo!=0) {
            $(this).parents('.mm_w-preorders').next().empty().append('<div class="b_loading_small" style="position:relative; left: calc(50% - 30px); "><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            $(this).parents('.mm_w-preorders').next().slideDown("slow");

            /*
                    $('.form'+event.data.key+' .px_bg').empty().append('<div class="b_loading_small" style="position:relative;"><div class="b_loading_circle_wrapper_small"><div class="b_loading_circle_one_small"></div><div class="b_loading_circle_one_small b_loading_circle_delayed_small"></div></div></div>');
            */
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key).removeClass('active');
            $(this).parents('.js-tabs-menu').find('.tabs_' + event.data.key + '[id=' + uoo + ']').addClass('active');

            //var key_='002U';

            var data = 'url=' + window.location.href + '&id_tabs=' + $(this).attr("id") +
                '&id=' + $(this).parents('.preorders_block_global').attr('id_pre');
            //alert(data);
            AjaxClient('worder','tabs_info','GET',data,'AfterTabsInfoWorder',$(this).attr("id")+','+$(this).parents('.preorders_block_global').attr('id_pre'),0,1);
        }
    }
}

//   
function AfterTabsInfoWorder(data,update)
{
    if(update!=null){ if (typeof(update) == "string") { update = update.split(','); } else { update[0]=update; } }

    if ( data.status=='reg' )
    {
        WindowLogin();
    }

    if ( data.status=='ok' )
    {
        $('.preorders_block_global[id_pre='+update[1]+']').find('.px_bg_trips').empty().append(data.query);
        //$('.form'+update[1]+' .px_bg').empty().append(data.query);

        //$('.cha_1').on("change keyup input click",'.wallet_checkbox',wallet_checkbox);

        //$('.form'+update[1]+' .js-tabs_docc').hide();
        //$('.form'+update[1]+' .js-tabs_'+update[0]).show();

        NumberBlockFile();
        ToolTip();
        if((update[0]==3)||(update[0]==4))
        {
            $(".slct").unbind('click.sys');
            $(".slct").bind('click.sys', slctclick);
            $(".drop").find("li").unbind('click');
            $(".drop").find("li").bind('click', dropli);
            //$('#typesay').unbind('change', changesay);
            //$('#typesay').bind('change', changesay);
            //alert("!");
        }

    }
}


// JavaScript Document
$(function (){

// zindex  select 
Zindex();
	
});


// zindex  select 
//  |
// \/
function Zindex() {
  var zindex=50;
	//alert($('.js-zindex').length);
  $('.js-zindex').each(function (i, elem) {
      $(this).css("z-index", zindex);
	  zindex--;
    });
  }
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS0yLjEuMS5qcyIsImxpZ2h0Z2FsbGVyeS5taW4uanMiLCJjbGlwYm9hcmQuanMiLCJqcXVlcnktdWktMS45LjIuY3VzdG9tLm1pbi5qcyIsImpxdWVyeS5hamF4LmpzIiwianF1ZXJ5LmNpcmNsaWZ1bC5taW4uanMiLCJqcXVlcnkuZGF0ZXBpY2tlci5leHRlbnNpb24ucmFuZ2UubWluLmpzIiwianF1ZXJ5LmVhc2luZ3MubWluLmpzIiwianF1ZXJ5LmZyZWV6ZWhlYWRlci5qcyIsImpxdWVyeS5mdWxsUGFnZS5qcyIsImpxdWVyeS5oaXN0b3J5LmpzIiwianF1ZXJ5LmlucHV0bWFzay5idW5kbGUuanMiLCJqcXVlcnkubWFzay5taW4uanMiLCJqcXVlcnkuc2Nyb2xsVG8tbWluLmpzIiwianF1ZXJ5LnNsaW1zY3JvbGwubWluLmpzIiwibGctZnVsbHNjcmVlbi5taW4uanMiLCJsZy10aHVtYm5haWwubWluLmpzIiwibW9kZXJuaXpyLmN1c3RvbS41MzQ1MS5qcyIsInJlbS5qcyIsInJlc3BvbmQuc3JjLmpzIiwic2Nyb2xsYmFyLmpzIiwic2Nyb2xsb3ZlcmZsb3cuanMiLCJhY2MuanMiLCJhZGRfZmlsZXMuanMiLCJhZGRfZ3JvdXBfaW5wdXQuanMiLCJhcHAuanMiLCJkb2NzLmpzIiwiZmluZXJ5LmpzIiwiaW5kZXguanMiLCJpbmRleDIuanMiLCJpbnB1dF9hdXRvX3dpZHRoLmpzIiwiaW52b2ljZXMuanMiLCJpbnZvaWNlc18xYy5qcyIsImtleV91cF9zZWFyY2hfbGlzdC5qcyIsIm1vcmVfc2hvd19oaWRlLmpzIiwibm9uZS5qcyIsInByaW1lLmpzIiwic2xpY2VfbWVzc2FnZS5qcyIsInN0b2NrLmpzIiwic3VwcGx5LmpzIiwidGVuZGVyLmpzIiwid29yZGVyLmpzIiwiemluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMWFBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BKQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy80REE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzkrRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdk5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN3dCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ24xQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMXlSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM3VCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbmdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDalZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdDlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9WQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImluZGV4Lm1hcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjIuMS4xIHwgKGMpIDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cclxuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9e30sbD1hLmRvY3VtZW50LG09XCIyLjEuMVwiLG49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG4uZm4uaW5pdChhLGIpfSxvPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxwPS9eLW1zLS8scT0vLShbXFxkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPzA+YT90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV06ZC5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9bi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7cmV0dXJuIGIucHJldk9iamVjdD10aGlzLGIuY29udGV4dD10aGlzLmNvbnRleHQsYn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmVhY2godGhpcyxhLGIpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6Zixzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG4uZXh0ZW5kPW4uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8bi5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG4uaXNQbGFpbk9iamVjdChkKXx8KGU9bi5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZuLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZuLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW4uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxuLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhtK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9YS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKy1uZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWdiKCksej1nYigpLEE9Z2IoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz1cInVuZGVmaW5lZFwiLEQ9MTw8MzEsRT17fS5oYXNPd25Qcm9wZXJ0eSxGPVtdLEc9Ri5wb3AsSD1GLnB1c2gsST1GLnB1c2gsSj1GLnNsaWNlLEs9Ri5pbmRleE9mfHxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMubGVuZ3RoO2M+YjtiKyspaWYodGhpc1tiXT09PWEpcmV0dXJuIGI7cmV0dXJuLTF9LEw9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLE09XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE49XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixPPU4ucmVwbGFjZShcIndcIixcIncjXCIpLFA9XCJcXFxcW1wiK00rXCIqKFwiK04rXCIpKD86XCIrTStcIiooWypeJHwhfl0/PSlcIitNK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTytcIikpfClcIitNK1wiKlxcXFxdXCIsUT1cIjooXCIrTitcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrUCtcIikqKXwuKilcXFxcKXwpXCIsUj1uZXcgUmVnRXhwKFwiXlwiK00rXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK00rXCIrJFwiLFwiZ1wiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTStcIiosXCIrTStcIipcIiksVD1uZXcgUmVnRXhwKFwiXlwiK00rXCIqKFs+K35dfFwiK00rXCIpXCIrTStcIipcIiksVT1uZXcgUmVnRXhwKFwiPVwiK00rXCIqKFteXFxcXF0nXFxcIl0qPylcIitNK1wiKlxcXFxdXCIsXCJnXCIpLFY9bmV3IFJlZ0V4cChRKSxXPW5ldyBSZWdFeHAoXCJeXCIrTytcIiRcIiksWD17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK04rXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTitcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK04ucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrUCksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrUSksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrTStcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK00rXCIqKD86KFsrLV18KVwiK00rXCIqKFxcXFxkKyl8KSlcIitNK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0wrXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitNK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitNK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitNK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWj0vXmhcXGQkL2ksJD0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLF89L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sYWI9L1srfl0vLGJiPS8nfFxcXFwvZyxjYj1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrTStcIj98KFwiK00rXCIpfC4pXCIsXCJpZ1wiKSxkYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfTt0cnl7SS5hcHBseShGPUouY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRlt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYil7ST17YXBwbHk6Ri5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtILmFwcGx5KGEsSi5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmIoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSwhYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIGQ7aWYoMSE9PShrPWIubm9kZVR5cGUpJiY5IT09aylyZXR1cm5bXTtpZihwJiYhZSl7aWYoZj1fLmV4ZWMoYSkpaWYoaj1mWzFdKXtpZig5PT09ayl7aWYoaD1iLmdldEVsZW1lbnRCeUlkKGopLCFofHwhaC5wYXJlbnROb2RlKXJldHVybiBkO2lmKGguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNlIGlmKGIub3duZXJEb2N1bWVudCYmKGg9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopKSYmdChiLGgpJiZoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZXtpZihmWzJdKXJldHVybiBJLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoaj1mWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTk9PT1rJiZhLDE9PT1rJiZcIm9iamVjdFwiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/cz1yLnJlcGxhY2UoYmIsXCJcXFxcJCZcIik6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLHMpLHM9XCJbaWQ9J1wiK3MrXCInXSBcIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcWIob1tsXSk7dz1hYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKFwiLFwiKX1pZih4KXRyeXtyZXR1cm4gSS5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbCh4KSksZH1jYXRjaCh5KXt9ZmluYWxseXtyfHxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gZ2IoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBoYihhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGliKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9YS5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGtiKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxEKS0ofmEuc291cmNlSW5kZXh8fEQpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG1iKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIGhiKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhiKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGEmJnR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09QyYmYX1jPWZiLnN1cHBvcnQ9e30sZj1mYi5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/XCJIVE1MXCIhPT1iLm5vZGVOYW1lOiExfSxtPWZiLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGU9YT9hLm93bmVyRG9jdW1lbnR8fGE6dixnPWUuZGVmYXVsdFZpZXc7cmV0dXJuIGUhPT1uJiY5PT09ZS5ub2RlVHlwZSYmZS5kb2N1bWVudEVsZW1lbnQ/KG49ZSxvPWUuZG9jdW1lbnRFbGVtZW50LHA9IWYoZSksZyYmZyE9PWcudG9wJiYoZy5hZGRFdmVudExpc3RlbmVyP2cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGZ1bmN0aW9uKCl7bSgpfSwhMSk6Zy5hdHRhY2hFdmVudCYmZy5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXttKCl9KSksYy5hdHRyaWJ1dGVzPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT1cImlcIiwhYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGUuY3JlYXRlQ29tbWVudChcIlwiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj5cIixhLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPVwiaVwiLDI9PT1hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJpXCIpLmxlbmd0aH0pLGMuZ2V0QnlJZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFlLmdldEVsZW1lbnRzQnlOYW1lfHwhZS5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRCeUlkIT09QyYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlIT09QyYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUM/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PUMmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZS5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYihmdW5jdGlvbihhKXthLmlubmVySFRNTD1cIjxzZWxlY3QgbXNhbGxvd2NsaXA9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NsaXBePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK00rXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK00rXCIqKD86dmFsdWV8XCIrTCtcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKX0pLGliKGZ1bmN0aW9uKGEpe3ZhciBiPWUuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiaGlkZGVuXCIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiRFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGgmJnEucHVzaChcIm5hbWVcIitNK1wiKlsqXiR8IX5dPz1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RofHxxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIikscS5wdXNoKFwiLC4qOlwiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZpYihmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLFwiZGl2XCIpLHMuY2FsbChhLFwiW3MhPScnXTp4XCIpLHIucHVzaChcIiE9XCIsUSl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbihcInxcIikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKFwifFwiKSksYj0kLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHwkLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1lfHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PWV8fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZj1hLnBhcmVudE5vZGUsZz1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWZ8fCFnKXJldHVybiBhPT09ZT8tMTpiPT09ZT8xOmY/LTE6Zz8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDtpZihmPT09ZylyZXR1cm4ga2IoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2tiKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxlKTpufSxmYi5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZiKGEsbnVsbCxudWxsLGIpfSxmYi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSxcIj0nJDEnXVwiKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmIoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmIuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRS5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmIuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGZiLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1mYi5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhiLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2IsZGIpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoY2IsZGIpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGZiLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmZiLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBYLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitNK1wiKVwiK2ErXCIoXCIrTStcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fHR5cGVvZiBhLmdldEF0dHJpYnV0ZSE9PUMmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYi5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZiLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hiKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1LLmNhbGwoYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aGIoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFIsXCIkMVwiKSk7cmV0dXJuIGRbdV0/aGIoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksIWMucG9wKCl9fSksaGFzOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmIoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8ZmIuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmIoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5iKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGIoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWIoYik7ZnVuY3Rpb24gcGIoKXt9cGIucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYixnPWZiLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmIuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gcmIoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2IoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGIoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYihhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWIoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YihhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YihkKSksZSYmIWVbdV0mJihlPXZiKGUsZikpLGhiKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRiKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dWIocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXViKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9LLmNhbGwoZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXViKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpJLmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YihhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlW1wiIFwiXSxpPWc/MTowLGs9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXJiKGZ1bmN0aW9uKGEpe3JldHVybiBLLmNhbGwoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3JldHVybiFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYihzYihtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmIoaT4xJiZzYihtKSxpPjEmJnFiKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ3YihhLnNsaWNlKGksZSkpLGY+ZSYmd2IoYT1hLnNsaWNlKGUpKSxmPmUmJnFiKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNiKG0pfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1HLmNhbGwoaSkpO3M9dWIocyl9SS5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmZiLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9oYihmKTpmfXJldHVybiBoPWZiLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdiKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YihlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmIuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYWIudGVzdChqWzBdLnR5cGUpJiZvYihiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcWIoaiksIWEpcmV0dXJuIEkuYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWIudGVzdChhKSYmb2IoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxqYihcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGpiKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxqYihMLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYn0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTWF0aC5yYW5kb20oKX1LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTS5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TS5yZW1vdmUoYSxiKVxyXG59LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1uLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxQKGYsZCxlW2RdKSkpO0wuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5zZXQodGhpcyxhKX0pOkoodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkPW4uY2FtZWxDYXNlKGEpO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9TS5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9TS5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UChmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9TS5nZXQodGhpcyxkKTtNLnNldCh0aGlzLGQsYiksLTEhPT1hLmluZGV4T2YoXCItXCIpJiZ2b2lkIDAhPT1jJiZNLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5yZW1vdmUodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9TC5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPUwuYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bi5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1uLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe24uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXtMLnJlbW92ZShhLFtiK1wicXVldWVcIixjXSl9KX0pfX0pLG4uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBRPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxSPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxTPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW4uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYz1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSxjLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksYi5hcHBlbmRDaGlsZChjKSxrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPVwidW5kZWZpbmVkXCI7ay5mb2N1c2luQnViYmxlcz1cIm9uZm9jdXNpblwiaW4gYTt2YXIgVj0vXmtleS8sVz0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxYPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxZPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBuIT09VSYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYobD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LGs9bi5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLG0sbyxwPVtkfHxsXSxxPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihnPWg9ZD1kfHxsLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK24uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZihcIi5cIik+PTAmJihyPXEuc3BsaXQoXCIuXCIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06bi5tYWtlQXJyYXkoYyxbYl0pLG89bi5ldmVudC5zcGVjaWFsW3FdfHx7fSxlfHwhby50cmlnZ2VyfHxvLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFvLm5vQnViYmxlJiYhbi5pc1dpbmRvdyhkKSl7Zm9yKGk9by5kZWxlZ2F0ZVR5cGV8fHEsWC50ZXN0KGkrcSl8fChnPWcucGFyZW50Tm9kZSk7ZztnPWcucGFyZW50Tm9kZSlwLnB1c2goZyksaD1nO2g9PT0oZC5vd25lckRvY3VtZW50fHxsKSYmcC5wdXNoKGguZGVmYXVsdFZpZXd8fGgucGFyZW50V2luZG93fHxhKX1mPTA7d2hpbGUoKGc9cFtmKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zj4xP2k6by5iaW5kVHlwZXx8cSxtPShMLmdldChnLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZyxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGcsYyksbT1rJiZnW2tdLG0mJm0uYXBwbHkmJm4uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PW0uYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxvLl9kZWZhdWx0JiZvLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW4uYWNjZXB0RGF0YShkKXx8ayYmbi5pc0Z1bmN0aW9uKGRbcV0pJiYhbi5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZy5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxlPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1lJiYoYS5yZXN1bHQ9ZSk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/bihlLHRoaXMpLmluZGV4KGkpPj0wOm4uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8bCxkPWMuZG9jdW1lbnRFbGVtZW50LGU9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhkJiZkLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGQmJmQuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZCYmZC5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oZCYmZC5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1XLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlYudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBuLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9bCksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PV8oKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9uLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm4uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP1o6JCk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6JCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDokLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9WixhJiZhLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW4uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGsuZm9jdXNpbkJ1YmJsZXN8fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpLCEwKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1uLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFiPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxiYj0vPChbXFx3Ol0rKS8sY2I9Lzx8JiM/XFx3KzsvLGRiPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWI9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxmYj0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdiPS9edHJ1ZVxcLyguKikvLGhiPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxpYj17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2liLm9wdGdyb3VwPWliLm9wdGlvbixpYi50Ym9keT1pYi50Zm9vdD1pYi5jb2xncm91cD1pYi5jYXB0aW9uPWliLnRoZWFkLGliLnRoPWliLnRkO2Z1bmN0aW9uIGpiKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIGtiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIGxiKGEpe3ZhciBiPWdiLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBtYihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxMLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gbmIoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihMLmhhc0RhdGEoYSkmJihmPUwuYWNjZXNzKGEpLGc9TC5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspbi5ldmVudC5hZGQoYixlLGpbZV1bY10pfU0uaGFzRGF0YShhKSYmKGg9TS5hY2Nlc3MoYSksaT1uLmV4dGVuZCh7fSxoKSxNLnNldChiLGkpKX19ZnVuY3Rpb24gb2IoYSxiKXt2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZULnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1uLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1vYihoKSxmPW9iKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGIoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2IoYSksZz1nfHxvYihoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5iKGZbZF0sZ1tkXSk7ZWxzZSBuYihhLGgpO3JldHVybiBnPW9iKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmbWIoZywhaSYmb2IoYSxcInNjcmlwdFwiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZihcIm9iamVjdFwiPT09bi50eXBlKGUpKW4ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNiLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGc9KGJiLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWJbZ118fGliLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFiLFwiPCQxPjwkMj5cIikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD1cIlwifWVsc2UgbC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZSkpO2sudGV4dENvbnRlbnQ9XCJcIixtPTA7d2hpbGUoZT1sW20rK10paWYoKCFkfHwtMT09PW4uaW5BcnJheShlLGQpKSYmKGk9bi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSksZj1vYihrLmFwcGVuZENoaWxkKGUpLFwic2NyaXB0XCIpLGkmJm1iKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmIudGVzdChlLnR5cGV8fFwiXCIpJiZjLnB1c2goZSl9cmV0dXJuIGt9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGUsZj1uLmV2ZW50LnNwZWNpYWwsZz0wO3ZvaWQgMCE9PShjPWFbZ10pO2crKyl7aWYobi5hY2NlcHREYXRhKGMpJiYoZT1jW0wuZXhwYW5kb10sZSYmKGI9TC5jYWNoZVtlXSkpKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cylmW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO0wuY2FjaGVbZV0mJmRlbGV0ZSBMLmNhY2hlW2VdfWRlbGV0ZSBNLmNhY2hlW2NbTS5leHBhbmRvXV19fX0pLG4uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmKHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amIodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP24uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShvYihjKSksYy5wYXJlbnROb2RlJiYoYiYmbi5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJm1iKG9iKGMsXCJzY3JpcHRcIikpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYihhLCExKSksYS50ZXh0Q29udGVudD1cIlwiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhZGIudGVzdChhKSYmIWliWyhiYi5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFiLFwiPCQxPjwkMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2IoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG4uY2xlYW5EYXRhKG9iKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxtPXRoaXMsbz1sLTEscD1hWzBdLHE9bi5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmViLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYihjLFwic2NyaXB0XCIpLGtiKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYihoLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0saCxqKTtpZihnKWZvcihpPWZbZi5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChmLGxiKSxqPTA7Zz5qO2orKyloPWZbal0sZmIudGVzdChoLnR5cGV8fFwiXCIpJiYhTC5hY2Nlc3MoaCxcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGIsXCJcIikpKX1yZXR1cm4gdGhpc319KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFiLHJiPXt9O2Z1bmN0aW9uIHNiKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIHRiKGEpe3ZhciBiPWwsYz1yYlthXTtyZXR1cm4gY3x8KGM9c2IoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChxYj0ocWJ8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYlswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNiKGEsYikscWIuZGV0YWNoKCkpLHJiW2FdPWMpLGN9dmFyIHViPS9ebWFyZ2luLyx2Yj1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLHdiPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfTtmdW5jdGlvbiB4YihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdiKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKFwiXCIhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSx2Yi50ZXN0KGcpJiZ1Yi50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crXCJcIjpnfWZ1bmN0aW9uIHliKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBhKCk/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZD1sLmRvY3VtZW50RWxlbWVudCxlPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKSxmPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihmLnN0eWxlKXtmLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIixmLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIixrLmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT1mLnN0eWxlLmJhY2tncm91bmRDbGlwLGUuc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZS5hcHBlbmRDaGlsZChmKTtmdW5jdGlvbiBnKCl7Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIixmLmlubmVySFRNTD1cIlwiLGQuYXBwZW5kQ2hpbGQoZSk7dmFyIGc9YS5nZXRDb21wdXRlZFN0eWxlKGYsbnVsbCk7Yj1cIjElXCIhPT1nLnRvcCxjPVwiNHB4XCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JldHVybiBjLnN0eWxlLmNzc1RleHQ9Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCIsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPVwiMFwiLGYuc3R5bGUud2lkdGg9XCIxcHhcIixkLmFwcGVuZENoaWxkKGUpLGI9IXBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGMsbnVsbCkubWFyZ2luUmlnaHQpLGQucmVtb3ZlQ2hpbGQoZSksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemI9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFiPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKC4qKSRcIixcImlcIiksQmI9bmV3IFJlZ0V4cChcIl4oWystXSk9KFwiK1ErXCIpXCIsXCJpXCIpLENiPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxEYj17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LEViPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXTtmdW5jdGlvbiBGYihhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYi5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWJbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2IoYSxiLGMpe3ZhciBkPUFiLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fFwicHhcIik6Yn1mdW5jdGlvbiBIYihhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1uLmNzcyhhLGMrUltmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gSWIoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2IoYSksZz1cImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPXhiKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksdmIudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrSGIoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGQsZikrXCJweFwifWZ1bmN0aW9uIEpiKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPUwuZ2V0KGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLFwib2xkZGlzcGxheVwiLHRiKGQubm9kZU5hbWUpKSkpOihlPVMoZCksXCJub25lXCI9PT1jJiZlfHxMLnNldChkLFwib2xkZGlzcGxheVwiLGU/YzpuLmNzcyhkLFwiZGlzcGxheVwiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiZcIm5vbmVcIiE9PWQuc3R5bGUuZGlzcGxheSYmXCJcIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPXhiKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZiKGksaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPUJiLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCIhPT1mfHxuLmNzc051bWJlcltoXXx8KGMrPVwicHhcIiksay5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYihhLnN0eWxlLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPXhiKGEsYixkKSksXCJub3JtYWxcIj09PWUmJmIgaW4gRGImJihlPURiW2JdKSxcIlwiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8bi5pc051bWVyaWMoZik/Znx8MDplKTplfX0pLG4uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96Yi50ZXN0KG4uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bi5zd2FwKGEsQ2IsZnVuY3Rpb24oKXtyZXR1cm4gSWIoYSxiLGQpfSk6SWIoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZ3YihhKTtyZXR1cm4gR2IoYSxjLGQ/SGIoYSxiLGQsXCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWIoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0seGIsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1JbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sdWIudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9R2IpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD13YihhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gS2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IEtiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1LYixLYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOktiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9S2IucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz1iPXRoaXMub3B0aW9ucy5kdXJhdGlvbj9uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTphLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEtiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYi5wcm90b3R5cGUsS2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2IucHJvcEhvb2tzLnNjcm9sbFRvcD1LYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUtiLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGIsTWIsTmI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9iPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1ErXCIpKFthLXolXSopJFwiLFwiaVwiKSxQYj0vcXVldWVIb29rcyQvLFFiPVtWYl0sUmI9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYi5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShuLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZPYi5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGI9dm9pZCAwfSksTGI9bi5ub3coKX1mdW5jdGlvbiBUYihhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWIoYSxiLGMpe2Zvcih2YXIgZCxlPShSYltiXXx8W10pLmNvbmNhdChSYltcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZiKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9MLmdldChhLFwib2xkZGlzcGxheVwiKXx8dGIoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5iLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3RiKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWIocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhiKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFiLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxifHxTYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGJ8fFNiKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWJbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFViLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGIse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJiW2NdPVJiW2NdfHxbXSxSYltjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FiLnVuc2hpZnQoYSk6UWIucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYih0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYihiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGIoXCJzaG93XCIpLHNsaWRlVXA6VGIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYj1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExiPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01ifHwoTWI9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYiksTWI9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsay5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWIsWmIsJGI9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1piOlliKSksdm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBuLnJlbW92ZUF0dHIoYSxiKSlcclxufSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZuLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz0kYltiXXx8bi5maW5kLmF0dHI7JGJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPSRiW2JdLCRiW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCwkYltiXT1mKSxlfX0pO3ZhciBfYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0F0dHJpYnV0ZShcInRhYmluZGV4XCIpfHxfYi50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtuLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7dmFyIGFjPS9bXFx0XFxyXFxuXFxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD1cInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFjLFwiIFwiKTpcIiBcIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoXCIgXCIrZStcIiBcIik8MCYmKGQrPWUrXCIgXCIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIik6XCJcIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTApZD1kLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7Zz1hP24udHJpbShkKTpcIlwiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHxcImJvb2xlYW5cIj09PWMpJiYodGhpcy5jbGFzc05hbWUmJkwuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxhPT09ITE/XCJcIjpMLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVwiIFwiK2ErXCIgXCIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKFwiIFwiK3RoaXNbY10uY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFjLFwiIFwiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pO3ZhciBiYz0vXFxyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBlP2UrPVwiXCI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6YStcIlwifSkpLGI9bi52YWxIb29rc1t0aGlzLnR5cGVdfHxuLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJzZXRcImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW4udmFsSG9va3NbZS50eXBlXXx8bi52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwiZ2V0XCJpbiBiJiZ2b2lkIDAhPT0oYz1iLmdldChlLFwidmFsdWVcIikpP2M6KGM9ZS52YWx1ZSxcInN0cmluZ1wiPT10eXBlb2YgYz9jLnJlcGxhY2UoYmMsXCJcIik6bnVsbD09Yz9cIlwiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsXCJ2YWx1ZVwiKTtyZXR1cm4gbnVsbCE9Yj9iOm4udHJpbShuLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZD1hLm9wdGlvbnMsZT1hLnNlbGVjdGVkSW5kZXgsZj1cInNlbGVjdC1vbmVcIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwhKCFjLnNlbGVjdGVkJiZpIT09ZXx8KGsub3B0RGlzYWJsZWQ/Yy5kaXNhYmxlZDpudWxsIT09Yy5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKGI9bihjKS52YWwoKSxmKXJldHVybiBiO2cucHVzaChiKX1yZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPW4ubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1uLmluQXJyYXkoZC52YWx1ZSxmKT49MCkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pLG4uZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KTt2YXIgY2M9bi5ub3coKSxkYz0vXFw/LztuLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5wYXJzZShhK1wiXCIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO3RyeXtjPW5ldyBET01QYXJzZXIsYj1jLnBhcnNlRnJvbVN0cmluZyhhLFwidGV4dC94bWxcIil9Y2F0Y2goZCl7Yj12b2lkIDB9cmV0dXJuKCFifHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoKSYmbi5lcnJvcihcIkludmFsaWQgWE1MOiBcIithKSxifTt2YXIgZWMsZmMsZ2M9LyMuKiQvLGhjPS8oWz8mXSlfPVteJl0qLyxpYz0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLGpjPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLGtjPS9eKD86R0VUfEhFQUQpJC8sbGM9L15cXC9cXC8vLG1jPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLG5jPXt9LG9jPXt9LHBjPVwiKi9cIi5jb25jYXQoXCIqXCIpO3RyeXtmYz1sb2NhdGlvbi5ocmVmfWNhdGNoKHFjKXtmYz1sLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGZjLmhyZWY9XCJcIixmYz1mYy5ocmVmfWVjPW1jLmV4ZWMoZmMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHJjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHNjKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PW9jO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gdGMoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHVjKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIHZjKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOmZjLHR5cGU6XCJHRVRcIixpc0xvY2FsOmpjLnRlc3QoZWNbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOnBjLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpuLnBhcnNlSlNPTixcInRleHQgeG1sXCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/dGModGMoYSxuLmFqYXhTZXR0aW5ncyksYik6dGMobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cmMobmMpLGFqYXhUcmFuc3BvcnQ6cmMob2MpLGFqYXg6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bi5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbT1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bihsKTpuLmV2ZW50LG89bi5EZWZlcnJlZCgpLHA9bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PVwiY2FuY2VsZWRcIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9aWMuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8ZmMpK1wiXCIpLnJlcGxhY2UoZ2MsXCJcIikucmVwbGFjZShsYyxlY1sxXStcIi8vXCIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W1wiXCJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihoPW1jLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFofHxoWzFdPT09ZWNbMV0mJmhbMl09PT1lY1syXSYmKGhbM118fChcImh0dHA6XCI9PT1oWzFdP1wiODBcIjpcIjQ0M1wiKSk9PT0oZWNbM118fChcImh0dHA6XCI9PT1lY1sxXT9cIjgwXCI6XCI0NDNcIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxzYyhuYyxrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1rLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IWtjLnRlc3Qoay50eXBlKSxkPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGQ9ay51cmwrPShkYy50ZXN0KGQpP1wiJlwiOlwiP1wiKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9aGMudGVzdChkKT9kLnJlcGxhY2UoaGMsXCIkMV89XCIrY2MrKyk6ZCsoZGMudGVzdChkKT9cIiZcIjpcIj9cIikrXCJfPVwiK2NjKyspKSxrLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixuLmxhc3RNb2RpZmllZFtkXSksbi5ldGFnW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PWsuZGF0YVR5cGVzWzBdP1wiLCBcIitwYytcIjsgcT0wLjAxXCI6XCJcIik6ay5hY2NlcHRzW1wiKlwiXSk7Zm9yKGogaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihqLGsuaGVhZGVyc1tqXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9XCJhYm9ydFwiO2ZvcihqIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbal0oa1tqXSk7aWYoYz1zYyhvYyxrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGkmJm0udHJpZ2dlcihcImFqYXhTZW5kXCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydChcInRpbWVvdXRcIil9LGsudGltZW91dCkpO3RyeXt0PTEsYy5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHgoYSxiLGYsaCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGM9dm9pZCAwLGU9aHx8XCJcIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dWMoayx2LGYpKSx1PXZjKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG4ubGFzdE1vZGlmaWVkW2RdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG4uZXRhZ1tkXT13KSksMjA0PT09YXx8XCJIRUFEXCI9PT1rLnR5cGU/eD1cIm5vY29udGVudFwiOjMwND09PWE/eD1cIm5vdG1vZGlmaWVkXCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9XCJlcnJvclwiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrXCJcIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaSYmbS50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt2LGtdKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MH0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgd2M9LyUyMC9nLHhjPS9cXFtcXF0kLyx5Yz0vXFxyP1xcbi9nLHpjPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQmMoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8eGMudGVzdChhKT9kKGEsZSk6QmMoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilCYyhhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj9cIlwiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQmMoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIikucmVwbGFjZSh3YyxcIitcIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmQWMudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXpjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFULnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoeWMsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh5YyxcIlxcclxcblwiKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9fTt2YXIgQ2M9MCxEYz17fSxFYz17MDoyMDAsMTIyMzoyMDR9LEZjPW4uYWpheFNldHRpbmdzLnhocigpO2EuQWN0aXZlWE9iamVjdCYmbihhKS5vbihcInVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIERjKURjW2FdKCl9KSxrLmNvcnM9ISFGYyYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIEZjLGsuYWpheD1GYz0hIUZjLG4uYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gay5jb3JzfHxGYyYmIWEuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK0NjO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1tcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihlIGluIGMpZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXSk7Yj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiYoZGVsZXRlIERjW2ddLGI9Zi5vbmxvYWQ9Zi5vbmVycm9yPW51bGwsXCJhYm9ydFwiPT09YT9mLmFib3J0KCk6XCJlcnJvclwiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChFY1tmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCxcInN0cmluZ1wiPT10eXBlb2YgZi5yZXNwb25zZVRleHQ/e3RleHQ6Zi5yZXNwb25zZVRleHR9OnZvaWQgMCxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxmLm9ubG9hZD1iKCksZi5vbmVycm9yPWIoXCJlcnJvclwiKSxiPURjW2ddPWIoXCJhYm9ydFwiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZlKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxsLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEdjPVtdLEhjPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9R2MucG9wKCl8fG4uZXhwYW5kbytcIl9cIitjYysrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihIYy50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJiEoYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmSGMudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShIYyxcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYy50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssR2MucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSWM9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJkljKXJldHVybiBJYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZihcIiBcIik7cmV0dXJuIGg+PTAmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKFwiPGRpdj5cIikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSmM9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gS2MoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW4oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLFwidG9wXCIpLGk9bi5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1LYyhmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09bi5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxuLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGQubGVmdCs9bi5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1uLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SmM7d2hpbGUoYSYmIW4ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1uLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SmN9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9XCJwYWdlWU9mZnNldFwiPT09YztuLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUtjKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YihhLGIpLHZiLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIExjPWEualF1ZXJ5LE1jPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPU1jKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1MYyksbn0sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW4pLG59KTtcclxuXHJcblxyXG4vKipcclxuICogQ29va2llIHBsdWdpblxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDYgS2xhdXMgSGFydGwgKHN0aWxidWVyby5kZSlcclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXM6XHJcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiAqIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbFxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gbmFtZSBhbmQgdmFsdWUgYW5kIG90aGVyIG9wdGlvbmFsIHBhcmFtZXRlcnMuXHJcbiAqXHJcbiAqIEBleGFtcGxlICQuY29va2llKCd0aGVfY29va2llJywgJ3RoZV92YWx1ZScpO1xyXG4gKiBAZGVzYyBTZXQgdGhlIHZhbHVlIG9mIGEgY29va2llLlxyXG4gKiBAZXhhbXBsZSAkLmNvb2tpZSgndGhlX2Nvb2tpZScsICd0aGVfdmFsdWUnLCB7IGV4cGlyZXM6IDcsIHBhdGg6ICcvJywgZG9tYWluOiAnanF1ZXJ5LmNvbScsIHNlY3VyZTogdHJ1ZSB9KTtcclxuICogQGRlc2MgQ3JlYXRlIGEgY29va2llIHdpdGggYWxsIGF2YWlsYWJsZSBvcHRpb25zLlxyXG4gKiBAZXhhbXBsZSAkLmNvb2tpZSgndGhlX2Nvb2tpZScsICd0aGVfdmFsdWUnKTtcclxuICogQGRlc2MgQ3JlYXRlIGEgc2Vzc2lvbiBjb29raWUuXHJcbiAqIEBleGFtcGxlICQuY29va2llKCd0aGVfY29va2llJywgbnVsbCk7XHJcbiAqIEBkZXNjIERlbGV0ZSBhIGNvb2tpZSBieSBwYXNzaW5nIG51bGwgYXMgdmFsdWUuIEtlZXAgaW4gbWluZCB0aGF0IHlvdSBoYXZlIHRvIHVzZSB0aGUgc2FtZSBwYXRoIGFuZCBkb21haW5cclxuICogICAgICAgdXNlZCB3aGVuIHRoZSBjb29raWUgd2FzIHNldC5cclxuICpcclxuICogQHBhcmFtIFN0cmluZyBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb29raWUuXHJcbiAqIEBwYXJhbSBTdHJpbmcgdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBjb29raWUuXHJcbiAqIEBwYXJhbSBPYmplY3Qgb3B0aW9ucyBBbiBvYmplY3QgbGl0ZXJhbCBjb250YWluaW5nIGtleS92YWx1ZSBwYWlycyB0byBwcm92aWRlIG9wdGlvbmFsIGNvb2tpZSBhdHRyaWJ1dGVzLlxyXG4gKiBAb3B0aW9uIE51bWJlcnxEYXRlIGV4cGlyZXMgRWl0aGVyIGFuIGludGVnZXIgc3BlY2lmeWluZyB0aGUgZXhwaXJhdGlvbiBkYXRlIGZyb20gbm93IG9uIGluIGRheXMgb3IgYSBEYXRlIG9iamVjdC5cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIGEgbmVnYXRpdmUgdmFsdWUgaXMgc3BlY2lmaWVkIChlLmcuIGEgZGF0ZSBpbiB0aGUgcGFzdCksIHRoZSBjb29raWUgd2lsbCBiZSBkZWxldGVkLlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgc2V0IHRvIG51bGwgb3Igb21pdHRlZCwgdGhlIGNvb2tpZSB3aWxsIGJlIGEgc2Vzc2lvbiBjb29raWUgYW5kIHdpbGwgbm90IGJlIHJldGFpbmVkXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIHRoZSB0aGUgYnJvd3NlciBleGl0cy5cclxuICogQG9wdGlvbiBTdHJpbmcgcGF0aCBUaGUgdmFsdWUgb2YgdGhlIHBhdGggYXRyaWJ1dGUgb2YgdGhlIGNvb2tpZSAoZGVmYXVsdDogcGF0aCBvZiBwYWdlIHRoYXQgY3JlYXRlZCB0aGUgY29va2llKS5cclxuICogQG9wdGlvbiBTdHJpbmcgZG9tYWluIFRoZSB2YWx1ZSBvZiB0aGUgZG9tYWluIGF0dHJpYnV0ZSBvZiB0aGUgY29va2llIChkZWZhdWx0OiBkb21haW4gb2YgcGFnZSB0aGF0IGNyZWF0ZWQgdGhlIGNvb2tpZSkuXHJcbiAqIEBvcHRpb24gQm9vbGVhbiBzZWN1cmUgSWYgdHJ1ZSwgdGhlIHNlY3VyZSBhdHRyaWJ1dGUgb2YgdGhlIGNvb2tpZSB3aWxsIGJlIHNldCBhbmQgdGhlIGNvb2tpZSB0cmFuc21pc3Npb24gd2lsbFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUgYSBzZWN1cmUgcHJvdG9jb2wgKGxpa2UgSFRUUFMpLlxyXG4gKiBAdHlwZSB1bmRlZmluZWRcclxuICpcclxuICogQG5hbWUgJC5jb29raWVcclxuICogQGNhdCBQbHVnaW5zL0Nvb2tpZVxyXG4gKiBAYXV0aG9yIEtsYXVzIEhhcnRsL2tsYXVzLmhhcnRsQHN0aWxidWVyby5kZVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGEgY29va2llIHdpdGggdGhlIGdpdmVuIG5hbWUuXHJcbiAqXHJcbiAqIEBleGFtcGxlICQuY29va2llKCd0aGVfY29va2llJyk7XHJcbiAqIEBkZXNjIEdldCB0aGUgdmFsdWUgb2YgYSBjb29raWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBTdHJpbmcgbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29va2llLlxyXG4gKiBAcmV0dXJuIFRoZSB2YWx1ZSBvZiB0aGUgY29va2llLlxyXG4gKiBAdHlwZSBTdHJpbmdcclxuICpcclxuICogQG5hbWUgJC5jb29raWVcclxuICogQGNhdCBQbHVnaW5zL0Nvb2tpZVxyXG4gKiBAYXV0aG9yIEtsYXVzIEhhcnRsL2tsYXVzLmhhcnRsQHN0aWxidWVyby5kZVxyXG4gKi9cclxualF1ZXJ5LmNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9ICd1bmRlZmluZWQnKSB7IC8vIG5hbWUgYW5kIHZhbHVlIGdpdmVuLCBzZXQgY29va2llXHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuZXhwaXJlcyA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXhwaXJlcyA9ICcnO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmV4cGlyZXMgJiYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT0gJ251bWJlcicgfHwgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgKG9wdGlvbnMuZXhwaXJlcyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBvcHRpb25zLmV4cGlyZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXhwaXJlcyA9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9VVENTdHJpbmcoKTsgLy8gdXNlIGV4cGlyZXMgYXR0cmlidXRlLCBtYXgtYWdlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSUVcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ0FVVElPTjogTmVlZGVkIHRvIHBhcmVudGhlc2l6ZSBvcHRpb25zLnBhdGggYW5kIG9wdGlvbnMuZG9tYWluXHJcbiAgICAgICAgLy8gaW4gdGhlIGZvbGxvd2luZyBleHByZXNzaW9ucywgb3RoZXJ3aXNlIHRoZXkgZXZhbHVhdGUgdG8gdW5kZWZpbmVkXHJcbiAgICAgICAgLy8gaW4gdGhlIHBhY2tlZCB2ZXJzaW9uIGZvciBzb21lIHJlYXNvbi4uLlxyXG4gICAgICAgIHZhciBwYXRoID0gb3B0aW9ucy5wYXRoID8gJzsgcGF0aD0nICsgKG9wdGlvbnMucGF0aCkgOiAnJztcclxuICAgICAgICB2YXIgZG9tYWluID0gb3B0aW9ucy5kb21haW4gPyAnOyBkb21haW49JyArIChvcHRpb25zLmRvbWFpbikgOiAnJztcclxuICAgICAgICB2YXIgc2VjdXJlID0gb3B0aW9ucy5zZWN1cmUgPyAnOyBzZWN1cmUnIDogJyc7XHJcbiAgICAgICAgdmFyIHNhbWVzaXRlID0gb3B0aW9ucy5zYW1lc2l0ZSA/ICc7IHNhbWVzaXRlPScgKyAob3B0aW9ucy5zYW1lc2l0ZSkgOiAnJztcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBbbmFtZSwgJz0nLCBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSxzYW1lc2l0ZV0uam9pbignJyk7XHJcbiAgICB9IGVsc2UgeyAvLyBvbmx5IG5hbWUgZ2l2ZW4sIGdldCBjb29raWVcclxuICAgICAgICB2YXIgY29va2llVmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5jb29raWUgJiYgZG9jdW1lbnQuY29va2llICE9ICcnKSB7XHJcbiAgICAgICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZSA9IGpRdWVyeS50cmltKGNvb2tpZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gRG9lcyB0aGlzIGNvb2tpZSBzdHJpbmcgYmVnaW4gd2l0aCB0aGUgbmFtZSB3ZSB3YW50P1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvb2tpZS5zdWJzdHJpbmcoMCwgbmFtZS5sZW5ndGggKyAxKSA9PSAobmFtZSArICc9JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb29raWVWYWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKG5hbWUubGVuZ3RoICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb29raWVWYWx1ZTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5cclxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdHZhciBjb29raWVPcHRpb25zID0ge2V4cGlyZXM6IDcsIHBhdGg6ICcvJ307XHJcblx0XHRcclxuXHJcbn0pO1xyXG5cclxuLypcclxuXHJcbiBhcmN0aWNNb2RhbCDvv70galF1ZXJ5IHBsdWdpblxyXG4gVmVyc2lvbjogMC4zXHJcbiBBdXRob3I6IFNlcmdleSBQcmVkdm9kaXRlbGV2IChzZXJnZXkucHJlZHZvZGl0ZWxldkBnbWFpbC5jb20pXHJcbiBDb21wYW55OiBBcmN0aWMgTGFib3JhdG9yeSAoaHR0cDovL2FyY3RpY2xhYi5ydS8pXHJcblxyXG4gRG9jcyAmIEV4YW1wbGVzOiBodHRwOi8vYXJjdGljbGFiLnJ1L2FyY3RpY21vZGFsL1xyXG5cclxuICovXHJcbihmdW5jdGlvbihkKXt2YXIgZz17dHlwZTpcImh0bWxcIixjb250ZW50OlwiXCIsdXJsOlwiXCIsYWpheDp7fSxhamF4X3JlcXVlc3Q6bnVsbCxjbG9zZU9uRXNjOiEwLGNsb3NlT25PdmVybGF5Q2xpY2s6ITAsY2xvbmU6ITEsb3ZlcmxheTp7YmxvY2s6dm9pZCAwLHRwbDonPGRpdiBjbGFzcz1cImFyY3RpY21vZGFsLW92ZXJsYXlcIj48L2Rpdj4nLGNzczp7YmFja2dyb3VuZENvbG9yOlwicmdiYSgwLDAsMCwwLjIpXCJ9fSxjb250YWluZXI6e2Jsb2NrOnZvaWQgMCx0cGw6JzxkaXYgY2xhc3M9XCJhcmN0aWNtb2RhbC1jb250YWluZXJcIj48dGFibGUgY2xhc3M9XCJhcmN0aWNtb2RhbC1jb250YWluZXJfaVwiPjx0cj48dGQgY2xhc3M9XCJhcmN0aWNtb2RhbC1jb250YWluZXJfaTJcIj48L3RkPjwvdHI+PC90YWJsZT48L2Rpdj4nfSx3cmFwOnZvaWQgMCxib2R5OnZvaWQgMCxlcnJvcnM6e3RwbDonPGRpdiBjbGFzcz1cImFyY3RpY21vZGFsLWVycm9yIGFyY3RpY21vZGFsLWNsb3NlXCI+PC9kaXY+JyxhdXRvY2xvc2VfZGVsYXk6MkUzLFxyXG5hamF4X3Vuc3VjY2Vzc2Z1bF9sb2FkOlwiRXJyb3JcIn0sb3BlbkVmZmVjdDp7dHlwZTpcImZhZGVcIixzcGVlZDo0MDB9LGNsb3NlRWZmZWN0Ont0eXBlOlwiZmFkZVwiLHNwZWVkOjQwMH0sYmVmb3JlT3BlbjpkLm5vb3AsYWZ0ZXJPcGVuOmQubm9vcCxiZWZvcmVDbG9zZTpkLm5vb3AsYWZ0ZXJDbG9zZTpkLm5vb3AsYWZ0ZXJMb2FkaW5nOmQubm9vcCxhZnRlckxvYWRpbmdPblNob3c6ZC5ub29wLGVycm9yTG9hZGluZzpkLm5vb3B9LGo9MCxlPWQoW10pLG09e2lzRXZlbnRPdXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMDtkKGEpLmVhY2goZnVuY3Rpb24oKXtkKGIudGFyZ2V0KS5nZXQoMCk9PWQodGhpcykuZ2V0KDApJiYoYz0hMSk7MD09ZChiLnRhcmdldCkuY2xvc2VzdChcIkhUTUxcIixkKHRoaXMpLmdldCgwKSkubGVuZ3RoJiYoYz0hMSl9KTtyZXR1cm4gY319LGY9e2dldFBhcmVudEVsOmZ1bmN0aW9uKGEpe3ZhciBiPWQoYSk7cmV0dXJuIGIuZGF0YShcImFyY3RpY21vZGFsXCIpP2I6KGI9XHJcbmQoYSkuY2xvc2VzdChcIi5hcmN0aWNtb2RhbC1jb250YWluZXJcIikuZGF0YShcImFyY3RpY21vZGFsUGFyZW50RWxcIikpP2I6ITF9LHRyYW5zaXRpb246ZnVuY3Rpb24oYSxiLGMsZSl7ZT12b2lkIDA9PWU/ZC5ub29wOmU7c3dpdGNoKGMudHlwZSl7Y2FzZSBcImZhZGVcIjpcInNob3dcIj09Yj9hLmZhZGVJbihjLnNwZWVkLGUpOmEuZmFkZU91dChjLnNwZWVkLGUpO2JyZWFrO2Nhc2UgXCJub25lXCI6XCJzaG93XCI9PWI/YS5zaG93KCk6YS5oaWRlKCksZSgpfX0scHJlcGFyZV9ib2R5OmZ1bmN0aW9uKGEsYil7ZChcIi5hcmN0aWNtb2RhbC1jbG9zZVwiLGEuYm9keSkudW5iaW5kKFwiY2xpY2suYXJjdGljbW9kYWxcIikuYmluZChcImNsaWNrLmFyY3RpY21vZGFsXCIsZnVuY3Rpb24oKXtiLmFyY3RpY21vZGFsKFwiY2xvc2VcIik7cmV0dXJuITF9KX0saW5pdF9lbDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZGF0YShcImFyY3RpY21vZGFsXCIpO2lmKCFjKXtjPWI7aisrO2MubW9kYWxJRD1qO2Mub3ZlcmxheS5ibG9jaz1cclxuZChjLm92ZXJsYXkudHBsKTtjLm92ZXJsYXkuYmxvY2suY3NzKGMub3ZlcmxheS5jc3MpO2MuY29udGFpbmVyLmJsb2NrPWQoYy5jb250YWluZXIudHBsKTtjLmJvZHk9ZChcIi5hcmN0aWNtb2RhbC1jb250YWluZXJfaTJcIixjLmNvbnRhaW5lci5ibG9jayk7Yi5jbG9uZT9jLmJvZHkuaHRtbChhLmNsb25lKCEwKSk6KGEuYmVmb3JlKCc8ZGl2IGlkPVwiYXJjdGljbW9kYWxSZXNlcnZlJytjLm1vZGFsSUQrJ1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZVwiIC8+JyksYy5ib2R5Lmh0bWwoYSkpO2YucHJlcGFyZV9ib2R5KGMsYSk7Yy5jbG9zZU9uT3ZlcmxheUNsaWNrJiZjLm92ZXJsYXkuYmxvY2suYWRkKGMuY29udGFpbmVyLmJsb2NrKS5jbGljayhmdW5jdGlvbihiKXttLmlzRXZlbnRPdXQoZChcIj4qXCIsYy5ib2R5KSxiKSYmYS5hcmN0aWNtb2RhbChcImNsb3NlXCIpfSk7Yy5jb250YWluZXIuYmxvY2suZGF0YShcImFyY3RpY21vZGFsUGFyZW50RWxcIixhKTthLmRhdGEoXCJhcmN0aWNtb2RhbFwiLGMpO1xyXG5lPWQubWVyZ2UoZSxhKTtkLnByb3h5KGguc2hvdyxhKSgpO2lmKFwiaHRtbFwiPT1jLnR5cGUpcmV0dXJuIGE7aWYodm9pZCAwIT1jLmFqYXguYmVmb3JlU2VuZCl7dmFyIGs9Yy5hamF4LmJlZm9yZVNlbmQ7ZGVsZXRlIGMuYWpheC5iZWZvcmVTZW5kfWlmKHZvaWQgMCE9Yy5hamF4LnN1Y2Nlc3Mpe3ZhciBnPWMuYWpheC5zdWNjZXNzO2RlbGV0ZSBjLmFqYXguc3VjY2Vzc31pZih2b2lkIDAhPWMuYWpheC5lcnJvcil7dmFyIGw9Yy5hamF4LmVycm9yO2RlbGV0ZSBjLmFqYXguZXJyb3J9dmFyIG49ZC5leHRlbmQoITAse3VybDpjLnVybCxiZWZvcmVTZW5kOmZ1bmN0aW9uKCl7dm9pZCAwPT1rP2MuYm9keS5odG1sKCc8ZGl2IGNsYXNzPVwiYXJjdGljbW9kYWwtbG9hZGluZ1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lIGJfbG9hZGluZ19jaXJjbGVfZGVsYXllZFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpOmsoYyxhKX0sc3VjY2VzczpmdW5jdGlvbihiKXthLnRyaWdnZXIoXCJhZnRlckxvYWRpbmdcIik7Yy5hZnRlckxvYWRpbmcoYyxhLGIpO3ZvaWQgMD09Zz9jLmJvZHkuaHRtbChiKTpnKGMsYSxiKTtmLnByZXBhcmVfYm9keShjLFxyXG5hKTthLnRyaWdnZXIoXCJhZnRlckxvYWRpbmdPblNob3dcIik7Yy5hZnRlckxvYWRpbmdPblNob3coYyxhLGIpfSxlcnJvcjpmdW5jdGlvbigpe2EudHJpZ2dlcihcImVycm9yTG9hZGluZ1wiKTtjLmVycm9yTG9hZGluZyhjLGEpO3ZvaWQgMD09bD8oYy5ib2R5Lmh0bWwoYy5lcnJvcnMudHBsKSxkKFwiLmFyY3RpY21vZGFsLWVycm9yXCIsYy5ib2R5KS5odG1sKGMuZXJyb3JzLmFqYXhfdW5zdWNjZXNzZnVsX2xvYWQpLGQoXCIuYXJjdGljbW9kYWwtY2xvc2VcIixjLmJvZHkpLmNsaWNrKGZ1bmN0aW9uKCl7YS5hcmN0aWNtb2RhbChcImNsb3NlXCIpO3JldHVybiExfSksYy5lcnJvcnMuYXV0b2Nsb3NlX2RlbGF5JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5hcmN0aWNtb2RhbChcImNsb3NlXCIpfSxjLmVycm9ycy5hdXRvY2xvc2VfZGVsYXkpKTpsKGMsYSl9fSxjLmFqYXgpO2MuYWpheF9yZXF1ZXN0PWQuYWpheChuKTthLmRhdGEoXCJhcmN0aWNtb2RhbFwiLGMpfX0saW5pdDpmdW5jdGlvbihhKXthPVxyXG5kLmV4dGVuZCghMCx7fSxnLGEpO2lmKGQuaXNGdW5jdGlvbih0aGlzKSlpZih2b2lkIDA9PWEpZC5lcnJvcihcImpxdWVyeS5hcmN0aWNtb2RhbDogVW5jb3JyZWN0IHBhcmFtZXRlcnNcIik7ZWxzZSBpZihcIlwiPT1hLnR5cGUpZC5lcnJvcignanF1ZXJ5LmFyY3RpY21vZGFsOiBEb25cXCd0IHNldCBwYXJhbWV0ZXIgXCJ0eXBlXCInKTtlbHNlIHN3aXRjaChhLnR5cGUpe2Nhc2UgXCJodG1sXCI6aWYoXCJcIj09YS5jb250ZW50KXtkLmVycm9yKCdqcXVlcnkuYXJjdGljbW9kYWw6IERvblxcJ3Qgc2V0IHBhcmFtZXRlciBcImNvbnRlbnRcIicpO2JyZWFrfXZhciBiPWEuY29udGVudDthLmNvbnRlbnQ9XCJcIjtyZXR1cm4gZi5pbml0X2VsKGQoYiksYSk7Y2FzZSBcImFqYXhcIjppZihcIlwiPT1hLnVybCl7ZC5lcnJvcignanF1ZXJ5LmFyY3RpY21vZGFsOiBEb25cXCd0IHNldCBwYXJhbWV0ZXIgXCJ1cmxcIicpO2JyZWFrfXJldHVybiBmLmluaXRfZWwoZChcIjxkaXYgLz5cIiksYSl9ZWxzZSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zi5pbml0X2VsKGQodGhpcyksXHJcbmQuZXh0ZW5kKCEwLHt9LGEpKX0pfX0saD17c2hvdzpmdW5jdGlvbigpe3ZhciBhPWYuZ2V0UGFyZW50RWwodGhpcyk7aWYoITE9PT1hKWQuZXJyb3IoXCJqcXVlcnkuYXJjdGljbW9kYWw6IFVuY29ycmVjdCBjYWxsXCIpO2Vsc2V7dmFyIGI9YS5kYXRhKFwiYXJjdGljbW9kYWxcIik7Yi5vdmVybGF5LmJsb2NrLmhpZGUoKTtiLmNvbnRhaW5lci5ibG9jay5oaWRlKCk7ZChcIkJPRFlcIikuYXBwZW5kKGIub3ZlcmxheS5ibG9jayk7ZChcIkJPRFlcIikuYXBwZW5kKGIuY29udGFpbmVyLmJsb2NrKTtiLmJlZm9yZU9wZW4oYixhKTthLnRyaWdnZXIoXCJiZWZvcmVPcGVuXCIpO2lmKFwiaGlkZGVuXCIhPWIud3JhcC5jc3MoXCJvdmVyZmxvd1wiKSl7Yi53cmFwLmRhdGEoXCJhcmN0aWNtb2RhbE92ZXJmbG93XCIsYi53cmFwLmNzcyhcIm92ZXJmbG93XCIpKTt2YXIgYz1iLndyYXAub3V0ZXJXaWR0aCghMCk7Yi53cmFwLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIik7dmFyIGc9Yi53cmFwLm91dGVyV2lkdGgoITApO2chPVxyXG5jJiZiLndyYXAuY3NzKFwibWFyZ2luUmlnaHRcIixnLWMrXCJweFwiKX1lLm5vdChhKS5lYWNoKGZ1bmN0aW9uKCl7ZCh0aGlzKS5kYXRhKFwiYXJjdGljbW9kYWxcIikub3ZlcmxheS5ibG9jay5oaWRlKCl9KTtmLnRyYW5zaXRpb24oYi5vdmVybGF5LmJsb2NrLFwic2hvd1wiLDE8ZS5sZW5ndGg/e3R5cGU6XCJub25lXCJ9OmIub3BlbkVmZmVjdCk7Zi50cmFuc2l0aW9uKGIuY29udGFpbmVyLmJsb2NrLFwic2hvd1wiLDE8ZS5sZW5ndGg/e3R5cGU6XCJub25lXCJ9OmIub3BlbkVmZmVjdCxmdW5jdGlvbigpe2IuYWZ0ZXJPcGVuKGIsYSk7YS50cmlnZ2VyKFwiYWZ0ZXJPcGVuXCIpfSk7cmV0dXJuIGF9fSxjbG9zZTpmdW5jdGlvbigpe2lmKGQuaXNGdW5jdGlvbih0aGlzKSllLmVhY2goZnVuY3Rpb24oKXtkKHRoaXMpLmFyY3RpY21vZGFsKFwiY2xvc2VcIil9KTtlbHNlIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1mLmdldFBhcmVudEVsKHRoaXMpO2lmKCExPT09YSlkLmVycm9yKFwianF1ZXJ5LmFyY3RpY21vZGFsOiBVbmNvcnJlY3QgY2FsbFwiKTtcclxuZWxzZXt2YXIgYj1hLmRhdGEoXCJhcmN0aWNtb2RhbFwiKTshMSE9PWIuYmVmb3JlQ2xvc2UoYixhKSYmKGEudHJpZ2dlcihcImJlZm9yZUNsb3NlXCIpLGUubm90KGEpLmxhc3QoKS5lYWNoKGZ1bmN0aW9uKCl7ZCh0aGlzKS5kYXRhKFwiYXJjdGljbW9kYWxcIikub3ZlcmxheS5ibG9jay5zaG93KCl9KSxmLnRyYW5zaXRpb24oYi5vdmVybGF5LmJsb2NrLFwiaGlkZVwiLDE8ZS5sZW5ndGg/e3R5cGU6XCJub25lXCJ9OmIuY2xvc2VFZmZlY3QpLGYudHJhbnNpdGlvbihiLmNvbnRhaW5lci5ibG9jayxcImhpZGVcIiwxPGUubGVuZ3RoP3t0eXBlOlwibm9uZVwifTpiLmNsb3NlRWZmZWN0LGZ1bmN0aW9uKCl7Yi5hZnRlckNsb3NlKGIsYSk7YS50cmlnZ2VyKFwiYWZ0ZXJDbG9zZVwiKTtiLmNsb25lfHxkKFwiI2FyY3RpY21vZGFsUmVzZXJ2ZVwiK2IubW9kYWxJRCkucmVwbGFjZVdpdGgoYi5ib2R5LmZpbmQoXCI+KlwiKSk7Yi5vdmVybGF5LmJsb2NrLnJlbW92ZSgpO2IuY29udGFpbmVyLmJsb2NrLnJlbW92ZSgpO2EuZGF0YShcImFyY3RpY21vZGFsXCIsXHJcbm51bGwpO2QoXCIuYXJjdGljbW9kYWwtY29udGFpbmVyXCIpLmxlbmd0aHx8KGIud3JhcC5kYXRhKFwiYXJjdGljbW9kYWxPdmVyZmxvd1wiKSYmYi53cmFwLmNzcyhcIm92ZXJmbG93XCIsYi53cmFwLmRhdGEoXCJhcmN0aWNtb2RhbE92ZXJmbG93XCIpKSxiLndyYXAuY3NzKFwibWFyZ2luUmlnaHRcIiwwKSl9KSxcImFqYXhcIj09Yi50eXBlJiZiLmFqYXhfcmVxdWVzdC5hYm9ydCgpLGU9ZS5ub3QoYSkpfX0pfSxzZXREZWZhdWx0OmZ1bmN0aW9uKGEpe2QuZXh0ZW5kKCEwLGcsYSl9fTtkKGZ1bmN0aW9uKCl7Zy53cmFwPWQoZG9jdW1lbnQuYWxsJiYhZG9jdW1lbnQucXVlcnlTZWxlY3Rvcj9cImh0bWxcIjpcImJvZHlcIil9KTtkKGRvY3VtZW50KS5iaW5kKFwia2V5dXAuYXJjdGljbW9kYWxcIixmdW5jdGlvbihhKXt2YXIgYj1lLmxhc3QoKTtiLmxlbmd0aCYmYi5kYXRhKFwiYXJjdGljbW9kYWxcIikuY2xvc2VPbkVzYyYmMjc9PT1hLmtleUNvZGUmJmIuYXJjdGljbW9kYWwoXCJjbG9zZVwiKX0pO2QuYXJjdGljbW9kYWw9XHJcbmQuZm4uYXJjdGljbW9kYWw9ZnVuY3Rpb24oYSl7aWYoaFthXSlyZXR1cm4gaFthXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7aWYoXCJvYmplY3RcIj09PXR5cGVvZiBhfHwhYSlyZXR1cm4gZi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkLmVycm9yKFwianF1ZXJ5LmFyY3RpY21vZGFsOiBNZXRob2QgXCIrYStcIiBkb2VzIG5vdCBleGlzdFwiKX19KShqUXVlcnkpO1xyXG5cclxuLyohIGpRdWVyeSBDb2xvciB2QDIuMS4wIGh0dHA6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktY29sb3IgfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gbShhLGIsYyl7dmFyIGQ9aFtiLnR5cGVdfHx7fTtyZXR1cm4gYT09bnVsbD9jfHwhYi5kZWY/bnVsbDpiLmRlZjooYT1kLmZsb29yP35+YTpwYXJzZUZsb2F0KGEpLGlzTmFOKGEpP2IuZGVmOmQubW9kPyhhK2QubW9kKSVkLm1vZDowPmE/MDpkLm1heDxhP2QubWF4OmEpfWZ1bmN0aW9uIG4oYil7dmFyIGM9ZigpLGQ9Yy5fcmdiYT1bXTtyZXR1cm4gYj1iLnRvTG93ZXJDYXNlKCksbChlLGZ1bmN0aW9uKGEsZSl7dmFyIGYsaD1lLnJlLmV4ZWMoYiksaT1oJiZlLnBhcnNlKGgpLGo9ZS5zcGFjZXx8XCJyZ2JhXCI7aWYoaSlyZXR1cm4gZj1jW2pdKGkpLGNbZ1tqXS5jYWNoZV09ZltnW2pdLmNhY2hlXSxkPWMuX3JnYmE9Zi5fcmdiYSwhMX0pLGQubGVuZ3RoPyhkLmpvaW4oKT09PVwiMCwwLDAsMFwiJiZhLmV4dGVuZChkLGsudHJhbnNwYXJlbnQpLGMpOmtbYl19ZnVuY3Rpb24gbyhhLGIsYyl7cmV0dXJuIGM9KGMrMSklMSxjKjY8MT9hKyhiLWEpKmMqNjpjKjI8MT9iOmMqMzwyP2ErKGItYSkqKDIvMy1jKSo2OmF9dmFyIGM9XCJiYWNrZ3JvdW5kQ29sb3IgYm9yZGVyQm90dG9tQ29sb3IgYm9yZGVyTGVmdENvbG9yIGJvcmRlclJpZ2h0Q29sb3IgYm9yZGVyVG9wQ29sb3IgY29sb3IgY29sdW1uUnVsZUNvbG9yIG91dGxpbmVDb2xvciB0ZXh0RGVjb3JhdGlvbkNvbG9yIHRleHRFbXBoYXNpc0NvbG9yXCIsZD0vXihbXFwtK10pPVxccyooXFxkK1xcLj9cXGQqKS8sZT1be3JlOi9yZ2JhP1xcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqKD86LFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVyblthWzFdLGFbMl0sYVszXSxhWzRdXX19LHtyZTovcmdiYT9cXChcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKig/OixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm5bYVsxXSoyLjU1LGFbMl0qMi41NSxhWzNdKjIuNTUsYVs0XV19fSx7cmU6LyMoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkvLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybltwYXJzZUludChhWzFdLDE2KSxwYXJzZUludChhWzJdLDE2KSxwYXJzZUludChhWzNdLDE2KV19fSx7cmU6LyMoW2EtZjAtOV0pKFthLWYwLTldKShbYS1mMC05XSkvLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybltwYXJzZUludChhWzFdK2FbMV0sMTYpLHBhcnNlSW50KGFbMl0rYVsyXSwxNikscGFyc2VJbnQoYVszXSthWzNdLDE2KV19fSx7cmU6L2hzbGE/XFwoXFxzKihcXGQrKD86XFwuXFxkKyk/KVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyooPzosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxccyopP1xcKS8sc3BhY2U6XCJoc2xhXCIscGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuW2FbMV0sYVsyXS8xMDAsYVszXS8xMDAsYVs0XV19fV0sZj1hLkNvbG9yPWZ1bmN0aW9uKGIsYyxkLGUpe3JldHVybiBuZXcgYS5Db2xvci5mbi5wYXJzZShiLGMsZCxlKX0sZz17cmdiYTp7cHJvcHM6e3JlZDp7aWR4OjAsdHlwZTpcImJ5dGVcIn0sZ3JlZW46e2lkeDoxLHR5cGU6XCJieXRlXCJ9LGJsdWU6e2lkeDoyLHR5cGU6XCJieXRlXCJ9fX0saHNsYTp7cHJvcHM6e2h1ZTp7aWR4OjAsdHlwZTpcImRlZ3JlZXNcIn0sc2F0dXJhdGlvbjp7aWR4OjEsdHlwZTpcInBlcmNlbnRcIn0sbGlnaHRuZXNzOntpZHg6Mix0eXBlOlwicGVyY2VudFwifX19fSxoPXtcImJ5dGVcIjp7Zmxvb3I6ITAsbWF4OjI1NX0scGVyY2VudDp7bWF4OjF9LGRlZ3JlZXM6e21vZDozNjAsZmxvb3I6ITB9fSxpPWYuc3VwcG9ydD17fSxqPWEoXCI8cD5cIilbMF0sayxsPWEuZWFjaDtqLnN0eWxlLmNzc1RleHQ9XCJiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMSwxLDEsLjUpXCIsaS5yZ2JhPWouc3R5bGUuYmFja2dyb3VuZENvbG9yLmluZGV4T2YoXCJyZ2JhXCIpPi0xLGwoZyxmdW5jdGlvbihhLGIpe2IuY2FjaGU9XCJfXCIrYSxiLnByb3BzLmFscGhhPXtpZHg6Myx0eXBlOlwicGVyY2VudFwiLGRlZjoxfX0pLGYuZm49YS5leHRlbmQoZi5wcm90b3R5cGUse3BhcnNlOmZ1bmN0aW9uKGMsZCxlLGgpe2lmKGM9PT1iKXJldHVybiB0aGlzLl9yZ2JhPVtudWxsLG51bGwsbnVsbCxudWxsXSx0aGlzO2lmKGMuanF1ZXJ5fHxjLm5vZGVUeXBlKWM9YShjKS5jc3MoZCksZD1iO3ZhciBpPXRoaXMsaj1hLnR5cGUoYyksbz10aGlzLl9yZ2JhPVtdLHA7ZCE9PWImJihjPVtjLGQsZSxoXSxqPVwiYXJyYXlcIik7aWYoaj09PVwic3RyaW5nXCIpcmV0dXJuIHRoaXMucGFyc2UobihjKXx8ay5fZGVmYXVsdCk7aWYoaj09PVwiYXJyYXlcIilyZXR1cm4gbChnLnJnYmEucHJvcHMsZnVuY3Rpb24oYSxiKXtvW2IuaWR4XT1tKGNbYi5pZHhdLGIpfSksdGhpcztpZihqPT09XCJvYmplY3RcIilyZXR1cm4gYyBpbnN0YW5jZW9mIGY/bChnLGZ1bmN0aW9uKGEsYil7Y1tiLmNhY2hlXSYmKGlbYi5jYWNoZV09Y1tiLmNhY2hlXS5zbGljZSgpKX0pOmwoZyxmdW5jdGlvbihiLGQpe3ZhciBlPWQuY2FjaGU7bChkLnByb3BzLGZ1bmN0aW9uKGEsYil7aWYoIWlbZV0mJmQudG8pe2lmKGE9PT1cImFscGhhXCJ8fGNbYV09PW51bGwpcmV0dXJuO2lbZV09ZC50byhpLl9yZ2JhKX1pW2VdW2IuaWR4XT1tKGNbYV0sYiwhMCl9KSxpW2VdJiZhLmluQXJyYXkobnVsbCxpW2VdLnNsaWNlKDAsMykpPDAmJihpW2VdWzNdPTEsZC5mcm9tJiYoaS5fcmdiYT1kLmZyb20oaVtlXSkpKX0pLHRoaXN9LGlzOmZ1bmN0aW9uKGEpe3ZhciBiPWYoYSksYz0hMCxkPXRoaXM7cmV0dXJuIGwoZyxmdW5jdGlvbihhLGUpe3ZhciBmLGc9YltlLmNhY2hlXTtyZXR1cm4gZyYmKGY9ZFtlLmNhY2hlXXx8ZS50byYmZS50byhkLl9yZ2JhKXx8W10sbChlLnByb3BzLGZ1bmN0aW9uKGEsYil7aWYoZ1tiLmlkeF0hPW51bGwpcmV0dXJuIGM9Z1tiLmlkeF09PT1mW2IuaWR4XSxjfSkpLGN9KSxjfSxfc3BhY2U6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXM7cmV0dXJuIGwoZyxmdW5jdGlvbihjLGQpe2JbZC5jYWNoZV0mJmEucHVzaChjKX0pLGEucG9wKCl9LHRyYW5zaXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1mKGEpLGQ9Yy5fc3BhY2UoKSxlPWdbZF0saT10aGlzLmFscGhhKCk9PT0wP2YoXCJ0cmFuc3BhcmVudFwiKTp0aGlzLGo9aVtlLmNhY2hlXXx8ZS50byhpLl9yZ2JhKSxrPWouc2xpY2UoKTtyZXR1cm4gYz1jW2UuY2FjaGVdLGwoZS5wcm9wcyxmdW5jdGlvbihhLGQpe3ZhciBlPWQuaWR4LGY9altlXSxnPWNbZV0saT1oW2QudHlwZV18fHt9O2lmKGc9PT1udWxsKXJldHVybjtmPT09bnVsbD9rW2VdPWc6KGkubW9kJiYoZy1mPmkubW9kLzI/Zis9aS5tb2Q6Zi1nPmkubW9kLzImJihmLT1pLm1vZCkpLGtbZV09bSgoZy1mKSpiK2YsZCkpfSksdGhpc1tkXShrKX0sYmxlbmQ6ZnVuY3Rpb24oYil7aWYodGhpcy5fcmdiYVszXT09PTEpcmV0dXJuIHRoaXM7dmFyIGM9dGhpcy5fcmdiYS5zbGljZSgpLGQ9Yy5wb3AoKSxlPWYoYikuX3JnYmE7cmV0dXJuIGYoYS5tYXAoYyxmdW5jdGlvbihhLGIpe3JldHVybigxLWQpKmVbYl0rZCphfSkpfSx0b1JnYmFTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYj1cInJnYmEoXCIsYz1hLm1hcCh0aGlzLl9yZ2JhLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PW51bGw/Yj4yPzE6MDphfSk7cmV0dXJuIGNbM109PT0xJiYoYy5wb3AoKSxiPVwicmdiKFwiKSxiK2Muam9pbigpK1wiKVwifSx0b0hzbGFTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYj1cImhzbGEoXCIsYz1hLm1hcCh0aGlzLmhzbGEoKSxmdW5jdGlvbihhLGIpe3JldHVybiBhPT1udWxsJiYoYT1iPjI/MTowKSxiJiZiPDMmJihhPU1hdGgucm91bmQoYSoxMDApK1wiJVwiKSxhfSk7cmV0dXJuIGNbM109PT0xJiYoYy5wb3AoKSxiPVwiaHNsKFwiKSxiK2Muam9pbigpK1wiKVwifSx0b0hleFN0cmluZzpmdW5jdGlvbihiKXt2YXIgYz10aGlzLl9yZ2JhLnNsaWNlKCksZD1jLnBvcCgpO3JldHVybiBiJiZjLnB1c2gofn4oZCoyNTUpKSxcIiNcIithLm1hcChjLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9KGF8fDApLnRvU3RyaW5nKDE2KSxhLmxlbmd0aD09PTE/XCIwXCIrYTphfSkuam9pbihcIlwiKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmdiYVszXT09PTA/XCJ0cmFuc3BhcmVudFwiOnRoaXMudG9SZ2JhU3RyaW5nKCl9fSksZi5mbi5wYXJzZS5wcm90b3R5cGU9Zi5mbixnLmhzbGEudG89ZnVuY3Rpb24oYSl7aWYoYVswXT09bnVsbHx8YVsxXT09bnVsbHx8YVsyXT09bnVsbClyZXR1cm5bbnVsbCxudWxsLG51bGwsYVszXV07dmFyIGI9YVswXS8yNTUsYz1hWzFdLzI1NSxkPWFbMl0vMjU1LGU9YVszXSxmPU1hdGgubWF4KGIsYyxkKSxnPU1hdGgubWluKGIsYyxkKSxoPWYtZyxpPWYrZyxqPWkqLjUsayxsO3JldHVybiBnPT09Zj9rPTA6Yj09PWY/az02MCooYy1kKS9oKzM2MDpjPT09Zj9rPTYwKihkLWIpL2grMTIwOms9NjAqKGItYykvaCsyNDAsaj09PTB8fGo9PT0xP2w9ajpqPD0uNT9sPWgvaTpsPWgvKDItaSksW01hdGgucm91bmQoayklMzYwLGwsaixlPT1udWxsPzE6ZV19LGcuaHNsYS5mcm9tPWZ1bmN0aW9uKGEpe2lmKGFbMF09PW51bGx8fGFbMV09PW51bGx8fGFbMl09PW51bGwpcmV0dXJuW251bGwsbnVsbCxudWxsLGFbM11dO3ZhciBiPWFbMF0vMzYwLGM9YVsxXSxkPWFbMl0sZT1hWzNdLGY9ZDw9LjU/ZCooMStjKTpkK2MtZCpjLGc9MipkLWYsaCxpLGo7cmV0dXJuW01hdGgucm91bmQobyhnLGYsYisxLzMpKjI1NSksTWF0aC5yb3VuZChvKGcsZixiKSoyNTUpLE1hdGgucm91bmQobyhnLGYsYi0xLzMpKjI1NSksZV19LGwoZyxmdW5jdGlvbihjLGUpe3ZhciBnPWUucHJvcHMsaD1lLmNhY2hlLGk9ZS50byxqPWUuZnJvbTtmLmZuW2NdPWZ1bmN0aW9uKGMpe2kmJiF0aGlzW2hdJiYodGhpc1toXT1pKHRoaXMuX3JnYmEpKTtpZihjPT09YilyZXR1cm4gdGhpc1toXS5zbGljZSgpO3ZhciBkLGU9YS50eXBlKGMpLGs9ZT09PVwiYXJyYXlcInx8ZT09PVwib2JqZWN0XCI/Yzphcmd1bWVudHMsbj10aGlzW2hdLnNsaWNlKCk7cmV0dXJuIGwoZyxmdW5jdGlvbihhLGIpe3ZhciBjPWtbZT09PVwib2JqZWN0XCI/YTpiLmlkeF07Yz09bnVsbCYmKGM9bltiLmlkeF0pLG5bYi5pZHhdPW0oYyxiKX0pLGo/KGQ9ZihqKG4pKSxkW2hdPW4sZCk6ZihuKX0sbChnLGZ1bmN0aW9uKGIsZSl7aWYoZi5mbltiXSlyZXR1cm47Zi5mbltiXT1mdW5jdGlvbihmKXt2YXIgZz1hLnR5cGUoZiksaD1iPT09XCJhbHBoYVwiP3RoaXMuX2hzbGE/XCJoc2xhXCI6XCJyZ2JhXCI6YyxpPXRoaXNbaF0oKSxqPWlbZS5pZHhdLGs7cmV0dXJuIGc9PT1cInVuZGVmaW5lZFwiP2o6KGc9PT1cImZ1bmN0aW9uXCImJihmPWYuY2FsbCh0aGlzLGopLGc9YS50eXBlKGYpKSxmPT1udWxsJiZlLmVtcHR5P3RoaXM6KGc9PT1cInN0cmluZ1wiJiYoaz1kLmV4ZWMoZiksayYmKGY9aitwYXJzZUZsb2F0KGtbMl0pKihrWzFdPT09XCIrXCI/MTotMSkpKSxpW2UuaWR4XT1mLHRoaXNbaF0oaSkpKX19KX0pLGYuaG9vaz1mdW5jdGlvbihiKXt2YXIgYz1iLnNwbGl0KFwiIFwiKTtsKGMsZnVuY3Rpb24oYixjKXthLmNzc0hvb2tzW2NdPXtzZXQ6ZnVuY3Rpb24oYixkKXt2YXIgZSxnLGg9XCJcIjtpZihhLnR5cGUoZCkhPT1cInN0cmluZ1wifHwoZT1uKGQpKSl7ZD1mKGV8fGQpO2lmKCFpLnJnYmEmJmQuX3JnYmFbM10hPT0xKXtnPWM9PT1cImJhY2tncm91bmRDb2xvclwiP2IucGFyZW50Tm9kZTpiO3doaWxlKChoPT09XCJcInx8aD09PVwidHJhbnNwYXJlbnRcIikmJmcmJmcuc3R5bGUpdHJ5e2g9YS5jc3MoZyxcImJhY2tncm91bmRDb2xvclwiKSxnPWcucGFyZW50Tm9kZX1jYXRjaChqKXt9ZD1kLmJsZW5kKGgmJmghPT1cInRyYW5zcGFyZW50XCI/aDpcIl9kZWZhdWx0XCIpfWQ9ZC50b1JnYmFTdHJpbmcoKX10cnl7Yi5zdHlsZVtjXT1kfWNhdGNoKGQpe319fSxhLmZ4LnN0ZXBbY109ZnVuY3Rpb24oYil7Yi5jb2xvckluaXR8fChiLnN0YXJ0PWYoYi5lbGVtLGMpLGIuZW5kPWYoYi5lbmQpLGIuY29sb3JJbml0PSEwKSxhLmNzc0hvb2tzW2NdLnNldChiLmVsZW0sYi5zdGFydC50cmFuc2l0aW9uKGIuZW5kLGIucG9zKSl9fSl9LGYuaG9vayhjKSxhLmNzc0hvb2tzLmJvcmRlckNvbG9yPXtleHBhbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIGwoW1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGZ1bmN0aW9uKGMsZCl7YltcImJvcmRlclwiK2QrXCJDb2xvclwiXT1hfSksYn19LGs9YS5Db2xvci5uYW1lcz17YXF1YTpcIiMwMGZmZmZcIixibGFjazpcIiMwMDAwMDBcIixibHVlOlwiIzAwMDBmZlwiLGZ1Y2hzaWE6XCIjZmYwMGZmXCIsZ3JheTpcIiM4MDgwODBcIixncmVlbjpcIiMwMDgwMDBcIixsaW1lOlwiIzAwZmYwMFwiLG1hcm9vbjpcIiM4MDAwMDBcIixuYXZ5OlwiIzAwMDA4MFwiLG9saXZlOlwiIzgwODAwMFwiLHB1cnBsZTpcIiM4MDAwODBcIixyZWQ6XCIjZmYwMDAwXCIsc2lsdmVyOlwiI2MwYzBjMFwiLHRlYWw6XCIjMDA4MDgwXCIsd2hpdGU6XCIjZmZmZmZmXCIseWVsbG93OlwiI2ZmZmYwMFwiLHRyYW5zcGFyZW50OltudWxsLG51bGwsbnVsbCwwXSxfZGVmYXVsdDpcIiNmZmZmZmZcIn19KShqUXVlcnkpO1xyXG5cclxuXHJcbi8qXHJcbiAgICBqUXVlcnkgTWFza2VkIElucHV0IFBsdWdpblxyXG4gICAgQ29weXJpZ2h0IChjKSAyMDA3IC0gMjAxNSBKb3NoIEJ1c2ggKGRpZ2l0YWxidXNoLmNvbSlcclxuICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAoaHR0cDovL2RpZ2l0YWxidXNoLmNvbS9wcm9qZWN0cy9tYXNrZWQtaW5wdXQtcGx1Z2luLyNsaWNlbnNlKVxyXG4gICAgVmVyc2lvbjogMS40LjFcclxuKi9cclxuIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOmEoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/cmVxdWlyZShcImpxdWVyeVwiKTpqUXVlcnkpfShmdW5jdGlvbihhKXt2YXIgYixjPW5hdmlnYXRvci51c2VyQWdlbnQsZD0vaXBob25lL2kudGVzdChjKSxlPS9jaHJvbWUvaS50ZXN0KGMpLGY9L2FuZHJvaWQvaS50ZXN0KGMpO2EubWFzaz17ZGVmaW5pdGlvbnM6ezk6XCJbMC05XVwiLGE6XCJbQS1aYS16XVwiLFwiKlwiOlwiW0EtWmEtejAtOV1cIn0sYXV0b2NsZWFyOiEwLGRhdGFOYW1lOlwicmF3TWFza0ZuXCIscGxhY2Vob2xkZXI6XCJfXCJ9LGEuZm4uZXh0ZW5kKHtjYXJldDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKDAhPT10aGlzLmxlbmd0aCYmIXRoaXMuaXMoXCI6aGlkZGVuXCIpKXJldHVyblwibnVtYmVyXCI9PXR5cGVvZiBhPyhiPVwibnVtYmVyXCI9PXR5cGVvZiBiP2I6YSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNldFNlbGVjdGlvblJhbmdlP3RoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoYSxiKTp0aGlzLmNyZWF0ZVRleHRSYW5nZSYmKGM9dGhpcy5jcmVhdGVUZXh0UmFuZ2UoKSxjLmNvbGxhcHNlKCEwKSxjLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIixiKSxjLm1vdmVTdGFydChcImNoYXJhY3RlclwiLGEpLGMuc2VsZWN0KCkpfSkpOih0aGlzWzBdLnNldFNlbGVjdGlvblJhbmdlPyhhPXRoaXNbMF0uc2VsZWN0aW9uU3RhcnQsYj10aGlzWzBdLnNlbGVjdGlvbkVuZCk6ZG9jdW1lbnQuc2VsZWN0aW9uJiZkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UmJihjPWRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLGE9MC1jLmR1cGxpY2F0ZSgpLm1vdmVTdGFydChcImNoYXJhY3RlclwiLC0xZTUpLGI9YStjLnRleHQubGVuZ3RoKSx7YmVnaW46YSxlbmQ6Yn0pfSx1bm1hc2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlnZ2VyKFwidW5tYXNrXCIpfSxtYXNrOmZ1bmN0aW9uKGMsZyl7dmFyIGgsaSxqLGssbCxtLG4sbztpZighYyYmdGhpcy5sZW5ndGg+MCl7aD1hKHRoaXNbMF0pO3ZhciBwPWguZGF0YShhLm1hc2suZGF0YU5hbWUpO3JldHVybiBwP3AoKTp2b2lkIDB9cmV0dXJuIGc9YS5leHRlbmQoe2F1dG9jbGVhcjphLm1hc2suYXV0b2NsZWFyLHBsYWNlaG9sZGVyOmEubWFzay5wbGFjZWhvbGRlcixjb21wbGV0ZWQ6bnVsbH0sZyksaT1hLm1hc2suZGVmaW5pdGlvbnMsaj1bXSxrPW49Yy5sZW5ndGgsbD1udWxsLGEuZWFjaChjLnNwbGl0KFwiXCIpLGZ1bmN0aW9uKGEsYil7XCI/XCI9PWI/KG4tLSxrPWEpOmlbYl0/KGoucHVzaChuZXcgUmVnRXhwKGlbYl0pKSxudWxsPT09bCYmKGw9ai5sZW5ndGgtMSksaz5hJiYobT1qLmxlbmd0aC0xKSk6ai5wdXNoKG51bGwpfSksdGhpcy50cmlnZ2VyKFwidW5tYXNrXCIpLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBoKCl7aWYoZy5jb21wbGV0ZWQpe2Zvcih2YXIgYT1sO20+PWE7YSsrKWlmKGpbYV0mJkNbYV09PT1wKGEpKXJldHVybjtnLmNvbXBsZXRlZC5jYWxsKEIpfX1mdW5jdGlvbiBwKGEpe3JldHVybiBnLnBsYWNlaG9sZGVyLmNoYXJBdChhPGcucGxhY2Vob2xkZXIubGVuZ3RoP2E6MCl9ZnVuY3Rpb24gcShhKXtmb3IoOysrYTxuJiYhalthXTspO3JldHVybiBhfWZ1bmN0aW9uIHIoYSl7Zm9yKDstLWE+PTAmJiFqW2FdOyk7cmV0dXJuIGF9ZnVuY3Rpb24gcyhhLGIpe3ZhciBjLGQ7aWYoISgwPmEpKXtmb3IoYz1hLGQ9cShiKTtuPmM7YysrKWlmKGpbY10pe2lmKCEobj5kJiZqW2NdLnRlc3QoQ1tkXSkpKWJyZWFrO0NbY109Q1tkXSxDW2RdPXAoZCksZD1xKGQpfXooKSxCLmNhcmV0KE1hdGgubWF4KGwsYSkpfX1mdW5jdGlvbiB0KGEpe3ZhciBiLGMsZCxlO2ZvcihiPWEsYz1wKGEpO24+YjtiKyspaWYoaltiXSl7aWYoZD1xKGIpLGU9Q1tiXSxDW2JdPWMsIShuPmQmJmpbZF0udGVzdChlKSkpYnJlYWs7Yz1lfX1mdW5jdGlvbiB1KCl7dmFyIGE9Qi52YWwoKSxiPUIuY2FyZXQoKTtpZihvJiZvLmxlbmd0aCYmby5sZW5ndGg+YS5sZW5ndGgpe2ZvcihBKCEwKTtiLmJlZ2luPjAmJiFqW2IuYmVnaW4tMV07KWIuYmVnaW4tLTtpZigwPT09Yi5iZWdpbilmb3IoO2IuYmVnaW48bCYmIWpbYi5iZWdpbl07KWIuYmVnaW4rKztCLmNhcmV0KGIuYmVnaW4sYi5iZWdpbil9ZWxzZXtmb3IoQSghMCk7Yi5iZWdpbjxuJiYhaltiLmJlZ2luXTspYi5iZWdpbisrO0IuY2FyZXQoYi5iZWdpbixiLmJlZ2luKX1oKCl9ZnVuY3Rpb24gdigpe0EoKSxCLnZhbCgpIT1FJiZCLmNoYW5nZSgpfWZ1bmN0aW9uIHcoYSl7aWYoIUIucHJvcChcInJlYWRvbmx5XCIpKXt2YXIgYixjLGUsZj1hLndoaWNofHxhLmtleUNvZGU7bz1CLnZhbCgpLDg9PT1mfHw0Nj09PWZ8fGQmJjEyNz09PWY/KGI9Qi5jYXJldCgpLGM9Yi5iZWdpbixlPWIuZW5kLGUtYz09PTAmJihjPTQ2IT09Zj9yKGMpOmU9cShjLTEpLGU9NDY9PT1mP3EoZSk6ZSkseShjLGUpLHMoYyxlLTEpLGEucHJldmVudERlZmF1bHQoKSk6MTM9PT1mP3YuY2FsbCh0aGlzLGEpOjI3PT09ZiYmKEIudmFsKEUpLEIuY2FyZXQoMCxBKCkpLGEucHJldmVudERlZmF1bHQoKSl9fWZ1bmN0aW9uIHgoYil7aWYoIUIucHJvcChcInJlYWRvbmx5XCIpKXt2YXIgYyxkLGUsZz1iLndoaWNofHxiLmtleUNvZGUsaT1CLmNhcmV0KCk7aWYoIShiLmN0cmxLZXl8fGIuYWx0S2V5fHxiLm1ldGFLZXl8fDMyPmcpJiZnJiYxMyE9PWcpe2lmKGkuZW5kLWkuYmVnaW4hPT0wJiYoeShpLmJlZ2luLGkuZW5kKSxzKGkuYmVnaW4saS5lbmQtMSkpLGM9cShpLmJlZ2luLTEpLG4+YyYmKGQ9U3RyaW5nLmZyb21DaGFyQ29kZShnKSxqW2NdLnRlc3QoZCkpKXtpZih0KGMpLENbY109ZCx6KCksZT1xKGMpLGYpe3ZhciBrPWZ1bmN0aW9uKCl7YS5wcm94eShhLmZuLmNhcmV0LEIsZSkoKX07c2V0VGltZW91dChrLDApfWVsc2UgQi5jYXJldChlKTtpLmJlZ2luPD1tJiZoKCl9Yi5wcmV2ZW50RGVmYXVsdCgpfX19ZnVuY3Rpb24geShhLGIpe3ZhciBjO2ZvcihjPWE7Yj5jJiZuPmM7YysrKWpbY10mJihDW2NdPXAoYykpfWZ1bmN0aW9uIHooKXtCLnZhbChDLmpvaW4oXCJcIikpfWZ1bmN0aW9uIEEoYSl7dmFyIGIsYyxkLGU9Qi52YWwoKSxmPS0xO2ZvcihiPTAsZD0wO24+YjtiKyspaWYoaltiXSl7Zm9yKENbYl09cChiKTtkKys8ZS5sZW5ndGg7KWlmKGM9ZS5jaGFyQXQoZC0xKSxqW2JdLnRlc3QoYykpe0NbYl09YyxmPWI7YnJlYWt9aWYoZD5lLmxlbmd0aCl7eShiKzEsbik7YnJlYWt9fWVsc2UgQ1tiXT09PWUuY2hhckF0KGQpJiZkKyssaz5iJiYoZj1iKTtyZXR1cm4gYT96KCk6az5mKzE/Zy5hdXRvY2xlYXJ8fEMuam9pbihcIlwiKT09PUQ/KEIudmFsKCkmJkIudmFsKFwiXCIpLHkoMCxuKSk6eigpOih6KCksQi52YWwoQi52YWwoKS5zdWJzdHJpbmcoMCxmKzEpKSksaz9iOmx9dmFyIEI9YSh0aGlzKSxDPWEubWFwKGMuc3BsaXQoXCJcIiksZnVuY3Rpb24oYSxiKXtyZXR1cm5cIj9cIiE9YT9pW2FdP3AoYik6YTp2b2lkIDB9KSxEPUMuam9pbihcIlwiKSxFPUIudmFsKCk7Qi5kYXRhKGEubWFzay5kYXRhTmFtZSxmdW5jdGlvbigpe3JldHVybiBhLm1hcChDLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGpbYl0mJmEhPXAoYik/YTpudWxsfSkuam9pbihcIlwiKX0pLEIub25lKFwidW5tYXNrXCIsZnVuY3Rpb24oKXtCLm9mZihcIi5tYXNrXCIpLnJlbW92ZURhdGEoYS5tYXNrLmRhdGFOYW1lKX0pLm9uKFwiZm9jdXMubWFza1wiLGZ1bmN0aW9uKCl7aWYoIUIucHJvcChcInJlYWRvbmx5XCIpKXtjbGVhclRpbWVvdXQoYik7dmFyIGE7RT1CLnZhbCgpLGE9QSgpLGI9c2V0VGltZW91dChmdW5jdGlvbigpe0IuZ2V0KDApPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmKHooKSxhPT1jLnJlcGxhY2UoXCI/XCIsXCJcIikubGVuZ3RoP0IuY2FyZXQoMCxhKTpCLmNhcmV0KGEpKX0sMTApfX0pLm9uKFwiYmx1ci5tYXNrXCIsdikub24oXCJrZXlkb3duLm1hc2tcIix3KS5vbihcImtleXByZXNzLm1hc2tcIix4KS5vbihcImlucHV0Lm1hc2sgcGFzdGUubWFza1wiLGZ1bmN0aW9uKCl7Qi5wcm9wKFwicmVhZG9ubHlcIil8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1BKCEwKTtCLmNhcmV0KGEpLGgoKX0sMCl9KSxlJiZmJiZCLm9mZihcImlucHV0Lm1hc2tcIikub24oXCJpbnB1dC5tYXNrXCIsdSksQSgpfSl9fSl9KTtcclxuXHJcbi8qXHJcblxyXG4gYXJjdGljTW9kYWwg77+9IGpRdWVyeSBwbHVnaW5cclxuIFZlcnNpb246IDAuM1xyXG4gQXV0aG9yOiBTZXJnZXkgUHJlZHZvZGl0ZWxldiAoc2VyZ2V5LnByZWR2b2RpdGVsZXZAZ21haWwuY29tKVxyXG4gQ29tcGFueTogQXJjdGljIExhYm9yYXRvcnkgKGh0dHA6Ly9hcmN0aWNsYWIucnUvKVxyXG5cclxuIERvY3MgJiBFeGFtcGxlczogaHR0cDovL2FyY3RpY2xhYi5ydS9hcmN0aWNtb2RhbC9cclxuXHJcbiAqL1xyXG4vKlxyXG4oZnVuY3Rpb24oZCl7dmFyIGc9e3R5cGU6XCJodG1sXCIsY29udGVudDpcIlwiLHVybDpcIlwiLGFqYXg6e30sYWpheF9yZXF1ZXN0Om51bGwsY2xvc2VPbkVzYzohMCxjbG9zZU9uT3ZlcmxheUNsaWNrOiEwLGNsb25lOiExLG92ZXJsYXk6e2Jsb2NrOnZvaWQgMCx0cGw6JzxkaXYgY2xhc3M9XCJhcmN0aWNtb2RhbC1vdmVybGF5XCI+PC9kaXY+Jyxjc3M6e2JhY2tncm91bmRDb2xvcjpcIiMwMDBcIixvcGFjaXR5OjAuMn19LGNvbnRhaW5lcjp7YmxvY2s6dm9pZCAwLHRwbDonPGRpdiBjbGFzcz1cImFyY3RpY21vZGFsLWNvbnRhaW5lclwiPjx0YWJsZSBjbGFzcz1cImFyY3RpY21vZGFsLWNvbnRhaW5lcl9pXCI+PHRyPjx0ZCBjbGFzcz1cImFyY3RpY21vZGFsLWNvbnRhaW5lcl9pMlwiPjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2Pid9LHdyYXA6dm9pZCAwLGJvZHk6dm9pZCAwLGVycm9yczp7dHBsOic8ZGl2IGNsYXNzPVwiYXJjdGljbW9kYWwtZXJyb3IgYXJjdGljbW9kYWwtY2xvc2VcIj48L2Rpdj4nLGF1dG9jbG9zZV9kZWxheToyRTMsXHJcbmFqYXhfdW5zdWNjZXNzZnVsX2xvYWQ6XCJFcnJvclwifSxvcGVuRWZmZWN0Ont0eXBlOlwiZmFkZVwiLHNwZWVkOjQwMH0sY2xvc2VFZmZlY3Q6e3R5cGU6XCJmYWRlXCIsc3BlZWQ6NDAwfSxiZWZvcmVPcGVuOmQubm9vcCxhZnRlck9wZW46ZC5ub29wLGJlZm9yZUNsb3NlOmQubm9vcCxhZnRlckNsb3NlOmQubm9vcCxhZnRlckxvYWRpbmc6ZC5ub29wLGFmdGVyTG9hZGluZ09uU2hvdzpkLm5vb3AsZXJyb3JMb2FkaW5nOmQubm9vcH0saj0wLGU9ZChbXSksbT17aXNFdmVudE91dDpmdW5jdGlvbihhLGIpe3ZhciBjPSEwO2QoYSkuZWFjaChmdW5jdGlvbigpe2QoYi50YXJnZXQpLmdldCgwKT09ZCh0aGlzKS5nZXQoMCkmJihjPSExKTswPT1kKGIudGFyZ2V0KS5jbG9zZXN0KFwiSFRNTFwiLGQodGhpcykuZ2V0KDApKS5sZW5ndGgmJihjPSExKX0pO3JldHVybiBjfX0sZj17Z2V0UGFyZW50RWw6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhKTtyZXR1cm4gYi5kYXRhKFwiYXJjdGljbW9kYWxcIik/YjooYj1cclxuZChhKS5jbG9zZXN0KFwiLmFyY3RpY21vZGFsLWNvbnRhaW5lclwiKS5kYXRhKFwiYXJjdGljbW9kYWxQYXJlbnRFbFwiKSk/YjohMX0sdHJhbnNpdGlvbjpmdW5jdGlvbihhLGIsYyxlKXtlPXZvaWQgMD09ZT9kLm5vb3A6ZTtzd2l0Y2goYy50eXBlKXtjYXNlIFwiZmFkZVwiOlwic2hvd1wiPT1iP2EuZmFkZUluKGMuc3BlZWQsZSk6YS5mYWRlT3V0KGMuc3BlZWQsZSk7YnJlYWs7Y2FzZSBcIm5vbmVcIjpcInNob3dcIj09Yj9hLnNob3coKTphLmhpZGUoKSxlKCl9fSxwcmVwYXJlX2JvZHk6ZnVuY3Rpb24oYSxiKXtkKFwiLmFyY3RpY21vZGFsLWNsb3NlXCIsYS5ib2R5KS51bmJpbmQoXCJjbGljay5hcmN0aWNtb2RhbFwiKS5iaW5kKFwiY2xpY2suYXJjdGljbW9kYWxcIixmdW5jdGlvbigpe2IuYXJjdGljbW9kYWwoXCJjbG9zZVwiKTtyZXR1cm4hMX0pfSxpbml0X2VsOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5kYXRhKFwiYXJjdGljbW9kYWxcIik7aWYoIWMpe2M9YjtqKys7Yy5tb2RhbElEPWo7Yy5vdmVybGF5LmJsb2NrPVxyXG5kKGMub3ZlcmxheS50cGwpO2Mub3ZlcmxheS5ibG9jay5jc3MoYy5vdmVybGF5LmNzcyk7Yy5jb250YWluZXIuYmxvY2s9ZChjLmNvbnRhaW5lci50cGwpO2MuYm9keT1kKFwiLmFyY3RpY21vZGFsLWNvbnRhaW5lcl9pMlwiLGMuY29udGFpbmVyLmJsb2NrKTtiLmNsb25lP2MuYm9keS5odG1sKGEuY2xvbmUoITApKTooYS5iZWZvcmUoJzxkaXYgaWQ9XCJhcmN0aWNtb2RhbFJlc2VydmUnK2MubW9kYWxJRCsnXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lXCIgLz4nKSxjLmJvZHkuaHRtbChhKSk7Zi5wcmVwYXJlX2JvZHkoYyxhKTtjLmNsb3NlT25PdmVybGF5Q2xpY2smJmMub3ZlcmxheS5ibG9jay5hZGQoYy5jb250YWluZXIuYmxvY2spLmNsaWNrKGZ1bmN0aW9uKGIpe20uaXNFdmVudE91dChkKFwiPipcIixjLmJvZHkpLGIpJiZhLmFyY3RpY21vZGFsKFwiY2xvc2VcIil9KTtjLmNvbnRhaW5lci5ibG9jay5kYXRhKFwiYXJjdGljbW9kYWxQYXJlbnRFbFwiLGEpO2EuZGF0YShcImFyY3RpY21vZGFsXCIsYyk7XHJcbmU9ZC5tZXJnZShlLGEpO2QucHJveHkoaC5zaG93LGEpKCk7aWYoXCJodG1sXCI9PWMudHlwZSlyZXR1cm4gYTtpZih2b2lkIDAhPWMuYWpheC5iZWZvcmVTZW5kKXt2YXIgaz1jLmFqYXguYmVmb3JlU2VuZDtkZWxldGUgYy5hamF4LmJlZm9yZVNlbmR9aWYodm9pZCAwIT1jLmFqYXguc3VjY2Vzcyl7dmFyIGc9Yy5hamF4LnN1Y2Nlc3M7ZGVsZXRlIGMuYWpheC5zdWNjZXNzfWlmKHZvaWQgMCE9Yy5hamF4LmVycm9yKXt2YXIgbD1jLmFqYXguZXJyb3I7ZGVsZXRlIGMuYWpheC5lcnJvcn12YXIgbj1kLmV4dGVuZCghMCx7dXJsOmMudXJsLGJlZm9yZVNlbmQ6ZnVuY3Rpb24oKXt2b2lkIDA9PWs/Yy5ib2R5Lmh0bWwoJzxkaXYgY2xhc3M9XCJhcmN0aWNtb2RhbC1sb2FkaW5nXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmUgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk6ayhjLGEpfSxzdWNjZXNzOmZ1bmN0aW9uKGIpe2EudHJpZ2dlcihcImFmdGVyTG9hZGluZ1wiKTtjLmFmdGVyTG9hZGluZyhjLGEsYik7dm9pZCAwPT1nP2MuYm9keS5odG1sKGIpOmcoYyxhLGIpO2YucHJlcGFyZV9ib2R5KGMsXHJcbmEpO2EudHJpZ2dlcihcImFmdGVyTG9hZGluZ09uU2hvd1wiKTtjLmFmdGVyTG9hZGluZ09uU2hvdyhjLGEsYil9LGVycm9yOmZ1bmN0aW9uKCl7YS50cmlnZ2VyKFwiZXJyb3JMb2FkaW5nXCIpO2MuZXJyb3JMb2FkaW5nKGMsYSk7dm9pZCAwPT1sPyhjLmJvZHkuaHRtbChjLmVycm9ycy50cGwpLGQoXCIuYXJjdGljbW9kYWwtZXJyb3JcIixjLmJvZHkpLmh0bWwoYy5lcnJvcnMuYWpheF91bnN1Y2Nlc3NmdWxfbG9hZCksZChcIi5hcmN0aWNtb2RhbC1jbG9zZVwiLGMuYm9keSkuY2xpY2soZnVuY3Rpb24oKXthLmFyY3RpY21vZGFsKFwiY2xvc2VcIik7cmV0dXJuITF9KSxjLmVycm9ycy5hdXRvY2xvc2VfZGVsYXkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFyY3RpY21vZGFsKFwiY2xvc2VcIil9LGMuZXJyb3JzLmF1dG9jbG9zZV9kZWxheSkpOmwoYyxhKX19LGMuYWpheCk7Yy5hamF4X3JlcXVlc3Q9ZC5hamF4KG4pO2EuZGF0YShcImFyY3RpY21vZGFsXCIsYyl9fSxpbml0OmZ1bmN0aW9uKGEpe2E9XHJcbmQuZXh0ZW5kKCEwLHt9LGcsYSk7aWYoZC5pc0Z1bmN0aW9uKHRoaXMpKWlmKHZvaWQgMD09YSlkLmVycm9yKFwianF1ZXJ5LmFyY3RpY21vZGFsOiBVbmNvcnJlY3QgcGFyYW1ldGVyc1wiKTtlbHNlIGlmKFwiXCI9PWEudHlwZSlkLmVycm9yKCdqcXVlcnkuYXJjdGljbW9kYWw6IERvblxcJ3Qgc2V0IHBhcmFtZXRlciBcInR5cGVcIicpO2Vsc2Ugc3dpdGNoKGEudHlwZSl7Y2FzZSBcImh0bWxcIjppZihcIlwiPT1hLmNvbnRlbnQpe2QuZXJyb3IoJ2pxdWVyeS5hcmN0aWNtb2RhbDogRG9uXFwndCBzZXQgcGFyYW1ldGVyIFwiY29udGVudFwiJyk7YnJlYWt9dmFyIGI9YS5jb250ZW50O2EuY29udGVudD1cIlwiO3JldHVybiBmLmluaXRfZWwoZChiKSxhKTtjYXNlIFwiYWpheFwiOmlmKFwiXCI9PWEudXJsKXtkLmVycm9yKCdqcXVlcnkuYXJjdGljbW9kYWw6IERvblxcJ3Qgc2V0IHBhcmFtZXRlciBcInVybFwiJyk7YnJlYWt9cmV0dXJuIGYuaW5pdF9lbChkKFwiPGRpdiAvPlwiKSxhKX1lbHNlIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmLmluaXRfZWwoZCh0aGlzKSxcclxuZC5leHRlbmQoITAse30sYSkpfSl9fSxoPXtzaG93OmZ1bmN0aW9uKCl7dmFyIGE9Zi5nZXRQYXJlbnRFbCh0aGlzKTtpZighMT09PWEpZC5lcnJvcihcImpxdWVyeS5hcmN0aWNtb2RhbDogVW5jb3JyZWN0IGNhbGxcIik7ZWxzZXt2YXIgYj1hLmRhdGEoXCJhcmN0aWNtb2RhbFwiKTtiLm92ZXJsYXkuYmxvY2suaGlkZSgpO2IuY29udGFpbmVyLmJsb2NrLmhpZGUoKTtkKFwiQk9EWVwiKS5hcHBlbmQoYi5vdmVybGF5LmJsb2NrKTtkKFwiQk9EWVwiKS5hcHBlbmQoYi5jb250YWluZXIuYmxvY2spO2IuYmVmb3JlT3BlbihiLGEpO2EudHJpZ2dlcihcImJlZm9yZU9wZW5cIik7aWYoXCJoaWRkZW5cIiE9Yi53cmFwLmNzcyhcIm92ZXJmbG93XCIpKXtiLndyYXAuZGF0YShcImFyY3RpY21vZGFsT3ZlcmZsb3dcIixiLndyYXAuY3NzKFwib3ZlcmZsb3dcIikpO3ZhciBjPWIud3JhcC5vdXRlcldpZHRoKCEwKTtiLndyYXAuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTt2YXIgZz1iLndyYXAub3V0ZXJXaWR0aCghMCk7ZyE9XHJcbmMmJmIud3JhcC5jc3MoXCJtYXJnaW5SaWdodFwiLGctYytcInB4XCIpfWUubm90KGEpLmVhY2goZnVuY3Rpb24oKXtkKHRoaXMpLmRhdGEoXCJhcmN0aWNtb2RhbFwiKS5vdmVybGF5LmJsb2NrLmhpZGUoKX0pO2YudHJhbnNpdGlvbihiLm92ZXJsYXkuYmxvY2ssXCJzaG93XCIsMTxlLmxlbmd0aD97dHlwZTpcIm5vbmVcIn06Yi5vcGVuRWZmZWN0KTtmLnRyYW5zaXRpb24oYi5jb250YWluZXIuYmxvY2ssXCJzaG93XCIsMTxlLmxlbmd0aD97dHlwZTpcIm5vbmVcIn06Yi5vcGVuRWZmZWN0LGZ1bmN0aW9uKCl7Yi5hZnRlck9wZW4oYixhKTthLnRyaWdnZXIoXCJhZnRlck9wZW5cIil9KTtyZXR1cm4gYX19LGNsb3NlOmZ1bmN0aW9uKCl7aWYoZC5pc0Z1bmN0aW9uKHRoaXMpKWUuZWFjaChmdW5jdGlvbigpe2QodGhpcykuYXJjdGljbW9kYWwoXCJjbG9zZVwiKX0pO2Vsc2UgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhPWYuZ2V0UGFyZW50RWwodGhpcyk7aWYoITE9PT1hKWQuZXJyb3IoXCJqcXVlcnkuYXJjdGljbW9kYWw6IFVuY29ycmVjdCBjYWxsXCIpO1xyXG5lbHNle3ZhciBiPWEuZGF0YShcImFyY3RpY21vZGFsXCIpOyExIT09Yi5iZWZvcmVDbG9zZShiLGEpJiYoYS50cmlnZ2VyKFwiYmVmb3JlQ2xvc2VcIiksZS5ub3QoYSkubGFzdCgpLmVhY2goZnVuY3Rpb24oKXtkKHRoaXMpLmRhdGEoXCJhcmN0aWNtb2RhbFwiKS5vdmVybGF5LmJsb2NrLnNob3coKX0pLGYudHJhbnNpdGlvbihiLm92ZXJsYXkuYmxvY2ssXCJoaWRlXCIsMTxlLmxlbmd0aD97dHlwZTpcIm5vbmVcIn06Yi5jbG9zZUVmZmVjdCksZi50cmFuc2l0aW9uKGIuY29udGFpbmVyLmJsb2NrLFwiaGlkZVwiLDE8ZS5sZW5ndGg/e3R5cGU6XCJub25lXCJ9OmIuY2xvc2VFZmZlY3QsZnVuY3Rpb24oKXtiLmFmdGVyQ2xvc2UoYixhKTthLnRyaWdnZXIoXCJhZnRlckNsb3NlXCIpO2IuY2xvbmV8fGQoXCIjYXJjdGljbW9kYWxSZXNlcnZlXCIrYi5tb2RhbElEKS5yZXBsYWNlV2l0aChiLmJvZHkuZmluZChcIj4qXCIpKTtiLm92ZXJsYXkuYmxvY2sucmVtb3ZlKCk7Yi5jb250YWluZXIuYmxvY2sucmVtb3ZlKCk7YS5kYXRhKFwiYXJjdGljbW9kYWxcIixcclxubnVsbCk7ZChcIi5hcmN0aWNtb2RhbC1jb250YWluZXJcIikubGVuZ3RofHwoYi53cmFwLmRhdGEoXCJhcmN0aWNtb2RhbE92ZXJmbG93XCIpJiZiLndyYXAuY3NzKFwib3ZlcmZsb3dcIixiLndyYXAuZGF0YShcImFyY3RpY21vZGFsT3ZlcmZsb3dcIikpLGIud3JhcC5jc3MoXCJtYXJnaW5SaWdodFwiLDApKX0pLFwiYWpheFwiPT1iLnR5cGUmJmIuYWpheF9yZXF1ZXN0LmFib3J0KCksZT1lLm5vdChhKSl9fSl9LHNldERlZmF1bHQ6ZnVuY3Rpb24oYSl7ZC5leHRlbmQoITAsZyxhKX19O2QoZnVuY3Rpb24oKXtnLndyYXA9ZChkb2N1bWVudC5hbGwmJiFkb2N1bWVudC5xdWVyeVNlbGVjdG9yP1wiaHRtbFwiOlwiYm9keVwiKX0pO2QoZG9jdW1lbnQpLmJpbmQoXCJrZXl1cC5hcmN0aWNtb2RhbFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWUubGFzdCgpO2IubGVuZ3RoJiZiLmRhdGEoXCJhcmN0aWNtb2RhbFwiKS5jbG9zZU9uRXNjJiYyNz09PWEua2V5Q29kZSYmYi5hcmN0aWNtb2RhbChcImNsb3NlXCIpfSk7ZC5hcmN0aWNtb2RhbD1cclxuZC5mbi5hcmN0aWNtb2RhbD1mdW5jdGlvbihhKXtpZihoW2FdKXJldHVybiBoW2FdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtpZihcIm9iamVjdFwiPT09dHlwZW9mIGF8fCFhKXJldHVybiBmLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2QuZXJyb3IoXCJqcXVlcnkuYXJjdGljbW9kYWw6IE1ldGhvZCBcIithK1wiIGRvZXMgbm90IGV4aXN0XCIpfX0pKGpRdWVyeSk7XHJcbiovXHJcblxyXG4vKiFcclxuLyoqXHJcbiAqIE1vbmtleSBwYXRjaCBqUXVlcnkgMS4zLjErIHRvIGFkZCBzdXBwb3J0IGZvciBzZXR0aW5nIG9yIGFuaW1hdGluZyBDU1NcclxuICogc2NhbGUgYW5kIHJvdGF0aW9uIGluZGVwZW5kZW50bHkuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS96YWNoc3Ryb25hdXQvanF1ZXJ5LWFuaW1hdGUtY3NzLXJvdGF0ZS1zY2FsZVxyXG4gKiBSZWxlYXNlZCB1bmRlciBkdWFsIE1JVC9HUEwgbGljZW5zZSBqdXN0IGxpa2UgalF1ZXJ5LlxyXG4gKiAyMDA5LTIwMTIgWmFjaGFyeSBKb2huc29uIHd3dy56YWNoc3Ryb25hdXQuY29tXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAgIC8vIFVwZGF0ZWQgMjAxMC4xMS4wNlxyXG4gICAgLy8gVXBkYXRlZCAyMDEyLjEwLjEzIC0gRmlyZWZveCAxNiB0cmFuc2Zvcm0gc3R5bGUgcmV0dXJucyBhIG1hdHJpeCByYXRoZXIgdGhhbiBhIHN0cmluZyBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zLiAgVGhpcyBicm9rZSB0aGUgZmVhdHVyZXMgb2YgdGhpcyBqUXVlcnkgcGF0Y2ggaW4gRmlyZWZveCAxNi4gIEl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byBwYXJzZSB0aGUgbWF0cml4IGZvciBib3RoIHNjYWxlIGFuZCByb3RhdGUgKGVzcGVjaWFsbHkgd2hlbiBzY2FsZSBpcyB0aGUgc2FtZSBmb3IgYm90aCB0aGUgWCBhbmQgWSBheGlzKSwgaG93ZXZlciB0aGUgbWF0cml4IGRvZXMgaGF2ZSBkaXNhZHZhbnRhZ2VzIHN1Y2ggYXMgdXNpbmcgaXRzIG93biB1bml0cyBhbmQgYWxzbyA0NWRlZyBiZWluZyBpbmRpc3Rpbmd1aXNoYWJsZSBmcm9tIDQ1KzM2MGRlZy4gIFRvIGdldCBhcm91bmQgdGhlc2UgaXNzdWVzLCB0aGlzIHBhdGNoIHRyYWNrcyBpbnRlcm5hbGx5IHRoZSBzY2FsZSwgcm90YXRpb24sIGFuZCByb3RhdGlvbiB1bml0cyBmb3IgYW55IGVsZW1lbnRzIHRoYXQgYXJlIC5zY2FsZSgpJ2VkLCAucm90YXRlKCknZWQsIG9yIGFuaW1hdGVkLiAgVGhlIG1ham9yIGNvbnNlcXVlbmNlcyBvZiB0aGlzIGFyZSB0aGF0IDEuIHRoZSBzY2FsZWQvcm90YXRlZCBlbGVtZW50IHdpbGwgYmxvdyBhd2F5IGFueSBvdGhlciB0cmFuc2Zvcm0gcnVsZXMgYXBwbGllZCB0byB0aGUgc2FtZSBlbGVtZW50IChzdWNoIGFzIHNrZXcgb3IgdHJhbnNsYXRlKSwgYW5kIDIuIHRoZSBzY2FsZWQvcm90YXRlZCBlbGVtZW50IGlzIHVuYXdhcmUgb2YgYW55IHByZXNldCBzY2FsZSBvciByb3RhdGlvbiBpbml0YWxseSBzZXQgYnkgcGFnZSBDU1MgcnVsZXMuICBZb3Ugd2lsbCBoYXZlIHRvIGV4cGxpY2l0bHkgc2V0IHRoZSBzdGFydGluZyBzY2FsZS9yb3RhdGlvbiB2YWx1ZS5cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gaW5pdERhdGEoJGVsKSB7XHJcbiAgICAgICAgdmFyIF9BUlNfZGF0YSA9ICRlbC5kYXRhKCdfQVJTX2RhdGEnKTtcclxuICAgICAgICBpZiAoIV9BUlNfZGF0YSkge1xyXG4gICAgICAgICAgICBfQVJTX2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICByb3RhdGVVbml0czogJ2RlZycsXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgICAgIHJvdGF0ZTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJGVsLmRhdGEoJ19BUlNfZGF0YScsIF9BUlNfZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBfQVJTX2RhdGE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNldFRyYW5zZm9ybSgkZWwsIGRhdGEpIHtcclxuICAgICAgICAkZWwuY3NzKCd0cmFuc2Zvcm0nLCAncm90YXRlKCcgKyBkYXRhLnJvdGF0ZSArIGRhdGEucm90YXRlVW5pdHMgKyAnKSBzY2FsZSgnICsgZGF0YS5zY2FsZSArICcsJyArIGRhdGEuc2NhbGUgKyAnKScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkLmZuLnJvdGF0ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLCBtLCBkYXRhID0gaW5pdERhdGEoJHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5yb3RhdGUgKyBkYXRhLnJvdGF0ZVVuaXRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBtID0gdmFsLnRvU3RyaW5nKCkubWF0Y2goL14oLT9cXGQrKFxcLlxcZCspPykoLispPyQvKTtcclxuICAgICAgICBpZiAobSkge1xyXG4gICAgICAgICAgICBpZiAobVszXSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5yb3RhdGVVbml0cyA9IG1bM107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRhdGEucm90YXRlID0gbVsxXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNldFRyYW5zZm9ybSgkc2VsZiwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gTm90ZSB0aGF0IHNjYWxlIGlzIHVuaXRsZXNzLlxyXG4gICAgJC5mbi5zY2FsZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLCBkYXRhID0gaW5pdERhdGEoJHNlbGYpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLnNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBkYXRhLnNjYWxlID0gdmFsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNldFRyYW5zZm9ybSgkc2VsZiwgZGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGZ4LmN1cigpIG11c3QgYmUgbW9ua2V5IHBhdGNoZWQgYmVjYXVzZSBvdGhlcndpc2UgaXQgd291bGQgYWx3YXlzXHJcbiAgICAvLyByZXR1cm4gMCBmb3IgY3VycmVudCByb3RhdGUgYW5kIHNjYWxlIHZhbHVlc1xyXG4gICAgdmFyIGN1clByb3hpZWQgPSAkLmZ4LnByb3RvdHlwZS5jdXI7XHJcbiAgICAkLmZ4LnByb3RvdHlwZS5jdXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcCA9PSAncm90YXRlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgkKHRoaXMuZWxlbSkucm90YXRlKCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcCA9PSAnc2NhbGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KCQodGhpcy5lbGVtKS5zY2FsZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGN1clByb3hpZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICQuZnguc3RlcC5yb3RhdGUgPSBmdW5jdGlvbiAoZngpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IGluaXREYXRhKCQoZnguZWxlbSkpO1xyXG4gICAgICAgICQoZnguZWxlbSkucm90YXRlKGZ4Lm5vdyArIGRhdGEucm90YXRlVW5pdHMpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJC5meC5zdGVwLnNjYWxlID0gZnVuY3Rpb24gKGZ4KSB7XHJcbiAgICAgICAgJChmeC5lbGVtKS5zY2FsZShmeC5ub3cpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLypcclxuICAgIFxyXG4gICAgU3RhcnRpbmcgb24gbGluZSAzOTA1IG9mIGpxdWVyeS0xLjMuMi5qcyB3ZSBoYXZlIHRoaXMgY29kZTpcclxuICAgIFxyXG4gICAgLy8gV2UgbmVlZCB0byBjb21wdXRlIHN0YXJ0aW5nIHZhbHVlXHJcbiAgICBpZiAoIHVuaXQgIT0gXCJweFwiICkge1xyXG4gICAgICAgIHNlbGYuc3R5bGVbIG5hbWUgXSA9IChlbmQgfHwgMSkgKyB1bml0O1xyXG4gICAgICAgIHN0YXJ0ID0gKChlbmQgfHwgMSkgLyBlLmN1cih0cnVlKSkgKiBzdGFydDtcclxuICAgICAgICBzZWxmLnN0eWxlWyBuYW1lIF0gPSBzdGFydCArIHVuaXQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFRoaXMgY3JlYXRlcyBhIHByb2JsZW0gd2hlcmUgd2UgY2Fubm90IGdpdmUgdW5pdHMgdG8gb3VyIGN1c3RvbSBhbmltYXRpb25cclxuICAgIGJlY2F1c2UgaWYgd2UgZG8gdGhlbiB0aGlzIGNvZGUgd2lsbCBleGVjdXRlIGFuZCBiZWNhdXNlIHNlbGYuc3R5bGVbbmFtZV1cclxuICAgIGRvZXMgbm90IGV4aXN0IHdoZXJlIG5hbWUgaXMgb3VyIGN1c3RvbSBhbmltYXRpb24ncyBuYW1lIHRoZW4gZS5jdXIodHJ1ZSlcclxuICAgIHdpbGwgbGlrZWx5IHJldHVybiB6ZXJvIGFuZCBjcmVhdGUgYSBkaXZpZGUgYnkgemVybyBidWcgd2hpY2ggd2lsbCBzZXRcclxuICAgIHN0YXJ0IHRvIE5hTi5cclxuICAgIFxyXG4gICAgVGhlIGZvbGxvd2luZyBtb25rZXkgcGF0Y2ggZm9yIGFuaW1hdGUoKSBnZXRzIGFyb3VuZCB0aGlzIGJ5IHN0b3JpbmcgdGhlXHJcbiAgICB1bml0cyB1c2VkIGluIHRoZSByb3RhdGlvbiBkZWZpbml0aW9uIGFuZCB0aGVuIHN0cmlwcGluZyB0aGUgdW5pdHMgb2ZmLlxyXG4gICAgXHJcbiAgICAqL1xyXG4gICAgXHJcbiAgICB2YXIgYW5pbWF0ZVByb3hpZWQgPSAkLmZuLmFuaW1hdGU7XHJcbiAgICAkLmZuLmFuaW1hdGUgPSBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgcHJvcFsncm90YXRlJ10gIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmLCBkYXRhLCBtID0gcHJvcFsncm90YXRlJ10udG9TdHJpbmcoKS5tYXRjaCgvXigoWystXT0pPygtP1xcZCsoXFwuXFxkKyk/KSkoLispPyQvKTtcclxuICAgICAgICAgICAgaWYgKG0gJiYgbVs1XSkge1xyXG4gICAgICAgICAgICAgICAgJHNlbGYgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGluaXREYXRhKCRzZWxmKTtcclxuICAgICAgICAgICAgICAgIGRhdGEucm90YXRlVW5pdHMgPSBtWzVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwcm9wWydyb3RhdGUnXSA9IG1bMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBhbmltYXRlUHJveGllZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxufSkoalF1ZXJ5KTtcclxuXHJcblxyXG5mdW5jdGlvbiB0cmltKHMpIHsgcmV0dXJuIHJ0cmltKGx0cmltKHMpKTsgfVxyXG5mdW5jdGlvbiBsdHJpbShzKXsgcmV0dXJuIHMucmVwbGFjZSgvXlxccysvLCAnJyk7IH1cclxuZnVuY3Rpb24gcnRyaW0ocyl7IHJldHVybiBzLnJlcGxhY2UoL1xccyskLywgJycpOyB9XHJcblxyXG4vKlxyXG4gKiBqUXVlcnkgYXV0b1Jlc2l6ZSAodGV4dGFyZWEgYXV0by1yZXNpemVyKVxyXG4gKiBAY29weXJpZ2h0IEphbWVzIFBhZG9sc2V5IGh0dHA6Ly9qYW1lcy5wYWRvbHNleS5jb21cclxuICogQHZlcnNpb24gMS4wNFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCQpe1xyXG4gICAgXHJcbiAgICAkLmZuLmF1dG9SZXNpemUgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSnVzdCBzb21lIGFic3RyYWN0ZWQgZGV0YWlscyxcclxuICAgICAgICAvLyB0byBtYWtlIHBsdWdpbiB1c2VycyBoYXBweTpcclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIG9uUmVzaXplIDogZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQgXHJcblx0XHRcdH0sXHJcbiAgICAgICAgICAgIGFuaW1hdGUgOiB0cnVlLFxyXG4gICAgICAgICAgICBhbmltYXRlRHVyYXRpb24gOiAxNTAsXHJcbiAgICAgICAgICAgIGFuaW1hdGVDYWxsYmFjayA6IGZ1bmN0aW9uKCl7fSxcclxuICAgICAgICAgICAgZXh0cmFTcGFjZSA6IDEsXHJcbiAgICAgICAgICAgIGxpbWl0OiAzMDAwMFxyXG4gICAgICAgIH0sIG9wdGlvbnMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE9ubHkgdGV4dGFyZWEncyBhdXRvLXJlc2l6ZTpcclxuICAgICAgICB0aGlzLmZpbHRlcigndGV4dGFyZWEnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHJpZCBvZiBzY3JvbGxiYXJzIGFuZCBkaXNhYmxlIFdlYktpdCByZXNpemluZzpcclxuICAgICAgICAgICAgdmFyIHRleHRhcmVhID0gJCh0aGlzKS5jc3Moe3Jlc2l6ZTonbm9uZScsJ292ZXJmbG93LXknOidoaWRkZW4nfSksXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ2FjaGUgb3JpZ2luYWwgaGVpZ2h0LCBmb3IgdXNlIGxhdGVyOlxyXG4gICAgICAgICAgICAgICAgb3JpZ0hlaWdodCA9IHRleHRhcmVhLmhlaWdodCgpLFxyXG5cclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBOZWVkIGNsb25lIG9mIHRleHRhcmVhLCBoaWRkZW4gb2ZmIHNjcmVlbjpcclxuICAgICAgICAgICAgICAgIGNsb25lID0gKGZ1bmN0aW9uKCl7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIHdoaWNoIG1heSBlZmZlY3Qgc3BhY2UgdGFrZW4gdXAgYnkgY2hyYWN0ZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IFsnaGVpZ2h0Jywnd2lkdGgnLCdsaW5lSGVpZ2h0JywndGV4dERlY29yYXRpb24nLCdsZXR0ZXJTcGFjaW5nJywnZm9udFNpemUnLCdmb250LWZhbWlseScsXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcE9iID0ge307XHJcbiAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG9iamVjdCBvZiBzdHlsZXMgdG8gYXBwbHk6XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHByb3BzLCBmdW5jdGlvbihpLCBwcm9wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcE9iW3Byb3BdID0gdGV4dGFyZWEuY3NzKHByb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBhY3R1YWwgdGV4dGFyZWEgcmVtb3ZpbmcgdW5pcXVlIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaW5zZXJ0IGJlZm9yZSBvcmlnaW5hbCB0ZXh0YXJlYTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dGFyZWEuY2xvbmUoKS5yZW1vdmVBdHRyKCdpZCcpLnJlbW92ZUF0dHIoJ25hbWUnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtOTk5OVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNzcyhwcm9wT2IpLmF0dHIoJ3RhYkluZGV4JywnLTEnKS5pbnNlcnRCZWZvcmUodGV4dGFyZWEpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcclxuICAgICAgICAgICAgICAgIH0pKCksXHJcbiAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsVG9wID0gbnVsbCxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRoZSBjbG9uZTpcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5oZWlnaHQoMCkudmFsKCQodGhpcykudmFsKCkpLnNjcm9sbFRvcCgxMDAwMCk7XHJcblx0XHRcdFx0XHRcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBoZWlnaHQgb2YgdGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBNYXRoLm1heChjbG9uZS5zY3JvbGxUb3AoKSwgb3JpZ0hlaWdodCkgKyBzZXR0aW5ncy5leHRyYVNwYWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0NoYW5nZSA9ICQodGhpcykuYWRkKGNsb25lKTtcclxuKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gTWF0aC5tYXgoY2xvbmUuc2Nyb2xsVG9wKCksIG9yaWdIZWlnaHQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0NoYW5nZSA9ICQodGhpcykuYWRkKGNsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBzY3JvbGxUaXAgaGFzZW4ndCBjaGFuZ2VkOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U2Nyb2xsVG9wID09PSBzY3JvbGxUb3ApIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBsaW1pdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcm9sbFRvcCA+PSBzZXR0aW5ncy5saW1pdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ292ZXJmbG93LXknLCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIG9mZiBjYWxsYmFjazpcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vblJlc2l6ZS5jYWxsKHRoaXMpO1xyXG5cdFx0XHRcdFx0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRWl0aGVyIGFuaW1hdGUgb3IgZGlyZWN0bHkgYXBwbHkgaGVpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYW5pbWF0ZSAmJiB0ZXh0YXJlYS5jc3MoJ2Rpc3BsYXknKSA9PT0gJ2Jsb2NrJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvQ2hhbmdlLnN0b3AoKS5hbmltYXRlKHtoZWlnaHQ6c2Nyb2xsVG9wfSwgc2V0dGluZ3MuYW5pbWF0ZUR1cmF0aW9uLCBzZXR0aW5ncy5hbmltYXRlQ2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdG9DaGFuZ2UuaGVpZ2h0KHNjcm9sbFRvcCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEJpbmQgbmFtZXNwYWNlZCBoYW5kbGVycyB0byBhcHByb3ByaWF0ZSBldmVudHM6XHJcbiAgICAgICAgICAgIHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAudW5iaW5kKCcuZHluU2l6JylcclxuICAgICAgICAgICAgICAgIC5iaW5kKCdrZXl1cC5keW5TaXonLCB1cGRhdGVTaXplKVxyXG4gICAgICAgICAgICAgICAgLmJpbmQoJ2tleWRvd24uZHluU2l6JywgdXBkYXRlU2l6ZSlcclxuICAgICAgICAgICAgICAgIC5iaW5kKCdjaGFuZ2UuZHluU2l6JywgdXBkYXRlU2l6ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoYWluOlxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxufSkoalF1ZXJ5KTtcclxuXHJcblxyXG4vKiEgalF1ZXJ5IG51bWJlciAyLjEuMyAoYykgZ2l0aHViLmNvbS90ZWFtZGYvanF1ZXJ5LW51bWJlciB8IG9wZW5zb3VyY2UudGVhbWRmLmNvbS9saWNlbnNlICovXHJcbihmdW5jdGlvbihoKXtmdW5jdGlvbiByKGYsYSl7aWYodGhpcy5jcmVhdGVUZXh0UmFuZ2Upe3ZhciBjPXRoaXMuY3JlYXRlVGV4dFJhbmdlKCk7Yy5jb2xsYXBzZSh0cnVlKTtjLm1vdmVTdGFydChcImNoYXJhY3RlclwiLGYpO2MubW92ZUVuZChcImNoYXJhY3RlclwiLGEtZik7Yy5zZWxlY3QoKX1lbHNlIGlmKHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2Upe3RoaXMuZm9jdXMoKTt0aGlzLnNldFNlbGVjdGlvblJhbmdlKGYsYSl9fWZ1bmN0aW9uIHMoZil7dmFyIGE9dGhpcy52YWx1ZS5sZW5ndGg7Zj1mLnRvTG93ZXJDYXNlKCk9PVwic3RhcnRcIj9cIlN0YXJ0XCI6XCJFbmRcIjtpZihkb2N1bWVudC5zZWxlY3Rpb24pe2E9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7dmFyIGM7Yz1hLmR1cGxpY2F0ZSgpO2MuZXhwYW5kKFwidGV4dGVkaXRcIik7Yy5zZXRFbmRQb2ludChcIkVuZFRvRW5kXCIsYSk7Yz1jLnRleHQubGVuZ3RoLWEudGV4dC5sZW5ndGg7YT1jK2EudGV4dC5sZW5ndGg7cmV0dXJuIGY9PVxyXG5cIlN0YXJ0XCI/YzphfWVsc2UgaWYodHlwZW9mIHRoaXNbXCJzZWxlY3Rpb25cIitmXSE9XCJ1bmRlZmluZWRcIilhPXRoaXNbXCJzZWxlY3Rpb25cIitmXTtyZXR1cm4gYX12YXIgcT17Y29kZXM6ezE4ODo0NCwxMDk6NDUsMTkwOjQ2LDE5MTo0NywxOTI6OTYsMjIwOjkyLDIyMjozOSwyMjE6OTMsMjE5OjkxLDE3Mzo0NSwxODc6NjEsMTg2OjU5LDE4OTo0NSwxMTA6NDZ9LHNoaWZ0czp7OTY6XCJ+XCIsNDk6XCIhXCIsNTA6XCJAXCIsNTE6XCIjXCIsNTI6XCIkXCIsNTM6XCIlXCIsNTQ6XCJeXCIsNTU6XCImXCIsNTY6XCIqXCIsNTc6XCIoXCIsNDg6XCIpXCIsNDU6XCJfXCIsNjE6XCIrXCIsOTE6XCJ7XCIsOTM6XCJ9XCIsOTI6XCJ8XCIsNTk6XCI6XCIsMzk6J1wiJyw0NDpcIjxcIiw0NjpcIj5cIiw0NzpcIj9cIn19O2guZm4ubnVtYmVyPWZ1bmN0aW9uKGYsYSxjLGspe2s9dHlwZW9mIGs9PT1cInVuZGVmaW5lZFwiP1wiLFwiOms7Yz10eXBlb2YgYz09PVwidW5kZWZpbmVkXCI/XCIuXCI6YzthPXR5cGVvZiBhPT09XCJ1bmRlZmluZWRcIj8wOmE7dmFyIGo9XCJcXFxcdVwiKyhcIjAwMDBcIitcclxuYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpLG89UmVnRXhwKFwiW15cIitqK1wiMC05XVwiLFwiZ1wiKSxwPVJlZ0V4cChqLFwiZ1wiKTtpZihmPT09dHJ1ZSlyZXR1cm4gdGhpcy5pcyhcImlucHV0OnRleHRcIik/dGhpcy5vbih7XCJrZXlkb3duLmZvcm1hdFwiOmZ1bmN0aW9uKGIpe3ZhciBkPWgodGhpcyksZT1kLmRhdGEoXCJudW1Gb3JtYXRcIiksZz1iLmtleUNvZGU/Yi5rZXlDb2RlOmIud2hpY2gsbT1cIlwiLGk9cy5hcHBseSh0aGlzLFtcInN0YXJ0XCJdKSxuPXMuYXBwbHkodGhpcyxbXCJlbmRcIl0pLGw9XCJcIjtsPWZhbHNlO2lmKHEuY29kZXMuaGFzT3duUHJvcGVydHkoZykpZz1xLmNvZGVzW2ddO2lmKCFiLnNoaWZ0S2V5JiZnPj02NSYmZzw9OTApZys9MzI7ZWxzZSBpZighYi5zaGlmdEtleSYmZz49NjkmJmc8PTEwNSlnLT00ODtlbHNlIGlmKGIuc2hpZnRLZXkmJnEuc2hpZnRzLmhhc093blByb3BlcnR5KGcpKW09cS5zaGlmdHNbZ107aWYobT09XCJcIiltPVN0cmluZy5mcm9tQ2hhckNvZGUoZyk7XHJcbmlmKGchPT04JiZtIT1jJiYhbS5tYXRjaCgvWzAtOV0vKSl7ZD1iLmtleUNvZGU/Yi5rZXlDb2RlOmIud2hpY2g7aWYoZD09NDZ8fGQ9PTh8fGQ9PTl8fGQ9PTI3fHxkPT0xM3x8KGQ9PTY1fHxkPT04MikmJihiLmN0cmxLZXl8fGIubWV0YUtleSk9PT10cnVlfHwoZD09ODZ8fGQ9PTY3KSYmKGIuY3RybEtleXx8Yi5tZXRhS2V5KT09PXRydWV8fGQ+PTM1JiZkPD0zOSlyZXR1cm47Yi5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBmYWxzZX1pZihpPT0wJiZuPT10aGlzLnZhbHVlLmxlbmd0aHx8ZC52YWwoKT09MClpZihnPT09OCl7aT1uPTE7dGhpcy52YWx1ZT1cIlwiO2UuaW5pdD1hPjA/LTE6MDtlLmM9YT4wPy0oYSsxKTowO3IuYXBwbHkodGhpcyxbMCwwXSl9ZWxzZSBpZihtPT09Yyl7aT1uPTE7dGhpcy52YWx1ZT1cIjBcIitjK0FycmF5KGErMSkuam9pbihcIjBcIik7ZS5pbml0PWE+MD8xOjA7ZS5jPWE+MD8tKGErMSk6MH1lbHNle2lmKHRoaXMudmFsdWUubGVuZ3RoPT09MCl7ZS5pbml0PVxyXG5hPjA/LTE6MDtlLmM9YT4wPy1hOjB9fWVsc2UgZS5jPW4tdGhpcy52YWx1ZS5sZW5ndGg7aWYoYT4wJiZtPT1jJiZpPT10aGlzLnZhbHVlLmxlbmd0aC1hLTEpe2UuYysrO2UuaW5pdD1NYXRoLm1heCgwLGUuaW5pdCk7Yi5wcmV2ZW50RGVmYXVsdCgpO2w9dGhpcy52YWx1ZS5sZW5ndGgrZS5jfWVsc2UgaWYobT09Yyl7ZS5pbml0PU1hdGgubWF4KDAsZS5pbml0KTtiLnByZXZlbnREZWZhdWx0KCl9ZWxzZSBpZihhPjAmJmc9PTgmJmk9PXRoaXMudmFsdWUubGVuZ3RoLWEpe2IucHJldmVudERlZmF1bHQoKTtlLmMtLTtsPXRoaXMudmFsdWUubGVuZ3RoK2UuY31lbHNlIGlmKGE+MCYmZz09OCYmaT50aGlzLnZhbHVlLmxlbmd0aC1hKXtpZih0aGlzLnZhbHVlPT09XCJcIilyZXR1cm47aWYodGhpcy52YWx1ZS5zbGljZShpLTEsaSkhPVwiMFwiKXtsPXRoaXMudmFsdWUuc2xpY2UoMCxpLTEpK1wiMFwiK3RoaXMudmFsdWUuc2xpY2UoaSk7ZC52YWwobC5yZXBsYWNlKG8sXCJcIikucmVwbGFjZShwLFxyXG5jKSl9Yi5wcmV2ZW50RGVmYXVsdCgpO2UuYy0tO2w9dGhpcy52YWx1ZS5sZW5ndGgrZS5jfWVsc2UgaWYoZz09OCYmdGhpcy52YWx1ZS5zbGljZShpLTEsaSk9PWspe2IucHJldmVudERlZmF1bHQoKTtlLmMtLTtsPXRoaXMudmFsdWUubGVuZ3RoK2UuY31lbHNlIGlmKGE+MCYmaT09biYmdGhpcy52YWx1ZS5sZW5ndGg+YSsxJiZpPnRoaXMudmFsdWUubGVuZ3RoLWEtMSYmaXNGaW5pdGUoK20pJiYhYi5tZXRhS2V5JiYhYi5jdHJsS2V5JiYhYi5hbHRLZXkmJm0ubGVuZ3RoPT09MSl7dGhpcy52YWx1ZT1sPW49PT10aGlzLnZhbHVlLmxlbmd0aD90aGlzLnZhbHVlLnNsaWNlKDAsaS0xKTp0aGlzLnZhbHVlLnNsaWNlKDAsaSkrdGhpcy52YWx1ZS5zbGljZShpKzEpO2w9aX1sIT09ZmFsc2UmJnIuYXBwbHkodGhpcyxbbCxsXSk7ZC5kYXRhKFwibnVtRm9ybWF0XCIsZSl9LFwia2V5dXAuZm9ybWF0XCI6ZnVuY3Rpb24oYil7dmFyIGQ9aCh0aGlzKSxlPWQuZGF0YShcIm51bUZvcm1hdFwiKTtiPWIua2V5Q29kZT9cclxuYi5rZXlDb2RlOmIud2hpY2g7dmFyIGc9cy5hcHBseSh0aGlzLFtcInN0YXJ0XCJdKTtpZighKHRoaXMudmFsdWU9PT1cIlwifHwoYjw0OHx8Yj41NykmJihiPDk2fHxiPjEwNSkmJmIhPT04KSl7ZC52YWwoZC52YWwoKSk7aWYoYT4wKWlmKGUuaW5pdDwxKXtnPXRoaXMudmFsdWUubGVuZ3RoLWEtKGUuaW5pdDwwPzE6MCk7ZS5jPWctdGhpcy52YWx1ZS5sZW5ndGg7ZS5pbml0PTE7ZC5kYXRhKFwibnVtRm9ybWF0XCIsZSl9ZWxzZSBpZihnPnRoaXMudmFsdWUubGVuZ3RoLWEmJmIhPTgpe2UuYysrO2QuZGF0YShcIm51bUZvcm1hdFwiLGUpfWQ9dGhpcy52YWx1ZS5sZW5ndGgrZS5jO3IuYXBwbHkodGhpcyxbZCxkXSl9fSxcInBhc3RlLmZvcm1hdFwiOmZ1bmN0aW9uKGIpe3ZhciBkPWgodGhpcyksZT1iLm9yaWdpbmFsRXZlbnQsZz1udWxsO2lmKHdpbmRvdy5jbGlwYm9hcmREYXRhJiZ3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKWc9d2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIik7XHJcbmVsc2UgaWYoZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSlnPWUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTtkLnZhbChnKTtiLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGZhbHNlfX0pLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1oKHRoaXMpLmRhdGEoXCJudW1Gb3JtYXRcIix7YzotKGErMSksZGVjaW1hbHM6YSx0aG91c2FuZHNfc2VwOmssZGVjX3BvaW50OmMscmVnZXhfZGVjX251bTpvLHJlZ2V4X2RlYzpwLGluaXQ6ZmFsc2V9KTt0aGlzLnZhbHVlIT09XCJcIiYmYi52YWwoYi52YWwoKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1oKHRoaXMpLGQ9K2IudGV4dCgpLnJlcGxhY2UobyxcIlwiKS5yZXBsYWNlKHAsXCIuXCIpO2IubnVtYmVyKCFpc0Zpbml0ZShkKT8wOitkLGEsYyxrKX0pO3JldHVybiB0aGlzLnRleHQoaC5udW1iZXIuYXBwbHkod2luZG93LGFyZ3VtZW50cykpfTt2YXIgdD1udWxsLHU9bnVsbDtpZihoLmlzUGxhaW5PYmplY3QoaC52YWxIb29rcy50ZXh0KSl7aWYoaC5pc0Z1bmN0aW9uKGgudmFsSG9va3MudGV4dC5nZXQpKXQ9XHJcbmgudmFsSG9va3MudGV4dC5nZXQ7aWYoaC5pc0Z1bmN0aW9uKGgudmFsSG9va3MudGV4dC5zZXQpKXU9aC52YWxIb29rcy50ZXh0LnNldH1lbHNlIGgudmFsSG9va3MudGV4dD17fTtoLnZhbEhvb2tzLnRleHQuZ2V0PWZ1bmN0aW9uKGYpe3ZhciBhPWgoZikuZGF0YShcIm51bUZvcm1hdFwiKTtpZihhKXtpZihmLnZhbHVlPT09XCJcIilyZXR1cm5cIlwiO2Y9K2YudmFsdWUucmVwbGFjZShhLnJlZ2V4X2RlY19udW0sXCJcIikucmVwbGFjZShhLnJlZ2V4X2RlYyxcIi5cIik7cmV0dXJuXCJcIisoaXNGaW5pdGUoZik/ZjowKX1lbHNlIGlmKGguaXNGdW5jdGlvbih0KSlyZXR1cm4gdChmKX07aC52YWxIb29rcy50ZXh0LnNldD1mdW5jdGlvbihmLGEpe3ZhciBjPWgoZikuZGF0YShcIm51bUZvcm1hdFwiKTtpZihjKXJldHVybiBmLnZhbHVlPWgubnVtYmVyKGEsYy5kZWNpbWFscyxjLmRlY19wb2ludCxjLnRob3VzYW5kc19zZXApO2Vsc2UgaWYoaC5pc0Z1bmN0aW9uKHUpKXJldHVybiB1KGYsYSl9O2gubnVtYmVyPVxyXG5mdW5jdGlvbihmLGEsYyxrKXtrPXR5cGVvZiBrPT09XCJ1bmRlZmluZWRcIj9cIixcIjprO2M9dHlwZW9mIGM9PT1cInVuZGVmaW5lZFwiP1wiLlwiOmM7YT0haXNGaW5pdGUoK2EpPzA6TWF0aC5hYnMoYSk7dmFyIGo9XCJcXFxcdVwiKyhcIjAwMDBcIitjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCksbz1cIlxcXFx1XCIrKFwiMDAwMFwiK2suY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTtmPShmK1wiXCIpLnJlcGxhY2UoXCIuXCIsYykucmVwbGFjZShSZWdFeHAobyxcImdcIiksXCJcIikucmVwbGFjZShSZWdFeHAoaixcImdcIiksXCIuXCIpLnJlcGxhY2UoUmVnRXhwKFwiW14wLTkrLUVlLl1cIixcImdcIiksXCJcIik7Zj0haXNGaW5pdGUoK2YpPzA6K2Y7aj1cIlwiO2o9ZnVuY3Rpb24ocCxiKXt2YXIgZD1NYXRoLnBvdygxMCxiKTtyZXR1cm5cIlwiK01hdGgucm91bmQocCpkKS9kfTtqPShhP2ooZixhKTpcIlwiK01hdGgucm91bmQoZikpLnNwbGl0KFwiLlwiKTtpZihqWzBdLmxlbmd0aD4zKWpbMF09alswXS5yZXBsYWNlKC9cXEIoPz0oPzpcXGR7M30pKyg/IVxcZCkpL2csXHJcbmspO2lmKChqWzFdfHxcIlwiKS5sZW5ndGg8YSl7alsxXT1qWzFdfHxcIlwiO2pbMV0rPUFycmF5KGEtalsxXS5sZW5ndGgrMSkuam9pbihcIjBcIil9cmV0dXJuIGouam9pbihjKX19KShqUXVlcnkpOyIsIi8qISBsaWdodGdhbGxlcnkgLSB2MS4zLjQgLSAyMDE2LTA5LTI4XHJcbiogaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeS9cclxuKiBDb3B5cmlnaHQgKGMpIDIwMTYgU2FjaGluIE47IExpY2Vuc2VkIEFwYWNoZSAyLjAgKi9cclxuIWZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJqcXVlcnlcIikpOmIoalF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXshZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGQpe2lmKHRoaXMuZWw9Yix0aGlzLiRlbD1hKGIpLHRoaXMucz1hLmV4dGVuZCh7fSxmLGQpLHRoaXMucy5keW5hbWljJiZcInVuZGVmaW5lZFwiIT09dGhpcy5zLmR5bmFtaWNFbCYmdGhpcy5zLmR5bmFtaWNFbC5jb25zdHJ1Y3Rvcj09PUFycmF5JiYhdGhpcy5zLmR5bmFtaWNFbC5sZW5ndGgpdGhyb3dcIldoZW4gdXNpbmcgZHluYW1pYyBtb2RlLCB5b3UgbXVzdCBhbHNvIGRlZmluZSBkeW5hbWljRWwgYXMgYW4gQXJyYXkuXCI7cmV0dXJuIHRoaXMubW9kdWxlcz17fSx0aGlzLmxHYWxsZXJ5T249ITEsdGhpcy5sZ0J1c3k9ITEsdGhpcy5oaWRlQmFydGltZW91dD0hMSx0aGlzLmlzVG91Y2g9XCJvbnRvdWNoc3RhcnRcImluIGMuZG9jdW1lbnRFbGVtZW50LHRoaXMucy5zbGlkZUVuZEFuaW1hdG9pbiYmKHRoaXMucy5oaWRlQ29udHJvbE9uRW5kPSExKSx0aGlzLnMuZHluYW1pYz90aGlzLiRpdGVtcz10aGlzLnMuZHluYW1pY0VsOlwidGhpc1wiPT09dGhpcy5zLnNlbGVjdG9yP3RoaXMuJGl0ZW1zPXRoaXMuJGVsOlwiXCIhPT10aGlzLnMuc2VsZWN0b3I/dGhpcy5zLnNlbGVjdFdpdGhpbj90aGlzLiRpdGVtcz1hKHRoaXMucy5zZWxlY3RXaXRoaW4pLmZpbmQodGhpcy5zLnNlbGVjdG9yKTp0aGlzLiRpdGVtcz10aGlzLiRlbC5maW5kKGEodGhpcy5zLnNlbGVjdG9yKSk6dGhpcy4kaXRlbXM9dGhpcy4kZWwuY2hpbGRyZW4oKSx0aGlzLiRzbGlkZT1cIlwiLHRoaXMuJG91dGVyPVwiXCIsdGhpcy5pbml0KCksdGhpc312YXIgZj17bW9kZTpcImxnLXNsaWRlXCIsY3NzRWFzaW5nOlwiZWFzZVwiLGVhc2luZzpcImxpbmVhclwiLHNwZWVkOjYwMCxoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsYWRkQ2xhc3M6XCJcIixzdGFydENsYXNzOlwibGctc3RhcnQtem9vbVwiLGJhY2tkcm9wRHVyYXRpb246MTUwLGhpZGVCYXJzRGVsYXk6NmUzLHVzZUxlZnQ6ITEsY2xvc2FibGU6ITAsbG9vcDohMCxlc2NLZXk6ITAsa2V5UHJlc3M6ITAsY29udHJvbHM6ITAsc2xpZGVFbmRBbmltYXRvaW46ITAsaGlkZUNvbnRyb2xPbkVuZDohMSxtb3VzZXdoZWVsOiEwLGdldENhcHRpb25Gcm9tVGl0bGVPckFsdDohMCxhcHBlbmRTdWJIdG1sVG86XCIubGctc3ViLWh0bWxcIixzdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZTohMSxwcmVsb2FkOjEsc2hvd0FmdGVyTG9hZDohMCxzZWxlY3RvcjpcIlwiLHNlbGVjdFdpdGhpbjpcIlwiLG5leHRIdG1sOlwiXCIscHJldkh0bWw6XCJcIixpbmRleDohMSxpZnJhbWVNYXhXaWR0aDpcIjEwMCVcIixkb3dubG9hZDohMCxjb3VudGVyOiEwLGFwcGVuZENvdW50ZXJUbzpcIi5sZy10b29sYmFyXCIsc3dpcGVUaHJlc2hvbGQ6NTAsZW5hYmxlU3dpcGU6ITAsZW5hYmxlRHJhZzohMCxkeW5hbWljOiExLGR5bmFtaWNFbDpbXSxnYWxsZXJ5SWQ6MX07ZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBjPXRoaXM7Yy5zLnByZWxvYWQ+Yy4kaXRlbXMubGVuZ3RoJiYoYy5zLnByZWxvYWQ9Yy4kaXRlbXMubGVuZ3RoKTt2YXIgZD1iLmxvY2F0aW9uLmhhc2g7ZC5pbmRleE9mKFwibGc9XCIrdGhpcy5zLmdhbGxlcnlJZCk+MCYmKGMuaW5kZXg9cGFyc2VJbnQoZC5zcGxpdChcIiZzbGlkZT1cIilbMV0sMTApLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctZnJvbS1oYXNoXCIpLGEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctb25cIil8fChzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5idWlsZChjLmluZGV4KX0pLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctb25cIikpKSxjLnMuZHluYW1pYz8oYy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlT3Blbi5sZ1wiKSxjLmluZGV4PWMucy5pbmRleHx8MCxhKFwiYm9keVwiKS5oYXNDbGFzcyhcImxnLW9uXCIpfHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5idWlsZChjLmluZGV4KSxhKFwiYm9keVwiKS5hZGRDbGFzcyhcImxnLW9uXCIpfSkpOmMuJGl0ZW1zLm9uKFwiY2xpY2subGdjdXN0b21cIixmdW5jdGlvbihiKXt0cnl7Yi5wcmV2ZW50RGVmYXVsdCgpLGIucHJldmVudERlZmF1bHQoKX1jYXRjaChkKXtiLnJldHVyblZhbHVlPSExfWMuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU9wZW4ubGdcIiksYy5pbmRleD1jLnMuaW5kZXh8fGMuJGl0ZW1zLmluZGV4KHRoaXMpLGEoXCJib2R5XCIpLmhhc0NsYXNzKFwibGctb25cIil8fChjLmJ1aWxkKGMuaW5kZXgpLGEoXCJib2R5XCIpLmFkZENsYXNzKFwibGctb25cIikpfSl9LGUucHJvdG90eXBlLmJ1aWxkPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7Yy5zdHJ1Y3R1cmUoKSxhLmVhY2goYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcyxmdW5jdGlvbihiKXtjLm1vZHVsZXNbYl09bmV3IGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXNbYl0oYy5lbCl9KSxjLnNsaWRlKGIsITEsITEpLGMucy5rZXlQcmVzcyYmYy5rZXlQcmVzcygpLGMuJGl0ZW1zLmxlbmd0aD4xJiYoYy5hcnJvdygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmVuYWJsZURyYWcoKSxjLmVuYWJsZVN3aXBlKCl9LDUwKSxjLnMubW91c2V3aGVlbCYmYy5tb3VzZXdoZWVsKCkpLGMuY291bnRlcigpLGMuY2xvc2VHYWxsZXJ5KCksYy4kZWwudHJpZ2dlcihcIm9uQWZ0ZXJPcGVuLmxnXCIpLGMuJG91dGVyLm9uKFwibW91c2Vtb3ZlLmxnIGNsaWNrLmxnIHRvdWNoc3RhcnQubGdcIixmdW5jdGlvbigpe2MuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctaGlkZS1pdGVtc1wiKSxjbGVhclRpbWVvdXQoYy5oaWRlQmFydGltZW91dCksYy5oaWRlQmFydGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1oaWRlLWl0ZW1zXCIpfSxjLnMuaGlkZUJhcnNEZWxheSl9KX0sZS5wcm90b3R5cGUuc3RydWN0dXJlPWZ1bmN0aW9uKCl7dmFyIGMsZD1cIlwiLGU9XCJcIixmPTAsZz1cIlwiLGg9dGhpcztmb3IoYShcImJvZHlcIikuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibGctYmFja2Ryb3BcIj48L2Rpdj4nKSxhKFwiLmxnLWJhY2tkcm9wXCIpLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIix0aGlzLnMuYmFja2Ryb3BEdXJhdGlvbitcIm1zXCIpLGY9MDtmPHRoaXMuJGl0ZW1zLmxlbmd0aDtmKyspZCs9JzxkaXYgY2xhc3M9XCJsZy1pdGVtXCI+PC9kaXY+JztpZih0aGlzLnMuY29udHJvbHMmJnRoaXMuJGl0ZW1zLmxlbmd0aD4xJiYoZT0nPGRpdiBjbGFzcz1cImxnLWFjdGlvbnNcIj48ZGl2IGNsYXNzPVwibGctcHJldiBsZy1pY29uXCI+Jyt0aGlzLnMucHJldkh0bWwrJzwvZGl2PjxkaXYgY2xhc3M9XCJsZy1uZXh0IGxnLWljb25cIj4nK3RoaXMucy5uZXh0SHRtbCtcIjwvZGl2PjwvZGl2PlwiKSxcIi5sZy1zdWItaHRtbFwiPT09dGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyYmKGc9JzxkaXYgY2xhc3M9XCJsZy1zdWItaHRtbFwiPjwvZGl2PicpLGM9JzxkaXYgY2xhc3M9XCJsZy1vdXRlciAnK3RoaXMucy5hZGRDbGFzcytcIiBcIit0aGlzLnMuc3RhcnRDbGFzcysnXCI+PGRpdiBjbGFzcz1cImxnXCIgc3R5bGU9XCJ3aWR0aDonK3RoaXMucy53aWR0aCtcIjsgaGVpZ2h0OlwiK3RoaXMucy5oZWlnaHQrJ1wiPjxkaXYgY2xhc3M9XCJsZy1pbm5lclwiPicrZCsnPC9kaXY+PGRpdiBjbGFzcz1cImxnLXRvb2xiYXIgZ3JvdXBcIj48c3BhbiBjbGFzcz1cImxnLWNsb3NlIGxnLWljb25cIj48L3NwYW4+PC9kaXY+JytlK2crXCI8L2Rpdj48L2Rpdj5cIixhKFwiYm9keVwiKS5hcHBlbmQoYyksdGhpcy4kb3V0ZXI9YShcIi5sZy1vdXRlclwiKSx0aGlzLiRzbGlkZT10aGlzLiRvdXRlci5maW5kKFwiLmxnLWl0ZW1cIiksdGhpcy5zLnVzZUxlZnQ/KHRoaXMuJG91dGVyLmFkZENsYXNzKFwibGctdXNlLWxlZnRcIiksdGhpcy5zLm1vZGU9XCJsZy1zbGlkZVwiKTp0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLXVzZS1jc3MzXCIpLGguc2V0VG9wKCksYShiKS5vbihcInJlc2l6ZS5sZyBvcmllbnRhdGlvbmNoYW5nZS5sZ1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2guc2V0VG9wKCl9LDEwMCl9KSx0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS5hZGRDbGFzcyhcImxnLWN1cnJlbnRcIiksdGhpcy5kb0NzcygpP3RoaXMuJG91dGVyLmFkZENsYXNzKFwibGctY3NzM1wiKToodGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1jc3NcIiksdGhpcy5zLnNwZWVkPTApLHRoaXMuJG91dGVyLmFkZENsYXNzKHRoaXMucy5tb2RlKSx0aGlzLnMuZW5hYmxlRHJhZyYmdGhpcy4kaXRlbXMubGVuZ3RoPjEmJnRoaXMuJG91dGVyLmFkZENsYXNzKFwibGctZ3JhYlwiKSx0aGlzLnMuc2hvd0FmdGVyTG9hZCYmdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1zaG93LWFmdGVyLWxvYWRcIiksdGhpcy5kb0NzcygpKXt2YXIgaT10aGlzLiRvdXRlci5maW5kKFwiLmxnLWlubmVyXCIpO2kuY3NzKFwidHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIix0aGlzLnMuY3NzRWFzaW5nKSxpLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIix0aGlzLnMuc3BlZWQrXCJtc1wiKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShcIi5sZy1iYWNrZHJvcFwiKS5hZGRDbGFzcyhcImluXCIpfSksc2V0VGltZW91dChmdW5jdGlvbigpe2guJG91dGVyLmFkZENsYXNzKFwibGctdmlzaWJsZVwiKX0sdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24pLHRoaXMucy5kb3dubG9hZCYmdGhpcy4kb3V0ZXIuZmluZChcIi5sZy10b29sYmFyXCIpLmFwcGVuZCgnPGEgaWQ9XCJsZy1kb3dubG9hZFwiIHRhcmdldD1cIl9ibGFua1wiIGRvd25sb2FkIGNsYXNzPVwibGctZG93bmxvYWQgbGctaWNvblwiPjwvYT4nKSx0aGlzLnByZXZTY3JvbGxUb3A9YShiKS5zY3JvbGxUb3AoKX0sZS5wcm90b3R5cGUuc2V0VG9wPWZ1bmN0aW9uKCl7aWYoXCIxMDAlXCIhPT10aGlzLnMuaGVpZ2h0KXt2YXIgYz1hKGIpLmhlaWdodCgpLGQ9KGMtcGFyc2VJbnQodGhpcy5zLmhlaWdodCwxMCkpLzIsZT10aGlzLiRvdXRlci5maW5kKFwiLmxnXCIpO2M+PXBhcnNlSW50KHRoaXMucy5oZWlnaHQsMTApP2UuY3NzKFwidG9wXCIsZCtcInB4XCIpOmUuY3NzKFwidG9wXCIsXCIwcHhcIil9fSxlLnByb3RvdHlwZS5kb0Nzcz1mdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKCl7dmFyIGE9W1widHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiLFwiS2h0bWxUcmFuc2l0aW9uXCJdLGI9Yy5kb2N1bWVudEVsZW1lbnQsZD0wO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspaWYoYVtkXWluIGIuc3R5bGUpcmV0dXJuITB9O3JldHVybiEhYSgpfSxlLnByb3RvdHlwZS5pc1ZpZGVvPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYz10aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLmh0bWw6dGhpcy4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtaHRtbFwiKSwhYSYmYylyZXR1cm57aHRtbDU6ITB9O3ZhciBkPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/eW91dHUoPzpcXC5iZXxiZVxcLmNvbSlcXC8oPzp3YXRjaFxcP3Y9fGVtYmVkXFwvKT8oW2EtejAtOVxcLVxcX1xcJV0rKS9pKSxlPWEubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/dmltZW8uY29tXFwvKFswLTlhLXpcXC1fXSspL2kpLGY9YS5tYXRjaCgvXFwvXFwvKD86d3d3XFwuKT9kYWkubHlcXC8oWzAtOWEtelxcLV9dKykvaSksZz1hLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pPyg/OnZrXFwuY29tfHZrb250YWt0ZVxcLnJ1KVxcLyg/OnZpZGVvX2V4dFxcLnBocFxcPykoLiopL2kpO3JldHVybiBkP3t5b3V0dWJlOmR9OmU/e3ZpbWVvOmV9OmY/e2RhaWx5bW90aW9uOmZ9Omc/e3ZrOmd9OnZvaWQgMH0sZS5wcm90b3R5cGUuY291bnRlcj1mdW5jdGlvbigpe3RoaXMucy5jb3VudGVyJiZhKHRoaXMucy5hcHBlbmRDb3VudGVyVG8pLmFwcGVuZCgnPGRpdiBpZD1cImxnLWNvdW50ZXJcIj48c3BhbiBpZD1cImxnLWNvdW50ZXItY3VycmVudFwiPicrKHBhcnNlSW50KHRoaXMuaW5kZXgsMTApKzEpKyc8L3NwYW4+IC8gPHNwYW4gaWQ9XCJsZy1jb3VudGVyLWFsbFwiPicrdGhpcy4kaXRlbXMubGVuZ3RoK1wiPC9zcGFuPjwvZGl2PlwiKX0sZS5wcm90b3R5cGUuYWRkSHRtbD1mdW5jdGlvbihiKXt2YXIgYyxkLGU9bnVsbDtpZih0aGlzLnMuZHluYW1pYz90aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw/Yz10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWxVcmw6ZT10aGlzLnMuZHluYW1pY0VsW2JdLnN1Ykh0bWw6KGQ9dGhpcy4kaXRlbXMuZXEoYiksZC5hdHRyKFwiZGF0YS1zdWItaHRtbC11cmxcIik/Yz1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sLXVybFwiKTooZT1kLmF0dHIoXCJkYXRhLXN1Yi1odG1sXCIpLHRoaXMucy5nZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQmJiFlJiYoZT1kLmF0dHIoXCJ0aXRsZVwiKXx8ZC5maW5kKFwiaW1nXCIpLmZpcnN0KCkuYXR0cihcImFsdFwiKSkpKSwhYylpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbnVsbCE9PWUpe3ZhciBmPWUuc3Vic3RyaW5nKDAsMSk7XCIuXCIhPT1mJiZcIiNcIiE9PWZ8fChlPXRoaXMucy5zdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZSYmIXRoaXMucy5keW5hbWljP2QuZmluZChlKS5odG1sKCk6YShlKS5odG1sKCkpfWVsc2UgZT1cIlwiO1wiLmxnLXN1Yi1odG1sXCI9PT10aGlzLnMuYXBwZW5kU3ViSHRtbFRvP2M/dGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5sb2FkKGMpOnRoaXMuJG91dGVyLmZpbmQodGhpcy5zLmFwcGVuZFN1Ykh0bWxUbykuaHRtbChlKTpjP3RoaXMuJHNsaWRlLmVxKGIpLmxvYWQoYyk6dGhpcy4kc2xpZGUuZXEoYikuYXBwZW5kKGUpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZudWxsIT09ZSYmKFwiXCI9PT1lP3RoaXMuJG91dGVyLmZpbmQodGhpcy5zLmFwcGVuZFN1Ykh0bWxUbykuYWRkQ2xhc3MoXCJsZy1lbXB0eS1odG1sXCIpOnRoaXMuJG91dGVyLmZpbmQodGhpcy5zLmFwcGVuZFN1Ykh0bWxUbykucmVtb3ZlQ2xhc3MoXCJsZy1lbXB0eS1odG1sXCIpKSx0aGlzLiRlbC50cmlnZ2VyKFwib25BZnRlckFwcGVuZFN1Ykh0bWwubGdcIixbYl0pfSxlLnByb3RvdHlwZS5wcmVsb2FkPWZ1bmN0aW9uKGEpe3ZhciBiPTEsYz0xO2ZvcihiPTE7Yjw9dGhpcy5zLnByZWxvYWQmJiEoYj49dGhpcy4kaXRlbXMubGVuZ3RoLWEpO2IrKyl0aGlzLmxvYWRDb250ZW50KGErYiwhMSwwKTtmb3IoYz0xO2M8PXRoaXMucy5wcmVsb2FkJiYhKDA+YS1jKTtjKyspdGhpcy5sb2FkQ29udGVudChhLWMsITEsMCl9LGUucHJvdG90eXBlLmxvYWRDb250ZW50PWZ1bmN0aW9uKGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbD10aGlzLG09ITEsbj1mdW5jdGlvbihjKXtmb3IodmFyIGQ9W10sZT1bXSxmPTA7ZjxjLmxlbmd0aDtmKyspe3ZhciBoPWNbZl0uc3BsaXQoXCIgXCIpO1wiXCI9PT1oWzBdJiZoLnNwbGljZSgwLDEpLGUucHVzaChoWzBdKSxkLnB1c2goaFsxXSl9Zm9yKHZhciBpPWEoYikud2lkdGgoKSxqPTA7ajxkLmxlbmd0aDtqKyspaWYocGFyc2VJbnQoZFtqXSwxMCk+aSl7Zz1lW2pdO2JyZWFrfX07aWYobC5zLmR5bmFtaWMpe2lmKGwucy5keW5hbWljRWxbY10ucG9zdGVyJiYobT0hMCxoPWwucy5keW5hbWljRWxbY10ucG9zdGVyKSxrPWwucy5keW5hbWljRWxbY10uaHRtbCxnPWwucy5keW5hbWljRWxbY10uc3JjLGwucy5keW5hbWljRWxbY10ucmVzcG9uc2l2ZSl7dmFyIG89bC5zLmR5bmFtaWNFbFtjXS5yZXNwb25zaXZlLnNwbGl0KFwiLFwiKTtuKG8pfWk9bC5zLmR5bmFtaWNFbFtjXS5zcmNzZXQsaj1sLnMuZHluYW1pY0VsW2NdLnNpemVzfWVsc2V7aWYobC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtcG9zdGVyXCIpJiYobT0hMCxoPWwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLXBvc3RlclwiKSksaz1sLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1odG1sXCIpLGc9bC4kaXRlbXMuZXEoYykuYXR0cihcImhyZWZcIil8fGwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLXNyY1wiKSxsLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1yZXNwb25zaXZlXCIpKXt2YXIgcD1sLiRpdGVtcy5lcShjKS5hdHRyKFwiZGF0YS1yZXNwb25zaXZlXCIpLnNwbGl0KFwiLFwiKTtuKHApfWk9bC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtc3Jjc2V0XCIpLGo9bC4kaXRlbXMuZXEoYykuYXR0cihcImRhdGEtc2l6ZXNcIil9dmFyIHE9ITE7bC5zLmR5bmFtaWM/bC5zLmR5bmFtaWNFbFtjXS5pZnJhbWUmJihxPSEwKTpcInRydWVcIj09PWwuJGl0ZW1zLmVxKGMpLmF0dHIoXCJkYXRhLWlmcmFtZVwiKSYmKHE9ITApO3ZhciByPWwuaXNWaWRlbyhnLGMpO2lmKCFsLiRzbGlkZS5lcShjKS5oYXNDbGFzcyhcImxnLWxvYWRlZFwiKSl7aWYocSlsLiRzbGlkZS5lcShjKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctdmlkZW8tY29udFwiIHN0eWxlPVwibWF4LXdpZHRoOicrbC5zLmlmcmFtZU1heFdpZHRoKydcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48aWZyYW1lIGNsYXNzPVwibGctb2JqZWN0XCIgZnJhbWVib3JkZXI9XCIwXCIgc3JjPVwiJytnKydcIiAgYWxsb3dmdWxsc2NyZWVuPVwidHJ1ZVwiPjwvaWZyYW1lPjwvZGl2PjwvZGl2PicpO2Vsc2UgaWYobSl7dmFyIHM9XCJcIjtzPXImJnIueW91dHViZT9cImxnLWhhcy15b3V0dWJlXCI6ciYmci52aW1lbz9cImxnLWhhcy12aW1lb1wiOlwibGctaGFzLWh0bWw1XCIsbC4kc2xpZGUuZXEoYykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLXZpZGVvLWNvbnQgJytzKycgXCI+PGRpdiBjbGFzcz1cImxnLXZpZGVvXCI+PHNwYW4gY2xhc3M9XCJsZy12aWRlby1wbGF5XCI+PC9zcGFuPjxpbWcgY2xhc3M9XCJsZy1vYmplY3QgbGctaGFzLXBvc3RlclwiIHNyYz1cIicraCsnXCIgLz48L2Rpdj48L2Rpdj4nKX1lbHNlIHI/KGwuJHNsaWRlLmVxKGMpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250IFwiPjxkaXYgY2xhc3M9XCJsZy12aWRlb1wiPjwvZGl2PjwvZGl2PicpLGwuJGVsLnRyaWdnZXIoXCJoYXNWaWRlby5sZ1wiLFtjLGcsa10pKTpsLiRzbGlkZS5lcShjKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctaW1nLXdyYXBcIj48aW1nIGNsYXNzPVwibGctb2JqZWN0IGxnLWltYWdlXCIgc3JjPVwiJytnKydcIiAvPjwvZGl2PicpO2lmKGwuJGVsLnRyaWdnZXIoXCJvbkFmZXJBcHBlbmRTbGlkZS5sZ1wiLFtjXSksZj1sLiRzbGlkZS5lcShjKS5maW5kKFwiLmxnLW9iamVjdFwiKSxqJiZmLmF0dHIoXCJzaXplc1wiLGopLGkpe2YuYXR0cihcInNyY3NldFwiLGkpO3RyeXtwaWN0dXJlZmlsbCh7ZWxlbWVudHM6W2ZbMF1dfSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCBQaWN0dXJlZmlsbCB2ZXJzaW9uIDJcIil9fVwiLmxnLXN1Yi1odG1sXCIhPT10aGlzLnMuYXBwZW5kU3ViSHRtbFRvJiZsLmFkZEh0bWwoYyksbC4kc2xpZGUuZXEoYykuYWRkQ2xhc3MoXCJsZy1sb2FkZWRcIil9bC4kc2xpZGUuZXEoYykuZmluZChcIi5sZy1vYmplY3RcIikub24oXCJsb2FkLmxnIGVycm9yLmxnXCIsZnVuY3Rpb24oKXt2YXIgYj0wO2UmJiFhKFwiYm9keVwiKS5oYXNDbGFzcyhcImxnLWZyb20taGFzaFwiKSYmKGI9ZSksc2V0VGltZW91dChmdW5jdGlvbigpe2wuJHNsaWRlLmVxKGMpLmFkZENsYXNzKFwibGctY29tcGxldGVcIiksbC4kZWwudHJpZ2dlcihcIm9uU2xpZGVJdGVtTG9hZC5sZ1wiLFtjLGV8fDBdKX0sYil9KSxyJiZyLmh0bWw1JiYhbSYmbC4kc2xpZGUuZXEoYykuYWRkQ2xhc3MoXCJsZy1jb21wbGV0ZVwiKSxkPT09ITAmJihsLiRzbGlkZS5lcShjKS5oYXNDbGFzcyhcImxnLWNvbXBsZXRlXCIpP2wucHJlbG9hZChjKTpsLiRzbGlkZS5lcShjKS5maW5kKFwiLmxnLW9iamVjdFwiKS5vbihcImxvYWQubGcgZXJyb3IubGdcIixmdW5jdGlvbigpe2wucHJlbG9hZChjKX0pKX0sZS5wcm90b3R5cGUuc2xpZGU9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXRoaXMuJG91dGVyLmZpbmQoXCIubGctY3VycmVudFwiKS5pbmRleCgpLGY9dGhpcztpZighZi5sR2FsbGVyeU9ufHxlIT09Yil7dmFyIGc9dGhpcy4kc2xpZGUubGVuZ3RoLGg9Zi5sR2FsbGVyeU9uP3RoaXMucy5zcGVlZDowLGk9ITEsaj0hMTtpZighZi5sZ0J1c3kpe2lmKHRoaXMucy5kb3dubG9hZCl7dmFyIGs7az1mLnMuZHluYW1pYz9mLnMuZHluYW1pY0VsW2JdLmRvd25sb2FkVXJsIT09ITEmJihmLnMuZHluYW1pY0VsW2JdLmRvd25sb2FkVXJsfHxmLnMuZHluYW1pY0VsW2JdLnNyYyk6XCJmYWxzZVwiIT09Zi4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpJiYoZi4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtZG93bmxvYWQtdXJsXCIpfHxmLiRpdGVtcy5lcShiKS5hdHRyKFwiaHJlZlwiKXx8Zi4kaXRlbXMuZXEoYikuYXR0cihcImRhdGEtc3JjXCIpKSxrPyhhKFwiI2xnLWRvd25sb2FkXCIpLmF0dHIoXCJocmVmXCIsayksZi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1oaWRlLWRvd25sb2FkXCIpKTpmLiRvdXRlci5hZGRDbGFzcyhcImxnLWhpZGUtZG93bmxvYWRcIil9aWYodGhpcy4kZWwudHJpZ2dlcihcIm9uQmVmb3JlU2xpZGUubGdcIixbZSxiLGMsZF0pLGYubGdCdXN5PSEwLGNsZWFyVGltZW91dChmLmhpZGVCYXJ0aW1lb3V0KSxcIi5sZy1zdWItaHRtbFwiPT09dGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyYmc2V0VGltZW91dChmdW5jdGlvbigpe2YuYWRkSHRtbChiKX0saCksdGhpcy5hcnJvd0Rpc2FibGUoYiksYyl7dmFyIGw9Yi0xLG09YisxOzA9PT1iJiZlPT09Zy0xPyhtPTAsbD1nLTEpOmI9PT1nLTEmJjA9PT1lJiYobT0wLGw9Zy0xKSx0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctY3VycmVudCBsZy1uZXh0LXNsaWRlXCIpLGYuJHNsaWRlLmVxKGwpLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSxmLiRzbGlkZS5lcShtKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIiksZi4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpfWVsc2UgZi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1uby10cmFuc1wiKSx0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLXByZXYtc2xpZGUgbGctbmV4dC1zbGlkZVwiKSxlPmI/KGo9ITAsMCE9PWJ8fGUhPT1nLTF8fGR8fChqPSExLGk9ITApKTpiPmUmJihpPSEwLGIhPT1nLTF8fDAhPT1lfHxkfHwoaj0hMCxpPSExKSksaj8odGhpcy4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1wcmV2LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKGUpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSk6aSYmKHRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctbmV4dC1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShlKS5hZGRDbGFzcyhcImxnLXByZXYtc2xpZGVcIikpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLiRzbGlkZS5yZW1vdmVDbGFzcyhcImxnLWN1cnJlbnRcIiksZi4kc2xpZGUuZXEoYikuYWRkQ2xhc3MoXCJsZy1jdXJyZW50XCIpLGYuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctbm8tdHJhbnNcIil9LDUwKTtmLmxHYWxsZXJ5T24/KHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmxvYWRDb250ZW50KGIsITAsMCl9LHRoaXMucy5zcGVlZCs1MCksc2V0VGltZW91dChmdW5jdGlvbigpe2YubGdCdXN5PSExLGYuJGVsLnRyaWdnZXIoXCJvbkFmdGVyU2xpZGUubGdcIixbZSxiLGMsZF0pfSx0aGlzLnMuc3BlZWQpKTooZi5sb2FkQ29udGVudChiLCEwLGYucy5iYWNrZHJvcER1cmF0aW9uKSxmLmxnQnVzeT0hMSxmLiRlbC50cmlnZ2VyKFwib25BZnRlclNsaWRlLmxnXCIsW2UsYixjLGRdKSksZi5sR2FsbGVyeU9uPSEwLHRoaXMucy5jb3VudGVyJiZhKFwiI2xnLWNvdW50ZXItY3VycmVudFwiKS50ZXh0KGIrMSl9fX0sZS5wcm90b3R5cGUuZ29Ub05leHRTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubGdCdXN5fHwoYi5pbmRleCsxPGIuJHNsaWRlLmxlbmd0aD8oYi5pbmRleCsrLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEpKTpiLnMubG9vcD8oYi5pbmRleD0wLGIuJGVsLnRyaWdnZXIoXCJvbkJlZm9yZU5leHRTbGlkZS5sZ1wiLFtiLmluZGV4XSksYi5zbGlkZShiLmluZGV4LGEsITEpKTpiLnMuc2xpZGVFbmRBbmltYXRvaW4mJihiLiRvdXRlci5hZGRDbGFzcyhcImxnLXJpZ2h0LWVuZFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1yaWdodC1lbmRcIil9LDQwMCkpKX0sZS5wcm90b3R5cGUuZ29Ub1ByZXZTbGlkZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubGdCdXN5fHwoYi5pbmRleD4wPyhiLmluZGV4LS0sYi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlUHJldlNsaWRlLmxnXCIsW2IuaW5kZXgsYV0pLGIuc2xpZGUoYi5pbmRleCxhLCExKSk6Yi5zLmxvb3A/KGIuaW5kZXg9Yi4kaXRlbXMubGVuZ3RoLTEsYi4kZWwudHJpZ2dlcihcIm9uQmVmb3JlUHJldlNsaWRlLmxnXCIsW2IuaW5kZXgsYV0pLGIuc2xpZGUoYi5pbmRleCxhLCExKSk6Yi5zLnNsaWRlRW5kQW5pbWF0b2luJiYoYi4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1sZWZ0LWVuZFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1sZWZ0LWVuZFwiKX0sNDAwKSkpfSxlLnByb3RvdHlwZS5rZXlQcmVzcz1mdW5jdGlvbigpe3ZhciBjPXRoaXM7dGhpcy4kaXRlbXMubGVuZ3RoPjEmJmEoYikub24oXCJrZXl1cC5sZ1wiLGZ1bmN0aW9uKGEpe2MuJGl0ZW1zLmxlbmd0aD4xJiYoMzc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYy5nb1RvUHJldlNsaWRlKCkpLDM5PT09YS5rZXlDb2RlJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGMuZ29Ub05leHRTbGlkZSgpKSl9KSxhKGIpLm9uKFwia2V5ZG93bi5sZ1wiLGZ1bmN0aW9uKGEpe2Mucy5lc2NLZXk9PT0hMCYmMjc9PT1hLmtleUNvZGUmJihhLnByZXZlbnREZWZhdWx0KCksYy4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpP2MuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKTpjLmRlc3Ryb3koKSl9KX0sZS5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9QcmV2U2xpZGUoKX0pLHRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmdvVG9OZXh0U2xpZGUoKX0pfSxlLnByb3RvdHlwZS5hcnJvd0Rpc2FibGU9ZnVuY3Rpb24oYSl7IXRoaXMucy5sb29wJiZ0aGlzLnMuaGlkZUNvbnRyb2xPbkVuZCYmKGErMTx0aGlzLiRzbGlkZS5sZW5ndGg/dGhpcy4kb3V0ZXIuZmluZChcIi5sZy1uZXh0XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpOnRoaXMuJG91dGVyLmZpbmQoXCIubGctbmV4dFwiKS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksYT4wP3RoaXMuJG91dGVyLmZpbmQoXCIubGctcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTp0aGlzLiRvdXRlci5maW5kKFwiLmxnLXByZXZcIikuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpKX0sZS5wcm90b3R5cGUuc2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnMudXNlTGVmdD9hLmNzcyhcImxlZnRcIixiKTphLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYitcInB4LCBcIitjK1wicHgsIDBweClcIn0pfSxlLnByb3RvdHlwZS50b3VjaE1vdmU9ZnVuY3Rpb24oYixjKXt2YXIgZD1jLWI7TWF0aC5hYnMoZCk+MTUmJih0aGlzLiRvdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLGQsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1wcmV2LXNsaWRlXCIpLC10aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS53aWR0aCgpK2QsMCksdGhpcy5zZXRUcmFuc2xhdGUoYShcIi5sZy1uZXh0LXNsaWRlXCIpLHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLndpZHRoKCkrZCwwKSl9LGUucHJvdG90eXBlLnRvdWNoRW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7XCJsZy1zbGlkZVwiIT09Yi5zLm1vZGUmJmIuJG91dGVyLmFkZENsYXNzKFwibGctc2xpZGVcIiksdGhpcy4kc2xpZGUubm90KFwiLmxnLWN1cnJlbnQsIC5sZy1wcmV2LXNsaWRlLCAubGctbmV4dC1zbGlkZVwiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLDA+YSYmTWF0aC5hYnMoYSk+Yi5zLnN3aXBlVGhyZXNob2xkP2IuZ29Ub05leHRTbGlkZSghMCk6YT4wJiZNYXRoLmFicyhhKT5iLnMuc3dpcGVUaHJlc2hvbGQ/Yi5nb1RvUHJldlNsaWRlKCEwKTpNYXRoLmFicyhhKTw1JiZiLiRlbC50cmlnZ2VyKFwib25TbGlkZUNsaWNrLmxnXCIpLGIuJHNsaWRlLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLiRvdXRlci5oYXNDbGFzcyhcImxnLWRyYWdnaW5nXCIpfHxcImxnLXNsaWRlXCI9PT1iLnMubW9kZXx8Yi4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1zbGlkZVwiKX0sYi5zLnNwZWVkKzEwMCl9LGUucHJvdG90eXBlLmVuYWJsZVN3aXBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTAsYz0wLGQ9ITE7YS5zLmVuYWJsZVN3aXBlJiZhLmlzVG91Y2gmJmEuZG9Dc3MoKSYmKGEuJHNsaWRlLm9uKFwidG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKGMpe2EuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHxhLmxnQnVzeXx8KGMucHJldmVudERlZmF1bHQoKSxhLm1hbmFnZVN3aXBlQ2xhc3MoKSxiPWMub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYKX0pLGEuJHNsaWRlLm9uKFwidG91Y2htb3ZlLmxnXCIsZnVuY3Rpb24oZSl7YS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIil8fChlLnByZXZlbnREZWZhdWx0KCksYz1lLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxhLnRvdWNoTW92ZShiLGMpLGQ9ITApfSksYS4kc2xpZGUub24oXCJ0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7YS4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy16b29tZWRcIil8fChkPyhkPSExLGEudG91Y2hFbmQoYy1iKSk6YS4kZWwudHJpZ2dlcihcIm9uU2xpZGVDbGljay5sZ1wiKSl9KSl9LGUucHJvdG90eXBlLmVuYWJsZURyYWc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9MCxlPTAsZj0hMSxnPSExO2Mucy5lbmFibGVEcmFnJiYhYy5pc1RvdWNoJiZjLmRvQ3NzKCkmJihjLiRzbGlkZS5vbihcIm1vdXNlZG93bi5sZ1wiLGZ1bmN0aW9uKGIpe2MuJG91dGVyLmhhc0NsYXNzKFwibGctem9vbWVkXCIpfHwoYShiLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIil8fGEoYi50YXJnZXQpLmhhc0NsYXNzKFwibGctdmlkZW8tcGxheVwiKSkmJihiLnByZXZlbnREZWZhdWx0KCksYy5sZ0J1c3l8fChjLm1hbmFnZVN3aXBlQ2xhc3MoKSxkPWIucGFnZVgsZj0hMCxjLiRvdXRlci5zY3JvbGxMZWZ0Kz0xLGMuJG91dGVyLnNjcm9sbExlZnQtPTEsYy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiXCIpLmFkZENsYXNzKFwibGctZ3JhYmJpbmdcIiksYy4kZWwudHJpZ2dlcihcIm9uRHJhZ3N0YXJ0LmxnXCIpKSl9KSxhKGIpLm9uKFwibW91c2Vtb3ZlLmxnXCIsZnVuY3Rpb24oYSl7ZiYmKGc9ITAsZT1hLnBhZ2VYLGMudG91Y2hNb3ZlKGQsZSksYy4kZWwudHJpZ2dlcihcIm9uRHJhZ21vdmUubGdcIikpfSksYShiKS5vbihcIm1vdXNldXAubGdcIixmdW5jdGlvbihiKXtnPyhnPSExLGMudG91Y2hFbmQoZS1kKSxjLiRlbC50cmlnZ2VyKFwib25EcmFnZW5kLmxnXCIpKTooYShiLnRhcmdldCkuaGFzQ2xhc3MoXCJsZy1vYmplY3RcIil8fGEoYi50YXJnZXQpLmhhc0NsYXNzKFwibGctdmlkZW8tcGxheVwiKSkmJmMuJGVsLnRyaWdnZXIoXCJvblNsaWRlQ2xpY2subGdcIiksZiYmKGY9ITEsYy4kb3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIikpfSkpfSxlLnByb3RvdHlwZS5tYW5hZ2VTd2lwZUNsYXNzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbmRleCsxLGI9dGhpcy5pbmRleC0xLGM9dGhpcy4kc2xpZGUubGVuZ3RoO3RoaXMucy5sb29wJiYoMD09PXRoaXMuaW5kZXg/Yj1jLTE6dGhpcy5pbmRleD09PWMtMSYmKGE9MCkpLHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKFwibGctbmV4dC1zbGlkZSBsZy1wcmV2LXNsaWRlXCIpLGI+LTEmJnRoaXMuJHNsaWRlLmVxKGIpLmFkZENsYXNzKFwibGctcHJldi1zbGlkZVwiKSx0aGlzLiRzbGlkZS5lcShhKS5hZGRDbGFzcyhcImxnLW5leHQtc2xpZGVcIil9LGUucHJvdG90eXBlLm1vdXNld2hlZWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuJG91dGVyLm9uKFwibW91c2V3aGVlbC5sZ1wiLGZ1bmN0aW9uKGIpe2IuZGVsdGFZJiYoYi5kZWx0YVk+MD9hLmdvVG9QcmV2U2xpZGUoKTphLmdvVG9OZXh0U2xpZGUoKSxiLnByZXZlbnREZWZhdWx0KCkpfSl9LGUucHJvdG90eXBlLmNsb3NlR2FsbGVyeT1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0hMTt0aGlzLiRvdXRlci5maW5kKFwiLmxnLWNsb3NlXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2IuZGVzdHJveSgpfSksYi5zLmNsb3NhYmxlJiYoYi4kb3V0ZXIub24oXCJtb3VzZWRvd24ubGdcIixmdW5jdGlvbihiKXtjPSEhKGEoYi50YXJnZXQpLmlzKFwiLmxnLW91dGVyXCIpfHxhKGIudGFyZ2V0KS5pcyhcIi5sZy1pdGVtIFwiKXx8YShiLnRhcmdldCkuaXMoXCIubGctaW1nLXdyYXBcIikpfSksYi4kb3V0ZXIub24oXCJtb3VzZXVwLmxnXCIsZnVuY3Rpb24oZCl7KGEoZC50YXJnZXQpLmlzKFwiLmxnLW91dGVyXCIpfHxhKGQudGFyZ2V0KS5pcyhcIi5sZy1pdGVtIFwiKXx8YShkLnRhcmdldCkuaXMoXCIubGctaW1nLXdyYXBcIikmJmMpJiYoYi4kb3V0ZXIuaGFzQ2xhc3MoXCJsZy1kcmFnZ2luZ1wiKXx8Yi5kZXN0cm95KCkpfSkpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXM7Y3x8ZC4kZWwudHJpZ2dlcihcIm9uQmVmb3JlQ2xvc2UubGdcIiksYShiKS5zY3JvbGxUb3AoZC5wcmV2U2Nyb2xsVG9wKSxjJiYoZC5zLmR5bmFtaWN8fHRoaXMuJGl0ZW1zLm9mZihcImNsaWNrLmxnIGNsaWNrLmxnY3VzdG9tXCIpLGEucmVtb3ZlRGF0YShkLmVsLFwibGlnaHRHYWxsZXJ5XCIpKSx0aGlzLiRlbC5vZmYoXCIubGcudG1cIiksYS5lYWNoKGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMsZnVuY3Rpb24oYSl7ZC5tb2R1bGVzW2FdJiZkLm1vZHVsZXNbYV0uZGVzdHJveSgpfSksdGhpcy5sR2FsbGVyeU9uPSExLGNsZWFyVGltZW91dChkLmhpZGVCYXJ0aW1lb3V0KSx0aGlzLmhpZGVCYXJ0aW1lb3V0PSExLGEoYikub2ZmKFwiLmxnXCIpLGEoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwibGctb24gbGctZnJvbS1oYXNoXCIpLGQuJG91dGVyJiZkLiRvdXRlci5yZW1vdmVDbGFzcyhcImxnLXZpc2libGVcIiksYShcIi5sZy1iYWNrZHJvcFwiKS5yZW1vdmVDbGFzcyhcImluXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLiRvdXRlciYmZC4kb3V0ZXIucmVtb3ZlKCksYShcIi5sZy1iYWNrZHJvcFwiKS5yZW1vdmUoKSxjfHxkLiRlbC50cmlnZ2VyKFwib25DbG9zZUFmdGVyLmxnXCIpfSxkLnMuYmFja2Ryb3BEdXJhdGlvbis1MCl9LGEuZm4ubGlnaHRHYWxsZXJ5PWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihhLmRhdGEodGhpcyxcImxpZ2h0R2FsbGVyeVwiKSl0cnl7YSh0aGlzKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLmluaXQoKX1jYXRjaChjKXtjb25zb2xlLmVycm9yKFwibGlnaHRHYWxsZXJ5IGhhcyBub3QgaW5pdGlhdGVkIHByb3Blcmx5XCIpfWVsc2UgYS5kYXRhKHRoaXMsXCJsaWdodEdhbGxlcnlcIixuZXcgZSh0aGlzLGIpKX0pfSxhLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzPXt9fShqUXVlcnksd2luZG93LGRvY3VtZW50KX0pOyIsIi8qIVxyXG4gKiBjbGlwYm9hcmQuanMgdjEuNy4xXHJcbiAqIGh0dHBzOi8vemVub3JvY2hhLmdpdGh1Yi5pby9jbGlwYm9hcmQuanNcclxuICpcclxuICogTGljZW5zZWQgTUlUINCSwqkgWmVubyBSb2NoYVxyXG4gKi9cclxuIWZ1bmN0aW9uKHQpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgZTtlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxlLkNsaXBib2FyZD10KCl9fShmdW5jdGlvbigpe3ZhciB0LGUsbjtyZXR1cm4gZnVuY3Rpb24gdChlLG4sbyl7ZnVuY3Rpb24gaShhLGMpe2lmKCFuW2FdKXtpZighZVthXSl7dmFyIGw9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYyYmbClyZXR1cm4gbChhLCEwKTtpZihyKXJldHVybiByKGEsITApO3ZhciBzPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrYStcIidcIik7dGhyb3cgcy5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLHN9dmFyIHU9blthXT17ZXhwb3J0czp7fX07ZVthXVswXS5jYWxsKHUuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgbj1lW2FdWzFdW3RdO3JldHVybiBpKG58fHQpfSx1LHUuZXhwb3J0cyx0LGUsbixvKX1yZXR1cm4gblthXS5leHBvcnRzfWZvcih2YXIgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGE9MDthPG8ubGVuZ3RoO2ErKylpKG9bYV0pO3JldHVybiBpfSh7MTpbZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIG8odCxlKXtmb3IoO3QmJnQubm9kZVR5cGUhPT1pOyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5tYXRjaGVzJiZ0Lm1hdGNoZXMoZSkpcmV0dXJuIHQ7dD10LnBhcmVudE5vZGV9fXZhciBpPTk7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEVsZW1lbnQmJiFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKXt2YXIgcj1FbGVtZW50LnByb3RvdHlwZTtyLm1hdGNoZXM9ci5tYXRjaGVzU2VsZWN0b3J8fHIubW96TWF0Y2hlc1NlbGVjdG9yfHxyLm1zTWF0Y2hlc1NlbGVjdG9yfHxyLm9NYXRjaGVzU2VsZWN0b3J8fHIud2Via2l0TWF0Y2hlc1NlbGVjdG9yfWUuZXhwb3J0cz1vfSx7fV0sMjpbZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIG8odCxlLG4sbyxyKXt2YXIgYT1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyKG4sYSxyKSx7ZGVzdHJveTpmdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGEscil9fX1mdW5jdGlvbiBpKHQsZSxuLG8pe3JldHVybiBmdW5jdGlvbihuKXtuLmRlbGVnYXRlVGFyZ2V0PXIobi50YXJnZXQsZSksbi5kZWxlZ2F0ZVRhcmdldCYmby5jYWxsKHQsbil9fXZhciByPXQoXCIuL2Nsb3Nlc3RcIik7ZS5leHBvcnRzPW99LHtcIi4vY2xvc2VzdFwiOjF9XSwzOltmdW5jdGlvbih0LGUsbil7bi5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiZ0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJjE9PT10Lm5vZGVUeXBlfSxuLm5vZGVMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTtyZXR1cm4gdm9pZCAwIT09dCYmKFwiW29iamVjdCBOb2RlTGlzdF1cIj09PWV8fFwiW29iamVjdCBIVE1MQ29sbGVjdGlvbl1cIj09PWUpJiZcImxlbmd0aFwiaW4gdCYmKDA9PT10Lmxlbmd0aHx8bi5ub2RlKHRbMF0pKX0sbi5zdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmd9LG4uZm49ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0se31dLDQ6W2Z1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBvKHQsZSxuKXtpZighdCYmIWUmJiFuKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzXCIpO2lmKCFjLnN0cmluZyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmdcIik7aWYoIWMuZm4obikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoaXJkIGFyZ3VtZW50IG11c3QgYmUgYSBGdW5jdGlvblwiKTtpZihjLm5vZGUodCkpcmV0dXJuIGkodCxlLG4pO2lmKGMubm9kZUxpc3QodCkpcmV0dXJuIHIodCxlLG4pO2lmKGMuc3RyaW5nKHQpKXJldHVybiBhKHQsZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZywgSFRNTEVsZW1lbnQsIEhUTUxDb2xsZWN0aW9uLCBvciBOb2RlTGlzdFwiKX1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyKGUsbikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuKX19fWZ1bmN0aW9uIHIodCxlLG4pe3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHQsZnVuY3Rpb24odCl7dC5hZGRFdmVudExpc3RlbmVyKGUsbil9KSx7ZGVzdHJveTpmdW5jdGlvbigpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCxmdW5jdGlvbih0KXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuKX0pfX19ZnVuY3Rpb24gYSh0LGUsbil7cmV0dXJuIGwoZG9jdW1lbnQuYm9keSx0LGUsbil9dmFyIGM9dChcIi4vaXNcIiksbD10KFwiZGVsZWdhdGVcIik7ZS5leHBvcnRzPW99LHtcIi4vaXNcIjozLGRlbGVnYXRlOjJ9XSw1OltmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gbyh0KXt2YXIgZTtpZihcIlNFTEVDVFwiPT09dC5ub2RlTmFtZSl0LmZvY3VzKCksZT10LnZhbHVlO2Vsc2UgaWYoXCJJTlBVVFwiPT09dC5ub2RlTmFtZXx8XCJURVhUQVJFQVwiPT09dC5ub2RlTmFtZSl7dmFyIG49dC5oYXNBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtufHx0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsXCJcIiksdC5zZWxlY3QoKSx0LnNldFNlbGVjdGlvblJhbmdlKDAsdC52YWx1ZS5sZW5ndGgpLG58fHQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIiksZT10LnZhbHVlfWVsc2V7dC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikmJnQuZm9jdXMoKTt2YXIgbz13aW5kb3cuZ2V0U2VsZWN0aW9uKCksaT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2kuc2VsZWN0Tm9kZUNvbnRlbnRzKHQpLG8ucmVtb3ZlQWxsUmFuZ2VzKCksby5hZGRSYW5nZShpKSxlPW8udG9TdHJpbmcoKX1yZXR1cm4gZX1lLmV4cG9ydHM9b30se31dLDY6W2Z1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBvKCl7fW8ucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUsbil7dmFyIG89dGhpcy5lfHwodGhpcy5lPXt9KTtyZXR1cm4ob1t0XXx8KG9bdF09W10pKS5wdXNoKHtmbjplLGN0eDpufSksdGhpc30sb25jZTpmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gbygpe2kub2ZmKHQsbyksZS5hcHBseShuLGFyZ3VtZW50cyl9dmFyIGk9dGhpcztyZXR1cm4gby5fPWUsdGhpcy5vbih0LG8sbil9LGVtaXQ6ZnVuY3Rpb24odCl7dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW3RdfHxbXSkuc2xpY2UoKSxvPTAsaT1uLmxlbmd0aDtmb3IobztvPGk7bysrKW5bb10uZm4uYXBwbHkobltvXS5jdHgsZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXx8KHRoaXMuZT17fSksbz1uW3RdLGk9W107aWYobyYmZSlmb3IodmFyIHI9MCxhPW8ubGVuZ3RoO3I8YTtyKyspb1tyXS5mbiE9PWUmJm9bcl0uZm4uXyE9PWUmJmkucHVzaChvW3JdKTtyZXR1cm4gaS5sZW5ndGg/blt0XT1pOmRlbGV0ZSBuW3RdLHRoaXN9fSxlLmV4cG9ydHM9b30se31dLDc6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24oaSxyKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmFtZCl0KFtcIm1vZHVsZVwiLFwic2VsZWN0XCJdLHIpO2Vsc2UgaWYodm9pZCAwIT09bylyKG4sZShcInNlbGVjdFwiKSk7ZWxzZXt2YXIgYT17ZXhwb3J0czp7fX07cihhLGkuc2VsZWN0KSxpLmNsaXBib2FyZEFjdGlvbj1hLmV4cG9ydHN9fSh0aGlzLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIGk9bihlKSxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8ua2V5LG8pfX1yZXR1cm4gZnVuY3Rpb24oZSxuLG8pe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLG8mJnQoZSxvKSxlfX0oKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtvKHRoaXMsdCksdGhpcy5yZXNvbHZlT3B0aW9ucyhlKSx0aGlzLmluaXRTZWxlY3Rpb24oKX1yZXR1cm4gYSh0LFt7a2V5OlwicmVzb2x2ZU9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuYWN0aW9uPWUuYWN0aW9uLHRoaXMuY29udGFpbmVyPWUuY29udGFpbmVyLHRoaXMuZW1pdHRlcj1lLmVtaXR0ZXIsdGhpcy50YXJnZXQ9ZS50YXJnZXQsdGhpcy50ZXh0PWUudGV4dCx0aGlzLnRyaWdnZXI9ZS50cmlnZ2VyLHRoaXMuc2VsZWN0ZWRUZXh0PVwiXCJ9fSx7a2V5OlwiaW5pdFNlbGVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uIHQoKXt0aGlzLnRleHQ/dGhpcy5zZWxlY3RGYWtlKCk6dGhpcy50YXJnZXQmJnRoaXMuc2VsZWN0VGFyZ2V0KCl9fSx7a2V5Olwic2VsZWN0RmFrZVwiLHZhbHVlOmZ1bmN0aW9uIHQoKXt2YXIgZT10aGlzLG49XCJydGxcIj09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRpclwiKTt0aGlzLnJlbW92ZUZha2UoKSx0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW1vdmVGYWtlKCl9LHRoaXMuZmFrZUhhbmRsZXI9dGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKXx8ITAsdGhpcy5mYWtlRWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIiksdGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZT1cIjEycHRcIix0aGlzLmZha2VFbGVtLnN0eWxlLmJvcmRlcj1cIjBcIix0aGlzLmZha2VFbGVtLnN0eWxlLnBhZGRpbmc9XCIwXCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW49XCIwXCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5mYWtlRWxlbS5zdHlsZVtuP1wicmlnaHRcIjpcImxlZnRcIl09XCItOTk5OXB4XCI7dmFyIG89d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO3RoaXMuZmFrZUVsZW0uc3R5bGUudG9wPW8rXCJweFwiLHRoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIixcIlwiKSx0aGlzLmZha2VFbGVtLnZhbHVlPXRoaXMudGV4dCx0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLnNlbGVjdGVkVGV4dD0oMCxpLmRlZmF1bHQpKHRoaXMuZmFrZUVsZW0pLHRoaXMuY29weVRleHQoKX19LHtrZXk6XCJyZW1vdmVGYWtlXCIsdmFsdWU6ZnVuY3Rpb24gdCgpe3RoaXMuZmFrZUhhbmRsZXImJih0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spLHRoaXMuZmFrZUhhbmRsZXI9bnVsbCx0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2s9bnVsbCksdGhpcy5mYWtlRWxlbSYmKHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuZmFrZUVsZW0pLHRoaXMuZmFrZUVsZW09bnVsbCl9fSx7a2V5Olwic2VsZWN0VGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24gdCgpe3RoaXMuc2VsZWN0ZWRUZXh0PSgwLGkuZGVmYXVsdCkodGhpcy50YXJnZXQpLHRoaXMuY29weVRleHQoKX19LHtrZXk6XCJjb3B5VGV4dFwiLHZhbHVlOmZ1bmN0aW9uIHQoKXt2YXIgZT12b2lkIDA7dHJ5e2U9ZG9jdW1lbnQuZXhlY0NvbW1hbmQodGhpcy5hY3Rpb24pfWNhdGNoKHQpe2U9ITF9dGhpcy5oYW5kbGVSZXN1bHQoZSl9fSx7a2V5OlwiaGFuZGxlUmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24gdChlKXt0aGlzLmVtaXR0ZXIuZW1pdChlP1wic3VjY2Vzc1wiOlwiZXJyb3JcIix7YWN0aW9uOnRoaXMuYWN0aW9uLHRleHQ6dGhpcy5zZWxlY3RlZFRleHQsdHJpZ2dlcjp0aGlzLnRyaWdnZXIsY2xlYXJTZWxlY3Rpb246dGhpcy5jbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpfSl9fSx7a2V5OlwiY2xlYXJTZWxlY3Rpb25cIix2YWx1ZTpmdW5jdGlvbiB0KCl7dGhpcy50cmlnZ2VyJiZ0aGlzLnRyaWdnZXIuZm9jdXMoKSx3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uIHQoKXt0aGlzLnJlbW92ZUZha2UoKX19LHtrZXk6XCJhY3Rpb25cIixzZXQ6ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcImNvcHlcIjtpZih0aGlzLl9hY3Rpb249ZSxcImNvcHlcIiE9PXRoaXMuX2FjdGlvbiYmXCJjdXRcIiE9PXRoaXMuX2FjdGlvbil0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgXCJhY3Rpb25cIiB2YWx1ZSwgdXNlIGVpdGhlciBcImNvcHlcIiBvciBcImN1dFwiJyl9LGdldDpmdW5jdGlvbiB0KCl7cmV0dXJuIHRoaXMuX2FjdGlvbn19LHtrZXk6XCJ0YXJnZXRcIixzZXQ6ZnVuY3Rpb24gdChlKXtpZih2b2lkIDAhPT1lKXtpZighZXx8XCJvYmplY3RcIiE9PSh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6cihlKSl8fDEhPT1lLm5vZGVUeXBlKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIHZhbHVlLCB1c2UgYSB2YWxpZCBFbGVtZW50Jyk7aWYoXCJjb3B5XCI9PT10aGlzLmFjdGlvbiYmZS5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgXCJ0YXJnZXRcIiBhdHRyaWJ1dGUuIFBsZWFzZSB1c2UgXCJyZWFkb25seVwiIGluc3RlYWQgb2YgXCJkaXNhYmxlZFwiIGF0dHJpYnV0ZScpO2lmKFwiY3V0XCI9PT10aGlzLmFjdGlvbiYmKGUuaGFzQXR0cmlidXRlKFwicmVhZG9ubHlcIil8fGUuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIGF0dHJpYnV0ZS4gWW91IGNhblxcJ3QgY3V0IHRleHQgZnJvbSBlbGVtZW50cyB3aXRoIFwicmVhZG9ubHlcIiBvciBcImRpc2FibGVkXCIgYXR0cmlidXRlcycpO3RoaXMuX3RhcmdldD1lfX0sZ2V0OmZ1bmN0aW9uIHQoKXtyZXR1cm4gdGhpcy5fdGFyZ2V0fX1dKSx0fSgpO3QuZXhwb3J0cz1jfSl9LHtzZWxlY3Q6NX1dLDg6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24oaSxyKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmFtZCl0KFtcIm1vZHVsZVwiLFwiLi9jbGlwYm9hcmQtYWN0aW9uXCIsXCJ0aW55LWVtaXR0ZXJcIixcImdvb2QtbGlzdGVuZXJcIl0scik7ZWxzZSBpZih2b2lkIDAhPT1vKXIobixlKFwiLi9jbGlwYm9hcmQtYWN0aW9uXCIpLGUoXCJ0aW55LWVtaXR0ZXJcIiksZShcImdvb2QtbGlzdGVuZXJcIikpO2Vsc2V7dmFyIGE9e2V4cG9ydHM6e319O3IoYSxpLmNsaXBib2FyZEFjdGlvbixpLnRpbnlFbWl0dGVyLGkuZ29vZExpc3RlbmVyKSxpLmNsaXBib2FyZD1hLmV4cG9ydHN9fSh0aGlzLGZ1bmN0aW9uKHQsZSxuLG8pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBjKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gbCh0LGUpe3ZhciBuPVwiZGF0YS1jbGlwYm9hcmQtXCIrdDtpZihlLmhhc0F0dHJpYnV0ZShuKSlyZXR1cm4gZS5nZXRBdHRyaWJ1dGUobil9dmFyIHM9aShlKSx1PWkobiksZj1pKG8pLGQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0saD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihlLG4sbyl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksbyYmdChlLG8pLGV9fSgpLHA9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe3IodGhpcyxlKTt2YXIgbz1hKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBvLnJlc29sdmVPcHRpb25zKG4pLG8ubGlzdGVuQ2xpY2sodCksb31yZXR1cm4gYyhlLHQpLGgoZSxbe2tleTpcInJlc29sdmVPcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLmFjdGlvbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmFjdGlvbj9lLmFjdGlvbjp0aGlzLmRlZmF1bHRBY3Rpb24sdGhpcy50YXJnZXQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZS50YXJnZXQ/ZS50YXJnZXQ6dGhpcy5kZWZhdWx0VGFyZ2V0LHRoaXMudGV4dD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRleHQ/ZS50ZXh0OnRoaXMuZGVmYXVsdFRleHQsdGhpcy5jb250YWluZXI9XCJvYmplY3RcIj09PWQoZS5jb250YWluZXIpP2UuY29udGFpbmVyOmRvY3VtZW50LmJvZHl9fSx7a2V5OlwibGlzdGVuQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXM7dGhpcy5saXN0ZW5lcj0oMCxmLmRlZmF1bHQpKGUsXCJjbGlja1wiLGZ1bmN0aW9uKHQpe3JldHVybiBuLm9uQ2xpY2sodCl9KX19LHtrZXk6XCJvbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24gdChlKXt2YXIgbj1lLmRlbGVnYXRlVGFyZ2V0fHxlLmN1cnJlbnRUYXJnZXQ7dGhpcy5jbGlwYm9hcmRBY3Rpb24mJih0aGlzLmNsaXBib2FyZEFjdGlvbj1udWxsKSx0aGlzLmNsaXBib2FyZEFjdGlvbj1uZXcgcy5kZWZhdWx0KHthY3Rpb246dGhpcy5hY3Rpb24obiksdGFyZ2V0OnRoaXMudGFyZ2V0KG4pLHRleHQ6dGhpcy50ZXh0KG4pLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcix0cmlnZ2VyOm4sZW1pdHRlcjp0aGlzfSl9fSx7a2V5OlwiZGVmYXVsdEFjdGlvblwiLHZhbHVlOmZ1bmN0aW9uIHQoZSl7cmV0dXJuIGwoXCJhY3Rpb25cIixlKX19LHtrZXk6XCJkZWZhdWx0VGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24gdChlKXt2YXIgbj1sKFwidGFyZ2V0XCIsZSk7aWYobilyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuKX19LHtrZXk6XCJkZWZhdWx0VGV4dFwiLHZhbHVlOmZ1bmN0aW9uIHQoZSl7cmV0dXJuIGwoXCJ0ZXh0XCIsZSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uIHQoKXt0aGlzLmxpc3RlbmVyLmRlc3Ryb3koKSx0aGlzLmNsaXBib2FyZEFjdGlvbiYmKHRoaXMuY2xpcGJvYXJkQWN0aW9uLmRlc3Ryb3koKSx0aGlzLmNsaXBib2FyZEFjdGlvbj1udWxsKX19XSxbe2tleTpcImlzU3VwcG9ydGVkXCIsdmFsdWU6ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXCJjb3B5XCIsXCJjdXRcIl0sbj1cInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZSxvPSEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCl7bz1vJiYhIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCh0KX0pLG99fV0pLGV9KHUuZGVmYXVsdCk7dC5leHBvcnRzPXB9KX0se1wiLi9jbGlwYm9hcmQtYWN0aW9uXCI6NyxcImdvb2QtbGlzdGVuZXJcIjo0LFwidGlueS1lbWl0dGVyXCI6Nn1dfSx7fSxbOF0pKDgpfSk7Ly8gSmF2YVNjcmlwdCBEb2N1bWVudCIsIi8qISBqUXVlcnkgVUkgLSB2MS45LjIgLSAyMDE2LTEyLTIxXHJcbiogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4qIEluY2x1ZGVzOiBqcXVlcnkudWkuY29yZS5qcywganF1ZXJ5LnVpLmRhdGVwaWNrZXIuanNcclxuKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczsgTGljZW5zZWQgTUlUICovXHJcblxyXG4oZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKGUsaSl7dmFyIG4sYSxvLHI9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiYXJlYVwiPT09cj8obj1lLnBhcmVudE5vZGUsYT1uLm5hbWUsZS5ocmVmJiZhJiZcIm1hcFwiPT09bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPyhvPXQoXCJpbWdbdXNlbWFwPSNcIithK1wiXVwiKVswXSwhIW8mJnMobykpOiExKTooL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KHIpPyFlLmRpc2FibGVkOlwiYVwiPT09cj9lLmhyZWZ8fGk6aSkmJnMoZSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gdC5leHByLmZpbHRlcnMudmlzaWJsZShlKSYmIXQoZSkucGFyZW50cygpLmFuZFNlbGYoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cImhpZGRlblwiPT09dC5jc3ModGhpcyxcInZpc2liaWxpdHlcIil9KS5sZW5ndGh9dmFyIG49MCxhPS9edWktaWQtXFxkKyQvO3QudWk9dC51aXx8e30sdC51aS52ZXJzaW9ufHwodC5leHRlbmQodC51aSx7dmVyc2lvbjpcIjEuOS4yXCIsa2V5Q29kZTp7QkFDS1NQQUNFOjgsQ09NTUE6MTg4LERFTEVURTo0NixET1dOOjQwLEVORDozNSxFTlRFUjoxMyxFU0NBUEU6MjcsSE9NRTozNixMRUZUOjM3LE5VTVBBRF9BREQ6MTA3LE5VTVBBRF9ERUNJTUFMOjExMCxOVU1QQURfRElWSURFOjExMSxOVU1QQURfRU5URVI6MTA4LE5VTVBBRF9NVUxUSVBMWToxMDYsTlVNUEFEX1NVQlRSQUNUOjEwOSxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNQQUNFOjMyLFRBQjo5LFVQOjM4fX0pLHQuZm4uZXh0ZW5kKHtfZm9jdXM6dC5mbi5mb2N1cyxmb2N1czpmdW5jdGlvbihlLGkpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3QocykuZm9jdXMoKSxpJiZpLmNhbGwocyl9LGUpfSk6dGhpcy5fZm9jdXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZT10LnVpLmllJiYvKHN0YXRpY3xyZWxhdGl2ZSkvLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSl8fC9hYnNvbHV0ZS8udGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKT90aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8udGVzdCh0LmNzcyh0aGlzLFwicG9zaXRpb25cIikpJiYvKGF1dG98c2Nyb2xsKS8udGVzdCh0LmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrdC5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrdC5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpfSkuZXEoMCk6dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuLyhhdXRvfHNjcm9sbCkvLnRlc3QodC5jc3ModGhpcyxcIm92ZXJmbG93XCIpK3QuY3NzKHRoaXMsXCJvdmVyZmxvdy15XCIpK3QuY3NzKHRoaXMsXCJvdmVyZmxvdy14XCIpKX0pLmVxKDApLC9maXhlZC8udGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKXx8IWUubGVuZ3RoP3QoZG9jdW1lbnQpOmV9LHpJbmRleDpmdW5jdGlvbihpKXtpZihpIT09ZSlyZXR1cm4gdGhpcy5jc3MoXCJ6SW5kZXhcIixpKTtpZih0aGlzLmxlbmd0aClmb3IodmFyIHMsbixhPXQodGhpc1swXSk7YS5sZW5ndGgmJmFbMF0hPT1kb2N1bWVudDspe2lmKHM9YS5jc3MoXCJwb3NpdGlvblwiKSwoXCJhYnNvbHV0ZVwiPT09c3x8XCJyZWxhdGl2ZVwiPT09c3x8XCJmaXhlZFwiPT09cykmJihuPXBhcnNlSW50KGEuY3NzKFwiekluZGV4XCIpLDEwKSwhaXNOYU4obikmJjAhPT1uKSlyZXR1cm4gbjthPWEucGFyZW50KCl9cmV0dXJuIDB9LHVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMuaWR8fCh0aGlzLmlkPVwidWktaWQtXCIrICsrbil9KX0scmVtb3ZlVW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7YS50ZXN0KHRoaXMuaWQpJiZ0KHRoaXMpLnJlbW92ZUF0dHIoXCJpZFwiKX0pfX0pLHQuZXh0ZW5kKHQuZXhwcltcIjpcIl0se2RhdGE6dC5leHByLmNyZWF0ZVBzZXVkbz90LmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4hIXQuZGF0YShpLGUpfX0pOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4hIXQuZGF0YShlLHNbM10pfSxmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSwhaXNOYU4odC5hdHRyKGUsXCJ0YWJpbmRleFwiKSkpfSx0YWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgcz10LmF0dHIoZSxcInRhYmluZGV4XCIpLG49aXNOYU4ocyk7cmV0dXJuKG58fHM+PTApJiZpKGUsIW4pfX0pLHQoZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5ib2R5LGk9ZS5hcHBlbmRDaGlsZChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO2kub2Zmc2V0SGVpZ2h0LHQuZXh0ZW5kKGkuc3R5bGUse21pbkhlaWdodDpcIjEwMHB4XCIsaGVpZ2h0OlwiYXV0b1wiLHBhZGRpbmc6MCxib3JkZXJXaWR0aDowfSksdC5zdXBwb3J0Lm1pbkhlaWdodD0xMDA9PT1pLm9mZnNldEhlaWdodCx0LnN1cHBvcnQuc2VsZWN0c3RhcnQ9XCJvbnNlbGVjdHN0YXJ0XCJpbiBpLGUucmVtb3ZlQ2hpbGQoaSkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0pLHQoXCI8YT5cIikub3V0ZXJXaWR0aCgxKS5qcXVlcnl8fHQuZWFjaChbXCJXaWR0aFwiLFwiSGVpZ2h0XCJdLGZ1bmN0aW9uKGkscyl7ZnVuY3Rpb24gbihlLGkscyxuKXtyZXR1cm4gdC5lYWNoKGEsZnVuY3Rpb24oKXtpLT1wYXJzZUZsb2F0KHQuY3NzKGUsXCJwYWRkaW5nXCIrdGhpcykpfHwwLHMmJihpLT1wYXJzZUZsb2F0KHQuY3NzKGUsXCJib3JkZXJcIit0aGlzK1wiV2lkdGhcIikpfHwwKSxuJiYoaS09cGFyc2VGbG9hdCh0LmNzcyhlLFwibWFyZ2luXCIrdGhpcykpfHwwKX0pLGl9dmFyIGE9XCJXaWR0aFwiPT09cz9bXCJMZWZ0XCIsXCJSaWdodFwiXTpbXCJUb3BcIixcIkJvdHRvbVwiXSxvPXMudG9Mb3dlckNhc2UoKSxyPXtpbm5lcldpZHRoOnQuZm4uaW5uZXJXaWR0aCxpbm5lckhlaWdodDp0LmZuLmlubmVySGVpZ2h0LG91dGVyV2lkdGg6dC5mbi5vdXRlcldpZHRoLG91dGVySGVpZ2h0OnQuZm4ub3V0ZXJIZWlnaHR9O3QuZm5bXCJpbm5lclwiK3NdPWZ1bmN0aW9uKGkpe3JldHVybiBpPT09ZT9yW1wiaW5uZXJcIitzXS5jYWxsKHRoaXMpOnRoaXMuZWFjaChmdW5jdGlvbigpe3QodGhpcykuY3NzKG8sbih0aGlzLGkpK1wicHhcIil9KX0sdC5mbltcIm91dGVyXCIrc109ZnVuY3Rpb24oZSxpKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZT9yW1wib3V0ZXJcIitzXS5jYWxsKHRoaXMsZSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5jc3MobyxuKHRoaXMsZSwhMCxpKStcInB4XCIpfSl9fSksdChcIjxhPlwiKS5kYXRhKFwiYS1iXCIsXCJhXCIpLnJlbW92ZURhdGEoXCJhLWJcIikuZGF0YShcImEtYlwiKSYmKHQuZm4ucmVtb3ZlRGF0YT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/ZS5jYWxsKHRoaXMsdC5jYW1lbENhc2UoaSkpOmUuY2FsbCh0aGlzKX19KHQuZm4ucmVtb3ZlRGF0YSkpLGZ1bmN0aW9uKCl7dmFyIGU9L21zaWUgKFtcXHcuXSspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSl8fFtdO3QudWkuaWU9ZS5sZW5ndGg/ITA6ITEsdC51aS5pZTY9Nj09PXBhcnNlRmxvYXQoZVsxXSwxMCl9KCksdC5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iaW5kKCh0LnN1cHBvcnQuc2VsZWN0c3RhcnQ/XCJzZWxlY3RzdGFydFwiOlwibW91c2Vkb3duXCIpK1wiLnVpLWRpc2FibGVTZWxlY3Rpb25cIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCl9KX0sZW5hYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5iaW5kKFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIil9fSksdC5leHRlbmQodC51aSx7cGx1Z2luOnthZGQ6ZnVuY3Rpb24oZSxpLHMpe3ZhciBuLGE9dC51aVtlXS5wcm90b3R5cGU7Zm9yKG4gaW4gcylhLnBsdWdpbnNbbl09YS5wbHVnaW5zW25dfHxbXSxhLnBsdWdpbnNbbl0ucHVzaChbaSxzW25dXSl9LGNhbGw6ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG49dC5wbHVnaW5zW2VdO2lmKG4mJnQuZWxlbWVudFswXS5wYXJlbnROb2RlJiYxMSE9PXQuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlKWZvcihzPTA7bi5sZW5ndGg+cztzKyspdC5vcHRpb25zW25bc11bMF1dJiZuW3NdWzFdLmFwcGx5KHQuZWxlbWVudCxpKX19LGNvbnRhaW5zOnQuY29udGFpbnMsaGFzU2Nyb2xsOmZ1bmN0aW9uKGUsaSl7aWYoXCJoaWRkZW5cIj09PXQoZSkuY3NzKFwib3ZlcmZsb3dcIikpcmV0dXJuITE7dmFyIHM9aSYmXCJsZWZ0XCI9PT1pP1wic2Nyb2xsTGVmdFwiOlwic2Nyb2xsVG9wXCIsbj0hMTtyZXR1cm4gZVtzXT4wPyEwOihlW3NdPTEsbj1lW3NdPjAsZVtzXT0wLG4pfSxpc092ZXJBeGlzOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdD5lJiZlK2k+dH0saXNPdmVyOmZ1bmN0aW9uKGUsaSxzLG4sYSxvKXtyZXR1cm4gdC51aS5pc092ZXJBeGlzKGUscyxhKSYmdC51aS5pc092ZXJBeGlzKGksbixvKX19KSl9KShqUXVlcnkpOyhmdW5jdGlvbigkLHVuZGVmaW5lZCl7ZnVuY3Rpb24gRGF0ZXBpY2tlcigpe3RoaXMuZGVidWc9ITEsdGhpcy5fY3VySW5zdD1udWxsLHRoaXMuX2tleUV2ZW50PSExLHRoaXMuX2Rpc2FibGVkSW5wdXRzPVtdLHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nPSExLHRoaXMuX2luRGlhbG9nPSExLHRoaXMuX21haW5EaXZJZD1cInVpLWRhdGVwaWNrZXItZGl2XCIsdGhpcy5faW5saW5lQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLWlubGluZVwiLHRoaXMuX2FwcGVuZENsYXNzPVwidWktZGF0ZXBpY2tlci1hcHBlbmRcIix0aGlzLl90cmlnZ2VyQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLXRyaWdnZXJcIix0aGlzLl9kaWFsb2dDbGFzcz1cInVpLWRhdGVwaWNrZXItZGlhbG9nXCIsdGhpcy5fZGlzYWJsZUNsYXNzPVwidWktZGF0ZXBpY2tlci1kaXNhYmxlZFwiLHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzPVwidWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGVcIix0aGlzLl9jdXJyZW50Q2xhc3M9XCJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5XCIsdGhpcy5fZGF5T3ZlckNsYXNzPVwidWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlclwiLHRoaXMucmVnaW9uYWw9W10sdGhpcy5yZWdpb25hbFtcIlwiXT17Y2xvc2VUZXh0OlwiRG9uZVwiLHByZXZUZXh0Olwi0J/RgNC10LTRi9C00YPRidC40Lkg0LzQtdGB0Y/RhlwiLG5leHRUZXh0Olwi0KHQu9C10LTRg9GO0YnQuNC5INC80LXRgdGP0YZcIixjdXJyZW50VGV4dDpcItCh0LXQs9C+0LTQvdGPXCIsbW9udGhOYW1lczpbXCLQr9C90LLQsNGA0Y9cIixcItCk0LXQstGA0LDQu9GPXCIsXCLQnNCw0YDRgtCwXCIsXCLQkNC/0YDQtdC70Y9cIixcItCc0LDRj1wiLFwi0JjRjtC90Y9cIixcItCY0Y7Qu9GPXCIsXCLQkNCy0LPRg9GB0YLQsFwiLFwi0KHQtdC90YLRj9Cx0YDRj1wiLFwi0J7QutGC0Y/QsdGA0Y9cIixcItCd0L7Rj9Cx0YDRj1wiLFwi0JTQtdC60LDQsdGA0Y9cIl0sbW9udGhOYW1lc1Nob3J0OltcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl0sZGF5TmFtZXM6W1wi0J/QvtC90LXQtNC10LvRjNC90LjQulwiLFwi0JLRgtC+0YDQvdC40LpcIixcItCh0YDQtdC00LBcIixcItCn0LXRgtCy0LXRgNCzXCIsXCLQn9GP0YLQvdC40YbQsFwiLFwi0KHRg9Cx0LHQvtGC0LBcIixcItCS0L7RgdC60YDQtdGB0LXQvdGM0LVcIl0sZGF5TmFtZXNTaG9ydDpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sZGF5TmFtZXNNaW46W1wi0JLQoVwiLFwi0J/QnVwiLFwi0JLQolwiLFwi0KHQoFwiLFwi0KfQolwiLFwi0J/QolwiLFwi0KHQkVwiXSx3ZWVrSGVhZGVyOlwiV2tcIixkYXRlRm9ybWF0OlwibW0vZGQveXlcIixmaXJzdERheTowLGlzUlRMOiExLHNob3dNb250aEFmdGVyWWVhcjohMSx5ZWFyU3VmZml4OlwiXCJ9LHRoaXMuX2RlZmF1bHRzPXtzaG93T246XCJmb2N1c1wiLHNob3dBbmltOlwiZmFkZUluXCIsc2hvd09wdGlvbnM6e30sZGVmYXVsdERhdGU6bnVsbCxhcHBlbmRUZXh0OlwiXCIsYnV0dG9uVGV4dDpcIi4uLlwiLGJ1dHRvbkltYWdlOlwiXCIsYnV0dG9uSW1hZ2VPbmx5OiExLGhpZGVJZk5vUHJldk5leHQ6ITEsbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDohMSxnb3RvQ3VycmVudDohMSxjaGFuZ2VNb250aDohMSxjaGFuZ2VZZWFyOiExLHllYXJSYW5nZTpcImMtMTA6YysxMFwiLHNob3dPdGhlck1vbnRoczohMSxzZWxlY3RPdGhlck1vbnRoczohMSxzaG93V2VlazohMSxjYWxjdWxhdGVXZWVrOnRoaXMuaXNvODYwMVdlZWssc2hvcnRZZWFyQ3V0b2ZmOlwiKzEwXCIsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxkdXJhdGlvbjpcImZhc3RcIixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6XCJcIixhbHRGb3JtYXQ6XCJcIixjb25zdHJhaW5JbnB1dDohMCxzaG93QnV0dG9uUGFuZWw6ITEsYXV0b1NpemU6ITEsZGlzYWJsZWQ6ITF9LCQuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLHRoaXMucmVnaW9uYWxbXCJcIl0pLHRoaXMuZHBEaXY9YmluZEhvdmVyKCQoJzxkaXYgaWQ9XCInK3RoaXMuX21haW5EaXZJZCsnXCIgY2xhc3M9XCJ1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbFwiPjwvZGl2PicpKX1mdW5jdGlvbiBiaW5kSG92ZXIodCl7dmFyIGU9XCJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGFcIjtyZXR1cm4gdC5kZWxlZ2F0ZShlLFwibW91c2VvdXRcIixmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwtMSE9dGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItcHJldlwiKSYmJCh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlclwiKSwtMSE9dGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItbmV4dFwiKSYmJCh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlclwiKX0pLmRlbGVnYXRlKGUsXCJtb3VzZW92ZXJcIixmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaW5zdEFjdGl2ZS5pbmxpbmU/dC5wYXJlbnQoKVswXTppbnN0QWN0aXZlLmlucHV0WzBdKXx8KCQodGhpcykucGFyZW50cyhcIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyXCIpLmZpbmQoXCJhXCIpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIiksJCh0aGlzKS5hZGRDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLC0xIT10aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1wcmV2XCIpJiYkKHRoaXMpLmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyXCIpLC0xIT10aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1uZXh0XCIpJiYkKHRoaXMpLmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyXCIpKX0pfWZ1bmN0aW9uIGV4dGVuZFJlbW92ZSh0LGUpeyQuZXh0ZW5kKHQsZSk7Zm9yKHZhciBpIGluIGUpKG51bGw9PWVbaV18fGVbaV09PXVuZGVmaW5lZCkmJih0W2ldPWVbaV0pO3JldHVybiB0fSQuZXh0ZW5kKCQudWkse2RhdGVwaWNrZXI6e3ZlcnNpb246XCIxLjkuMlwifX0pO3ZhciBQUk9QX05BTUU9XCJkYXRlcGlja2VyXCIsZHB1dWlkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGluc3RBY3RpdmU7JC5leHRlbmQoRGF0ZXBpY2tlci5wcm90b3R5cGUse21hcmtlckNsYXNzTmFtZTpcImhhc0RhdGVwaWNrZXJcIixtYXhSb3dzOjQsbG9nOmZ1bmN0aW9uKCl7dGhpcy5kZWJ1ZyYmY29uc29sZS5sb2cuYXBwbHkoXCJcIixhcmd1bWVudHMpfSxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbih0KXtyZXR1cm4gZXh0ZW5kUmVtb3ZlKHRoaXMuX2RlZmF1bHRzLHR8fHt9KSx0aGlzfSxfYXR0YWNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsc2V0dGluZ3Mpe3ZhciBpbmxpbmVTZXR0aW5ncz1udWxsO2Zvcih2YXIgYXR0ck5hbWUgaW4gdGhpcy5fZGVmYXVsdHMpe3ZhciBhdHRyVmFsdWU9dGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGU6XCIrYXR0ck5hbWUpO2lmKGF0dHJWYWx1ZSl7aW5saW5lU2V0dGluZ3M9aW5saW5lU2V0dGluZ3N8fHt9O3RyeXtpbmxpbmVTZXR0aW5nc1thdHRyTmFtZV09ZXZhbChhdHRyVmFsdWUpfWNhdGNoKGVycil7aW5saW5lU2V0dGluZ3NbYXR0ck5hbWVdPWF0dHJWYWx1ZX19fXZhciBub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxpbmxpbmU9XCJkaXZcIj09bm9kZU5hbWV8fFwic3BhblwiPT1ub2RlTmFtZTt0YXJnZXQuaWR8fCh0aGlzLnV1aWQrPTEsdGFyZ2V0LmlkPVwiZHBcIit0aGlzLnV1aWQpO3ZhciBpbnN0PXRoaXMuX25ld0luc3QoJCh0YXJnZXQpLGlubGluZSk7aW5zdC5zZXR0aW5ncz0kLmV4dGVuZCh7fSxzZXR0aW5nc3x8e30saW5saW5lU2V0dGluZ3N8fHt9KSxcImlucHV0XCI9PW5vZGVOYW1lP3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHRhcmdldCxpbnN0KTppbmxpbmUmJnRoaXMuX2lubGluZURhdGVwaWNrZXIodGFyZ2V0LGluc3QpfSxfbmV3SW5zdDpmdW5jdGlvbih0LGUpe3ZhciBpPXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05Xy1dKS9nLFwiXFxcXFxcXFwkMVwiKTtyZXR1cm57aWQ6aSxpbnB1dDp0LHNlbGVjdGVkRGF5OjAsc2VsZWN0ZWRNb250aDowLHNlbGVjdGVkWWVhcjowLGRyYXdNb250aDowLGRyYXdZZWFyOjAsaW5saW5lOmUsZHBEaXY6ZT9iaW5kSG92ZXIoJCgnPGRpdiBjbGFzcz1cIicrdGhpcy5faW5saW5lQ2xhc3MrJyB1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbFwiPjwvZGl2PicpKTp0aGlzLmRwRGl2fX0sX2Nvbm5lY3REYXRlcGlja2VyOmZ1bmN0aW9uKHQsZSl7dmFyIGk9JCh0KTtlLmFwcGVuZD0kKFtdKSxlLnRyaWdnZXI9JChbXSksaS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSl8fCh0aGlzLl9hdHRhY2htZW50cyhpLGUpLGkuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmtleWRvd24odGhpcy5fZG9LZXlEb3duKS5rZXlwcmVzcyh0aGlzLl9kb0tleVByZXNzKS5rZXl1cCh0aGlzLl9kb0tleVVwKS5iaW5kKFwic2V0RGF0YS5kYXRlcGlja2VyXCIsZnVuY3Rpb24odCxpLHMpe2Uuc2V0dGluZ3NbaV09c30pLmJpbmQoXCJnZXREYXRhLmRhdGVwaWNrZXJcIixmdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9nZXQoZSxpKX0pLHRoaXMuX2F1dG9TaXplKGUpLCQuZGF0YSh0LFBST1BfTkFNRSxlKSxlLnNldHRpbmdzLmRpc2FibGVkJiZ0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KSl9LF9hdHRhY2htZW50czpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldChlLFwiYXBwZW5kVGV4dFwiKSxzPXRoaXMuX2dldChlLFwiaXNSVExcIik7ZS5hcHBlbmQmJmUuYXBwZW5kLnJlbW92ZSgpLGkmJihlLmFwcGVuZD0kKCc8c3BhbiBjbGFzcz1cIicrdGhpcy5fYXBwZW5kQ2xhc3MrJ1wiPicraStcIjwvc3Bhbj5cIiksdFtzP1wiYmVmb3JlXCI6XCJhZnRlclwiXShlLmFwcGVuZCkpLHQudW5iaW5kKFwiZm9jdXNcIix0aGlzLl9zaG93RGF0ZXBpY2tlciksZS50cmlnZ2VyJiZlLnRyaWdnZXIucmVtb3ZlKCk7dmFyIG49dGhpcy5fZ2V0KGUsXCJzaG93T25cIik7aWYoKFwiZm9jdXNcIj09bnx8XCJib3RoXCI9PW4pJiZ0LmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKSxcImJ1dHRvblwiPT1ufHxcImJvdGhcIj09bil7dmFyIGE9dGhpcy5fZ2V0KGUsXCJidXR0b25UZXh0XCIpLG89dGhpcy5fZ2V0KGUsXCJidXR0b25JbWFnZVwiKTtlLnRyaWdnZXI9JCh0aGlzLl9nZXQoZSxcImJ1dHRvbkltYWdlT25seVwiKT8kKFwiPGltZy8+XCIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOm8sYWx0OmEsdGl0bGU6YX0pOiQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiPjwvYnV0dG9uPicpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuaHRtbChcIlwiPT1vP2E6JChcIjxpbWcvPlwiKS5hdHRyKHtzcmM6byxhbHQ6YSx0aXRsZTphfSkpKSx0W3M/XCJiZWZvcmVcIjpcImFmdGVyXCJdKGUudHJpZ2dlciksZS50cmlnZ2VyLmNsaWNrKGZ1bmN0aW9uKCl7cmV0dXJuICQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT10WzBdPyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTokLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9dFswXT8oJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpLCQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodFswXSkpOiQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodFswXSksITF9KX19LF9hdXRvU2l6ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9nZXQodCxcImF1dG9TaXplXCIpJiYhdC5pbmxpbmUpe3ZhciBlPW5ldyBEYXRlKDIwMDksMTEsMjApLGk9dGhpcy5fZ2V0KHQsXCJkYXRlRm9ybWF0XCIpO2lmKGkubWF0Y2goL1tETV0vKSl7dmFyIHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT0wLHM9MDt0Lmxlbmd0aD5zO3MrKyl0W3NdLmxlbmd0aD5lJiYoZT10W3NdLmxlbmd0aCxpPXMpO3JldHVybiBpfTtlLnNldE1vbnRoKHModGhpcy5fZ2V0KHQsaS5tYXRjaCgvTU0vKT9cIm1vbnRoTmFtZXNcIjpcIm1vbnRoTmFtZXNTaG9ydFwiKSkpLGUuc2V0RGF0ZShzKHRoaXMuX2dldCh0LGkubWF0Y2goL0RELyk/XCJkYXlOYW1lc1wiOlwiZGF5TmFtZXNTaG9ydFwiKSkrMjAtZS5nZXREYXkoKSl9dC5pbnB1dC5hdHRyKFwic2l6ZVwiLHRoaXMuX2Zvcm1hdERhdGUodCxlKS5sZW5ndGgpfX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT0kKHQpO2kuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpfHwoaS5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGUuZHBEaXYpLmJpbmQoXCJzZXREYXRhLmRhdGVwaWNrZXJcIixmdW5jdGlvbih0LGkscyl7ZS5zZXR0aW5nc1tpXT1zfSkuYmluZChcImdldERhdGEuZGF0ZXBpY2tlclwiLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIHRoaXMuX2dldChlLGkpfSksJC5kYXRhKHQsUFJPUF9OQU1FLGUpLHRoaXMuX3NldERhdGUoZSx0aGlzLl9nZXREZWZhdWx0RGF0ZShlKSwhMCksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihlKSx0aGlzLl91cGRhdGVBbHRlcm5hdGUoZSksZS5zZXR0aW5ncy5kaXNhYmxlZCYmdGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodCksZS5kcERpdi5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSl9LF9kaWFsb2dEYXRlcGlja2VyOmZ1bmN0aW9uKHQsZSxpLHMsbil7dmFyIGE9dGhpcy5fZGlhbG9nSW5zdDtpZighYSl7dGhpcy51dWlkKz0xO3ZhciBvPVwiZHBcIit0aGlzLnV1aWQ7dGhpcy5fZGlhbG9nSW5wdXQ9JCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCInK28rJ1wiIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDtcIi8+JyksdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pLCQoXCJib2R5XCIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCksYT10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsITEpLGEuc2V0dGluZ3M9e30sJC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFBST1BfTkFNRSxhKX1pZihleHRlbmRSZW1vdmUoYS5zZXR0aW5ncyxzfHx7fSksZT1lJiZlLmNvbnN0cnVjdG9yPT1EYXRlP3RoaXMuX2Zvcm1hdERhdGUoYSxlKTplLHRoaXMuX2RpYWxvZ0lucHV0LnZhbChlKSx0aGlzLl9wb3M9bj9uLmxlbmd0aD9uOltuLnBhZ2VYLG4ucGFnZVldOm51bGwsIXRoaXMuX3Bvcyl7dmFyIHI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLGg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxsPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsdT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt0aGlzLl9wb3M9W3IvMi0xMDArbCxoLzItMTUwK3VdfXJldHVybiB0aGlzLl9kaWFsb2dJbnB1dC5jc3MoXCJsZWZ0XCIsdGhpcy5fcG9zWzBdKzIwK1wicHhcIikuY3NzKFwidG9wXCIsdGhpcy5fcG9zWzFdK1wicHhcIiksYS5zZXR0aW5ncy5vblNlbGVjdD1pLHRoaXMuX2luRGlhbG9nPSEwLHRoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLHRoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKSwkLmJsb2NrVUkmJiQuYmxvY2tVSSh0aGlzLmRwRGl2KSwkLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUFJPUF9OQU1FLGEpLHRoaXN9LF9kZXN0cm95RGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgZT0kKHQpLGk9JC5kYXRhKHQsUFJPUF9OQU1FKTtpZihlLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7dmFyIHM9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyQucmVtb3ZlRGF0YSh0LFBST1BfTkFNRSksXCJpbnB1dFwiPT1zPyhpLmFwcGVuZC5yZW1vdmUoKSxpLnRyaWdnZXIucmVtb3ZlKCksZS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkudW5iaW5kKFwiZm9jdXNcIix0aGlzLl9zaG93RGF0ZXBpY2tlcikudW5iaW5kKFwia2V5ZG93blwiLHRoaXMuX2RvS2V5RG93bikudW5iaW5kKFwia2V5cHJlc3NcIix0aGlzLl9kb0tleVByZXNzKS51bmJpbmQoXCJrZXl1cFwiLHRoaXMuX2RvS2V5VXApKTooXCJkaXZcIj09c3x8XCJzcGFuXCI9PXMpJiZlLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpfX0sX2VuYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGU9JCh0KSxpPSQuZGF0YSh0LFBST1BfTkFNRSk7aWYoZS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3ZhciBzPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihcImlucHV0XCI9PXMpdC5kaXNhYmxlZD0hMSxpLnRyaWdnZXIuZmlsdGVyKFwiYnV0dG9uXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPSExfSkuZW5kKCkuZmlsdGVyKFwiaW1nXCIpLmNzcyh7b3BhY2l0eTpcIjEuMFwiLGN1cnNvcjpcIlwifSk7ZWxzZSBpZihcImRpdlwiPT1zfHxcInNwYW5cIj09cyl7dmFyIG49ZS5jaGlsZHJlbihcIi5cIit0aGlzLl9pbmxpbmVDbGFzcyk7bi5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiksbi5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikucHJvcChcImRpc2FibGVkXCIsITEpfXRoaXMuX2Rpc2FibGVkSW5wdXRzPSQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT10P251bGw6ZX0pfX0sX2Rpc2FibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBlPSQodCksaT0kLmRhdGEodCxQUk9QX05BTUUpO2lmKGUuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXt2YXIgcz10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJpbnB1dFwiPT1zKXQuZGlzYWJsZWQ9ITAsaS50cmlnZ2VyLmZpbHRlcihcImJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMH0pLmVuZCgpLmZpbHRlcihcImltZ1wiKS5jc3Moe29wYWNpdHk6XCIwLjVcIixjdXJzb3I6XCJkZWZhdWx0XCJ9KTtlbHNlIGlmKFwiZGl2XCI9PXN8fFwic3BhblwiPT1zKXt2YXIgbj1lLmNoaWxkcmVuKFwiLlwiK3RoaXMuX2lubGluZUNsYXNzKTtuLmNoaWxkcmVuKCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSxuLmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhclwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhMCl9dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXQ/bnVsbDplfSksdGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT10fX0sX2lzRGlzYWJsZWREYXRlcGlja2VyOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiExO2Zvcih2YXIgZT0wO3RoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aD5lO2UrKylpZih0aGlzLl9kaXNhYmxlZElucHV0c1tlXT09dClyZXR1cm4hMDtyZXR1cm4hMX0sX2dldEluc3Q6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiAkLmRhdGEodCxQUk9QX05BTUUpfWNhdGNoKGUpe3Rocm93XCJNaXNzaW5nIGluc3RhbmNlIGRhdGEgZm9yIHRoaXMgZGF0ZXBpY2tlclwifX0sX29wdGlvbkRhdGVwaWNrZXI6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXRoaXMuX2dldEluc3QodCk7aWYoMj09YXJndW1lbnRzLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuXCJkZWZhdWx0c1wiPT1lPyQuZXh0ZW5kKHt9LCQuZGF0ZXBpY2tlci5fZGVmYXVsdHMpOnM/XCJhbGxcIj09ZT8kLmV4dGVuZCh7fSxzLnNldHRpbmdzKTp0aGlzLl9nZXQocyxlKTpudWxsO3ZhciBuPWV8fHt9O2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYobj17fSxuW2VdPWkpLHMpe3RoaXMuX2N1ckluc3Q9PXMmJnRoaXMuX2hpZGVEYXRlcGlja2VyKCk7dmFyIGE9dGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIodCwhMCksbz10aGlzLl9nZXRNaW5NYXhEYXRlKHMsXCJtaW5cIikscj10aGlzLl9nZXRNaW5NYXhEYXRlKHMsXCJtYXhcIik7ZXh0ZW5kUmVtb3ZlKHMuc2V0dGluZ3MsbiksbnVsbCE9PW8mJm4uZGF0ZUZvcm1hdCE9PXVuZGVmaW5lZCYmbi5taW5EYXRlPT09dW5kZWZpbmVkJiYocy5zZXR0aW5ncy5taW5EYXRlPXRoaXMuX2Zvcm1hdERhdGUocyxvKSksbnVsbCE9PXImJm4uZGF0ZUZvcm1hdCE9PXVuZGVmaW5lZCYmbi5tYXhEYXRlPT09dW5kZWZpbmVkJiYocy5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUocyxyKSksdGhpcy5fYXR0YWNobWVudHMoJCh0KSxzKSx0aGlzLl9hdXRvU2l6ZShzKSx0aGlzLl9zZXREYXRlKHMsYSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKHMpLHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIocyl9fSxfY2hhbmdlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUsaSl7dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0LGUsaSl9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRJbnN0KHQpO2UmJnRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoZSl9LF9zZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aSYmKHRoaXMuX3NldERhdGUoaSxlKSx0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKSl9LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7cmV0dXJuIGkmJiFpLmlubGluZSYmdGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpLGUpLGk/dGhpcy5fZ2V0RGF0ZShpKTpudWxsfSxfZG9LZXlEb3duOmZ1bmN0aW9uKHQpe3ZhciBlPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdCh0LnRhcmdldCksaT0hMCxzPWUuZHBEaXYuaXMoXCIudWktZGF0ZXBpY2tlci1ydGxcIik7aWYoZS5fa2V5RXZlbnQ9ITAsJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZylzd2l0Y2godC5rZXlDb2RlKXtjYXNlIDk6JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpLGk9ITE7YnJlYWs7Y2FzZSAxMzp2YXIgbj0kKFwidGQuXCIrJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MrXCI6bm90KC5cIiskLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcytcIilcIixlLmRwRGl2KTtuWzBdJiYkLmRhdGVwaWNrZXIuX3NlbGVjdERheSh0LnRhcmdldCxlLnNlbGVjdGVkTW9udGgsZS5zZWxlY3RlZFllYXIsblswXSk7dmFyIGE9JC5kYXRlcGlja2VyLl9nZXQoZSxcIm9uU2VsZWN0XCIpO2lmKGEpe3ZhciBvPSQuZGF0ZXBpY2tlci5fZm9ybWF0RGF0ZShlKTthLmFwcGx5KGUuaW5wdXQ/ZS5pbnB1dFswXTpudWxsLFtvLGVdKX1lbHNlICQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtyZXR1cm4hMTtjYXNlIDI3OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTticmVhaztjYXNlIDMzOiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCx0LmN0cmxLZXk/LSQuZGF0ZXBpY2tlci5fZ2V0KGUsXCJzdGVwQmlnTW9udGhzXCIpOi0kLmRhdGVwaWNrZXIuX2dldChlLFwic3RlcE1vbnRoc1wiKSxcIk1cIik7YnJlYWs7Y2FzZSAzNDokLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsdC5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChlLFwic3RlcEJpZ01vbnRoc1wiKTorJC5kYXRlcGlja2VyLl9nZXQoZSxcInN0ZXBNb250aHNcIiksXCJNXCIpO2JyZWFrO2Nhc2UgMzU6KHQuY3RybEtleXx8dC5tZXRhS2V5KSYmJC5kYXRlcGlja2VyLl9jbGVhckRhdGUodC50YXJnZXQpLGk9dC5jdHJsS2V5fHx0Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzNjoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiYkLmRhdGVwaWNrZXIuX2dvdG9Ub2RheSh0LnRhcmdldCksaT10LmN0cmxLZXl8fHQubWV0YUtleTticmVhaztjYXNlIDM3Oih0LmN0cmxLZXl8fHQubWV0YUtleSkmJiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCxzPzE6LTEsXCJEXCIpLGk9dC5jdHJsS2V5fHx0Lm1ldGFLZXksdC5vcmlnaW5hbEV2ZW50LmFsdEtleSYmJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LHQuY3RybEtleT8tJC5kYXRlcGlja2VyLl9nZXQoZSxcInN0ZXBCaWdNb250aHNcIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGUsXCJzdGVwTW9udGhzXCIpLFwiTVwiKTticmVhaztjYXNlIDM4Oih0LmN0cmxLZXl8fHQubWV0YUtleSkmJiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCwtNyxcIkRcIiksaT10LmN0cmxLZXl8fHQubWV0YUtleTticmVhaztjYXNlIDM5Oih0LmN0cmxLZXl8fHQubWV0YUtleSkmJiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCxzPy0xOjEsXCJEXCIpLGk9dC5jdHJsS2V5fHx0Lm1ldGFLZXksdC5vcmlnaW5hbEV2ZW50LmFsdEtleSYmJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LHQuY3RybEtleT8rJC5kYXRlcGlja2VyLl9nZXQoZSxcInN0ZXBCaWdNb250aHNcIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGUsXCJzdGVwTW9udGhzXCIpLFwiTVwiKTticmVhaztjYXNlIDQwOih0LmN0cmxLZXl8fHQubWV0YUtleSkmJiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCw3LFwiRFwiKSxpPXQuY3RybEtleXx8dC5tZXRhS2V5O2JyZWFrO2RlZmF1bHQ6aT0hMX1lbHNlIDM2PT10LmtleUNvZGUmJnQuY3RybEtleT8kLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRoaXMpOmk9ITE7aSYmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKX0sX2RvS2V5UHJlc3M6ZnVuY3Rpb24odCl7dmFyIGU9JC5kYXRlcGlja2VyLl9nZXRJbnN0KHQudGFyZ2V0KTtpZigkLmRhdGVwaWNrZXIuX2dldChlLFwiY29uc3RyYWluSW5wdXRcIikpe3ZhciBpPSQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycygkLmRhdGVwaWNrZXIuX2dldChlLFwiZGF0ZUZvcm1hdFwiKSkscz1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuY2hhckNvZGU9PXVuZGVmaW5lZD90LmtleUNvZGU6dC5jaGFyQ29kZSk7cmV0dXJuIHQuY3RybEtleXx8dC5tZXRhS2V5fHxcIiBcIj5zfHwhaXx8aS5pbmRleE9mKHMpPi0xfX0sX2RvS2V5VXA6ZnVuY3Rpb24odCl7dmFyIGU9JC5kYXRlcGlja2VyLl9nZXRJbnN0KHQudGFyZ2V0KTtpZihlLmlucHV0LnZhbCgpIT1lLmxhc3RWYWwpdHJ5e3ZhciBpPSQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoZSxcImRhdGVGb3JtYXRcIiksZS5pbnB1dD9lLmlucHV0LnZhbCgpOm51bGwsJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoZSkpO2kmJigkLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoZSksJC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoZSksJC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGUpKX1jYXRjaChzKXskLmRhdGVwaWNrZXIubG9nKHMpfXJldHVybiEwfSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24odCl7aWYodD10LnRhcmdldHx8dCxcImlucHV0XCIhPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKHQ9JChcImlucHV0XCIsdC5wYXJlbnROb2RlKVswXSksISQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIodCkmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0IT10KXt2YXIgZT0kLmRhdGVwaWNrZXIuX2dldEluc3QodCk7JC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2N1ckluc3QhPWUmJigkLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCghMCwhMCksZSYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigkLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0pKTt2YXIgaT0kLmRhdGVwaWNrZXIuX2dldChlLFwiYmVmb3JlU2hvd1wiKSxzPWk/aS5hcHBseSh0LFt0LGVdKTp7fTtpZihzIT09ITEpe2V4dGVuZFJlbW92ZShlLnNldHRpbmdzLHMpLGUubGFzdFZhbD1udWxsLCQuZGF0ZXBpY2tlci5fbGFzdElucHV0PXQsJC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGUpLCQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJih0LnZhbHVlPVwiXCIpLCQuZGF0ZXBpY2tlci5fcG9zfHwoJC5kYXRlcGlja2VyLl9wb3M9JC5kYXRlcGlja2VyLl9maW5kUG9zKHQpLCQuZGF0ZXBpY2tlci5fcG9zWzFdKz10Lm9mZnNldEhlaWdodCk7dmFyIG49ITE7JCh0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiBufD1cImZpeGVkXCI9PSQodGhpcykuY3NzKFwicG9zaXRpb25cIiksIW59KTt2YXIgYT17bGVmdDokLmRhdGVwaWNrZXIuX3Bvc1swXSx0b3A6JC5kYXRlcGlja2VyLl9wb3NbMV19O2lmKCQuZGF0ZXBpY2tlci5fcG9zPW51bGwsZS5kcERpdi5lbXB0eSgpLGUuZHBEaXYuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsZGlzcGxheTpcImJsb2NrXCIsdG9wOlwiLTEwMDBweFwifSksJC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGUpLGE9JC5kYXRlcGlja2VyLl9jaGVja09mZnNldChlLGEsbiksZS5kcERpdi5jc3Moe3Bvc2l0aW9uOiQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJiQuYmxvY2tVST9cInN0YXRpY1wiOm4/XCJmaXhlZFwiOlwiYWJzb2x1dGVcIixkaXNwbGF5Olwibm9uZVwiLGxlZnQ6YS5sZWZ0K1wicHhcIix0b3A6YS50b3ArXCJweFwifSksIWUuaW5saW5lKXt2YXIgbz0kLmRhdGVwaWNrZXIuX2dldChlLFwic2hvd0FuaW1cIikscj0kLmRhdGVwaWNrZXIuX2dldChlLFwiZHVyYXRpb25cIiksaD1mdW5jdGlvbigpe3ZhciB0PWUuZHBEaXYuZmluZChcImlmcmFtZS51aS1kYXRlcGlja2VyLWNvdmVyXCIpO2lmKHQubGVuZ3RoKXt2YXIgaT0kLmRhdGVwaWNrZXIuX2dldEJvcmRlcnMoZS5kcERpdik7dC5jc3Moe2xlZnQ6LWlbMF0sdG9wOi1pWzFdLHdpZHRoOmUuZHBEaXYub3V0ZXJXaWR0aCgpLGhlaWdodDplLmRwRGl2Lm91dGVySGVpZ2h0KCl9KX19O2UuZHBEaXYuekluZGV4KCQodCkuekluZGV4KCkrMSksJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZz0hMCwkLmVmZmVjdHMmJigkLmVmZmVjdHMuZWZmZWN0W29dfHwkLmVmZmVjdHNbb10pP2UuZHBEaXYuc2hvdyhvLCQuZGF0ZXBpY2tlci5fZ2V0KGUsXCJzaG93T3B0aW9uc1wiKSxyLGgpOmUuZHBEaXZbb3x8XCJzaG93XCJdKG8/cjpudWxsLGgpLG8mJnJ8fGgoKSxlLmlucHV0LmlzKFwiOnZpc2libGVcIikmJiFlLmlucHV0LmlzKFwiOmRpc2FibGVkXCIpJiZlLmlucHV0LmZvY3VzKCksJC5kYXRlcGlja2VyLl9jdXJJbnN0PWV9fX19LF91cGRhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3RoaXMubWF4Um93cz00O3ZhciBlPSQuZGF0ZXBpY2tlci5fZ2V0Qm9yZGVycyh0LmRwRGl2KTtpbnN0QWN0aXZlPXQsdC5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwodCkpLHRoaXMuX2F0dGFjaEhhbmRsZXJzKHQpO3ZhciBpPXQuZHBEaXYuZmluZChcImlmcmFtZS51aS1kYXRlcGlja2VyLWNvdmVyXCIpO2kubGVuZ3RoJiZpLmNzcyh7bGVmdDotZVswXSx0b3A6LWVbMV0sd2lkdGg6dC5kcERpdi5vdXRlcldpZHRoKCksaGVpZ2h0OnQuZHBEaXYub3V0ZXJIZWlnaHQoKX0pLHQuZHBEaXYuZmluZChcIi5cIit0aGlzLl9kYXlPdmVyQ2xhc3MrXCIgYVwiKS5tb3VzZW92ZXIoKTt2YXIgcz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxuPXNbMV0sYT0xNztpZih0LmRwRGl2LnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTRcIikud2lkdGgoXCJcIiksbj4xJiZ0LmRwRGl2LmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS1cIituKS5jc3MoXCJ3aWR0aFwiLFwiMTAwJVwiKSx0LmRwRGl2WygxIT1zWzBdfHwxIT1zWzFdP1wiYWRkXCI6XCJyZW1vdmVcIikrXCJDbGFzc1wiXShcInVpLWRhdGVwaWNrZXItbXVsdGlcIiksdC5kcERpdlsodGhpcy5fZ2V0KHQsXCJpc1JUTFwiKT9cImFkZFwiOlwicmVtb3ZlXCIpK1wiQ2xhc3NcIl0oXCJ1aS1kYXRlcGlja2VyLXJ0bFwiKSx0PT0kLmRhdGVwaWNrZXIuX2N1ckluc3QmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJnQuaW5wdXQmJnQuaW5wdXQuaXMoXCI6dmlzaWJsZVwiKSYmIXQuaW5wdXQuaXMoXCI6ZGlzYWJsZWRcIikmJnQuaW5wdXRbMF0hPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJnQuaW5wdXQuZm9jdXMoKSx0LnllYXJzaHRtbCl7dmFyIG89dC55ZWFyc2h0bWw7c2V0VGltZW91dChmdW5jdGlvbigpe289PT10LnllYXJzaHRtbCYmdC55ZWFyc2h0bWwmJnQuZHBEaXYuZmluZChcInNlbGVjdC51aS1kYXRlcGlja2VyLXllYXI6Zmlyc3RcIikucmVwbGFjZVdpdGgodC55ZWFyc2h0bWwpLG89dC55ZWFyc2h0bWw9bnVsbH0sMCl9fSxfZ2V0Qm9yZGVyczpmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm57dGhpbjoxLG1lZGl1bToyLHRoaWNrOjN9W3RdfHx0fTtyZXR1cm5bcGFyc2VGbG9hdChlKHQuY3NzKFwiYm9yZGVyLWxlZnQtd2lkdGhcIikpKSxwYXJzZUZsb2F0KGUodC5jc3MoXCJib3JkZXItdG9wLXdpZHRoXCIpKSldfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXQuZHBEaXYub3V0ZXJXaWR0aCgpLG49dC5kcERpdi5vdXRlckhlaWdodCgpLGE9dC5pbnB1dD90LmlucHV0Lm91dGVyV2lkdGgoKTowLG89dC5pbnB1dD90LmlucHV0Lm91dGVySGVpZ2h0KCk6MCxyPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsoaT8wOiQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksaD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhpPzA6JChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO3JldHVybiBlLmxlZnQtPXRoaXMuX2dldCh0LFwiaXNSVExcIik/cy1hOjAsZS5sZWZ0LT1pJiZlLmxlZnQ9PXQuaW5wdXQub2Zmc2V0KCkubGVmdD8kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk6MCxlLnRvcC09aSYmZS50b3A9PXQuaW5wdXQub2Zmc2V0KCkudG9wK28/JChkb2N1bWVudCkuc2Nyb2xsVG9wKCk6MCxlLmxlZnQtPU1hdGgubWluKGUubGVmdCxlLmxlZnQrcz5yJiZyPnM/TWF0aC5hYnMoZS5sZWZ0K3Mtcik6MCksZS50b3AtPU1hdGgubWluKGUudG9wLGUudG9wK24+aCYmaD5uP01hdGguYWJzKG4rbyk6MCksZX0sX2ZpbmRQb3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2dldEluc3QodCksaT10aGlzLl9nZXQoZSxcImlzUlRMXCIpO3QmJihcImhpZGRlblwiPT10LnR5cGV8fDEhPXQubm9kZVR5cGV8fCQuZXhwci5maWx0ZXJzLmhpZGRlbih0KSk7KXQ9dFtpP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXTt2YXIgcz0kKHQpLm9mZnNldCgpO3JldHVybltzLmxlZnQscy50b3BdfSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY3VySW5zdDtpZihlJiYoIXR8fGU9PSQuZGF0YSh0LFBST1BfTkFNRSkpJiZ0aGlzLl9kYXRlcGlja2VyU2hvd2luZyl7dmFyIGk9dGhpcy5fZ2V0KGUsXCJzaG93QW5pbVwiKSxzPXRoaXMuX2dldChlLFwiZHVyYXRpb25cIiksbj1mdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fdGlkeURpYWxvZyhlKX07JC5lZmZlY3RzJiYoJC5lZmZlY3RzLmVmZmVjdFtpXXx8JC5lZmZlY3RzW2ldKT9lLmRwRGl2LmhpZGUoaSwkLmRhdGVwaWNrZXIuX2dldChlLFwic2hvd09wdGlvbnNcIikscyxuKTplLmRwRGl2W1wic2xpZGVEb3duXCI9PWk/XCJzbGlkZVVwXCI6XCJmYWRlSW5cIj09aT9cImZhZGVPdXRcIjpcImhpZGVcIl0oaT9zOm51bGwsbiksaXx8bigpLHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nPSExO3ZhciBhPXRoaXMuX2dldChlLFwib25DbG9zZVwiKTthJiZhLmFwcGx5KGUuaW5wdXQ/ZS5pbnB1dFswXTpudWxsLFtlLmlucHV0P2UuaW5wdXQudmFsKCk6XCJcIixlXSksdGhpcy5fbGFzdElucHV0PW51bGwsdGhpcy5faW5EaWFsb2cmJih0aGlzLl9kaWFsb2dJbnB1dC5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OlwiMFwiLHRvcDpcIi0xMDBweFwifSksJC5ibG9ja1VJJiYoJC51bmJsb2NrVUkoKSwkKFwiYm9keVwiKS5hcHBlbmQodGhpcy5kcERpdikpKSx0aGlzLl9pbkRpYWxvZz0hMX19LF90aWR5RGlhbG9nOmZ1bmN0aW9uKHQpe3QuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLnVuYmluZChcIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyXCIpfSxfY2hlY2tFeHRlcm5hbENsaWNrOmZ1bmN0aW9uKHQpe2lmKCQuZGF0ZXBpY2tlci5fY3VySW5zdCl7dmFyIGU9JCh0LnRhcmdldCksaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZVswXSk7KGVbMF0uaWQhPSQuZGF0ZXBpY2tlci5fbWFpbkRpdklkJiYwPT1lLnBhcmVudHMoXCIjXCIrJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aCYmIWUuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiFlLmNsb3Nlc3QoXCIuXCIrJC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmKCEkLmRhdGVwaWNrZXIuX2luRGlhbG9nfHwhJC5ibG9ja1VJKXx8ZS5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT1pKSYmJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPSQodCksbj10aGlzLl9nZXRJbnN0KHNbMF0pO3RoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHNbMF0pfHwodGhpcy5fYWRqdXN0SW5zdERhdGUobixlKyhcIk1cIj09aT90aGlzLl9nZXQobixcInNob3dDdXJyZW50QXRQb3NcIik6MCksaSksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihuKSl9LF9nb3RvVG9kYXk6ZnVuY3Rpb24odCl7dmFyIGU9JCh0KSxpPXRoaXMuX2dldEluc3QoZVswXSk7aWYodGhpcy5fZ2V0KGksXCJnb3RvQ3VycmVudFwiKSYmaS5jdXJyZW50RGF5KWkuc2VsZWN0ZWREYXk9aS5jdXJyZW50RGF5LGkuZHJhd01vbnRoPWkuc2VsZWN0ZWRNb250aD1pLmN1cnJlbnRNb250aCxpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWkuY3VycmVudFllYXI7ZWxzZXt2YXIgcz1uZXcgRGF0ZTtpLnNlbGVjdGVkRGF5PXMuZ2V0RGF0ZSgpLGkuZHJhd01vbnRoPWkuc2VsZWN0ZWRNb250aD1zLmdldE1vbnRoKCksaS5kcmF3WWVhcj1pLnNlbGVjdGVkWWVhcj1zLmdldEZ1bGxZZWFyKCl9dGhpcy5fbm90aWZ5Q2hhbmdlKGkpLHRoaXMuX2FkanVzdERhdGUoZSl9LF9zZWxlY3RNb250aFllYXI6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPSQodCksbj10aGlzLl9nZXRJbnN0KHNbMF0pO25bXCJzZWxlY3RlZFwiKyhcIk1cIj09aT9cIk1vbnRoXCI6XCJZZWFyXCIpXT1uW1wiZHJhd1wiKyhcIk1cIj09aT9cIk1vbnRoXCI6XCJZZWFyXCIpXT1wYXJzZUludChlLm9wdGlvbnNbZS5zZWxlY3RlZEluZGV4XS52YWx1ZSwxMCksdGhpcy5fbm90aWZ5Q2hhbmdlKG4pLHRoaXMuX2FkanVzdERhdGUocyl9LF9zZWxlY3REYXk6ZnVuY3Rpb24odCxlLGkscyl7dmFyIG49JCh0KTtpZighJChzKS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcykmJiF0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihuWzBdKSl7dmFyIGE9dGhpcy5fZ2V0SW5zdChuWzBdKTthLnNlbGVjdGVkRGF5PWEuY3VycmVudERheT0kKFwiYVwiLHMpLmh0bWwoKSxhLnNlbGVjdGVkTW9udGg9YS5jdXJyZW50TW9udGg9ZSxhLnNlbGVjdGVkWWVhcj1hLmN1cnJlbnRZZWFyPWksdGhpcy5fc2VsZWN0RGF0ZSh0LHRoaXMuX2Zvcm1hdERhdGUoYSxhLmN1cnJlbnREYXksYS5jdXJyZW50TW9udGgsYS5jdXJyZW50WWVhcikpfX0sX2NsZWFyRGF0ZTpmdW5jdGlvbih0KXt2YXIgZT0kKHQpO3RoaXMuX2dldEluc3QoZVswXSksdGhpcy5fc2VsZWN0RGF0ZShlLFwiXCIpfSxfc2VsZWN0RGF0ZTpmdW5jdGlvbih0LGUpe3ZhciBpPSQodCkscz10aGlzLl9nZXRJbnN0KGlbMF0pO2U9bnVsbCE9ZT9lOnRoaXMuX2Zvcm1hdERhdGUocykscy5pbnB1dCYmcy5pbnB1dC52YWwoZSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKHMpO3ZhciBuPXRoaXMuX2dldChzLFwib25TZWxlY3RcIik7bj9uLmFwcGx5KHMuaW5wdXQ/cy5pbnB1dFswXTpudWxsLFtlLHNdKTpzLmlucHV0JiZzLmlucHV0LnRyaWdnZXIoXCJjaGFuZ2VcIikscy5pbmxpbmU/dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihzKToodGhpcy5faGlkZURhdGVwaWNrZXIoKSx0aGlzLl9sYXN0SW5wdXQ9cy5pbnB1dFswXSxcIm9iamVjdFwiIT10eXBlb2Ygcy5pbnB1dFswXSYmcy5pbnB1dC5mb2N1cygpLHRoaXMuX2xhc3RJbnB1dD1udWxsKX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXQodCxcImFsdEZpZWxkXCIpO2lmKGUpe3ZhciBpPXRoaXMuX2dldCh0LFwiYWx0Rm9ybWF0XCIpfHx0aGlzLl9nZXQodCxcImRhdGVGb3JtYXRcIikscz10aGlzLl9nZXREYXRlKHQpLG49dGhpcy5mb3JtYXREYXRlKGkscyx0aGlzLl9nZXRGb3JtYXRDb25maWcodCkpOyQoZSkuZWFjaChmdW5jdGlvbigpeyQodGhpcykudmFsKG4pfSl9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0RGF5KCk7cmV0dXJuW2U+MCYmNj5lLFwiXCJdfSxpc284NjAxV2VlazpmdW5jdGlvbih0KXt2YXIgZT1uZXcgRGF0ZSh0LmdldFRpbWUoKSk7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzQtKGUuZ2V0RGF5KCl8fDcpKTt2YXIgaT1lLmdldFRpbWUoKTtyZXR1cm4gZS5zZXRNb250aCgwKSxlLnNldERhdGUoMSksTWF0aC5mbG9vcihNYXRoLnJvdW5kKChpLWUpLzg2NGU1KS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24odCxlLGkpe2lmKG51bGw9PXR8fG51bGw9PWUpdGhyb3dcIkludmFsaWQgYXJndW1lbnRzXCI7aWYoZT1cIm9iamVjdFwiPT10eXBlb2YgZT9cIlwiK2U6ZStcIlwiLFwiXCI9PWUpcmV0dXJuIG51bGw7dmFyIHM9KGk/aS5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZjtzPVwic3RyaW5nXCIhPXR5cGVvZiBzP3M6KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChzLDEwKTtmb3IodmFyIG49KGk/aS5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGE9KGk/aS5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsbz0oaT9pLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LHI9KGk/aS5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGg9LTEsbD0tMSx1PS0xLGM9LTEsZD0hMSxwPWZ1bmN0aW9uKGUpe3ZhciBpPXQubGVuZ3RoPl8rMSYmdC5jaGFyQXQoXysxKT09ZTtyZXR1cm4gaSYmXysrLGl9LGY9ZnVuY3Rpb24odCl7dmFyIGk9cCh0KSxzPVwiQFwiPT10PzE0OlwiIVwiPT10PzIwOlwieVwiPT10JiZpPzQ6XCJvXCI9PXQ/MzoyLG49UmVnRXhwKFwiXlxcXFxkezEsXCIrcytcIn1cIiksYT1lLnN1YnN0cmluZyh2KS5tYXRjaChuKTtpZighYSl0aHJvd1wiTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gXCIrdjtyZXR1cm4gdis9YVswXS5sZW5ndGgscGFyc2VJbnQoYVswXSwxMCl9LG09ZnVuY3Rpb24odCxpLHMpe3ZhciBuPSQubWFwKHAodCk/czppLGZ1bmN0aW9uKHQsZSl7cmV0dXJuW1tlLHRdXX0pLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4tKHRbMV0ubGVuZ3RoLWVbMV0ubGVuZ3RoKX0pLGE9LTE7aWYoJC5lYWNoKG4sZnVuY3Rpb24odCxpKXt2YXIgcz1pWzFdO3JldHVybiBlLnN1YnN0cih2LHMubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT1zLnRvTG93ZXJDYXNlKCk/KGE9aVswXSx2Kz1zLmxlbmd0aCwhMSk6dW5kZWZpbmVkfSksLTEhPWEpcmV0dXJuIGErMTt0aHJvd1wiVW5rbm93biBuYW1lIGF0IHBvc2l0aW9uIFwiK3Z9LGc9ZnVuY3Rpb24oKXtpZihlLmNoYXJBdCh2KSE9dC5jaGFyQXQoXykpdGhyb3dcIlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiBcIit2O3YrK30sdj0wLF89MDt0Lmxlbmd0aD5fO18rKylpZihkKVwiJ1wiIT10LmNoYXJBdChfKXx8cChcIidcIik/ZygpOmQ9ITE7ZWxzZSBzd2l0Y2godC5jaGFyQXQoXykpe2Nhc2VcImRcIjp1PWYoXCJkXCIpO2JyZWFrO2Nhc2VcIkRcIjptKFwiRFwiLG4sYSk7YnJlYWs7Y2FzZVwib1wiOmM9ZihcIm9cIik7YnJlYWs7Y2FzZVwibVwiOmw9ZihcIm1cIik7YnJlYWs7Y2FzZVwiTVwiOmw9bShcIk1cIixvLHIpO2JyZWFrO2Nhc2VcInlcIjpoPWYoXCJ5XCIpO2JyZWFrO2Nhc2VcIkBcIjp2YXIgYj1uZXcgRGF0ZShmKFwiQFwiKSk7aD1iLmdldEZ1bGxZZWFyKCksbD1iLmdldE1vbnRoKCkrMSx1PWIuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2VcIiFcIjp2YXIgYj1uZXcgRGF0ZSgoZihcIiFcIiktdGhpcy5fdGlja3NUbzE5NzApLzFlNCk7aD1iLmdldEZ1bGxZZWFyKCksbD1iLmdldE1vbnRoKCkrMSx1PWIuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2VcIidcIjpwKFwiJ1wiKT9nKCk6ZD0hMDticmVhaztkZWZhdWx0OmcoKX1pZihlLmxlbmd0aD52KXt2YXIgeT1lLnN1YnN0cih2KTtpZighL15cXHMrLy50ZXN0KHkpKXRocm93XCJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6IFwiK3l9aWYoLTE9PWg/aD0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCk6MTAwPmgmJihoKz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCktKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCsocz49aD8wOi0xMDApKSxjPi0xKWZvcihsPTEsdT1jOzspe3ZhciB3PXRoaXMuX2dldERheXNJbk1vbnRoKGgsbC0xKTtpZih3Pj11KWJyZWFrO2wrKyx1LT13fXZhciBiPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgsbC0xLHUpKTtpZihiLmdldEZ1bGxZZWFyKCkhPWh8fGIuZ2V0TW9udGgoKSsxIT1sfHxiLmdldERhdGUoKSE9dSl0aHJvd1wiSW52YWxpZCBkYXRlXCI7cmV0dXJuIGJ9LEFUT006XCJ5eS1tbS1kZFwiLENPT0tJRTpcIkQsIGRkIE0geXlcIixJU09fODYwMTpcInl5LW1tLWRkXCIsUkZDXzgyMjpcIkQsIGQgTSB5XCIsUkZDXzg1MDpcIkRELCBkZC1NLXlcIixSRkNfMTAzNjpcIkQsIGQgTSB5XCIsUkZDXzExMjM6XCJELCBkIE0geXlcIixSRkNfMjgyMjpcIkQsIGQgTSB5eVwiLFJTUzpcIkQsIGQgTSB5XCIsVElDS1M6XCIhXCIsVElNRVNUQU1QOlwiQFwiLFczQzpcInl5LW1tLWRkXCIsX3RpY2tzVG8xOTcwOjFlNyo2MCo2MCoyNCooNzE4Njg1K01hdGguZmxvb3IoNDkyLjUpLU1hdGguZmxvb3IoMTkuNykrTWF0aC5mbG9vcig0LjkyNSkpLGZvcm1hdERhdGU6ZnVuY3Rpb24odCxlLGkpe2lmKCFlKXJldHVyblwiXCI7dmFyIHM9KGk/aS5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LG49KGk/aS5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsYT0oaT9pLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LG89KGk/aS5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLHI9ZnVuY3Rpb24oZSl7dmFyIGk9dC5sZW5ndGg+ZCsxJiZ0LmNoYXJBdChkKzEpPT1lO3JldHVybiBpJiZkKyssaX0saD1mdW5jdGlvbih0LGUsaSl7dmFyIHM9XCJcIitlO2lmKHIodCkpZm9yKDtpPnMubGVuZ3RoOylzPVwiMFwiK3M7cmV0dXJuIHN9LGw9ZnVuY3Rpb24odCxlLGkscyl7cmV0dXJuIHIodCk/c1tlXTppW2VdfSx1PVwiXCIsYz0hMTtpZihlKWZvcih2YXIgZD0wO3QubGVuZ3RoPmQ7ZCsrKWlmKGMpXCInXCIhPXQuY2hhckF0KGQpfHxyKFwiJ1wiKT91Kz10LmNoYXJBdChkKTpjPSExO2Vsc2Ugc3dpdGNoKHQuY2hhckF0KGQpKXtjYXNlXCJkXCI6dSs9aChcImRcIixlLmdldERhdGUoKSwyKTticmVhaztjYXNlXCJEXCI6dSs9bChcIkRcIixlLmdldERheSgpLHMsbik7YnJlYWs7Y2FzZVwib1wiOnUrPWgoXCJvXCIsTWF0aC5yb3VuZCgobmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSkuZ2V0VGltZSgpLW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwwLDApLmdldFRpbWUoKSkvODY0ZTUpLDMpO2JyZWFrO2Nhc2VcIm1cIjp1Kz1oKFwibVwiLGUuZ2V0TW9udGgoKSsxLDIpO2JyZWFrO2Nhc2VcIk1cIjp1Kz1sKFwiTVwiLGUuZ2V0TW9udGgoKSxhLG8pO2JyZWFrO2Nhc2VcInlcIjp1Kz1yKFwieVwiKT9lLmdldEZ1bGxZZWFyKCk6KDEwPmUuZ2V0WWVhcigpJTEwMD9cIjBcIjpcIlwiKStlLmdldFllYXIoKSUxMDA7YnJlYWs7Y2FzZVwiQFwiOnUrPWUuZ2V0VGltZSgpO2JyZWFrO2Nhc2VcIiFcIjp1Kz0xZTQqZS5nZXRUaW1lKCkrdGhpcy5fdGlja3NUbzE5NzA7YnJlYWs7Y2FzZVwiJ1wiOnIoXCInXCIpP3UrPVwiJ1wiOmM9ITA7YnJlYWs7ZGVmYXVsdDp1Kz10LmNoYXJBdChkKX1yZXR1cm4gdX0sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCIsaT0hMSxzPWZ1bmN0aW9uKGUpe3ZhciBpPXQubGVuZ3RoPm4rMSYmdC5jaGFyQXQobisxKT09ZTtyZXR1cm4gaSYmbisrLGl9LG49MDt0Lmxlbmd0aD5uO24rKylpZihpKVwiJ1wiIT10LmNoYXJBdChuKXx8cyhcIidcIik/ZSs9dC5jaGFyQXQobik6aT0hMTtlbHNlIHN3aXRjaCh0LmNoYXJBdChuKSl7Y2FzZVwiZFwiOmNhc2VcIm1cIjpjYXNlXCJ5XCI6Y2FzZVwiQFwiOmUrPVwiMDEyMzQ1Njc4OVwiO2JyZWFrO2Nhc2VcIkRcIjpjYXNlXCJNXCI6cmV0dXJuIG51bGw7Y2FzZVwiJ1wiOnMoXCInXCIpP2UrPVwiJ1wiOmk9ITA7YnJlYWs7ZGVmYXVsdDplKz10LmNoYXJBdChuKX1yZXR1cm4gZX0sX2dldDpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNldHRpbmdzW2VdIT09dW5kZWZpbmVkP3Quc2V0dGluZ3NbZV06dGhpcy5fZGVmYXVsdHNbZV19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKHQsZSl7aWYodC5pbnB1dC52YWwoKSE9dC5sYXN0VmFsKXt2YXIgaSxzLG49dGhpcy5fZ2V0KHQsXCJkYXRlRm9ybWF0XCIpLGE9dC5sYXN0VmFsPXQuaW5wdXQ/dC5pbnB1dC52YWwoKTpudWxsO2k9cz10aGlzLl9nZXREZWZhdWx0RGF0ZSh0KTt2YXIgbz10aGlzLl9nZXRGb3JtYXRDb25maWcodCk7dHJ5e2k9dGhpcy5wYXJzZURhdGUobixhLG8pfHxzfWNhdGNoKHIpe3RoaXMubG9nKHIpLGE9ZT9cIlwiOmF9dC5zZWxlY3RlZERheT1pLmdldERhdGUoKSx0LmRyYXdNb250aD10LnNlbGVjdGVkTW9udGg9aS5nZXRNb250aCgpLHQuZHJhd1llYXI9dC5zZWxlY3RlZFllYXI9aS5nZXRGdWxsWWVhcigpLHQuY3VycmVudERheT1hP2kuZ2V0RGF0ZSgpOjAsdC5jdXJyZW50TW9udGg9YT9pLmdldE1vbnRoKCk6MCx0LmN1cnJlbnRZZWFyPWE/aS5nZXRGdWxsWWVhcigpOjAsdGhpcy5fYWRqdXN0SW5zdERhdGUodCl9fSxfZ2V0RGVmYXVsdERhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KHQsdGhpcy5fZGV0ZXJtaW5lRGF0ZSh0LHRoaXMuX2dldCh0LFwiZGVmYXVsdERhdGVcIiksbmV3IERhdGUpKX0sX2RldGVybWluZURhdGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBEYXRlO3JldHVybiBlLnNldERhdGUoZS5nZXREYXRlKCkrdCksZX0sbj1mdW5jdGlvbihlKXt0cnl7cmV0dXJuICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQodCxcImRhdGVGb3JtYXRcIiksZSwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyh0KSl9Y2F0Y2goaSl7fWZvcih2YXIgcz0oZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pPyQuZGF0ZXBpY2tlci5fZ2V0RGF0ZSh0KTpudWxsKXx8bmV3IERhdGUsbj1zLmdldEZ1bGxZZWFyKCksYT1zLmdldE1vbnRoKCksbz1zLmdldERhdGUoKSxyPS8oWystXT9bMC05XSspXFxzKihkfER8d3xXfG18TXx5fFkpPy9nLGg9ci5leGVjKGUpO2g7KXtzd2l0Y2goaFsyXXx8XCJkXCIpe2Nhc2VcImRcIjpjYXNlXCJEXCI6bys9cGFyc2VJbnQoaFsxXSwxMCk7YnJlYWs7Y2FzZVwid1wiOmNhc2VcIldcIjpvKz03KnBhcnNlSW50KGhbMV0sMTApO2JyZWFrO2Nhc2VcIm1cIjpjYXNlXCJNXCI6YSs9cGFyc2VJbnQoaFsxXSwxMCksbz1NYXRoLm1pbihvLCQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgobixhKSk7YnJlYWs7Y2FzZVwieVwiOmNhc2VcIllcIjpuKz1wYXJzZUludChoWzFdLDEwKSxvPU1hdGgubWluKG8sJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aChuLGEpKX1oPXIuZXhlYyhlKX1yZXR1cm4gbmV3IERhdGUobixhLG8pfSxhPW51bGw9PWV8fFwiXCI9PT1lP2k6XCJzdHJpbmdcIj09dHlwZW9mIGU/bihlKTpcIm51bWJlclwiPT10eXBlb2YgZT9pc05hTihlKT9pOnMoZSk6bmV3IERhdGUoZS5nZXRUaW1lKCkpO3JldHVybiBhPWEmJlwiSW52YWxpZCBEYXRlXCI9PVwiXCIrYT9pOmEsYSYmKGEuc2V0SG91cnMoMCksYS5zZXRNaW51dGVzKDApLGEuc2V0U2Vjb25kcygwKSxhLnNldE1pbGxpc2Vjb25kcygwKSksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoYSl9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbih0KXtyZXR1cm4gdD8odC5zZXRIb3Vycyh0LmdldEhvdXJzKCk+MTI/dC5nZXRIb3VycygpKzI6MCksdCk6bnVsbH0sX3NldERhdGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPSFlLG49dC5zZWxlY3RlZE1vbnRoLGE9dC5zZWxlY3RlZFllYXIsbz10aGlzLl9yZXN0cmljdE1pbk1heCh0LHRoaXMuX2RldGVybWluZURhdGUodCxlLG5ldyBEYXRlKSk7dC5zZWxlY3RlZERheT10LmN1cnJlbnREYXk9by5nZXREYXRlKCksdC5kcmF3TW9udGg9dC5zZWxlY3RlZE1vbnRoPXQuY3VycmVudE1vbnRoPW8uZ2V0TW9udGgoKSx0LmRyYXdZZWFyPXQuc2VsZWN0ZWRZZWFyPXQuY3VycmVudFllYXI9by5nZXRGdWxsWWVhcigpLG49PXQuc2VsZWN0ZWRNb250aCYmYT09dC5zZWxlY3RlZFllYXJ8fGl8fHRoaXMuX25vdGlmeUNoYW5nZSh0KSx0aGlzLl9hZGp1c3RJbnN0RGF0ZSh0KSx0LmlucHV0JiZ0LmlucHV0LnZhbChzP1wiXCI6dGhpcy5fZm9ybWF0RGF0ZSh0KSl9LF9nZXREYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPSF0LmN1cnJlbnRZZWFyfHx0LmlucHV0JiZcIlwiPT10LmlucHV0LnZhbCgpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodC5jdXJyZW50WWVhcix0LmN1cnJlbnRNb250aCx0LmN1cnJlbnREYXkpKTtyZXR1cm4gZX0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldCh0LFwic3RlcE1vbnRoc1wiKSxpPVwiI1wiK3QuaWQucmVwbGFjZSgvXFxcXFxcXFwvZyxcIlxcXFxcIik7dC5kcERpdi5maW5kKFwiW2RhdGEtaGFuZGxlcl1cIikubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9e3ByZXY6ZnVuY3Rpb24oKXt3aW5kb3dbXCJEUF9qUXVlcnlfXCIrZHB1dWlkXS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGksLWUsXCJNXCIpfSxuZXh0OmZ1bmN0aW9uKCl7d2luZG93W1wiRFBfalF1ZXJ5X1wiK2RwdXVpZF0uZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShpLCtlLFwiTVwiKX0saGlkZTpmdW5jdGlvbigpe3dpbmRvd1tcIkRQX2pRdWVyeV9cIitkcHV1aWRdLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7d2luZG93W1wiRFBfalF1ZXJ5X1wiK2RwdXVpZF0uZGF0ZXBpY2tlci5fZ290b1RvZGF5KGkpfSxzZWxlY3REYXk6ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93W1wiRFBfalF1ZXJ5X1wiK2RwdXVpZF0uZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGksK3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1tb250aFwiKSwrdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXllYXJcIiksdGhpcyksITF9LHNlbGVjdE1vbnRoOmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvd1tcIkRQX2pRdWVyeV9cIitkcHV1aWRdLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihpLHRoaXMsXCJNXCIpLCExfSxzZWxlY3RZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvd1tcIkRQX2pRdWVyeV9cIitkcHV1aWRdLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihpLHRoaXMsXCJZXCIpLCExfX07JCh0aGlzKS5iaW5kKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1ldmVudFwiKSx0W3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1oYW5kbGVyXCIpXSl9KX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbih0KXt2YXIgZT1uZXcgRGF0ZTtlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpKTt2YXIgaT10aGlzLl9nZXQodCxcImlzUlRMXCIpLHM9dGhpcy5fZ2V0KHQsXCJzaG93QnV0dG9uUGFuZWxcIiksbj10aGlzLl9nZXQodCxcImhpZGVJZk5vUHJldk5leHRcIiksYT10aGlzLl9nZXQodCxcIm5hdmlnYXRpb25Bc0RhdGVGb3JtYXRcIiksbz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxyPXRoaXMuX2dldCh0LFwic2hvd0N1cnJlbnRBdFBvc1wiKSxoPXRoaXMuX2dldCh0LFwic3RlcE1vbnRoc1wiKSxsPTEhPW9bMF18fDEhPW9bMV0sdT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCh0LmN1cnJlbnREYXk/bmV3IERhdGUodC5jdXJyZW50WWVhcix0LmN1cnJlbnRNb250aCx0LmN1cnJlbnREYXkpOm5ldyBEYXRlKDk5OTksOSw5KSksYz10aGlzLl9nZXRNaW5NYXhEYXRlKHQsXCJtaW5cIiksZD10aGlzLl9nZXRNaW5NYXhEYXRlKHQsXCJtYXhcIikscD10LmRyYXdNb250aC1yLGY9dC5kcmF3WWVhcjtpZigwPnAmJihwKz0xMixmLS0pLGQpe3ZhciBtPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSxkLmdldE1vbnRoKCktb1swXSpvWzFdKzEsZC5nZXREYXRlKCkpKTtmb3IobT1jJiZjPm0/YzptO3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGYscCwxKSk+bTspcC0tLDA+cCYmKHA9MTEsZi0tKX10LmRyYXdNb250aD1wLHQuZHJhd1llYXI9Zjt2YXIgZz10aGlzLl9nZXQodCxcInByZXZUZXh0XCIpO2c9YT90aGlzLmZvcm1hdERhdGUoZyx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShmLHAtaCwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKTpnO3ZhciB2PXRoaXMuX2NhbkFkanVzdE1vbnRoKHQsLTEsZixwKT8nPGEgY2xhc3M9XCJ1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbFwiIGRhdGEtaGFuZGxlcj1cInByZXZcIiBkYXRhLWV2ZW50PVwiY2xpY2tcIiB0aXRsZT1cIicrZysnXCI+PHNwYW4gY2xhc3M9XCJ1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLScrKGk/XCJlXCI6XCJ3XCIpKydcIj4nK2crXCI8L3NwYW4+PC9hPlwiOm4/XCJcIjonPGEgY2xhc3M9XCJ1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZFwiIHRpdGxlPVwiJytnKydcIj48c3BhbiBjbGFzcz1cInVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaT9cImVcIjpcIndcIikrJ1wiPicrZytcIjwvc3Bhbj48L2E+XCIsXz10aGlzLl9nZXQodCxcIm5leHRUZXh0XCIpO189YT90aGlzLmZvcm1hdERhdGUoXyx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShmLHAraCwxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKTpfO3ZhciBiPXRoaXMuX2NhbkFkanVzdE1vbnRoKHQsMSxmLHApPyc8YSBjbGFzcz1cInVpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsXCIgZGF0YS1oYW5kbGVyPVwibmV4dFwiIGRhdGEtZXZlbnQ9XCJjbGlja1wiIHRpdGxlPVwiJytfKydcIj48c3BhbiBjbGFzcz1cInVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaT9cIndcIjpcImVcIikrJ1wiPicrXytcIjwvc3Bhbj48L2E+XCI6bj9cIlwiOic8YSBjbGFzcz1cInVpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkXCIgdGl0bGU9XCInK18rJ1wiPjxzcGFuIGNsYXNzPVwidWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0nKyhpP1wid1wiOlwiZVwiKSsnXCI+JytfK1wiPC9zcGFuPjwvYT5cIix5PXRoaXMuX2dldCh0LFwiY3VycmVudFRleHRcIiksdz10aGlzLl9nZXQodCxcImdvdG9DdXJyZW50XCIpJiZ0LmN1cnJlbnREYXk/dTplO3k9YT90aGlzLmZvcm1hdERhdGUoeSx3LHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSk6eTt2YXIgeD10LmlubGluZT9cIlwiOic8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInVpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGxcIiBkYXRhLWhhbmRsZXI9XCJoaWRlXCIgZGF0YS1ldmVudD1cImNsaWNrXCI+Jyt0aGlzLl9nZXQodCxcImNsb3NlVGV4dFwiKStcIjwvYnV0dG9uPlwiLGs9cz8nPGRpdiBjbGFzcz1cInVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudFwiPicrKGk/eDpcIlwiKSsodGhpcy5faXNJblJhbmdlKHQsdyk/JzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGxcIiBkYXRhLWhhbmRsZXI9XCJ0b2RheVwiIGRhdGEtZXZlbnQ9XCJjbGlja1wiPicreStcIjwvYnV0dG9uPlwiOlwiXCIpKyhpP1wiXCI6eCkrXCI8L2Rpdj5cIjpcIlwiLEQ9cGFyc2VJbnQodGhpcy5fZ2V0KHQsXCJmaXJzdERheVwiKSwxMCk7RD1pc05hTihEKT8wOkQ7dmFyIEM9dGhpcy5fZ2V0KHQsXCJzaG93V2Vla1wiKSxUPXRoaXMuX2dldCh0LFwiZGF5TmFtZXNcIik7dGhpcy5fZ2V0KHQsXCJkYXlOYW1lc1Nob3J0XCIpO3ZhciBNPXRoaXMuX2dldCh0LFwiZGF5TmFtZXNNaW5cIiksUz10aGlzLl9nZXQodCxcIm1vbnRoTmFtZXNcIiksTj10aGlzLl9nZXQodCxcIm1vbnRoTmFtZXNTaG9ydFwiKSxJPXRoaXMuX2dldCh0LFwiYmVmb3JlU2hvd0RheVwiKSxQPXRoaXMuX2dldCh0LFwic2hvd090aGVyTW9udGhzXCIpLEE9dGhpcy5fZ2V0KHQsXCJzZWxlY3RPdGhlck1vbnRoc1wiKTt0aGlzLl9nZXQodCxcImNhbGN1bGF0ZVdlZWtcIil8fHRoaXMuaXNvODYwMVdlZWs7Zm9yKHZhciB6PXRoaXMuX2dldERlZmF1bHREYXRlKHQpLEg9XCJcIixFPTA7b1swXT5FO0UrKyl7dmFyIE89XCJcIjt0aGlzLm1heFJvd3M9NDtmb3IodmFyIEY9MDtvWzFdPkY7RisrKXt2YXIgVz10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShmLHAsdC5zZWxlY3RlZERheSkpLEw9XCIgdWktY29ybmVyLWFsbFwiLFI9XCJcIjtpZihsKXtpZihSKz0nPGRpdiBjbGFzcz1cInVpLWRhdGVwaWNrZXItZ3JvdXAnLG9bMV0+MSlzd2l0Y2goRil7Y2FzZSAwOlIrPVwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3RcIixMPVwiIHVpLWNvcm5lci1cIisoaT9cInJpZ2h0XCI6XCJsZWZ0XCIpO2JyZWFrO2Nhc2Ugb1sxXS0xOlIrPVwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdFwiLEw9XCIgdWktY29ybmVyLVwiKyhpP1wibGVmdFwiOlwicmlnaHRcIik7YnJlYWs7ZGVmYXVsdDpSKz1cIiB1aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZVwiLEw9XCJcIn1SKz0nXCI+J31SKz0nPGRpdiBjbGFzcz1cInVpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4JytMKydcIj4nKygvYWxsfGxlZnQvLnRlc3QoTCkmJjA9PUU/aT9iOnY6XCJcIikrKC9hbGx8cmlnaHQvLnRlc3QoTCkmJjA9PUU/aT92OmI6XCJcIikrdGhpcy5fZ2VuZXJhdGVNb250aFllYXJIZWFkZXIodCxwLGYsYyxkLEU+MHx8Rj4wLFMsTikrJzwvZGl2Pjx0YWJsZSBjbGFzcz1cInVpLWRhdGVwaWNrZXItY2FsZW5kYXJcIj48dGhlYWQ+JytcIjx0cj5cIjtmb3IodmFyIGo9Qz8nPHRoIGNsYXNzPVwidWktZGF0ZXBpY2tlci13ZWVrLWNvbFwiPicrdGhpcy5fZ2V0KHQsXCJ3ZWVrSGVhZGVyXCIpK1wiPC90aD5cIjpcIlwiLFk9MDs3Plk7WSsrKXt2YXIgQj0oWStEKSU3O2orPVwiPHRoXCIrKChZK0QrNiklNz49NT8nIGNsYXNzPVwidWktZGF0ZXBpY2tlci13ZWVrLWVuZFwiJzpcIlwiKStcIj5cIisnPHNwYW4gdGl0bGU9XCInK1RbQl0rJ1wiPicrTVtCXStcIjwvc3Bhbj48L3RoPlwifVIrPWorXCI8L3RyPjwvdGhlYWQ+PHRib2R5PlwiO3ZhciBLPXRoaXMuX2dldERheXNJbk1vbnRoKGYscCk7Zj09dC5zZWxlY3RlZFllYXImJnA9PXQuc2VsZWN0ZWRNb250aCYmKHQuc2VsZWN0ZWREYXk9TWF0aC5taW4odC5zZWxlY3RlZERheSxLKSk7dmFyIHE9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChmLHApLUQrNyklNyxVPU1hdGguY2VpbCgocStLKS83KSxWPWw/dGhpcy5tYXhSb3dzPlU/dGhpcy5tYXhSb3dzOlU6VTt0aGlzLm1heFJvd3M9Vjtmb3IodmFyIEo9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZixwLDEtcSkpLFE9MDtWPlE7USsrKXtSKz1cIjx0cj5cIjtmb3IodmFyIFg9Qz8nPHRkIGNsYXNzPVwidWktZGF0ZXBpY2tlci13ZWVrLWNvbFwiPicrdGhpcy5fZ2V0KHQsXCJjYWxjdWxhdGVXZWVrXCIpKEopK1wiPC90ZD5cIjpcIlwiLFk9MDs3Plk7WSsrKXt2YXIgRz1JP0kuYXBwbHkodC5pbnB1dD90LmlucHV0WzBdOm51bGwsW0pdKTpbITAsXCJcIl0sWj1KLmdldE1vbnRoKCkhPXAsdGU9WiYmIUF8fCFHWzBdfHxjJiZjPkp8fGQmJko+ZDtYKz0nPHRkIGNsYXNzPVwiJysoKFkrRCs2KSU3Pj01P1wiIHVpLWRhdGVwaWNrZXItd2Vlay1lbmRcIjpcIlwiKSsoWj9cIiB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoXCI6XCJcIikrKEouZ2V0VGltZSgpPT1XLmdldFRpbWUoKSYmcD09dC5zZWxlY3RlZE1vbnRoJiZ0Ll9rZXlFdmVudHx8ei5nZXRUaW1lKCk9PUouZ2V0VGltZSgpJiZ6LmdldFRpbWUoKT09Vy5nZXRUaW1lKCk/XCIgXCIrdGhpcy5fZGF5T3ZlckNsYXNzOlwiXCIpKyh0ZT9cIiBcIit0aGlzLl91bnNlbGVjdGFibGVDbGFzcytcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiOlwiXCIpKyhaJiYhUD9cIlwiOlwiIFwiK0dbMV0rKEouZ2V0VGltZSgpPT11LmdldFRpbWUoKT9cIiBcIit0aGlzLl9jdXJyZW50Q2xhc3M6XCJcIikrKEouZ2V0VGltZSgpPT1lLmdldFRpbWUoKT9cIiB1aS1kYXRlcGlja2VyLXRvZGF5XCI6XCJcIikpKydcIicrKFomJiFQfHwhR1syXT9cIlwiOicgdGl0bGU9XCInK0dbMl0rJ1wiJykrKHRlP1wiXCI6JyBkYXRhLWhhbmRsZXI9XCJzZWxlY3REYXlcIiBkYXRhLWV2ZW50PVwiY2xpY2tcIiBkYXRhLW1vbnRoPVwiJytKLmdldE1vbnRoKCkrJ1wiIGRhdGEteWVhcj1cIicrSi5nZXRGdWxsWWVhcigpKydcIicpK1wiPlwiKyhaJiYhUD9cIiYjeGEwO1wiOnRlPyc8c3BhbiBjbGFzcz1cInVpLXN0YXRlLWRlZmF1bHRcIj4nK0ouZ2V0RGF0ZSgpK1wiPC9zcGFuPlwiOic8YSBjbGFzcz1cInVpLXN0YXRlLWRlZmF1bHQnKyhKLmdldFRpbWUoKT09ZS5nZXRUaW1lKCk/XCIgdWktc3RhdGUtaGlnaGxpZ2h0XCI6XCJcIikrKEouZ2V0VGltZSgpPT11LmdldFRpbWUoKT9cIiB1aS1zdGF0ZS1hY3RpdmVcIjpcIlwiKSsoWj9cIiB1aS1wcmlvcml0eS1zZWNvbmRhcnlcIjpcIlwiKSsnXCIgaHJlZj1cIiNcIj4nK0ouZ2V0RGF0ZSgpK1wiPC9hPlwiKStcIjwvdGQ+XCIsSi5zZXREYXRlKEouZ2V0RGF0ZSgpKzEpLEo9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoSilcclxufVIrPVgrXCI8L3RyPlwifXArKyxwPjExJiYocD0wLGYrKyksUis9XCI8L3Rib2R5PjwvdGFibGU+XCIrKGw/XCI8L2Rpdj5cIisob1swXT4wJiZGPT1vWzFdLTE/JzxkaXYgY2xhc3M9XCJ1aS1kYXRlcGlja2VyLXJvdy1icmVha1wiPjwvZGl2Pic6XCJcIik6XCJcIiksTys9Un1IKz1PfXJldHVybiBIKz1rKygkLnVpLmllNiYmIXQuaW5saW5lPyc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6ZmFsc2U7XCIgY2xhc3M9XCJ1aS1kYXRlcGlja2VyLWNvdmVyXCIgZnJhbWVib3JkZXI9XCIwXCI+PC9pZnJhbWU+JzpcIlwiKSx0Ll9rZXlFdmVudD0hMSxIfSxfZ2VuZXJhdGVNb250aFllYXJIZWFkZXI6ZnVuY3Rpb24odCxlLGkscyxuLGEsbyxyKXt2YXIgaD10aGlzLl9nZXQodCxcImNoYW5nZU1vbnRoXCIpLGw9dGhpcy5fZ2V0KHQsXCJjaGFuZ2VZZWFyXCIpLHU9dGhpcy5fZ2V0KHQsXCJzaG93TW9udGhBZnRlclllYXJcIiksYz0nPGRpdiBjbGFzcz1cInVpLWRhdGVwaWNrZXItdGl0bGVcIj4nLGQ9XCJcIjtpZihhfHwhaClkKz0nPHNwYW4gY2xhc3M9XCJ1aS1kYXRlcGlja2VyLW1vbnRoXCI+JytvW2VdK1wiPC9zcGFuPlwiO2Vsc2V7dmFyIHA9cyYmcy5nZXRGdWxsWWVhcigpPT1pLGY9biYmbi5nZXRGdWxsWWVhcigpPT1pO2QrPSc8c2VsZWN0IGNsYXNzPVwidWktZGF0ZXBpY2tlci1tb250aFwiIGRhdGEtaGFuZGxlcj1cInNlbGVjdE1vbnRoXCIgZGF0YS1ldmVudD1cImNoYW5nZVwiPic7Zm9yKHZhciBtPTA7MTI+bTttKyspKCFwfHxtPj1zLmdldE1vbnRoKCkpJiYoIWZ8fG4uZ2V0TW9udGgoKT49bSkmJihkKz0nPG9wdGlvbiB2YWx1ZT1cIicrbSsnXCInKyhtPT1lPycgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzpcIlwiKStcIj5cIityW21dK1wiPC9vcHRpb24+XCIpO2QrPVwiPC9zZWxlY3Q+XCJ9aWYodXx8KGMrPWQrKCFhJiZoJiZsP1wiXCI6XCImI3hhMDtcIikpLCF0LnllYXJzaHRtbClpZih0LnllYXJzaHRtbD1cIlwiLGF8fCFsKWMrPSc8c3BhbiBjbGFzcz1cInVpLWRhdGVwaWNrZXIteWVhclwiPicraStcIjwvc3Bhbj5cIjtlbHNle3ZhciBnPXRoaXMuX2dldCh0LFwieWVhclJhbmdlXCIpLnNwbGl0KFwiOlwiKSx2PShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxfPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWF0Y2goL2NbKy1dLiovKT9pK3BhcnNlSW50KHQuc3Vic3RyaW5nKDEpLDEwKTp0Lm1hdGNoKC9bKy1dLiovKT92K3BhcnNlSW50KHQsMTApOnBhcnNlSW50KHQsMTApO3JldHVybiBpc05hTihlKT92OmV9LGI9XyhnWzBdKSx5PU1hdGgubWF4KGIsXyhnWzFdfHxcIlwiKSk7Zm9yKGI9cz9NYXRoLm1heChiLHMuZ2V0RnVsbFllYXIoKSk6Yix5PW4/TWF0aC5taW4oeSxuLmdldEZ1bGxZZWFyKCkpOnksdC55ZWFyc2h0bWwrPSc8c2VsZWN0IGNsYXNzPVwidWktZGF0ZXBpY2tlci15ZWFyXCIgZGF0YS1oYW5kbGVyPVwic2VsZWN0WWVhclwiIGRhdGEtZXZlbnQ9XCJjaGFuZ2VcIj4nO3k+PWI7YisrKXQueWVhcnNodG1sKz0nPG9wdGlvbiB2YWx1ZT1cIicrYisnXCInKyhiPT1pPycgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzpcIlwiKStcIj5cIitiK1wiPC9vcHRpb24+XCI7dC55ZWFyc2h0bWwrPVwiPC9zZWxlY3Q+XCIsYys9dC55ZWFyc2h0bWwsdC55ZWFyc2h0bWw9bnVsbH1yZXR1cm4gYys9dGhpcy5fZ2V0KHQsXCJ5ZWFyU3VmZml4XCIpLHUmJihjKz0oIWEmJmgmJmw/XCJcIjpcIiYjeGEwO1wiKStkKSxjKz1cIjwvZGl2PlwifSxfYWRqdXN0SW5zdERhdGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXQuZHJhd1llYXIrKFwiWVwiPT1pP2U6MCksbj10LmRyYXdNb250aCsoXCJNXCI9PWk/ZTowKSxhPU1hdGgubWluKHQuc2VsZWN0ZWREYXksdGhpcy5fZ2V0RGF5c0luTW9udGgocyxuKSkrKFwiRFwiPT1pP2U6MCksbz10aGlzLl9yZXN0cmljdE1pbk1heCh0LHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHMsbixhKSkpO3Quc2VsZWN0ZWREYXk9by5nZXREYXRlKCksdC5kcmF3TW9udGg9dC5zZWxlY3RlZE1vbnRoPW8uZ2V0TW9udGgoKSx0LmRyYXdZZWFyPXQuc2VsZWN0ZWRZZWFyPW8uZ2V0RnVsbFllYXIoKSwoXCJNXCI9PWl8fFwiWVwiPT1pKSYmdGhpcy5fbm90aWZ5Q2hhbmdlKHQpfSxfcmVzdHJpY3RNaW5NYXg6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRNaW5NYXhEYXRlKHQsXCJtaW5cIikscz10aGlzLl9nZXRNaW5NYXhEYXRlKHQsXCJtYXhcIiksbj1pJiZpPmU/aTplO3JldHVybiBuPXMmJm4+cz9zOm59LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZ2V0KHQsXCJvbkNoYW5nZU1vbnRoWWVhclwiKTtlJiZlLmFwcGx5KHQuaW5wdXQ/dC5pbnB1dFswXTpudWxsLFt0LnNlbGVjdGVkWWVhcix0LnNlbGVjdGVkTW9udGgrMSx0XSl9LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXQodCxcIm51bWJlck9mTW9udGhzXCIpO3JldHVybiBudWxsPT1lP1sxLDFdOlwibnVtYmVyXCI9PXR5cGVvZiBlP1sxLGVdOmV9LF9nZXRNaW5NYXhEYXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUodCx0aGlzLl9nZXQodCxlK1wiRGF0ZVwiKSxudWxsKX0sX2dldERheXNJbk1vbnRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDMyLXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHQsZSwzMikpLmdldERhdGUoKX0sX2dldEZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbih0LGUpe3JldHVybiBuZXcgRGF0ZSh0LGUsMSkuZ2V0RGF5KCl9LF9jYW5BZGp1c3RNb250aDpmdW5jdGlvbih0LGUsaSxzKXt2YXIgbj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxhPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGkscysoMD5lP2U6blswXSpuWzFdKSwxKSk7cmV0dXJuIDA+ZSYmYS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCkpKSx0aGlzLl9pc0luUmFuZ2UodCxhKX0sX2lzSW5SYW5nZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldE1pbk1heERhdGUodCxcIm1pblwiKSxzPXRoaXMuX2dldE1pbk1heERhdGUodCxcIm1heFwiKTtyZXR1cm4oIWl8fGUuZ2V0VGltZSgpPj1pLmdldFRpbWUoKSkmJighc3x8ZS5nZXRUaW1lKCk8PXMuZ2V0VGltZSgpKX0sX2dldEZvcm1hdENvbmZpZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXQodCxcInNob3J0WWVhckN1dG9mZlwiKTtyZXR1cm4gZT1cInN0cmluZ1wiIT10eXBlb2YgZT9lOihuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQoZSwxMCkse3Nob3J0WWVhckN1dG9mZjplLGRheU5hbWVzU2hvcnQ6dGhpcy5fZ2V0KHQsXCJkYXlOYW1lc1Nob3J0XCIpLGRheU5hbWVzOnRoaXMuX2dldCh0LFwiZGF5TmFtZXNcIiksbW9udGhOYW1lc1Nob3J0OnRoaXMuX2dldCh0LFwibW9udGhOYW1lc1Nob3J0XCIpLG1vbnRoTmFtZXM6dGhpcy5fZ2V0KHQsXCJtb250aE5hbWVzXCIpfX0sX2Zvcm1hdERhdGU6ZnVuY3Rpb24odCxlLGkscyl7ZXx8KHQuY3VycmVudERheT10LnNlbGVjdGVkRGF5LHQuY3VycmVudE1vbnRoPXQuc2VsZWN0ZWRNb250aCx0LmN1cnJlbnRZZWFyPXQuc2VsZWN0ZWRZZWFyKTt2YXIgbj1lP1wib2JqZWN0XCI9PXR5cGVvZiBlP2U6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUocyxpLGUpKTp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh0LmN1cnJlbnRZZWFyLHQuY3VycmVudE1vbnRoLHQuY3VycmVudERheSkpO3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5fZ2V0KHQsXCJkYXRlRm9ybWF0XCIpLG4sdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKHQpKX19KSwkLmZuLmRhdGVwaWNrZXI9ZnVuY3Rpb24odCl7aWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZHx8KCQoZG9jdW1lbnQpLm1vdXNlZG93bigkLmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljaykuZmluZChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJC5kYXRlcGlja2VyLmRwRGl2KSwkLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ITApO3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdHx8XCJpc0Rpc2FibGVkXCIhPXQmJlwiZ2V0RGF0ZVwiIT10JiZcIndpZGdldFwiIT10P1wib3B0aW9uXCI9PXQmJjI9PWFyZ3VtZW50cy5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0/JC5kYXRlcGlja2VyW1wiX1wiK3QrXCJEYXRlcGlja2VyXCJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGUpKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtcInN0cmluZ1wiPT10eXBlb2YgdD8kLmRhdGVwaWNrZXJbXCJfXCIrdCtcIkRhdGVwaWNrZXJcIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzXS5jb25jYXQoZSkpOiQuZGF0ZXBpY2tlci5fYXR0YWNoRGF0ZXBpY2tlcih0aGlzLHQpfSk6JC5kYXRlcGlja2VyW1wiX1wiK3QrXCJEYXRlcGlja2VyXCJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGUpKX0sJC5kYXRlcGlja2VyPW5ldyBEYXRlcGlja2VyLCQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD0hMSwkLmRhdGVwaWNrZXIudXVpZD0obmV3IERhdGUpLmdldFRpbWUoKSwkLmRhdGVwaWNrZXIudmVyc2lvbj1cIjEuOS4yXCIsd2luZG93W1wiRFBfalF1ZXJ5X1wiK2RwdXVpZF09JH0pKGpRdWVyeSk7XHJcblxyXG4vL9C40YHQutC70Y7Rh9C10L3QuNGPINC00LDRglxyXG5mdW5jdGlvbiBkaXNhYmxlQWxsVGhlc2VEYXlzKGRhdGUpIHtcclxuICAgIHZhciBtID0gZGF0ZS5nZXRNb250aCgpLCBkID0gZGF0ZS5nZXREYXRlKCksIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcblx0Ly9hbGVydChkaXNhYmxlZERheXNbMF0pO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGRpc2FibGVkRGF5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmKCQuaW5BcnJheSgobSsxKSArICctJyArIGQgKyAnLScgKyB5LGRpc2FibGVkRGF5cykgIT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFt0cnVlXTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiLy92YXIgbnByb2dyZXNzPTA7IC8v0L/QvtC60LDQt9GL0LLQsNGC0Ywg0LfQsNCz0YDRg9C30YfQuNC6INC70LjQvdC40Y4g0L/RgNC4IGFqYXgg0LfQsNC/0YDQvtGB0LDRhVx0XHJcbmZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkgeyByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsgfVxyXG5cclxuXHJcbmZ1bmN0aW9uIEFqYXhDbGllbnQoZGlyX25hbWUsICAvL9C00LjRgNC10LrRgtC+0YDQuNGPIFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVfbmFtZSwgLy/QuNC80Y8g0YTQsNC50LvQsCDQsdC10LcgcGhwXHJcblx0XHRcdFx0XHR0eXBlUSwgLy/RgtC40L8g0LfQsNC/0YDQvtGB0LAgR0VUIC0gUE9TVFxyXG5cdFx0XHRcdFx0ZGF0YSwgLy/Qv9C10YDQtdC80LXQvdC90YvQtSDQutC+0YLQvtGA0YvQtSDQv9C10YDQtdC00LDRjtGC0YHRjyDQvNC10YLQvtC00L7QvCDQv9C+0YHRgiDQuNC70Lgg0LPQtdGCIHVzZXJuYW1lPVZhc3lhJmFnZT0xOCZzZXg9bWFsZVxyXG5cdFx0XHRcdFx0cmVzdWx0X2Z1bmN0aW9uLCAgLy/QstGL0L/QvtC70L3Rj9C10LzQsNGPINGE0YPQvdC60YbQuNGPINC/0YDQuCDQv9GA0LjRhdC+0LTQtSDQvtGC0LLQtdGC0LBcclxuXHRcdFx0XHRcdHZhcmlibCwgLy/Qv9C10YDQtdC80LXQvdC90LDRjyDQutC+0YLQvtGA0YPRjiDQvdCw0LTQviDQv9C10YDQtdC00LDRgtGMINCyINCy0YvQvy4g0YTRg9C90LrRhtC40Y5cclxuXHRcdFx0XHRcdGZvcm1faWQsICAvL2lkINGE0L7RgNC80Ysg0LXRgdC70Lgg0L3Rg9C20L3QviDQv9C10YDQtdC00LDRgtGMINGE0L7RgNC80YMg0YbQtdC70LjQutC+0Lwg0LjQu9C4IDBcclxuXHRcdFx0XHRcdG5wcm9ncmVzcywgIFxyXG4gXHRcdFx0XHRcdGNhY2hlLFxyXG5cdFx0XHRcdFx0b255b3VzZWxmICAvL9C+0YLQv9GA0LDQstC70Y/QtdGCIGFqYXgg0L3QsCDRgdC10LHRjy4g0LTQu9GPINCwamF4INC30LDQv9GA0L7RgdC+0LIg0YEg0LjRgdGC0L7RgNC40LXQuVxyXG5cdFx0XHRcdFx0KSB7XHRcclxuXHRcdFx0XHRcdGlmKGZvcm1faWQ9PTApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHQgICB2YXIgZGF0YV9fc3M9ZGF0YTtcdFxyXG5cdFx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHQgICB2YXIgZGF0YV9fc3M9alF1ZXJ5KFwiI1wiK2Zvcm1faWQpLnNlcmlhbGl6ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dmFyIHZ2PScnO1xyXG5cdFx0XHRcdFx0aWYodmFyaWJsIT1udWxsKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZih2YXJpYmwpID09IFwic3RyaW5nXCIpIFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dnY9JyxcIicrdmFyaWJsKydcIic7XHJcblx0XHRcdFx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblxyXG5cdFx0XHRcdFx0XHR2dj0nLCcrdmFyaWJsO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBjYWNoZV9hamF4PXRydWU7XHJcblx0XHRcdFx0XHRpZiAoY2FjaGUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjYWNoZV9hamF4PWNhY2hlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAob255b3VzZWxmPT09IHVuZGVmaW5lZCkgXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBob3BfdXJsPSdBamF4LycrZGlyX25hbWUrJy8nK2ZpbGVfbmFtZSsnLnBocCc7XHJcblx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYob255b3VzZWxmPT0nbG9jYWwnKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBob3BfdXJsPXdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgaG9wX3VybD1vbnlvdXNlbGY7XHRcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKChucHJvZ3Jlc3M9PT0gdW5kZWZpbmVkKXx8KG5wcm9ncmVzcz09IDApKSBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0LypcclxuXHRcdFx0XHRcdCQoJyNucHJvZ3Jlc3MnKS5zaG93KCk7XHJcblx0XHRcdFx0XHR2YXIgd2lkdGg9Z2V0UmFuZG9tSW50KDEwLDUwKTtcclxuXHRcdFx0XHRcdHZhciB3aWR0aDE9Z2V0UmFuZG9tSW50KDUwLDcwKTtcclxuXHRcdFx0XHRcdHZhciB3aWR0aDI9Z2V0UmFuZG9tSW50KDcwLDkwKTtcclxuXHRcdFx0XHRcdHZhciB3aWR0aDM9Z2V0UmFuZG9tSW50KDk1LDk3KTtcclxuXHRcdCAgICAgICAgICAgICQoJyNucHJvZ3Jlc3MgLmJhcicpLmFuaW1hdGUoe3dpZHRoOiB3aWR0aCtcIiVcIn0sIDEwMDAsIGZ1bmN0aW9uKCkgeyAgJCgnI25wcm9ncmVzcyAuYmFyJykuYW5pbWF0ZSh7d2lkdGg6IHdpZHRoMStcIiVcIn0sIDEwMDAsIGZ1bmN0aW9uKCkgeyAkKCcjbnByb2dyZXNzIC5iYXInKS5hbmltYXRlKHt3aWR0aDogd2lkdGgyK1wiJVwifSwgMjAwMCwgZnVuY3Rpb24oKSB7ICQoJyNucHJvZ3Jlc3MgLmJhcicpLmFuaW1hdGUoe3dpZHRoOiB3aWR0aDMrXCIlXCJ9LCA0MDAwLCBmdW5jdGlvbigpIHsgIH0pOyB9KTsgfSk7IH0pO1xyXG5cdFx0XHRcdFx0Ki9cclxuXHRcdFx0XHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICAgICBob3BfdXJsLCAvL9CQ0LTRgNC10YEg0L/QvtC00LPRgNGD0LbQsNC10LzQvtC5INGB0YLRgNCw0L3QuNGG0YtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgdHlwZVEsIC8v0KLQuNC/INC30LDQv9GA0L7RgdCwXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG5cdFx0XHRcdFx0Y2FjaGU6IGNhY2hlX2FqYXgsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFfX3NzLCAgLy9mb3JtX2lkIC0gaWQg0YTQvtGA0LzRiyBodG1sINC60L7RgtC+0YDRg9GOINC90YPQttC90L4g0L/QtdGA0LXQtNCw0YLRjFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb25kYXRhKSB7IC8v0JXRgdC70Lgg0LLRgdC1INC90L7RgNC80LDQu9GM0L3QvlxyXG5cdFx0XHRcdFx0aWYgKChucHJvZ3Jlc3M9PT0gdW5kZWZpbmVkKXx8KG5wcm9ncmVzcz09IDApKSBcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0LypcclxuXHRcdFx0XHRcdCAgJCgnI25wcm9ncmVzcyAuYmFyJykuc3RvcCh0cnVlKTtcclxuXHRcdFx0XHRcdCAgJCgnI25wcm9ncmVzcyAuYmFyJykuYW5pbWF0ZSh7d2lkdGg6IFwiMTAwJVwifSwgNTAwLCBmdW5jdGlvbigpIHsgICQoJyNucHJvZ3Jlc3MnKS5oaWRlKCk7ICQoJyNucHJvZ3Jlc3MgLmJhcicpLndpZHRoKCcwJyk7IH0pO1xyXG5cdFx0XHRcdFx0Ki9cclxuXHRcdFx0XHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvL3dpbmRvdy5qc296bj0kLnBhcnNlSlNPTihqc29uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lmpzb3puPWpzb25kYXRhO1xyXG5cdFx0XHRcdFx0Ly9hbGVydChqc296blsnZGVidWcnXSk7XHJcblxyXG5cdFx0XHRcdFx0aWYoKGpzb3puWydkZWJ1ZyddIT0nJykmJihqc296blsnZGVidWcnXSE9PXVuZGVmaW5lZCkpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHQgICAvLyQoJy53X3NpemUnKS5zaG93KCk7XHJcblx0XHRcdFx0XHQgICAvLyQoJy53X3NpemUnKS5lbXB0eSgpLmFwcGVuZChqc296blsnZGVidWcnXSk7XHJcblx0XHRcdFx0XHQgICAvL2FsZXJ0KGpzb3puWydkZWJ1ZyddKTtcclxuXHJcblx0XHRcdFx0XHRcdGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0J7RiNC40LHQutCwIOKElicranNvem5bJ2RlYnVnJ10pO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vYWxlcnQocmVzdWx0X2Z1bmN0aW9uKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0JC5nbG9iYWxFdmFsKHJlc3VsdF9mdW5jdGlvbisnKGpzb3puJyt2disnKScpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkgeyAvL9CV0YHQu9C4INC+0YjQuNCx0LrQsFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gXHJcbi8v0L7RgtC/0YDQsNCy0LrQsCDRhtC10LvQvtC5INGE0L7RgNC80Ysg0YHQutGA0LjQv9GC0YMgQWpheC9iZXN0L2FkZC5waHBcclxuLypcclxuQWpheENsaWVudCgnYmVzdCcsJ2FkZCcsJ1BPU1QnLDAsJ0FmdGVyQmVzdEFkZCcsNTAsJ2FkZF9iZXN0Jyk7XHJcbkFmdGVyQmVzdEFkZChkYXRhLHZhcmlibClcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXMgPT0gJ29rJyApXHJcblx0e1xyXG5cclxuXHR9XHRcdFxyXG5cdFx0XHJcblx0aWYgKCBkYXRhLnN0YXR1cyA9PSAnZXJyb3InIClcclxuXHR7XHJcblx0XHRcclxuXHR9XHRcclxuXHJcbn1cclxuXHJcbiMjYWRkLnBocFxyXG4kX1BPU1RbXCJuYW1lXCJdINC/0YDQuNC90LXQvNCw0LXQvCDQv9C10YDQtdC00LDQvdC90YvQtSDQv9C10YDQtdC80LXQvdC90YvQtVxyXG4kYVJlcyA9IGFycmF5KCdzdGF0dXMnID0+ICdvaycsICduaWNrbmFtZScgPT4gJ0FyYW1pcycpO1xyXG5yZXF1aXJlX29uY2UoJ1NlcnZpY2VzX0pTT04ucGhwJyk7XHJcbiRvSnNvbiA9IG5ldyBTZXJ2aWNlc19KU09OKCk7XHJcbmVjaG8gJG9Kc29uLT5lbmNvZGUoJGFSZXMpO1xyXG4qL1xyXG5cclxuLy/QvtGC0L/RgNCw0LLQutCwINC/0LXRgNC10LzQtdC90L3Ri9GFINC80LXRgtC+0LTQvtC8INC/0L7RgdGCICBcclxuLypcclxuQWpheENsaWVudCgnYmVzdCcsJ2FkZDEnLCdQT1NUJywndXNlcm5hbWU9VmFzeWEmYWdlPTE4JnNleD1tYWxlJywnQWZ0ZXJCZXN0QWRkJyxudWxsLDApO1xyXG5BZnRlckJlc3RBZGQoZGF0YSlcclxue1xyXG59XHJcbiMjYWRkMS5waHBcclxuJF9QT1NUWyd1c2VybmFtZSddXHJcbiRfUkVRVUVTVFsndXNlcm5hbWUnXSDQv9GA0LjQvdC10LzQsNC10Lwg0L/QtdGA0LXQtNCw0L3QvdGL0LUg0L/QtdGA0LXQvNC10L3QvdGL0LVcclxuKi9cclxuIiwiKGZ1bmN0aW9uKGEpe2EuZm4uY2lyY2xpZnVsPWZ1bmN0aW9uKGIsZCl7dmFyIGM9YS5leHRlbmQoe2ZnY29sb3I6XCIjNTU2YjJmXCIsYmdjb2xvcjpcIiNlZWVcIixmaWxsOmZhbHNlLHdpZHRoOjE1LGRpbWVuc2lvbjoyMDAsZm9udHNpemU6MTUscGVyY2VudDo1MCxhbmltYXRpb25zdGVwOjEsaWNvbnNpemU6XCIyMHB4XCIsaWNvbmNvbG9yOlwiIzk5OVwiLGJvcmRlcjpcImRlZmF1bHRcIixjb21wbGV0ZTpudWxsfSxiKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHc9W1wiZmdjb2xvclwiLFwiYmdjb2xvclwiLFwiZmlsbFwiLFwid2lkdGhcIixcImRpbWVuc2lvblwiLFwiZm9udHNpemVcIixcImFuaW1hdGlvbnN0ZXBcIixcImVuZFBlcmNlbnRcIixcImljb25cIixcImljb25jb2xvclwiLFwiaWNvbnNpemVcIixcImJvcmRlclwiXTt2YXIgZj17fTt2YXIgRj1cIlwiO3ZhciBuPTA7dmFyIHQ9YSh0aGlzKTt2YXIgQT1mYWxzZTt2YXIgdixHO3QuYWRkQ2xhc3MoXCJjaXJjbGlmdWxcIik7ZSh0KTtpZih0LmRhdGEoXCJ0ZXh0XCIpIT11bmRlZmluZWQpe3Y9dC5kYXRhKFwidGV4dFwiKTtpZih0LmRhdGEoXCJpY29uXCIpIT11bmRlZmluZWQpe0Y9YShcIjxpPjwvaT5cIikuYWRkQ2xhc3MoXCJmYSBcIithKHRoaXMpLmRhdGEoXCJpY29uXCIpKS5jc3Moe2NvbG9yOmYuaWNvbmNvbG9yLFwiZm9udC1zaXplXCI6Zi5pY29uc2l6ZX0pfWlmKHQuZGF0YShcInR5cGVcIikhPXVuZGVmaW5lZCl7aj1hKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO2lmKGo9PVwiaGFsZlwiKXtzKHQsXCJjaXJjbGUtdGV4dC1oYWxmXCIsKGYuZGltZW5zaW9uLzEuNDUpKX1lbHNle3ModCxcImNpcmNsZS10ZXh0XCIsZi5kaW1lbnNpb24pfX1lbHNle3ModCxcImNpcmNsZS10ZXh0XCIsZi5kaW1lbnNpb24pfX1pZihhKHRoaXMpLmRhdGEoXCJ0b3RhbFwiKSE9dW5kZWZpbmVkJiZhKHRoaXMpLmRhdGEoXCJwYXJ0XCIpIT11bmRlZmluZWQpe3ZhciBJPWEodGhpcykuZGF0YShcInRvdGFsXCIpLzEwMDtwZXJjZW50PSgoYSh0aGlzKS5kYXRhKFwicGFydFwiKS9JKS8xMDApLnRvRml4ZWQoMyk7bj0oYSh0aGlzKS5kYXRhKFwicGFydFwiKS9JKS50b0ZpeGVkKDMpfWVsc2V7aWYoYSh0aGlzKS5kYXRhKFwicGVyY2VudFwiKSE9dW5kZWZpbmVkKXtwZXJjZW50PWEodGhpcykuZGF0YShcInBlcmNlbnRcIikvMTAwO249YSh0aGlzKS5kYXRhKFwicGVyY2VudFwiKX1lbHNle3BlcmNlbnQ9Yy5wZXJjZW50LzEwMH19aWYoYSh0aGlzKS5kYXRhKFwiaW5mb1wiKSE9dW5kZWZpbmVkKXtHPWEodGhpcykuZGF0YShcImluZm9cIik7aWYoYSh0aGlzKS5kYXRhKFwidHlwZVwiKSE9dW5kZWZpbmVkKXtqPWEodGhpcykuZGF0YShcInR5cGVcIik7aWYoaj09XCJoYWxmXCIpe0QodCwwLjkpfWVsc2V7RCh0LDEuMjUpfX1lbHNle0QodCwxLjI1KX19YSh0aGlzKS53aWR0aChmLmRpbWVuc2lvbitcInB4XCIpO3ZhciBpPWEoXCI8Y2FudmFzPjwvY2FudmFzPlwiKS5hdHRyKHt3aWR0aDpmLmRpbWVuc2lvbixoZWlnaHQ6Zi5kaW1lbnNpb259KS5hcHBlbmRUbyhhKHRoaXMpKS5nZXQoMCk7dmFyIGc9aS5nZXRDb250ZXh0KFwiMmRcIik7dmFyIHI9aS53aWR0aC8yO3ZhciBxPWkuaGVpZ2h0LzI7dmFyIEM9Zi5wZXJjZW50KjM2MDt2YXIgSD1DKihNYXRoLlBJLzE4MCk7dmFyIGw9aS53aWR0aC8yLjU7dmFyIEI9Mi4zKk1hdGguUEk7dmFyIHo9MDt2YXIgRT1mYWxzZTt2YXIgbz1mLmFuaW1hdGlvbnN0ZXA9PT0wP246MDt2YXIgcD1NYXRoLm1heChmLmFuaW1hdGlvbnN0ZXAsMCk7dmFyIHU9TWF0aC5QSSoyO3ZhciBoPU1hdGguUEkvMjt2YXIgaj1cIlwiO3ZhciBrPXRydWU7aWYoYSh0aGlzKS5kYXRhKFwidHlwZVwiKSE9dW5kZWZpbmVkKXtqPWEodGhpcykuZGF0YShcInR5cGVcIik7aWYoaj09XCJoYWxmXCIpe0I9MipNYXRoLlBJO3o9My4xMzt1PU1hdGguUEkqMTtoPU1hdGguUEkvMC45OTZ9fWZ1bmN0aW9uIHMoSix4LHkpe2EoXCI8c3Bhbj48L3NwYW4+XCIpLmFwcGVuZFRvKEopLmFkZENsYXNzKHgpLnRleHQodikucHJlcGVuZChGKS5jc3Moe1wibGluZS1oZWlnaHRcIjp5K1wicHhcIixcImZvbnQtc2l6ZVwiOmYuZm9udHNpemUrXCJweFwifSl9ZnVuY3Rpb24gRCh5LHgpe2EoXCI8c3Bhbj48L3NwYW4+XCIpLmFwcGVuZFRvKHkpLmFkZENsYXNzKFwiY2lyY2xlLWluZm8taGFsZlwiKS5jc3MoXCJsaW5lLWhlaWdodFwiLChmLmRpbWVuc2lvbip4KStcInB4XCIpfWZ1bmN0aW9uIGUoeCl7YS5lYWNoKHcsZnVuY3Rpb24oeSxKKXtpZih4LmRhdGEoSikhPXVuZGVmaW5lZCl7ZltKXT14LmRhdGEoSil9ZWxzZXtmW0pdPWEoYykuYXR0cihKKX1pZihKPT1cImZpbGxcIiYmeC5kYXRhKFwiZmlsbFwiKSE9dW5kZWZpbmVkKXtBPXRydWV9fSl9ZnVuY3Rpb24gbSh4KXtnLmNsZWFyUmVjdCgwLDAsaS53aWR0aCxpLmhlaWdodCk7Zy5iZWdpblBhdGgoKTtnLmFyYyhyLHEsbCx6LEIsZmFsc2UpO2cubGluZVdpZHRoPWYud2lkdGgrMTtnLnN0cm9rZVN0eWxlPWYuYmdjb2xvcjtnLnN0cm9rZSgpO2lmKEEpe2cuZmlsbFN0eWxlPWYuZmlsbDtnLmZpbGwoKX1nLmJlZ2luUGF0aCgpO2cuYXJjKHIscSxsLC0oaCksKCh1KSp4KS1oLGZhbHNlKTtpZihmLmJvcmRlcj09XCJvdXRsaW5lXCIpe2cubGluZVdpZHRoPWYud2lkdGgrMTN9ZWxzZXtpZihmLmJvcmRlcj09XCJpbmxpbmVcIil7Zy5saW5lV2lkdGg9Zi53aWR0aC0xM319Zy5zdHJva2VTdHlsZT1mLmZnY29sb3I7Zy5zdHJva2UoKTtpZihvPG4pe28rPXA7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7bShNYXRoLm1pbihvLG4pLzEwMCl9LHQpfWlmKG89PW4mJmsmJnR5cGVvZihiKSE9XCJ1bmRlZmluZWRcIil7aWYoYS5pc0Z1bmN0aW9uKGIuY29tcGxldGUpKXtiLmNvbXBsZXRlKCk7az1mYWxzZX19fW0oby8xMDApfSl9fShqUXVlcnkpKTsiLCIvKiBqUXVlcnkgdWktZGF0ZXBpY2tlciBleHRlbnNpb24gKi9cblxuLyoqXG4gKlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQXJ0ZW1lZXkvOGJhY2QzNzk2NGE4MDY5YTJlZWVlOGM5YjBiZDJlNDQvXG4gKlxuICogVmVyc2lvbjogMS4wICgxNS4wNi4yMDE2KVxuICogUmVxdWlyZXM6IGpRdWVyeSB2MS44K1xuICogUmVxdWlyZXM6IGpRdWVyeS1VSSB2MS4xMCtcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgQXJ0ZW1lZXlcbiAqIFVuZGVyIE1JVCBhbmQgR1BMIGxpY2Vuc2VzOlxuICogIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKiAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC5odG1sXG4gKlxuICogc2FtcGxlOlxuICogJCgnLmRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcblx0XHRyYW5nZToncGVyaW9kJywgLy8gJ3BlcmlvZCcgb3IgJ211bHRpcGxlJ1xuXHRcdG9uU2VsZWN0OmZ1bmN0aW9uKGRhdGVUZXh0LCBpbnN0LCBleHRlbnNpb25SYW5nZSl7XG5cdFx0XHQvLyByYW5nZSAtIG5ldyBhcmd1bWVudCFcblx0XHRcdHN3aXRjaChpbnN0LnNldHRpbmdzLnJhbmdlKXtcblx0XHRcdFx0Y2FzZSAncGVyaW9kJzpcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhleHRlbnNpb25SYW5nZS5zdGFydERhdGVUZXh0KTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhleHRlbnNpb25SYW5nZS5lbmREYXRlVGV4dCk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXh0ZW5zaW9uUmFuZ2Uuc3RhcnREYXRlKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhleHRlbnNpb25SYW5nZS5lbmREYXRlKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnbXVsdGlwbGUnOlxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGV4dGVuc2lvblJhbmdlLmRhdGVzKTsgLy8gb2JqZWN0LCB3aWR0aCBVVEMtVElNRSBrZXlzXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXh0ZW5zaW9uUmFuZ2UuZGF0ZXNUZXh0KTsgLy8gb2JqZWN0LCB3aWR0aCBVVEMtVElNRSBrZXlzXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbiAqXG4gKiBleHRlbnNpb24gc3R5bGVzOlxuICogLnNlbGVjdGVkXG4gKiAuc2VsZWN0ZWQtc3RhcnRcbiAqIC5zZWxlY3RlZC1lbmRcbiAqIC5maXJzdC1vZi1tb250aFxuICogLmxhc3Qtb2YtbW9udGhcbiAqXG4gKi9cbiBcbiAkLmRhdGVwaWNrZXIuX2dldF9vcmlnaW5hbD0kLmRhdGVwaWNrZXIuX2dldCwkLmRhdGVwaWNrZXIuX2dldD1mdW5jdGlvbih0LGUpe3ZhciBpPSQuZGF0ZXBpY2tlci5fZ2V0X29yaWdpbmFsKHQsZSksYT10LnNldHRpbmdzLnJhbmdlO2lmKCFhKXJldHVybiBpO3ZhciBzPXRoaXM7c3dpdGNoKGEpe2Nhc2VcInBlcmlvZFwiOmNhc2VcIm11bHRpcGxlXCI6dmFyIG49JCh0aGlzLmRwRGl2KS5kYXRhKFwiZGF0ZXBpY2tlckV4dGVuc2lvblJhbmdlXCIpO3N3aXRjaChufHwobj1uZXcgX2RhdGVwaWNrZXJFeHRlbnNpb24sJCh0aGlzLmRwRGl2KS5kYXRhKFwiZGF0ZXBpY2tlckV4dGVuc2lvblJhbmdlXCIsbikpLG4ucmFuZ2U9YSxuLnJhbmdlX211bHRpcGxlX21heD10LnNldHRpbmdzLnJhbmdlX211bHRpcGxlX21heHx8MCxlKXtjYXNlXCJvblNlbGVjdFwiOnZhciByPWk7cnx8KHI9ZnVuY3Rpb24oKXt9KSxpPWZ1bmN0aW9uKHQsZSl7bi5vblNlbGVjdCh0LGUpLHIodCxlLG4pLHMuX2RhdGVwaWNrZXJTaG93aW5nPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLl91cGRhdGVEYXRlcGlja2VyKGUpLHMuX2RhdGVwaWNrZXJTaG93aW5nPSEwfSksbi5zZXRDbGFzc0FjdGl2ZShlKX07YnJlYWs7Y2FzZVwiYmVmb3JlU2hvd0RheVwiOnZhciByPWk7cnx8KHI9ZnVuY3Rpb24oKXtyZXR1cm5bITAsXCJcIl19KSxpPWZ1bmN0aW9uKHQpe3ZhciBlPXIodCk7cmV0dXJuIGU9bi5maWxsRGF5KHQsZSl9O2JyZWFrO2Nhc2VcImJlZm9yZVNob3dcIjp2YXIgcj1pO3J8fChyPWZ1bmN0aW9uKCl7fSksaT1mdW5jdGlvbih0LGUpe3IodCxlKSxuLnNldENsYXNzQWN0aXZlKGUpfTticmVhaztjYXNlXCJvbkNoYW5nZU1vbnRoWWVhclwiOnZhciByPWk7cnx8KHI9ZnVuY3Rpb24oKXt9KSxpPWZ1bmN0aW9uKHQsZSxpKXtyKHQsZSxpKSxuLnNldENsYXNzQWN0aXZlKGkpfX19cmV0dXJuIGl9LCQuZGF0ZXBpY2tlci5fc2V0RGF0ZV9vcmlnaW5hbD0kLmRhdGVwaWNrZXIuX3NldERhdGUsJC5kYXRlcGlja2VyLl9zZXREYXRlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgYT10LnNldHRpbmdzLnJhbmdlO2lmKCFhKXJldHVybiAkLmRhdGVwaWNrZXIuX3NldERhdGVfb3JpZ2luYWwodCxlLGkpO3ZhciBzPXRoaXMuZHBEaXYuZGF0YShcImRhdGVwaWNrZXJFeHRlbnNpb25SYW5nZVwiKTtpZighcylyZXR1cm4gJC5kYXRlcGlja2VyLl9zZXREYXRlX29yaWdpbmFsKHQsZSxpKTtzd2l0Y2goYSl7Y2FzZVwicGVyaW9kXCI6KFwib2JqZWN0XCIhPXR5cGVvZiBlfHx2b2lkIDA9PWUubGVuZ3RoKSYmKGU9W2UsZV0pLHMuc3RlcD0wLCQuZGF0ZXBpY2tlci5fc2V0RGF0ZV9vcmlnaW5hbCh0LGVbMF0saSkscy5zdGFydERhdGU9dGhpcy5fZ2V0RGF0ZSh0KSxzLnN0YXJ0RGF0ZVRleHQ9dGhpcy5fZm9ybWF0RGF0ZSh0KSwkLmRhdGVwaWNrZXIuX3NldERhdGVfb3JpZ2luYWwodCxlWzFdLGkpLHMuZW5kRGF0ZT10aGlzLl9nZXREYXRlKHQpLHMuZW5kRGF0ZVRleHQ9dGhpcy5fZm9ybWF0RGF0ZSh0KSxzLnNldENsYXNzQWN0aXZlKHQpO2JyZWFrO2Nhc2VcIm11bHRpcGxlXCI6KFwib2JqZWN0XCIhPXR5cGVvZiBlfHx2b2lkIDA9PWUubGVuZ3RoKSYmKGU9W2VdKSxzLmRhdGVzPVtdLHMuZGF0ZXNUZXh0PVtdO3ZhciBuPXRoaXM7JC5tYXAoZSxmdW5jdGlvbihlKXskLmRhdGVwaWNrZXIuX3NldERhdGVfb3JpZ2luYWwodCxlLGkpLHMuZGF0ZXMucHVzaChuLl9nZXREYXRlKHQpKSxzLmRhdGVzVGV4dC5wdXNoKG4uX2Zvcm1hdERhdGUodCkpfSkscy5zZXRDbGFzc0FjdGl2ZSh0KX19O3ZhciBfZGF0ZXBpY2tlckV4dGVuc2lvbj1mdW5jdGlvbigpe3RoaXMucmFuZ2U9ITEsdGhpcy5yYW5nZV9tdWx0aXBsZV9tYXg9MCx0aGlzLnN0ZXA9MCx0aGlzLmRhdGVzPVtdLHRoaXMuZGF0ZXNUZXh0PVtdLHRoaXMuc3RhcnREYXRlPW51bGwsdGhpcy5lbmREYXRlPW51bGwsdGhpcy5zdGFydERhdGVUZXh0PVwiXCIsdGhpcy5lbmREYXRlVGV4dD1cIlwiLHRoaXMub25TZWxlY3Q9ZnVuY3Rpb24odCxlKXtzd2l0Y2godGhpcy5yYW5nZSl7Y2FzZVwicGVyaW9kXCI6cmV0dXJuIHRoaXMub25TZWxlY3RQZXJpb2QodCxlKTtjYXNlXCJtdWx0aXBsZVwiOnJldHVybiB0aGlzLm9uU2VsZWN0TXVsdGlwbGUodCxlKX19LHRoaXMub25TZWxlY3RQZXJpb2Q9ZnVuY3Rpb24odCxlKXt0aGlzLnN0ZXArKyx0aGlzLnN0ZXAlPTIsdGhpcy5zdGVwPyh0aGlzLnN0YXJ0RGF0ZT10aGlzLmdldFNlbGVjdGVkRGF0ZShlKSx0aGlzLmVuZERhdGU9dGhpcy5zdGFydERhdGUsdGhpcy5zdGFydERhdGVUZXh0PXQsdGhpcy5lbmREYXRlVGV4dD10aGlzLnN0YXJ0RGF0ZVRleHQpOih0aGlzLmVuZERhdGU9dGhpcy5nZXRTZWxlY3RlZERhdGUoZSksdGhpcy5lbmREYXRlVGV4dD10LHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKT50aGlzLmVuZERhdGUuZ2V0VGltZSgpJiYodGhpcy5lbmREYXRlPXRoaXMuc3RhcnREYXRlLHRoaXMuc3RhcnREYXRlPXRoaXMuZ2V0U2VsZWN0ZWREYXRlKGUpLHRoaXMuZW5kRGF0ZVRleHQ9dGhpcy5zdGFydERhdGVUZXh0LHRoaXMuc3RhcnREYXRlVGV4dD10KSl9LHRoaXMub25TZWxlY3RNdWx0aXBsZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0U2VsZWN0ZWREYXRlKGUpLGE9LTE7JC5tYXAodGhpcy5kYXRlcyxmdW5jdGlvbih0LGUpe3QuZ2V0VGltZSgpPT1pLmdldFRpbWUoKSYmKGE9ZSl9KTt2YXIgcz0kLmluQXJyYXkodCx0aGlzLmRhdGVzVGV4dCk7LTEhPWE/dGhpcy5kYXRlcy5zcGxpY2UoYSwxKTp0aGlzLmRhdGVzLnB1c2goaSksLTEhPXM/dGhpcy5kYXRlc1RleHQuc3BsaWNlKHMsMSk6dGhpcy5kYXRlc1RleHQucHVzaCh0KSx0aGlzLnJhbmdlX211bHRpcGxlX21heCYmdGhpcy5kYXRlcy5sZW5ndGg+dGhpcy5yYW5nZV9tdWx0aXBsZV9tYXgmJih0aGlzLmRhdGVzLnNwbGljZSgwLDEpLHRoaXMuZGF0ZXNUZXh0LnNwbGljZSgwLDEpKX0sdGhpcy5maWxsRGF5PWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZVsxXTtzd2l0Y2goMT09dC5nZXREYXRlKCkmJihpKz1cIiBmaXJzdC1vZi1tb250aFwiKSx0LmdldERhdGUoKT09bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSsxLDApLmdldERhdGUoKSYmKGkrPVwiIGxhc3Qtb2YtbW9udGhcIiksZVsxXT1pLnRyaW0oKSx0aGlzLnJhbmdlKXtjYXNlXCJwZXJpb2RcIjpyZXR1cm4gdGhpcy5maWxsRGF5UGVyaW9kKHQsZSk7Y2FzZVwibXVsdGlwbGVcIjpyZXR1cm4gdGhpcy5maWxsRGF5TXVsdGlwbGUodCxlKX19LHRoaXMuZmlsbERheVBlcmlvZD1mdW5jdGlvbih0LGUpe2lmKCF0aGlzLnN0YXJ0RGF0ZXx8IXRoaXMuZW5kRGF0ZSlyZXR1cm4gZTt2YXIgaT1lWzFdO3JldHVybiB0Pj10aGlzLnN0YXJ0RGF0ZSYmdDw9dGhpcy5lbmREYXRlJiYoaSs9XCIgc2VsZWN0ZWRcIiksdC5nZXRUaW1lKCk9PXRoaXMuc3RhcnREYXRlLmdldFRpbWUoKSYmKGkrPVwiIHNlbGVjdGVkLXN0YXJ0XCIpLHQuZ2V0VGltZSgpPT10aGlzLmVuZERhdGUuZ2V0VGltZSgpJiYoaSs9XCIgc2VsZWN0ZWQtZW5kXCIpLGVbMV09aS50cmltKCksZX0sdGhpcy5maWxsRGF5TXVsdGlwbGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1lWzFdLGE9ITE7cmV0dXJuICQubWFwKHRoaXMuZGF0ZXMsZnVuY3Rpb24oZSl7ZS5nZXRUaW1lKCk9PXQuZ2V0VGltZSgpJiYoYT0hMCl9KSxhJiYoaSs9XCIgc2VsZWN0ZWQgc2VsZWN0ZWQtc3RhcnQgc2VsZWN0ZWQtZW5kXCIpLGVbMV09aS50cmltKCksZX0sdGhpcy5nZXRTZWxlY3RlZERhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEYXRlKHQuc2VsZWN0ZWRZZWFyLHQuc2VsZWN0ZWRNb250aCx0LnNlbGVjdGVkRGF5KX0sdGhpcy5zZXRDbGFzc0FjdGl2ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskKFwidGQuc2VsZWN0ZWQgPiAqXCIsdC5kcERpdikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksXCJtdWx0aXBsZVwiPT1lLnJhbmdlJiYkKFwidGQ6bm90KC5zZWxlY3RlZClcIix0LmRwRGl2KS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItY3VycmVudC1kYXlcIikuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKX0pfX07IiwiLyohIGpRdWVyeSBVSSAtIHYxLjkuMiAtIDIwMTQtMDMtMjFcclxuKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiogSW5jbHVkZXM6IGpxdWVyeS51aS5lZmZlY3QuanNcclxuKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi9cclxuXHJcbmpRdWVyeS5lZmZlY3RzfHxmdW5jdGlvbihlLHQpe3ZhciBpPWUudWlCYWNrQ29tcGF0IT09ITEsYT1cInVpLWVmZmVjdHMtXCI7ZS5lZmZlY3RzPXtlZmZlY3Q6e319LGZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gYShlLHQsaSl7dmFyIGE9Y1t0LnR5cGVdfHx7fTtyZXR1cm4gbnVsbD09ZT9pfHwhdC5kZWY/bnVsbDp0LmRlZjooZT1hLmZsb29yP35+ZTpwYXJzZUZsb2F0KGUpLGlzTmFOKGUpP3QuZGVmOmEubW9kPyhlK2EubW9kKSVhLm1vZDowPmU/MDplPmEubWF4P2EubWF4OmUpfWZ1bmN0aW9uIHMoZSl7dmFyIGE9dSgpLHM9YS5fcmdiYT1bXTtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKCksbShsLGZ1bmN0aW9uKHQsbil7dmFyIHIsbz1uLnJlLmV4ZWMoZSksaD1vJiZuLnBhcnNlKG8pLGw9bi5zcGFjZXx8XCJyZ2JhXCI7cmV0dXJuIGg/KHI9YVtsXShoKSxhW2RbbF0uY2FjaGVdPXJbZFtsXS5jYWNoZV0scz1hLl9yZ2JhPXIuX3JnYmEsITEpOml9KSxzLmxlbmd0aD8oXCIwLDAsMCwwXCI9PT1zLmpvaW4oKSYmdC5leHRlbmQocyxyLnRyYW5zcGFyZW50KSxhKTpyW2VdfWZ1bmN0aW9uIG4oZSx0LGkpe3JldHVybiBpPShpKzEpJTEsMT42Kmk/ZSs2Kih0LWUpKmk6MT4yKmk/dDoyPjMqaT9lKzYqKHQtZSkqKDIvMy1pKTplfXZhciByLG89XCJiYWNrZ3JvdW5kQ29sb3IgYm9yZGVyQm90dG9tQ29sb3IgYm9yZGVyTGVmdENvbG9yIGJvcmRlclJpZ2h0Q29sb3IgYm9yZGVyVG9wQ29sb3IgY29sb3IgY29sdW1uUnVsZUNvbG9yIG91dGxpbmVDb2xvciB0ZXh0RGVjb3JhdGlvbkNvbG9yIHRleHRFbXBoYXNpc0NvbG9yXCIuc3BsaXQoXCIgXCIpLGg9L14oW1xcLStdKT1cXHMqKFxcZCtcXC4/XFxkKikvLGw9W3tyZTovcmdiYT9cXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKig/OixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bZVsxXSxlWzJdLGVbM10sZVs0XV19fSx7cmU6L3JnYmE/XFwoXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyooPzosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxccyopP1xcKS8scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuWzIuNTUqZVsxXSwyLjU1KmVbMl0sMi41NSplWzNdLGVbNF1dfX0se3JlOi8jKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxNikscGFyc2VJbnQoZVsyXSwxNikscGFyc2VJbnQoZVszXSwxNildfX0se3JlOi8jKFthLWYwLTldKShbYS1mMC05XSkoW2EtZjAtOV0pLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXStlWzFdLDE2KSxwYXJzZUludChlWzJdK2VbMl0sMTYpLHBhcnNlSW50KGVbM10rZVszXSwxNildfX0se3JlOi9oc2xhP1xcKFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLHNwYWNlOlwiaHNsYVwiLHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybltlWzFdLGVbMl0vMTAwLGVbM10vMTAwLGVbNF1dfX1dLHU9dC5Db2xvcj1mdW5jdGlvbihlLGksYSxzKXtyZXR1cm4gbmV3IHQuQ29sb3IuZm4ucGFyc2UoZSxpLGEscyl9LGQ9e3JnYmE6e3Byb3BzOntyZWQ6e2lkeDowLHR5cGU6XCJieXRlXCJ9LGdyZWVuOntpZHg6MSx0eXBlOlwiYnl0ZVwifSxibHVlOntpZHg6Mix0eXBlOlwiYnl0ZVwifX19LGhzbGE6e3Byb3BzOntodWU6e2lkeDowLHR5cGU6XCJkZWdyZWVzXCJ9LHNhdHVyYXRpb246e2lkeDoxLHR5cGU6XCJwZXJjZW50XCJ9LGxpZ2h0bmVzczp7aWR4OjIsdHlwZTpcInBlcmNlbnRcIn19fX0sYz17XCJieXRlXCI6e2Zsb29yOiEwLG1heDoyNTV9LHBlcmNlbnQ6e21heDoxfSxkZWdyZWVzOnttb2Q6MzYwLGZsb29yOiEwfX0scD11LnN1cHBvcnQ9e30sZj10KFwiPHA+XCIpWzBdLG09dC5lYWNoO2Yuc3R5bGUuY3NzVGV4dD1cImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSlcIixwLnJnYmE9Zi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IuaW5kZXhPZihcInJnYmFcIik+LTEsbShkLGZ1bmN0aW9uKGUsdCl7dC5jYWNoZT1cIl9cIitlLHQucHJvcHMuYWxwaGE9e2lkeDozLHR5cGU6XCJwZXJjZW50XCIsZGVmOjF9fSksdS5mbj10LmV4dGVuZCh1LnByb3RvdHlwZSx7cGFyc2U6ZnVuY3Rpb24obixvLGgsbCl7aWYobj09PWkpcmV0dXJuIHRoaXMuX3JnYmE9W251bGwsbnVsbCxudWxsLG51bGxdLHRoaXM7KG4uanF1ZXJ5fHxuLm5vZGVUeXBlKSYmKG49dChuKS5jc3Mobyksbz1pKTt2YXIgYz10aGlzLHA9dC50eXBlKG4pLGY9dGhpcy5fcmdiYT1bXTtyZXR1cm4gbyE9PWkmJihuPVtuLG8saCxsXSxwPVwiYXJyYXlcIiksXCJzdHJpbmdcIj09PXA/dGhpcy5wYXJzZShzKG4pfHxyLl9kZWZhdWx0KTpcImFycmF5XCI9PT1wPyhtKGQucmdiYS5wcm9wcyxmdW5jdGlvbihlLHQpe2ZbdC5pZHhdPWEoblt0LmlkeF0sdCl9KSx0aGlzKTpcIm9iamVjdFwiPT09cD8obiBpbnN0YW5jZW9mIHU/bShkLGZ1bmN0aW9uKGUsdCl7blt0LmNhY2hlXSYmKGNbdC5jYWNoZV09blt0LmNhY2hlXS5zbGljZSgpKX0pOm0oZCxmdW5jdGlvbih0LGkpe3ZhciBzPWkuY2FjaGU7bShpLnByb3BzLGZ1bmN0aW9uKGUsdCl7aWYoIWNbc10mJmkudG8pe2lmKFwiYWxwaGFcIj09PWV8fG51bGw9PW5bZV0pcmV0dXJuO2Nbc109aS50byhjLl9yZ2JhKX1jW3NdW3QuaWR4XT1hKG5bZV0sdCwhMCl9KSxjW3NdJiYwPmUuaW5BcnJheShudWxsLGNbc10uc2xpY2UoMCwzKSkmJihjW3NdWzNdPTEsaS5mcm9tJiYoYy5fcmdiYT1pLmZyb20oY1tzXSkpKX0pLHRoaXMpOml9LGlzOmZ1bmN0aW9uKGUpe3ZhciB0PXUoZSksYT0hMCxzPXRoaXM7cmV0dXJuIG0oZCxmdW5jdGlvbihlLG4pe3ZhciByLG89dFtuLmNhY2hlXTtyZXR1cm4gbyYmKHI9c1tuLmNhY2hlXXx8bi50byYmbi50byhzLl9yZ2JhKXx8W10sbShuLnByb3BzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGwhPW9bdC5pZHhdP2E9b1t0LmlkeF09PT1yW3QuaWR4XTppfSkpLGF9KSxhfSxfc3BhY2U6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXM7cmV0dXJuIG0oZCxmdW5jdGlvbihpLGEpe3RbYS5jYWNoZV0mJmUucHVzaChpKX0pLGUucG9wKCl9LHRyYW5zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgaT11KGUpLHM9aS5fc3BhY2UoKSxuPWRbc10scj0wPT09dGhpcy5hbHBoYSgpP3UoXCJ0cmFuc3BhcmVudFwiKTp0aGlzLG89cltuLmNhY2hlXXx8bi50byhyLl9yZ2JhKSxoPW8uc2xpY2UoKTtyZXR1cm4gaT1pW24uY2FjaGVdLG0obi5wcm9wcyxmdW5jdGlvbihlLHMpe3ZhciBuPXMuaWR4LHI9b1tuXSxsPWlbbl0sdT1jW3MudHlwZV18fHt9O251bGwhPT1sJiYobnVsbD09PXI/aFtuXT1sOih1Lm1vZCYmKGwtcj51Lm1vZC8yP3IrPXUubW9kOnItbD51Lm1vZC8yJiYoci09dS5tb2QpKSxoW25dPWEoKGwtcikqdCtyLHMpKSl9KSx0aGlzW3NdKGgpfSxibGVuZDpmdW5jdGlvbihlKXtpZigxPT09dGhpcy5fcmdiYVszXSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLl9yZ2JhLnNsaWNlKCksYT1pLnBvcCgpLHM9dShlKS5fcmdiYTtyZXR1cm4gdSh0Lm1hcChpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuKDEtYSkqc1t0XSthKmV9KSl9LHRvUmdiYVN0cmluZzpmdW5jdGlvbigpe3ZhciBlPVwicmdiYShcIixpPXQubWFwKHRoaXMuX3JnYmEsZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZT90PjI/MTowOmV9KTtyZXR1cm4gMT09PWlbM10mJihpLnBvcCgpLGU9XCJyZ2IoXCIpLGUraS5qb2luKCkrXCIpXCJ9LHRvSHNsYVN0cmluZzpmdW5jdGlvbigpe3ZhciBlPVwiaHNsYShcIixpPXQubWFwKHRoaXMuaHNsYSgpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUmJihlPXQ+Mj8xOjApLHQmJjM+dCYmKGU9TWF0aC5yb3VuZCgxMDAqZSkrXCIlXCIpLGV9KTtyZXR1cm4gMT09PWlbM10mJihpLnBvcCgpLGU9XCJoc2woXCIpLGUraS5qb2luKCkrXCIpXCJ9LHRvSGV4U3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX3JnYmEuc2xpY2UoKSxhPWkucG9wKCk7cmV0dXJuIGUmJmkucHVzaCh+figyNTUqYSkpLFwiI1wiK3QubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIGU9KGV8fDApLnRvU3RyaW5nKDE2KSwxPT09ZS5sZW5ndGg/XCIwXCIrZTplfSkuam9pbihcIlwiKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3JnYmFbM10/XCJ0cmFuc3BhcmVudFwiOnRoaXMudG9SZ2JhU3RyaW5nKCl9fSksdS5mbi5wYXJzZS5wcm90b3R5cGU9dS5mbixkLmhzbGEudG89ZnVuY3Rpb24oZSl7aWYobnVsbD09ZVswXXx8bnVsbD09ZVsxXXx8bnVsbD09ZVsyXSlyZXR1cm5bbnVsbCxudWxsLG51bGwsZVszXV07dmFyIHQsaSxhPWVbMF0vMjU1LHM9ZVsxXS8yNTUsbj1lWzJdLzI1NSxyPWVbM10sbz1NYXRoLm1heChhLHMsbiksaD1NYXRoLm1pbihhLHMsbiksbD1vLWgsdT1vK2gsZD0uNSp1O3JldHVybiB0PWg9PT1vPzA6YT09PW8/NjAqKHMtbikvbCszNjA6cz09PW8/NjAqKG4tYSkvbCsxMjA6NjAqKGEtcykvbCsyNDAsaT0wPT09ZHx8MT09PWQ/ZDouNT49ZD9sL3U6bC8oMi11KSxbTWF0aC5yb3VuZCh0KSUzNjAsaSxkLG51bGw9PXI/MTpyXX0sZC5oc2xhLmZyb209ZnVuY3Rpb24oZSl7aWYobnVsbD09ZVswXXx8bnVsbD09ZVsxXXx8bnVsbD09ZVsyXSlyZXR1cm5bbnVsbCxudWxsLG51bGwsZVszXV07dmFyIHQ9ZVswXS8zNjAsaT1lWzFdLGE9ZVsyXSxzPWVbM10scj0uNT49YT9hKigxK2kpOmEraS1hKmksbz0yKmEtcjtyZXR1cm5bTWF0aC5yb3VuZCgyNTUqbihvLHIsdCsxLzMpKSxNYXRoLnJvdW5kKDI1NSpuKG8scix0KSksTWF0aC5yb3VuZCgyNTUqbihvLHIsdC0xLzMpKSxzXX0sbShkLGZ1bmN0aW9uKGUscyl7dmFyIG49cy5wcm9wcyxyPXMuY2FjaGUsbz1zLnRvLGw9cy5mcm9tO3UuZm5bZV09ZnVuY3Rpb24oZSl7aWYobyYmIXRoaXNbcl0mJih0aGlzW3JdPW8odGhpcy5fcmdiYSkpLGU9PT1pKXJldHVybiB0aGlzW3JdLnNsaWNlKCk7dmFyIHMsaD10LnR5cGUoZSksZD1cImFycmF5XCI9PT1ofHxcIm9iamVjdFwiPT09aD9lOmFyZ3VtZW50cyxjPXRoaXNbcl0uc2xpY2UoKTtyZXR1cm4gbShuLGZ1bmN0aW9uKGUsdCl7dmFyIGk9ZFtcIm9iamVjdFwiPT09aD9lOnQuaWR4XTtudWxsPT1pJiYoaT1jW3QuaWR4XSksY1t0LmlkeF09YShpLHQpfSksbD8ocz11KGwoYykpLHNbcl09YyxzKTp1KGMpfSxtKG4sZnVuY3Rpb24oaSxhKXt1LmZuW2ldfHwodS5mbltpXT1mdW5jdGlvbihzKXt2YXIgbixyPXQudHlwZShzKSxvPVwiYWxwaGFcIj09PWk/dGhpcy5faHNsYT9cImhzbGFcIjpcInJnYmFcIjplLGw9dGhpc1tvXSgpLHU9bFthLmlkeF07cmV0dXJuXCJ1bmRlZmluZWRcIj09PXI/dTooXCJmdW5jdGlvblwiPT09ciYmKHM9cy5jYWxsKHRoaXMsdSkscj10LnR5cGUocykpLG51bGw9PXMmJmEuZW1wdHk/dGhpczooXCJzdHJpbmdcIj09PXImJihuPWguZXhlYyhzKSxuJiYocz11K3BhcnNlRmxvYXQoblsyXSkqKFwiK1wiPT09blsxXT8xOi0xKSkpLGxbYS5pZHhdPXMsdGhpc1tvXShsKSkpfSl9KX0pLG0obyxmdW5jdGlvbihlLGkpe3QuY3NzSG9va3NbaV09e3NldDpmdW5jdGlvbihlLGEpe3ZhciBuLHIsbz1cIlwiO2lmKFwic3RyaW5nXCIhPT10LnR5cGUoYSl8fChuPXMoYSkpKXtpZihhPXUobnx8YSksIXAucmdiYSYmMSE9PWEuX3JnYmFbM10pe2ZvcihyPVwiYmFja2dyb3VuZENvbG9yXCI9PT1pP2UucGFyZW50Tm9kZTplOyhcIlwiPT09b3x8XCJ0cmFuc3BhcmVudFwiPT09bykmJnImJnIuc3R5bGU7KXRyeXtvPXQuY3NzKHIsXCJiYWNrZ3JvdW5kQ29sb3JcIikscj1yLnBhcmVudE5vZGV9Y2F0Y2goaCl7fWE9YS5ibGVuZChvJiZcInRyYW5zcGFyZW50XCIhPT1vP286XCJfZGVmYXVsdFwiKX1hPWEudG9SZ2JhU3RyaW5nKCl9dHJ5e2Uuc3R5bGVbaV09YX1jYXRjaChsKXt9fX0sdC5meC5zdGVwW2ldPWZ1bmN0aW9uKGUpe2UuY29sb3JJbml0fHwoZS5zdGFydD11KGUuZWxlbSxpKSxlLmVuZD11KGUuZW5kKSxlLmNvbG9ySW5pdD0hMCksdC5jc3NIb29rc1tpXS5zZXQoZS5lbGVtLGUuc3RhcnQudHJhbnNpdGlvbihlLmVuZCxlLnBvcykpfX0pLHQuY3NzSG9va3MuYm9yZGVyQ29sb3I9e2V4cGFuZDpmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gbShbXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sZnVuY3Rpb24oaSxhKXt0W1wiYm9yZGVyXCIrYStcIkNvbG9yXCJdPWV9KSx0fX0scj10LkNvbG9yLm5hbWVzPXthcXVhOlwiIzAwZmZmZlwiLGJsYWNrOlwiIzAwMDAwMFwiLGJsdWU6XCIjMDAwMGZmXCIsZnVjaHNpYTpcIiNmZjAwZmZcIixncmF5OlwiIzgwODA4MFwiLGdyZWVuOlwiIzAwODAwMFwiLGxpbWU6XCIjMDBmZjAwXCIsbWFyb29uOlwiIzgwMDAwMFwiLG5hdnk6XCIjMDAwMDgwXCIsb2xpdmU6XCIjODA4MDAwXCIscHVycGxlOlwiIzgwMDA4MFwiLHJlZDpcIiNmZjAwMDBcIixzaWx2ZXI6XCIjYzBjMGMwXCIsdGVhbDpcIiMwMDgwODBcIix3aGl0ZTpcIiNmZmZmZmZcIix5ZWxsb3c6XCIjZmZmZjAwXCIsdHJhbnNwYXJlbnQ6W251bGwsbnVsbCxudWxsLDBdLF9kZWZhdWx0OlwiI2ZmZmZmZlwifX0oalF1ZXJ5KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt2YXIgdCxpLGE9dGhpcy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3P3RoaXMub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6dGhpcy5jdXJyZW50U3R5bGUscz17fTtpZihhJiZhLmxlbmd0aCYmYVswXSYmYVthWzBdXSlmb3IoaT1hLmxlbmd0aDtpLS07KXQ9YVtpXSxcInN0cmluZ1wiPT10eXBlb2YgYVt0XSYmKHNbZS5jYW1lbENhc2UodCldPWFbdF0pO2Vsc2UgZm9yKHQgaW4gYSlcInN0cmluZ1wiPT10eXBlb2YgYVt0XSYmKHNbdF09YVt0XSk7cmV0dXJuIHN9ZnVuY3Rpb24gYSh0LGkpe3ZhciBhLHMscj17fTtmb3IoYSBpbiBpKXM9aVthXSx0W2FdIT09cyYmKG5bYV18fChlLmZ4LnN0ZXBbYV18fCFpc05hTihwYXJzZUZsb2F0KHMpKSkmJihyW2FdPXMpKTtyZXR1cm4gcn12YXIgcz1bXCJhZGRcIixcInJlbW92ZVwiLFwidG9nZ2xlXCJdLG49e2JvcmRlcjoxLGJvcmRlckJvdHRvbToxLGJvcmRlckNvbG9yOjEsYm9yZGVyTGVmdDoxLGJvcmRlclJpZ2h0OjEsYm9yZGVyVG9wOjEsYm9yZGVyV2lkdGg6MSxtYXJnaW46MSxwYWRkaW5nOjF9O2UuZWFjaChbXCJib3JkZXJMZWZ0U3R5bGVcIixcImJvcmRlclJpZ2h0U3R5bGVcIixcImJvcmRlckJvdHRvbVN0eWxlXCIsXCJib3JkZXJUb3BTdHlsZVwiXSxmdW5jdGlvbih0LGkpe2UuZnguc3RlcFtpXT1mdW5jdGlvbihlKXsoXCJub25lXCIhPT1lLmVuZCYmIWUuc2V0QXR0cnx8MT09PWUucG9zJiYhZS5zZXRBdHRyKSYmKGpRdWVyeS5zdHlsZShlLmVsZW0saSxlLmVuZCksZS5zZXRBdHRyPSEwKX19KSxlLmVmZmVjdHMuYW5pbWF0ZUNsYXNzPWZ1bmN0aW9uKHQsbixyLG8pe3ZhciBoPWUuc3BlZWQobixyLG8pO3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIG4scj1lKHRoaXMpLG89ci5hdHRyKFwiY2xhc3NcIil8fFwiXCIsbD1oLmNoaWxkcmVuP3IuZmluZChcIipcIikuYW5kU2VsZigpOnI7bD1sLm1hcChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJue2VsOnQsc3RhcnQ6aS5jYWxsKHRoaXMpfX0pLG49ZnVuY3Rpb24oKXtlLmVhY2gocyxmdW5jdGlvbihlLGkpe3RbaV0mJnJbaStcIkNsYXNzXCJdKHRbaV0pfSl9LG4oKSxsPWwubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kPWkuY2FsbCh0aGlzLmVsWzBdKSx0aGlzLmRpZmY9YSh0aGlzLnN0YXJ0LHRoaXMuZW5kKSx0aGlzfSksci5hdHRyKFwiY2xhc3NcIixvKSxsPWwubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPWUuRGVmZXJyZWQoKSxhPWpRdWVyeS5leHRlbmQoe30saCx7cXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtpLnJlc29sdmUodCl9fSk7cmV0dXJuIHRoaXMuZWwuYW5pbWF0ZSh0aGlzLmRpZmYsYSksaS5wcm9taXNlKCl9KSxlLndoZW4uYXBwbHkoZSxsLmdldCgpKS5kb25lKGZ1bmN0aW9uKCl7bigpLGUuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsO2UuZWFjaCh0aGlzLmRpZmYsZnVuY3Rpb24oZSl7dC5jc3MoZSxcIlwiKX0pfSksaC5jb21wbGV0ZS5jYWxsKHJbMF0pfSl9KX0sZS5mbi5leHRlbmQoe19hZGRDbGFzczplLmZuLmFkZENsYXNzLGFkZENsYXNzOmZ1bmN0aW9uKHQsaSxhLHMpe3JldHVybiBpP2UuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6dH0saSxhLHMpOnRoaXMuX2FkZENsYXNzKHQpfSxfcmVtb3ZlQ2xhc3M6ZS5mbi5yZW1vdmVDbGFzcyxyZW1vdmVDbGFzczpmdW5jdGlvbih0LGksYSxzKXtyZXR1cm4gaT9lLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7cmVtb3ZlOnR9LGksYSxzKTp0aGlzLl9yZW1vdmVDbGFzcyh0KX0sX3RvZ2dsZUNsYXNzOmUuZm4udG9nZ2xlQ2xhc3MsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSxhLHMsbixyKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGF8fGE9PT10P3M/ZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMsYT97YWRkOml9OntyZW1vdmU6aX0scyxuLHIpOnRoaXMuX3RvZ2dsZUNsYXNzKGksYSk6ZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse3RvZ2dsZTppfSxhLHMsbil9LHN3aXRjaENsYXNzOmZ1bmN0aW9uKHQsaSxhLHMsbil7cmV0dXJuIGUuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6aSxyZW1vdmU6dH0sYSxzLG4pfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcyh0LGksYSxzKXtyZXR1cm4gZS5pc1BsYWluT2JqZWN0KHQpJiYoaT10LHQ9dC5lZmZlY3QpLHQ9e2VmZmVjdDp0fSxudWxsPT1pJiYoaT17fSksZS5pc0Z1bmN0aW9uKGkpJiYocz1pLGE9bnVsbCxpPXt9KSwoXCJudW1iZXJcIj09dHlwZW9mIGl8fGUuZnguc3BlZWRzW2ldKSYmKHM9YSxhPWksaT17fSksZS5pc0Z1bmN0aW9uKGEpJiYocz1hLGE9bnVsbCksaSYmZS5leHRlbmQodCxpKSxhPWF8fGkuZHVyYXRpb24sdC5kdXJhdGlvbj1lLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBhP2E6YSBpbiBlLmZ4LnNwZWVkcz9lLmZ4LnNwZWVkc1thXTplLmZ4LnNwZWVkcy5fZGVmYXVsdCx0LmNvbXBsZXRlPXN8fGkuY29tcGxldGUsdH1mdW5jdGlvbiBuKHQpe3JldHVybiF0fHxcIm51bWJlclwiPT10eXBlb2YgdHx8ZS5meC5zcGVlZHNbdF0/ITA6XCJzdHJpbmdcIiE9dHlwZW9mIHR8fGUuZWZmZWN0cy5lZmZlY3RbdF0/ITE6aSYmZS5lZmZlY3RzW3RdPyExOiEwfWUuZXh0ZW5kKGUuZWZmZWN0cyx7dmVyc2lvbjpcIjEuOS4yXCIsc2F2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT0wO3QubGVuZ3RoPmk7aSsrKW51bGwhPT10W2ldJiZlLmRhdGEoYSt0W2ldLGVbMF0uc3R5bGVbdFtpXV0pfSxyZXN0b3JlOmZ1bmN0aW9uKGUsaSl7dmFyIHMsbjtmb3Iobj0wO2kubGVuZ3RoPm47bisrKW51bGwhPT1pW25dJiYocz1lLmRhdGEoYStpW25dKSxzPT09dCYmKHM9XCJcIiksZS5jc3MoaVtuXSxzKSl9LHNldE1vZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInRvZ2dsZVwiPT09dCYmKHQ9ZS5pcyhcIjpoaWRkZW5cIik/XCJzaG93XCI6XCJoaWRlXCIpLHR9LGdldEJhc2VsaW5lOmZ1bmN0aW9uKGUsdCl7dmFyIGksYTtzd2l0Y2goZVswXSl7Y2FzZVwidG9wXCI6aT0wO2JyZWFrO2Nhc2VcIm1pZGRsZVwiOmk9LjU7YnJlYWs7Y2FzZVwiYm90dG9tXCI6aT0xO2JyZWFrO2RlZmF1bHQ6aT1lWzBdL3QuaGVpZ2h0fXN3aXRjaChlWzFdKXtjYXNlXCJsZWZ0XCI6YT0wO2JyZWFrO2Nhc2VcImNlbnRlclwiOmE9LjU7YnJlYWs7Y2FzZVwicmlnaHRcIjphPTE7YnJlYWs7ZGVmYXVsdDphPWVbMV0vdC53aWR0aH1yZXR1cm57eDphLHk6aX19LGNyZWF0ZVdyYXBwZXI6ZnVuY3Rpb24odCl7aWYodC5wYXJlbnQoKS5pcyhcIi51aS1lZmZlY3RzLXdyYXBwZXJcIikpcmV0dXJuIHQucGFyZW50KCk7dmFyIGk9e3dpZHRoOnQub3V0ZXJXaWR0aCghMCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoITApLFwiZmxvYXRcIjp0LmNzcyhcImZsb2F0XCIpfSxhPWUoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhcInVpLWVmZmVjdHMtd3JhcHBlclwiKS5jc3Moe2ZvbnRTaXplOlwiMTAwJVwiLGJhY2tncm91bmQ6XCJ0cmFuc3BhcmVudFwiLGJvcmRlcjpcIm5vbmVcIixtYXJnaW46MCxwYWRkaW5nOjB9KSxzPXt3aWR0aDp0LndpZHRoKCksaGVpZ2h0OnQuaGVpZ2h0KCl9LG49ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDt0cnl7bi5pZH1jYXRjaChyKXtuPWRvY3VtZW50LmJvZHl9cmV0dXJuIHQud3JhcChhKSwodFswXT09PW58fGUuY29udGFpbnModFswXSxuKSkmJmUobikuZm9jdXMoKSxhPXQucGFyZW50KCksXCJzdGF0aWNcIj09PXQuY3NzKFwicG9zaXRpb25cIik/KGEuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSx0LmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwifSkpOihlLmV4dGVuZChpLHtwb3NpdGlvbjp0LmNzcyhcInBvc2l0aW9uXCIpLHpJbmRleDp0LmNzcyhcInotaW5kZXhcIil9KSxlLmVhY2goW1widG9wXCIsXCJsZWZ0XCIsXCJib3R0b21cIixcInJpZ2h0XCJdLGZ1bmN0aW9uKGUsYSl7aVthXT10LmNzcyhhKSxpc05hTihwYXJzZUludChpW2FdLDEwKSkmJihpW2FdPVwiYXV0b1wiKX0pLHQuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsdG9wOjAsbGVmdDowLHJpZ2h0OlwiYXV0b1wiLGJvdHRvbTpcImF1dG9cIn0pKSx0LmNzcyhzKSxhLmNzcyhpKS5zaG93KCl9LHJlbW92ZVdyYXBwZXI6ZnVuY3Rpb24odCl7dmFyIGk9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtyZXR1cm4gdC5wYXJlbnQoKS5pcyhcIi51aS1lZmZlY3RzLXdyYXBwZXJcIikmJih0LnBhcmVudCgpLnJlcGxhY2VXaXRoKHQpLCh0WzBdPT09aXx8ZS5jb250YWlucyh0WzBdLGkpKSYmZShpKS5mb2N1cygpKSx0fSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKHQsaSxhLHMpe3JldHVybiBzPXN8fHt9LGUuZWFjaChpLGZ1bmN0aW9uKGUsaSl7dmFyIG49dC5jc3NVbml0KGkpO25bMF0+MCYmKHNbaV09blswXSphK25bMV0pfSksc319KSxlLmZuLmV4dGVuZCh7ZWZmZWN0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmdW5jdGlvbiBpKCl7ZS5pc0Z1bmN0aW9uKG4pJiZuLmNhbGwoc1swXSksZS5pc0Z1bmN0aW9uKHQpJiZ0KCl9dmFyIHM9ZSh0aGlzKSxuPWEuY29tcGxldGUscj1hLm1vZGU7KHMuaXMoXCI6aGlkZGVuXCIpP1wiaGlkZVwiPT09cjpcInNob3dcIj09PXIpP2koKTpvLmNhbGwoc1swXSxhLGkpfXZhciBhPXMuYXBwbHkodGhpcyxhcmd1bWVudHMpLG49YS5tb2RlLHI9YS5xdWV1ZSxvPWUuZWZmZWN0cy5lZmZlY3RbYS5lZmZlY3RdLGg9IW8mJmkmJmUuZWZmZWN0c1thLmVmZmVjdF07cmV0dXJuIGUuZngub2ZmfHwhbyYmIWg/bj90aGlzW25dKGEuZHVyYXRpb24sYS5jb21wbGV0ZSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7YS5jb21wbGV0ZSYmYS5jb21wbGV0ZS5jYWxsKHRoaXMpfSk6bz9yPT09ITE/dGhpcy5lYWNoKHQpOnRoaXMucXVldWUocnx8XCJmeFwiLHQpOmguY2FsbCh0aGlzLHtvcHRpb25zOmEsZHVyYXRpb246YS5kdXJhdGlvbixjYWxsYmFjazphLmNvbXBsZXRlLG1vZGU6YS5tb2RlfSl9LF9zaG93OmUuZm4uc2hvdyxzaG93OmZ1bmN0aW9uKGUpe2lmKG4oZSkpcmV0dXJuIHRoaXMuX3Nob3cuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0Lm1vZGU9XCJzaG93XCIsdGhpcy5lZmZlY3QuY2FsbCh0aGlzLHQpfSxfaGlkZTplLmZuLmhpZGUsaGlkZTpmdW5jdGlvbihlKXtpZihuKGUpKXJldHVybiB0aGlzLl9oaWRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdC5tb2RlPVwiaGlkZVwiLHRoaXMuZWZmZWN0LmNhbGwodGhpcyx0KX0sX190b2dnbGU6ZS5mbi50b2dnbGUsdG9nZ2xlOmZ1bmN0aW9uKHQpe2lmKG4odCl8fFwiYm9vbGVhblwiPT10eXBlb2YgdHx8ZS5pc0Z1bmN0aW9uKHQpKXJldHVybiB0aGlzLl9fdG9nZ2xlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaT1zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gaS5tb2RlPVwidG9nZ2xlXCIsdGhpcy5lZmZlY3QuY2FsbCh0aGlzLGkpfSxjc3NVbml0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuY3NzKHQpLGE9W107cmV0dXJuIGUuZWFjaChbXCJlbVwiLFwicHhcIixcIiVcIixcInB0XCJdLGZ1bmN0aW9uKGUsdCl7aS5pbmRleE9mKHQpPjAmJihhPVtwYXJzZUZsb2F0KGkpLHRdKX0pLGF9fSl9KCksZnVuY3Rpb24oKXt2YXIgdD17fTtlLmVhY2goW1wiUXVhZFwiLFwiQ3ViaWNcIixcIlF1YXJ0XCIsXCJRdWludFwiLFwiRXhwb1wiXSxmdW5jdGlvbihlLGkpe3RbaV09ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsZSsyKX19KSxlLmV4dGVuZCh0LHtTaW5lOmZ1bmN0aW9uKGUpe3JldHVybiAxLU1hdGguY29zKGUqTWF0aC5QSS8yKX0sQ2lyYzpmdW5jdGlvbihlKXtyZXR1cm4gMS1NYXRoLnNxcnQoMS1lKmUpfSxFbGFzdGljOmZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZXx8MT09PWU/ZTotTWF0aC5wb3coMiw4KihlLTEpKSpNYXRoLnNpbigoODAqKGUtMSktNy41KSpNYXRoLlBJLzE1KX0sQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gZSplKigzKmUtMil9LEJvdW5jZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsaT00OygodD1NYXRoLnBvdygyLC0taSkpLTEpLzExPmU7KTtyZXR1cm4gMS9NYXRoLnBvdyg0LDMtaSktNy41NjI1Kk1hdGgucG93KCgzKnQtMikvMjItZSwyKX19KSxlLmVhY2godCxmdW5jdGlvbih0LGkpe2UuZWFzaW5nW1wiZWFzZUluXCIrdF09aSxlLmVhc2luZ1tcImVhc2VPdXRcIit0XT1mdW5jdGlvbihlKXtyZXR1cm4gMS1pKDEtZSl9LGUuZWFzaW5nW1wiZWFzZUluT3V0XCIrdF09ZnVuY3Rpb24oZSl7cmV0dXJuLjU+ZT9pKDIqZSkvMjoxLWkoLTIqZSsyKS8yfX0pfSgpfShqUXVlcnkpO1xyXG4iLCJcclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuQ2xhc3M6IGZyZWV6ZUhlYWRlclxyXG5Vc2U6ZnJlZXplIGhlYWRlciByb3cgaW4gaHRtbCB0YWJsZVxyXG5FeGFtcGxlIDE6ICAkKCcjdGFibGVpZCcpLmZyZWV6ZUhlYWRlcigpO1xyXG5FeGFtcGxlIDI6ICAkKFwiI3RhYmxlaWRcIikuZnJlZXplSGVhZGVyKHsgJ2hlaWdodCc6ICczMDBweCcgfSk7XHJcbkV4YW1wbGUgMzogICQoXCJ0YWJsZVwiKS5mcmVlemVIZWFkZXIoKTtcclxuRXhhbXBsZSA0OiAgJChcIi50YWJsZTJcIikuZnJlZXplSGVhZGVyKCk7XHJcbkV4YW1wbGUgNTogICQoXCIjdGFibGVpZFwiKS5mcmVlemVIZWFkZXIoeyAnb2Zmc2V0JzogJzUwcHgnIH0pO1xyXG5BdXRob3Iocyk6IExhZXJ0ZSBNZXJjaWVyIEp1bmlvciwgTGFycnkgQS4gSGVuZHJpeFxyXG5WZXJzaW9uOiAxLjAuOFxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuKGZ1bmN0aW9uICgkKSB7XHJcbiAgICB2YXIgVEFCTEVfSUQgPSAwO1xyXG4gICAgJC5mbi5mcmVlemVIZWFkZXIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XHJcblxyXG4gICAgICAgIHZhciBjb3BpZWRIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZnJlZXplSGVhZGVyKGVsZW0pIHtcclxuICAgICAgICAgICAgdmFyIGlkT2JqID0gZWxlbS5hdHRyKCdpZCcpIHx8ICgndGJsLScgKyAoKytUQUJMRV9JRCkpO1xyXG4gICAgICAgICAgICBpZiAoZWxlbS5sZW5ndGggPiAwICYmIGVsZW1bMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwidGFibGVcIikge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyaWQ6IGVsZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBkaXZTY3JvbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3BlbkRpdlNjcm9sbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZURpdlNjcm9sbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxlcjogbnVsbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5kaXZTY3JvbGwgPSAnPGRpdiBpZD1cImhkU2Nyb2xsJyArIG9iai5pZCArICdcIiBzdHlsZT1cImhlaWdodDogJyArIHBhcmFtcy5oZWlnaHQgKyAnOyBvdmVyZmxvdy15OiBzY3JvbGxcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jbG9zZURpdlNjcm9sbCA9ICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9iai5oZWFkZXIgPSBvYmouZ3JpZC5maW5kKCd0aGVhZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNoZFNjcm9sbCcgKyBvYmouaWQpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5ncmlkLndyYXBBbGwob2JqLmRpdlNjcm9sbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9iai5zY3JvbGxlciA9IHBhcmFtcyAmJiBwYXJhbXMuaGVpZ2h0ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgID8gJCgnI2hkU2Nyb2xsJyArIG9iai5pZClcclxuICAgICAgICAgICAgICAgICAgIDogJCh3aW5kb3cpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLnNjcm9sbExpc3RlbmVyRWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5zY3JvbGxlciA9IHBhcmFtcy5zY3JvbGxMaXN0ZW5lckVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JqLnNjcm9sbGVyLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNoZCcgKyBvYmouaWQpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5ncmlkLmJlZm9yZSgnPGRpdiBjbGFzcz1cImZyZWVlelwiIGlkPVwiaGQnICsgb2JqLmlkICsgJ1wiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lciA9ICQoJyNoZCcgKyBvYmouaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhlYWRlci5vZmZzZXQoKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW1pdGVBbGNhbmNhZG8ob2JqLCBwYXJhbXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnRyaWdnZXIoXCJmcmVlemU6b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvcGllZEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lSGVhZGVyUm93KG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gb2JqLmhlYWRlci5vZmZzZXQoKS50b3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250YWluZXIuY3NzKFwidG9wXCIsIChvYmouZ3JpZC5maW5kKFwidHI6bGFzdFwiKS5vZmZzZXQoKS50b3AgLSBvYmouaGVhZGVyLmhlaWdodCgpKSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnRyaWdnZXIoXCJmcmVlemU6b2ZmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5jb250YWluZXIuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY29udGFpbmVyLmNzcyhcInRvcFwiLCBcIjBweFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouY29udGFpbmVyLndpZHRoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkSGVhZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxpbWl0ZUFsY2FuY2FkbyhvYmosIHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zICYmIChwYXJhbXMuaGVpZ2h0ICE9PSB1bmRlZmluZWQgfHwgcGFyYW1zLnNjcm9sbExpc3RlbmVyRWwgIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmhlYWRlci5vZmZzZXQoKS50b3AgPD0gb2JqLnNjcm9sbGVyLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gb2JqLmhlYWRlci5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5vZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvcCAtPSBwYXJzZUludChwYXJhbXMub2Zmc2V0LnJlcGxhY2UoJ3B4JywnJyksMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZEhlaWdodCA9IChvYmouZ3JpZC5oZWlnaHQoKSAtIG9iai5oZWFkZXIuaGVpZ2h0KCkgLSBvYmouZ3JpZC5maW5kKFwidHI6bGFzdFwiKS5oZWlnaHQoKSkgKyBvYmouaGVhZGVyLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPiB0b3AgJiYgJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPCBncmlkSGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvbmVIZWFkZXJSb3cob2JqKSB7XHJcbiAgICAgICAgICAgIG9iai5jb250YWluZXIuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIG9iai5jb250YWluZXIudmFsKCcnKTtcclxuICAgICAgICAgICAgdmFyIHRhYmVsYSA9ICQoJzx0YWJsZSBzdHlsZT1cIm1hcmdpbjogMCAwO1wiPjwvdGFibGU+Jyk7XHJcbiAgICAgICAgICAgIHZhciBhdHJpYnV0b3MgPSBvYmouZ3JpZC5wcm9wKFwiYXR0cmlidXRlc1wiKTtcclxuXHJcbiAgICAgICAgICAgICQuZWFjaChhdHJpYnV0b3MsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgIT0gXCJpZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiZWxhLmF0dHIodGhpcy5uYW1lLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBvYmouaGVhZGVyLmNsb25lKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2xvbmUuYXBwZW5kVG8odGFiZWxhKTtcclxuXHJcbiAgICAgICAgICAgIG9iai5jb250YWluZXIuYXBwZW5kKHRhYmVsYSk7XHJcbiAgICAgICAgICAgIG9iai5jb250YWluZXIud2lkdGgob2JqLmhlYWRlci53aWR0aCgpKTtcclxuICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5oZWlnaHQob2JqLmhlYWRlci5oZWlnaHQpO1xyXG4gICAgICAgICAgICBvYmouY29udGFpbmVyLmZpbmQoJ3RoJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjZWxsV2lkdGggPSBvYmouZ3JpZC5maW5kKCd0aCcpLmVxKGluZGV4KS5vdXRlcldpZHRoKCk7XHJcblx0XHRcdFx0Ly9hbGVydChjZWxsV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ3dpZHRoJywgY2VsbFdpZHRoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBvYmouY29udGFpbmVyLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihwYXJhbXMub2Zmc2V0ICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jb250YWluZXIuY3NzKFwidG9wXCIsIG9iai5zY3JvbGxlci5vZmZzZXQoKS50b3AgKyAocGFyYW1zLm9mZnNldC5yZXBsYWNlKFwicHhcIixcIlwiKSAqIDEpICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouY29udGFpbmVyLmNzcyhcInRvcFwiLCBvYmouc2Nyb2xsZXIub2Zmc2V0KCkudG9wICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmouY29udGFpbmVyLmNzcyhcInBvc2l0aW9uXCIsIFwiYWJzb2x1dGVcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMgJiYgcGFyYW1zLnNjcm9sbExpc3RlbmVyRWwhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5jc3MoXCJ0b3BcIiwgb2JqLnNjcm9sbGVyLmZpbmQoXCJ0aGVhZCA+IHRyXCIpLmlubmVySGVpZ2h0KCkgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5jc3MoXCJ6LWluZGV4XCIsIFwiMlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMgJiYgcGFyYW1zLm9mZnNldCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY29udGFpbmVyLmNzcyhcInRvcFwiLCBwYXJhbXMub2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIG9iai5jb250YWluZXIuY3NzKFwicG9zaXRpb25cIiwgXCJmaXhlZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iai5jb250YWluZXIuY3NzKFwidG9wXCIsIFwiMHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgb2JqLmNvbnRhaW5lci5jc3MoXCJwb3NpdGlvblwiLCBcImZpeGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7XHJcbiAgICAgICAgICAgIGZyZWV6ZUhlYWRlcigkKGUpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG59KShPTEQpOyIsIi8qKlxyXG4gKiBmdWxsUGFnZSAyLjUuNlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYWx2YXJvdHJpZ28vZnVsbFBhZ2UuanNcclxuICogTUlUIGxpY2Vuc2VkXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoQykgMjAxMyBhbHZhcm90cmlnby5jb20gLSBBIHByb2plY3QgYnkgQWx2YXJvIFRyaWdvXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuXHQkLmZuLmZ1bGxwYWdlID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cdFx0Ly8gQ3JlYXRlIHNvbWUgZGVmYXVsdHMsIGV4dGVuZGluZyB0aGVtIHdpdGggYW55IG9wdGlvbnMgdGhhdCB3ZXJlIHByb3ZpZGVkXHJcblx0XHRvcHRpb25zID0gJC5leHRlbmQoe1xyXG5cdFx0XHQvL25hdmlnYXRpb25cclxuXHRcdFx0J21lbnUnOiBmYWxzZSxcclxuXHRcdFx0J2FuY2hvcnMnOltdLFxyXG5cdFx0XHQnbmF2aWdhdGlvbic6IGZhbHNlLFxyXG5cdFx0XHQnbmF2aWdhdGlvblBvc2l0aW9uJzogJ3JpZ2h0JyxcclxuXHRcdFx0J25hdmlnYXRpb25Db2xvcic6ICcjMDAwJyxcclxuXHRcdFx0J25hdmlnYXRpb25Ub29sdGlwcyc6IFtdLFxyXG5cdFx0XHQnc2xpZGVzTmF2aWdhdGlvbic6IGZhbHNlLFxyXG5cdFx0XHQnc2xpZGVzTmF2UG9zaXRpb24nOiAnYm90dG9tJyxcclxuXHRcdFx0J3Njcm9sbEJhcic6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly9zY3JvbGxpbmdcclxuXHRcdFx0J2NzczMnOiB0cnVlLFxyXG5cdFx0XHQnc2Nyb2xsaW5nU3BlZWQnOiA3MDAsXHJcblx0XHRcdCdhdXRvU2Nyb2xsaW5nJzogdHJ1ZSxcclxuXHRcdFx0J2Vhc2luZyc6ICdlYXNlSW5RdWFydCcsXHJcblx0XHRcdCdlYXNpbmdjc3MzJzogJ2Vhc2UnLFxyXG5cdFx0XHQnbG9vcEJvdHRvbSc6IGZhbHNlLFxyXG5cdFx0XHQnbG9vcFRvcCc6IGZhbHNlLFxyXG5cdFx0XHQnbG9vcEhvcml6b250YWwnOiB0cnVlLFxyXG5cdFx0XHQnY29udGludW91c1ZlcnRpY2FsJzogZmFsc2UsXHJcblx0XHRcdCdub3JtYWxTY3JvbGxFbGVtZW50cyc6IG51bGwsXHJcblx0XHRcdCdzY3JvbGxPdmVyZmxvdyc6IGZhbHNlLFxyXG5cdFx0XHQndG91Y2hTZW5zaXRpdml0eSc6IDUsXHJcblx0XHRcdCdub3JtYWxTY3JvbGxFbGVtZW50VG91Y2hUaHJlc2hvbGQnOiA1LFxyXG5cclxuXHRcdFx0Ly9BY2Nlc3NpYmlsaXR5XHJcblx0XHRcdCdrZXlib2FyZFNjcm9sbGluZyc6IHRydWUsXHJcblx0XHRcdCdhbmltYXRlQW5jaG9yJzogdHJ1ZSxcclxuXHRcdFx0J3JlY29yZEhpc3RvcnknOiB0cnVlLFxyXG5cclxuXHRcdFx0Ly9kZXNpZ25cclxuXHRcdFx0J2NvbnRyb2xBcnJvd3MnOiB0cnVlLFxyXG5cdFx0XHQnY29udHJvbEFycm93Q29sb3InOiAnI2ZmZicsXHJcblx0XHRcdFwidmVydGljYWxDZW50ZXJlZFwiOiB0cnVlLFxyXG5cdFx0XHQncmVzaXplJzogdHJ1ZSxcclxuXHRcdFx0J3NlY3Rpb25zQ29sb3InIDogW10sXHJcblx0XHRcdCdwYWRkaW5nVG9wJzogMCxcclxuXHRcdFx0J3BhZGRpbmdCb3R0b20nOiAwLFxyXG5cdFx0XHQnZml4ZWRFbGVtZW50cyc6IG51bGwsXHJcblx0XHRcdCdyZXNwb25zaXZlJzogMCxcclxuXHJcblx0XHRcdC8vQ3VzdG9tIHNlbGVjdG9yc1xyXG5cdFx0XHQnc2VjdGlvblNlbGVjdG9yJzogJy5zZWN0aW9uJyxcclxuXHRcdFx0J3NsaWRlU2VsZWN0b3InOiAnLnNsaWRlJyxcclxuXHJcblxyXG5cdFx0XHQvL2V2ZW50c1xyXG5cdFx0XHQnYWZ0ZXJMb2FkJzogbnVsbCxcclxuXHRcdFx0J29uTGVhdmUnOiBudWxsLFxyXG5cdFx0XHQnYWZ0ZXJSZW5kZXInOiBudWxsLFxyXG5cdFx0XHQnYWZ0ZXJSZXNpemUnOiBudWxsLFxyXG5cdFx0XHQnYWZ0ZXJSZUJ1aWxkJzogbnVsbCxcclxuXHRcdFx0J2FmdGVyU2xpZGVMb2FkJzogbnVsbCxcclxuXHRcdFx0J29uU2xpZGVMZWF2ZSc6IG51bGxcclxuXHRcdH0sIG9wdGlvbnMpO1xyXG5cclxuXHQgICAgZGlzcGxheVdhcm5pbmdzKCk7XHJcblxyXG5cdCAgICAvL2Vhc2VJblF1YXJ0IGFuaW1hdGlvbiBpbmNsdWRlZCBpbiB0aGUgcGx1Z2luXHJcblx0ICAgICQuZXh0ZW5kKCQuZWFzaW5nLHsgZWFzZUluUXVhcnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7IHJldHVybiBjKih0Lz1kKSp0KnQqdCArIGI7IH19KTtcclxuXHJcblx0XHQvL0RlZmluZXMgdGhlIGRlbGF5IHRvIHRha2UgcGxhY2UgYmVmb3JlIGJlaW5nIGFibGUgdG8gc2Nyb2xsIHRvIHRoZSBuZXh0IHNlY3Rpb25cclxuXHRcdC8vQkUgQ0FSRUZVTCEgTm90IHJlY29tbWVuZWQgdG8gY2hhbmdlIGl0IHVuZGVyIDQwMCBmb3IgYSBnb29kIGJlaGF2aW9yIGluIGxhcHRvcHMgYW5kXHJcblx0XHQvL0FwcGxlIGRldmljZXMgKGxhcHRvcHMsIG1vdXNlcy4uLilcclxuXHRcdHZhciBzY3JvbGxEZWxheSA9IDYwMDtcclxuXHJcblx0XHQkLmZuLmZ1bGxwYWdlLnNldEF1dG9TY3JvbGxpbmcgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSl7XHJcblx0XHRcdHNldFZhcmlhYmxlU3RhdGUoJ2F1dG9TY3JvbGxpbmcnLCB2YWx1ZSwgdHlwZSk7XHJcblxyXG5cdFx0XHR2YXIgZWxlbWVudCA9ICQoJy5mcC1zZWN0aW9uLmFjdGl2ZScpO1xyXG5cclxuXHRcdFx0aWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcil7XHJcblx0XHRcdFx0JCgnaHRtbCwgYm9keScpLmNzcyh7XHJcblx0XHRcdFx0XHQnb3ZlcmZsb3cnIDogJ2hpZGRlbicsXHJcblx0XHRcdFx0XHQnaGVpZ2h0JyA6ICcxMDAlJ1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQkLmZuLmZ1bGxwYWdlLnNldFJlY29yZEhpc3Rvcnkob3B0aW9ucy5yZWNvcmRIaXN0b3J5LCAnaW50ZXJuYWwnKTtcclxuXHJcblx0XHRcdFx0Ly9mb3IgSUUgdG91Y2ggZGV2aWNlc1xyXG5cdFx0XHRcdGNvbnRhaW5lci5jc3Moe1xyXG5cdFx0XHRcdFx0Jy1tcy10b3VjaC1hY3Rpb24nOiAnbm9uZScsXHJcblx0XHRcdFx0XHQndG91Y2gtYWN0aW9uJzogJ25vbmUnXHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdGlmKGVsZW1lbnQubGVuZ3RoKXtcclxuXHRcdFx0XHRcdC8vbW92aW5nIHRoZSBjb250YWluZXIgdXBcclxuXHRcdFx0XHRcdHNpbGVudFNjcm9sbChlbGVtZW50LnBvc2l0aW9uKCkudG9wKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkKCdodG1sLCBib2R5JykuY3NzKHtcclxuXHRcdFx0XHRcdCdvdmVyZmxvdycgOiAndmlzaWJsZScsXHJcblx0XHRcdFx0XHQnaGVpZ2h0JyA6ICdpbml0aWFsJ1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQkLmZuLmZ1bGxwYWdlLnNldFJlY29yZEhpc3RvcnkoZmFsc2UsICdpbnRlcm5hbCcpO1xyXG5cclxuXHRcdFx0XHQvL2ZvciBJRSB0b3VjaCBkZXZpY2VzXHJcblx0XHRcdFx0Y29udGFpbmVyLmNzcyh7XHJcblx0XHRcdFx0XHQnLW1zLXRvdWNoLWFjdGlvbic6ICcnLFxyXG5cdFx0XHRcdFx0J3RvdWNoLWFjdGlvbic6ICcnXHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHNpbGVudFNjcm9sbCgwKTtcclxuXHJcblx0XHRcdFx0Ly9zY3JvbGxpbmcgdGhlIHBhZ2UgdG8gdGhlIHNlY3Rpb24gd2l0aCBubyBhbmltYXRpb25cclxuXHRcdFx0XHQkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKGVsZW1lbnQucG9zaXRpb24oKS50b3ApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCogRGVmaW5lcyB3aGV0ZXIgdG8gcmVjb3JkIHRoZSBoaXN0b3J5IGZvciBlYWNoIGhhc2ggY2hhbmdlIGluIHRoZSBVUkwuXHJcblx0XHQqL1xyXG5cdFx0JC5mbi5mdWxscGFnZS5zZXRSZWNvcmRIaXN0b3J5ID0gZnVuY3Rpb24odmFsdWUsIHR5cGUpe1xyXG5cdFx0XHRzZXRWYXJpYWJsZVN0YXRlKCdyZWNvcmRIaXN0b3J5JywgdmFsdWUsIHR5cGUpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCogRGVmaW5lcyB0aGUgc2Nyb2xsaW5nIHNwZWVkXHJcblx0XHQqL1xyXG5cdFx0JC5mbi5mdWxscGFnZS5zZXRTY3JvbGxpbmdTcGVlZCA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlKXtcclxuXHRcdFx0c2V0VmFyaWFibGVTdGF0ZSgnc2Nyb2xsaW5nU3BlZWQnLCB2YWx1ZSwgdHlwZSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBBZGRzIG9yIHJlbW92ZSB0aGUgcG9zc2libGl0eSBvZiBzY3JvbGxpbmcgdGhyb3VnaCBzZWN0aW9ucyBieSB1c2luZyB0aGUgbW91c2Ugd2hlZWwgb3IgdGhlIHRyYWNrcGFkLlxyXG5cdFx0Ki9cclxuXHRcdCQuZm4uZnVsbHBhZ2Uuc2V0TW91c2VXaGVlbFNjcm9sbGluZyA9IGZ1bmN0aW9uICh2YWx1ZSl7XHJcblx0XHRcdGlmKHZhbHVlKXtcclxuXHRcdFx0XHRhZGRNb3VzZVdoZWVsSGFuZGxlcigpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZW1vdmVNb3VzZVdoZWVsSGFuZGxlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBBZGRzIG9yIHJlbW92ZSB0aGUgcG9zc2libGl0eSBvZiBzY3JvbGxpbmcgdGhyb3VnaCBzZWN0aW9ucyBieSB1c2luZyB0aGUgbW91c2Ugd2hlZWwvdHJhY2twYWQgb3IgdG91Y2ggZ2VzdHVyZXMuXHJcblx0XHQqIE9wdGlvbmFsbHkgYSBzZWNvbmQgcGFyYW1ldGVyIGNhbiBiZSB1c2VkIHRvIHNwZWNpZnkgdGhlIGRpcmVjdGlvbiBmb3Igd2hpY2ggdGhlIGFjdGlvbiB3aWxsIGJlIGFwcGxpZWQuXHJcblx0XHQqXHJcblx0XHQqIEBwYXJhbSBkaXJlY3Rpb25zIHN0cmluZyBjb250YWluaW5nIHRoZSBkaXJlY3Rpb24gb3IgZGlyZWN0aW9ucyBzZXBhcmF0ZWQgYnkgY29tbWEuXHJcblx0XHQqL1xyXG5cdFx0JC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgZGlyZWN0aW9ucyl7XHJcblx0XHRcdGlmKHR5cGVvZiBkaXJlY3Rpb25zICE9ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRkaXJlY3Rpb25zID0gZGlyZWN0aW9ucy5yZXBsYWNlKCcgJywgJycpLnNwbGl0KCcsJyk7XHJcblx0XHRcdFx0JC5lYWNoKGRpcmVjdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgZGlyZWN0aW9uKXtcclxuXHRcdFx0XHRcdHNldElzU2Nyb2xsYWJsZSh2YWx1ZSwgZGlyZWN0aW9uKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKHZhbHVlKXtcclxuXHRcdFx0XHQkLmZuLmZ1bGxwYWdlLnNldE1vdXNlV2hlZWxTY3JvbGxpbmcodHJ1ZSk7XHJcblx0XHRcdFx0YWRkVG91Y2hIYW5kbGVyKCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCQuZm4uZnVsbHBhZ2Uuc2V0TW91c2VXaGVlbFNjcm9sbGluZyhmYWxzZSk7XHJcblx0XHRcdFx0cmVtb3ZlVG91Y2hIYW5kbGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEFkZHMgb3IgcmVtb3ZlIHRoZSBwb3NzaWJsaXR5IG9mIHNjcm9sbGluZyB0aHJvdWdoIHNlY3Rpb25zIGJ5IHVzaW5nIHRoZSBrZXlib2FyZCBhcnJvdyBrZXlzXHJcblx0XHQqL1xyXG5cdFx0JC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyA9IGZ1bmN0aW9uICh2YWx1ZSl7XHJcblx0XHRcdG9wdGlvbnMua2V5Ym9hcmRTY3JvbGxpbmcgPSB2YWx1ZTtcclxuXHRcdH07XHJcblxyXG5cdFx0JC5mbi5mdWxscGFnZS5tb3ZlU2VjdGlvblVwID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIHByZXYgPSAkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5wcmV2KCcuZnAtc2VjdGlvbicpO1xyXG5cclxuXHRcdFx0Ly9sb29waW5nIHRvIHRoZSBib3R0b20gaWYgdGhlcmUncyBubyBtb3JlIHNlY3Rpb25zIGFib3ZlXHJcblx0XHRcdGlmICghcHJldi5sZW5ndGggJiYgKG9wdGlvbnMubG9vcFRvcCB8fCBvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCkpIHtcclxuXHRcdFx0XHRwcmV2ID0gJCgnLmZwLXNlY3Rpb24nKS5sYXN0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChwcmV2Lmxlbmd0aCkge1xyXG5cdFx0XHRcdHNjcm9sbFBhZ2UocHJldiwgbnVsbCwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JC5mbi5mdWxscGFnZS5tb3ZlU2VjdGlvbkRvd24gPSBmdW5jdGlvbiAoKXtcclxuXHRcdFx0dmFyIG5leHQgPSAkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5uZXh0KCcuZnAtc2VjdGlvbicpO1xyXG5cclxuXHRcdFx0Ly9sb29waW5nIHRvIHRoZSB0b3AgaWYgdGhlcmUncyBubyBtb3JlIHNlY3Rpb25zIGJlbG93XHJcblx0XHRcdGlmKCFuZXh0Lmxlbmd0aCAmJlxyXG5cdFx0XHRcdChvcHRpb25zLmxvb3BCb3R0b20gfHwgb3B0aW9ucy5jb250aW51b3VzVmVydGljYWwpKXtcclxuXHRcdFx0XHRuZXh0ID0gJCgnLmZwLXNlY3Rpb24nKS5maXJzdCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihuZXh0Lmxlbmd0aCl7XHJcblx0XHRcdFx0c2Nyb2xsUGFnZShuZXh0LCBudWxsLCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JC5mbi5mdWxscGFnZS5tb3ZlVG8gPSBmdW5jdGlvbiAoc2VjdGlvbiwgc2xpZGUpe1xyXG5cdFx0XHR2YXIgZGVzdGlueSA9ICcnO1xyXG5cclxuXHRcdFx0aWYoaXNOYU4oc2VjdGlvbikpe1xyXG5cdFx0XHRcdGRlc3RpbnkgPSAkKCdbZGF0YS1hbmNob3I9XCInK3NlY3Rpb24rJ1wiXScpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRkZXN0aW55ID0gJCgnLmZwLXNlY3Rpb24nKS5lcSggKHNlY3Rpb24gLTEpICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0eXBlb2Ygc2xpZGUgIT09ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRzY3JvbGxQYWdlQW5kU2xpZGUoc2VjdGlvbiwgc2xpZGUpO1xyXG5cdFx0XHR9ZWxzZSBpZihkZXN0aW55Lmxlbmd0aCA+IDApe1xyXG5cdFx0XHRcdHNjcm9sbFBhZ2UoZGVzdGlueSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JC5mbi5mdWxscGFnZS5tb3ZlU2xpZGVSaWdodCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdG1vdmVTbGlkZSgnbmV4dCcpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmZuLmZ1bGxwYWdlLm1vdmVTbGlkZUxlZnQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRtb3ZlU2xpZGUoJ3ByZXYnKTtcclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBXaGVuIHJlc2l6aW5nIGlzIGZpbmlzaGVkLCB3ZSBhZGp1c3QgdGhlIHNsaWRlcyBzaXplcyBhbmQgcG9zaXRpb25zXHJcblx0XHQgKi9cclxuXHRcdCQuZm4uZnVsbHBhZ2UucmVCdWlsZCA9IGZ1bmN0aW9uKHJlc2l6aW5nKXtcclxuXHRcdFx0aXNSZXNpemluZyA9IHRydWU7XHJcblxyXG5cdFx0XHR2YXIgd2luZG93c1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcblx0XHRcdHdpbmRvd3NIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7ICAvL3VwZGF0aW5nIGdsb2JhbCB2YXJcclxuXHJcblx0XHRcdC8vdGV4dCBhbmQgaW1hZ2VzIHJlc2l6aW5nXHJcblx0XHRcdGlmIChvcHRpb25zLnJlc2l6ZSkge1xyXG5cdFx0XHRcdHJlc2l6ZU1lKHdpbmRvd3NIZWlnaHQsIHdpbmRvd3NXaWR0aCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCQoJy5mcC1zZWN0aW9uJykuZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHZhciBzbGlkZXNXcmFwID0gJCh0aGlzKS5maW5kKCcuZnAtc2xpZGVzJyk7XHJcblx0XHRcdFx0dmFyIHNsaWRlcyA9ICQodGhpcykuZmluZCgnLmZwLXNsaWRlJyk7XHJcblxyXG5cdFx0XHRcdC8vYWRqdXN0aW5nIHRoZSBoZWlnaHQgb2YgdGhlIHRhYmxlLWNlbGwgZm9yIElFIGFuZCBGaXJlZm94XHJcblx0XHRcdFx0aWYob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKXtcclxuXHRcdFx0XHRcdCQodGhpcykuZmluZCgnLmZwLXRhYmxlQ2VsbCcpLmNzcygnaGVpZ2h0JywgZ2V0VGFibGVIZWlnaHQoJCh0aGlzKSkgKyAncHgnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCQodGhpcykuY3NzKCdoZWlnaHQnLCB3aW5kb3dzSGVpZ2h0ICsgJ3B4Jyk7XHJcblxyXG5cdFx0XHRcdC8vcmVzaXppbmcgdGhlIHNjcm9sbGluZyBkaXZzXHJcblx0XHRcdFx0aWYob3B0aW9ucy5zY3JvbGxPdmVyZmxvdyl7XHJcblx0XHRcdFx0XHRpZihzbGlkZXMubGVuZ3RoKXtcclxuXHRcdFx0XHRcdFx0c2xpZGVzLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0XHRjcmVhdGVTbGltU2Nyb2xsaW5nKCQodGhpcykpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRjcmVhdGVTbGltU2Nyb2xsaW5nKCQodGhpcykpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly9hZGp1c3RpbmcgdGhlIHBvc2l0aW9uIGZvIHRoZSBGVUxMIFdJRFRIIHNsaWRlcy4uLlxyXG5cdFx0XHRcdGlmIChzbGlkZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRsYW5kc2NhcGVTY3JvbGwoc2xpZGVzV3JhcCwgc2xpZGVzV3JhcC5maW5kKCcuZnAtc2xpZGUuYWN0aXZlJykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR2YXIgYWN0aXZlU2VjdGlvbiA9ICQoJy5mcC1zZWN0aW9uLmFjdGl2ZScpO1xyXG5cclxuXHRcdFx0Ly9pc24ndCBpdCB0aGUgZmlyc3Qgc2VjdGlvbj9cclxuXHRcdFx0aWYoYWN0aXZlU2VjdGlvbi5pbmRleCgnLmZwLXNlY3Rpb24nKSl7XHJcblx0XHRcdFx0Ly9hZGp1c3RpbmcgdGhlIHBvc2l0aW9uIGZvciB0aGUgY3VycmVudCBzZWN0aW9uXHJcblx0XHRcdFx0c2Nyb2xsUGFnZShhY3RpdmVTZWN0aW9uKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXNSZXNpemluZyA9IGZhbHNlO1xyXG5cdFx0XHQkLmlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJSZXNpemUgKSAmJiByZXNpemluZyAmJiBvcHRpb25zLmFmdGVyUmVzaXplLmNhbGwoY29udGFpbmVyKTtcclxuXHRcdFx0JC5pc0Z1bmN0aW9uKCBvcHRpb25zLmFmdGVyUmVCdWlsZCApICYmICFyZXNpemluZyAmJiBvcHRpb25zLmFmdGVyUmVCdWlsZC5jYWxsKGNvbnRhaW5lcik7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vZmxhZyB0byBhdm9pZCB2ZXJ5IGZhc3Qgc2xpZGluZyBmb3IgbGFuZHNjYXBlIHNsaWRlcnNcclxuXHRcdHZhciBzbGlkZU1vdmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdHZhciBpc1RvdWNoRGV2aWNlID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKGlQaG9uZXxpUG9kfGlQYWR8QW5kcm9pZHxCbGFja0JlcnJ5fEJCMTB8V2luZG93cyBQaG9uZXxUaXplbnxCYWRhKS8pO1xyXG5cdFx0dmFyIGlzVG91Y2ggPSAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMCkgfHwgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cykpO1xyXG5cdFx0dmFyIGNvbnRhaW5lciA9ICQodGhpcyk7XHJcblx0XHR2YXIgd2luZG93c0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuXHRcdHZhciBpc01vdmluZyA9IGZhbHNlO1xyXG5cdFx0dmFyIGlzUmVzaXppbmcgPSBmYWxzZTtcclxuXHRcdHZhciBsYXN0U2Nyb2xsZWREZXN0aW55O1xyXG5cdFx0dmFyIGxhc3RTY3JvbGxlZFNsaWRlO1xyXG5cdFx0dmFyIG5hdjtcclxuXHRcdHZhciB3cmFwcGVyU2VsZWN0b3IgPSAnZnVsbHBhZ2Utd3JhcHBlcic7XHJcblx0XHR2YXIgaXNTY3JvbGxBbGxvd2VkID0geyAndXAnOnRydWUsICdkb3duJzp0cnVlLCAnbGVmdCc6dHJ1ZSwgJ3JpZ2h0Jzp0cnVlIH07XHJcblx0XHR2YXIgb3JpZ2luYWxzID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpOyAvL2RlZXAgY29weVxyXG5cclxuXHRcdCQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcodHJ1ZSk7XHJcblxyXG5cdFx0Ly9pZiBjc3MzIGlzIG5vdCBzdXBwb3J0ZWQsIGl0IHdpbGwgdXNlIGpRdWVyeSBhbmltYXRpb25zXHJcblx0XHRpZihvcHRpb25zLmNzczMpe1xyXG5cdFx0XHRvcHRpb25zLmNzczMgPSBzdXBwb3J0M2QoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZigkKHRoaXMpLmxlbmd0aCl7XHJcblx0XHRcdGNvbnRhaW5lci5jc3Moe1xyXG5cdFx0XHRcdCdoZWlnaHQnOiAnMTAwJScsXHJcblx0XHRcdFx0J3Bvc2l0aW9uJzogJ3JlbGF0aXZlJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vYWRkaW5nIGEgY2xhc3MgdG8gcmVjb2duaXplIHRoZSBjb250YWluZXIgaW50ZXJuYWxseSBpbiB0aGUgY29kZVxyXG5cdFx0XHRjb250YWluZXIuYWRkQ2xhc3Mod3JhcHBlclNlbGVjdG9yKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL3RyeWluZyB0byB1c2UgZnVsbHBhZ2Ugd2l0aG91dCBhIHNlbGVjdG9yP1xyXG5cdFx0ZWxzZXtcclxuXHRcdFx0c2hvd0Vycm9yKCdlcnJvcicsIFwiRXJyb3IhIEZ1bGxwYWdlLmpzIG5lZWRzIHRvIGJlIGluaXRpYWxpemVkIHdpdGggYSBzZWxlY3Rvci4gRm9yIGV4YW1wbGU6ICQoJyNteUNvbnRhaW5lcicpLmZ1bGxwYWdlKCk7XCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vYWRkaW5nIGludGVybmFsIGNsYXNzIG5hbWVzIHRvIHZvaWQgcHJvYmxlbSB3aXRoIGNvbW1vbiBvbmVzXHJcblx0XHQkKG9wdGlvbnMuc2VjdGlvblNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZnAtc2VjdGlvbicpO1xyXG5cdFx0fSk7XHJcblx0XHQkKG9wdGlvbnMuc2xpZGVTZWxlY3RvcikuZWFjaChmdW5jdGlvbigpe1xyXG4gIFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2ZwLXNsaWRlJyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvL2NyZWF0aW5nIHRoZSBuYXZpZ2F0aW9uIGRvdHNcclxuXHRcdGlmIChvcHRpb25zLm5hdmlnYXRpb24pIHtcclxuXHRcdFx0YWRkVmVydGljYWxOYXZpZ2F0aW9uKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0JCgnLmZwLXNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuXHRcdFx0dmFyIHRoYXQgPSAkKHRoaXMpO1xyXG5cdFx0XHR2YXIgc2xpZGVzID0gJCh0aGlzKS5maW5kKCcuZnAtc2xpZGUnKTtcclxuXHRcdFx0dmFyIG51bVNsaWRlcyA9IHNsaWRlcy5sZW5ndGg7XHJcblxyXG5cdFx0XHQvL2lmIG5vIGFjdGl2ZSBzZWN0aW9uIGlzIGRlZmluZWQsIHRoZSAxc3Qgb25lIHdpbGwgYmUgdGhlIGRlZmF1bHQgb25lXHJcblx0XHRcdGlmKCFpbmRleCAmJiAkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JCh0aGlzKS5jc3MoJ2hlaWdodCcsIHdpbmRvd3NIZWlnaHQgKyAncHgnKTtcclxuXHJcblx0XHRcdGlmKG9wdGlvbnMucGFkZGluZ1RvcCB8fCBvcHRpb25zLnBhZGRpbmdCb3R0b20pe1xyXG5cdFx0XHRcdCQodGhpcykuY3NzKCdwYWRkaW5nJywgb3B0aW9ucy5wYWRkaW5nVG9wICArICcgMCAnICsgb3B0aW9ucy5wYWRkaW5nQm90dG9tICsgJyAwJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zZWN0aW9uc0NvbG9yW2luZGV4XSAhPT0gICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0JCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBvcHRpb25zLnNlY3Rpb25zQ29sb3JbaW5kZXhdKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiBvcHRpb25zLmFuY2hvcnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdCQodGhpcykuYXR0cignZGF0YS1hbmNob3InLCBvcHRpb25zLmFuY2hvcnNbaW5kZXhdKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGhlcmUncyBhbnkgc2xpZGVcclxuXHRcdFx0aWYgKG51bVNsaWRlcyA+IDEpIHtcclxuXHRcdFx0XHR2YXIgc2xpZGVyV2lkdGggPSBudW1TbGlkZXMgKiAxMDA7XHJcblx0XHRcdFx0dmFyIHNsaWRlV2lkdGggPSAxMDAgLyBudW1TbGlkZXM7XHJcblxyXG5cdFx0XHRcdHNsaWRlcy53cmFwQWxsKCc8ZGl2IGNsYXNzPVwiZnAtc2xpZGVzQ29udGFpbmVyXCIgLz4nKTtcclxuXHRcdFx0XHRzbGlkZXMucGFyZW50KCkud3JhcCgnPGRpdiBjbGFzcz1cImZwLXNsaWRlc1wiIC8+Jyk7XHJcblxyXG5cdFx0XHRcdCQodGhpcykuZmluZCgnLmZwLXNsaWRlc0NvbnRhaW5lcicpLmNzcygnd2lkdGgnLCBzbGlkZXJXaWR0aCArICclJyk7XHJcblxyXG5cdFx0XHRcdGlmKG9wdGlvbnMuY29udHJvbEFycm93cyl7XHJcblx0XHRcdFx0XHRjcmVhdGVTbGlkZUFycm93cygkKHRoaXMpKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKG9wdGlvbnMuc2xpZGVzTmF2aWdhdGlvbil7XHJcblx0XHRcdFx0XHRhZGRTbGlkZXNOYXZpZ2F0aW9uKCQodGhpcyksIG51bVNsaWRlcyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzbGlkZXMuZWFjaChmdW5jdGlvbihpbmRleCkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5jc3MoJ3dpZHRoJywgc2xpZGVXaWR0aCArICclJyk7XHJcblxyXG5cdFx0XHRcdFx0aWYob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKXtcclxuXHRcdFx0XHRcdFx0YWRkVGFibGVDbGFzcygkKHRoaXMpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0dmFyIHN0YXJ0aW5nU2xpZGUgPSB0aGF0LmZpbmQoJy5mcC1zbGlkZS5hY3RpdmUnKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGUgc2xpZGUgd29uI3QgYmUgYW4gc3RhcnRpbmcgcG9pbnQsIHRoZSBkZWZhdWx0IHdpbGwgYmUgdGhlIGZpcnN0IG9uZVxyXG5cdFx0XHRcdGlmKCFzdGFydGluZ1NsaWRlLmxlbmd0aCl7XHJcblx0XHRcdFx0XHRzbGlkZXMuZXEoMCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly9pcyB0aGVyZSBhIHN0YXJ0aW5nIHBvaW50IGZvciBhIG5vbi1zdGFydGluZyBzZWN0aW9uP1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRzaWxlbnRMYW5kc2NhcGVTY3JvbGwoc3RhcnRpbmdTbGlkZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0aWYob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKXtcclxuXHRcdFx0XHRcdGFkZFRhYmxlQ2xhc3MoJCh0aGlzKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSkucHJvbWlzZSgpLmRvbmUoZnVuY3Rpb24oKXtcclxuXHRcdFx0JC5mbi5mdWxscGFnZS5zZXRBdXRvU2Nyb2xsaW5nKG9wdGlvbnMuYXV0b1Njcm9sbGluZywgJ2ludGVybmFsJyk7XHJcblxyXG5cdFx0XHQvL3RoZSBzdGFydGluZyBwb2ludCBpcyBhIHNsaWRlP1xyXG5cdFx0XHR2YXIgYWN0aXZlU2xpZGUgPSAkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5maW5kKCcuZnAtc2xpZGUuYWN0aXZlJyk7XHJcblxyXG5cdFx0XHQvL3RoZSBhY3RpdmUgc2VjdGlvbiBpc24ndCB0aGUgZmlyc3Qgb25lPyBJcyBub3QgdGhlIGZpcnN0IHNsaWRlIG9mIHRoZSBmaXJzdCBzZWN0aW9uPyBUaGVuIHdlIGxvYWQgdGhhdCBzZWN0aW9uL3NsaWRlIGJ5IGRlZmF1bHQuXHJcblx0XHRcdGlmKCBhY3RpdmVTbGlkZS5sZW5ndGggJiYgICgkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5pbmRleCgnLmZwLXNlY3Rpb24nKSAhPT0gMCB8fCAoJCgnLmZwLXNlY3Rpb24uYWN0aXZlJykuaW5kZXgoJy5mcC1zZWN0aW9uJykgPT09IDAgJiYgYWN0aXZlU2xpZGUuaW5kZXgoKSAhPT0gMCkpKXtcclxuXHRcdFx0XHRzaWxlbnRMYW5kc2NhcGVTY3JvbGwoYWN0aXZlU2xpZGUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL2ZpeGVkIGVsZW1lbnRzIG5lZWQgdG8gYmUgbW92ZWQgb3V0IG9mIHRoZSBwbHVnaW4gY29udGFpbmVyIGR1ZSB0byBwcm9ibGVtcyB3aXRoIENTUzMuXHJcblx0XHRcdGlmKG9wdGlvbnMuZml4ZWRFbGVtZW50cyAmJiBvcHRpb25zLmNzczMpe1xyXG5cdFx0XHRcdCQob3B0aW9ucy5maXhlZEVsZW1lbnRzKS5hcHBlbmRUbygnYm9keScpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL3ZlcnRpY2FsIGNlbnRlcmVkIG9mIHRoZSBuYXZpZ2F0aW9uICsgZmlyc3QgYnVsbGV0IGFjdGl2ZVxyXG5cdFx0XHRpZihvcHRpb25zLm5hdmlnYXRpb24pe1xyXG5cdFx0XHRcdG5hdi5jc3MoJ21hcmdpbi10b3AnLCAnLScgKyAobmF2LmhlaWdodCgpLzIpICsgJ3B4Jyk7XHJcblx0XHRcdFx0bmF2LmZpbmQoJ2xpJykuZXEoJCgnLmZwLXNlY3Rpb24uYWN0aXZlJykuaW5kZXgoJy5mcC1zZWN0aW9uJykpLmZpbmQoJ2EnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vbW92aW5nIHRoZSBtZW51IG91dHNpZGUgdGhlIG1haW4gY29udGFpbmVyIGlmIGl0IGlzIGluc2lkZSAoYXZvaWQgcHJvYmxlbXMgd2l0aCBmaXhlZCBwb3NpdGlvbnMgd2hlbiB1c2luZyBDU1MzIHRyYW5mb3JtcylcclxuXHRcdFx0aWYob3B0aW9ucy5tZW51ICYmIG9wdGlvbnMuY3NzMyAmJiAkKG9wdGlvbnMubWVudSkuY2xvc2VzdCgnLmZ1bGxwYWdlLXdyYXBwZXInKS5sZW5ndGgpe1xyXG5cdFx0XHRcdCQob3B0aW9ucy5tZW51KS5hcHBlbmRUbygnYm9keScpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihvcHRpb25zLnNjcm9sbE92ZXJmbG93KXtcclxuXHRcdFx0XHRpZihkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpe1xyXG5cdFx0XHRcdFx0Y3JlYXRlU2xpbVNjcm9sbGluZ0hhbmRsZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly9hZnRlciBET00gYW5kIGltYWdlcyBhcmUgbG9hZGVkXHJcblx0XHRcdFx0JCh3aW5kb3cpLm9uKCdsb2FkJywgY3JlYXRlU2xpbVNjcm9sbGluZ0hhbmRsZXIpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHQkLmlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJSZW5kZXIgKSAmJiBvcHRpb25zLmFmdGVyUmVuZGVyLmNhbGwoY29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmVzcG9uc2l2ZSgpO1xyXG5cclxuXHRcdFx0Ly9nZXR0aW5nIHRoZSBhbmNob3IgbGluayBpbiB0aGUgVVJMIGFuZCBkZWxldGluZyB0aGUgYCNgXHJcblx0XHRcdHZhciB2YWx1ZSA9ICB3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKCcjJywgJycpLnNwbGl0KCcvJyk7XHJcblx0XHRcdHZhciBkZXN0aW55ID0gdmFsdWVbMF07XHJcblxyXG5cdFx0XHRpZihkZXN0aW55Lmxlbmd0aCl7XHJcblx0XHRcdFx0dmFyIHNlY3Rpb24gPSAkKCdbZGF0YS1hbmNob3I9XCInK2Rlc3RpbnkrJ1wiXScpO1xyXG5cclxuXHRcdFx0XHRpZighb3B0aW9ucy5hbmltYXRlQW5jaG9yICYmIHNlY3Rpb24ubGVuZ3RoKXtcclxuXHJcblx0XHRcdFx0XHRpZihvcHRpb25zLmF1dG9TY3JvbGxpbmcpe1xyXG5cdFx0XHRcdFx0XHRzaWxlbnRTY3JvbGwoc2VjdGlvbi5wb3NpdGlvbigpLnRvcCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0XHRzaWxlbnRTY3JvbGwoMCk7XHJcblx0XHRcdFx0XHRcdHNldEJvZHlDbGFzcyhkZXN0aW55KTtcclxuXHJcblx0XHRcdFx0XHRcdC8vc2Nyb2xsaW5nIHRoZSBwYWdlIHRvIHRoZSBzZWN0aW9uIHdpdGggbm8gYW5pbWF0aW9uXHJcblx0XHRcdFx0XHRcdCQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3Aoc2VjdGlvbi5wb3NpdGlvbigpLnRvcCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0YWN0aXZhdGVNZW51QW5kTmF2KGRlc3RpbnksIG51bGwpO1xyXG5cclxuXHRcdFx0XHRcdCQuaXNGdW5jdGlvbiggb3B0aW9ucy5hZnRlckxvYWQgKSAmJiBvcHRpb25zLmFmdGVyTG9hZC5jYWxsKCBzZWN0aW9uLCBkZXN0aW55LCAoc2VjdGlvbi5pbmRleCgnLmZwLXNlY3Rpb24nKSArIDEpKTtcclxuXHJcblx0XHRcdFx0XHQvL3VwZGF0aW5nIHRoZSBhY3RpdmUgY2xhc3NcclxuXHRcdFx0XHRcdHNlY3Rpb24uYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdCQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNjcm9sbFRvQW5jaG9yKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCogQ3JlYXRlcyB0aGUgY29udHJvbCBhcnJvd3MgZm9yIHRoZSBnaXZlbiBzZWN0aW9uXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlU2xpZGVBcnJvd3Moc2VjdGlvbil7XHJcblx0XHRcdHNlY3Rpb24uZmluZCgnLmZwLXNsaWRlcycpLmFmdGVyKCc8ZGl2IGNsYXNzPVwiZnAtY29udHJvbEFycm93IGZwLXByZXZcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZnAtY29udHJvbEFycm93IGZwLW5leHRcIj48L2Rpdj4nKTtcclxuXHJcblx0XHRcdGlmKG9wdGlvbnMuY29udHJvbEFycm93Q29sb3IhPScjZmZmJyl7XHJcblx0XHRcdFx0c2VjdGlvbi5maW5kKCcuZnAtY29udHJvbEFycm93LmZwLW5leHQnKS5jc3MoJ2JvcmRlci1jb2xvcicsICd0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCAnK29wdGlvbnMuY29udHJvbEFycm93Q29sb3IpO1xyXG5cdFx0XHRcdHNlY3Rpb24uZmluZCgnLmZwLWNvbnRyb2xBcnJvdy5mcC1wcmV2JykuY3NzKCdib3JkZXItY29sb3InLCAndHJhbnNwYXJlbnQgJysgb3B0aW9ucy5jb250cm9sQXJyb3dDb2xvciArICcgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYoIW9wdGlvbnMubG9vcEhvcml6b250YWwpe1xyXG5cdFx0XHRcdHNlY3Rpb24uZmluZCgnLmZwLWNvbnRyb2xBcnJvdy5mcC1wcmV2JykuaGlkZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIENyZWF0ZXMgYSB2ZXJ0aWNhbCBuYXZpZ2F0aW9uIGJhci5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBhZGRWZXJ0aWNhbE5hdmlnYXRpb24oKXtcclxuXHRcdFx0JCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImZwLW5hdlwiPjx1bD48L3VsPjwvZGl2PicpO1xyXG5cdFx0XHRuYXYgPSAkKCcjZnAtbmF2Jyk7XHJcblxyXG5cdFx0XHRuYXYuY3NzKCdjb2xvcicsIG9wdGlvbnMubmF2aWdhdGlvbkNvbG9yKTtcclxuXHRcdFx0bmF2LmFkZENsYXNzKG9wdGlvbnMubmF2aWdhdGlvblBvc2l0aW9uKTtcclxuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJCgnLmZwLXNlY3Rpb24nKS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBsaW5rID0gJyc7XHJcblx0XHRcdFx0aWYgKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGxpbmsgPSBvcHRpb25zLmFuY2hvcnNbaV07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgbGkgPSAnPGxpPjxhIGhyZWY9XCIjJyArIGxpbmsgKyAnXCI+PHNwYW4+PC9zcGFuPjwvYT4nO1xyXG5cclxuXHRcdFx0XHQvLyBPbmx5IGFkZCB0b29sdGlwIGlmIG5lZWRlZCAoZGVmaW5lZCBieSB1c2VyKVxyXG5cdFx0XHRcdHZhciB0b29sdGlwID0gb3B0aW9ucy5uYXZpZ2F0aW9uVG9vbHRpcHNbaV07XHJcblx0XHRcdFx0aWYgKHRvb2x0aXAgIT09IHVuZGVmaW5lZCAmJiB0b29sdGlwICE9ICcnKSB7XHJcblx0XHRcdFx0XHRsaSArPSAnPGRpdiBjbGFzcz1cImZwLXRvb2x0aXAgJyArIG9wdGlvbnMubmF2aWdhdGlvblBvc2l0aW9uICsgJ1wiPicgKyB0b29sdGlwICsgJzwvZGl2Pic7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRsaSArPSAnPC9saT4nO1xyXG5cclxuXHRcdFx0XHRuYXYuZmluZCgndWwnKS5hcHBlbmQobGkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlU2xpbVNjcm9sbGluZ0hhbmRsZXIoKXtcclxuXHRcdFx0JCgnLmZwLXNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0dmFyIHNsaWRlcyA9ICQodGhpcykuZmluZCgnLmZwLXNsaWRlJyk7XHJcblxyXG5cdFx0XHRcdGlmKHNsaWRlcy5sZW5ndGgpe1xyXG5cdFx0XHRcdFx0c2xpZGVzLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0Y3JlYXRlU2xpbVNjcm9sbGluZygkKHRoaXMpKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0Y3JlYXRlU2xpbVNjcm9sbGluZygkKHRoaXMpKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9KTtcclxuXHRcdFx0JC5pc0Z1bmN0aW9uKCBvcHRpb25zLmFmdGVyUmVuZGVyICkgJiYgb3B0aW9ucy5hZnRlclJlbmRlci5jYWxsKCB0aGlzKTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgc2Nyb2xsSWQ7XHJcblx0XHR2YXIgc2Nyb2xsSWQyO1xyXG5cdFx0dmFyIGlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0Ly93aGVuIHNjcm9sbGluZy4uLlxyXG5cdFx0JCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyKTtcclxuXHJcblx0XHRmdW5jdGlvbiBzY3JvbGxIYW5kbGVyKCl7XHJcblx0XHRcdHZhciBjdXJyZW50U2VjdGlvbjtcclxuXHJcblx0XHRcdGlmKCFvcHRpb25zLmF1dG9TY3JvbGxpbmcgfHwgb3B0aW9ucy5zY3JvbGxCYXIpe1xyXG5cdFx0XHRcdHZhciBjdXJyZW50U2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cdFx0XHRcdHZhciB2aXNpYmxlU2VjdGlvbkluZGV4ID0gMDtcclxuXHRcdFx0XHR2YXIgaW5pdGlhbCA9IE1hdGguYWJzKGN1cnJlbnRTY3JvbGwgLSAkKCcuZnAtc2VjdGlvbicpLmZpcnN0KCkub2Zmc2V0KCkudG9wKTtcclxuXHJcblx0XHRcdFx0Ly90YWtpbmcgdGhlIHNlY3Rpb24gd2hpY2ggaXMgc2hvd2luZyBtb3JlIGNvbnRlbnQgaW4gdGhlIHZpZXdwb3J0XHJcblx0XHRcdFx0JCgnLmZwLXNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuXHRcdFx0XHRcdHZhciBjdXJyZW50ID0gTWF0aC5hYnMoY3VycmVudFNjcm9sbCAtICQodGhpcykub2Zmc2V0KCkudG9wKTtcclxuXHJcblx0XHRcdFx0XHRpZihjdXJyZW50IDwgaW5pdGlhbCl7XHJcblx0XHRcdFx0XHRcdHZpc2libGVTZWN0aW9uSW5kZXggPSBpbmRleDtcclxuXHRcdFx0XHRcdFx0aW5pdGlhbCA9IGN1cnJlbnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vZ2V0aW5nIHRoZSBsYXN0IG9uZSwgdGhlIGN1cnJlbnQgb25lIG9uIHRoZSBzY3JlZW5cclxuXHRcdFx0XHRjdXJyZW50U2VjdGlvbiA9ICQoJy5mcC1zZWN0aW9uJykuZXEodmlzaWJsZVNlY3Rpb25JbmRleCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCFvcHRpb25zLmF1dG9TY3JvbGxpbmcgfHwgb3B0aW9ucy5zY3JvbGxCYXIpe1xyXG5cdFx0XHRcdC8vZXhlY3V0aW5nIG9ubHkgb25jZSB0aGUgZmlyc3QgdGltZSB3ZSByZWFjaCB0aGUgc2VjdGlvblxyXG5cdFx0XHRcdGlmKCFjdXJyZW50U2VjdGlvbi5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG5cdFx0XHRcdFx0aXNTY3JvbGxpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dmFyIGxlYXZpbmdTZWN0aW9uID0gJCgnLmZwLXNlY3Rpb24uYWN0aXZlJyk7XHJcblx0XHRcdFx0XHR2YXIgbGVhdmluZ1NlY3Rpb25JbmRleCA9IGxlYXZpbmdTZWN0aW9uLmluZGV4KCcuZnAtc2VjdGlvbicpICsgMTtcclxuXHRcdFx0XHRcdHZhciB5TW92ZW1lbnQgPSBnZXRZbW92ZW1lbnQoY3VycmVudFNlY3Rpb24pO1xyXG5cdFx0XHRcdFx0dmFyIGFuY2hvckxpbmsgID0gY3VycmVudFNlY3Rpb24uZGF0YSgnYW5jaG9yJyk7XHJcblx0XHRcdFx0XHR2YXIgc2VjdGlvbkluZGV4ID0gY3VycmVudFNlY3Rpb24uaW5kZXgoJy5mcC1zZWN0aW9uJykgKyAxO1xyXG5cdFx0XHRcdFx0dmFyIGFjdGl2ZVNsaWRlID0gY3VycmVudFNlY3Rpb24uZmluZCgnLmZwLXNsaWRlLmFjdGl2ZScpO1xyXG5cclxuXHRcdFx0XHRcdGlmKGFjdGl2ZVNsaWRlLmxlbmd0aCl7XHJcblx0XHRcdFx0XHRcdHZhciBzbGlkZUFuY2hvckxpbmsgPSBhY3RpdmVTbGlkZS5kYXRhKCdhbmNob3InKTtcclxuXHRcdFx0XHRcdFx0dmFyIHNsaWRlSW5kZXggPSBhY3RpdmVTbGlkZS5pbmRleCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGN1cnJlbnRTZWN0aW9uLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcblx0XHRcdFx0XHRpZighaXNNb3Zpbmcpe1xyXG5cdFx0XHRcdFx0XHQkLmlzRnVuY3Rpb24oIG9wdGlvbnMub25MZWF2ZSApICYmIG9wdGlvbnMub25MZWF2ZS5jYWxsKCBsZWF2aW5nU2VjdGlvbiwgbGVhdmluZ1NlY3Rpb25JbmRleCwgc2VjdGlvbkluZGV4LCB5TW92ZW1lbnQpO1xyXG5cclxuXHRcdFx0XHRcdFx0JC5pc0Z1bmN0aW9uKCBvcHRpb25zLmFmdGVyTG9hZCApICYmIG9wdGlvbnMuYWZ0ZXJMb2FkLmNhbGwoIGN1cnJlbnRTZWN0aW9uLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGFjdGl2YXRlTWVudUFuZE5hdihhbmNob3JMaW5rLCAwKTtcclxuXHJcblx0XHRcdFx0XHRpZihvcHRpb25zLmFuY2hvcnMubGVuZ3RoICYmICFpc01vdmluZyl7XHJcblx0XHRcdFx0XHRcdC8vbmVlZGVkIHRvIGVudGVyIGluIGhhc2hDaGFuZ2UgZXZlbnQgd2hlbiB1c2luZyB0aGUgbWVudSB3aXRoIGFuY2hvciBsaW5rc1xyXG5cdFx0XHRcdFx0XHRsYXN0U2Nyb2xsZWREZXN0aW55ID0gYW5jaG9yTGluaztcclxuXHJcblx0XHRcdFx0XHRcdHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yTGluaywgYW5jaG9yTGluaywgc2VjdGlvbkluZGV4KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvL3NtYWxsIHRpbWVvdXQgaW4gb3JkZXIgdG8gYXZvaWQgZW50ZXJpbmcgaW4gaGFzaENoYW5nZSBldmVudCB3aGVuIHNjcm9sbGluZyBpcyBub3QgZmluaXNoZWQgeWV0XHJcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQoc2Nyb2xsSWQpO1xyXG5cdFx0XHRcdFx0c2Nyb2xsSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdGlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYob3B0aW9ucy5zY3JvbGxCYXIpe1xyXG5cdFx0XHRcdC8vZm9yIHRoZSBhdXRvIGFkanVzdCBvZiB0aGUgdmlld3BvcnQgdG8gZml0IGEgd2hvbGUgc2VjdGlvblxyXG5cdFx0XHRcdGNsZWFyVGltZW91dChzY3JvbGxJZDIpO1xyXG5cclxuXHRcdFx0XHRzY3JvbGxJZDIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRpZighaXNNb3Zpbmcpe1xyXG5cdFx0XHRcdFx0XHQvL2FsbG93cyB0byBzY3JvbGwgdG8gYW4gYWN0aXZlIHNlY3Rpb24gYW5kXHJcblx0XHRcdFx0XHRcdC8vaWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIHdlIHByZXZlbnQgZmlyaW5nIGNhbGxiYWNrc1xyXG5cdFx0XHRcdFx0XHRpZigkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5pcyhjdXJyZW50U2VjdGlvbikpe1xyXG5cdFx0XHRcdFx0XHRcdGlzUmVzaXppbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHNjcm9sbFBhZ2UoY3VycmVudFNlY3Rpb24pO1xyXG5cdFx0XHRcdFx0XHRpc1Jlc2l6aW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIERldGVybWluZXMgd2hldGhlciB0aGUgYWN0aXZlIHNlY3Rpb24gb3Igc2xpZGUgaXMgc2Nyb2xsYWJsZSB0aHJvdWdoIGFuZCBzY3JvbGxpbmcgYmFyXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gaXNTY3JvbGxhYmxlKGFjdGl2ZVNlY3Rpb24pe1xyXG5cdFx0XHQvL2lmIHRoZXJlIGFyZSBsYW5kc2NhcGUgc2xpZGVzLCB3ZSBjaGVjayBpZiB0aGUgc2Nyb2xsaW5nIGJhciBpcyBpbiB0aGUgY3VycmVudCBvbmUgb3Igbm90XHJcblx0XHRcdGlmKGFjdGl2ZVNlY3Rpb24uZmluZCgnLmZwLXNsaWRlcycpLmxlbmd0aCl7XHJcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZVNlY3Rpb24uZmluZCgnLmZwLXNsaWRlLmFjdGl2ZScpLmZpbmQoJy5mcC1zY3JvbGxhYmxlJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBhY3RpdmVTZWN0aW9uLmZpbmQoJy5mcC1zY3JvbGxhYmxlJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIERldGVybWluZXMgdGhlIHdheSBvZiBzY3JvbGxpbmcgdXAgb3IgZG93bjpcclxuXHRcdCogYnkgJ2F1dG9tYXRpY2FsbHknIHNjcm9sbGluZyBhIHNlY3Rpb24gb3IgYnkgdXNpbmcgdGhlIGRlZmF1bHQgYW5kIG5vcm1hbCBzY3JvbGxpbmcuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2Nyb2xsaW5nKHR5cGUsIHNjcm9sbGFibGUpe1xyXG5cdFx0XHRpZiAoIWlzU2Nyb2xsQWxsb3dlZFt0eXBlXSl7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBjaGVjaywgc2Nyb2xsU2VjdGlvbjtcclxuXHJcblx0XHRcdGlmKHR5cGUgPT0gJ2Rvd24nKXtcclxuXHRcdFx0XHRjaGVjayA9ICdib3R0b20nO1xyXG5cdFx0XHRcdHNjcm9sbFNlY3Rpb24gPSAkLmZuLmZ1bGxwYWdlLm1vdmVTZWN0aW9uRG93bjtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0Y2hlY2sgPSAndG9wJztcclxuXHRcdFx0XHRzY3JvbGxTZWN0aW9uID0gJC5mbi5mdWxscGFnZS5tb3ZlU2VjdGlvblVwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihzY3JvbGxhYmxlLmxlbmd0aCA+IDAgKXtcclxuXHRcdFx0XHQvL2lzIHRoZSBzY3JvbGxiYXIgYXQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgc2Nyb2xsP1xyXG5cdFx0XHRcdGlmKGlzU2Nyb2xsZWQoY2hlY2ssIHNjcm9sbGFibGUpKXtcclxuXHRcdFx0XHRcdHNjcm9sbFNlY3Rpb24oKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0Ly8gbW92ZWQgdXAvZG93blxyXG5cdFx0XHRcdHNjcm9sbFNlY3Rpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHR2YXIgdG91Y2hTdGFydFkgPSAwO1xyXG5cdFx0dmFyIHRvdWNoU3RhcnRYID0gMDtcclxuXHRcdHZhciB0b3VjaEVuZFkgPSAwO1xyXG5cdFx0dmFyIHRvdWNoRW5kWCA9IDA7XHJcblxyXG5cdFx0LyogRGV0ZWN0aW5nIHRvdWNoIGV2ZW50c1xyXG5cclxuXHRcdCogQXMgd2UgYXJlIGNoYW5naW5nIHRoZSB0b3AgcHJvcGVydHkgb2YgdGhlIHBhZ2Ugb24gc2Nyb2xsaW5nLCB3ZSBjYW4gbm90IHVzZSB0aGUgdHJhZGl0aW9uYWwgd2F5IHRvIGRldGVjdCBpdC5cclxuXHRcdCogVGhpcyB3YXksIHRoZSB0b3VjaHN0YXJ0IGFuZCB0aGUgdG91Y2ggbW92ZXMgc2hvd3MgYW4gc21hbGwgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZW0gd2hpY2ggaXMgdGhlXHJcblx0XHQqIHVzZWQgb25lIHRvIGRldGVybWluZSB0aGUgZGlyZWN0aW9uLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHRvdWNoTW92ZUhhbmRsZXIoZXZlbnQpe1xyXG5cdFx0XHR2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblxyXG5cdFx0XHQvLyBhZGRpdGlvbmFsOiBpZiBvbmUgb2YgdGhlIG5vcm1hbFNjcm9sbEVsZW1lbnRzIGlzbid0IHdpdGhpbiBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRUb3VjaFRocmVzaG9sZCBob3BzIHVwIHRoZSBET00gY2hhaW5cclxuXHRcdFx0aWYgKCFjaGVja1BhcmVudEZvck5vcm1hbFNjcm9sbEVsZW1lbnQoZXZlbnQudGFyZ2V0KSkge1xyXG5cclxuXHRcdFx0XHRpZihvcHRpb25zLmF1dG9TY3JvbGxpbmcpe1xyXG5cdFx0XHRcdFx0Ly9wcmV2ZW50aW5nIHRoZSBlYXNpbmcgb24gaU9TIGRldmljZXNcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgYWN0aXZlU2VjdGlvbiA9ICQoJy5mcC1zZWN0aW9uLmFjdGl2ZScpO1xyXG5cdFx0XHRcdHZhciBzY3JvbGxhYmxlID0gaXNTY3JvbGxhYmxlKGFjdGl2ZVNlY3Rpb24pO1xyXG5cclxuXHRcdFx0XHRpZiAoIWlzTW92aW5nICYmICFzbGlkZU1vdmluZykgeyAvL2lmIHRoZXJlcyBhbnkgI1xyXG5cdFx0XHRcdFx0dmFyIHRvdWNoRXZlbnRzID0gZ2V0RXZlbnRzUGFnZShlKTtcclxuXHJcblx0XHRcdFx0XHR0b3VjaEVuZFkgPSB0b3VjaEV2ZW50cy55O1xyXG5cdFx0XHRcdFx0dG91Y2hFbmRYID0gdG91Y2hFdmVudHMueDtcclxuXHJcblx0XHRcdFx0XHQvL2lmIG1vdmVtZW50IGluIHRoZSBYIGF4eXMgaXMgZ3JlYXRlciB0aGFuIGluIHRoZSBZIGFuZCB0aGUgY3VycmVjdCBzZWN0aW9uIGhhcyBzbGlkZXMuLi5cclxuXHRcdFx0XHRcdGlmIChhY3RpdmVTZWN0aW9uLmZpbmQoJy5mcC1zbGlkZXMnKS5sZW5ndGggJiYgTWF0aC5hYnModG91Y2hTdGFydFggLSB0b3VjaEVuZFgpID4gKE1hdGguYWJzKHRvdWNoU3RhcnRZIC0gdG91Y2hFbmRZKSkpIHtcclxuXHJcblx0XHRcdFx0XHQgICAgLy9pcyB0aGUgbW92ZW1lbnQgZ3JlYXRlciB0aGFuIHRoZSBtaW5pbXVtIHJlc2lzdGFuY2UgdG8gc2Nyb2xsP1xyXG5cdFx0XHRcdFx0ICAgIGlmIChNYXRoLmFicyh0b3VjaFN0YXJ0WCAtIHRvdWNoRW5kWCkgPiAoJCh3aW5kb3cpLndpZHRoKCkgLyAxMDAgKiBvcHRpb25zLnRvdWNoU2Vuc2l0aXZpdHkpKSB7XHJcblx0XHRcdFx0XHQgICAgICAgIGlmICh0b3VjaFN0YXJ0WCA+IHRvdWNoRW5kWCkge1xyXG5cdFx0XHRcdFx0ICAgICAgICBcdGlmKGlzU2Nyb2xsQWxsb3dlZC5yaWdodCl7XHJcblx0XHRcdFx0XHQgICAgICAgICAgICBcdCQuZm4uZnVsbHBhZ2UubW92ZVNsaWRlUmlnaHQoKTsgLy9uZXh0XHJcblx0XHRcdFx0XHQgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHQgICAgICAgIH0gZWxzZSB7XHJcblx0XHRcdFx0XHQgICAgICAgIFx0aWYoaXNTY3JvbGxBbGxvd2VkLmxlZnQpe1xyXG5cdFx0XHRcdFx0ICAgICAgICAgICAgXHQkLmZuLmZ1bGxwYWdlLm1vdmVTbGlkZUxlZnQoKTsgLy9wcmV2XHJcblx0XHRcdFx0XHQgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHQgICAgICAgIH1cclxuXHRcdFx0XHRcdCAgICB9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly92ZXJ0aWNhbCBzY3JvbGxpbmcgKG9ubHkgd2hlbiBhdXRvU2Nyb2xsaW5nIGlzIGVuYWJsZWQpXHJcblx0XHRcdFx0XHRlbHNlIGlmKG9wdGlvbnMuYXV0b1Njcm9sbGluZyl7XHJcblxyXG5cdFx0XHRcdFx0XHQvL2lzIHRoZSBtb3ZlbWVudCBncmVhdGVyIHRoYW4gdGhlIG1pbmltdW0gcmVzaXN0YW5jZSB0byBzY3JvbGw/XHJcblx0XHRcdFx0XHRcdGlmIChNYXRoLmFicyh0b3VjaFN0YXJ0WSAtIHRvdWNoRW5kWSkgPiAoJCh3aW5kb3cpLmhlaWdodCgpIC8gMTAwICogb3B0aW9ucy50b3VjaFNlbnNpdGl2aXR5KSkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICh0b3VjaFN0YXJ0WSA+IHRvdWNoRW5kWSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2Nyb2xsaW5nKCdkb3duJywgc2Nyb2xsYWJsZSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0b3VjaEVuZFkgPiB0b3VjaFN0YXJ0WSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2Nyb2xsaW5nKCd1cCcsIHNjcm9sbGFibGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0byBsb29wIHVwIHRoZSBwYXJlbnQgbm9kZXMgdG8gY2hlY2sgaWYgb25lIG9mIHRoZW0gZXhpc3RzIGluIG9wdGlvbnMubm9ybWFsU2Nyb2xsRWxlbWVudHNcclxuXHRcdCAqIEN1cnJlbnRseSB3b3JrcyB3ZWxsIGZvciBpT1MgLSBBbmRyb2lkIG1pZ2h0IG5lZWQgc29tZSB0ZXN0aW5nXHJcblx0XHQgKiBAcGFyYW0gIHtFbGVtZW50fSBlbCAgdGFyZ2V0IGVsZW1lbnQgLyBqcXVlcnkgc2VsZWN0b3IgKGluIHN1YnNlcXVlbnQgbm9kZXMpXHJcblx0XHQgKiBAcGFyYW0gIHtpbnR9ICAgICBob3AgY3VycmVudCBob3AgY29tcGFyZWQgdG8gb3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50VG91Y2hUaHJlc2hvbGRcclxuXHRcdCAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgaXMgYSBtYXRjaCB0byBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRzXHJcblx0XHQgKi9cclxuXHRcdGZ1bmN0aW9uIGNoZWNrUGFyZW50Rm9yTm9ybWFsU2Nyb2xsRWxlbWVudCAoZWwsIGhvcCkge1xyXG5cdFx0XHRob3AgPSBob3AgfHwgMDtcclxuXHRcdFx0dmFyIHBhcmVudCA9ICQoZWwpLnBhcmVudCgpO1xyXG5cclxuXHRcdFx0aWYgKGhvcCA8IG9wdGlvbnMubm9ybWFsU2Nyb2xsRWxlbWVudFRvdWNoVGhyZXNob2xkICYmXHJcblx0XHRcdFx0cGFyZW50LmlzKG9wdGlvbnMubm9ybWFsU2Nyb2xsRWxlbWVudHMpICkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGhvcCA9PSBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRUb3VjaFRocmVzaG9sZCkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gY2hlY2tQYXJlbnRGb3JOb3JtYWxTY3JvbGxFbGVtZW50KHBhcmVudCwgKytob3ApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdG91Y2hTdGFydEhhbmRsZXIoZXZlbnQpe1xyXG5cdFx0XHR2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblxyXG5cdFx0XHQvL3N0b3BwaW5nIHRoZSBhdXRvIHNjcm9sbCB0byBhZGp1c3QgdG8gYSBzZWN0aW9uXHJcblx0XHRcdGlmKG9wdGlvbnMuc2Nyb2xsQmFyKXtcclxuXHRcdFx0XHQkKFwiaHRtbCxib2R5XCIpLnN0b3AoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHRvdWNoRXZlbnRzID0gZ2V0RXZlbnRzUGFnZShlKTtcclxuXHRcdFx0dG91Y2hTdGFydFkgPSB0b3VjaEV2ZW50cy55O1xyXG5cdFx0XHR0b3VjaFN0YXJ0WCA9IHRvdWNoRXZlbnRzLng7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogRGV0ZWN0aW5nIG1vdXNld2hlZWwgc2Nyb2xsaW5nXHJcblx0XHQgKlxyXG5cdFx0ICogaHR0cDovL2Jsb2dzLnNpdGVwb2ludHN0YXRpYy5jb20vZXhhbXBsZXMvdGVjaC9tb3VzZS13aGVlbC9pbmRleC5odG1sXHJcblx0XHQgKiBodHRwOi8vd3d3LnNpdGVwb2ludC5jb20vaHRtbDUtamF2YXNjcmlwdC1tb3VzZS13aGVlbC9cclxuXHRcdCAqL1xyXG5cdFx0ZnVuY3Rpb24gTW91c2VXaGVlbEhhbmRsZXIoZSkge1xyXG5cdFx0XHRpZihvcHRpb25zLmF1dG9TY3JvbGxpbmcpe1xyXG5cdFx0XHRcdC8vIGNyb3NzLWJyb3dzZXIgd2hlZWwgZGVsdGFcclxuXHRcdFx0XHRlID0gd2luZG93LmV2ZW50IHx8IGU7XHJcblx0XHRcdFx0dmFyIGRlbHRhID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsXHJcblx0XHRcdFx0XHRcdChlLndoZWVsRGVsdGEgfHwgLWUuZGVsdGFZIHx8IC1lLmRldGFpbCkpKTtcclxuXHJcblx0XHRcdFx0Ly9wcmV2ZW50aW5nIHRvIHNjcm9sbCB0aGUgc2l0ZSBvbiBtb3VzZSB3aGVlbCB3aGVuIHNjcm9sbGJhciBpcyBwcmVzZW50XHJcblx0XHRcdFx0aWYob3B0aW9ucy5zY3JvbGxCYXIpe1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCA/IGUucHJldmVudERlZmF1bHQoKSA6IGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBhY3RpdmVTZWN0aW9uID0gJCgnLmZwLXNlY3Rpb24uYWN0aXZlJyk7XHJcblx0XHRcdFx0dmFyIHNjcm9sbGFibGUgPSBpc1Njcm9sbGFibGUoYWN0aXZlU2VjdGlvbik7XHJcblxyXG5cdFx0XHRcdGlmICghaXNNb3ZpbmcpIHsgLy9pZiB0aGVyZXMgYW55ICNcclxuXHRcdFx0XHRcdC8vc2Nyb2xsaW5nIGRvd24/XHJcblx0XHRcdFx0XHRpZiAoZGVsdGEgPCAwKSB7XHJcblx0XHRcdFx0XHRcdHNjcm9sbGluZygnZG93bicsIHNjcm9sbGFibGUpO1xyXG5cclxuXHRcdFx0XHRcdC8vc2Nyb2xsaW5nIHVwP1xyXG5cdFx0XHRcdFx0fWVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzY3JvbGxpbmcoJ3VwJywgc2Nyb2xsYWJsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKG9wdGlvbnMuc2Nyb2xsQmFyKXtcclxuXHRcdFx0XHQvL3N0b3BwaW5nIHRoZSBhdXRvIHNjcm9sbCB0byBhZGp1c3QgdG8gYSBzZWN0aW9uXHJcblx0XHRcdFx0JChcImh0bWwsYm9keVwiKS5zdG9wKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBtb3ZlU2xpZGUoZGlyZWN0aW9uKXtcclxuXHRcdCAgICB2YXIgYWN0aXZlU2VjdGlvbiA9ICQoJy5mcC1zZWN0aW9uLmFjdGl2ZScpO1xyXG5cdFx0ICAgIHZhciBzbGlkZXMgPSBhY3RpdmVTZWN0aW9uLmZpbmQoJy5mcC1zbGlkZXMnKTtcclxuXHJcblx0XHQgICAgLy8gbW9yZSB0aGFuIG9uZSBzbGlkZSBuZWVkZWQgYW5kIG5vdGhpbmcgc2hvdWxkIGJlIHNsaWRpbmdcclxuXHRcdFx0aWYgKCFzbGlkZXMubGVuZ3RoIHx8IHNsaWRlTW92aW5nKSB7XHJcblx0XHRcdCAgICByZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHQgICAgdmFyIGN1cnJlbnRTbGlkZSA9IHNsaWRlcy5maW5kKCcuZnAtc2xpZGUuYWN0aXZlJyk7XHJcblx0XHQgICAgdmFyIGRlc3RpbnkgPSBudWxsO1xyXG5cclxuXHRcdCAgICBpZihkaXJlY3Rpb24gPT09ICdwcmV2Jyl7XHJcblx0XHQgICAgICAgIGRlc3RpbnkgPSBjdXJyZW50U2xpZGUucHJldignLmZwLXNsaWRlJyk7XHJcblx0XHQgICAgfWVsc2V7XHJcblx0XHQgICAgICAgIGRlc3RpbnkgPSBjdXJyZW50U2xpZGUubmV4dCgnLmZwLXNsaWRlJyk7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICAvL2lzbid0IHRoZXJlIGEgbmV4dCBzbGlkZSBpbiB0aGUgc2VjdWVuY2U/XHJcblx0XHRcdGlmKCFkZXN0aW55Lmxlbmd0aCl7XHJcblx0XHRcdFx0Ly9yZXNwZWN0IGxvb3BIb3Jpem9udGFsIHNldHRpblxyXG5cdFx0XHRcdGlmICghb3B0aW9ucy5sb29wSG9yaXpvbnRhbCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0ICAgIGlmKGRpcmVjdGlvbiA9PT0gJ3ByZXYnKXtcclxuXHRcdFx0ICAgICAgICBkZXN0aW55ID0gY3VycmVudFNsaWRlLnNpYmxpbmdzKCc6bGFzdCcpO1xyXG5cdFx0XHQgICAgfWVsc2V7XHJcblx0XHRcdCAgICAgICAgZGVzdGlueSA9IGN1cnJlbnRTbGlkZS5zaWJsaW5ncygnOmZpcnN0Jyk7XHJcblx0XHRcdCAgICB9XHJcblx0XHRcdH1cclxuXHJcblx0XHQgICAgc2xpZGVNb3ZpbmcgPSB0cnVlO1xyXG5cclxuXHRcdCAgICBsYW5kc2NhcGVTY3JvbGwoc2xpZGVzLCBkZXN0aW55KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogTWFpbnRhaW5zIHRoZSBhY3RpdmUgc2xpZGVzIGluIHRoZSB2aWV3cG9ydFxyXG5cdFx0KiAoQmVjYXVzZSBoZSBgc2Nyb2xsYCBhbmltYXRpb24gbWlnaHQgZ2V0IGxvc3Qgd2l0aCBzb21lIGFjdGlvbnMsIHN1Y2ggYXMgd2hlbiB1c2luZyBjb250aW51b3VzVmVydGljYWwpXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24ga2VlcFNsaWRlc1Bvc2l0aW9uKCl7XHJcblx0XHRcdCQoJy5mcC1zbGlkZS5hY3RpdmUnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0c2lsZW50TGFuZHNjYXBlU2Nyb2xsKCQodGhpcykpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogU2Nyb2xscyB0aGUgc2l0ZSB0byB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgc2Nyb2xscyB0byB0aGUgc2xpZGUgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzY3JvbGxQYWdlKGVsZW1lbnQsIGNhbGxiYWNrLCBpc01vdmVtZW50VXApe1xyXG5cdFx0XHR2YXIgZGVzdCA9IGVsZW1lbnQucG9zaXRpb24oKTtcclxuXHRcdFx0aWYodHlwZW9mIGRlc3QgPT09IFwidW5kZWZpbmVkXCIpeyByZXR1cm47IH0gLy90aGVyZSdzIG5vIGVsZW1lbnQgdG8gc2Nyb2xsLCBsZWF2aW5nIHRoZSBmdW5jdGlvblxyXG5cclxuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcclxuXHRcdFx0dmFyIHYgPSB7XHJcblx0XHRcdFx0ZWxlbWVudDogZWxlbWVudCxcclxuXHRcdFx0XHRjYWxsYmFjazogY2FsbGJhY2ssXHJcblx0XHRcdFx0aXNNb3ZlbWVudFVwOiBpc01vdmVtZW50VXAsXHJcblx0XHRcdFx0ZGVzdDogZGVzdCxcclxuXHRcdFx0XHRkdG9wOiBkZXN0LnRvcCxcclxuXHRcdFx0XHR5TW92ZW1lbnQ6IGdldFltb3ZlbWVudChlbGVtZW50KSxcclxuXHRcdFx0XHRhbmNob3JMaW5rOiBlbGVtZW50LmRhdGEoJ2FuY2hvcicpLFxyXG5cdFx0XHRcdHNlY3Rpb25JbmRleDogZWxlbWVudC5pbmRleCgnLmZwLXNlY3Rpb24nKSxcclxuXHRcdFx0XHRhY3RpdmVTbGlkZTogZWxlbWVudC5maW5kKCcuZnAtc2xpZGUuYWN0aXZlJyksXHJcblx0XHRcdFx0YWN0aXZlU2VjdGlvbjogJCgnLmZwLXNlY3Rpb24uYWN0aXZlJyksXHJcblx0XHRcdFx0bGVhdmluZ1NlY3Rpb246ICQoJy5mcC1zZWN0aW9uLmFjdGl2ZScpLmluZGV4KCcuZnAtc2VjdGlvbicpICsgMSxcclxuXHJcblx0XHRcdFx0Ly9jYWNoaW5nIHRoZSB2YWx1ZSBvZiBpc1Jlc2l6aW5nIGF0IHRoZSBtb21tZW50IHRoZSBmdW5jdGlvbiBpcyBjYWxsZWRcclxuXHRcdFx0XHQvL2JlY2F1c2UgaXQgd2lsbCBiZSBjaGVja2VkIGxhdGVyIGluc2lkZSBhIHNldFRpbWVvdXQgYW5kIHRoZSB2YWx1ZSBtaWdodCBjaGFuZ2VcclxuXHRcdFx0XHRsb2NhbElzUmVzaXppbmc6IGlzUmVzaXppbmdcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vcXVpdGluZyB3aGVuIGRlc3RpbmF0aW9uIHNjcm9sbCBpcyB0aGUgc2FtZSBhcyB0aGUgY3VycmVudCBvbmVcclxuXHRcdFx0aWYoKHYuYWN0aXZlU2VjdGlvbi5pcyhlbGVtZW50KSAmJiAhaXNSZXNpemluZykgfHwgKG9wdGlvbnMuc2Nyb2xsQmFyICYmICQod2luZG93KS5zY3JvbGxUb3AoKSA9PT0gdi5kdG9wKSl7IHJldHVybjsgfVxyXG5cclxuXHRcdFx0aWYodi5hY3RpdmVTbGlkZS5sZW5ndGgpe1xyXG5cdFx0XHRcdHZhciBzbGlkZUFuY2hvckxpbmsgPSB2LmFjdGl2ZVNsaWRlLmRhdGEoJ2FuY2hvcicpO1xyXG5cdFx0XHRcdHZhciBzbGlkZUluZGV4ID0gdi5hY3RpdmVTbGlkZS5pbmRleCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBjb250aW51b3VzVmVydGljYWwgJiYgd2UgbmVlZCB0byB3cmFwIGFyb3VuZFxyXG5cdFx0XHRpZiAob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmIG9wdGlvbnMuY29udGludW91c1ZlcnRpY2FsICYmIHR5cGVvZiAodi5pc01vdmVtZW50VXApICE9PSBcInVuZGVmaW5lZFwiICYmXHJcblx0XHRcdFx0KCghdi5pc01vdmVtZW50VXAgJiYgdi55TW92ZW1lbnQgPT0gJ3VwJykgfHwgLy8gSW50ZW5kaW5nIHRvIHNjcm9sbCBkb3duIGJ1dCBhYm91dCB0byBnbyB1cCBvclxyXG5cdFx0XHRcdCh2LmlzTW92ZW1lbnRVcCAmJiB2LnlNb3ZlbWVudCA9PSAnZG93bicpKSkgeyAvLyBpbnRlbmRpbmcgdG8gc2Nyb2xsIHVwIGJ1dCBhYm91dCB0byBnbyBkb3duXHJcblxyXG5cdFx0XHRcdHYgPSBjcmVhdGVJbmZpbml0ZVNlY3Rpb25zKHYpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbGVtZW50LmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcblx0XHRcdC8vcHJldmVudGluZyBmcm9tIGFjdGl2YXRpbmcgdGhlIE1vdXNlV2hlZWxIYW5kbGVyIGV2ZW50XHJcblx0XHRcdC8vbW9yZSB0aGFuIG9uY2UgaWYgdGhlIHBhZ2UgaXMgc2Nyb2xsaW5nXHJcblx0XHRcdGlzTW92aW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yTGluaywgdi5hbmNob3JMaW5rLCB2LnNlY3Rpb25JbmRleCk7XHJcblxyXG5cdFx0XHQvL2NhbGxiYWNrIChvbkxlYXZlKSBpZiB0aGUgc2l0ZSBpcyBub3QganVzdCByZXNpemluZyBhbmQgcmVhZGp1c3RpbmcgdGhlIHNsaWRlc1xyXG5cdFx0XHQkLmlzRnVuY3Rpb24ob3B0aW9ucy5vbkxlYXZlKSAmJiAhdi5sb2NhbElzUmVzaXppbmcgJiYgb3B0aW9ucy5vbkxlYXZlLmNhbGwodi5hY3RpdmVTZWN0aW9uLCB2LmxlYXZpbmdTZWN0aW9uLCAodi5zZWN0aW9uSW5kZXggKyAxKSwgdi55TW92ZW1lbnQpO1xyXG5cclxuXHRcdFx0cGVyZm9ybU1vdmVtZW50KHYpO1xyXG5cclxuXHRcdFx0Ly9mbGFnIHRvIGF2b2lkIGNhbGxpbmduIGBzY3JvbGxQYWdlKClgIHR3aWNlIGluIGNhc2Ugb2YgdXNpbmcgYW5jaG9yIGxpbmtzXHJcblx0XHRcdGxhc3RTY3JvbGxlZERlc3RpbnkgPSB2LmFuY2hvckxpbms7XHJcblxyXG5cdFx0XHQvL2F2b2lkIGZpcmluZyBpdCB0d2ljZSAoYXMgaXQgZG9lcyBhbHNvIG9uIHNjcm9sbClcclxuXHRcdFx0aWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nKXtcclxuXHRcdFx0XHRhY3RpdmF0ZU1lbnVBbmROYXYodi5hbmNob3JMaW5rLCB2LnNlY3Rpb25JbmRleCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogUGVyZm9ybXMgdGhlIG1vdmVtZW50IChieSBDU1MzIG9yIGJ5IGpRdWVyeSlcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBwZXJmb3JtTW92ZW1lbnQodil7XHJcblx0XHRcdC8vIHVzaW5nIENTUzMgdHJhbnNsYXRlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdFx0aWYgKG9wdGlvbnMuY3NzMyAmJiBvcHRpb25zLmF1dG9TY3JvbGxpbmcgJiYgIW9wdGlvbnMuc2Nyb2xsQmFyKSB7XHJcblxyXG5cdFx0XHRcdHZhciB0cmFuc2xhdGUzZCA9ICd0cmFuc2xhdGUzZCgwcHgsIC0nICsgdi5kdG9wICsgJ3B4LCAwcHgpJztcclxuXHRcdFx0XHR0cmFuc2Zvcm1Db250YWluZXIodHJhbnNsYXRlM2QsIHRydWUpO1xyXG5cclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdGFmdGVyU2VjdGlvbkxvYWRzKHYpO1xyXG5cdFx0XHRcdH0sIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyB1c2luZyBqUXVlcnkgYW5pbWF0ZVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdHZhciBzY3JvbGxTZXR0aW5ncyA9IGdldFNjcm9sbFNldHRpbmdzKHYpO1xyXG5cclxuXHRcdFx0XHQkKHNjcm9sbFNldHRpbmdzLmVsZW1lbnQpLmFuaW1hdGUoXHJcblx0XHRcdFx0XHRzY3JvbGxTZXR0aW5ncy5vcHRpb25zXHJcblx0XHRcdFx0LCBvcHRpb25zLnNjcm9sbGluZ1NwZWVkLCBvcHRpb25zLmVhc2luZykucHJvbWlzZSgpLmRvbmUoZnVuY3Rpb24gKCkgeyAvL29ubHkgb25lIHNpbmdsZSBjYWxsYmFjayBpbiBjYXNlIG9mIGFuaW1hdGluZyAgYGh0bWwsIGJvZHlgXHJcblx0XHRcdFx0XHRhZnRlclNlY3Rpb25Mb2Fkcyh2KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBHZXRzIHRoZSBzY3JvbGxpbmcgc2V0dGluZ3MgZGVwZW5kaW5nIG9uIHRoZSBwbHVnaW4gYXV0b1Njcm9sbGluZyBvcHRpb25cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRTY3JvbGxTZXR0aW5ncyh2KXtcclxuXHRcdFx0dmFyIHNjcm9sbCA9IHt9O1xyXG5cclxuXHRcdFx0aWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcil7XHJcblx0XHRcdFx0c2Nyb2xsLm9wdGlvbnMgPSB7ICd0b3AnOiAtdi5kdG9wfTtcclxuXHRcdFx0XHRzY3JvbGwuZWxlbWVudCA9ICcuJyt3cmFwcGVyU2VsZWN0b3I7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHNjcm9sbC5vcHRpb25zID0geyAnc2Nyb2xsVG9wJzogdi5kdG9wfTtcclxuXHRcdFx0XHRzY3JvbGwuZWxlbWVudCA9ICdodG1sLCBib2R5JztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNjcm9sbDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQWRkcyBzZWN0aW9ucyBiZWZvcmUgb3IgYWZ0ZXIgdGhlIGN1cnJlbnQgb25lIHRvIGNyZWF0ZSB0aGUgaW5maW5pdGUgZWZmZWN0LlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUluZmluaXRlU2VjdGlvbnModil7XHJcblx0XHRcdC8vIFNjcm9sbGluZyBkb3duXHJcblx0XHRcdGlmICghdi5pc01vdmVtZW50VXApIHtcclxuXHRcdFx0XHQvLyBNb3ZlIGFsbCBwcmV2aW91cyBzZWN0aW9ucyB0byBhZnRlciB0aGUgYWN0aXZlIHNlY3Rpb25cclxuXHRcdFx0XHQkKFwiLmZwLXNlY3Rpb24uYWN0aXZlXCIpLmFmdGVyKHYuYWN0aXZlU2VjdGlvbi5wcmV2QWxsKFwiLmZwLXNlY3Rpb25cIikuZ2V0KCkucmV2ZXJzZSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHsgLy8gU2Nyb2xsaW5nIHVwXHJcblx0XHRcdFx0Ly8gTW92ZSBhbGwgbmV4dCBzZWN0aW9ucyB0byBiZWZvcmUgdGhlIGFjdGl2ZSBzZWN0aW9uXHJcblx0XHRcdFx0JChcIi5mcC1zZWN0aW9uLmFjdGl2ZVwiKS5iZWZvcmUodi5hY3RpdmVTZWN0aW9uLm5leHRBbGwoXCIuZnAtc2VjdGlvblwiKSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1haW50YWluIHRoZSBkaXNwbGF5ZWQgcG9zaXRpb24gKG5vdyB0aGF0IHdlIGNoYW5nZWQgdGhlIGVsZW1lbnQgb3JkZXIpXHJcblx0XHRcdHNpbGVudFNjcm9sbCgkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5wb3NpdGlvbigpLnRvcCk7XHJcblxyXG5cdFx0XHQvLyBNYWludGFpbiB0aGUgYWN0aXZlIHNsaWRlcyB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydFxyXG5cdFx0XHRrZWVwU2xpZGVzUG9zaXRpb24oKTtcclxuXHJcblx0XHRcdC8vIHNhdmUgZm9yIGxhdGVyIHRoZSBlbGVtZW50cyB0aGF0IHN0aWxsIG5lZWQgdG8gYmUgcmVvcmRlcmVkXHJcblx0XHRcdHYud3JhcEFyb3VuZEVsZW1lbnRzID0gdi5hY3RpdmVTZWN0aW9uO1xyXG5cclxuXHRcdFx0Ly8gUmVjYWxjdWxhdGUgYW5pbWF0aW9uIHZhcmlhYmxlc1xyXG5cdFx0XHR2LmRlc3QgPSB2LmVsZW1lbnQucG9zaXRpb24oKTtcclxuXHRcdFx0di5kdG9wID0gdi5kZXN0LnRvcDtcclxuXHRcdFx0di55TW92ZW1lbnQgPSBnZXRZbW92ZW1lbnQodi5lbGVtZW50KTtcclxuXHJcblx0XHRcdHJldHVybiB2O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBGaXggc2VjdGlvbiBvcmRlciBhZnRlciBjb250aW51b3VzVmVydGljYWwgY2hhbmdlcyBoYXZlIGJlZW4gYW5pbWF0ZWRcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBjb250aW51b3VzVmVydGljYWxGaXhTZWN0aW9uT3JkZXIgKHYpIHtcclxuXHRcdFx0Ly8gSWYgY29udGludW91c1ZlcnRpY2FsIGlzIGluIGVmZmVjdCAoYW5kIGF1dG9TY3JvbGxpbmcgd291bGQgYWxzbyBiZSBpbiBlZmZlY3QgdGhlbiksXHJcblx0XHRcdC8vIGZpbmlzaCBtb3ZpbmcgdGhlIGVsZW1lbnRzIGFyb3VuZCBzbyB0aGUgZGlyZWN0IG5hdmlnYXRpb24gd2lsbCBmdW5jdGlvbiBtb3JlIHNpbXBseVxyXG5cdFx0XHRpZiAoIXYud3JhcEFyb3VuZEVsZW1lbnRzIHx8ICF2LndyYXBBcm91bmRFbGVtZW50cy5sZW5ndGgpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh2LmlzTW92ZW1lbnRVcCkge1xyXG5cdFx0XHRcdCQoJy5mcC1zZWN0aW9uOmZpcnN0JykuYmVmb3JlKHYud3JhcEFyb3VuZEVsZW1lbnRzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkKCcuZnAtc2VjdGlvbjpsYXN0JykuYWZ0ZXIodi53cmFwQXJvdW5kRWxlbWVudHMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzaWxlbnRTY3JvbGwoJCgnLmZwLXNlY3Rpb24uYWN0aXZlJykucG9zaXRpb24oKS50b3ApO1xyXG5cclxuXHRcdFx0Ly8gTWFpbnRhaW4gdGhlIGFjdGl2ZSBzbGlkZXMgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnRcclxuXHRcdFx0a2VlcFNsaWRlc1Bvc2l0aW9uKCk7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBBY3Rpb25zIHRvIGRvIG9uY2UgdGhlIHNlY3Rpb24gaXMgbG9hZGVkXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gYWZ0ZXJTZWN0aW9uTG9hZHMgKHYpe1xyXG5cdFx0XHRjb250aW51b3VzVmVydGljYWxGaXhTZWN0aW9uT3JkZXIodik7XHJcblx0XHRcdC8vY2FsbGJhY2sgKGFmdGVyTG9hZCkgaWYgdGhlIHNpdGUgaXMgbm90IGp1c3QgcmVzaXppbmcgYW5kIHJlYWRqdXN0aW5nIHRoZSBzbGlkZXNcclxuXHRcdFx0JC5pc0Z1bmN0aW9uKG9wdGlvbnMuYWZ0ZXJMb2FkKSAmJiAhdi5sb2NhbElzUmVzaXppbmcgJiYgb3B0aW9ucy5hZnRlckxvYWQuY2FsbCh2LmVsZW1lbnQsIHYuYW5jaG9yTGluaywgKHYuc2VjdGlvbkluZGV4ICsgMSkpO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0aXNNb3ZpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHQkLmlzRnVuY3Rpb24odi5jYWxsYmFjaykgJiYgdi5jYWxsYmFjay5jYWxsKHRoaXMpO1xyXG5cdFx0XHR9LCBzY3JvbGxEZWxheSk7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBTY3JvbGxzIHRvIHRoZSBhbmNob3IgaW4gdGhlIFVSTCB3aGVuIGxvYWRpbmcgdGhlIHNpdGVcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzY3JvbGxUb0FuY2hvcigpe1xyXG5cdFx0XHQvL2dldHRpbmcgdGhlIGFuY2hvciBsaW5rIGluIHRoZSBVUkwgYW5kIGRlbGV0aW5nIHRoZSBgI2BcclxuXHRcdFx0dmFyIHZhbHVlID0gIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykuc3BsaXQoJy8nKTtcclxuXHRcdFx0dmFyIHNlY3Rpb24gPSB2YWx1ZVswXTtcclxuXHRcdFx0dmFyIHNsaWRlID0gdmFsdWVbMV07XHJcblxyXG5cdFx0XHRpZihzZWN0aW9uKXsgIC8vaWYgdGhlcmVzIGFueSAjXHJcblx0XHRcdFx0c2Nyb2xsUGFnZUFuZFNsaWRlKHNlY3Rpb24sIHNsaWRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vZGV0ZWN0aW5nIGFueSBjaGFuZ2Ugb24gdGhlIFVSTCB0byBzY3JvbGwgdG8gdGhlIGdpdmVuIGFuY2hvciBsaW5rXHJcblx0XHQvLyhhIHdheSB0byBkZXRlY3QgYmFjayBoaXN0b3J5IGJ1dHRvbiBhcyB3ZSBwbGF5IHdpdGggdGhlIGhhc2hlcyBvbiB0aGUgVVJMKVxyXG5cdFx0JCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgaGFzaENoYW5nZUhhbmRsZXIpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGhhc2hDaGFuZ2VIYW5kbGVyKCl7XHJcblx0XHRcdGlmKCFpc1Njcm9sbGluZyl7XHJcblx0XHRcdFx0dmFyIHZhbHVlID0gIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykuc3BsaXQoJy8nKTtcclxuXHRcdFx0XHR2YXIgc2VjdGlvbiA9IHZhbHVlWzBdO1xyXG5cdFx0XHRcdHZhciBzbGlkZSA9IHZhbHVlWzFdO1xyXG5cclxuXHRcdFx0XHRpZihzZWN0aW9uLmxlbmd0aCl7XHJcblx0XHRcdFx0XHQvL3doZW4gbW92aW5nIHRvIGEgc2xpZGUgaW4gdGhlIGZpcnN0IHNlY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lIChmaXJzdCB0aW1lIHRvIGFkZCBhbiBhbmNob3IgdG8gdGhlIFVSTClcclxuXHRcdFx0XHRcdHZhciBpc0ZpcnN0U2xpZGVNb3ZlID0gICh0eXBlb2YgbGFzdFNjcm9sbGVkRGVzdGlueSA9PT0gJ3VuZGVmaW5lZCcpO1xyXG5cdFx0XHRcdFx0dmFyIGlzRmlyc3RTY3JvbGxNb3ZlID0gKHR5cGVvZiBsYXN0U2Nyb2xsZWREZXN0aW55ID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc2xpZGUgPT09ICd1bmRlZmluZWQnICYmICFzbGlkZU1vdmluZyk7XHJcblxyXG5cdFx0XHRcdFx0LyppbiBvcmRlciB0byBjYWxsIHNjcm9sbHBhZ2UoKSBvbmx5IG9uY2UgZm9yIGVhY2ggZGVzdGluYXRpb24gYXQgYSB0aW1lXHJcblx0XHRcdFx0XHRJdCBpcyBjYWxsZWQgdHdpY2UgZm9yIGVhY2ggc2Nyb2xsIG90aGVyd2lzZSwgYXMgaW4gY2FzZSBvZiB1c2luZyBhbmNob3JsaW5rcyBgaGFzaENoYW5nZWBcclxuXHRcdFx0XHRcdGV2ZW50IGlzIGZpcmVkIG9uIGV2ZXJ5IHNjcm9sbCB0b28uKi9cclxuXHRcdFx0XHRcdGlmICgoc2VjdGlvbiAmJiBzZWN0aW9uICE9PSBsYXN0U2Nyb2xsZWREZXN0aW55KSAmJiAhaXNGaXJzdFNsaWRlTW92ZSB8fCBpc0ZpcnN0U2Nyb2xsTW92ZSB8fCAoIXNsaWRlTW92aW5nICYmIGxhc3RTY3JvbGxlZFNsaWRlICE9IHNsaWRlICkpICB7XHJcblx0XHRcdFx0XHRcdHNjcm9sbFBhZ2VBbmRTbGlkZShzZWN0aW9uLCBzbGlkZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU2xpZGluZyB3aXRoIGFycm93IGtleXMsIGJvdGgsIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsXHJcblx0XHQgKi9cclxuXHRcdCQoZG9jdW1lbnQpLmtleWRvd24oZnVuY3Rpb24oZSkge1xyXG5cdFx0XHQvL01vdmluZyB0aGUgbWFpbiBwYWdlIHdpdGggdGhlIGtleWJvYXJkIGFycm93cyBpZiBrZXlib2FyZCBzY3JvbGxpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRpZiAob3B0aW9ucy5rZXlib2FyZFNjcm9sbGluZyAmJiBvcHRpb25zLmF1dG9TY3JvbGxpbmcpIHtcclxuXHJcblx0XHRcdFx0Ly9wcmV2ZW50aW5nIHRoZSBzY3JvbGwgd2l0aCBhcnJvdyBrZXlzXHJcblx0XHRcdFx0aWYoZS53aGljaCA9PSA0MCB8fCBlLndoaWNoID09IDM4KXtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKCFpc01vdmluZyl7XHJcblx0XHRcdFx0XHRzd2l0Y2ggKGUud2hpY2gpIHtcclxuXHRcdFx0XHRcdFx0Ly91cFxyXG5cdFx0XHRcdFx0XHRjYXNlIDM4OlxyXG5cdFx0XHRcdFx0XHRjYXNlIDMzOlxyXG5cdFx0XHRcdFx0XHRcdCQuZm4uZnVsbHBhZ2UubW92ZVNlY3Rpb25VcCgpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly9kb3duXHJcblx0XHRcdFx0XHRcdGNhc2UgNDA6XHJcblx0XHRcdFx0XHRcdGNhc2UgMzQ6XHJcblx0XHRcdFx0XHRcdFx0JC5mbi5mdWxscGFnZS5tb3ZlU2VjdGlvbkRvd24oKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdC8vSG9tZVxyXG5cdFx0XHRcdFx0XHRjYXNlIDM2OlxyXG5cdFx0XHRcdFx0XHRcdCQuZm4uZnVsbHBhZ2UubW92ZVRvKDEpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly9FbmRcclxuXHRcdFx0XHRcdFx0Y2FzZSAzNTpcclxuXHRcdFx0XHRcdFx0XHQkLmZuLmZ1bGxwYWdlLm1vdmVUbyggJCgnLmZwLXNlY3Rpb24nKS5sZW5ndGggKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdC8vbGVmdFxyXG5cdFx0XHRcdFx0XHRjYXNlIDM3OlxyXG5cdFx0XHRcdFx0XHRcdCQuZm4uZnVsbHBhZ2UubW92ZVNsaWRlTGVmdCgpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly9yaWdodFxyXG5cdFx0XHRcdFx0XHRjYXNlIDM5OlxyXG5cdFx0XHRcdFx0XHRcdCQuZm4uZnVsbHBhZ2UubW92ZVNsaWRlUmlnaHQoKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuOyAvLyBleGl0IHRoaXMgaGFuZGxlciBmb3Igb3RoZXIga2V5c1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFNjcm9sbHMgdG8gdGhlIHNlY3Rpb24gd2hlbiBjbGlja2luZyB0aGUgbmF2aWdhdGlvbiBidWxsZXRcclxuXHRcdCovXHJcblx0XHQkKGRvY3VtZW50KS5vbignY2xpY2sgdG91Y2hzdGFydCcsICcjZnAtbmF2IGEnLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR2YXIgaW5kZXggPSAkKHRoaXMpLnBhcmVudCgpLmluZGV4KCk7XHJcblx0XHRcdHNjcm9sbFBhZ2UoJCgnLmZwLXNlY3Rpb24nKS5lcShpbmRleCkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFNjcm9sbHMgdGhlIHNsaWRlciB0byB0aGUgZ2l2ZW4gc2xpZGUgZGVzdGluYXRpb24gZm9yIHRoZSBnaXZlbiBzZWN0aW9uXHJcblx0XHQqL1xyXG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCAnLmZwLXNsaWRlc05hdiBhJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dmFyIHNsaWRlcyA9ICQodGhpcykuY2xvc2VzdCgnLmZwLXNlY3Rpb24nKS5maW5kKCcuZnAtc2xpZGVzJyk7XHJcblx0XHRcdHZhciBkZXN0aW55ID0gc2xpZGVzLmZpbmQoJy5mcC1zbGlkZScpLmVxKCQodGhpcykuY2xvc2VzdCgnbGknKS5pbmRleCgpKTtcclxuXHJcblx0XHRcdGxhbmRzY2FwZVNjcm9sbChzbGlkZXMsIGRlc3RpbnkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYob3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50cyl7XHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyJywgb3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50cywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQuZm4uZnVsbHBhZ2Uuc2V0TW91c2VXaGVlbFNjcm9sbGluZyhmYWxzZSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0JChkb2N1bWVudCkub24oJ21vdXNlbGVhdmUnLCBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRzLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCQuZm4uZnVsbHBhZ2Uuc2V0TW91c2VXaGVlbFNjcm9sbGluZyh0cnVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBTY3JvbGxpbmcgaG9yaXpvbnRhbGx5IHdoZW4gY2xpY2tpbmcgb24gdGhlIHNsaWRlciBjb250cm9scy5cclxuXHRcdCAqL1xyXG5cdFx0JCgnLmZwLXNlY3Rpb24nKS5vbignY2xpY2sgdG91Y2hzdGFydCcsICcuZnAtY29udHJvbEFycm93JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdmcC1wcmV2JykpIHtcclxuXHRcdFx0XHQkLmZuLmZ1bGxwYWdlLm1vdmVTbGlkZUxlZnQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmZuLmZ1bGxwYWdlLm1vdmVTbGlkZVJpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBTY3JvbGxzIGhvcml6b250YWwgc2xpZGVycy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBsYW5kc2NhcGVTY3JvbGwoc2xpZGVzLCBkZXN0aW55KXtcclxuXHRcdFx0dmFyIGRlc3RpbnlQb3MgPSBkZXN0aW55LnBvc2l0aW9uKCk7XHJcblx0XHRcdHZhciBzbGlkZXNDb250YWluZXIgPSBzbGlkZXMuZmluZCgnLmZwLXNsaWRlc0NvbnRhaW5lcicpLnBhcmVudCgpO1xyXG5cdFx0XHR2YXIgc2xpZGVJbmRleCA9IGRlc3RpbnkuaW5kZXgoKTtcclxuXHRcdFx0dmFyIHNlY3Rpb24gPSBzbGlkZXMuY2xvc2VzdCgnLmZwLXNlY3Rpb24nKTtcclxuXHRcdFx0dmFyIHNlY3Rpb25JbmRleCA9IHNlY3Rpb24uaW5kZXgoJy5mcC1zZWN0aW9uJyk7XHJcblx0XHRcdHZhciBhbmNob3JMaW5rID0gc2VjdGlvbi5kYXRhKCdhbmNob3InKTtcclxuXHRcdFx0dmFyIHNsaWRlc05hdiA9IHNlY3Rpb24uZmluZCgnLmZwLXNsaWRlc05hdicpO1xyXG5cdFx0XHR2YXIgc2xpZGVBbmNob3IgPSBkZXN0aW55LmRhdGEoJ2FuY2hvcicpO1xyXG5cclxuXHRcdFx0Ly9jYWNoaW5nIHRoZSB2YWx1ZSBvZiBpc1Jlc2l6aW5nIGF0IHRoZSBtb21tZW50IHRoZSBmdW5jdGlvbiBpcyBjYWxsZWRcclxuXHRcdFx0Ly9iZWNhdXNlIGl0IHdpbGwgYmUgY2hlY2tlZCBsYXRlciBpbnNpZGUgYSBzZXRUaW1lb3V0IGFuZCB0aGUgdmFsdWUgbWlnaHQgY2hhbmdlXHJcblx0XHRcdHZhciBsb2NhbElzUmVzaXppbmcgPSBpc1Jlc2l6aW5nO1xyXG5cclxuXHRcdFx0aWYob3B0aW9ucy5vblNsaWRlTGVhdmUpe1xyXG5cdFx0XHRcdHZhciBwcmV2U2xpZGUgPSBzZWN0aW9uLmZpbmQoJy5mcC1zbGlkZS5hY3RpdmUnKTtcclxuXHRcdFx0XHR2YXIgcHJldlNsaWRlSW5kZXggPSBwcmV2U2xpZGUuaW5kZXgoKTtcclxuXHRcdFx0XHR2YXIgeE1vdmVtZW50ID0gZ2V0WG1vdmVtZW50KHByZXZTbGlkZUluZGV4LCBzbGlkZUluZGV4KTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGUgc2l0ZSBpcyBub3QganVzdCByZXNpemluZyBhbmQgcmVhZGp1c3RpbmcgdGhlIHNsaWRlc1xyXG5cdFx0XHRcdGlmKCFsb2NhbElzUmVzaXppbmcgJiYgeE1vdmVtZW50IT09J25vbmUnKXtcclxuXHRcdFx0XHRcdCQuaXNGdW5jdGlvbiggb3B0aW9ucy5vblNsaWRlTGVhdmUgKSAmJiBvcHRpb25zLm9uU2xpZGVMZWF2ZS5jYWxsKCBwcmV2U2xpZGUsIGFuY2hvckxpbmssIChzZWN0aW9uSW5kZXggKyAxKSwgcHJldlNsaWRlSW5kZXgsIHhNb3ZlbWVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkZXN0aW55LmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcblxyXG5cdFx0XHRpZih0eXBlb2Ygc2xpZGVBbmNob3IgPT09ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRzbGlkZUFuY2hvciA9IHNsaWRlSW5kZXg7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCFvcHRpb25zLmxvb3BIb3Jpem9udGFsICYmIG9wdGlvbnMuY29udHJvbEFycm93cyl7XHJcblx0XHRcdFx0Ly9oaWRkaW5nIGl0IGZvciB0aGUgZmlzdCBzbGlkZSwgc2hvd2luZyBmb3IgdGhlIHJlc3RcclxuXHRcdFx0XHRzZWN0aW9uLmZpbmQoJy5mcC1jb250cm9sQXJyb3cuZnAtcHJldicpLnRvZ2dsZShzbGlkZUluZGV4IT0wKTtcclxuXHJcblx0XHRcdFx0Ly9oaWRkaW5nIGl0IGZvciB0aGUgbGFzdCBzbGlkZSwgc2hvd2luZyBmb3IgdGhlIHJlc3RcclxuXHRcdFx0XHRzZWN0aW9uLmZpbmQoJy5mcC1jb250cm9sQXJyb3cuZnAtbmV4dCcpLnRvZ2dsZSghZGVzdGlueS5pcygnOmxhc3QtY2hpbGQnKSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vb25seSBjaGFuZ2luZyB0aGUgVVJMIGlmIHRoZSBzbGlkZXMgYXJlIGluIHRoZSBjdXJyZW50IHNlY3Rpb24gKG5vdCBmb3IgcmVzaXplIHJlLWFkanVzdGluZylcclxuXHRcdFx0aWYoc2VjdGlvbi5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG5cdFx0XHRcdHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgYWZ0ZXJTbGlkZUxvYWRzID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQvL2lmIHRoZSBzaXRlIGlzIG5vdCBqdXN0IHJlc2l6aW5nIGFuZCByZWFkanVzdGluZyB0aGUgc2xpZGVzXHJcblx0XHRcdFx0aWYoIWxvY2FsSXNSZXNpemluZyl7XHJcblx0XHRcdFx0XHQkLmlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJTbGlkZUxvYWQgKSAmJiBvcHRpb25zLmFmdGVyU2xpZGVMb2FkLmNhbGwoIGRlc3RpbnksIGFuY2hvckxpbmssIChzZWN0aW9uSW5kZXggKyAxKSwgc2xpZGVBbmNob3IsIHNsaWRlSW5kZXgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2xldHRpbmcgdGhlbSBzbGlkZSBhZ2FpblxyXG5cdFx0XHRcdHNsaWRlTW92aW5nID0gZmFsc2U7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpZihvcHRpb25zLmNzczMpe1xyXG5cdFx0XHRcdHZhciB0cmFuc2xhdGUzZCA9ICd0cmFuc2xhdGUzZCgtJyArIGRlc3RpbnlQb3MubGVmdCArICdweCwgMHB4LCAwcHgpJztcclxuXHJcblx0XHRcdFx0YWRkQW5pbWF0aW9uKHNsaWRlcy5maW5kKCcuZnAtc2xpZGVzQ29udGFpbmVyJyksIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQ+MCkuY3NzKGdldFRyYW5zZm9ybXModHJhbnNsYXRlM2QpKTtcclxuXHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0YWZ0ZXJTbGlkZUxvYWRzKCk7XHJcblx0XHRcdFx0fSwgb3B0aW9ucy5zY3JvbGxpbmdTcGVlZCwgb3B0aW9ucy5lYXNpbmcpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRzbGlkZXNDb250YWluZXIuYW5pbWF0ZSh7XHJcblx0XHRcdFx0XHRzY3JvbGxMZWZ0IDogZGVzdGlueVBvcy5sZWZ0XHJcblx0XHRcdFx0fSwgb3B0aW9ucy5zY3JvbGxpbmdTcGVlZCwgb3B0aW9ucy5lYXNpbmcsIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdGFmdGVyU2xpZGVMb2FkcygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzbGlkZXNOYXYuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0c2xpZGVzTmF2LmZpbmQoJ2xpJykuZXEoc2xpZGVJbmRleCkuZmluZCgnYScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdH1cclxuXHJcblx0ICAgIC8vd2hlbiByZXNpemluZyB0aGUgc2l0ZSwgd2UgYWRqdXN0IHRoZSBoZWlnaHRzIG9mIHRoZSBzZWN0aW9ucywgc2xpbVNjcm9sbC4uLlxyXG5cdCAgICAkKHdpbmRvdykucmVzaXplKHJlc2l6ZUhhbmRsZXIpO1xyXG5cclxuXHQgICAgdmFyIHByZXZpb3VzSGVpZ2h0ID0gd2luZG93c0hlaWdodDtcclxuXHQgICAgdmFyIHJlc2l6ZUlkO1xyXG5cdCAgICBmdW5jdGlvbiByZXNpemVIYW5kbGVyKCl7XHJcblx0ICAgIFx0Ly9jaGVja2luZyBpZiBpdCBuZWVkcyB0byBnZXQgcmVzcG9uc2l2ZVxyXG5cdCAgICBcdHJlc3BvbnNpdmUoKTtcclxuXHJcblx0ICAgIFx0Ly8gcmVidWlsZCBpbW1lZGlhdGVseSBvbiB0b3VjaCBkZXZpY2VzXHJcblx0XHRcdGlmIChpc1RvdWNoRGV2aWNlKSB7XHJcblxyXG5cdFx0XHRcdC8vaWYgdGhlIGtleWJvYXJkIGlzIHZpc2libGVcclxuXHRcdFx0XHRpZiAoJChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5hdHRyKCd0eXBlJykgIT09ICd0ZXh0Jykge1xyXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly9tYWtpbmcgc3VyZSB0aGUgY2hhbmdlIGluIHRoZSB2aWV3cG9ydCBzaXplIGlzIGVub3VnaCB0byBmb3JjZSBhIHJlYnVpbGQuICgyMCAlIG9mIHRoZSB3aW5kb3cgdG8gYXZvaWQgcHJvYmxlbXMgd2hlbiBoaWRkaW5nIHNjcm9sbCBiYXJzKVxyXG5cdFx0XHRcdFx0aWYoIE1hdGguYWJzKGN1cnJlbnRIZWlnaHQgLSBwcmV2aW91c0hlaWdodCkgPiAoMjAgKiBNYXRoLm1heChwcmV2aW91c0hlaWdodCwgY3VycmVudEhlaWdodCkgLyAxMDApICl7XHJcblx0XHRcdCAgICAgICAgXHQkLmZuLmZ1bGxwYWdlLnJlQnVpbGQodHJ1ZSk7XHJcblx0XHRcdCAgICAgICAgXHRwcmV2aW91c0hlaWdodCA9IGN1cnJlbnRIZWlnaHQ7XHJcblx0XHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB9XHJcblx0ICAgICAgXHR9ZWxzZXtcclxuXHQgICAgICBcdFx0Ly9pbiBvcmRlciB0byBjYWxsIHRoZSBmdW5jdGlvbnMgb25seSB3aGVuIHRoZSByZXNpemUgaXMgZmluaXNoZWRcclxuXHQgICAgXHRcdC8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80Mjk4NjEyL2pxdWVyeS1ob3ctdG8tY2FsbC1yZXNpemUtZXZlbnQtb25seS1vbmNlLWl0cy1maW5pc2hlZC1yZXNpemluZ1xyXG5cdCAgICAgIFx0XHRjbGVhclRpbWVvdXQocmVzaXplSWQpO1xyXG5cclxuXHQgICAgICAgIFx0cmVzaXplSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgICBcdFx0JC5mbi5mdWxscGFnZS5yZUJ1aWxkKHRydWUpO1xyXG5cdCAgICAgICAgXHR9LCA1MDApO1xyXG5cdCAgICAgIFx0fVxyXG5cdCAgICB9XHJcblxyXG5cdCAgICAvKipcclxuXHQgICAgKiBDaGVja3MgaWYgdGhlIHNpdGUgbmVlZHMgdG8gZ2V0IHJlc3BvbnNpdmUgYW5kIGRpc2FibGVzIGF1dG9TY3JvbGxpbmcgaWYgc28uXHJcblx0ICAgICogQSBjbGFzcyBgZnAtcmVzcG9uc2l2ZWAgaXMgYWRkZWQgdG8gdGhlIHBsdWdpbidzIGNvbnRhaW5lciBpbiBjYXNlIHRoZSB1c2VyIHdhbnRzIHRvIHVzZSBpdCBmb3IgaGlzIG93biByZXNwb25zaXZlIENTUy5cclxuXHQgICAgKi9cclxuXHQgICAgZnVuY3Rpb24gcmVzcG9uc2l2ZSgpe1xyXG5cdCAgICBcdGlmKG9wdGlvbnMucmVzcG9uc2l2ZSl7XHJcblx0ICAgIFx0XHR2YXIgaXNSZXNwb25zaXZlID0gY29udGFpbmVyLmhhc0NsYXNzKCdmcC1yZXNwb25zaXZlJyk7XHJcblx0ICAgIFx0XHRpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCBvcHRpb25zLnJlc3BvbnNpdmUgKXtcclxuXHQgICAgXHRcdFx0aWYoIWlzUmVzcG9uc2l2ZSl7XHJcblx0ICAgIFx0XHRcdFx0JC5mbi5mdWxscGFnZS5zZXRBdXRvU2Nyb2xsaW5nKGZhbHNlLCAnaW50ZXJuYWwnKTtcclxuXHQgICAgXHRcdFx0XHQkKCcjZnAtbmF2JykuaGlkZSgpO1xyXG5cdFx0XHRcdFx0XHRjb250YWluZXIuYWRkQ2xhc3MoJ2ZwLXJlc3BvbnNpdmUnKTtcclxuXHQgICAgXHRcdFx0fVxyXG5cdCAgICBcdFx0fWVsc2UgaWYoaXNSZXNwb25zaXZlKXtcclxuXHQgICAgXHRcdFx0JC5mbi5mdWxscGFnZS5zZXRBdXRvU2Nyb2xsaW5nKG9yaWdpbmFscy5hdXRvU2Nyb2xsaW5nLCAnaW50ZXJuYWwnKTtcclxuXHQgICAgXHRcdFx0JCgnI2ZwLW5hdicpLnNob3coKTtcclxuXHRcdFx0XHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnZnAtcmVzcG9uc2l2ZScpO1xyXG5cdCAgICBcdFx0fVxyXG5cdCAgICBcdH1cclxuXHQgICAgfVxyXG5cclxuXHQgICAgLyoqXHJcblx0XHQqIEFkZHMgdHJhbnNpdGlvbiBhbmltYXRpb25zIGZvciB0aGUgZ2l2ZW4gZWxlbWVudFxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGFkZEFuaW1hdGlvbihlbGVtZW50KXtcclxuXHRcdFx0dmFyIHRyYW5zaXRpb24gPSAnYWxsICcgKyBvcHRpb25zLnNjcm9sbGluZ1NwZWVkICsgJ21zICcgKyBvcHRpb25zLmVhc2luZ2NzczM7XHJcblxyXG5cdFx0XHRlbGVtZW50LnJlbW92ZUNsYXNzKCdmcC1ub3RyYW5zaXRpb24nKTtcclxuXHRcdFx0cmV0dXJuIGVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHQnLXdlYmtpdC10cmFuc2l0aW9uJzogdHJhbnNpdGlvbixcclxuICAgICBcdFx0XHQndHJhbnNpdGlvbic6IHRyYW5zaXRpb25cclxuICAgICAgIFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogUmVtb3ZlIHRyYW5zaXRpb24gYW5pbWF0aW9ucyBmb3IgdGhlIGdpdmVuIGVsZW1lbnRcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiByZW1vdmVBbmltYXRpb24oZWxlbWVudCl7XHJcblx0XHRcdHJldHVybiBlbGVtZW50LmFkZENsYXNzKCdmcC1ub3RyYW5zaXRpb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJlc2l6aW5nIG9mIHRoZSBmb250IHNpemUgZGVwZW5kaW5nIG9uIHRoZSB3aW5kb3cgc2l6ZSBhcyB3ZWxsIGFzIHNvbWUgb2YgdGhlIGltYWdlcyBvbiB0aGUgc2l0ZS5cclxuXHRcdCAqL1xyXG5cdFx0ZnVuY3Rpb24gcmVzaXplTWUoZGlzcGxheUhlaWdodCwgZGlzcGxheVdpZHRoKSB7XHJcblx0XHRcdC8vU3RhbmRhcmQgZGltZW5zaW9ucywgZm9yIHdoaWNoIHRoZSBib2R5IGZvbnQgc2l6ZSBpcyBjb3JyZWN0XHJcblx0XHRcdHZhciBwcmVmZXJyZWRIZWlnaHQgPSA4MjU7XHJcblx0XHRcdHZhciBwcmVmZXJyZWRXaWR0aCA9IDkwMDtcclxuXHJcblx0XHRcdGlmIChkaXNwbGF5SGVpZ2h0IDwgcHJlZmVycmVkSGVpZ2h0IHx8IGRpc3BsYXlXaWR0aCA8IHByZWZlcnJlZFdpZHRoKSB7XHJcblx0XHRcdFx0dmFyIGhlaWdodFBlcmNlbnRhZ2UgPSAoZGlzcGxheUhlaWdodCAqIDEwMCkgLyBwcmVmZXJyZWRIZWlnaHQ7XHJcblx0XHRcdFx0dmFyIHdpZHRoUGVyY2VudGFnZSA9IChkaXNwbGF5V2lkdGggKiAxMDApIC8gcHJlZmVycmVkV2lkdGg7XHJcblx0XHRcdFx0dmFyIHBlcmNlbnRhZ2UgPSBNYXRoLm1pbihoZWlnaHRQZXJjZW50YWdlLCB3aWR0aFBlcmNlbnRhZ2UpO1xyXG5cdFx0XHRcdHZhciBuZXdGb250U2l6ZSA9IHBlcmNlbnRhZ2UudG9GaXhlZCgyKTtcclxuXHJcblx0XHRcdFx0JChcImJvZHlcIikuY3NzKFwiZm9udC1zaXplXCIsIG5ld0ZvbnRTaXplICsgJyUnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKFwiYm9keVwiKS5jc3MoXCJmb250LXNpemVcIiwgJzEwMCUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWN0aXZhdGluZyB0aGUgd2Vic2l0ZSBuYXZpZ2F0aW9uIGRvdHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBzbGlkZSBuYW1lLlxyXG5cdFx0ICovXHJcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZU5hdkRvdHMobmFtZSwgc2VjdGlvbkluZGV4KXtcclxuXHRcdFx0aWYob3B0aW9ucy5uYXZpZ2F0aW9uKXtcclxuXHRcdFx0XHQkKCcjZnAtbmF2JykuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHRpZihuYW1lKXtcclxuXHRcdFx0XHRcdCQoJyNmcC1uYXYnKS5maW5kKCdhW2hyZWY9XCIjJyArIG5hbWUgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0JCgnI2ZwLW5hdicpLmZpbmQoJ2xpJykuZXEoc2VjdGlvbkluZGV4KS5maW5kKCdhJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWN0aXZhdGluZyB0aGUgd2Vic2l0ZSBtYWluIG1lbnUgZWxlbWVudHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBzbGlkZSBuYW1lLlxyXG5cdFx0ICovXHJcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZU1lbnVFbGVtZW50KG5hbWUpe1xyXG5cdFx0XHRpZihvcHRpb25zLm1lbnUpe1xyXG5cdFx0XHRcdCQob3B0aW9ucy5tZW51KS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdCQob3B0aW9ucy5tZW51KS5maW5kKCdbZGF0YS1tZW51YW5jaG9yPVwiJytuYW1lKydcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZU1lbnVBbmROYXYoYW5jaG9yLCBpbmRleCl7XHJcblx0XHRcdGFjdGl2YXRlTWVudUVsZW1lbnQoYW5jaG9yKTtcclxuXHRcdFx0YWN0aXZhdGVOYXZEb3RzKGFuY2hvciwgaW5kZXgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBSZXR1cm4gYSBib29sZWFuIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQgaXMgYXQgdGhlIGVuZCBvciBhdCB0aGUgc3RhcnQgb2YgdGhlIHNjcm9sbGluZ1xyXG5cdFx0KiBkZXBlbmRpbmcgb24gdGhlIGdpdmVuIHR5cGUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gaXNTY3JvbGxlZCh0eXBlLCBzY3JvbGxhYmxlKXtcclxuXHRcdFx0aWYodHlwZSA9PT0gJ3RvcCcpe1xyXG5cdFx0XHRcdHJldHVybiAhc2Nyb2xsYWJsZS5zY3JvbGxUb3AoKTtcclxuXHRcdFx0fWVsc2UgaWYodHlwZSA9PT0gJ2JvdHRvbScpe1xyXG5cdFx0XHRcdHJldHVybiBzY3JvbGxhYmxlLnNjcm9sbFRvcCgpICsgMSArIHNjcm9sbGFibGUuaW5uZXJIZWlnaHQoKSA+PSBzY3JvbGxhYmxlWzBdLnNjcm9sbEhlaWdodDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBSZXR1bnMgYHVwYCBvciBgZG93bmAgZGVwZW5kaW5nIG9uIHRoZSBzY3JvbGxpbmcgbW92ZW1lbnQgdG8gcmVhY2ggaXRzIGRlc3RpbmF0aW9uXHJcblx0XHQqIGZyb20gdGhlIGN1cnJlbnQgc2VjdGlvbi5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRZbW92ZW1lbnQoZGVzdGlueSl7XHJcblx0XHRcdHZhciBmcm9tSW5kZXggPSAkKCcuZnAtc2VjdGlvbi5hY3RpdmUnKS5pbmRleCgnLmZwLXNlY3Rpb24nKTtcclxuXHRcdFx0dmFyIHRvSW5kZXggPSBkZXN0aW55LmluZGV4KCcuZnAtc2VjdGlvbicpO1xyXG5cdFx0XHRpZiggZnJvbUluZGV4ID09IHRvSW5kZXgpe1xyXG5cdFx0XHRcdHJldHVybiAnbm9uZSc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoZnJvbUluZGV4ID4gdG9JbmRleCl7XHJcblx0XHRcdFx0cmV0dXJuICd1cCc7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICdkb3duJztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogUmV0dW5zIGByaWdodGAgb3IgYGxlZnRgIGRlcGVuZGluZyBvbiB0aGUgc2Nyb2xsaW5nIG1vdmVtZW50IHRvIHJlYWNoIGl0cyBkZXN0aW5hdGlvblxyXG5cdFx0KiBmcm9tIHRoZSBjdXJyZW50IHNsaWRlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGdldFhtb3ZlbWVudChmcm9tSW5kZXgsIHRvSW5kZXgpe1xyXG5cdFx0XHRpZiggZnJvbUluZGV4ID09IHRvSW5kZXgpe1xyXG5cdFx0XHRcdHJldHVybiAnbm9uZSc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoZnJvbUluZGV4ID4gdG9JbmRleCl7XHJcblx0XHRcdFx0cmV0dXJuICdsZWZ0JztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gJ3JpZ2h0JztcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlU2xpbVNjcm9sbGluZyhlbGVtZW50KXtcclxuXHRcdFx0Ly9uZWVkZWQgdG8gbWFrZSBgc2Nyb2xsSGVpZ2h0YCB3b3JrIHVuZGVyIE9wZXJhIDEyXHJcblx0XHRcdGVsZW1lbnQuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuXHJcblx0XHRcdC8vaW4gY2FzZSBlbGVtZW50IGlzIGEgc2xpZGVcclxuXHRcdFx0dmFyIHNlY3Rpb24gPSBlbGVtZW50LmNsb3Nlc3QoJy5mcC1zZWN0aW9uJyk7XHJcblx0XHRcdHZhciBzY3JvbGxhYmxlID0gZWxlbWVudC5maW5kKCcuZnAtc2Nyb2xsYWJsZScpO1xyXG5cdFx0XHR2YXIgY29udGVudEhlaWdodDtcclxuXHJcblx0XHRcdC8vaWYgdGhlcmUgd2FzIHNjcm9sbCwgdGhlIGNvbnRlbnRIZWlnaHQgd2lsbCBiZSB0aGUgb25lIGluIHRoZSBzY3JvbGxhYmxlIHNlY3Rpb25cclxuXHRcdFx0aWYoc2Nyb2xsYWJsZS5sZW5ndGgpe1xyXG5cdFx0XHRcdGNvbnRlbnRIZWlnaHQgPSBzY3JvbGxhYmxlLmdldCgwKS5zY3JvbGxIZWlnaHQ7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGNvbnRlbnRIZWlnaHQgPSBlbGVtZW50LmdldCgwKS5zY3JvbGxIZWlnaHQ7XHJcblx0XHRcdFx0aWYob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKXtcclxuXHRcdFx0XHRcdGNvbnRlbnRIZWlnaHQgPSBlbGVtZW50LmZpbmQoJy5mcC10YWJsZUNlbGwnKS5nZXQoMCkuc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHNjcm9sbEhlaWdodCA9IHdpbmRvd3NIZWlnaHQgLSBwYXJzZUludChzZWN0aW9uLmNzcygncGFkZGluZy1ib3R0b20nKSkgLSBwYXJzZUludChzZWN0aW9uLmNzcygncGFkZGluZy10b3AnKSk7XHJcblxyXG5cdFx0XHQvL25lZWRzIHNjcm9sbD9cclxuXHRcdFx0aWYgKCBjb250ZW50SGVpZ2h0ID4gc2Nyb2xsSGVpZ2h0KSB7XHJcblx0XHRcdFx0Ly93YXMgdGhlcmUgYWxyZWFkeSBhbiBzY3JvbGwgPyBVcGRhdGluZyBpdFxyXG5cdFx0XHRcdGlmKHNjcm9sbGFibGUubGVuZ3RoKXtcclxuXHRcdFx0XHRcdHNjcm9sbGFibGUuY3NzKCdoZWlnaHQnLCBzY3JvbGxIZWlnaHQgKyAncHgnKS5wYXJlbnQoKS5jc3MoJ2hlaWdodCcsIHNjcm9sbEhlaWdodCArICdweCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2NyZWF0aW5nIHRoZSBzY3JvbGxpbmdcclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0aWYob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKXtcclxuXHRcdFx0XHRcdFx0ZWxlbWVudC5maW5kKCcuZnAtdGFibGVDZWxsJykud3JhcElubmVyKCc8ZGl2IGNsYXNzPVwiZnAtc2Nyb2xsYWJsZVwiIC8+Jyk7XHJcblx0XHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdFx0ZWxlbWVudC53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJmcC1zY3JvbGxhYmxlXCIgLz4nKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRlbGVtZW50LmZpbmQoJy5mcC1zY3JvbGxhYmxlJykuc2xpbVNjcm9sbCh7XHJcblx0XHRcdFx0XHRcdGFsbG93UGFnZVNjcm9sbDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiBzY3JvbGxIZWlnaHQgKyAncHgnLFxyXG5cdFx0XHRcdFx0XHRzaXplOiAnMTBweCcsXHJcblx0XHRcdFx0XHRcdGFsd2F5c1Zpc2libGU6IHRydWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9yZW1vdmluZyB0aGUgc2Nyb2xsaW5nIHdoZW4gaXQgaXMgbm90IG5lY2Vzc2FyeSBhbnltb3JlXHJcblx0XHRcdGVsc2V7XHJcblx0XHRcdFx0cmVtb3ZlU2xpbVNjcm9sbChlbGVtZW50KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly91bmRvXHJcblx0XHRcdGVsZW1lbnQuY3NzKCdvdmVyZmxvdycsICcnKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByZW1vdmVTbGltU2Nyb2xsKGVsZW1lbnQpe1xyXG5cdFx0XHRlbGVtZW50LmZpbmQoJy5mcC1zY3JvbGxhYmxlJykuY2hpbGRyZW4oKS5maXJzdCgpLnVud3JhcCgpLnVud3JhcCgpO1xyXG5cdFx0XHRlbGVtZW50LmZpbmQoJy5zbGltU2Nyb2xsQmFyJykucmVtb3ZlKCk7XHJcblx0XHRcdGVsZW1lbnQuZmluZCgnLnNsaW1TY3JvbGxSYWlsJykucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gYWRkVGFibGVDbGFzcyhlbGVtZW50KXtcclxuXHRcdFx0ZWxlbWVudC5hZGRDbGFzcygnZnAtdGFibGUnKS53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJmcC10YWJsZUNlbGxcIiBzdHlsZT1cImhlaWdodDonICsgZ2V0VGFibGVIZWlnaHQoZWxlbWVudCkgKyAncHg7XCIgLz4nKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYWJsZUhlaWdodChlbGVtZW50KXtcclxuXHRcdFx0dmFyIHNlY3Rpb25IZWlnaHQgPSB3aW5kb3dzSGVpZ2h0O1xyXG5cclxuXHRcdFx0aWYob3B0aW9ucy5wYWRkaW5nVG9wIHx8IG9wdGlvbnMucGFkZGluZ0JvdHRvbSl7XHJcblx0XHRcdFx0dmFyIHNlY3Rpb24gPSBlbGVtZW50O1xyXG5cdFx0XHRcdGlmKCFzZWN0aW9uLmhhc0NsYXNzKCdmcC1zZWN0aW9uJykpe1xyXG5cdFx0XHRcdFx0c2VjdGlvbiA9IGVsZW1lbnQuY2xvc2VzdCgnLmZwLXNlY3Rpb24nKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBwYWRkaW5ncyA9IHBhcnNlSW50KHNlY3Rpb24uY3NzKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlSW50KHNlY3Rpb24uY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcclxuXHRcdFx0XHRzZWN0aW9uSGVpZ2h0ID0gKHdpbmRvd3NIZWlnaHQgLSBwYWRkaW5ncyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBzZWN0aW9uSGVpZ2h0O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBBZGRzIGEgY3NzMyB0cmFuc2Zvcm0gcHJvcGVydHkgdG8gdGhlIGNvbnRhaW5lciBjbGFzcyB3aXRoIG9yIHdpdGhvdXQgYW5pbWF0aW9uIGRlcGVuZGluZyBvbiB0aGUgYW5pbWF0ZWQgcGFyYW0uXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gdHJhbnNmb3JtQ29udGFpbmVyKHRyYW5zbGF0ZTNkLCBhbmltYXRlZCl7XHJcblx0XHRcdGlmKGFuaW1hdGVkKXtcclxuXHRcdFx0XHRhZGRBbmltYXRpb24oY29udGFpbmVyKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmVtb3ZlQW5pbWF0aW9uKGNvbnRhaW5lcik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnRhaW5lci5jc3MoZ2V0VHJhbnNmb3Jtcyh0cmFuc2xhdGUzZCkpO1xyXG5cclxuXHRcdFx0Ly9zeW5jcm9ub3VzbHkgcmVtb3ZpbmcgdGhlIGNsYXNzIGFmdGVyIHRoZSBhbmltYXRpb24gaGFzIGJlZW4gYXBwbGllZC5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcygnZnAtbm90cmFuc2l0aW9uJyk7XHJcblx0XHRcdH0sMTApO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCogU2Nyb2xscyB0byB0aGUgZ2l2ZW4gc2VjdGlvbiBhbmQgc2xpZGVcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzY3JvbGxQYWdlQW5kU2xpZGUoZGVzdGlueSwgc2xpZGUpe1xyXG5cdFx0XHR2YXIgc2VjdGlvbjtcclxuXHJcblx0XHRcdGlmICh0eXBlb2Ygc2xpZGUgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdCAgICBzbGlkZSA9IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKGlzTmFOKGRlc3RpbnkpKXtcclxuXHRcdFx0XHRzZWN0aW9uID0gJCgnW2RhdGEtYW5jaG9yPVwiJytkZXN0aW55KydcIl0nKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0c2VjdGlvbiA9ICQoJy5mcC1zZWN0aW9uJykuZXEoIChkZXN0aW55IC0xKSApO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly93ZSBuZWVkIHRvIHNjcm9sbCB0byB0aGUgc2VjdGlvbiBhbmQgdGhlbiB0byB0aGUgc2xpZGVcclxuXHRcdFx0aWYgKGRlc3RpbnkgIT09IGxhc3RTY3JvbGxlZERlc3RpbnkgJiYgIXNlY3Rpb24uaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuXHRcdFx0XHRzY3JvbGxQYWdlKHNlY3Rpb24sIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRzY3JvbGxTbGlkZXIoc2VjdGlvbiwgc2xpZGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgd2Ugd2VyZSBhbHJlYWR5IGluIHRoZSBzZWN0aW9uXHJcblx0XHRcdGVsc2V7XHJcblx0XHRcdFx0c2Nyb2xsU2xpZGVyKHNlY3Rpb24sIHNsaWRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBTY3JvbGxzIHRoZSBzbGlkZXIgdG8gdGhlIGdpdmVuIHNsaWRlIGRlc3RpbmF0aW9uIGZvciB0aGUgZ2l2ZW4gc2VjdGlvblxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHNjcm9sbFNsaWRlcihzZWN0aW9uLCBzbGlkZSl7XHJcblx0XHRcdGlmKHR5cGVvZiBzbGlkZSAhPSAndW5kZWZpbmVkJyl7XHJcblx0XHRcdFx0dmFyIHNsaWRlcyA9IHNlY3Rpb24uZmluZCgnLmZwLXNsaWRlcycpO1xyXG5cdFx0XHRcdHZhciBkZXN0aW55ID0gIHNsaWRlcy5maW5kKCdbZGF0YS1hbmNob3I9XCInK3NsaWRlKydcIl0nKTtcclxuXHJcblx0XHRcdFx0aWYoIWRlc3RpbnkubGVuZ3RoKXtcclxuXHRcdFx0XHRcdGRlc3RpbnkgPSBzbGlkZXMuZmluZCgnLmZwLXNsaWRlJykuZXEoc2xpZGUpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYoZGVzdGlueS5sZW5ndGgpe1xyXG5cdFx0XHRcdFx0bGFuZHNjYXBlU2Nyb2xsKHNsaWRlcywgZGVzdGlueSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIENyZWF0ZXMgYSBsYW5kc2NhcGUgbmF2aWdhdGlvbiBiYXIgd2l0aCBkb3RzIGZvciBob3Jpem9udGFsIHNsaWRlcnMuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gYWRkU2xpZGVzTmF2aWdhdGlvbihzZWN0aW9uLCBudW1TbGlkZXMpe1xyXG5cdFx0XHRzZWN0aW9uLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZwLXNsaWRlc05hdlwiPjx1bD48L3VsPjwvZGl2PicpO1xyXG5cdFx0XHR2YXIgbmF2ID0gc2VjdGlvbi5maW5kKCcuZnAtc2xpZGVzTmF2Jyk7XHJcblxyXG5cdFx0XHQvL3RvcCBvciBib3R0b21cclxuXHRcdFx0bmF2LmFkZENsYXNzKG9wdGlvbnMuc2xpZGVzTmF2UG9zaXRpb24pO1xyXG5cclxuXHRcdFx0Zm9yKHZhciBpPTA7IGk8IG51bVNsaWRlczsgaSsrKXtcclxuXHRcdFx0XHRuYXYuZmluZCgndWwnKS5hcHBlbmQoJzxsaT48YSBocmVmPVwiI1wiPjxzcGFuPjwvc3Bhbj48L2E+PC9saT4nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9jZW50ZXJpbmcgaXRcclxuXHRcdFx0bmF2LmNzcygnbWFyZ2luLWxlZnQnLCAnLScgKyAobmF2LndpZHRoKCkvMikgKyAncHgnKTtcclxuXHJcblx0XHRcdG5hdi5maW5kKCdsaScpLmZpcnN0KCkuZmluZCgnYScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSB3ZWJzaXRlIGRlcGVuZGluZyBvbiB0aGUgYWN0aXZlIHNlY3Rpb24vc2xpZGUuXHJcblx0XHQqIEl0IGNoYW5nZXMgdGhlIFVSTCBoYXNoIHdoZW4gbmVlZGVkIGFuZCB1cGRhdGVzIHRoZSBib2R5IGNsYXNzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpe1xyXG5cdFx0XHR2YXIgc2VjdGlvbkhhc2ggPSAnJztcclxuXHJcblx0XHRcdGlmKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpe1xyXG5cclxuXHRcdFx0XHQvL2lzbid0IGl0IHRoZSBmaXJzdCBzbGlkZT9cclxuXHRcdFx0XHRpZihzbGlkZUluZGV4KXtcclxuXHRcdFx0XHRcdGlmKHR5cGVvZiBhbmNob3JMaW5rICE9PSAndW5kZWZpbmVkJyl7XHJcblx0XHRcdFx0XHRcdHNlY3Rpb25IYXNoID0gYW5jaG9yTGluaztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvL3NsaWRlIHdpdGhvdXQgYW5jaG9yIGxpbms/IFdlIHRha2UgdGhlIGluZGV4IGluc3RlYWQuXHJcblx0XHRcdFx0XHRpZih0eXBlb2Ygc2xpZGVBbmNob3IgPT09ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRcdFx0c2xpZGVBbmNob3IgPSBzbGlkZUluZGV4O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGxhc3RTY3JvbGxlZFNsaWRlID0gc2xpZGVBbmNob3I7XHJcblx0XHRcdFx0XHRzZXRVcmxIYXNoKHNlY3Rpb25IYXNoICsgJy8nICsgc2xpZGVBbmNob3IpO1xyXG5cclxuXHRcdFx0XHQvL2ZpcnN0IHNsaWRlIHdvbid0IGhhdmUgc2xpZGUgYW5jaG9yLCBqdXN0IHRoZSBzZWN0aW9uIG9uZVxyXG5cdFx0XHRcdH1lbHNlIGlmKHR5cGVvZiBzbGlkZUluZGV4ICE9PSAndW5kZWZpbmVkJyl7XHJcblx0XHRcdFx0XHRsYXN0U2Nyb2xsZWRTbGlkZSA9IHNsaWRlQW5jaG9yO1xyXG5cdFx0XHRcdFx0c2V0VXJsSGFzaChhbmNob3JMaW5rKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vc2VjdGlvbiB3aXRob3V0IHNsaWRlc1xyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRzZXRVcmxIYXNoKGFuY2hvckxpbmspO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0c2V0Qm9keUNsYXNzKGxvY2F0aW9uLmhhc2gpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYodHlwZW9mIHNsaWRlSW5kZXggIT09ICd1bmRlZmluZWQnKXtcclxuXHRcdFx0XHRcdHNldEJvZHlDbGFzcyhzZWN0aW9uSW5kZXggKyAnLScgKyBzbGlkZUluZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdHNldEJvZHlDbGFzcyhTdHJpbmcoc2VjdGlvbkluZGV4KSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogU2V0cyB0aGUgVVJMIGhhc2guXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0VXJsSGFzaCh1cmwpe1xyXG5cdFx0XHRpZihvcHRpb25zLnJlY29yZEhpc3Rvcnkpe1xyXG5cdFx0XHRcdGxvY2F0aW9uLmhhc2ggPSB1cmw7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdC8vTW9iaWxlIENocm9tZSBkb2Vzbid0IHdvcmsgdGhlIG5vcm1hbCB3YXksIHNvLi4uIGxldHMgdXNlIEhUTUw1IGZvciBwaG9uZXMgOilcclxuXHRcdFx0XHRpZihpc1RvdWNoRGV2aWNlIHx8IGlzVG91Y2gpe1xyXG5cdFx0XHRcdFx0aGlzdG9yeS5yZXBsYWNlU3RhdGUodW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiI1wiICsgdXJsKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHZhciBiYXNlVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXTtcclxuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCBiYXNlVXJsICsgJyMnICsgdXJsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFNldHMgYSBjbGFzcyBmb3IgdGhlIGJvZHkgb2YgdGhlIHBhZ2UgZGVwZW5kaW5nIG9uIHRoZSBhY3RpdmUgc2VjdGlvbiAvIHNsaWRlXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Qm9keUNsYXNzKHRleHQpe1xyXG5cdFx0XHQvL2NoYW5naW5nIHNsYXNoIGZvciBkYXNoIHRvIG1ha2UgaXQgYSB2YWxpZCBDU1Mgc3R5bGVcclxuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSgnLycsICctJykucmVwbGFjZSgnIycsJycpO1xyXG5cclxuXHRcdFx0Ly9yZW1vdmluZyBwcmV2aW91cyBhbmNob3IgY2xhc3Nlc1xyXG5cdFx0XHQkKFwiYm9keVwiKVswXS5jbGFzc05hbWUgPSAkKFwiYm9keVwiKVswXS5jbGFzc05hbWUucmVwbGFjZSgvXFxiXFxzP2ZwLXZpZXdpbmctW15cXHNdK1xcYi9nLCAnJyk7XHJcblxyXG5cdFx0XHQvL2FkZGluZyB0aGUgY3VycmVudCBhbmNob3JcclxuXHRcdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoXCJmcC12aWV3aW5nLVwiICsgdGV4dCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIENoZWNrcyBmb3IgdHJhbnNsYXRlM2Qgc3VwcG9ydFxyXG5cdFx0KiBAcmV0dXJuIGJvb2xlYW5cclxuXHRcdCogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjYxNjcxL2RldGVjdGluZy10cmFuc2Zvcm0tdHJhbnNsYXRlM2Qtc3VwcG9ydFxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHN1cHBvcnQzZCgpIHtcclxuXHRcdFx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxyXG5cdFx0XHRcdGhhczNkLFxyXG5cdFx0XHRcdHRyYW5zZm9ybXMgPSB7XHJcblx0XHRcdFx0XHQnd2Via2l0VHJhbnNmb3JtJzonLXdlYmtpdC10cmFuc2Zvcm0nLFxyXG5cdFx0XHRcdFx0J09UcmFuc2Zvcm0nOictby10cmFuc2Zvcm0nLFxyXG5cdFx0XHRcdFx0J21zVHJhbnNmb3JtJzonLW1zLXRyYW5zZm9ybScsXHJcblx0XHRcdFx0XHQnTW96VHJhbnNmb3JtJzonLW1vei10cmFuc2Zvcm0nLFxyXG5cdFx0XHRcdFx0J3RyYW5zZm9ybSc6J3RyYW5zZm9ybSdcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gQWRkIGl0IHRvIHRoZSBib2R5IHRvIGdldCB0aGUgY29tcHV0ZWQgc3R5bGUuXHJcblx0XHRcdGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVsLCBudWxsKTtcclxuXHJcblx0XHRcdGZvciAodmFyIHQgaW4gdHJhbnNmb3Jtcykge1xyXG5cdFx0XHRcdGlmIChlbC5zdHlsZVt0XSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRlbC5zdHlsZVt0XSA9IFwidHJhbnNsYXRlM2QoMXB4LDFweCwxcHgpXCI7XHJcblx0XHRcdFx0XHRoYXMzZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHRyYW5zZm9ybXNbdF0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gKGhhczNkICE9PSB1bmRlZmluZWQgJiYgaGFzM2QubGVuZ3RoID4gMCAmJiBoYXMzZCAhPT0gXCJub25lXCIpO1xyXG5cdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIFJlbW92ZXMgdGhlIGF1dG8gc2Nyb2xsaW5nIGFjdGlvbiBmaXJlZCBieSB0aGUgbW91c2Ugd2hlZWwgYW5kIHRyYWNrcGFkLlxyXG5cdFx0KiBBZnRlciB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhlIG1vdXNld2hlZWwgYW5kIHRyYWNrcGFkIG1vdmVtZW50cyB3b24ndCBzY3JvbGwgdGhyb3VnaCBzZWN0aW9ucy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiByZW1vdmVNb3VzZVdoZWVsSGFuZGxlcigpe1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBNb3VzZVdoZWVsSGFuZGxlciwgZmFsc2UpOyAvL0lFOSwgQ2hyb21lLCBTYWZhcmksIE9wZXJcclxuXHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7IC8vRmlyZWZveFxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRvY3VtZW50LmRldGFjaEV2ZW50KFwib25tb3VzZXdoZWVsXCIsIE1vdXNlV2hlZWxIYW5kbGVyKTsgLy9JRSA2LzcvOFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBBZGRzIHRoZSBhdXRvIHNjcm9sbGluZyBhY3Rpb24gZm9yIHRoZSBtb3VzZSB3aGVlbCBhbmQgdHJhY2twYWQuXHJcblx0XHQqIEFmdGVyIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgbW91c2V3aGVlbCBhbmQgdHJhY2twYWQgbW92ZW1lbnRzIHdpbGwgc2Nyb2xsIHRocm91Z2ggc2VjdGlvbnNcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBhZGRNb3VzZVdoZWVsSGFuZGxlcigpe1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7IC8vSUU5LCBDaHJvbWUsIFNhZmFyaSwgT3BlclxyXG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBNb3VzZVdoZWVsSGFuZGxlciwgZmFsc2UpOyAvL0ZpcmVmb3hcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ubW91c2V3aGVlbFwiLCBNb3VzZVdoZWVsSGFuZGxlcik7IC8vSUUgNi83LzhcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCogQWRkcyB0aGUgcG9zc2liaWxpdHkgdG8gYXV0byBzY3JvbGwgdGhyb3VnaCBzZWN0aW9ucyBvbiB0b3VjaCBkZXZpY2VzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGFkZFRvdWNoSGFuZGxlcigpe1xyXG5cdFx0XHRpZihpc1RvdWNoRGV2aWNlIHx8IGlzVG91Y2gpe1xyXG5cdFx0XHRcdC8vTWljcm9zb2Z0IHBvaW50ZXJzXHJcblx0XHRcdFx0dmFyIE1TUG9pbnRlciA9IGdldE1TUG9pbnRlcigpO1xyXG5cclxuXHRcdFx0XHQkKGRvY3VtZW50KS5vZmYoJ3RvdWNoc3RhcnQgJyArICBNU1BvaW50ZXIuZG93bikub24oJ3RvdWNoc3RhcnQgJyArIE1TUG9pbnRlci5kb3duLCB0b3VjaFN0YXJ0SGFuZGxlcik7XHJcblx0XHRcdFx0JChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUgJyArIE1TUG9pbnRlci5tb3ZlKS5vbigndG91Y2htb3ZlICcgKyBNU1BvaW50ZXIubW92ZSwgdG91Y2hNb3ZlSGFuZGxlcik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogUmVtb3ZlcyB0aGUgYXV0byBzY3JvbGxpbmcgZm9yIHRvdWNoIGRldmljZXMuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlVG91Y2hIYW5kbGVyKCl7XHJcblx0XHRcdGlmKGlzVG91Y2hEZXZpY2UgfHwgaXNUb3VjaCl7XHJcblx0XHRcdFx0Ly9NaWNyb3NvZnQgcG9pbnRlcnNcclxuXHRcdFx0XHR2YXIgTVNQb2ludGVyID0gZ2V0TVNQb2ludGVyKCk7XHJcblxyXG5cdFx0XHRcdCQoZG9jdW1lbnQpLm9mZigndG91Y2hzdGFydCAnICsgTVNQb2ludGVyLmRvd24pO1xyXG5cdFx0XHRcdCQoZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlICcgKyBNU1BvaW50ZXIubW92ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0LypcclxuXHRcdCogUmV0dXJucyBhbmQgb2JqZWN0IHdpdGggTWljcm9zb2Z0IHBvaW50ZXJzIChmb3IgSUU8MTEgYW5kIGZvciBJRSA+PSAxMSlcclxuXHRcdCogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2RuMzA0ODg2KHY9dnMuODUpLmFzcHhcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRNU1BvaW50ZXIoKXtcclxuXHRcdFx0dmFyIHBvaW50ZXI7XHJcblxyXG5cdFx0XHQvL0lFID49IDExICYgcmVzdCBvZiBicm93c2Vyc1xyXG5cdFx0XHRpZih3aW5kb3cuUG9pbnRlckV2ZW50KXtcclxuXHRcdFx0XHRwb2ludGVyID0geyBkb3duOiBcInBvaW50ZXJkb3duXCIsIG1vdmU6IFwicG9pbnRlcm1vdmVcIn07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vSUUgPCAxMVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdHBvaW50ZXIgPSB7IGRvd246IFwiTVNQb2ludGVyRG93blwiLCBtb3ZlOiBcIk1TUG9pbnRlck1vdmVcIn07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwb2ludGVyO1xyXG5cdFx0fVxyXG5cdFx0LyoqXHJcblx0XHQqIEdldHMgdGhlIHBhZ2VYIGFuZCBwYWdlWSBwcm9wZXJ0aWVzIGRlcGVuZGluZyBvbiB0aGUgYnJvd3Nlci5cclxuXHRcdCogaHR0cHM6Ly9naXRodWIuY29tL2FsdmFyb3RyaWdvL2Z1bGxQYWdlLmpzL2lzc3Vlcy8xOTQjaXNzdWVjb21tZW50LTM0MDY5ODU0XHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0RXZlbnRzUGFnZShlKXtcclxuXHRcdFx0dmFyIGV2ZW50cyA9IFtdO1xyXG5cclxuXHRcdFx0ZXZlbnRzLnkgPSAodHlwZW9mIGUucGFnZVkgIT09ICd1bmRlZmluZWQnICYmIChlLnBhZ2VZIHx8IGUucGFnZVgpID8gZS5wYWdlWSA6IGUudG91Y2hlc1swXS5wYWdlWSk7XHJcblx0XHRcdGV2ZW50cy54ID0gKHR5cGVvZiBlLnBhZ2VYICE9PSAndW5kZWZpbmVkJyAmJiAoZS5wYWdlWSB8fCBlLnBhZ2VYKSA/IGUucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGV2ZW50cztcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaWxlbnRMYW5kc2NhcGVTY3JvbGwoYWN0aXZlU2xpZGUpe1xyXG5cdFx0XHQkLmZuLmZ1bGxwYWdlLnNldFNjcm9sbGluZ1NwZWVkICgwLCAnaW50ZXJuYWwnKTtcclxuXHRcdFx0bGFuZHNjYXBlU2Nyb2xsKGFjdGl2ZVNsaWRlLmNsb3Nlc3QoJy5mcC1zbGlkZXMnKSwgYWN0aXZlU2xpZGUpO1xyXG5cdFx0XHQkLmZuLmZ1bGxwYWdlLnNldFNjcm9sbGluZ1NwZWVkKG9yaWdpbmFscy5zY3JvbGxpbmdTcGVlZCwgJ2ludGVybmFsJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2lsZW50U2Nyb2xsKHRvcCl7XHJcblx0XHRcdGlmKG9wdGlvbnMuc2Nyb2xsQmFyKXtcclxuXHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wKHRvcCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAob3B0aW9ucy5jc3MzKSB7XHJcblx0XHRcdFx0dmFyIHRyYW5zbGF0ZTNkID0gJ3RyYW5zbGF0ZTNkKDBweCwgLScgKyB0b3AgKyAncHgsIDBweCknO1xyXG5cdFx0XHRcdHRyYW5zZm9ybUNvbnRhaW5lcih0cmFuc2xhdGUzZCwgZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGNvbnRhaW5lci5jc3MoXCJ0b3BcIiwgLXRvcCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUcmFuc2Zvcm1zKHRyYW5zbGF0ZTNkKXtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHQnLXdlYmtpdC10cmFuc2Zvcm0nOiB0cmFuc2xhdGUzZCxcclxuXHRcdFx0XHQnLW1vei10cmFuc2Zvcm0nOiB0cmFuc2xhdGUzZCxcclxuXHRcdFx0XHQnLW1zLXRyYW5zZm9ybSc6dHJhbnNsYXRlM2QsXHJcblx0XHRcdFx0J3RyYW5zZm9ybSc6IHRyYW5zbGF0ZTNkXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2V0SXNTY3JvbGxhYmxlKHZhbHVlLCBkaXJlY3Rpb24pe1xyXG5cdFx0XHRzd2l0Y2ggKGRpcmVjdGlvbil7XHJcblx0XHRcdFx0Y2FzZSAndXAnOiBpc1Njcm9sbEFsbG93ZWQudXAgPSB2YWx1ZTsgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnZG93bic6IGlzU2Nyb2xsQWxsb3dlZC5kb3duID0gdmFsdWU7IGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2xlZnQnOiBpc1Njcm9sbEFsbG93ZWQubGVmdCA9IHZhbHVlOyBicmVhaztcclxuXHRcdFx0XHRjYXNlICdyaWdodCc6IGlzU2Nyb2xsQWxsb3dlZC5yaWdodCA9IHZhbHVlOyBicmVhaztcclxuXHRcdFx0XHRjYXNlICdhbGwnOiAkLmZuLmZ1bGxwYWdlLnNldEFsbG93U2Nyb2xsaW5nKHZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvKlxyXG5cdFx0KiBEZXN0cm95cyBmdWxscGFnZS5qcyBwbHVnaW4gZXZlbnRzIGFuZCBvcHRpbmFsbHkgaXRzIGh0bWwgbWFya3VwIGFuZCBzdHlsZXNcclxuXHRcdCovXHJcblx0XHQkLmZuLmZ1bGxwYWdlLmRlc3Ryb3kgPSBmdW5jdGlvbihhbGwpe1xyXG5cdFx0XHQkLmZuLmZ1bGxwYWdlLnNldEF1dG9TY3JvbGxpbmcoZmFsc2UsICdpbnRlcm5hbCcpO1xyXG4gXHRcdFx0JC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XHJcbiBcdFx0XHQkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcclxuXHJcblxyXG4gXHRcdFx0JCh3aW5kb3cpXHJcblx0XHRcdFx0Lm9mZignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcilcclxuICBcdFx0XHRcdC5vZmYoJ2hhc2hjaGFuZ2UnLCBoYXNoQ2hhbmdlSGFuZGxlcilcclxuICBcdFx0XHRcdC5vZmYoJ3Jlc2l6ZScsIHJlc2l6ZUhhbmRsZXIpO1xyXG5cclxuXHRcdFx0JChkb2N1bWVudClcclxuXHRcdFx0XHQub2ZmKCdjbGljaycsICcjZnAtbmF2IGEnKVxyXG5cdFx0XHRcdC5vZmYoJ21vdXNlZW50ZXInLCAnI2ZwLW5hdiBsaScpXHJcblx0XHRcdFx0Lm9mZignbW91c2VsZWF2ZScsICcjZnAtbmF2IGxpJylcclxuXHRcdFx0XHQub2ZmKCdjbGljaycsICcuZnAtc2xpZGVzTmF2IGEnKVxyXG4gIFx0XHRcdFx0Lm9mZignbW91c2VvdmVyJywgb3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50cylcclxuICBcdFx0XHRcdC5vZmYoJ21vdXNlb3V0Jywgb3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50cyk7XHJcblxyXG5cdFx0XHQkKCcuZnAtc2VjdGlvbicpXHJcblx0XHRcdFx0Lm9mZignY2xpY2snLCAnLmZwLWNvbnRyb2xBcnJvdycpO1xyXG5cclxuXHRcdFx0Ly9sZXRzIG1ha2UgYSBtZXNzIVxyXG5cdFx0XHRpZihhbGwpe1xyXG5cdFx0XHRcdGRlc3Ryb3lTdHJ1Y3R1cmUoKTtcclxuXHRcdFx0fVxyXG4gXHRcdH07XHJcblxyXG4gXHRcdC8qXHJcblx0XHQqIFJlbW92ZXMgaW5saW5lIHN0eWxlcyBhZGRlZCBieSBmdWxscGFnZS5qc1xyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGRlc3Ryb3lTdHJ1Y3R1cmUoKXtcclxuXHRcdFx0Ly9yZXNldGluZyB0aGUgYHRvcGAgb3IgYHRyYW5zbGF0ZWAgcHJvcGVydGllcyB0byAwXHJcblx0IFx0XHRzaWxlbnRTY3JvbGwoMCk7XHJcblxyXG5cdFx0XHQkKCcjZnAtbmF2LCAuZnAtc2xpZGVzTmF2LCAuZnAtY29udHJvbEFycm93JykucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHQvL3JlbW92aW5nIGlubGluZSBzdHlsZXNcclxuXHRcdFx0JCgnLmZwLXNlY3Rpb24nKS5jc3MoIHtcclxuXHRcdFx0XHQnaGVpZ2h0JzogJycsXHJcblx0XHRcdFx0J2JhY2tncm91bmQtY29sb3InIDogJycsXHJcblx0XHRcdFx0J3BhZGRpbmcnOiAnJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdCQoJy5mcC1zbGlkZScpLmNzcygge1xyXG5cdFx0XHRcdCd3aWR0aCc6ICcnXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29udGFpbmVyLmNzcyh7XHJcblx0IFx0XHRcdCdoZWlnaHQnOiAnJyxcclxuXHQgXHRcdFx0J3Bvc2l0aW9uJzogJycsXHJcblx0IFx0XHRcdCctbXMtdG91Y2gtYWN0aW9uJzogJycsXHJcblx0IFx0XHRcdCd0b3VjaC1hY3Rpb24nOiAnJ1xyXG5cdCBcdFx0fSk7XHJcblxyXG5cdFx0XHQvL3JlbW92aW5nIGFkZGVkIGNsYXNzZXNcclxuXHRcdFx0JCgnLmZwLXNlY3Rpb24sIC5mcC1zbGlkZScpLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRyZW1vdmVTbGltU2Nyb2xsKCQodGhpcykpO1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZwLXRhYmxlIGFjdGl2ZScpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJlbW92ZUFuaW1hdGlvbihjb250YWluZXIpO1xyXG5cdFx0XHRyZW1vdmVBbmltYXRpb24oY29udGFpbmVyLmZpbmQoJy5mcC1lYXNpbmcnKSk7XHJcblxyXG5cdFx0XHQvL1Vud3JhcHBpbmcgY29udGVudFxyXG5cdFx0XHRjb250YWluZXIuZmluZCgnLmZwLXRhYmxlQ2VsbCwgLmZwLXNsaWRlc0NvbnRhaW5lciwgLmZwLXNsaWRlcycpLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHQvL3Vud3JhcCBub3QgYmVpbmcgdXNlIGluIGNhc2UgdGhlcmUncyBubyBjaGlsZCBlbGVtZW50IGluc2lkZSBhbmQgaXRzIGp1c3QgdGV4dFxyXG5cdFx0XHRcdCQodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvL3Njcm9sbGluZyB0aGUgcGFnZSB0byB0aGUgdG9wIHdpdGggbm8gYW5pbWF0aW9uXHJcblx0XHRcdCQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LypcclxuXHRcdCogU2V0cyB0aGUgc3RhdGUgZm9yIGEgdmFyaWFibGUgd2l0aCBtdWx0aXBsZSBzdGF0ZXMgKG9yaWdpbmFsLCBhbmQgdGVtcG9yYWwpXHJcblx0XHQqIFNvbWUgdmFyaWFibGVzIHN1Y2ggYXMgYGF1dG9TY3JvbGxpbmdgIG9yIGByZWNvcmRIaXN0b3J5YCBtaWdodCBjaGFuZ2UgYXV0b21hdGljYWxseSBpdHMgc3RhdGUgd2hlbiB1c2luZyBgcmVzcG9uc2l2ZWAgb3IgYGF1dG9TY3JvbGxpbmc6ZmFsc2VgLlxyXG5cdFx0KiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBib3RoIHN0YXRlcywgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGVtcG9yYWwgb25lLlxyXG5cdFx0KiBJZiB0eXBlIGlzIG5vdCAnaW50ZXJuYWwnLCB0aGVuIHdlIGFzc3VtZSB0aGUgdXNlciBpcyBnbG9iYWxseSBjaGFuZ2luZyB0aGUgdmFyaWFibGUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0VmFyaWFibGVTdGF0ZSh2YXJpYWJsZSwgdmFsdWUsIHR5cGUpe1xyXG5cdFx0XHRvcHRpb25zW3ZhcmlhYmxlXSA9IHZhbHVlO1xyXG5cdFx0XHRpZih0eXBlICE9PSAnaW50ZXJuYWwnKXtcclxuXHRcdFx0XHRvcmlnaW5hbHNbdmFyaWFibGVdID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogRGlzcGxheXMgd2FybmluZ3NcclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBkaXNwbGF5V2FybmluZ3MoKXtcclxuXHRcdFx0Ly8gRGlzYWJsZSBtdXR1YWxseSBleGNsdXNpdmUgc2V0dGluZ3NcclxuXHRcdFx0aWYgKG9wdGlvbnMuY29udGludW91c1ZlcnRpY2FsICYmXHJcblx0XHRcdFx0KG9wdGlvbnMubG9vcFRvcCB8fCBvcHRpb25zLmxvb3BCb3R0b20pKSB7XHJcblx0XHRcdCAgICBvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCA9IGZhbHNlO1xyXG5cdFx0XHQgICAgc2hvd0Vycm9yKCd3YXJuJywgXCJPcHRpb24gYGxvb3BUb3AvbG9vcEJvdHRvbWAgaXMgbXV0dWFsbHkgZXhjbHVzaXZlIHdpdGggYGNvbnRpbnVvdXNWZXJ0aWNhbGA7IGBjb250aW51b3VzVmVydGljYWxgIGRpc2FibGVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKG9wdGlvbnMuY29udGludW91c1ZlcnRpY2FsICYmIG9wdGlvbnMuc2Nyb2xsQmFyKXtcclxuXHRcdFx0XHRvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNob3dFcnJvcignd2FybicsIFwiT3B0aW9uIGBzY3JvbGxCYXJgIGlzIG11dHVhbGx5IGV4Y2x1c2l2ZSB3aXRoIGBjb250aW51b3VzVmVydGljYWxgOyBgY29udGludW91c1ZlcnRpY2FsYCBkaXNhYmxlZFwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9hbmNob3JzIGNhbiBub3QgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhcyBhbnkgZWxlbWVudCBJRCBvciBOQU1FXHJcblx0XHRcdCQuZWFjaChvcHRpb25zLmFuY2hvcnMsIGZ1bmN0aW9uKGluZGV4LCBuYW1lKXtcclxuXHRcdFx0XHRpZigkKCcjJyArIG5hbWUpLmxlbmd0aCB8fCAkKCdbbmFtZT1cIicrbmFtZSsnXCJdJykubGVuZ3RoICl7XHJcblx0XHRcdFx0XHRzaG93RXJyb3IoJ2Vycm9yJywgXCJkYXRhLWFuY2hvciB0YWdzIGNhbiBub3QgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhcyBhbnkgYGlkYCBlbGVtZW50IG9uIHRoZSBzaXRlIChvciBgbmFtZWAgZWxlbWVudCBmb3IgSUUpLlwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dFcnJvcih0eXBlLCB0ZXh0KXtcclxuXHRcdFx0Y29uc29sZSAmJiBjb25zb2xlW3R5cGVdICYmIGNvbnNvbGVbdHlwZV0oJ2Z1bGxQYWdlOiAnICsgdGV4dCk7XHJcblx0XHR9XHJcblx0fTtcclxufSkoalF1ZXJ5KTtcclxuIiwidHlwZW9mIEpTT04hPVwib2JqZWN0XCImJihKU09OPXt9KSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGYoZSl7cmV0dXJuIGU8MTA/XCIwXCIrZTplfWZ1bmN0aW9uIHF1b3RlKGUpe3JldHVybiBlc2NhcGFibGUubGFzdEluZGV4PTAsZXNjYXBhYmxlLnRlc3QoZSk/J1wiJytlLnJlcGxhY2UoZXNjYXBhYmxlLGZ1bmN0aW9uKGUpe3ZhciB0PW1ldGFbZV07cmV0dXJuIHR5cGVvZiB0PT1cInN0cmluZ1wiP3Q6XCJcXFxcdVwiKyhcIjAwMDBcIitlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9KSsnXCInOidcIicrZSsnXCInfWZ1bmN0aW9uIHN0cihlLHQpe3ZhciBuLHIsaSxzLG89Z2FwLHUsYT10W2VdO2EmJnR5cGVvZiBhPT1cIm9iamVjdFwiJiZ0eXBlb2YgYS50b0pTT049PVwiZnVuY3Rpb25cIiYmKGE9YS50b0pTT04oZSkpLHR5cGVvZiByZXA9PVwiZnVuY3Rpb25cIiYmKGE9cmVwLmNhbGwodCxlLGEpKTtzd2l0Y2godHlwZW9mIGEpe2Nhc2VcInN0cmluZ1wiOnJldHVybiBxdW90ZShhKTtjYXNlXCJudW1iZXJcIjpyZXR1cm4gaXNGaW5pdGUoYSk/U3RyaW5nKGEpOlwibnVsbFwiO2Nhc2VcImJvb2xlYW5cIjpjYXNlXCJudWxsXCI6cmV0dXJuIFN0cmluZyhhKTtjYXNlXCJvYmplY3RcIjppZighYSlyZXR1cm5cIm51bGxcIjtnYXArPWluZGVudCx1PVtdO2lmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoYSk9PT1cIltvYmplY3QgQXJyYXldXCIpe3M9YS5sZW5ndGg7Zm9yKG49MDtuPHM7bis9MSl1W25dPXN0cihuLGEpfHxcIm51bGxcIjtyZXR1cm4gaT11Lmxlbmd0aD09PTA/XCJbXVwiOmdhcD9cIltcXG5cIitnYXArdS5qb2luKFwiLFxcblwiK2dhcCkrXCJcXG5cIitvK1wiXVwiOlwiW1wiK3Uuam9pbihcIixcIikrXCJdXCIsZ2FwPW8saX1pZihyZXAmJnR5cGVvZiByZXA9PVwib2JqZWN0XCIpe3M9cmVwLmxlbmd0aDtmb3Iobj0wO248cztuKz0xKXR5cGVvZiByZXBbbl09PVwic3RyaW5nXCImJihyPXJlcFtuXSxpPXN0cihyLGEpLGkmJnUucHVzaChxdW90ZShyKSsoZ2FwP1wiOiBcIjpcIjpcIikraSkpfWVsc2UgZm9yKHIgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxyKSYmKGk9c3RyKHIsYSksaSYmdS5wdXNoKHF1b3RlKHIpKyhnYXA/XCI6IFwiOlwiOlwiKStpKSk7cmV0dXJuIGk9dS5sZW5ndGg9PT0wP1wie31cIjpnYXA/XCJ7XFxuXCIrZ2FwK3Uuam9pbihcIixcXG5cIitnYXApK1wiXFxuXCIrbytcIn1cIjpcIntcIit1LmpvaW4oXCIsXCIpK1wifVwiLGdhcD1vLGl9fXR5cGVvZiBEYXRlLnByb3RvdHlwZS50b0pTT04hPVwiZnVuY3Rpb25cIiYmKERhdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihlKXtyZXR1cm4gaXNGaW5pdGUodGhpcy52YWx1ZU9mKCkpP3RoaXMuZ2V0VVRDRnVsbFllYXIoKStcIi1cIitmKHRoaXMuZ2V0VVRDTW9udGgoKSsxKStcIi1cIitmKHRoaXMuZ2V0VVRDRGF0ZSgpKStcIlRcIitmKHRoaXMuZ2V0VVRDSG91cnMoKSkrXCI6XCIrZih0aGlzLmdldFVUQ01pbnV0ZXMoKSkrXCI6XCIrZih0aGlzLmdldFVUQ1NlY29uZHMoKSkrXCJaXCI6bnVsbH0sU3RyaW5nLnByb3RvdHlwZS50b0pTT049TnVtYmVyLnByb3RvdHlwZS50b0pTT049Qm9vbGVhbi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0pO3ZhciBjeD0vW1xcdTAwMDBcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZyxlc2NhcGFibGU9L1tcXFxcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx4OWZcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZyxnYXAsaW5kZW50LG1ldGE9e1wiXFxiXCI6XCJcXFxcYlwiLFwiXHRcIjpcIlxcXFx0XCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXHJcIjpcIlxcXFxyXCIsJ1wiJzonXFxcXFwiJyxcIlxcXFxcIjpcIlxcXFxcXFxcXCJ9LHJlcDt0eXBlb2YgSlNPTi5zdHJpbmdpZnkhPVwiZnVuY3Rpb25cIiYmKEpTT04uc3RyaW5naWZ5PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtnYXA9XCJcIixpbmRlbnQ9XCJcIjtpZih0eXBlb2Ygbj09XCJudW1iZXJcIilmb3Iocj0wO3I8bjtyKz0xKWluZGVudCs9XCIgXCI7ZWxzZSB0eXBlb2Ygbj09XCJzdHJpbmdcIiYmKGluZGVudD1uKTtyZXA9dDtpZighdHx8dHlwZW9mIHQ9PVwiZnVuY3Rpb25cInx8dHlwZW9mIHQ9PVwib2JqZWN0XCImJnR5cGVvZiB0Lmxlbmd0aD09XCJudW1iZXJcIilyZXR1cm4gc3RyKFwiXCIse1wiXCI6ZX0pO3Rocm93IG5ldyBFcnJvcihcIkpTT04uc3RyaW5naWZ5XCIpfSksdHlwZW9mIEpTT04ucGFyc2UhPVwiZnVuY3Rpb25cIiYmKEpTT04ucGFyc2U9ZnVuY3Rpb24odGV4dCxyZXZpdmVyKXtmdW5jdGlvbiB3YWxrKGUsdCl7dmFyIG4scixpPWVbdF07aWYoaSYmdHlwZW9mIGk9PVwib2JqZWN0XCIpZm9yKG4gaW4gaSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxuKSYmKHI9d2FsayhpLG4pLHIhPT11bmRlZmluZWQ/aVtuXT1yOmRlbGV0ZSBpW25dKTtyZXR1cm4gcmV2aXZlci5jYWxsKGUsdCxpKX12YXIgajt0ZXh0PVN0cmluZyh0ZXh0KSxjeC5sYXN0SW5kZXg9MCxjeC50ZXN0KHRleHQpJiYodGV4dD10ZXh0LnJlcGxhY2UoY3gsZnVuY3Rpb24oZSl7cmV0dXJuXCJcXFxcdVwiKyhcIjAwMDBcIitlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9KSk7aWYoL15bXFxdLDp7fVxcc10qJC8udGVzdCh0ZXh0LnJlcGxhY2UoL1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZyxcIkBcIikucmVwbGFjZSgvXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2csXCJdXCIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxccypcXFspKy9nLFwiXCIpKSlyZXR1cm4gaj1ldmFsKFwiKFwiK3RleHQrXCIpXCIpLHR5cGVvZiByZXZpdmVyPT1cImZ1bmN0aW9uXCI/d2Fsayh7XCJcIjpqfSxcIlwiKTpqO3Rocm93IG5ldyBTeW50YXhFcnJvcihcIkpTT04ucGFyc2VcIil9KX0oKSxmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO3ZhciBuPWUuSGlzdG9yeT1lLkhpc3Rvcnl8fHt9LHI9ZS5qUXVlcnk7aWYodHlwZW9mIG4uQWRhcHRlciE9XCJ1bmRlZmluZWRcIil0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIEFkYXB0ZXIgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuLi5cIik7bi5BZGFwdGVyPXtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyKGUpLmJpbmQodCxuKX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQsbil7cihlKS50cmlnZ2VyKHQsbil9LGV4dHJhY3RFdmVudERhdGE6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPW4mJm4ub3JpZ2luYWxFdmVudCYmbi5vcmlnaW5hbEV2ZW50W2VdfHxyJiZyW2VdfHx0O3JldHVybiBpfSxvbkRvbUxvYWQ6ZnVuY3Rpb24oZSl7cihlKX19LHR5cGVvZiBuLmluaXQhPVwidW5kZWZpbmVkXCImJm4uaW5pdCgpfSh3aW5kb3cpLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZS5kb2N1bWVudCxyPWUuc2V0VGltZW91dHx8cixpPWUuY2xlYXJUaW1lb3V0fHxpLHM9ZS5zZXRJbnRlcnZhbHx8cyxvPWUuSGlzdG9yeT1lLkhpc3Rvcnl8fHt9O2lmKHR5cGVvZiBvLmluaXRIdG1sNCE9XCJ1bmRlZmluZWRcIil0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIEhUTUw0IFN1cHBvcnQgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuLi5cIik7by5pbml0SHRtbDQ9ZnVuY3Rpb24oKXtpZih0eXBlb2Ygby5pbml0SHRtbDQuaW5pdGlhbGl6ZWQhPVwidW5kZWZpbmVkXCIpcmV0dXJuITE7by5pbml0SHRtbDQuaW5pdGlhbGl6ZWQ9ITAsby5lbmFibGVkPSEwLG8uc2F2ZWRIYXNoZXM9W10sby5pc0xhc3RIYXNoPWZ1bmN0aW9uKGUpe3ZhciB0PW8uZ2V0SGFzaEJ5SW5kZXgoKSxuO3JldHVybiBuPWU9PT10LG59LG8uaXNIYXNoRXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvJTI1L2csXCIlXCIpLHQ9ZW5jb2RlVVJJQ29tcG9uZW50KHQpLnJlcGxhY2UoLyUyNS9nLFwiJVwiKSxlPT09dH0sby5zYXZlSGFzaD1mdW5jdGlvbihlKXtyZXR1cm4gby5pc0xhc3RIYXNoKGUpPyExOihvLnNhdmVkSGFzaGVzLnB1c2goZSksITApfSxvLmdldEhhc2hCeUluZGV4PWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIHR5cGVvZiBlPT1cInVuZGVmaW5lZFwiP3Q9by5zYXZlZEhhc2hlc1tvLnNhdmVkSGFzaGVzLmxlbmd0aC0xXTplPDA/dD1vLnNhdmVkSGFzaGVzW28uc2F2ZWRIYXNoZXMubGVuZ3RoK2VdOnQ9by5zYXZlZEhhc2hlc1tlXSx0fSxvLmRpc2NhcmRlZEhhc2hlcz17fSxvLmRpc2NhcmRlZFN0YXRlcz17fSxvLmRpc2NhcmRTdGF0ZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9by5nZXRIYXNoQnlTdGF0ZShlKSxpO3JldHVybiBpPXtkaXNjYXJkZWRTdGF0ZTplLGJhY2tTdGF0ZTpuLGZvcndhcmRTdGF0ZTp0fSxvLmRpc2NhcmRlZFN0YXRlc1tyXT1pLCEwfSxvLmRpc2NhcmRIYXNoPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj17ZGlzY2FyZGVkSGFzaDplLGJhY2tTdGF0ZTpuLGZvcndhcmRTdGF0ZTp0fTtyZXR1cm4gby5kaXNjYXJkZWRIYXNoZXNbZV09ciwhMH0sby5kaXNjYXJkZWRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1vLmdldEhhc2hCeVN0YXRlKGUpLG47cmV0dXJuIG49by5kaXNjYXJkZWRTdGF0ZXNbdF18fCExLG59LG8uZGlzY2FyZGVkSGFzaD1mdW5jdGlvbihlKXt2YXIgdD1vLmRpc2NhcmRlZEhhc2hlc1tlXXx8ITE7cmV0dXJuIHR9LG8ucmVjeWNsZVN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PW8uZ2V0SGFzaEJ5U3RhdGUoZSk7cmV0dXJuIG8uZGlzY2FyZGVkU3RhdGUoZSkmJmRlbGV0ZSBvLmRpc2NhcmRlZFN0YXRlc1t0XSwhMH0sby5lbXVsYXRlZC5oYXNoQ2hhbmdlJiYoby5oYXNoQ2hhbmdlSW5pdD1mdW5jdGlvbigpe28uY2hlY2tlckZ1bmN0aW9uPW51bGw7dmFyIHQ9XCJcIixyLGksdSxhLGY9Qm9vbGVhbihvLmdldEhhc2goKSk7cmV0dXJuIG8uaXNJbnRlcm5ldEV4cGxvcmVyKCk/KHI9XCJoaXN0b3J5anMtaWZyYW1lXCIsaT1uLmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksaS5zZXRBdHRyaWJ1dGUoXCJpZFwiLHIpLGkuc2V0QXR0cmlidXRlKFwic3JjXCIsXCIjXCIpLGkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuLmJvZHkuYXBwZW5kQ2hpbGQoaSksaS5jb250ZW50V2luZG93LmRvY3VtZW50Lm9wZW4oKSxpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKSx1PVwiXCIsYT0hMSxvLmNoZWNrZXJGdW5jdGlvbj1mdW5jdGlvbigpe2lmKGEpcmV0dXJuITE7YT0hMDt2YXIgbj1vLmdldEhhc2goKSxyPW8uZ2V0SGFzaChpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpO3JldHVybiBuIT09dD8odD1uLHIhPT1uJiYodT1yPW4saS5jb250ZW50V2luZG93LmRvY3VtZW50Lm9wZW4oKSxpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKSxpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaGFzaD1vLmVzY2FwZUhhc2gobikpLG8uQWRhcHRlci50cmlnZ2VyKGUsXCJoYXNoY2hhbmdlXCIpKTpyIT09dSYmKHU9cixmJiZyPT09XCJcIj9vLmJhY2soKTpvLnNldEhhc2gociwhMSkpLGE9ITEsITB9KTpvLmNoZWNrZXJGdW5jdGlvbj1mdW5jdGlvbigpe3ZhciBuPW8uZ2V0SGFzaCgpfHxcIlwiO3JldHVybiBuIT09dCYmKHQ9bixvLkFkYXB0ZXIudHJpZ2dlcihlLFwiaGFzaGNoYW5nZVwiKSksITB9LG8uaW50ZXJ2YWxMaXN0LnB1c2gocyhvLmNoZWNrZXJGdW5jdGlvbixvLm9wdGlvbnMuaGFzaENoYW5nZUludGVydmFsKSksITB9LG8uQWRhcHRlci5vbkRvbUxvYWQoby5oYXNoQ2hhbmdlSW5pdCkpLG8uZW11bGF0ZWQucHVzaFN0YXRlJiYoby5vbkhhc2hDaGFuZ2U9ZnVuY3Rpb24odCl7dmFyIG49dCYmdC5uZXdVUkx8fG8uZ2V0TG9jYXRpb25IcmVmKCkscj1vLmdldEhhc2hCeVVybChuKSxpPW51bGwscz1udWxsLHU9bnVsbCxhO3JldHVybiBvLmlzTGFzdEhhc2gocik/KG8uYnVzeSghMSksITEpOihvLmRvdWJsZUNoZWNrQ29tcGxldGUoKSxvLnNhdmVIYXNoKHIpLHImJm8uaXNUcmFkaXRpb25hbEFuY2hvcihyKT8oby5BZGFwdGVyLnRyaWdnZXIoZSxcImFuY2hvcmNoYW5nZVwiKSxvLmJ1c3koITEpLCExKTooaT1vLmV4dHJhY3RTdGF0ZShvLmdldEZ1bGxVcmwocnx8by5nZXRMb2NhdGlvbkhyZWYoKSksITApLG8uaXNMYXN0U2F2ZWRTdGF0ZShpKT8oby5idXN5KCExKSwhMSk6KHM9by5nZXRIYXNoQnlTdGF0ZShpKSxhPW8uZGlzY2FyZGVkU3RhdGUoaSksYT8oby5nZXRIYXNoQnlJbmRleCgtMik9PT1vLmdldEhhc2hCeVN0YXRlKGEuZm9yd2FyZFN0YXRlKT9vLmJhY2soITEpOm8uZm9yd2FyZCghMSksITEpOihvLnB1c2hTdGF0ZShpLmRhdGEsaS50aXRsZSxlbmNvZGVVUkkoaS51cmwpLCExKSwhMCkpKSl9LG8uQWRhcHRlci5iaW5kKGUsXCJoYXNoY2hhbmdlXCIsby5vbkhhc2hDaGFuZ2UpLG8ucHVzaFN0YXRlPWZ1bmN0aW9uKHQsbixyLGkpe3I9ZW5jb2RlVVJJKHIpLnJlcGxhY2UoLyUyNS9nLFwiJVwiKTtpZihvLmdldEhhc2hCeVVybChyKSl0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVzIHdpdGggZnJhZ21lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7aWYoaSE9PSExJiZvLmJ1c3koKSlyZXR1cm4gby5wdXNoUXVldWUoe3Njb3BlOm8sY2FsbGJhY2s6by5wdXNoU3RhdGUsYXJnczphcmd1bWVudHMscXVldWU6aX0pLCExO28uYnVzeSghMCk7dmFyIHM9by5jcmVhdGVTdGF0ZU9iamVjdCh0LG4sciksdT1vLmdldEhhc2hCeVN0YXRlKHMpLGE9by5nZXRTdGF0ZSghMSksZj1vLmdldEhhc2hCeVN0YXRlKGEpLGw9by5nZXRIYXNoKCksYz1vLmV4cGVjdGVkU3RhdGVJZD09cy5pZDtyZXR1cm4gby5zdG9yZVN0YXRlKHMpLG8uZXhwZWN0ZWRTdGF0ZUlkPXMuaWQsby5yZWN5Y2xlU3RhdGUocyksby5zZXRUaXRsZShzKSx1PT09Zj8oby5idXN5KCExKSwhMSk6KG8uc2F2ZVN0YXRlKHMpLGN8fG8uQWRhcHRlci50cmlnZ2VyKGUsXCJzdGF0ZWNoYW5nZVwiKSwhby5pc0hhc2hFcXVhbCh1LGwpJiYhby5pc0hhc2hFcXVhbCh1LG8uZ2V0U2hvcnRVcmwoby5nZXRMb2NhdGlvbkhyZWYoKSkpJiZvLnNldEhhc2godSwhMSksby5idXN5KCExKSwhMCl9LG8ucmVwbGFjZVN0YXRlPWZ1bmN0aW9uKHQsbixyLGkpe3I9ZW5jb2RlVVJJKHIpLnJlcGxhY2UoLyUyNS9nLFwiJVwiKTtpZihvLmdldEhhc2hCeVVybChyKSl0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmpzIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVzIHdpdGggZnJhZ21lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7aWYoaSE9PSExJiZvLmJ1c3koKSlyZXR1cm4gby5wdXNoUXVldWUoe3Njb3BlOm8sY2FsbGJhY2s6by5yZXBsYWNlU3RhdGUsYXJnczphcmd1bWVudHMscXVldWU6aX0pLCExO28uYnVzeSghMCk7dmFyIHM9by5jcmVhdGVTdGF0ZU9iamVjdCh0LG4sciksdT1vLmdldEhhc2hCeVN0YXRlKHMpLGE9by5nZXRTdGF0ZSghMSksZj1vLmdldEhhc2hCeVN0YXRlKGEpLGw9by5nZXRTdGF0ZUJ5SW5kZXgoLTIpO3JldHVybiBvLmRpc2NhcmRTdGF0ZShhLHMsbCksdT09PWY/KG8uc3RvcmVTdGF0ZShzKSxvLmV4cGVjdGVkU3RhdGVJZD1zLmlkLG8ucmVjeWNsZVN0YXRlKHMpLG8uc2V0VGl0bGUocyksby5zYXZlU3RhdGUocyksby5BZGFwdGVyLnRyaWdnZXIoZSxcInN0YXRlY2hhbmdlXCIpLG8uYnVzeSghMSkpOm8ucHVzaFN0YXRlKHMuZGF0YSxzLnRpdGxlLHMudXJsLCExKSwhMH0pLG8uZW11bGF0ZWQucHVzaFN0YXRlJiZvLmdldEhhc2goKSYmIW8uZW11bGF0ZWQuaGFzaENoYW5nZSYmby5BZGFwdGVyLm9uRG9tTG9hZChmdW5jdGlvbigpe28uQWRhcHRlci50cmlnZ2VyKGUsXCJoYXNoY2hhbmdlXCIpfSl9LHR5cGVvZiBvLmluaXQhPVwidW5kZWZpbmVkXCImJm8uaW5pdCgpfSh3aW5kb3cpLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZS5jb25zb2xlfHx0LHI9ZS5kb2N1bWVudCxpPWUubmF2aWdhdG9yLHM9ITEsbz1lLnNldFRpbWVvdXQsdT1lLmNsZWFyVGltZW91dCxhPWUuc2V0SW50ZXJ2YWwsZj1lLmNsZWFySW50ZXJ2YWwsbD1lLkpTT04sYz1lLmFsZXJ0LGg9ZS5IaXN0b3J5PWUuSGlzdG9yeXx8e30scD1lLmhpc3Rvcnk7dHJ5e3M9ZS5zZXNzaW9uU3RvcmFnZSxzLnNldEl0ZW0oXCJURVNUXCIsXCIxXCIpLHMucmVtb3ZlSXRlbShcIlRFU1RcIil9Y2F0Y2goZCl7cz0hMX1sLnN0cmluZ2lmeT1sLnN0cmluZ2lmeXx8bC5lbmNvZGUsbC5wYXJzZT1sLnBhcnNlfHxsLmRlY29kZTtpZih0eXBlb2YgaC5pbml0IT1cInVuZGVmaW5lZFwiKXRocm93IG5ldyBFcnJvcihcIkhpc3RvcnkuanMgQ29yZSBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZC4uLlwiKTtoLmluaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBoLkFkYXB0ZXI9PVwidW5kZWZpbmVkXCI/ITE6KHR5cGVvZiBoLmluaXRDb3JlIT1cInVuZGVmaW5lZFwiJiZoLmluaXRDb3JlKCksdHlwZW9mIGguaW5pdEh0bWw0IT1cInVuZGVmaW5lZFwiJiZoLmluaXRIdG1sNCgpLCEwKX0saC5pbml0Q29yZT1mdW5jdGlvbihkKXtpZih0eXBlb2YgaC5pbml0Q29yZS5pbml0aWFsaXplZCE9XCJ1bmRlZmluZWRcIilyZXR1cm4hMTtoLmluaXRDb3JlLmluaXRpYWxpemVkPSEwLGgub3B0aW9ucz1oLm9wdGlvbnN8fHt9LGgub3B0aW9ucy5oYXNoQ2hhbmdlSW50ZXJ2YWw9aC5vcHRpb25zLmhhc2hDaGFuZ2VJbnRlcnZhbHx8MTAwLGgub3B0aW9ucy5zYWZhcmlQb2xsSW50ZXJ2YWw9aC5vcHRpb25zLnNhZmFyaVBvbGxJbnRlcnZhbHx8NTAwLGgub3B0aW9ucy5kb3VibGVDaGVja0ludGVydmFsPWgub3B0aW9ucy5kb3VibGVDaGVja0ludGVydmFsfHw1MDAsaC5vcHRpb25zLmRpc2FibGVTdWlkPWgub3B0aW9ucy5kaXNhYmxlU3VpZHx8ITEsaC5vcHRpb25zLnN0b3JlSW50ZXJ2YWw9aC5vcHRpb25zLnN0b3JlSW50ZXJ2YWx8fDFlMyxoLm9wdGlvbnMuYnVzeURlbGF5PWgub3B0aW9ucy5idXN5RGVsYXl8fDI1MCxoLm9wdGlvbnMuZGVidWc9aC5vcHRpb25zLmRlYnVnfHwhMSxoLm9wdGlvbnMuaW5pdGlhbFRpdGxlPWgub3B0aW9ucy5pbml0aWFsVGl0bGV8fHIudGl0bGUsaC5vcHRpb25zLmh0bWw0TW9kZT1oLm9wdGlvbnMuaHRtbDRNb2RlfHwhMSxoLm9wdGlvbnMuZGVsYXlJbml0PWgub3B0aW9ucy5kZWxheUluaXR8fCExLGguaW50ZXJ2YWxMaXN0PVtdLGguY2xlYXJBbGxJbnRlcnZhbHM9ZnVuY3Rpb24oKXt2YXIgZSx0PWguaW50ZXJ2YWxMaXN0O2lmKHR5cGVvZiB0IT1cInVuZGVmaW5lZFwiJiZ0IT09bnVsbCl7Zm9yKGU9MDtlPHQubGVuZ3RoO2UrKylmKHRbZV0pO2guaW50ZXJ2YWxMaXN0PW51bGx9fSxoLmRlYnVnPWZ1bmN0aW9uKCl7KGgub3B0aW9ucy5kZWJ1Z3x8ITEpJiZoLmxvZy5hcHBseShoLGFyZ3VtZW50cyl9LGgubG9nPWZ1bmN0aW9uKCl7dmFyIGU9dHlwZW9mIG4hPVwidW5kZWZpbmVkXCImJnR5cGVvZiBuLmxvZyE9XCJ1bmRlZmluZWRcIiYmdHlwZW9mIG4ubG9nLmFwcGx5IT1cInVuZGVmaW5lZFwiLHQ9ci5nZXRFbGVtZW50QnlJZChcImxvZ1wiKSxpLHMsbyx1LGE7ZT8odT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGk9dS5zaGlmdCgpLHR5cGVvZiBuLmRlYnVnIT1cInVuZGVmaW5lZFwiP24uZGVidWcuYXBwbHkobixbaSx1XSk6bi5sb2cuYXBwbHkobixbaSx1XSkpOmk9XCJcXG5cIithcmd1bWVudHNbMF0rXCJcXG5cIjtmb3Iocz0xLG89YXJndW1lbnRzLmxlbmd0aDtzPG87KytzKXthPWFyZ3VtZW50c1tzXTtpZih0eXBlb2YgYT09XCJvYmplY3RcIiYmdHlwZW9mIGwhPVwidW5kZWZpbmVkXCIpdHJ5e2E9bC5zdHJpbmdpZnkoYSl9Y2F0Y2goZil7fWkrPVwiXFxuXCIrYStcIlxcblwifXJldHVybiB0Pyh0LnZhbHVlKz1pK1wiXFxuLS0tLS1cXG5cIix0LnNjcm9sbFRvcD10LnNjcm9sbEhlaWdodC10LmNsaWVudEhlaWdodCk6ZXx8YyhpKSwhMH0saC5nZXRJbnRlcm5ldEV4cGxvcmVyTWFqb3JWZXJzaW9uPWZ1bmN0aW9uKCl7dmFyIGU9aC5nZXRJbnRlcm5ldEV4cGxvcmVyTWFqb3JWZXJzaW9uLmNhY2hlZD10eXBlb2YgaC5nZXRJbnRlcm5ldEV4cGxvcmVyTWFqb3JWZXJzaW9uLmNhY2hlZCE9XCJ1bmRlZmluZWRcIj9oLmdldEludGVybmV0RXhwbG9yZXJNYWpvclZlcnNpb24uY2FjaGVkOmZ1bmN0aW9uKCl7dmFyIGU9Myx0PXIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpXCIpO3doaWxlKCh0LmlubmVySFRNTD1cIjwhLS1baWYgZ3QgSUUgXCIrICsrZStcIl0+PGk+PC9pPjwhW2VuZGlmXS0tPlwiKSYmblswXSk7cmV0dXJuIGU+ND9lOiExfSgpO3JldHVybiBlfSxoLmlzSW50ZXJuZXRFeHBsb3Jlcj1mdW5jdGlvbigpe3ZhciBlPWguaXNJbnRlcm5ldEV4cGxvcmVyLmNhY2hlZD10eXBlb2YgaC5pc0ludGVybmV0RXhwbG9yZXIuY2FjaGVkIT1cInVuZGVmaW5lZFwiP2guaXNJbnRlcm5ldEV4cGxvcmVyLmNhY2hlZDpCb29sZWFuKGguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbigpKTtyZXR1cm4gZX0saC5vcHRpb25zLmh0bWw0TW9kZT9oLmVtdWxhdGVkPXtwdXNoU3RhdGU6ITAsaGFzaENoYW5nZTohMH06aC5lbXVsYXRlZD17cHVzaFN0YXRlOiFCb29sZWFuKGUuaGlzdG9yeSYmZS5oaXN0b3J5LnB1c2hTdGF0ZSYmZS5oaXN0b3J5LnJlcGxhY2VTdGF0ZSYmIS8gTW9iaWxlXFwvKFsxLTddW2Etel18KDgoW2FiY2RlXXxmKDFbMC04XSkpKSkvaS50ZXN0KGkudXNlckFnZW50KSYmIS9BcHBsZVdlYktpdFxcLzUoWzAtMl18M1swLTJdKS9pLnRlc3QoaS51c2VyQWdlbnQpKSxoYXNoQ2hhbmdlOkJvb2xlYW4oIShcIm9uaGFzaGNoYW5nZVwiaW4gZXx8XCJvbmhhc2hjaGFuZ2VcImluIHIpfHxoLmlzSW50ZXJuZXRFeHBsb3JlcigpJiZoLmdldEludGVybmV0RXhwbG9yZXJNYWpvclZlcnNpb24oKTw4KX0saC5lbmFibGVkPSFoLmVtdWxhdGVkLnB1c2hTdGF0ZSxoLmJ1Z3M9e3NldEhhc2g6Qm9vbGVhbighaC5lbXVsYXRlZC5wdXNoU3RhdGUmJmkudmVuZG9yPT09XCJBcHBsZSBDb21wdXRlciwgSW5jLlwiJiYvQXBwbGVXZWJLaXRcXC81KFswLTJdfDNbMC0zXSkvLnRlc3QoaS51c2VyQWdlbnQpKSxzYWZhcmlQb2xsOkJvb2xlYW4oIWguZW11bGF0ZWQucHVzaFN0YXRlJiZpLnZlbmRvcj09PVwiQXBwbGUgQ29tcHV0ZXIsIEluYy5cIiYmL0FwcGxlV2ViS2l0XFwvNShbMC0yXXwzWzAtM10pLy50ZXN0KGkudXNlckFnZW50KSksaWVEb3VibGVDaGVjazpCb29sZWFuKGguaXNJbnRlcm5ldEV4cGxvcmVyKCkmJmguZ2V0SW50ZXJuZXRFeHBsb3Jlck1ham9yVmVyc2lvbigpPDgpLGhhc2hFc2NhcGU6Qm9vbGVhbihoLmlzSW50ZXJuZXRFeHBsb3JlcigpJiZoLmdldEludGVybmV0RXhwbG9yZXJNYWpvclZlcnNpb24oKTw3KX0saC5pc0VtcHR5T2JqZWN0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuITB9LGguY2xvbmVPYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZT8odD1sLnN0cmluZ2lmeShlKSxuPWwucGFyc2UodCkpOm49e30sbn0saC5nZXRSb290VXJsPWZ1bmN0aW9uKCl7dmFyIGU9ci5sb2NhdGlvbi5wcm90b2NvbCtcIi8vXCIrKHIubG9jYXRpb24uaG9zdG5hbWV8fHIubG9jYXRpb24uaG9zdCk7aWYoci5sb2NhdGlvbi5wb3J0fHwhMSllKz1cIjpcIityLmxvY2F0aW9uLnBvcnQ7cmV0dXJuIGUrPVwiL1wiLGV9LGguZ2V0QmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgZT1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKSx0PW51bGwsbj1cIlwiO3JldHVybiBlLmxlbmd0aD09PTEmJih0PWVbMF0sbj10LmhyZWYucmVwbGFjZSgvW15cXC9dKyQvLFwiXCIpKSxuPW4ucmVwbGFjZSgvXFwvKyQvLFwiXCIpLG4mJihuKz1cIi9cIiksbn0saC5nZXRCYXNlVXJsPWZ1bmN0aW9uKCl7dmFyIGU9aC5nZXRCYXNlSHJlZigpfHxoLmdldEJhc2VQYWdlVXJsKCl8fGguZ2V0Um9vdFVybCgpO3JldHVybiBlfSxoLmdldFBhZ2VVcmw9ZnVuY3Rpb24oKXt2YXIgZT1oLmdldFN0YXRlKCExLCExKSx0PShlfHx7fSkudXJsfHxoLmdldExvY2F0aW9uSHJlZigpLG47cmV0dXJuIG49dC5yZXBsYWNlKC9cXC8rJC8sXCJcIikucmVwbGFjZSgvW15cXC9dKyQvLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4vXFwuLy50ZXN0KGUpP2U6ZStcIi9cIn0pLG59LGguZ2V0QmFzZVBhZ2VVcmw9ZnVuY3Rpb24oKXt2YXIgZT1oLmdldExvY2F0aW9uSHJlZigpLnJlcGxhY2UoL1sjXFw/XS4qLyxcIlwiKS5yZXBsYWNlKC9bXlxcL10rJC8sZnVuY3Rpb24oZSx0LG4pe3JldHVybi9bXlxcL10kLy50ZXN0KGUpP1wiXCI6ZX0pLnJlcGxhY2UoL1xcLyskLyxcIlwiKStcIi9cIjtyZXR1cm4gZX0saC5nZXRGdWxsVXJsPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZSxyPWUuc3Vic3RyaW5nKDAsMSk7cmV0dXJuIHQ9dHlwZW9mIHQ9PVwidW5kZWZpbmVkXCI/ITA6dCwvW2Etel0rXFw6XFwvXFwvLy50ZXN0KGUpfHwocj09PVwiL1wiP249aC5nZXRSb290VXJsKCkrZS5yZXBsYWNlKC9eXFwvKy8sXCJcIik6cj09PVwiI1wiP249aC5nZXRQYWdlVXJsKCkucmVwbGFjZSgvIy4qLyxcIlwiKStlOnI9PT1cIj9cIj9uPWguZ2V0UGFnZVVybCgpLnJlcGxhY2UoL1tcXD8jXS4qLyxcIlwiKStlOnQ/bj1oLmdldEJhc2VVcmwoKStlLnJlcGxhY2UoL14oXFwuXFwvKSsvLFwiXCIpOm49aC5nZXRCYXNlUGFnZVVybCgpK2UucmVwbGFjZSgvXihcXC5cXC8pKy8sXCJcIikpLG4ucmVwbGFjZSgvXFwjJC8sXCJcIil9LGguZ2V0U2hvcnRVcmw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSxuPWguZ2V0QmFzZVVybCgpLHI9aC5nZXRSb290VXJsKCk7cmV0dXJuIGguZW11bGF0ZWQucHVzaFN0YXRlJiYodD10LnJlcGxhY2UobixcIlwiKSksdD10LnJlcGxhY2UocixcIi9cIiksaC5pc1RyYWRpdGlvbmFsQW5jaG9yKHQpJiYodD1cIi4vXCIrdCksdD10LnJlcGxhY2UoL14oXFwuXFwvKSsvZyxcIi4vXCIpLnJlcGxhY2UoL1xcIyQvLFwiXCIpLHR9LGguZ2V0TG9jYXRpb25IcmVmPWZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fHIsZS5VUkw9PT1lLmxvY2F0aW9uLmhyZWY/ZS5sb2NhdGlvbi5ocmVmOmUubG9jYXRpb24uaHJlZj09PWRlY29kZVVSSUNvbXBvbmVudChlLlVSTCk/ZS5VUkw6ZS5sb2NhdGlvbi5oYXNoJiZkZWNvZGVVUklDb21wb25lbnQoZS5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL15bXiNdKy8sXCJcIikpPT09ZS5sb2NhdGlvbi5oYXNoP2UubG9jYXRpb24uaHJlZjplLlVSTC5pbmRleE9mKFwiI1wiKT09LTEmJmUubG9jYXRpb24uaHJlZi5pbmRleE9mKFwiI1wiKSE9LTE/ZS5sb2NhdGlvbi5ocmVmOmUuVVJMfHxlLmxvY2F0aW9uLmhyZWZ9LGguc3RvcmU9e30saC5pZFRvU3RhdGU9aC5pZFRvU3RhdGV8fHt9LGguc3RhdGVUb0lkPWguc3RhdGVUb0lkfHx7fSxoLnVybFRvSWQ9aC51cmxUb0lkfHx7fSxoLnN0b3JlZFN0YXRlcz1oLnN0b3JlZFN0YXRlc3x8W10saC5zYXZlZFN0YXRlcz1oLnNhdmVkU3RhdGVzfHxbXSxoLm5vcm1hbGl6ZVN0b3JlPWZ1bmN0aW9uKCl7aC5zdG9yZS5pZFRvU3RhdGU9aC5zdG9yZS5pZFRvU3RhdGV8fHt9LGguc3RvcmUudXJsVG9JZD1oLnN0b3JlLnVybFRvSWR8fHt9LGguc3RvcmUuc3RhdGVUb0lkPWguc3RvcmUuc3RhdGVUb0lkfHx7fX0saC5nZXRTdGF0ZT1mdW5jdGlvbihlLHQpe3R5cGVvZiBlPT1cInVuZGVmaW5lZFwiJiYoZT0hMCksdHlwZW9mIHQ9PVwidW5kZWZpbmVkXCImJih0PSEwKTt2YXIgbj1oLmdldExhc3RTYXZlZFN0YXRlKCk7cmV0dXJuIW4mJnQmJihuPWguY3JlYXRlU3RhdGVPYmplY3QoKSksZSYmKG49aC5jbG9uZU9iamVjdChuKSxuLnVybD1uLmNsZWFuVXJsfHxuLnVybCksbn0saC5nZXRJZEJ5U3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9aC5leHRyYWN0SWQoZS51cmwpLG47aWYoIXQpe249aC5nZXRTdGF0ZVN0cmluZyhlKTtpZih0eXBlb2YgaC5zdGF0ZVRvSWRbbl0hPVwidW5kZWZpbmVkXCIpdD1oLnN0YXRlVG9JZFtuXTtlbHNlIGlmKHR5cGVvZiBoLnN0b3JlLnN0YXRlVG9JZFtuXSE9XCJ1bmRlZmluZWRcIil0PWguc3RvcmUuc3RhdGVUb0lkW25dO2Vsc2V7Zm9yKDs7KXt0PShuZXcgRGF0ZSkuZ2V0VGltZSgpK1N0cmluZyhNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKTtpZih0eXBlb2YgaC5pZFRvU3RhdGVbdF09PVwidW5kZWZpbmVkXCImJnR5cGVvZiBoLnN0b3JlLmlkVG9TdGF0ZVt0XT09XCJ1bmRlZmluZWRcIilicmVha31oLnN0YXRlVG9JZFtuXT10LGguaWRUb1N0YXRlW3RdPWV9fXJldHVybiB0fSxoLm5vcm1hbGl6ZVN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fHR5cGVvZiBlIT1cIm9iamVjdFwiKWU9e307aWYodHlwZW9mIGUubm9ybWFsaXplZCE9XCJ1bmRlZmluZWRcIilyZXR1cm4gZTtpZighZS5kYXRhfHx0eXBlb2YgZS5kYXRhIT1cIm9iamVjdFwiKWUuZGF0YT17fTtyZXR1cm4gdD17fSx0Lm5vcm1hbGl6ZWQ9ITAsdC50aXRsZT1lLnRpdGxlfHxcIlwiLHQudXJsPWguZ2V0RnVsbFVybChlLnVybD9lLnVybDpoLmdldExvY2F0aW9uSHJlZigpKSx0Lmhhc2g9aC5nZXRTaG9ydFVybCh0LnVybCksdC5kYXRhPWguY2xvbmVPYmplY3QoZS5kYXRhKSx0LmlkPWguZ2V0SWRCeVN0YXRlKHQpLHQuY2xlYW5Vcmw9dC51cmwucmVwbGFjZSgvXFw/P1xcJl9zdWlkLiovLFwiXCIpLHQudXJsPXQuY2xlYW5Vcmwsbj0haC5pc0VtcHR5T2JqZWN0KHQuZGF0YSksKHQudGl0bGV8fG4pJiZoLm9wdGlvbnMuZGlzYWJsZVN1aWQhPT0hMCYmKHQuaGFzaD1oLmdldFNob3J0VXJsKHQudXJsKS5yZXBsYWNlKC9cXD8/XFwmX3N1aWQuKi8sXCJcIiksL1xcPy8udGVzdCh0Lmhhc2gpfHwodC5oYXNoKz1cIj9cIiksdC5oYXNoKz1cIiZfc3VpZD1cIit0LmlkKSx0Lmhhc2hlZFVybD1oLmdldEZ1bGxVcmwodC5oYXNoKSwoaC5lbXVsYXRlZC5wdXNoU3RhdGV8fGguYnVncy5zYWZhcmlQb2xsKSYmaC5oYXNVcmxEdXBsaWNhdGUodCkmJih0LnVybD10Lmhhc2hlZFVybCksdH0saC5jcmVhdGVTdGF0ZU9iamVjdD1mdW5jdGlvbihlLHQsbil7dmFyIHI9e2RhdGE6ZSx0aXRsZTp0LHVybDpufTtyZXR1cm4gcj1oLm5vcm1hbGl6ZVN0YXRlKHIpLHJ9LGguZ2V0U3RhdGVCeUlkPWZ1bmN0aW9uKGUpe2U9U3RyaW5nKGUpO3ZhciBuPWguaWRUb1N0YXRlW2VdfHxoLnN0b3JlLmlkVG9TdGF0ZVtlXXx8dDtyZXR1cm4gbn0saC5nZXRTdGF0ZVN0cmluZz1mdW5jdGlvbihlKXt2YXIgdCxuLHI7cmV0dXJuIHQ9aC5ub3JtYWxpemVTdGF0ZShlKSxuPXtkYXRhOnQuZGF0YSx0aXRsZTplLnRpdGxlLHVybDplLnVybH0scj1sLnN0cmluZ2lmeShuKSxyfSxoLmdldFN0YXRlSWQ9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gdD1oLm5vcm1hbGl6ZVN0YXRlKGUpLG49dC5pZCxufSxoLmdldEhhc2hCeVN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIHQ9aC5ub3JtYWxpemVTdGF0ZShlKSxuPXQuaGFzaCxufSxoLmV4dHJhY3RJZD1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaTtyZXR1cm4gZS5pbmRleE9mKFwiI1wiKSE9LTE/aT1lLnNwbGl0KFwiI1wiKVswXTppPWUsbj0vKC4qKVxcJl9zdWlkPShbMC05XSspJC8uZXhlYyhpKSxyPW4/blsxXXx8ZTplLHQ9bj9TdHJpbmcoblsyXXx8XCJcIik6XCJcIix0fHwhMX0saC5pc1RyYWRpdGlvbmFsQW5jaG9yPWZ1bmN0aW9uKGUpe3ZhciB0PSEvW1xcL1xcP1xcLl0vLnRlc3QoZSk7cmV0dXJuIHR9LGguZXh0cmFjdFN0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbCxyLGk7cmV0dXJuIHQ9dHx8ITEscj1oLmV4dHJhY3RJZChlKSxyJiYobj1oLmdldFN0YXRlQnlJZChyKSksbnx8KGk9aC5nZXRGdWxsVXJsKGUpLHI9aC5nZXRJZEJ5VXJsKGkpfHwhMSxyJiYobj1oLmdldFN0YXRlQnlJZChyKSksIW4mJnQmJiFoLmlzVHJhZGl0aW9uYWxBbmNob3IoZSkmJihuPWguY3JlYXRlU3RhdGVPYmplY3QobnVsbCxudWxsLGkpKSksbn0saC5nZXRJZEJ5VXJsPWZ1bmN0aW9uKGUpe3ZhciBuPWgudXJsVG9JZFtlXXx8aC5zdG9yZS51cmxUb0lkW2VdfHx0O3JldHVybiBufSxoLmdldExhc3RTYXZlZFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGguc2F2ZWRTdGF0ZXNbaC5zYXZlZFN0YXRlcy5sZW5ndGgtMV18fHR9LGguZ2V0TGFzdFN0b3JlZFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGguc3RvcmVkU3RhdGVzW2guc3RvcmVkU3RhdGVzLmxlbmd0aC0xXXx8dH0saC5oYXNVcmxEdXBsaWNhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ITEsbjtyZXR1cm4gbj1oLmV4dHJhY3RTdGF0ZShlLnVybCksdD1uJiZuLmlkIT09ZS5pZCx0fSxoLnN0b3JlU3RhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGgudXJsVG9JZFtlLnVybF09ZS5pZCxoLnN0b3JlZFN0YXRlcy5wdXNoKGguY2xvbmVPYmplY3QoZSkpLGV9LGguaXNMYXN0U2F2ZWRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD0hMSxuLHIsaTtyZXR1cm4gaC5zYXZlZFN0YXRlcy5sZW5ndGgmJihuPWUuaWQscj1oLmdldExhc3RTYXZlZFN0YXRlKCksaT1yLmlkLHQ9bj09PWkpLHR9LGguc2F2ZVN0YXRlPWZ1bmN0aW9uKGUpe3JldHVybiBoLmlzTGFzdFNhdmVkU3RhdGUoZSk/ITE6KGguc2F2ZWRTdGF0ZXMucHVzaChoLmNsb25lT2JqZWN0KGUpKSwhMCl9LGguZ2V0U3RhdGVCeUluZGV4PWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIHR5cGVvZiBlPT1cInVuZGVmaW5lZFwiP3Q9aC5zYXZlZFN0YXRlc1toLnNhdmVkU3RhdGVzLmxlbmd0aC0xXTplPDA/dD1oLnNhdmVkU3RhdGVzW2guc2F2ZWRTdGF0ZXMubGVuZ3RoK2VdOnQ9aC5zYXZlZFN0YXRlc1tlXSx0fSxoLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe3ZhciBlPW51bGw7cmV0dXJuIGguc2F2ZWRTdGF0ZXMubGVuZ3RoPDE/ZT0wOmU9aC5zYXZlZFN0YXRlcy5sZW5ndGgtMSxlfSxoLmdldEhhc2g9ZnVuY3Rpb24oZSl7dmFyIHQ9aC5nZXRMb2NhdGlvbkhyZWYoZSksbjtyZXR1cm4gbj1oLmdldEhhc2hCeVVybCh0KSxufSxoLnVuZXNjYXBlSGFzaD1mdW5jdGlvbihlKXt2YXIgdD1oLm5vcm1hbGl6ZUhhc2goZSk7cmV0dXJuIHQ9ZGVjb2RlVVJJQ29tcG9uZW50KHQpLHR9LGgubm9ybWFsaXplSGFzaD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoL1teI10qIy8sXCJcIikucmVwbGFjZSgvIy4qLyxcIlwiKTtyZXR1cm4gdH0saC5zZXRIYXNoPWZ1bmN0aW9uKGUsdCl7dmFyIG4saTtyZXR1cm4gdCE9PSExJiZoLmJ1c3koKT8oaC5wdXNoUXVldWUoe3Njb3BlOmgsY2FsbGJhY2s6aC5zZXRIYXNoLGFyZ3M6YXJndW1lbnRzLHF1ZXVlOnR9KSwhMSk6KGguYnVzeSghMCksbj1oLmV4dHJhY3RTdGF0ZShlLCEwKSxuJiYhaC5lbXVsYXRlZC5wdXNoU3RhdGU/aC5wdXNoU3RhdGUobi5kYXRhLG4udGl0bGUsbi51cmwsITEpOmguZ2V0SGFzaCgpIT09ZSYmKGguYnVncy5zZXRIYXNoPyhpPWguZ2V0UGFnZVVybCgpLGgucHVzaFN0YXRlKG51bGwsbnVsbCxpK1wiI1wiK2UsITEpKTpyLmxvY2F0aW9uLmhhc2g9ZSksaCl9LGguZXNjYXBlSGFzaD1mdW5jdGlvbih0KXt2YXIgbj1oLm5vcm1hbGl6ZUhhc2godCk7cmV0dXJuIG49ZS5lbmNvZGVVUklDb21wb25lbnQobiksaC5idWdzLmhhc2hFc2NhcGV8fChuPW4ucmVwbGFjZSgvXFwlMjEvZyxcIiFcIikucmVwbGFjZSgvXFwlMjYvZyxcIiZcIikucmVwbGFjZSgvXFwlM0QvZyxcIj1cIikucmVwbGFjZSgvXFwlM0YvZyxcIj9cIikpLG59LGguZ2V0SGFzaEJ5VXJsPWZ1bmN0aW9uKGUpe3ZhciB0PVN0cmluZyhlKS5yZXBsYWNlKC8oW14jXSopIz8oW14jXSopIz8oLiopLyxcIiQyXCIpO3JldHVybiB0PWgudW5lc2NhcGVIYXNoKHQpLHR9LGguc2V0VGl0bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50aXRsZSxuO3R8fChuPWguZ2V0U3RhdGVCeUluZGV4KDApLG4mJm4udXJsPT09ZS51cmwmJih0PW4udGl0bGV8fGgub3B0aW9ucy5pbml0aWFsVGl0bGUpKTt0cnl7ci5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpdGxlXCIpWzBdLmlubmVySFRNTD10LnJlcGxhY2UoXCI8XCIsXCImbHQ7XCIpLnJlcGxhY2UoXCI+XCIsXCImZ3Q7XCIpLnJlcGxhY2UoXCIgJiBcIixcIiAmYW1wOyBcIil9Y2F0Y2goaSl7fXJldHVybiByLnRpdGxlPXQsaH0saC5xdWV1ZXM9W10saC5idXN5PWZ1bmN0aW9uKGUpe3R5cGVvZiBlIT1cInVuZGVmaW5lZFwiP2guYnVzeS5mbGFnPWU6dHlwZW9mIGguYnVzeS5mbGFnPT1cInVuZGVmaW5lZFwiJiYoaC5idXN5LmZsYWc9ITEpO2lmKCFoLmJ1c3kuZmxhZyl7dShoLmJ1c3kudGltZW91dCk7dmFyIHQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHI7aWYoaC5idXN5LmZsYWcpcmV0dXJuO2ZvcihlPWgucXVldWVzLmxlbmd0aC0xO2U+PTA7LS1lKXtuPWgucXVldWVzW2VdO2lmKG4ubGVuZ3RoPT09MCljb250aW51ZTtyPW4uc2hpZnQoKSxoLmZpcmVRdWV1ZUl0ZW0ociksaC5idXN5LnRpbWVvdXQ9byh0LGgub3B0aW9ucy5idXN5RGVsYXkpfX07aC5idXN5LnRpbWVvdXQ9byh0LGgub3B0aW9ucy5idXN5RGVsYXkpfXJldHVybiBoLmJ1c3kuZmxhZ30saC5idXN5LmZsYWc9ITEsaC5maXJlUXVldWVJdGVtPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbGxiYWNrLmFwcGx5KGUuc2NvcGV8fGgsZS5hcmdzfHxbXSl9LGgucHVzaFF1ZXVlPWZ1bmN0aW9uKGUpe3JldHVybiBoLnF1ZXVlc1tlLnF1ZXVlfHwwXT1oLnF1ZXVlc1tlLnF1ZXVlfHwwXXx8W10saC5xdWV1ZXNbZS5xdWV1ZXx8MF0ucHVzaChlKSxofSxoLnF1ZXVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJihlPXtjYWxsYmFjazplfSksdHlwZW9mIHQhPVwidW5kZWZpbmVkXCImJihlLnF1ZXVlPXQpLGguYnVzeSgpP2gucHVzaFF1ZXVlKGUpOmguZmlyZVF1ZXVlSXRlbShlKSxofSxoLmNsZWFyUXVldWU9ZnVuY3Rpb24oKXtyZXR1cm4gaC5idXN5LmZsYWc9ITEsaC5xdWV1ZXM9W10saH0saC5zdGF0ZUNoYW5nZWQ9ITEsaC5kb3VibGVDaGVja2VyPSExLGguZG91YmxlQ2hlY2tDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiBoLnN0YXRlQ2hhbmdlZD0hMCxoLmRvdWJsZUNoZWNrQ2xlYXIoKSxofSxoLmRvdWJsZUNoZWNrQ2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gaC5kb3VibGVDaGVja2VyJiYodShoLmRvdWJsZUNoZWNrZXIpLGguZG91YmxlQ2hlY2tlcj0hMSksaH0saC5kb3VibGVDaGVjaz1mdW5jdGlvbihlKXtyZXR1cm4gaC5zdGF0ZUNoYW5nZWQ9ITEsaC5kb3VibGVDaGVja0NsZWFyKCksaC5idWdzLmllRG91YmxlQ2hlY2smJihoLmRvdWJsZUNoZWNrZXI9byhmdW5jdGlvbigpe3JldHVybiBoLmRvdWJsZUNoZWNrQ2xlYXIoKSxoLnN0YXRlQ2hhbmdlZHx8ZSgpLCEwfSxoLm9wdGlvbnMuZG91YmxlQ2hlY2tJbnRlcnZhbCkpLGh9LGguc2FmYXJpU3RhdGVQb2xsPWZ1bmN0aW9uKCl7dmFyIHQ9aC5leHRyYWN0U3RhdGUoaC5nZXRMb2NhdGlvbkhyZWYoKSksbjtpZighaC5pc0xhc3RTYXZlZFN0YXRlKHQpKXJldHVybiBuPXQsbnx8KG49aC5jcmVhdGVTdGF0ZU9iamVjdCgpKSxoLkFkYXB0ZXIudHJpZ2dlcihlLFwicG9wc3RhdGVcIiksaDtyZXR1cm59LGguYmFjaz1mdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiZoLmJ1c3koKT8oaC5wdXNoUXVldWUoe3Njb3BlOmgsY2FsbGJhY2s6aC5iYWNrLGFyZ3M6YXJndW1lbnRzLHF1ZXVlOmV9KSwhMSk6KGguYnVzeSghMCksaC5kb3VibGVDaGVjayhmdW5jdGlvbigpe2guYmFjayghMSl9KSxwLmdvKC0xKSwhMCl9LGguZm9yd2FyZD1mdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiZoLmJ1c3koKT8oaC5wdXNoUXVldWUoe3Njb3BlOmgsY2FsbGJhY2s6aC5mb3J3YXJkLGFyZ3M6YXJndW1lbnRzLHF1ZXVlOmV9KSwhMSk6KGguYnVzeSghMCksaC5kb3VibGVDaGVjayhmdW5jdGlvbigpe2guZm9yd2FyZCghMSl9KSxwLmdvKDEpLCEwKX0saC5nbz1mdW5jdGlvbihlLHQpe3ZhciBuO2lmKGU+MClmb3Iobj0xO248PWU7KytuKWguZm9yd2FyZCh0KTtlbHNle2lmKCEoZTwwKSl0aHJvdyBuZXcgRXJyb3IoXCJIaXN0b3J5LmdvOiBIaXN0b3J5LmdvIHJlcXVpcmVzIGEgcG9zaXRpdmUgb3IgbmVnYXRpdmUgaW50ZWdlciBwYXNzZWQuXCIpO2ZvcihuPS0xO24+PWU7LS1uKWguYmFjayh0KX1yZXR1cm4gaH07aWYoaC5lbXVsYXRlZC5wdXNoU3RhdGUpe3ZhciB2PWZ1bmN0aW9uKCl7fTtoLnB1c2hTdGF0ZT1oLnB1c2hTdGF0ZXx8dixoLnJlcGxhY2VTdGF0ZT1oLnJlcGxhY2VTdGF0ZXx8dn1lbHNlIGgub25Qb3BTdGF0ZT1mdW5jdGlvbih0LG4pe3ZhciByPSExLGk9ITEscyxvO3JldHVybiBoLmRvdWJsZUNoZWNrQ29tcGxldGUoKSxzPWguZ2V0SGFzaCgpLHM/KG89aC5leHRyYWN0U3RhdGUoc3x8aC5nZXRMb2NhdGlvbkhyZWYoKSwhMCksbz9oLnJlcGxhY2VTdGF0ZShvLmRhdGEsby50aXRsZSxvLnVybCwhMSk6KGguQWRhcHRlci50cmlnZ2VyKGUsXCJhbmNob3JjaGFuZ2VcIiksaC5idXN5KCExKSksaC5leHBlY3RlZFN0YXRlSWQ9ITEsITEpOihyPWguQWRhcHRlci5leHRyYWN0RXZlbnREYXRhKFwic3RhdGVcIix0LG4pfHwhMSxyP2k9aC5nZXRTdGF0ZUJ5SWQocik6aC5leHBlY3RlZFN0YXRlSWQ/aT1oLmdldFN0YXRlQnlJZChoLmV4cGVjdGVkU3RhdGVJZCk6aT1oLmV4dHJhY3RTdGF0ZShoLmdldExvY2F0aW9uSHJlZigpKSxpfHwoaT1oLmNyZWF0ZVN0YXRlT2JqZWN0KG51bGwsbnVsbCxoLmdldExvY2F0aW9uSHJlZigpKSksaC5leHBlY3RlZFN0YXRlSWQ9ITEsaC5pc0xhc3RTYXZlZFN0YXRlKGkpPyhoLmJ1c3koITEpLCExKTooaC5zdG9yZVN0YXRlKGkpLGguc2F2ZVN0YXRlKGkpLGguc2V0VGl0bGUoaSksaC5BZGFwdGVyLnRyaWdnZXIoZSxcInN0YXRlY2hhbmdlXCIpLGguYnVzeSghMSksITApKX0saC5BZGFwdGVyLmJpbmQoZSxcInBvcHN0YXRlXCIsaC5vblBvcFN0YXRlKSxoLnB1c2hTdGF0ZT1mdW5jdGlvbih0LG4scixpKXtpZihoLmdldEhhc2hCeVVybChyKSYmaC5lbXVsYXRlZC5wdXNoU3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiSGlzdG9yeS5qcyBkb2VzIG5vdCBzdXBwb3J0IHN0YXRlcyB3aXRoIGZyYWdlbWVudC1pZGVudGlmaWVycyAoaGFzaGVzL2FuY2hvcnMpLlwiKTtpZihpIT09ITEmJmguYnVzeSgpKXJldHVybiBoLnB1c2hRdWV1ZSh7c2NvcGU6aCxjYWxsYmFjazpoLnB1c2hTdGF0ZSxhcmdzOmFyZ3VtZW50cyxxdWV1ZTppfSksITE7aC5idXN5KCEwKTt2YXIgcz1oLmNyZWF0ZVN0YXRlT2JqZWN0KHQsbixyKTtyZXR1cm4gaC5pc0xhc3RTYXZlZFN0YXRlKHMpP2guYnVzeSghMSk6KGguc3RvcmVTdGF0ZShzKSxoLmV4cGVjdGVkU3RhdGVJZD1zLmlkLHAucHVzaFN0YXRlKHMuaWQscy50aXRsZSxzLnVybCksaC5BZGFwdGVyLnRyaWdnZXIoZSxcInBvcHN0YXRlXCIpKSwhMH0saC5yZXBsYWNlU3RhdGU9ZnVuY3Rpb24odCxuLHIsaSl7aWYoaC5nZXRIYXNoQnlVcmwocikmJmguZW11bGF0ZWQucHVzaFN0YXRlKXRocm93IG5ldyBFcnJvcihcIkhpc3RvcnkuanMgZG9lcyBub3Qgc3VwcG9ydCBzdGF0ZXMgd2l0aCBmcmFnZW1lbnQtaWRlbnRpZmllcnMgKGhhc2hlcy9hbmNob3JzKS5cIik7aWYoaSE9PSExJiZoLmJ1c3koKSlyZXR1cm4gaC5wdXNoUXVldWUoe3Njb3BlOmgsY2FsbGJhY2s6aC5yZXBsYWNlU3RhdGUsYXJnczphcmd1bWVudHMscXVldWU6aX0pLCExO2guYnVzeSghMCk7dmFyIHM9aC5jcmVhdGVTdGF0ZU9iamVjdCh0LG4scik7cmV0dXJuIGguaXNMYXN0U2F2ZWRTdGF0ZShzKT9oLmJ1c3koITEpOihoLnN0b3JlU3RhdGUocyksaC5leHBlY3RlZFN0YXRlSWQ9cy5pZCxwLnJlcGxhY2VTdGF0ZShzLmlkLHMudGl0bGUscy51cmwpLGguQWRhcHRlci50cmlnZ2VyKGUsXCJwb3BzdGF0ZVwiKSksITB9O2lmKHMpe3RyeXtoLnN0b3JlPWwucGFyc2Uocy5nZXRJdGVtKFwiSGlzdG9yeS5zdG9yZVwiKSl8fHt9fWNhdGNoKG0pe2guc3RvcmU9e319aC5ub3JtYWxpemVTdG9yZSgpfWVsc2UgaC5zdG9yZT17fSxoLm5vcm1hbGl6ZVN0b3JlKCk7aC5BZGFwdGVyLmJpbmQoZSxcInVubG9hZFwiLGguY2xlYXJBbGxJbnRlcnZhbHMpLGguc2F2ZVN0YXRlKGguc3RvcmVTdGF0ZShoLmV4dHJhY3RTdGF0ZShoLmdldExvY2F0aW9uSHJlZigpLCEwKSkpLHMmJihoLm9uVW5sb2FkPWZ1bmN0aW9uKCl7dmFyIGUsdCxuO3RyeXtlPWwucGFyc2Uocy5nZXRJdGVtKFwiSGlzdG9yeS5zdG9yZVwiKSl8fHt9fWNhdGNoKHIpe2U9e319ZS5pZFRvU3RhdGU9ZS5pZFRvU3RhdGV8fHt9LGUudXJsVG9JZD1lLnVybFRvSWR8fHt9LGUuc3RhdGVUb0lkPWUuc3RhdGVUb0lkfHx7fTtmb3IodCBpbiBoLmlkVG9TdGF0ZSl7aWYoIWguaWRUb1N0YXRlLmhhc093blByb3BlcnR5KHQpKWNvbnRpbnVlO2UuaWRUb1N0YXRlW3RdPWguaWRUb1N0YXRlW3RdfWZvcih0IGluIGgudXJsVG9JZCl7aWYoIWgudXJsVG9JZC5oYXNPd25Qcm9wZXJ0eSh0KSljb250aW51ZTtlLnVybFRvSWRbdF09aC51cmxUb0lkW3RdfWZvcih0IGluIGguc3RhdGVUb0lkKXtpZighaC5zdGF0ZVRvSWQuaGFzT3duUHJvcGVydHkodCkpY29udGludWU7ZS5zdGF0ZVRvSWRbdF09aC5zdGF0ZVRvSWRbdF19aC5zdG9yZT1lLGgubm9ybWFsaXplU3RvcmUoKSxuPWwuc3RyaW5naWZ5KGUpO3RyeXtzLnNldEl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIsbil9Y2F0Y2goaSl7aWYoaS5jb2RlIT09RE9NRXhjZXB0aW9uLlFVT1RBX0VYQ0VFREVEX0VSUil0aHJvdyBpO3MubGVuZ3RoJiYocy5yZW1vdmVJdGVtKFwiSGlzdG9yeS5zdG9yZVwiKSxzLnNldEl0ZW0oXCJIaXN0b3J5LnN0b3JlXCIsbikpfX0saC5pbnRlcnZhbExpc3QucHVzaChhKGgub25VbmxvYWQsaC5vcHRpb25zLnN0b3JlSW50ZXJ2YWwpKSxoLkFkYXB0ZXIuYmluZChlLFwiYmVmb3JldW5sb2FkXCIsaC5vblVubG9hZCksaC5BZGFwdGVyLmJpbmQoZSxcInVubG9hZFwiLGgub25VbmxvYWQpKTtpZighaC5lbXVsYXRlZC5wdXNoU3RhdGUpe2guYnVncy5zYWZhcmlQb2xsJiZoLmludGVydmFsTGlzdC5wdXNoKGEoaC5zYWZhcmlTdGF0ZVBvbGwsaC5vcHRpb25zLnNhZmFyaVBvbGxJbnRlcnZhbCkpO2lmKGkudmVuZG9yPT09XCJBcHBsZSBDb21wdXRlciwgSW5jLlwifHwoaS5hcHBDb2RlTmFtZXx8XCJcIik9PT1cIk1vemlsbGFcIiloLkFkYXB0ZXIuYmluZChlLFwiaGFzaGNoYW5nZVwiLGZ1bmN0aW9uKCl7aC5BZGFwdGVyLnRyaWdnZXIoZSxcInBvcHN0YXRlXCIpfSksaC5nZXRIYXNoKCkmJmguQWRhcHRlci5vbkRvbUxvYWQoZnVuY3Rpb24oKXtoLkFkYXB0ZXIudHJpZ2dlcihlLFwiaGFzaGNoYW5nZVwiKX0pfX0sKCFoLm9wdGlvbnN8fCFoLm9wdGlvbnMuZGVsYXlJbml0KSYmaC5pbml0KCl9KHdpbmRvdykiLCIvKiFcclxuKiBqcXVlcnkuaW5wdXRtYXNrLmJ1bmRsZS5qc1xyXG4qIGh0dHBzOi8vZ2l0aHViLmNvbS9Sb2JpbkhlcmJvdHMvSW5wdXRtYXNrXHJcbiogQ29weXJpZ2h0IChjKSAyMDEwIC0gMjAxNyBSb2JpbiBIZXJib3RzXHJcbiogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIChodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocClcclxuKiBWZXJzaW9uOiAzLjMuMTFcclxuKi9cclxuXHJcbiFmdW5jdGlvbihtb2R1bGVzKSB7XHJcbiAgICBmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XHJcbiAgICAgICAgaWYgKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcclxuICAgICAgICB2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XHJcbiAgICAgICAgICAgIGk6IG1vZHVsZUlkLFxyXG4gICAgICAgICAgICBsOiAhMSxcclxuICAgICAgICAgICAgZXhwb3J0czoge31cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSwgXHJcbiAgICAgICAgbW9kdWxlLmwgPSAhMCwgbW9kdWxlLmV4cG9ydHM7XHJcbiAgICB9XHJcbiAgICB2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xyXG4gICAgX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcywgX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcywgX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XHJcbiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpIHx8IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLFxyXG4gICAgICAgICAgICBnZXQ6IGdldHRlclxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcbiAgICAgICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlLmRlZmF1bHQ7XHJcbiAgICAgICAgfSA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIFwiYVwiLCBnZXR0ZXIpLCBnZXR0ZXI7XHJcbiAgICB9LCBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcclxuICAgIH0sIF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCIsIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XHJcbn0oWyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XHJcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICAhZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gICAgICAgIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbIF9fd2VicGFja19yZXF1aXJlX18oMikgXSwgdm9pZCAwICE9PSAoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSBmYWN0b3J5KSA/IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXykgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG4gICAgfShmdW5jdGlvbigkKSB7XHJcbiAgICAgICAgcmV0dXJuICQ7XHJcbiAgICB9KTtcclxufSwgZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fLCBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XHJcbiAgICB9IDogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcclxuICAgIH07XHJcbiAgICAhZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gICAgICAgIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMTApLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKSBdLCBcclxuICAgICAgICB2b2lkIDAgIT09IChfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IGZhY3RvcnkpID8gX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyk7XHJcbiAgICB9KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIElucHV0bWFzayhhbGlhcywgb3B0aW9ucywgaW50ZXJuYWwpIHtcclxuICAgICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIElucHV0bWFzaykpIHJldHVybiBuZXcgSW5wdXRtYXNrKGFsaWFzLCBvcHRpb25zLCBpbnRlcm5hbCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwgPSB1bmRlZmluZWQsIHRoaXMuZXZlbnRzID0ge30sIHRoaXMubWFza3NldCA9IHVuZGVmaW5lZCwgdGhpcy5yZWZyZXNoVmFsdWUgPSAhMSwgXHJcbiAgICAgICAgICAgICEwICE9PSBpbnRlcm5hbCAmJiAoJC5pc1BsYWluT2JqZWN0KGFsaWFzKSA/IG9wdGlvbnMgPSBhbGlhcyA6IChvcHRpb25zID0gb3B0aW9ucyB8fCB7fSkuYWxpYXMgPSBhbGlhcywgXHJcbiAgICAgICAgICAgIHRoaXMub3B0cyA9ICQuZXh0ZW5kKCEwLCB7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyksIHRoaXMubm9NYXNrc0NhY2hlID0gb3B0aW9ucyAmJiBvcHRpb25zLmRlZmluaXRpb25zICE9PSB1bmRlZmluZWQsIFxyXG4gICAgICAgICAgICB0aGlzLnVzZXJPcHRpb25zID0gb3B0aW9ucyB8fCB7fSwgdGhpcy5pc1JUTCA9IHRoaXMub3B0cy5udW1lcmljSW5wdXQsIHJlc29sdmVBbGlhcyh0aGlzLm9wdHMuYWxpYXMsIG9wdGlvbnMsIHRoaXMub3B0cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlQWxpYXMoYWxpYXNTdHIsIG9wdGlvbnMsIG9wdHMpIHtcclxuICAgICAgICAgICAgdmFyIGFsaWFzRGVmaW5pdGlvbiA9IElucHV0bWFzay5wcm90b3R5cGUuYWxpYXNlc1thbGlhc1N0cl07XHJcbiAgICAgICAgICAgIHJldHVybiBhbGlhc0RlZmluaXRpb24gPyAoYWxpYXNEZWZpbml0aW9uLmFsaWFzICYmIHJlc29sdmVBbGlhcyhhbGlhc0RlZmluaXRpb24uYWxpYXMsIHVuZGVmaW5lZCwgb3B0cyksIFxyXG4gICAgICAgICAgICAkLmV4dGVuZCghMCwgb3B0cywgYWxpYXNEZWZpbml0aW9uKSwgJC5leHRlbmQoITAsIG9wdHMsIG9wdGlvbnMpLCAhMCkgOiAobnVsbCA9PT0gb3B0cy5tYXNrICYmIChvcHRzLm1hc2sgPSBhbGlhc1N0ciksIFxyXG4gICAgICAgICAgICAhMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWFza1NldChvcHRzLCBub2NhY2hlKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWFzayhtYXNrLCBtZXRhZGF0YSwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4TWFzayA9ICExO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG1hc2sgJiYgXCJcIiAhPT0gbWFzayB8fCAoKHJlZ2V4TWFzayA9IG51bGwgIT09IG9wdHMucmVnZXgpID8gbWFzayA9IChtYXNrID0gb3B0cy5yZWdleCkucmVwbGFjZSgvXihcXF4pKC4qKShcXCQpJC8sIFwiJDJcIikgOiAocmVnZXhNYXNrID0gITAsIFxyXG4gICAgICAgICAgICAgICAgbWFzayA9IFwiLipcIikpLCAxID09PSBtYXNrLmxlbmd0aCAmJiAhMSA9PT0gb3B0cy5ncmVlZHkgJiYgMCAhPT0gb3B0cy5yZXBlYXQgJiYgKG9wdHMucGxhY2Vob2xkZXIgPSBcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICBvcHRzLnJlcGVhdCA+IDAgfHwgXCIqXCIgPT09IG9wdHMucmVwZWF0IHx8IFwiK1wiID09PSBvcHRzLnJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBlYXRTdGFydCA9IFwiKlwiID09PSBvcHRzLnJlcGVhdCA/IDAgOiBcIitcIiA9PT0gb3B0cy5yZXBlYXQgPyAxIDogb3B0cy5yZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFzayA9IG9wdHMuZ3JvdXBtYXJrZXIuc3RhcnQgKyBtYXNrICsgb3B0cy5ncm91cG1hcmtlci5lbmQgKyBvcHRzLnF1YW50aWZpZXJtYXJrZXIuc3RhcnQgKyByZXBlYXRTdGFydCArIFwiLFwiICsgb3B0cy5yZXBlYXQgKyBvcHRzLnF1YW50aWZpZXJtYXJrZXIuZW5kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG1hc2tzZXREZWZpbml0aW9uLCBtYXNrZGVmS2V5ID0gcmVnZXhNYXNrID8gXCJyZWdleF9cIiArIG9wdHMucmVnZXggOiBvcHRzLm51bWVyaWNJbnB1dCA/IG1hc2suc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIikgOiBtYXNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIElucHV0bWFzay5wcm90b3R5cGUubWFza3NDYWNoZVttYXNrZGVmS2V5XSA9PT0gdW5kZWZpbmVkIHx8ICEwID09PSBub2NhY2hlID8gKG1hc2tzZXREZWZpbml0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hc2s6IG1hc2ssXHJcbiAgICAgICAgICAgICAgICAgICAgbWFza1Rva2VuOiBJbnB1dG1hc2sucHJvdG90eXBlLmFuYWx5c2VNYXNrKG1hc2ssIHJlZ2V4TWFzaywgb3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRQb3NpdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIF9idWZmZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0czoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tMZW5ndGg6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgfSwgITAgIT09IG5vY2FjaGUgJiYgKElucHV0bWFzay5wcm90b3R5cGUubWFza3NDYWNoZVttYXNrZGVmS2V5XSA9IG1hc2tzZXREZWZpbml0aW9uLCBcclxuICAgICAgICAgICAgICAgIG1hc2tzZXREZWZpbml0aW9uID0gJC5leHRlbmQoITAsIHt9LCBJbnB1dG1hc2sucHJvdG90eXBlLm1hc2tzQ2FjaGVbbWFza2RlZktleV0pKSkgOiBtYXNrc2V0RGVmaW5pdGlvbiA9ICQuZXh0ZW5kKCEwLCB7fSwgSW5wdXRtYXNrLnByb3RvdHlwZS5tYXNrc0NhY2hlW21hc2tkZWZLZXldKSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrc2V0RGVmaW5pdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKG9wdHMubWFzaykgJiYgKG9wdHMubWFzayA9IG9wdHMubWFzayhvcHRzKSksICQuaXNBcnJheShvcHRzLm1hc2spKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5tYXNrLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmtlZXBTdGF0aWMgPSBudWxsID09PSBvcHRzLmtlZXBTdGF0aWMgfHwgb3B0cy5rZWVwU3RhdGljO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbHRNYXNrID0gb3B0cy5ncm91cG1hcmtlci5zdGFydDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5lYWNoKG9wdHMubnVtZXJpY0lucHV0ID8gb3B0cy5tYXNrLnJldmVyc2UoKSA6IG9wdHMubWFzaywgZnVuY3Rpb24obmR4LCBtc2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0TWFzay5sZW5ndGggPiAxICYmIChhbHRNYXNrICs9IG9wdHMuZ3JvdXBtYXJrZXIuZW5kICsgb3B0cy5hbHRlcm5hdG9ybWFya2VyICsgb3B0cy5ncm91cG1hcmtlci5zdGFydCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2subWFzayA9PT0gdW5kZWZpbmVkIHx8ICQuaXNGdW5jdGlvbihtc2subWFzaykgPyBhbHRNYXNrICs9IG1zayA6IGFsdE1hc2sgKz0gbXNrLm1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfSksIGFsdE1hc2sgKz0gb3B0cy5ncm91cG1hcmtlci5lbmQsIGdlbmVyYXRlTWFzayhhbHRNYXNrLCBvcHRzLm1hc2ssIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3B0cy5tYXNrID0gb3B0cy5tYXNrLnBvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvcHRzLm1hc2sgJiYgb3B0cy5tYXNrLm1hc2sgIT09IHVuZGVmaW5lZCAmJiAhJC5pc0Z1bmN0aW9uKG9wdHMubWFzay5tYXNrKSA/IGdlbmVyYXRlTWFzayhvcHRzLm1hc2subWFzaywgb3B0cy5tYXNrLCBvcHRzKSA6IGdlbmVyYXRlTWFzayhvcHRzLm1hc2ssIG9wdHMubWFzaywgb3B0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIG1hc2tTY29wZShhY3Rpb25PYmosIG1hc2tzZXQsIG9wdHMpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFza1RlbXBsYXRlKGJhc2VPbklucHV0LCBtaW5pbWFsUG9zLCBpbmNsdWRlTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgbWluaW1hbFBvcyA9IG1pbmltYWxQb3MgfHwgMDtcclxuICAgICAgICAgICAgICAgIHZhciBuZHhJbnRsenIsIHRlc3QsIHRlc3RQb3MsIG1hc2tUZW1wbGF0ZSA9IFtdLCBwb3MgPSAwLCBsdnAgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgICEwID09PSBiYXNlT25JbnB1dCAmJiBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSA/ICh0ZXN0ID0gKHRlc3RQb3MgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSkubWF0Y2gsIFxyXG4gICAgICAgICAgICAgICAgICAgIG5keEludGx6ciA9IHRlc3RQb3MubG9jYXRvci5zbGljZSgpLCBtYXNrVGVtcGxhdGUucHVzaCghMCA9PT0gaW5jbHVkZU1vZGUgPyB0ZXN0UG9zLmlucHV0IDogITEgPT09IGluY2x1ZGVNb2RlID8gdGVzdC5uYXRpdmVEZWYgOiBnZXRQbGFjZWhvbGRlcihwb3MsIHRlc3QpKSkgOiAodGVzdCA9ICh0ZXN0UG9zID0gZ2V0VGVzdFRlbXBsYXRlKHBvcywgbmR4SW50bHpyLCBwb3MgLSAxKSkubWF0Y2gsIFxyXG4gICAgICAgICAgICAgICAgICAgIG5keEludGx6ciA9IHRlc3RQb3MubG9jYXRvci5zbGljZSgpLCAoITEgPT09IG9wdHMuaml0TWFza2luZyB8fCBwb3MgPCBsdnAgfHwgXCJudW1iZXJcIiA9PSB0eXBlb2Ygb3B0cy5qaXRNYXNraW5nICYmIGlzRmluaXRlKG9wdHMuaml0TWFza2luZykgJiYgb3B0cy5qaXRNYXNraW5nID4gcG9zKSAmJiBtYXNrVGVtcGxhdGUucHVzaCghMSA9PT0gaW5jbHVkZU1vZGUgPyB0ZXN0Lm5hdGl2ZURlZiA6IGdldFBsYWNlaG9sZGVyKHBvcywgdGVzdCkpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zKys7XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlICgobWF4TGVuZ3RoID09PSB1bmRlZmluZWQgfHwgcG9zIDwgbWF4TGVuZ3RoKSAmJiAobnVsbCAhPT0gdGVzdC5mbiB8fCBcIlwiICE9PSB0ZXN0LmRlZikgfHwgbWluaW1hbFBvcyA+IHBvcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiA9PT0gbWFza1RlbXBsYXRlW21hc2tUZW1wbGF0ZS5sZW5ndGggLSAxXSAmJiBtYXNrVGVtcGxhdGUucG9wKCksIGdldE1hc2tTZXQoKS5tYXNrTGVuZ3RoID0gcG9zICsgMSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrVGVtcGxhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFza1NldCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXNrc2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0TWFza1NldChzb2Z0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFza3NldCA9IGdldE1hc2tTZXQoKTtcclxuICAgICAgICAgICAgICAgIG1hc2tzZXQuYnVmZmVyID0gdW5kZWZpbmVkLCAhMCAhPT0gc29mdCAmJiAobWFza3NldC52YWxpZFBvc2l0aW9ucyA9IHt9LCBtYXNrc2V0LnAgPSAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRMYXN0VmFsaWRQb3NpdGlvbihjbG9zZXN0VG8sIHN0cmljdCwgdmFsaWRQb3NpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiZWZvcmUgPSAtMSwgYWZ0ZXIgPSAtMSwgdmFsaWRzID0gdmFsaWRQb3NpdGlvbnMgfHwgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zO1xyXG4gICAgICAgICAgICAgICAgY2xvc2VzdFRvID09PSB1bmRlZmluZWQgJiYgKGNsb3Nlc3RUbyA9IC0xKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc05keCBpbiB2YWxpZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHNOZHggPSBwYXJzZUludChwb3NOZHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkc1twc05keF0gJiYgKHN0cmljdCB8fCAhMCAhPT0gdmFsaWRzW3BzTmR4XS5nZW5lcmF0ZWRJbnB1dCkgJiYgKHBzTmR4IDw9IGNsb3Nlc3RUbyAmJiAoYmVmb3JlID0gcHNOZHgpLCBcclxuICAgICAgICAgICAgICAgICAgICBwc05keCA+PSBjbG9zZXN0VG8gJiYgKGFmdGVyID0gcHNOZHgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAtMSAhPT0gYmVmb3JlICYmIGNsb3Nlc3RUbyAtIGJlZm9yZSA+IDEgfHwgYWZ0ZXIgPCBjbG9zZXN0VG8gPyBiZWZvcmUgOiBhZnRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdHJpcFZhbGlkUG9zaXRpb25zKHN0YXJ0LCBlbmQsIG5vY2hlY2ssIHN0cmljdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGksIHN0YXJ0UG9zID0gc3RhcnQsIHBvc2l0aW9uc0Nsb25lID0gJC5leHRlbmQoITAsIHt9LCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnMpLCBuZWVkc1ZhbGlkYXRpb24gPSAhMTtcclxuICAgICAgICAgICAgICAgIGZvciAoZ2V0TWFza1NldCgpLnAgPSBzdGFydCwgaSA9IGVuZCAtIDE7IGkgPj0gc3RhcnRQb3M7IGktLSkgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldICE9PSB1bmRlZmluZWQgJiYgKCEwICE9PSBub2NoZWNrICYmICghZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldLm1hdGNoLm9wdGlvbmFsaXR5ICYmIGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NNYXRjaCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3NdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NNYXRjaCAhPT0gdW5kZWZpbmVkICYmIG51bGwgPT09IHBvc01hdGNoLm1hdGNoLmZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2TWF0Y2ggPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zIC0gMV0sIG5leHRNYXRjaCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MgKyAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIG5leHRNYXRjaCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XHJcbiAgICAgICAgICAgICAgICB9KGkpIHx8ICExID09PSBvcHRzLmNhbkNsZWFyUG9zaXRpb24oZ2V0TWFza1NldCgpLCBpLCBnZXRMYXN0VmFsaWRQb3NpdGlvbigpLCBzdHJpY3QsIG9wdHMpKSB8fCBkZWxldGUgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldKTtcclxuICAgICAgICAgICAgICAgIGZvciAocmVzZXRNYXNrU2V0KCEwKSwgaSA9IHN0YXJ0UG9zICsgMTsgaSA8PSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpOyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKDtnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbc3RhcnRQb3NdICE9PSB1bmRlZmluZWQ7ICkgc3RhcnRQb3MrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHN0YXJ0UG9zICYmIChpID0gc3RhcnRQb3MgKyAxKSwgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldID09PSB1bmRlZmluZWQgJiYgaXNNYXNrKGkpKSBpKys7IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGdldFRlc3RUZW1wbGF0ZShpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IG5lZWRzVmFsaWRhdGlvbiAmJiBwb3NpdGlvbnNDbG9uZVtzdGFydFBvc10gJiYgcG9zaXRpb25zQ2xvbmVbc3RhcnRQb3NdLm1hdGNoLmRlZiA9PT0gdC5tYXRjaC5kZWYgPyAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3N0YXJ0UG9zXSA9ICQuZXh0ZW5kKCEwLCB7fSwgcG9zaXRpb25zQ2xvbmVbc3RhcnRQb3NdKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tzdGFydFBvc10uaW5wdXQgPSB0LmlucHV0LCBkZWxldGUgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrKSA6IHBvc2l0aW9uQ2FuTWF0Y2hEZWZpbml0aW9uKHN0YXJ0UG9zLCB0Lm1hdGNoLmRlZikgPyAhMSAhPT0gaXNWYWxpZChzdGFydFBvcywgdC5pbnB1dCB8fCBnZXRQbGFjZWhvbGRlcihpKSwgITApICYmIChkZWxldGUgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrLCBuZWVkc1ZhbGlkYXRpb24gPSAhMCkgOiBpc01hc2soaSkgfHwgKGkrKywgc3RhcnRQb3MtLSksIHN0YXJ0UG9zKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzZXRNYXNrU2V0KCEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVUZXN0VGVtcGxhdGUodGVzdHMsIGd1ZXNzTmV4dEJlc3QpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHRlc3RQb3MsIHRlc3RQb3NpdGlvbnMgPSB0ZXN0cywgbHZwID0gZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSwgbHZUZXN0ID0gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2x2cF0gfHwgZ2V0VGVzdHMoMClbMF0sIGx2VGVzdEFsdEFyciA9IGx2VGVzdC5hbHRlcm5hdGlvbiAhPT0gdW5kZWZpbmVkID8gbHZUZXN0LmxvY2F0b3JbbHZUZXN0LmFsdGVybmF0aW9uXS50b1N0cmluZygpLnNwbGl0KFwiLFwiKSA6IFtdLCBuZHggPSAwOyBuZHggPCB0ZXN0UG9zaXRpb25zLmxlbmd0aCAmJiAoISgodGVzdFBvcyA9IHRlc3RQb3NpdGlvbnNbbmR4XSkubWF0Y2ggJiYgKG9wdHMuZ3JlZWR5ICYmICEwICE9PSB0ZXN0UG9zLm1hdGNoLm9wdGlvbmFsUXVhbnRpZmllciB8fCAoITEgPT09IHRlc3RQb3MubWF0Y2gub3B0aW9uYWxpdHkgfHwgITEgPT09IHRlc3RQb3MubWF0Y2gubmV3QmxvY2tNYXJrZXIpICYmICEwICE9PSB0ZXN0UG9zLm1hdGNoLm9wdGlvbmFsUXVhbnRpZmllcikgJiYgKGx2VGVzdC5hbHRlcm5hdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGx2VGVzdC5hbHRlcm5hdGlvbiAhPT0gdGVzdFBvcy5hbHRlcm5hdGlvbiB8fCB0ZXN0UG9zLmxvY2F0b3JbbHZUZXN0LmFsdGVybmF0aW9uXSAhPT0gdW5kZWZpbmVkICYmIGNoZWNrQWx0ZXJuYXRpb25NYXRjaCh0ZXN0UG9zLmxvY2F0b3JbbHZUZXN0LmFsdGVybmF0aW9uXS50b1N0cmluZygpLnNwbGl0KFwiLFwiKSwgbHZUZXN0QWx0QXJyKSkpIHx8ICEwID09PSBndWVzc05leHRCZXN0ICYmIChudWxsICE9PSB0ZXN0UG9zLm1hdGNoLmZuIHx8IC9bMC05YS1iQS1aXS8udGVzdCh0ZXN0UG9zLm1hdGNoLmRlZikpKTsgbmR4KyspIDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0UG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRlc3RUZW1wbGF0ZShwb3MsIG5keEludGx6ciwgdHN0UHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSB8fCBkZXRlcm1pbmVUZXN0VGVtcGxhdGUoZ2V0VGVzdHMocG9zLCBuZHhJbnRsenIgPyBuZHhJbnRsenIuc2xpY2UoKSA6IG5keEludGx6ciwgdHN0UHMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRUZXN0KHBvcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3NdID8gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc10gOiBnZXRUZXN0cyhwb3MpWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FuTWF0Y2hEZWZpbml0aW9uKHBvcywgZGVmKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB2YWxpZCA9ICExLCB0ZXN0cyA9IGdldFRlc3RzKHBvcyksIHRuZHggPSAwOyB0bmR4IDwgdGVzdHMubGVuZ3RoOyB0bmR4KyspIGlmICh0ZXN0c1t0bmR4XS5tYXRjaCAmJiB0ZXN0c1t0bmR4XS5tYXRjaC5kZWYgPT09IGRlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VGVzdHMocG9zLCBuZHhJbnRsenIsIHRzdFBzKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlVGVzdEZyb21Ub2tlbihtYXNrVG9rZW4sIG5keEluaXRpYWxpemVyLCBsb29wTmR4LCBxdWFudGlmaWVyUmVjdXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1hdGNoKG1hdGNoLCBsb29wTmR4LCBxdWFudGlmaWVyUmVjdXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc0ZpcnN0TWF0Y2gobGF0ZXN0TWF0Y2gsIHRva2VuR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdE1hdGNoID0gMCA9PT0gJC5pbkFycmF5KGxhdGVzdE1hdGNoLCB0b2tlbkdyb3VwLm1hdGNoZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0TWF0Y2ggfHwgJC5lYWNoKHRva2VuR3JvdXAubWF0Y2hlcywgZnVuY3Rpb24obmR4LCBtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghMCA9PT0gbWF0Y2guaXNRdWFudGlmaWVyICYmIChmaXJzdE1hdGNoID0gaXNGaXJzdE1hdGNoKGxhdGVzdE1hdGNoLCB0b2tlbkdyb3VwLm1hdGNoZXNbbmR4IC0gMV0pKSkgcmV0dXJuICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGZpcnN0TWF0Y2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZU5keEluaXRpYWxpemVyKHBvcywgYWx0ZXJuYXRlTmR4LCB0YXJnZXRBbHRlcm5hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlc3RNYXRjaCwgaW5kZXhQb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3BvcyAtIDFdICYmIHRhcmdldEFsdGVybmF0aW9uICYmIGdldE1hc2tTZXQoKS50ZXN0c1twb3NdKSBmb3IgKHZhciB2cEFsdGVybmF0aW9uID0gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3BvcyAtIDFdLmxvY2F0b3IsIHRwQWx0ZXJuYXRpb24gPSBnZXRNYXNrU2V0KCkudGVzdHNbcG9zXVswXS5sb2NhdG9yLCBpID0gMDsgaSA8IHRhcmdldEFsdGVybmF0aW9uOyBpKyspIGlmICh2cEFsdGVybmF0aW9uW2ldICE9PSB0cEFsdGVybmF0aW9uW2ldKSByZXR1cm4gdnBBbHRlcm5hdGlvbi5zbGljZSh0YXJnZXRBbHRlcm5hdGlvbiArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRNYXNrU2V0KCkudGVzdHNbcG9zXSB8fCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSkgJiYgJC5lYWNoKGdldE1hc2tTZXQoKS50ZXN0c1twb3NdIHx8IFsgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc10gXSwgZnVuY3Rpb24obmR4LCBsbW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsdGVybmF0aW9uID0gdGFyZ2V0QWx0ZXJuYXRpb24gIT09IHVuZGVmaW5lZCA/IHRhcmdldEFsdGVybmF0aW9uIDogbG1udC5hbHRlcm5hdGlvbiwgbmR4UG9zID0gbG1udC5sb2NhdG9yW2FsdGVybmF0aW9uXSAhPT0gdW5kZWZpbmVkID8gbG1udC5sb2NhdG9yW2FsdGVybmF0aW9uXS50b1N0cmluZygpLmluZGV4T2YoYWx0ZXJuYXRlTmR4KSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleFBvcyA9PT0gdW5kZWZpbmVkIHx8IG5keFBvcyA8IGluZGV4UG9zKSAmJiAtMSAhPT0gbmR4UG9zICYmIChiZXN0TWF0Y2ggPSBsbW50LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFBvcyA9IG5keFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgYmVzdE1hdGNoID8gYmVzdE1hdGNoLmxvY2F0b3Iuc2xpY2UoKHRhcmdldEFsdGVybmF0aW9uICE9PSB1bmRlZmluZWQgPyB0YXJnZXRBbHRlcm5hdGlvbiA6IGJlc3RNYXRjaC5hbHRlcm5hdGlvbikgKyAxKSA6IHRhcmdldEFsdGVybmF0aW9uICE9PSB1bmRlZmluZWQgPyByZXNvbHZlTmR4SW5pdGlhbGl6ZXIocG9zLCBhbHRlcm5hdGVOZHgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0UG9zID4gMWU0KSB0aHJvdyBcIklucHV0bWFzazogVGhlcmUgaXMgcHJvYmFibHkgYW4gZXJyb3IgaW4geW91ciBtYXNrIGRlZmluaXRpb24gb3IgaW4gdGhlIGNvZGUuIENyZWF0ZSBhbiBpc3N1ZSBvbiBnaXRodWIgd2l0aCBhbiBleGFtcGxlIG9mIHRoZSBtYXNrIHlvdSBhcmUgdXNpbmcuIFwiICsgZ2V0TWFza1NldCgpLm1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0UG9zID09PSBwb3MgJiYgbWF0Y2gubWF0Y2hlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbWF0Y2hlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoOiBtYXRjaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0b3I6IGxvb3BOZHgucmV2ZXJzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Q6IGNhY2hlRGVwZW5kZW5jeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5tYXRjaGVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5pc0dyb3VwICYmIHF1YW50aWZpZXJSZWN1cnNlICE9PSBtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9IGhhbmRsZU1hdGNoKG1hc2tUb2tlbi5tYXRjaGVzWyQuaW5BcnJheShtYXRjaCwgbWFza1Rva2VuLm1hdGNoZXMpICsgMV0sIGxvb3BOZHgpKSByZXR1cm4gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoLmlzT3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uYWxUb2tlbiA9IG1hdGNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9IHJlc29sdmVUZXN0RnJvbVRva2VuKG1hdGNoLCBuZHhJbml0aWFsaXplciwgbG9vcE5keCwgcXVhbnRpZmllclJlY3Vyc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXRlc3RNYXRjaCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXS5tYXRjaCwgIWlzRmlyc3RNYXRjaChsYXRlc3RNYXRjaCwgb3B0aW9uYWxUb2tlbikpIHJldHVybiAhMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0U3RvcCA9ICEwLCB0ZXN0UG9zID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2guaXNBbHRlcm5hdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hbHRNYXRjaGVzLCBhbHRlcm5hdGVUb2tlbiA9IG1hdGNoLCBtYWx0ZXJuYXRlTWF0Y2hlcyA9IFtdLCBjdXJyZW50TWF0Y2hlcyA9IG1hdGNoZXMuc2xpY2UoKSwgbG9vcE5keENudCA9IGxvb3BOZHgubGVuZ3RoLCBhbHRJbmRleCA9IG5keEluaXRpYWxpemVyLmxlbmd0aCA+IDAgPyBuZHhJbml0aWFsaXplci5zaGlmdCgpIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0xID09PSBhbHRJbmRleCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBhbHRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW1uZHgsIGN1cnJlbnRQb3MgPSB0ZXN0UG9zLCBuZHhJbml0aWFsaXplckNsb25lID0gbmR4SW5pdGlhbGl6ZXIuc2xpY2UoKSwgYWx0SW5kZXhBcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGFsdEluZGV4KSBhbHRJbmRleEFyciA9IGFsdEluZGV4LnNwbGl0KFwiLFwiKTsgZWxzZSBmb3IgKGFtbmR4ID0gMDsgYW1uZHggPCBhbHRlcm5hdGVUb2tlbi5tYXRjaGVzLmxlbmd0aDsgYW1uZHgrKykgYWx0SW5kZXhBcnIucHVzaChhbW5keCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5keCA9IDA7IG5keCA8IGFsdEluZGV4QXJyLmxlbmd0aDsgbmR4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbW5keCA9IHBhcnNlSW50KGFsdEluZGV4QXJyW25keF0pLCBtYXRjaGVzID0gW10sIG5keEluaXRpYWxpemVyID0gcmVzb2x2ZU5keEluaXRpYWxpemVyKHRlc3RQb3MsIGFtbmR4LCBsb29wTmR4Q250KSB8fCBuZHhJbml0aWFsaXplckNsb25lLnNsaWNlKCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITAgIT09IChtYXRjaCA9IGhhbmRsZU1hdGNoKGFsdGVybmF0ZVRva2VuLm1hdGNoZXNbYW1uZHhdIHx8IG1hc2tUb2tlbi5tYXRjaGVzW2FtbmR4XSwgWyBhbW5keCBdLmNvbmNhdChsb29wTmR4KSwgcXVhbnRpZmllclJlY3Vyc2UpIHx8IG1hdGNoKSAmJiBtYXRjaCAhPT0gdW5kZWZpbmVkICYmIGFsdEluZGV4QXJyW2FsdEluZGV4QXJyLmxlbmd0aCAtIDFdIDwgYWx0ZXJuYXRlVG9rZW4ubWF0Y2hlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnRuZHggPSAkLmluQXJyYXkobWF0Y2gsIG1hc2tUb2tlbi5tYXRjaGVzKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza1Rva2VuLm1hdGNoZXMubGVuZ3RoID4gbnRuZHggJiYgKG1hdGNoID0gaGFuZGxlTWF0Y2gobWFza1Rva2VuLm1hdGNoZXNbbnRuZHhdLCBbIG50bmR4IF0uY29uY2F0KGxvb3BOZHguc2xpY2UoMSwgbG9vcE5keC5sZW5ndGgpKSwgcXVhbnRpZmllclJlY3Vyc2UpKSAmJiAoYWx0SW5kZXhBcnIucHVzaChudG5keC50b1N0cmluZygpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG1hdGNoZXMsIGZ1bmN0aW9uKG5keCwgbG1udCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbW50LmFsdGVybmF0aW9uID0gbG9vcE5keC5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbHRNYXRjaGVzID0gbWF0Y2hlcy5zbGljZSgpLCB0ZXN0UG9zID0gY3VycmVudFBvcywgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmR4MSA9IDA7IG5keDEgPCBtYWx0TWF0Y2hlcy5sZW5ndGg7IG5keDErKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHRNYXRjaCA9IG1hbHRNYXRjaGVzW25keDFdLCBkcm9wTWF0Y2ggPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRNYXRjaC5hbHRlcm5hdGlvbiA9IGFsdE1hdGNoLmFsdGVybmF0aW9uIHx8IGxvb3BOZHhDbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmR4MiA9IDA7IG5keDIgPCBtYWx0ZXJuYXRlTWF0Y2hlcy5sZW5ndGg7IG5keDIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWx0TWF0Y2gyID0gbWFsdGVybmF0ZU1hdGNoZXNbbmR4Ml07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBhbHRJbmRleCB8fCAtMSAhPT0gJC5pbkFycmF5KGFsdE1hdGNoLmxvY2F0b3JbYWx0TWF0Y2guYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCksIGFsdEluZGV4QXJyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmN0aW9uKHNvdXJjZSwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5tYXRjaC5uYXRpdmVEZWYgPT09IHRhcmdldC5tYXRjaC5uYXRpdmVEZWYgfHwgc291cmNlLm1hdGNoLmRlZiA9PT0gdGFyZ2V0Lm1hdGNoLm5hdGl2ZURlZiB8fCBzb3VyY2UubWF0Y2gubmF0aXZlRGVmID09PSB0YXJnZXQubWF0Y2guZGVmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShhbHRNYXRjaCwgYWx0TWF0Y2gyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BNYXRjaCA9ICEwLCBhbHRNYXRjaC5hbHRlcm5hdGlvbiA9PT0gYWx0TWF0Y2gyLmFsdGVybmF0aW9uICYmIC0xID09PSBhbHRNYXRjaDIubG9jYXRvclthbHRNYXRjaDIuYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCkuaW5kZXhPZihhbHRNYXRjaC5sb2NhdG9yW2FsdE1hdGNoLmFsdGVybmF0aW9uXSkgJiYgKGFsdE1hdGNoMi5sb2NhdG9yW2FsdE1hdGNoMi5hbHRlcm5hdGlvbl0gPSBhbHRNYXRjaDIubG9jYXRvclthbHRNYXRjaDIuYWx0ZXJuYXRpb25dICsgXCIsXCIgKyBhbHRNYXRjaC5sb2NhdG9yW2FsdE1hdGNoLmFsdGVybmF0aW9uXSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0TWF0Y2gyLmFsdGVybmF0aW9uID0gYWx0TWF0Y2guYWx0ZXJuYXRpb24pLCBhbHRNYXRjaC5tYXRjaC5uYXRpdmVEZWYgPT09IGFsdE1hdGNoMi5tYXRjaC5kZWYgJiYgKGFsdE1hdGNoLmxvY2F0b3JbYWx0TWF0Y2guYWx0ZXJuYXRpb25dID0gYWx0TWF0Y2gyLmxvY2F0b3JbYWx0TWF0Y2gyLmFsdGVybmF0aW9uXSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFsdGVybmF0ZU1hdGNoZXMuc3BsaWNlKG1hbHRlcm5hdGVNYXRjaGVzLmluZGV4T2YoYWx0TWF0Y2gyKSwgMSwgYWx0TWF0Y2gpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbHRNYXRjaC5tYXRjaC5kZWYgPT09IGFsdE1hdGNoMi5tYXRjaC5kZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wTWF0Y2ggPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdW5jdGlvbihzb3VyY2UsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSBzb3VyY2UubWF0Y2guZm4gJiYgbnVsbCAhPT0gdGFyZ2V0Lm1hdGNoLmZuICYmIHRhcmdldC5tYXRjaC5mbi50ZXN0KHNvdXJjZS5tYXRjaC5kZWYsIGdldE1hc2tTZXQoKSwgcG9zLCAhMSwgb3B0cywgITEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShhbHRNYXRjaCwgYWx0TWF0Y2gyKSB8fCBmdW5jdGlvbihzb3VyY2UsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBzb3VyY2UubWF0Y2guZm4gJiYgbnVsbCAhPT0gdGFyZ2V0Lm1hdGNoLmZuICYmIHRhcmdldC5tYXRjaC5mbi50ZXN0KHNvdXJjZS5tYXRjaC5kZWYucmVwbGFjZSgvW1xcW1xcXV0vZywgXCJcIiksIGdldE1hc2tTZXQoKSwgcG9zLCAhMSwgb3B0cywgITEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShhbHRNYXRjaCwgYWx0TWF0Y2gyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdE1hdGNoLmFsdGVybmF0aW9uID09PSBhbHRNYXRjaDIuYWx0ZXJuYXRpb24gJiYgLTEgPT09IGFsdE1hdGNoLmxvY2F0b3JbYWx0TWF0Y2guYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCkuaW5kZXhPZihhbHRNYXRjaDIubG9jYXRvclthbHRNYXRjaDIuYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCkuc3BsaXQoXCJcIilbMF0pICYmIChhbHRNYXRjaC5uYSA9IGFsdE1hdGNoLm5hIHx8IGFsdE1hdGNoLmxvY2F0b3JbYWx0TWF0Y2guYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xID09PSBhbHRNYXRjaC5uYS5pbmRleE9mKGFsdE1hdGNoLmxvY2F0b3JbYWx0TWF0Y2guYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCkuc3BsaXQoXCJcIilbMF0pICYmIChhbHRNYXRjaC5uYSA9IGFsdE1hdGNoLm5hICsgXCIsXCIgKyBhbHRNYXRjaC5sb2NhdG9yW2FsdE1hdGNoMi5hbHRlcm5hdGlvbl0udG9TdHJpbmcoKS5zcGxpdChcIlwiKVswXSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BNYXRjaCA9ICEwLCBhbHRNYXRjaC5sb2NhdG9yW2FsdE1hdGNoLmFsdGVybmF0aW9uXSA9IGFsdE1hdGNoMi5sb2NhdG9yW2FsdE1hdGNoMi5hbHRlcm5hdGlvbl0udG9TdHJpbmcoKS5zcGxpdChcIlwiKVswXSArIFwiLFwiICsgYWx0TWF0Y2gubG9jYXRvclthbHRNYXRjaC5hbHRlcm5hdGlvbl0sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbHRlcm5hdGVNYXRjaGVzLnNwbGljZShtYWx0ZXJuYXRlTWF0Y2hlcy5pbmRleE9mKGFsdE1hdGNoMiksIDAsIGFsdE1hdGNoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcE1hdGNoIHx8IG1hbHRlcm5hdGVNYXRjaGVzLnB1c2goYWx0TWF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGFsdEluZGV4ICYmIChtYWx0ZXJuYXRlTWF0Y2hlcyA9ICQubWFwKG1hbHRlcm5hdGVNYXRjaGVzLCBmdW5jdGlvbihsbW50LCBuZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Zpbml0ZShuZHgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsdGVybmF0aW9uID0gbG1udC5hbHRlcm5hdGlvbiwgYWx0TG9jQXJyID0gbG1udC5sb2NhdG9yW2FsdGVybmF0aW9uXS50b1N0cmluZygpLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbW50LmxvY2F0b3JbYWx0ZXJuYXRpb25dID0gdW5kZWZpbmVkLCBsbW50LmFsdGVybmF0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGFsbmR4ID0gMDsgYWxuZHggPCBhbHRMb2NBcnIubGVuZ3RoOyBhbG5keCsrKSAtMSAhPT0gJC5pbkFycmF5KGFsdExvY0FyclthbG5keF0sIGFsdEluZGV4QXJyKSAmJiAobG1udC5sb2NhdG9yW2FsdGVybmF0aW9uXSAhPT0gdW5kZWZpbmVkID8gKGxtbnQubG9jYXRvclthbHRlcm5hdGlvbl0gKz0gXCIsXCIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxtbnQubG9jYXRvclthbHRlcm5hdGlvbl0gKz0gYWx0TG9jQXJyW2FsbmR4XSkgOiBsbW50LmxvY2F0b3JbYWx0ZXJuYXRpb25dID0gcGFyc2VJbnQoYWx0TG9jQXJyW2FsbmR4XSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxtbnQuYWx0ZXJuYXRpb24gPSBhbHRlcm5hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxtbnQubG9jYXRvclthbHRlcm5hdGlvbl0gIT09IHVuZGVmaW5lZCkgcmV0dXJuIGxtbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgbWF0Y2hlcyA9IGN1cnJlbnRNYXRjaGVzLmNvbmNhdChtYWx0ZXJuYXRlTWF0Y2hlcyksIHRlc3RQb3MgPSBwb3MsIGluc2VydFN0b3AgPSBtYXRjaGVzLmxlbmd0aCA+IDAsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hbHRlcm5hdGVNYXRjaGVzLmxlbmd0aCA+IDAsIG5keEluaXRpYWxpemVyID0gbmR4SW5pdGlhbGl6ZXJDbG9uZS5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBtYXRjaCA9IGhhbmRsZU1hdGNoKGFsdGVybmF0ZVRva2VuLm1hdGNoZXNbYWx0SW5kZXhdIHx8IG1hc2tUb2tlbi5tYXRjaGVzW2FsdEluZGV4XSwgWyBhbHRJbmRleCBdLmNvbmNhdChsb29wTmR4KSwgcXVhbnRpZmllclJlY3Vyc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgcmV0dXJuICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaC5pc1F1YW50aWZpZXIgJiYgcXVhbnRpZmllclJlY3Vyc2UgIT09IG1hc2tUb2tlbi5tYXRjaGVzWyQuaW5BcnJheShtYXRjaCwgbWFza1Rva2VuLm1hdGNoZXMpIC0gMV0pIGZvciAodmFyIHF0ID0gbWF0Y2gsIHFuZHggPSBuZHhJbml0aWFsaXplci5sZW5ndGggPiAwID8gbmR4SW5pdGlhbGl6ZXIuc2hpZnQoKSA6IDA7IHFuZHggPCAoaXNOYU4ocXQucXVhbnRpZmllci5tYXgpID8gcW5keCArIDEgOiBxdC5xdWFudGlmaWVyLm1heCkgJiYgdGVzdFBvcyA8PSBwb3M7IHFuZHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbkdyb3VwID0gbWFza1Rva2VuLm1hdGNoZXNbJC5pbkFycmF5KHF0LCBtYXNrVG9rZW4ubWF0Y2hlcykgLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggPSBoYW5kbGVNYXRjaCh0b2tlbkdyb3VwLCBbIHFuZHggXS5jb25jYXQobG9vcE5keCksIHRva2VuR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXRlc3RNYXRjaCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXS5tYXRjaCwgbGF0ZXN0TWF0Y2gub3B0aW9uYWxRdWFudGlmaWVyID0gcW5keCA+IHF0LnF1YW50aWZpZXIubWluIC0gMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlyc3RNYXRjaChsYXRlc3RNYXRjaCwgdG9rZW5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxbmR4ID4gcXQucXVhbnRpZmllci5taW4gLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0U3RvcCA9ICEwLCB0ZXN0UG9zID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoID0gcmVzb2x2ZVRlc3RGcm9tVG9rZW4obWF0Y2gsIG5keEluaXRpYWxpemVyLCBsb29wTmR4LCBxdWFudGlmaWVyUmVjdXJzZSkpIHJldHVybiAhMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHRlc3RQb3MrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdG5keCA9IG5keEluaXRpYWxpemVyLmxlbmd0aCA+IDAgPyBuZHhJbml0aWFsaXplci5zaGlmdCgpIDogMDsgdG5keCA8IG1hc2tUb2tlbi5tYXRjaGVzLmxlbmd0aDsgdG5keCsrKSBpZiAoITAgIT09IG1hc2tUb2tlbi5tYXRjaGVzW3RuZHhdLmlzUXVhbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBoYW5kbGVNYXRjaChtYXNrVG9rZW4ubWF0Y2hlc1t0bmR4XSwgWyB0bmR4IF0uY29uY2F0KGxvb3BOZHgpLCBxdWFudGlmaWVyUmVjdXJzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiB0ZXN0UG9zID09PSBwb3MpIHJldHVybiBtYXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlc3RQb3MgPiBwb3MpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpbHRlclRlc3RzKHRlc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMua2VlcFN0YXRpYyAmJiBwb3MgPiAwICYmIHRlc3RzLmxlbmd0aCA+IDEgKyAoXCJcIiA9PT0gdGVzdHNbdGVzdHMubGVuZ3RoIC0gMV0ubWF0Y2guZGVmID8gMSA6IDApICYmICEwICE9PSB0ZXN0c1swXS5tYXRjaC5vcHRpb25hbGl0eSAmJiAhMCAhPT0gdGVzdHNbMF0ubWF0Y2gub3B0aW9uYWxRdWFudGlmaWVyICYmIG51bGwgPT09IHRlc3RzWzBdLm1hdGNoLmZuICYmICEvWzAtOWEtYkEtWl0vLnRlc3QodGVzdHNbMF0ubWF0Y2guZGVmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3BvcyAtIDFdID09PSB1bmRlZmluZWQpIHJldHVybiBbIGRldGVybWluZVRlc3RUZW1wbGF0ZSh0ZXN0cykgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MgLSAxXS5hbHRlcm5hdGlvbiA9PT0gdGVzdHNbMF0uYWx0ZXJuYXRpb24pIHJldHVybiBbIGRldGVybWluZVRlc3RUZW1wbGF0ZSh0ZXN0cykgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MgLSAxXSkgcmV0dXJuIFsgZGV0ZXJtaW5lVGVzdFRlbXBsYXRlKHRlc3RzKSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF0ZXN0TWF0Y2gsIG1hc2tUb2tlbnMgPSBnZXRNYXNrU2V0KCkubWFza1Rva2VuLCB0ZXN0UG9zID0gbmR4SW50bHpyID8gdHN0UHMgOiAwLCBuZHhJbml0aWFsaXplciA9IG5keEludGx6ciA/IG5keEludGx6ci5zbGljZSgpIDogWyAwIF0sIG1hdGNoZXMgPSBbXSwgaW5zZXJ0U3RvcCA9ICExLCBjYWNoZURlcGVuZGVuY3kgPSBuZHhJbnRsenIgPyBuZHhJbnRsenIuam9pbihcIlwiKSA6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmR4SW50bHpyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGVzdCwgcHJldmlvdXNQb3MgPSBwb3MgLSAxOyAodGVzdCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twcmV2aW91c1Bvc10gfHwgZ2V0TWFza1NldCgpLnRlc3RzW3ByZXZpb3VzUG9zXSkgPT09IHVuZGVmaW5lZCAmJiBwcmV2aW91c1BvcyA+IC0xOyApIHByZXZpb3VzUG9zLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QgIT09IHVuZGVmaW5lZCAmJiBwcmV2aW91c1BvcyA+IC0xICYmIChuZHhJbml0aWFsaXplciA9IGZ1bmN0aW9uKHRlc3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuaXNBcnJheSh0ZXN0cykgfHwgKHRlc3RzID0gWyB0ZXN0cyBdKSwgdGVzdHMubGVuZ3RoID4gMCAmJiAodGVzdHNbMF0uYWx0ZXJuYXRpb24gPT09IHVuZGVmaW5lZCA/IDAgPT09IChsb2NhdG9yID0gZGV0ZXJtaW5lVGVzdFRlbXBsYXRlKHRlc3RzLnNsaWNlKCkpLmxvY2F0b3Iuc2xpY2UoKSkubGVuZ3RoICYmIChsb2NhdG9yID0gdGVzdHNbMF0ubG9jYXRvci5zbGljZSgpKSA6ICQuZWFjaCh0ZXN0cywgZnVuY3Rpb24obmR4LCB0c3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJcIiAhPT0gdHN0LmRlZikgaWYgKDAgPT09IGxvY2F0b3IubGVuZ3RoKSBsb2NhdG9yID0gdHN0LmxvY2F0b3Iuc2xpY2UoKTsgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2F0b3IubGVuZ3RoOyBpKyspIHRzdC5sb2NhdG9yW2ldICYmIC0xID09PSBsb2NhdG9yW2ldLnRvU3RyaW5nKCkuaW5kZXhPZih0c3QubG9jYXRvcltpXSkgJiYgKGxvY2F0b3JbaV0gKz0gXCIsXCIgKyB0c3QubG9jYXRvcltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGxvY2F0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0odGVzdCksIGNhY2hlRGVwZW5kZW5jeSA9IG5keEluaXRpYWxpemVyLmpvaW4oXCJcIiksIHRlc3RQb3MgPSBwcmV2aW91c1Bvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRNYXNrU2V0KCkudGVzdHNbcG9zXSAmJiBnZXRNYXNrU2V0KCkudGVzdHNbcG9zXVswXS5jZCA9PT0gY2FjaGVEZXBlbmRlbmN5KSByZXR1cm4gZmlsdGVyVGVzdHMoZ2V0TWFza1NldCgpLnRlc3RzW3Bvc10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG10bmR4ID0gbmR4SW5pdGlhbGl6ZXIuc2hpZnQoKTsgbXRuZHggPCBtYXNrVG9rZW5zLmxlbmd0aCAmJiAhKHJlc29sdmVUZXN0RnJvbVRva2VuKG1hc2tUb2tlbnNbbXRuZHhdLCBuZHhJbml0aWFsaXplciwgWyBtdG5keCBdKSAmJiB0ZXN0UG9zID09PSBwb3MgfHwgdGVzdFBvcyA+IHBvcyk7IG10bmR4KyspIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAoMCA9PT0gbWF0Y2hlcy5sZW5ndGggfHwgaW5zZXJ0U3RvcCkgJiYgbWF0Y2hlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsaXR5OiAhMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaW5nOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWY6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdG9yOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBjZDogY2FjaGVEZXBlbmRlbmN5XHJcbiAgICAgICAgICAgICAgICB9KSwgbmR4SW50bHpyICE9PSB1bmRlZmluZWQgJiYgZ2V0TWFza1NldCgpLnRlc3RzW3Bvc10gPyBmaWx0ZXJUZXN0cygkLmV4dGVuZCghMCwgW10sIG1hdGNoZXMpKSA6IChnZXRNYXNrU2V0KCkudGVzdHNbcG9zXSA9ICQuZXh0ZW5kKCEwLCBbXSwgbWF0Y2hlcyksIFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyVGVzdHMoZ2V0TWFza1NldCgpLnRlc3RzW3Bvc10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRCdWZmZXJUZW1wbGF0ZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNYXNrU2V0KCkuX2J1ZmZlciA9PT0gdW5kZWZpbmVkICYmIChnZXRNYXNrU2V0KCkuX2J1ZmZlciA9IGdldE1hc2tUZW1wbGF0ZSghMSwgMSksIFxyXG4gICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLmJ1ZmZlciA9PT0gdW5kZWZpbmVkICYmIChnZXRNYXNrU2V0KCkuYnVmZmVyID0gZ2V0TWFza1NldCgpLl9idWZmZXIuc2xpY2UoKSkpLCBcclxuICAgICAgICAgICAgICAgIGdldE1hc2tTZXQoKS5fYnVmZmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJ1ZmZlcihub0NhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TWFza1NldCgpLmJ1ZmZlciAhPT0gdW5kZWZpbmVkICYmICEwICE9PSBub0NhY2hlIHx8IChnZXRNYXNrU2V0KCkuYnVmZmVyID0gZ2V0TWFza1RlbXBsYXRlKCEwLCBnZXRMYXN0VmFsaWRQb3NpdGlvbigpLCAhMCkpLCBcclxuICAgICAgICAgICAgICAgIGdldE1hc2tTZXQoKS5idWZmZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVmcmVzaEZyb21CdWZmZXIoc3RhcnQsIGVuZCwgYnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSwgcDtcclxuICAgICAgICAgICAgICAgIGlmICghMCA9PT0gc3RhcnQpIHJlc2V0TWFza1NldCgpLCBzdGFydCA9IDAsIGVuZCA9IGJ1ZmZlci5sZW5ndGg7IGVsc2UgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgZGVsZXRlIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAocCA9IHN0YXJ0LCBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgaWYgKHJlc2V0TWFza1NldCghMCksIGJ1ZmZlcltpXSAhPT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbFJlc3VsdCA9IGlzVmFsaWQocCwgYnVmZmVyW2ldLCAhMCwgITApO1xyXG4gICAgICAgICAgICAgICAgICAgICExICE9PSB2YWxSZXN1bHQgJiYgKHJlc2V0TWFza1NldCghMCksIHAgPSB2YWxSZXN1bHQuY2FyZXQgIT09IHVuZGVmaW5lZCA/IHZhbFJlc3VsdC5jYXJldCA6IHZhbFJlc3VsdC5wb3MgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYXNpbmcoZWxlbSwgdGVzdCwgcG9zKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wdHMuY2FzaW5nIHx8IHRlc3QuY2FzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1cHBlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0gPSBlbGVtLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwibG93ZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtID0gZWxlbS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgY2FzZSBcInRpdGxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc0JlZm9yZSA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MgLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtID0gMCA9PT0gcG9zIHx8IHBvc0JlZm9yZSAmJiBwb3NCZWZvcmUuaW5wdXQgPT09IFN0cmluZy5mcm9tQ2hhckNvZGUoSW5wdXRtYXNrLmtleUNvZGUuU1BBQ0UpID8gZWxlbS50b1VwcGVyQ2FzZSgpIDogZWxlbS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKG9wdHMuY2FzaW5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnMpLCBlbGVtID0gb3B0cy5jYXNpbmcuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tBbHRlcm5hdGlvbk1hdGNoKGFsdEFycjEsIGFsdEFycjIsIG5hKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuYU5keCwgYWx0QXJyQyA9IG9wdHMuZ3JlZWR5ID8gYWx0QXJyMiA6IGFsdEFycjIuc2xpY2UoMCwgMSksIGlzTWF0Y2ggPSAhMSwgbmFBcnIgPSBuYSAhPT0gdW5kZWZpbmVkID8gbmEuc3BsaXQoXCIsXCIpIDogW10sIGkgPSAwOyBpIDwgbmFBcnIubGVuZ3RoOyBpKyspIC0xICE9PSAobmFOZHggPSBhbHRBcnIxLmluZGV4T2YobmFBcnJbaV0pKSAmJiBhbHRBcnIxLnNwbGljZShuYU5keCwgMSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhbG5keCA9IDA7IGFsbmR4IDwgYWx0QXJyMS5sZW5ndGg7IGFsbmR4KyspIGlmICgtMSAhPT0gJC5pbkFycmF5KGFsdEFycjFbYWxuZHhdLCBhbHRBcnJDKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTWF0Y2ggPSAhMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc01hdGNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzVmFsaWQocG9zLCBjLCBzdHJpY3QsIGZyb21TZXRWYWxpZCwgZnJvbUFsdGVybmF0ZSwgdmFsaWRhdGVPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGlvbihwb3NPYmopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gaXNSVEwgPyBwb3NPYmouYmVnaW4gLSBwb3NPYmouZW5kID4gMSB8fCBwb3NPYmouYmVnaW4gLSBwb3NPYmouZW5kID09IDEgOiBwb3NPYmouZW5kIC0gcG9zT2JqLmJlZ2luID4gMSB8fCBwb3NPYmouZW5kIC0gcG9zT2JqLmJlZ2luID09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbiAmJiAwID09PSBwb3NPYmouYmVnaW4gJiYgcG9zT2JqLmVuZCA9PT0gZ2V0TWFza1NldCgpLm1hc2tMZW5ndGggPyBcImZ1bGxcIiA6IHNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9pc1ZhbGlkKHBvc2l0aW9uLCBjLCBzdHJpY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcnNsdCA9ICExO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkLmVhY2goZ2V0VGVzdHMocG9zaXRpb24pLCBmdW5jdGlvbihuZHgsIHRzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ZXN0ID0gdHN0Lm1hdGNoLCBsb29wZW5kID0gYyA/IDEgOiAwLCBjaHJzID0gXCJcIiwgaSA9IHRlc3QuY2FyZGluYWxpdHk7IGkgPiBsb29wZW5kOyBpLS0pIGNocnMgKz0gZ2V0QnVmZmVyRWxlbWVudChwb3NpdGlvbiAtIChpIC0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyAmJiAoY2hycyArPSBjKSwgZ2V0QnVmZmVyKCEwKSwgITEgIT09IChyc2x0ID0gbnVsbCAhPSB0ZXN0LmZuID8gdGVzdC5mbi50ZXN0KGNocnMsIGdldE1hc2tTZXQoKSwgcG9zaXRpb24sIHN0cmljdCwgb3B0cywgaXNTZWxlY3Rpb24ocG9zKSkgOiAoYyA9PT0gdGVzdC5kZWYgfHwgYyA9PT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyKSAmJiBcIlwiICE9PSB0ZXN0LmRlZiAmJiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjOiBnZXRQbGFjZWhvbGRlcihwb3NpdGlvbiwgdGVzdCwgITApIHx8IHRlc3QuZGVmLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSByc2x0LmMgIT09IHVuZGVmaW5lZCA/IHJzbHQuYyA6IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gZWxlbSA9PT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyICYmIG51bGwgPT09IHRlc3QuZm4gPyBnZXRQbGFjZWhvbGRlcihwb3NpdGlvbiwgdGVzdCwgITApIHx8IHRlc3QuZGVmIDogZWxlbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZGF0ZWRQb3MgPSBwb3NpdGlvbiwgcG9zc2libGVNb2RpZmllZEJ1ZmZlciA9IGdldEJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJzbHQucmVtb3ZlICE9PSB1bmRlZmluZWQgJiYgKCQuaXNBcnJheShyc2x0LnJlbW92ZSkgfHwgKHJzbHQucmVtb3ZlID0gWyByc2x0LnJlbW92ZSBdKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocnNsdC5yZW1vdmUuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIgLSBhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKG5keCwgbG1udCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwVmFsaWRQb3NpdGlvbnMobG1udCwgbG1udCArIDEsICEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgcnNsdC5pbnNlcnQgIT09IHVuZGVmaW5lZCAmJiAoJC5pc0FycmF5KHJzbHQuaW5zZXJ0KSB8fCAocnNsdC5pbnNlcnQgPSBbIHJzbHQuaW5zZXJ0IF0pLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChyc2x0Lmluc2VydC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZnVuY3Rpb24obmR4LCBsbW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZChsbW50LnBvcywgbG1udC5jLCAhMCwgZnJvbVNldFZhbGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgcnNsdC5yZWZyZXNoRnJvbUJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoID0gcnNsdC5yZWZyZXNoRnJvbUJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVmcmVzaEZyb21CdWZmZXIoITAgPT09IHJlZnJlc2ggPyByZWZyZXNoIDogcmVmcmVzaC5zdGFydCwgcmVmcmVzaC5lbmQsIHBvc3NpYmxlTW9kaWZpZWRCdWZmZXIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByc2x0LnBvcyA9PT0gdW5kZWZpbmVkICYmIHJzbHQuYyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gcnNsdC5wb3MgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbGlkYXRlZFBvcyA9IHJzbHQucG9zICE9PSB1bmRlZmluZWQgPyByc2x0LnBvcyA6IHBvc2l0aW9uKSAhPT0gcG9zaXRpb24pIHJldHVybiByc2x0ID0gJC5leHRlbmQocnNsdCwgaXNWYWxpZCh2YWxpZGF0ZWRQb3MsIGVsZW0sICEwLCBmcm9tU2V0VmFsaWQpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEwICE9PSByc2x0ICYmIHJzbHQucG9zICE9PSB1bmRlZmluZWQgJiYgcnNsdC5wb3MgIT09IHBvc2l0aW9uICYmICh2YWxpZGF0ZWRQb3MgPSByc2x0LnBvcywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRnJvbUJ1ZmZlcihwb3NpdGlvbiwgdmFsaWRhdGVkUG9zLCBnZXRCdWZmZXIoKS5zbGljZSgpKSwgdmFsaWRhdGVkUG9zICE9PSBwb3NpdGlvbikpIHJldHVybiByc2x0ID0gJC5leHRlbmQocnNsdCwgaXNWYWxpZCh2YWxpZGF0ZWRQb3MsIGVsZW0sICEwKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgITE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCEwID09PSByc2x0IHx8IHJzbHQucG9zICE9PSB1bmRlZmluZWQgfHwgcnNsdC5jICE9PSB1bmRlZmluZWQpICYmIChuZHggPiAwICYmIHJlc2V0TWFza1NldCghMCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsaWRQb3NpdGlvbih2YWxpZGF0ZWRQb3MsICQuZXh0ZW5kKHt9LCB0c3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogY2FzaW5nKGVsZW0sIHRlc3QsIHZhbGlkYXRlZFBvcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBmcm9tU2V0VmFsaWQsIGlzU2VsZWN0aW9uKHBvcykpIHx8IChyc2x0ID0gITEpLCAhMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSwgcnNsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFZhbGlkUG9zaXRpb24ocG9zLCB2YWxpZFRlc3QsIGZyb21TZXRWYWxpZCwgaXNTZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3Rpb24gfHwgb3B0cy5pbnNlcnRNb2RlICYmIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3NdICE9PSB1bmRlZmluZWQgJiYgZnJvbVNldFZhbGlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIHBvc2l0aW9uc0Nsb25lID0gJC5leHRlbmQoITAsIHt9LCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnMpLCBsdnAgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbih1bmRlZmluZWQsICEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gcG9zOyBpIDw9IGx2cDsgaSsrKSBkZWxldGUgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSA9ICQuZXh0ZW5kKCEwLCB7fSwgdmFsaWRUZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGosIHZhbGlkID0gITAsIHZwcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9ucywgbmVlZHNWYWxpZGF0aW9uID0gITEsIGluaXRpYWxMZW5ndGggPSBnZXRNYXNrU2V0KCkubWFza0xlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gaiA9IHBvczsgaSA8PSBsdnA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBwb3NpdGlvbnNDbG9uZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICE9PSB1bmRlZmluZWQpIGZvciAodmFyIHBvc01hdGNoID0gajsgcG9zTWF0Y2ggPCBnZXRNYXNrU2V0KCkubWFza0xlbmd0aCAmJiAobnVsbCA9PT0gdC5tYXRjaC5mbiAmJiB2cHNbaV0gJiYgKCEwID09PSB2cHNbaV0ubWF0Y2gub3B0aW9uYWxRdWFudGlmaWVyIHx8ICEwID09PSB2cHNbaV0ubWF0Y2gub3B0aW9uYWxpdHkpIHx8IG51bGwgIT0gdC5tYXRjaC5mbik7ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NNYXRjaCsrLCAhMSA9PT0gbmVlZHNWYWxpZGF0aW9uICYmIHBvc2l0aW9uc0Nsb25lW3Bvc01hdGNoXSAmJiBwb3NpdGlvbnNDbG9uZVtwb3NNYXRjaF0ubWF0Y2guZGVmID09PSB0Lm1hdGNoLmRlZikgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc01hdGNoXSA9ICQuZXh0ZW5kKCEwLCB7fSwgcG9zaXRpb25zQ2xvbmVbcG9zTWF0Y2hdKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc01hdGNoXS5pbnB1dCA9IHQuaW5wdXQsIGZpbGxNaXNzaW5nTm9uTWFzayhwb3NNYXRjaCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBwb3NNYXRjaCwgdmFsaWQgPSAhMDsgZWxzZSBpZiAocG9zaXRpb25DYW5NYXRjaERlZmluaXRpb24ocG9zTWF0Y2gsIHQubWF0Y2guZGVmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXNWYWxpZChwb3NNYXRjaCwgdC5pbnB1dCwgITAsICEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSAhMSAhPT0gcmVzdWx0LCBqID0gcmVzdWx0LmNhcmV0IHx8IHJlc3VsdC5pbnNlcnQgPyBnZXRMYXN0VmFsaWRQb3NpdGlvbigpIDogcG9zTWF0Y2gsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1ZhbGlkYXRpb24gPSAhMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEodmFsaWQgPSAhMCA9PT0gdC5nZW5lcmF0ZWRJbnB1dCkgJiYgcG9zTWF0Y2ggPj0gZ2V0TWFza1NldCgpLm1hc2tMZW5ndGggLSAxKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0TWFza1NldCgpLm1hc2tMZW5ndGggPCBpbml0aWFsTGVuZ3RoICYmIChnZXRNYXNrU2V0KCkubWFza0xlbmd0aCA9IGluaXRpYWxMZW5ndGgpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zID0gJC5leHRlbmQoITAsIHt9LCBwb3NpdGlvbnNDbG9uZSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldE1hc2tTZXQoITApLCAhMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc10gPSAkLmV4dGVuZCghMCwge30sIHZhbGlkVGVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc2V0TWFza1NldCghMCksICEwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmlsbE1pc3NpbmdOb25NYXNrKG1hc2tQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwbmR4ID0gbWFza1BvcyAtIDE7IHBuZHggPiAtMSAmJiAhZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3BuZHhdOyBwbmR4LS0pIDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdFRlbXBsYXRlLCB0ZXN0c0Zyb21Qb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChwbmR4Kys7IHBuZHggPCBtYXNrUG9zOyBwbmR4KyspIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twbmR4XSA9PT0gdW5kZWZpbmVkICYmICghMSA9PT0gb3B0cy5qaXRNYXNraW5nIHx8IG9wdHMuaml0TWFza2luZyA+IHBuZHgpICYmIChcIlwiID09PSAodGVzdHNGcm9tUG9zID0gZ2V0VGVzdHMocG5keCwgZ2V0VGVzdFRlbXBsYXRlKHBuZHggLSAxKS5sb2NhdG9yLCBwbmR4IC0gMSkuc2xpY2UoKSlbdGVzdHNGcm9tUG9zLmxlbmd0aCAtIDFdLm1hdGNoLmRlZiAmJiB0ZXN0c0Zyb21Qb3MucG9wKCksIFxyXG4gICAgICAgICAgICAgICAgICAgICh0ZXN0VGVtcGxhdGUgPSBkZXRlcm1pbmVUZXN0VGVtcGxhdGUodGVzdHNGcm9tUG9zKSkgJiYgKHRlc3RUZW1wbGF0ZS5tYXRjaC5kZWYgPT09IG9wdHMucmFkaXhQb2ludERlZmluaXRpb25TeW1ib2wgfHwgIWlzTWFzayhwbmR4LCAhMCkgfHwgJC5pbkFycmF5KG9wdHMucmFkaXhQb2ludCwgZ2V0QnVmZmVyKCkpIDwgcG5keCAmJiB0ZXN0VGVtcGxhdGUubWF0Y2guZm4gJiYgdGVzdFRlbXBsYXRlLm1hdGNoLmZuLnRlc3QoZ2V0UGxhY2Vob2xkZXIocG5keCksIGdldE1hc2tTZXQoKSwgcG5keCwgITEsIG9wdHMpKSAmJiAhMSAhPT0gKHJlc3VsdCA9IF9pc1ZhbGlkKHBuZHgsIGdldFBsYWNlaG9sZGVyKHBuZHgsIHRlc3RUZW1wbGF0ZS5tYXRjaCwgITApIHx8IChudWxsID09IHRlc3RUZW1wbGF0ZS5tYXRjaC5mbiA/IHRlc3RUZW1wbGF0ZS5tYXRjaC5kZWYgOiBcIlwiICE9PSBnZXRQbGFjZWhvbGRlcihwbmR4KSA/IGdldFBsYWNlaG9sZGVyKHBuZHgpIDogZ2V0QnVmZmVyKClbcG5keF0pLCAhMCkpICYmIChnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcmVzdWx0LnBvcyB8fCBwbmR4XS5nZW5lcmF0ZWRJbnB1dCA9ICEwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdHJpY3QgPSAhMCA9PT0gc3RyaWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hc2tQb3MgPSBwb3M7XHJcbiAgICAgICAgICAgICAgICBwb3MuYmVnaW4gIT09IHVuZGVmaW5lZCAmJiAobWFza1BvcyA9IGlzUlRMICYmICFpc1NlbGVjdGlvbihwb3MpID8gcG9zLmVuZCA6IHBvcy5iZWdpbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gITAsIHBvc2l0aW9uc0Nsb25lID0gJC5leHRlbmQoITAsIHt9LCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihvcHRzLnByZVZhbGlkYXRpb24pICYmICFzdHJpY3QgJiYgITAgIT09IGZyb21TZXRWYWxpZCAmJiAhMCAhPT0gdmFsaWRhdGVPbmx5ICYmIChyZXN1bHQgPSBvcHRzLnByZVZhbGlkYXRpb24oZ2V0QnVmZmVyKCksIG1hc2tQb3MsIGMsIGlzU2VsZWN0aW9uKHBvcyksIG9wdHMpKSwgXHJcbiAgICAgICAgICAgICAgICAhMCA9PT0gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGxNaXNzaW5nTm9uTWFzayhtYXNrUG9zKSwgaXNTZWxlY3Rpb24ocG9zKSAmJiAoaGFuZGxlUmVtb3ZlKHVuZGVmaW5lZCwgSW5wdXRtYXNrLmtleUNvZGUuREVMRVRFLCBwb3MsICEwLCAhMCksIFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tQb3MgPSBnZXRNYXNrU2V0KCkucCksIG1hc2tQb3MgPCBnZXRNYXNrU2V0KCkubWFza0xlbmd0aCAmJiAobWF4TGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbWFza1BvcyA8IG1heExlbmd0aCkgJiYgKHJlc3VsdCA9IF9pc1ZhbGlkKG1hc2tQb3MsIGMsIHN0cmljdCksIFxyXG4gICAgICAgICAgICAgICAgICAgICghc3RyaWN0IHx8ICEwID09PSBmcm9tU2V0VmFsaWQpICYmICExID09PSByZXN1bHQgJiYgITAgIT09IHZhbGlkYXRlT25seSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3NWYWxpZCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1ttYXNrUG9zXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50UG9zVmFsaWQgfHwgbnVsbCAhPT0gY3VycmVudFBvc1ZhbGlkLm1hdGNoLmZuIHx8IGN1cnJlbnRQb3NWYWxpZC5tYXRjaC5kZWYgIT09IGMgJiYgYyAhPT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdHMuaW5zZXJ0TW9kZSB8fCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbc2Vla05leHQobWFza1BvcyldID09PSB1bmRlZmluZWQpICYmICFpc01hc2sobWFza1BvcywgITApKSBmb3IgKHZhciBuUG9zID0gbWFza1BvcyArIDEsIHNuUG9zID0gc2Vla05leHQobWFza1Bvcyk7IG5Qb3MgPD0gc25Qb3M7IG5Qb3MrKykgaWYgKCExICE9PSAocmVzdWx0ID0gX2lzVmFsaWQoblBvcywgYywgc3RyaWN0KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZnVuY3Rpb24ob3JpZ2luYWxQb3MsIG5ld1Bvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdnAgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbbmV3UG9zXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZwKSBmb3IgKHZhciB0YXJnZXRMb2NhdG9yID0gdnAubG9jYXRvciwgdGxsID0gdGFyZ2V0TG9jYXRvci5sZW5ndGgsIHBzID0gb3JpZ2luYWxQb3M7IHBzIDwgbmV3UG9zOyBwcysrKSBpZiAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3BzXSA9PT0gdW5kZWZpbmVkICYmICFpc01hc2socHMsICEwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3RzID0gZ2V0VGVzdHMocHMpLnNsaWNlKCksIGJlc3RNYXRjaCA9IGRldGVybWluZVRlc3RUZW1wbGF0ZSh0ZXN0cywgITApLCBlcXVhbGl0eSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIiA9PT0gdGVzdHNbdGVzdHMubGVuZ3RoIC0gMV0ubWF0Y2guZGVmICYmIHRlc3RzLnBvcCgpLCAkLmVhY2godGVzdHMsIGZ1bmN0aW9uKG5keCwgdHN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0bGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHN0LmxvY2F0b3JbaV0gPT09IHVuZGVmaW5lZCB8fCAhY2hlY2tBbHRlcm5hdGlvbk1hdGNoKHRzdC5sb2NhdG9yW2ldLnRvU3RyaW5nKCkuc3BsaXQoXCIsXCIpLCB0YXJnZXRMb2NhdG9yW2ldLnRvU3RyaW5nKCkuc3BsaXQoXCIsXCIpLCB0c3QubmEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QUkgPSB0YXJnZXRMb2NhdG9yW2ldLCBiZXN0TWF0Y2hBSSA9IGJlc3RNYXRjaC5sb2NhdG9yW2ldLCB0c3RBSSA9IHRzdC5sb2NhdG9yW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QUkgLSBiZXN0TWF0Y2hBSSA+IE1hdGguYWJzKHRhcmdldEFJIC0gdHN0QUkpICYmIChiZXN0TWF0Y2ggPSB0c3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXF1YWxpdHkgPCBpICYmIChlcXVhbGl0eSA9IGksIGJlc3RNYXRjaCA9IHRzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIChiZXN0TWF0Y2ggPSAkLmV4dGVuZCh7fSwgYmVzdE1hdGNoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGdldFBsYWNlaG9sZGVyKHBzLCBiZXN0TWF0Y2gubWF0Y2gsICEwKSB8fCBiZXN0TWF0Y2gubWF0Y2guZGVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuZ2VuZXJhdGVkSW5wdXQgPSAhMCwgc2V0VmFsaWRQb3NpdGlvbihwcywgYmVzdE1hdGNoLCAhMCksIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tuZXdQb3NdID0gdW5kZWZpbmVkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pc1ZhbGlkKG5ld1BvcywgdnAuaW5wdXQsICEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0obWFza1BvcywgcmVzdWx0LnBvcyAhPT0gdW5kZWZpbmVkID8gcmVzdWx0LnBvcyA6IG5Qb3MpLCBtYXNrUG9zID0gblBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0OiBzZWVrTmV4dChtYXNrUG9zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAhMSA9PT0gcmVzdWx0ICYmIG9wdHMua2VlcFN0YXRpYyAmJiAhc3RyaWN0ICYmICEwICE9PSBmcm9tQWx0ZXJuYXRlICYmIChyZXN1bHQgPSBmdW5jdGlvbihwb3MsIGMsIHN0cmljdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEFsdCwgYWx0ZXJuYXRpb24sIGFsdFBvcywgcHJldkFsdFBvcywgaSwgdmFsaWRQb3MsIGFsdE5keHMsIGRlY2lzaW9uUG9zLCB2YWxpZFBzQ2xvbmUgPSAkLmV4dGVuZCghMCwge30sIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9ucyksIGlzVmFsaWRSc2x0ID0gITEsIGxBbHRQb3MgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHByZXZBbHRQb3MgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbbEFsdFBvc107IGxBbHRQb3MgPj0gMDsgbEFsdFBvcy0tKSBpZiAoKGFsdFBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tsQWx0UG9zXSkgJiYgYWx0UG9zLmFsdGVybmF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0QWx0ID0gbEFsdFBvcywgYWx0ZXJuYXRpb24gPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbbGFzdEFsdF0uYWx0ZXJuYXRpb24sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkFsdFBvcy5sb2NhdG9yW2FsdFBvcy5hbHRlcm5hdGlvbl0gIT09IGFsdFBvcy5sb2NhdG9yW2FsdFBvcy5hbHRlcm5hdGlvbl0pIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkFsdFBvcyA9IGFsdFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWx0ZXJuYXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaXNpb25Qb3MgPSBwYXJzZUludChsYXN0QWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNpc2lvblRha2VyID0gcHJldkFsdFBvcy5sb2NhdG9yW3ByZXZBbHRQb3MuYWx0ZXJuYXRpb24gfHwgYWx0ZXJuYXRpb25dICE9PSB1bmRlZmluZWQgPyBwcmV2QWx0UG9zLmxvY2F0b3JbcHJldkFsdFBvcy5hbHRlcm5hdGlvbiB8fCBhbHRlcm5hdGlvbl0gOiBhbHROZHhzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaXNpb25UYWtlci5sZW5ndGggPiAwICYmIChkZWNpc2lvblRha2VyID0gZGVjaXNpb25UYWtlci5zcGxpdChcIixcIilbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3NpYmlsaXR5UG9zID0gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2RlY2lzaW9uUG9zXSwgcHJldlBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tkZWNpc2lvblBvcyAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGdldFRlc3RzKGRlY2lzaW9uUG9zLCBwcmV2UG9zID8gcHJldlBvcy5sb2NhdG9yIDogdW5kZWZpbmVkLCBkZWNpc2lvblBvcyAtIDEpLCBmdW5jdGlvbihuZHgsIHRlc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHROZHhzID0gdGVzdC5sb2NhdG9yW2FsdGVybmF0aW9uXSA/IHRlc3QubG9jYXRvclthbHRlcm5hdGlvbl0udG9TdHJpbmcoKS5zcGxpdChcIixcIikgOiBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtbmR4ID0gMDsgbW5keCA8IGFsdE5keHMubGVuZ3RoOyBtbmR4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkSW5wdXRzID0gW10sIHN0YXRpY0lucHV0c0JlZm9yZVBvcyA9IDAsIHN0YXRpY0lucHV0c0JlZm9yZVBvc0FsdGVybmF0ZSA9IDAsIHZlcmlmeVZhbGlkSW5wdXQgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2lzaW9uVGFrZXIgPCBhbHROZHhzW21uZHhdICYmICh0ZXN0Lm5hID09PSB1bmRlZmluZWQgfHwgLTEgPT09ICQuaW5BcnJheShhbHROZHhzW21uZHhdLCB0ZXN0Lm5hLnNwbGl0KFwiLFwiKSkgfHwgLTEgPT09ICQuaW5BcnJheShkZWNpc2lvblRha2VyLnRvU3RyaW5nKCksIGFsdE5keHMpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2RlY2lzaW9uUG9zXSA9ICQuZXh0ZW5kKCEwLCB7fSwgdGVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2liaWxpdGllcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tkZWNpc2lvblBvc10ubG9jYXRvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2RlY2lzaW9uUG9zXS5sb2NhdG9yW2FsdGVybmF0aW9uXSA9IHBhcnNlSW50KGFsdE5keHNbbW5keF0pLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gdGVzdC5tYXRjaC5mbiA/IChwb3NzaWJpbGl0eVBvcy5pbnB1dCAhPT0gdGVzdC5tYXRjaC5kZWYgJiYgKHZlcmlmeVZhbGlkSW5wdXQgPSAhMCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMCAhPT0gcG9zc2liaWxpdHlQb3MuZ2VuZXJhdGVkSW5wdXQgJiYgdmFsaWRJbnB1dHMucHVzaChwb3NzaWJpbGl0eVBvcy5pbnB1dCkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0lucHV0c0JlZm9yZVBvc0FsdGVybmF0ZSsrLCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbZGVjaXNpb25Qb3NdLmdlbmVyYXRlZElucHV0ID0gIS9bMC05YS1iQS1aXS8udGVzdCh0ZXN0Lm1hdGNoLmRlZiksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2RlY2lzaW9uUG9zXS5pbnB1dCA9IHRlc3QubWF0Y2guZGVmKSA6IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tkZWNpc2lvblBvc10uaW5wdXQgPSBwb3NzaWJpbGl0eVBvcy5pbnB1dCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZGVjaXNpb25Qb3MgKyAxOyBpIDwgZ2V0TGFzdFZhbGlkUG9zaXRpb24odW5kZWZpbmVkLCAhMCkgKyAxOyBpKyspICh2YWxpZFBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tpXSkgJiYgITAgIT09IHZhbGlkUG9zLmdlbmVyYXRlZElucHV0ICYmIC9bMC05YS1iQS1aXS8udGVzdCh2YWxpZFBvcy5pbnB1dCkgPyB2YWxpZElucHV0cy5wdXNoKHZhbGlkUG9zLmlucHV0KSA6IGkgPCBwb3MgJiYgc3RhdGljSW5wdXRzQmVmb3JlUG9zKyssIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmVyaWZ5VmFsaWRJbnB1dCAmJiB2YWxpZElucHV0c1swXSA9PT0gdGVzdC5tYXRjaC5kZWYgJiYgdmFsaWRJbnB1dHMuc2hpZnQoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldE1hc2tTZXQoITApLCBpc1ZhbGlkUnNsdCA9ICEwOyB2YWxpZElucHV0cy5sZW5ndGggPiAwOyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB2YWxpZElucHV0cy5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCAhPT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyICYmICEoaXNWYWxpZFJzbHQgPSBpc1ZhbGlkKGdldExhc3RWYWxpZFBvc2l0aW9uKHVuZGVmaW5lZCwgITApICsgMSwgaW5wdXQsICExLCBmcm9tU2V0VmFsaWQsICEwKSkpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRSc2x0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2RlY2lzaW9uUG9zXS5sb2NhdG9yID0gcG9zc2liaWxpdGllcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0THZwID0gZ2V0TGFzdFZhbGlkUG9zaXRpb24ocG9zKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gZGVjaXNpb25Qb3MgKyAxOyBpIDwgZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSArIDE7IGkrKykgKCh2YWxpZFBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tpXSkgPT09IHVuZGVmaW5lZCB8fCBudWxsID09IHZhbGlkUG9zLm1hdGNoLmZuKSAmJiBpIDwgcG9zICsgKHN0YXRpY0lucHV0c0JlZm9yZVBvc0FsdGVybmF0ZSAtIHN0YXRpY0lucHV0c0JlZm9yZVBvcykgJiYgc3RhdGljSW5wdXRzQmVmb3JlUG9zQWx0ZXJuYXRlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZFJzbHQgPSBpc1ZhbGlkKChwb3MgKz0gc3RhdGljSW5wdXRzQmVmb3JlUG9zQWx0ZXJuYXRlIC0gc3RhdGljSW5wdXRzQmVmb3JlUG9zKSA+IHRhcmdldEx2cCA/IHRhcmdldEx2cCA6IHBvcywgYywgc3RyaWN0LCBmcm9tU2V0VmFsaWQsICEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkUnNsdCkgcmV0dXJuICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRNYXNrU2V0KCksIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9ucyA9ICQuZXh0ZW5kKCEwLCB7fSwgdmFsaWRQc0Nsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkUnNsdDtcclxuICAgICAgICAgICAgICAgICAgICB9KG1hc2tQb3MsIGMsIHN0cmljdCkpLCAhMCA9PT0gcmVzdWx0ICYmIChyZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczogbWFza1Bvc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihvcHRzLnBvc3RWYWxpZGF0aW9uKSAmJiAhMSAhPT0gcmVzdWx0ICYmICFzdHJpY3QgJiYgITAgIT09IGZyb21TZXRWYWxpZCAmJiAhMCAhPT0gdmFsaWRhdGVPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RSZXN1bHQgPSBvcHRzLnBvc3RWYWxpZGF0aW9uKGdldEJ1ZmZlcighMCksIHJlc3VsdCwgb3B0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3RSZXN1bHQucmVmcmVzaEZyb21CdWZmZXIgJiYgcG9zdFJlc3VsdC5idWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZnJlc2ggPSBwb3N0UmVzdWx0LnJlZnJlc2hGcm9tQnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRnJvbUJ1ZmZlcighMCA9PT0gcmVmcmVzaCA/IHJlZnJlc2ggOiByZWZyZXNoLnN0YXJ0LCByZWZyZXNoLmVuZCwgcG9zdFJlc3VsdC5idWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAhMCA9PT0gcG9zdFJlc3VsdCA/IHJlc3VsdCA6IHBvc3RSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICYmIHJlc3VsdC5wb3MgPT09IHVuZGVmaW5lZCAmJiAocmVzdWx0LnBvcyA9IG1hc2tQb3MpLCAhMSAhPT0gcmVzdWx0ICYmICEwICE9PSB2YWxpZGF0ZU9ubHkgfHwgKHJlc2V0TWFza1NldCghMCksIFxyXG4gICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zID0gJC5leHRlbmQoITAsIHt9LCBwb3NpdGlvbnNDbG9uZSkpLCByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gaXNNYXNrKHBvcywgc3RyaWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVzdCA9IGdldFRlc3RUZW1wbGF0ZShwb3MpLm1hdGNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IHRlc3QuZGVmICYmICh0ZXN0ID0gZ2V0VGVzdChwb3MpLm1hdGNoKSwgbnVsbCAhPSB0ZXN0LmZuKSByZXR1cm4gdGVzdC5mbjtcclxuICAgICAgICAgICAgICAgIGlmICghMCAhPT0gc3RyaWN0ICYmIHBvcyA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3RzID0gZ2V0VGVzdHMocG9zKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdHMubGVuZ3RoID4gMSArIChcIlwiID09PSB0ZXN0c1t0ZXN0cy5sZW5ndGggLSAxXS5tYXRjaC5kZWYgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2Vla05leHQocG9zLCBuZXdCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hc2tMID0gZ2V0TWFza1NldCgpLm1hc2tMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zID49IG1hc2tMKSByZXR1cm4gbWFza0w7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGdldFRlc3RzKG1hc2tMICsgMSkubGVuZ3RoID4gMSAmJiAoZ2V0TWFza1RlbXBsYXRlKCEwLCBtYXNrTCArIDEsICEwKSwgbWFza0wgPSBnZXRNYXNrU2V0KCkubWFza0xlbmd0aCk7ICsrcG9zaXRpb24gPCBtYXNrTCAmJiAoITAgPT09IG5ld0Jsb2NrICYmICghMCAhPT0gZ2V0VGVzdChwb3NpdGlvbikubWF0Y2gubmV3QmxvY2tNYXJrZXIgfHwgIWlzTWFzayhwb3NpdGlvbikpIHx8ICEwICE9PSBuZXdCbG9jayAmJiAhaXNNYXNrKHBvc2l0aW9uKSk7ICkgO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlZWtQcmV2aW91cyhwb3MsIG5ld0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVzdHMsIHBvc2l0aW9uID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDw9IDApIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICg7LS1wb3NpdGlvbiA+IDAgJiYgKCEwID09PSBuZXdCbG9jayAmJiAhMCAhPT0gZ2V0VGVzdChwb3NpdGlvbikubWF0Y2gubmV3QmxvY2tNYXJrZXIgfHwgITAgIT09IG5ld0Jsb2NrICYmICFpc01hc2socG9zaXRpb24pICYmICgodGVzdHMgPSBnZXRUZXN0cyhwb3NpdGlvbikpLmxlbmd0aCA8IDIgfHwgMiA9PT0gdGVzdHMubGVuZ3RoICYmIFwiXCIgPT09IHRlc3RzWzFdLm1hdGNoLmRlZikpOyApIDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRCdWZmZXJFbGVtZW50KHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc2l0aW9uXSA9PT0gdW5kZWZpbmVkID8gZ2V0UGxhY2Vob2xkZXIocG9zaXRpb24pIDogZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc2l0aW9uXS5pbnB1dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB3cml0ZUJ1ZmZlcihpbnB1dCwgYnVmZmVyLCBjYXJldFBvcywgZXZlbnQsIHRyaWdnZXJJbnB1dEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgJiYgJC5pc0Z1bmN0aW9uKG9wdHMub25CZWZvcmVXcml0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb3B0cy5vbkJlZm9yZVdyaXRlLmNhbGwoaW5wdXRtYXNrLCBldmVudCwgYnVmZmVyLCBjYXJldFBvcywgb3B0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlZnJlc2hGcm9tQnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaCA9IHJlc3VsdC5yZWZyZXNoRnJvbUJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hGcm9tQnVmZmVyKCEwID09PSByZWZyZXNoID8gcmVmcmVzaCA6IHJlZnJlc2guc3RhcnQsIHJlZnJlc2guZW5kLCByZXN1bHQuYnVmZmVyIHx8IGJ1ZmZlciksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gZ2V0QnVmZmVyKCEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvcyAhPT0gdW5kZWZpbmVkICYmIChjYXJldFBvcyA9IHJlc3VsdC5jYXJldCAhPT0gdW5kZWZpbmVkID8gcmVzdWx0LmNhcmV0IDogY2FyZXRQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlucHV0ICE9PSB1bmRlZmluZWQgJiYgKGlucHV0LmlucHV0bWFzay5fdmFsdWVTZXQoYnVmZmVyLmpvaW4oXCJcIikpLCBjYXJldFBvcyA9PT0gdW5kZWZpbmVkIHx8IGV2ZW50ICE9PSB1bmRlZmluZWQgJiYgXCJibHVyXCIgPT09IGV2ZW50LnR5cGUgPyByZW5kZXJDb2xvck1hc2soaW5wdXQsIGNhcmV0UG9zLCAwID09PSBidWZmZXIubGVuZ3RoKSA6IGFuZHJvaWQgJiYgZXZlbnQgJiYgXCJpbnB1dFwiID09PSBldmVudC50eXBlID8gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXJldChpbnB1dCwgY2FyZXRQb3MpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCkgOiBjYXJldChpbnB1dCwgY2FyZXRQb3MpLCAhMCA9PT0gdHJpZ2dlcklucHV0RXZlbnQgJiYgKHNraXBJbnB1dEV2ZW50ID0gITAsIFxyXG4gICAgICAgICAgICAgICAgJChpbnB1dCkudHJpZ2dlcihcImlucHV0XCIpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UGxhY2Vob2xkZXIocG9zLCB0ZXN0LCByZXR1cm5QTCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0ZXN0ID0gdGVzdCB8fCBnZXRUZXN0KHBvcykubWF0Y2gpLnBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQgfHwgITAgPT09IHJldHVyblBMKSByZXR1cm4gJC5pc0Z1bmN0aW9uKHRlc3QucGxhY2Vob2xkZXIpID8gdGVzdC5wbGFjZWhvbGRlcihvcHRzKSA6IHRlc3QucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdGVzdC5mbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPiAtMSAmJiBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2VGVzdCwgdGVzdHMgPSBnZXRUZXN0cyhwb3MpLCBzdGF0aWNBbHRlcm5hdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlc3RzLmxlbmd0aCA+IDEgKyAoXCJcIiA9PT0gdGVzdHNbdGVzdHMubGVuZ3RoIC0gMV0ubWF0Y2guZGVmID8gMSA6IDApKSBmb3IgKHZhciBpID0gMDsgaSA8IHRlc3RzLmxlbmd0aDsgaSsrKSBpZiAoITAgIT09IHRlc3RzW2ldLm1hdGNoLm9wdGlvbmFsaXR5ICYmICEwICE9PSB0ZXN0c1tpXS5tYXRjaC5vcHRpb25hbFF1YW50aWZpZXIgJiYgKG51bGwgPT09IHRlc3RzW2ldLm1hdGNoLmZuIHx8IHByZXZUZXN0ID09PSB1bmRlZmluZWQgfHwgITEgIT09IHRlc3RzW2ldLm1hdGNoLmZuLnRlc3QocHJldlRlc3QubWF0Y2guZGVmLCBnZXRNYXNrU2V0KCksIHBvcywgITAsIG9wdHMpKSAmJiAoc3RhdGljQWx0ZXJuYXRpb25zLnB1c2godGVzdHNbaV0pLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gdGVzdHNbaV0ubWF0Y2guZm4gJiYgKHByZXZUZXN0ID0gdGVzdHNbaV0pLCBzdGF0aWNBbHRlcm5hdGlvbnMubGVuZ3RoID4gMSAmJiAvWzAtOWEtYkEtWl0vLnRlc3Qoc3RhdGljQWx0ZXJuYXRpb25zWzBdLm1hdGNoLmRlZikpKSByZXR1cm4gb3B0cy5wbGFjZWhvbGRlci5jaGFyQXQocG9zICUgb3B0cy5wbGFjZWhvbGRlci5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5kZWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5wbGFjZWhvbGRlci5jaGFyQXQocG9zICUgb3B0cy5wbGFjZWhvbGRlci5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVmFsKGlucHV0LCB3cml0ZU91dCwgc3RyaWN0LCBucHR2bCwgaW5pdGlhdGluZ0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc1RlbXBsYXRlTWF0Y2gobmR4LCBjaGFyQ29kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEgIT09IGdldEJ1ZmZlclRlbXBsYXRlKCkuc2xpY2UobmR4LCBzZWVrTmV4dChuZHgpKS5qb2luKFwiXCIpLmluZGV4T2YoY2hhckNvZGVzKSAmJiAhaXNNYXNrKG5keCkgJiYgZ2V0VGVzdChuZHgpLm1hdGNoLm5hdGl2ZURlZiA9PT0gY2hhckNvZGVzLmNoYXJBdChjaGFyQ29kZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9IG5wdHZsLnNsaWNlKCksIGNoYXJDb2RlcyA9IFwiXCIsIGluaXRpYWxOZHggPSAtMSwgcmVzdWx0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc2V0TWFza1NldCgpLCBzdHJpY3QgfHwgITAgPT09IG9wdHMuYXV0b1VubWFzaykgaW5pdGlhbE5keCA9IHNlZWtOZXh0KGluaXRpYWxOZHgpOyBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGljSW5wdXQgPSBnZXRCdWZmZXJUZW1wbGF0ZSgpLnNsaWNlKDAsIHNlZWtOZXh0KC0xKSkuam9pbihcIlwiKSwgbWF0Y2hlcyA9IGlucHV0VmFsdWUuam9pbihcIlwiKS5tYXRjaChuZXcgUmVnRXhwKFwiXlwiICsgSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KHN0YXRpY0lucHV0KSwgXCJnXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCAmJiAoaW5wdXRWYWx1ZS5zcGxpY2UoMCwgbWF0Y2hlcy5sZW5ndGggKiBzdGF0aWNJbnB1dC5sZW5ndGgpLCBcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsTmR4ID0gc2Vla05leHQoaW5pdGlhbE5keCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKC0xID09PSBpbml0aWFsTmR4ID8gKGdldE1hc2tTZXQoKS5wID0gc2Vla05leHQoaW5pdGlhbE5keCksIGluaXRpYWxOZHggPSAwKSA6IGdldE1hc2tTZXQoKS5wID0gaW5pdGlhbE5keCwgXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goaW5wdXRWYWx1ZSwgZnVuY3Rpb24obmR4LCBjaGFyQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSAhPT0gdW5kZWZpbmVkKSBpZiAoZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW25keF0gPT09IHVuZGVmaW5lZCAmJiBpbnB1dFZhbHVlW25keF0gPT09IGdldFBsYWNlaG9sZGVyKG5keCkgJiYgaXNNYXNrKG5keCwgITApICYmICExID09PSBpc1ZhbGlkKG5keCwgaW5wdXRWYWx1ZVtuZHhdLCAhMCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICEwKSkgZ2V0TWFza1NldCgpLnArKzsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlwcmVzcyA9IG5ldyAkLkV2ZW50KFwiX2NoZWNrdmFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlwcmVzcy53aGljaCA9IGNoYXJDb2RlLmNoYXJDb2RlQXQoMCksIGNoYXJDb2RlcyArPSBjaGFyQ29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGx2cCA9IGdldExhc3RWYWxpZFBvc2l0aW9uKHVuZGVmaW5lZCwgITApLCBsdlRlc3QgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbbHZwXSwgbmV4dFRlc3QgPSBnZXRUZXN0VGVtcGxhdGUobHZwICsgMSwgbHZUZXN0ID8gbHZUZXN0LmxvY2F0b3Iuc2xpY2UoKSA6IHVuZGVmaW5lZCwgbHZwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RlbXBsYXRlTWF0Y2goaW5pdGlhbE5keCwgY2hhckNvZGVzKSB8fCBzdHJpY3QgfHwgb3B0cy5hdXRvVW5tYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gc3RyaWN0ID8gbmR4IDogbnVsbCA9PSBuZXh0VGVzdC5tYXRjaC5mbiAmJiBuZXh0VGVzdC5tYXRjaC5vcHRpb25hbGl0eSAmJiBsdnAgKyAxIDwgZ2V0TWFza1NldCgpLnAgPyBsdnAgKyAxIDogZ2V0TWFza1NldCgpLnA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBFdmVudEhhbmRsZXJzLmtleXByZXNzRXZlbnQuY2FsbChpbnB1dCwga2V5cHJlc3MsICEwLCAhMSwgc3RyaWN0LCBwb3MpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxOZHggPSBwb3MgKyAxLCBjaGFyQ29kZXMgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcmVzdWx0ID0gRXZlbnRIYW5kbGVycy5rZXlwcmVzc0V2ZW50LmNhbGwoaW5wdXQsIGtleXByZXNzLCAhMCwgITEsICEwLCBsdnAgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCExICE9PSByZXN1bHQgJiYgIXN0cmljdCAmJiAkLmlzRnVuY3Rpb24ob3B0cy5vbkJlZm9yZVdyaXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdSZXN1bHQgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID0gb3B0cy5vbkJlZm9yZVdyaXRlLmNhbGwoaW5wdXRtYXNrLCBrZXlwcmVzcywgZ2V0QnVmZmVyKCksIHJlc3VsdC5mb3J3YXJkUG9zaXRpb24sIG9wdHMpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQgPSAkLmV4dGVuZChvcmlnUmVzdWx0LCByZXN1bHQpKSAmJiByZXN1bHQucmVmcmVzaEZyb21CdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaCA9IHJlc3VsdC5yZWZyZXNoRnJvbUJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRnJvbUJ1ZmZlcighMCA9PT0gcmVmcmVzaCA/IHJlZnJlc2ggOiByZWZyZXNoLnN0YXJ0LCByZWZyZXNoLmVuZCwgcmVzdWx0LmJ1ZmZlciksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0TWFza1NldCghMCksIHJlc3VsdC5jYXJldCAmJiAoZ2V0TWFza1NldCgpLnAgPSByZXN1bHQuY2FyZXQsIHJlc3VsdC5mb3J3YXJkUG9zaXRpb24gPSByZXN1bHQuY2FyZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksIHdyaXRlT3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0ICYmIHJlc3VsdCAmJiAoY2FyZXRQb3MgPSBvcHRzLm51bWVyaWNJbnB1dCA/IHNlZWtQcmV2aW91cyhyZXN1bHQuZm9yd2FyZFBvc2l0aW9uKSA6IHJlc3VsdC5mb3J3YXJkUG9zaXRpb24pLCBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihpbnB1dCwgZ2V0QnVmZmVyKCksIGNhcmV0UG9zLCBpbml0aWF0aW5nRXZlbnQgfHwgbmV3ICQuRXZlbnQoXCJjaGVja3ZhbFwiKSwgaW5pdGlhdGluZ0V2ZW50ICYmIFwiaW5wdXRcIiA9PT0gaW5pdGlhdGluZ0V2ZW50LnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVubWFza2VkdmFsdWUoaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5pbnB1dG1hc2sgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGlucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmlucHV0bWFzayAmJiBpbnB1dC5pbnB1dG1hc2sucmVmcmVzaFZhbHVlICYmIEV2ZW50SGFuZGxlcnMuc2V0VmFsdWVFdmVudC5jYWxsKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB1bVZhbHVlID0gW10sIHZwcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9ucztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHBuZHggaW4gdnBzKSB2cHNbcG5keF0ubWF0Y2ggJiYgbnVsbCAhPSB2cHNbcG5keF0ubWF0Y2guZm4gJiYgdW1WYWx1ZS5wdXNoKHZwc1twbmR4XS5pbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5tYXNrZWRWYWx1ZSA9IDAgPT09IHVtVmFsdWUubGVuZ3RoID8gXCJcIiA6IChpc1JUTCA/IHVtVmFsdWUucmV2ZXJzZSgpIDogdW1WYWx1ZSkuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0cy5vblVuTWFzaykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyVmFsdWUgPSAoaXNSVEwgPyBnZXRCdWZmZXIoKS5zbGljZSgpLnJldmVyc2UoKSA6IGdldEJ1ZmZlcigpKS5qb2luKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVubWFza2VkVmFsdWUgPSBvcHRzLm9uVW5NYXNrLmNhbGwoaW5wdXRtYXNrLCBidWZmZXJWYWx1ZSwgdW5tYXNrZWRWYWx1ZSwgb3B0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5tYXNrZWRWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYXJldChpbnB1dCwgYmVnaW4sIGVuZCwgbm90cmFuc2xhdGUpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZVBvc2l0aW9uKHBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMCA9PT0gbm90cmFuc2xhdGUgfHwgIWlzUlRMIHx8IFwibnVtYmVyXCIgIT0gdHlwZW9mIHBvcyB8fCBvcHRzLmdyZWVkeSAmJiBcIlwiID09PSBvcHRzLnBsYWNlaG9sZGVyIHx8IChwb3MgPSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpLmxlbmd0aCAtIHBvcyksIFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciByYW5nZTtcclxuICAgICAgICAgICAgICAgIGlmIChiZWdpbiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UgPyAoYmVnaW4gPSBpbnB1dC5zZWxlY3Rpb25TdGFydCwgXHJcbiAgICAgICAgICAgICAgICBlbmQgPSBpbnB1dC5zZWxlY3Rpb25FbmQpIDogd2luZG93LmdldFNlbGVjdGlvbiA/IChyYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApKS5jb21tb25BbmNlc3RvckNvbnRhaW5lci5wYXJlbnROb2RlICE9PSBpbnB1dCAmJiByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciAhPT0gaW5wdXQgfHwgKGJlZ2luID0gcmFuZ2Uuc3RhcnRPZmZzZXQsIFxyXG4gICAgICAgICAgICAgICAgZW5kID0gcmFuZ2UuZW5kT2Zmc2V0KSA6IGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UgJiYgKGVuZCA9IChiZWdpbiA9IDAgLSAocmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKSkuZHVwbGljYXRlKCkubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIC1pbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCkubGVuZ3RoKSkgKyByYW5nZS50ZXh0Lmxlbmd0aCksIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0cmFuc2xhdGVQb3NpdGlvbihiZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB0cmFuc2xhdGVQb3NpdGlvbihlbmQpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlZ2luLmJlZ2luICE9PSB1bmRlZmluZWQgJiYgKGVuZCA9IGJlZ2luLmVuZCwgYmVnaW4gPSBiZWdpbi5iZWdpbiksIFwibnVtYmVyXCIgPT0gdHlwZW9mIGJlZ2luKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW4gPSB0cmFuc2xhdGVQb3NpdGlvbihiZWdpbiksIGVuZCA9IFwibnVtYmVyXCIgPT0gdHlwZW9mIChlbmQgPSB0cmFuc2xhdGVQb3NpdGlvbihlbmQpKSA/IGVuZCA6IGJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxDYWxjID0gcGFyc2VJbnQoKChpbnB1dC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZSA/IChpbnB1dC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZShpbnB1dCwgbnVsbCkgOiBpbnB1dC5jdXJyZW50U3R5bGUpLmZvbnRTaXplKSAqIGVuZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc2Nyb2xsTGVmdCA9IHNjcm9sbENhbGMgPiBpbnB1dC5zY3JvbGxXaWR0aCA/IHNjcm9sbENhbGMgOiAwLCBtb2JpbGUgfHwgITEgIT09IG9wdHMuaW5zZXJ0TW9kZSB8fCBiZWdpbiAhPT0gZW5kIHx8IGVuZCsrLCBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSkgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBiZWdpbiwgaW5wdXQuc2VsZWN0aW9uRW5kID0gZW5kOyBlbHNlIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCksIGlucHV0LmZpcnN0Q2hpbGQgPT09IHVuZGVmaW5lZCB8fCBudWxsID09PSBpbnB1dC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmFwcGVuZENoaWxkKHRleHROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRTdGFydChpbnB1dC5maXJzdENoaWxkLCBiZWdpbiA8IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKS5sZW5ndGggPyBiZWdpbiA6IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKS5sZW5ndGgpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kKGlucHV0LmZpcnN0Q2hpbGQsIGVuZCA8IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKS5sZW5ndGggPyBlbmQgOiBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCkubGVuZ3RoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKCEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpLCBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpbnB1dC5jcmVhdGVUZXh0UmFuZ2UgJiYgKChyYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpKS5jb2xsYXBzZSghMCksIFxyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIiwgZW5kKSwgcmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIGJlZ2luKSwgcmFuZ2Uuc2VsZWN0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckNvbG9yTWFzayhpbnB1dCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZGV0ZXJtaW5lTGFzdFJlcXVpcmVkUG9zaXRpb24ocmV0dXJuRGVmaW5pdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvcywgdGVzdFBvcywgYnVmZmVyID0gZ2V0QnVmZmVyKCksIGJsID0gYnVmZmVyLmxlbmd0aCwgbHZwID0gZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSwgcG9zaXRpb25zID0ge30sIGx2VGVzdCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tsdnBdLCBuZHhJbnRsenIgPSBsdlRlc3QgIT09IHVuZGVmaW5lZCA/IGx2VGVzdC5sb2NhdG9yLnNsaWNlKCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHBvcyA9IGx2cCArIDE7IHBvcyA8IGJ1ZmZlci5sZW5ndGg7IHBvcysrKSBuZHhJbnRsenIgPSAodGVzdFBvcyA9IGdldFRlc3RUZW1wbGF0ZShwb3MsIG5keEludGx6ciwgcG9zIC0gMSkpLmxvY2F0b3Iuc2xpY2UoKSwgXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbcG9zXSA9ICQuZXh0ZW5kKCEwLCB7fSwgdGVzdFBvcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHZUZXN0QWx0ID0gbHZUZXN0ICYmIGx2VGVzdC5hbHRlcm5hdGlvbiAhPT0gdW5kZWZpbmVkID8gbHZUZXN0LmxvY2F0b3JbbHZUZXN0LmFsdGVybmF0aW9uXSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGZvciAocG9zID0gYmwgLSAxOyBwb3MgPiBsdnAgJiYgKCgodGVzdFBvcyA9IHBvc2l0aW9uc1twb3NdKS5tYXRjaC5vcHRpb25hbGl0eSB8fCB0ZXN0UG9zLm1hdGNoLm9wdGlvbmFsUXVhbnRpZmllciAmJiB0ZXN0UG9zLm1hdGNoLm5ld0Jsb2NrTWFya2VyIHx8IGx2VGVzdEFsdCAmJiAobHZUZXN0QWx0ICE9PSBwb3NpdGlvbnNbcG9zXS5sb2NhdG9yW2x2VGVzdC5hbHRlcm5hdGlvbl0gJiYgbnVsbCAhPSB0ZXN0UG9zLm1hdGNoLmZuIHx8IG51bGwgPT09IHRlc3RQb3MubWF0Y2guZm4gJiYgdGVzdFBvcy5sb2NhdG9yW2x2VGVzdC5hbHRlcm5hdGlvbl0gJiYgY2hlY2tBbHRlcm5hdGlvbk1hdGNoKHRlc3RQb3MubG9jYXRvcltsdlRlc3QuYWx0ZXJuYXRpb25dLnRvU3RyaW5nKCkuc3BsaXQoXCIsXCIpLCBsdlRlc3RBbHQudG9TdHJpbmcoKS5zcGxpdChcIixcIikpICYmIFwiXCIgIT09IGdldFRlc3RzKHBvcylbMF0uZGVmKSkgJiYgYnVmZmVyW3Bvc10gPT09IGdldFBsYWNlaG9sZGVyKHBvcywgdGVzdFBvcy5tYXRjaCkpOyBwb3MtLSkgYmwtLTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5EZWZpbml0aW9uID8ge1xyXG4gICAgICAgICAgICAgICAgICAgIGw6IGJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZjogcG9zaXRpb25zW2JsXSA/IHBvc2l0aW9uc1tibF0ubWF0Y2ggOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIH0gOiBibDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhck9wdGlvbmFsVGFpbChidWZmZXIpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHZhbGlkUG9zLCBybCA9IGRldGVybWluZUxhc3RSZXF1aXJlZFBvc2l0aW9uKCksIGJsID0gYnVmZmVyLmxlbmd0aCwgbHYgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbZ2V0TGFzdFZhbGlkUG9zaXRpb24oKV07IHJsIDwgYmwgJiYgIWlzTWFzayhybCwgITApICYmICh2YWxpZFBvcyA9IGx2ICE9PSB1bmRlZmluZWQgPyBnZXRUZXN0VGVtcGxhdGUocmwsIGx2LmxvY2F0b3Iuc2xpY2UoXCJcIiksIGx2KSA6IGdldFRlc3QocmwpKSAmJiAhMCAhPT0gdmFsaWRQb3MubWF0Y2gub3B0aW9uYWxpdHkgJiYgKCEwICE9PSB2YWxpZFBvcy5tYXRjaC5vcHRpb25hbFF1YW50aWZpZXIgJiYgITAgIT09IHZhbGlkUG9zLm1hdGNoLm5ld0Jsb2NrTWFya2VyIHx8IHJsICsgMSA9PT0gYmwgJiYgXCJcIiA9PT0gKGx2ICE9PSB1bmRlZmluZWQgPyBnZXRUZXN0VGVtcGxhdGUocmwgKyAxLCBsdi5sb2NhdG9yLnNsaWNlKFwiXCIpLCBsdikgOiBnZXRUZXN0KHJsICsgMSkpLm1hdGNoLmRlZik7ICkgcmwrKztcclxuICAgICAgICAgICAgICAgIGZvciAoOyh2YWxpZFBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tybCAtIDFdKSAmJiB2YWxpZFBvcyAmJiB2YWxpZFBvcy5tYXRjaC5vcHRpb25hbGl0eSAmJiB2YWxpZFBvcy5pbnB1dCA9PT0gb3B0cy5za2lwT3B0aW9uYWxQYXJ0Q2hhcmFjdGVyOyApIHJsLS07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyLnNwbGljZShybCksIGJ1ZmZlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0NvbXBsZXRlKGJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihvcHRzLmlzQ29tcGxldGUpKSByZXR1cm4gb3B0cy5pc0NvbXBsZXRlKGJ1ZmZlciwgb3B0cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCIqXCIgPT09IG9wdHMucmVwZWF0KSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gITEsIGxycCA9IGRldGVybWluZUxhc3RSZXF1aXJlZFBvc2l0aW9uKCEwKSwgYW1sID0gc2Vla1ByZXZpb3VzKGxycC5sKTtcclxuICAgICAgICAgICAgICAgIGlmIChscnAuZGVmID09PSB1bmRlZmluZWQgfHwgbHJwLmRlZi5uZXdCbG9ja01hcmtlciB8fCBscnAuZGVmLm9wdGlvbmFsaXR5IHx8IGxycC5kZWYub3B0aW9uYWxRdWFudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGUgPSAhMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBhbWw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdCA9IGdldFRlc3RUZW1wbGF0ZShpKS5tYXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHRlc3QuZm4gJiYgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2ldID09PSB1bmRlZmluZWQgJiYgITAgIT09IHRlc3Qub3B0aW9uYWxpdHkgJiYgITAgIT09IHRlc3Qub3B0aW9uYWxRdWFudGlmaWVyIHx8IG51bGwgPT09IHRlc3QuZm4gJiYgYnVmZmVyW2ldICE9PSBnZXRQbGFjZWhvbGRlcihpLCB0ZXN0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGUgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShpbnB1dCwgaywgcG9zLCBzdHJpY3QsIGZyb21Jc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG9wdHMubnVtZXJpY0lucHV0IHx8IGlzUlRMKSAmJiAoayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuQkFDS1NQQUNFID8gayA9IElucHV0bWFzay5rZXlDb2RlLkRFTEVURSA6IGsgPT09IElucHV0bWFzay5rZXlDb2RlLkRFTEVURSAmJiAoayA9IElucHV0bWFzay5rZXlDb2RlLkJBQ0tTUEFDRSksIFxyXG4gICAgICAgICAgICAgICAgaXNSVEwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlbmQgPSBwb3MuZW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcy5lbmQgPSBwb3MuYmVnaW4sIHBvcy5iZWdpbiA9IHBlbmQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBrID09PSBJbnB1dG1hc2sua2V5Q29kZS5CQUNLU1BBQ0UgJiYgKHBvcy5lbmQgLSBwb3MuYmVnaW4gPCAxIHx8ICExID09PSBvcHRzLmluc2VydE1vZGUpID8gKHBvcy5iZWdpbiA9IHNlZWtQcmV2aW91cyhwb3MuYmVnaW4pLCBcclxuICAgICAgICAgICAgICAgIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MuYmVnaW5dICE9PSB1bmRlZmluZWQgJiYgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvcy5iZWdpbl0uaW5wdXQgPT09IG9wdHMuZ3JvdXBTZXBhcmF0b3IgJiYgcG9zLmJlZ2luLS0pIDogayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuREVMRVRFICYmIHBvcy5iZWdpbiA9PT0gcG9zLmVuZCAmJiAocG9zLmVuZCA9IGlzTWFzayhwb3MuZW5kLCAhMCkgJiYgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvcy5lbmRdICYmIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1twb3MuZW5kXS5pbnB1dCAhPT0gb3B0cy5yYWRpeFBvaW50ID8gcG9zLmVuZCArIDEgOiBzZWVrTmV4dChwb3MuZW5kKSArIDEsIFxyXG4gICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvcy5iZWdpbl0gIT09IHVuZGVmaW5lZCAmJiBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zLmJlZ2luXS5pbnB1dCA9PT0gb3B0cy5ncm91cFNlcGFyYXRvciAmJiBwb3MuZW5kKyspLCBcclxuICAgICAgICAgICAgICAgIHN0cmlwVmFsaWRQb3NpdGlvbnMocG9zLmJlZ2luLCBwb3MuZW5kLCAhMSwgc3RyaWN0KSwgITAgIT09IHN0cmljdCAmJiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5rZWVwU3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHZhbGlkSW5wdXRzID0gW10sIGxhc3RBbHQgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbigtMSwgITApLCBwb3NpdGlvbnNDbG9uZSA9ICQuZXh0ZW5kKCEwLCB7fSwgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zKSwgcHJldkFsdFBvcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tsYXN0QWx0XTsgbGFzdEFsdCA+PSAwOyBsYXN0QWx0LS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHRQb3MgPSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbbGFzdEFsdF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWx0UG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEwICE9PSBhbHRQb3MuZ2VuZXJhdGVkSW5wdXQgJiYgL1swLTlhLWJBLVpdLy50ZXN0KGFsdFBvcy5pbnB1dCkgJiYgdmFsaWRJbnB1dHMucHVzaChhbHRQb3MuaW5wdXQpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW2xhc3RBbHRdLCBhbHRQb3MuYWx0ZXJuYXRpb24gIT09IHVuZGVmaW5lZCAmJiBhbHRQb3MubG9jYXRvclthbHRQb3MuYWx0ZXJuYXRpb25dICE9PSBwcmV2QWx0UG9zLmxvY2F0b3JbYWx0UG9zLmFsdGVybmF0aW9uXSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkFsdFBvcyA9IGFsdFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdEFsdCA+IC0xKSBmb3IgKGdldE1hc2tTZXQoKS5wID0gc2Vla05leHQoZ2V0TGFzdFZhbGlkUG9zaXRpb24oLTEsICEwKSk7IHZhbGlkSW5wdXRzLmxlbmd0aCA+IDA7ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXByZXNzID0gbmV3ICQuRXZlbnQoXCJrZXlwcmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXByZXNzLndoaWNoID0gdmFsaWRJbnB1dHMucG9wKCkuY2hhckNvZGVBdCgwKSwgRXZlbnRIYW5kbGVycy5rZXlwcmVzc0V2ZW50LmNhbGwoaW5wdXQsIGtleXByZXNzLCAhMCwgITEsICExLCBnZXRNYXNrU2V0KCkucCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnMgPSAkLmV4dGVuZCghMCwge30sIHBvc2l0aW9uc0Nsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHZwID0gZ2V0TGFzdFZhbGlkUG9zaXRpb24ocG9zLmJlZ2luLCAhMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobHZwIDwgcG9zLmJlZ2luKSBnZXRNYXNrU2V0KCkucCA9IHNlZWtOZXh0KGx2cCk7IGVsc2UgaWYgKCEwICE9PSBzdHJpY3QgJiYgKGdldE1hc2tTZXQoKS5wID0gcG9zLmJlZ2luLCBcclxuICAgICAgICAgICAgICAgICEwICE9PSBmcm9tSXNWYWxpZCkpIGZvciAoO2dldE1hc2tTZXQoKS5wIDwgbHZwICYmIGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tnZXRNYXNrU2V0KCkucF0gPT09IHVuZGVmaW5lZDsgKSBnZXRNYXNrU2V0KCkucCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVDb2xvck1hc2soaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRDYXJldFBvcyhjbGllbnR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zLCBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc3R5bGUgaW4gY29tcHV0ZWRTdHlsZSkgaXNOYU4oc3R5bGUpICYmIC0xICE9PSBzdHlsZS5pbmRleE9mKFwiZm9udFwiKSAmJiAoZS5zdHlsZVtzdHlsZV0gPSBjb21wdXRlZFN0eWxlW3N0eWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdHlsZS50ZXh0VHJhbnNmb3JtID0gY29tcHV0ZWRTdHlsZS50ZXh0VHJhbnNmb3JtLCBlLnN0eWxlLmxldHRlclNwYWNpbmcgPSBjb21wdXRlZFN0eWxlLmxldHRlclNwYWNpbmcsIFxyXG4gICAgICAgICAgICAgICAgICAgIGUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCIsIGUuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCIsIGUuc3R5bGUud2lkdGggPSBcImF1dG9cIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIiwgZS5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIiwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRsLCBpbnB1dFRleHQgPSBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCksIHByZXZpb3VzV2lkdGggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY2FyZXRQb3MgPSAwLCBpdGwgPSBpbnB1dFRleHQubGVuZ3RoOyBjYXJldFBvcyA8PSBpdGw7IGNhcmV0UG9zKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuaW5uZXJIVE1MICs9IGlucHV0VGV4dC5jaGFyQXQoY2FyZXRQb3MpIHx8IFwiX1wiLCBlLm9mZnNldFdpZHRoID49IGNsaWVudHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQxID0gY2xpZW50eCAtIHByZXZpb3VzV2lkdGgsIG9mZnNldDIgPSBlLm9mZnNldFdpZHRoIC0gY2xpZW50eDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5uZXJIVE1MID0gaW5wdXRUZXh0LmNoYXJBdChjYXJldFBvcyksIGNhcmV0UG9zID0gKG9mZnNldDEgLT0gZS5vZmZzZXRXaWR0aCAvIDMpIDwgb2Zmc2V0MiA/IGNhcmV0UG9zIC0gMSA6IGNhcmV0UG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNXaWR0aCA9IGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGUpLCBjYXJldFBvcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gKGlucHV0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGlucHV0LCBudWxsKSwgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUuc3R5bGUud2lkdGggPSBjb21wdXRlZFN0eWxlLndpZHRoLCB0ZW1wbGF0ZS5zdHlsZS50ZXh0QWxpZ24gPSBjb21wdXRlZFN0eWxlLnRleHRBbGlnbiwgXHJcbiAgICAgICAgICAgICAgICAoY29sb3JNYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuY2xhc3NOYW1lID0gXCJpbS1jb2xvcm1hc2tcIiwgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29sb3JNYXNrLCBpbnB1dCksIFxyXG4gICAgICAgICAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbnB1dCksIGNvbG9yTWFzay5hcHBlbmRDaGlsZCh0ZW1wbGF0ZSksIGNvbG9yTWFzay5hcHBlbmRDaGlsZChpbnB1dCksIFxyXG4gICAgICAgICAgICAgICAgaW5wdXQuc3R5bGUubGVmdCA9IHRlbXBsYXRlLm9mZnNldExlZnQgKyBcInB4XCIsICQoaW5wdXQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJldChpbnB1dCwgZmluZENhcmV0UG9zKGUuY2xpZW50WCkpLCBFdmVudEhhbmRsZXJzLmNsaWNrRXZlbnQuY2FsbChpbnB1dCwgWyBlIF0pO1xyXG4gICAgICAgICAgICAgICAgfSksICQoaW5wdXQpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zaGlmdEtleSB8fCAhMSA9PT0gb3B0cy5pbnNlcnRNb2RlIHx8IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckNvbG9yTWFzayhpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZW5kZXJDb2xvck1hc2soaW5wdXQsIGNhcmV0UG9zLCBjbGVhcikge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlU3RhdGljKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzU3RhdGljIHx8IG51bGwgIT09IHRlc3QuZm4gJiYgdGVzdFBvcy5pbnB1dCAhPT0gdW5kZWZpbmVkID8gaXNTdGF0aWMgJiYgKG51bGwgIT09IHRlc3QuZm4gJiYgdGVzdFBvcy5pbnB1dCAhPT0gdW5kZWZpbmVkIHx8IFwiXCIgPT09IHRlc3QuZGVmKSAmJiAoaXNTdGF0aWMgPSAhMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgbWFza1RlbXBsYXRlICs9IFwiPC9zcGFuPlwiKSA6IChpc1N0YXRpYyA9ICEwLCBtYXNrVGVtcGxhdGUgKz0gXCI8c3BhbiBjbGFzcz0naW0tc3RhdGljJz5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDYXJldChmb3JjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICEwICE9PSBmb3JjZSAmJiBwb3MgIT09IGNhcmV0UG9zLmJlZ2luIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlucHV0IHx8IChtYXNrVGVtcGxhdGUgKz0gXCI8c3BhbiBjbGFzcz0naW0tY2FyZXQnIHN0eWxlPSdib3JkZXItcmlnaHQtd2lkdGg6IDFweDtib3JkZXItcmlnaHQtc3R5bGU6IHNvbGlkOyc+PC9zcGFuPlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0ZXN0LCB0ZXN0UG9zLCBuZHhJbnRsenIsIG1hc2tUZW1wbGF0ZSA9IFwiXCIsIGlzU3RhdGljID0gITEsIHBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sb3JNYXNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gZ2V0QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcmV0UG9zID09PSB1bmRlZmluZWQgPyBjYXJldFBvcyA9IGNhcmV0KGlucHV0KSA6IGNhcmV0UG9zLmJlZ2luID09PSB1bmRlZmluZWQgJiYgKGNhcmV0UG9zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogY2FyZXRQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogY2FyZXRQb3NcclxuICAgICAgICAgICAgICAgICAgICB9KSwgITAgIT09IGNsZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsdnAgPSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDYXJldCgpLCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbcG9zXSA/ICh0ZXN0UG9zID0gZ2V0TWFza1NldCgpLnZhbGlkUG9zaXRpb25zW3Bvc10sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdCA9IHRlc3RQb3MubWF0Y2gsIG5keEludGx6ciA9IHRlc3RQb3MubG9jYXRvci5zbGljZSgpLCBoYW5kbGVTdGF0aWMoKSwgbWFza1RlbXBsYXRlICs9IGJ1ZmZlcltwb3NdKSA6ICh0ZXN0UG9zID0gZ2V0VGVzdFRlbXBsYXRlKHBvcywgbmR4SW50bHpyLCBwb3MgLSAxKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0ID0gdGVzdFBvcy5tYXRjaCwgbmR4SW50bHpyID0gdGVzdFBvcy5sb2NhdG9yLnNsaWNlKCksICghMSA9PT0gb3B0cy5qaXRNYXNraW5nIHx8IHBvcyA8IGx2cCB8fCBcIm51bWJlclwiID09IHR5cGVvZiBvcHRzLmppdE1hc2tpbmcgJiYgaXNGaW5pdGUob3B0cy5qaXRNYXNraW5nKSAmJiBvcHRzLmppdE1hc2tpbmcgPiBwb3MpICYmIChoYW5kbGVTdGF0aWMoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrVGVtcGxhdGUgKz0gZ2V0UGxhY2Vob2xkZXIocG9zLCB0ZXN0KSkpLCBwb3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoKG1heExlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IHBvcyA8IG1heExlbmd0aCkgJiYgKG51bGwgIT09IHRlc3QuZm4gfHwgXCJcIiAhPT0gdGVzdC5kZWYpIHx8IGx2cCA+IHBvcyB8fCBpc1N0YXRpYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC0xID09PSBtYXNrVGVtcGxhdGUuaW5kZXhPZihcImltLWNhcmV0XCIpICYmIGhhbmRsZUNhcmV0KCEwKSwgaXNTdGF0aWMgJiYgaGFuZGxlU3RhdGljKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IGNvbG9yTWFzay5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKVswXTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBtYXNrVGVtcGxhdGUsIGlucHV0LmlucHV0bWFzay5wb3NpdGlvbkNvbG9yTWFzayhpbnB1dCwgdGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hc2tzZXQgPSBtYXNrc2V0IHx8IHRoaXMubWFza3NldCwgb3B0cyA9IG9wdHMgfHwgdGhpcy5vcHRzO1xyXG4gICAgICAgICAgICB2YXIgdW5kb1ZhbHVlLCAkZWwsIG1heExlbmd0aCwgY29sb3JNYXNrLCBpbnB1dG1hc2sgPSB0aGlzLCBlbCA9IHRoaXMuZWwsIGlzUlRMID0gdGhpcy5pc1JUTCwgc2tpcEtleVByZXNzRXZlbnQgPSAhMSwgc2tpcElucHV0RXZlbnQgPSAhMSwgaWdub3JhYmxlID0gITEsIG1vdXNlRW50ZXIgPSAhMSwgRXZlbnRSdWxlciA9IHtcclxuICAgICAgICAgICAgICAgIG9uOiBmdW5jdGlvbihpbnB1dCwgZXZlbnROYW1lLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXYgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0bWFzayA9PT0gdW5kZWZpbmVkICYmIFwiRk9STVwiICE9PSB0aGlzLm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1PcHRzID0gJC5kYXRhKHRoaXMsIFwiX2lucHV0bWFza19vcHRzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1PcHRzID8gbmV3IElucHV0bWFzayhpbU9wdHMpLm1hc2sodGhpcykgOiBFdmVudFJ1bGVyLm9mZih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInNldHZhbHVlXCIgPT09IGUudHlwZSB8fCBcIkZPUk1cIiA9PT0gdGhpcy5ub2RlTmFtZSB8fCAhKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkT25seSAmJiAhKFwia2V5ZG93blwiID09PSBlLnR5cGUgJiYgZS5jdHJsS2V5ICYmIDY3ID09PSBlLmtleUNvZGUgfHwgITEgPT09IG9wdHMudGFiVGhyb3VnaCAmJiBlLmtleUNvZGUgPT09IElucHV0bWFzay5rZXlDb2RlLlRBQikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoITAgPT09IHNraXBJbnB1dEV2ZW50KSByZXR1cm4gc2tpcElucHV0RXZlbnQgPSAhMSwgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwia2V5ZG93blwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwS2V5UHJlc3NFdmVudCA9ICExLCBza2lwSW5wdXRFdmVudCA9ICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwia2V5cHJlc3NcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEwID09PSBza2lwS2V5UHJlc3NFdmVudCkgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEtleVByZXNzRXZlbnQgPSAhMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaWNrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZW1vYmlsZSB8fCBpcGhvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlci5hcHBseSh0aGF0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApLCAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsID0gZXZlbnRIYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExID09PSByZXR1cm5WYWwgJiYgKGUucHJldmVudERlZmF1bHQoKSwgZS5zdG9wUHJvcGFnYXRpb24oKSksIHJldHVyblZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuaW5wdXRtYXNrLmV2ZW50c1tldmVudE5hbWVdID0gaW5wdXQuaW5wdXRtYXNrLmV2ZW50c1tldmVudE5hbWVdIHx8IFtdLCBpbnB1dC5pbnB1dG1hc2suZXZlbnRzW2V2ZW50TmFtZV0ucHVzaChldiksIFxyXG4gICAgICAgICAgICAgICAgICAgIC0xICE9PSAkLmluQXJyYXkoZXZlbnROYW1lLCBbIFwic3VibWl0XCIsIFwicmVzZXRcIiBdKSA/IG51bGwgIT09IGlucHV0LmZvcm0gJiYgJChpbnB1dC5mb3JtKS5vbihldmVudE5hbWUsIGV2KSA6ICQoaW5wdXQpLm9uKGV2ZW50TmFtZSwgZXYpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oaW5wdXQsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmlucHV0bWFzayAmJiBpbnB1dC5pbnB1dG1hc2suZXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID8gKGV2ZW50cyA9IFtdKVtldmVudF0gPSBpbnB1dC5pbnB1dG1hc2suZXZlbnRzW2V2ZW50XSA6IGV2ZW50cyA9IGlucHV0LmlucHV0bWFzay5ldmVudHMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZXZlbnRzLCBmdW5jdGlvbihldmVudE5hbWUsIGV2QXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtldkFyci5sZW5ndGggPiAwOyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXYgPSBldkFyci5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gJC5pbkFycmF5KGV2ZW50TmFtZSwgWyBcInN1Ym1pdFwiLCBcInJlc2V0XCIgXSkgPyBudWxsICE9PSBpbnB1dC5mb3JtICYmICQoaW5wdXQuZm9ybSkub2ZmKGV2ZW50TmFtZSwgZXYpIDogJChpbnB1dCkub2ZmKGV2ZW50TmFtZSwgZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGlucHV0LmlucHV0bWFzay5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBFdmVudEhhbmRsZXJzID0ge1xyXG4gICAgICAgICAgICAgICAga2V5ZG93bkV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcywgJGlucHV0ID0gJChpbnB1dCksIGsgPSBlLmtleUNvZGUsIHBvcyA9IGNhcmV0KGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuQkFDS1NQQUNFIHx8IGsgPT09IElucHV0bWFzay5rZXlDb2RlLkRFTEVURSB8fCBpcGhvbmUgJiYgayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuQkFDS1NQQUNFX1NBRkFSSSB8fCBlLmN0cmxLZXkgJiYgayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuWCAmJiAhZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSwgZXZOYW1lID0gXCJvblwiICsgZXZlbnROYW1lLCBpc1N1cHBvcnRlZCA9IGV2TmFtZSBpbiBlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkIHx8IChlbC5zZXRBdHRyaWJ1dGUoZXZOYW1lLCBcInJldHVybjtcIiksIGlzU3VwcG9ydGVkID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBlbFtldk5hbWVdKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gbnVsbCwgaXNTdXBwb3J0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfShcImN1dFwiKSkgZS5wcmV2ZW50RGVmYXVsdCgpLCBoYW5kbGVSZW1vdmUoaW5wdXQsIGssIHBvcyksIHdyaXRlQnVmZmVyKGlucHV0LCBnZXRCdWZmZXIoITApLCBnZXRNYXNrU2V0KCkucCwgZSwgaW5wdXQuaW5wdXRtYXNrLl92YWx1ZUdldCgpICE9PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuaW5wdXRtYXNrLl92YWx1ZUdldCgpID09PSBnZXRCdWZmZXJUZW1wbGF0ZSgpLmpvaW4oXCJcIikgPyAkaW5wdXQudHJpZ2dlcihcImNsZWFyZWRcIikgOiAhMCA9PT0gaXNDb21wbGV0ZShnZXRCdWZmZXIoKSkgJiYgJGlucHV0LnRyaWdnZXIoXCJjb21wbGV0ZVwiKTsgZWxzZSBpZiAoayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuRU5EIHx8IGsgPT09IElucHV0bWFzay5rZXlDb2RlLlBBR0VfRE9XTikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJldFBvcyA9IHNlZWtOZXh0KGdldExhc3RWYWxpZFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmluc2VydE1vZGUgfHwgY2FyZXRQb3MgIT09IGdldE1hc2tTZXQoKS5tYXNrTGVuZ3RoIHx8IGUuc2hpZnRLZXkgfHwgY2FyZXRQb3MtLSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCBlLnNoaWZ0S2V5ID8gcG9zLmJlZ2luIDogY2FyZXRQb3MsIGNhcmV0UG9zLCAhMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGsgPT09IElucHV0bWFzay5rZXlDb2RlLkhPTUUgJiYgIWUuc2hpZnRLZXkgfHwgayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuUEFHRV9VUCA/IChlLnByZXZlbnREZWZhdWx0KCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCAwLCBlLnNoaWZ0S2V5ID8gcG9zLmJlZ2luIDogMCwgITApKSA6IChvcHRzLnVuZG9PbkVzY2FwZSAmJiBrID09PSBJbnB1dG1hc2sua2V5Q29kZS5FU0NBUEUgfHwgOTAgPT09IGsgJiYgZS5jdHJsS2V5KSAmJiAhMCAhPT0gZS5hbHRLZXkgPyAoY2hlY2tWYWwoaW5wdXQsICEwLCAhMSwgdW5kb1ZhbHVlLnNwbGl0KFwiXCIpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnRyaWdnZXIoXCJjbGlja1wiKSkgOiBrICE9PSBJbnB1dG1hc2sua2V5Q29kZS5JTlNFUlQgfHwgZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkgPyAhMCA9PT0gb3B0cy50YWJUaHJvdWdoICYmIGsgPT09IElucHV0bWFzay5rZXlDb2RlLlRBQiA/ICghMCA9PT0gZS5zaGlmdEtleSA/IChudWxsID09PSBnZXRUZXN0KHBvcy5iZWdpbikubWF0Y2guZm4gJiYgKHBvcy5iZWdpbiA9IHNlZWtOZXh0KHBvcy5iZWdpbikpLCBcclxuICAgICAgICAgICAgICAgICAgICBwb3MuZW5kID0gc2Vla1ByZXZpb3VzKHBvcy5iZWdpbiwgITApLCBwb3MuYmVnaW4gPSBzZWVrUHJldmlvdXMocG9zLmVuZCwgITApKSA6IChwb3MuYmVnaW4gPSBzZWVrTmV4dChwb3MuYmVnaW4sICEwKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zLmVuZCA9IHNlZWtOZXh0KHBvcy5iZWdpbiwgITApLCBwb3MuZW5kIDwgZ2V0TWFza1NldCgpLm1hc2tMZW5ndGggJiYgcG9zLmVuZC0tKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zLmJlZ2luIDwgZ2V0TWFza1NldCgpLm1hc2tMZW5ndGggJiYgKGUucHJldmVudERlZmF1bHQoKSwgY2FyZXQoaW5wdXQsIHBvcy5iZWdpbiwgcG9zLmVuZCkpKSA6IGUuc2hpZnRLZXkgfHwgITEgPT09IG9wdHMuaW5zZXJ0TW9kZSAmJiAoayA9PT0gSW5wdXRtYXNrLmtleUNvZGUuUklHSFQgPyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FyZXRQb3MgPSBjYXJldChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCBjYXJldFBvcy5iZWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCkgOiBrID09PSBJbnB1dG1hc2sua2V5Q29kZS5MRUZUICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJldFBvcyA9IGNhcmV0KGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXQoaW5wdXQsIGlzUlRMID8gY2FyZXRQb3MuYmVnaW4gKyAxIDogY2FyZXRQb3MuYmVnaW4gLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAwKSkgOiAob3B0cy5pbnNlcnRNb2RlID0gIW9wdHMuaW5zZXJ0TW9kZSwgY2FyZXQoaW5wdXQsIG9wdHMuaW5zZXJ0TW9kZSB8fCBwb3MuYmVnaW4gIT09IGdldE1hc2tTZXQoKS5tYXNrTGVuZ3RoID8gcG9zLmJlZ2luIDogcG9zLmJlZ2luIC0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMub25LZXlEb3duLmNhbGwodGhpcywgZSwgZ2V0QnVmZmVyKCksIGNhcmV0KGlucHV0KS5iZWdpbiwgb3B0cyksIGlnbm9yYWJsZSA9IC0xICE9PSAkLmluQXJyYXkoaywgb3B0cy5pZ25vcmFibGVzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBrZXlwcmVzc0V2ZW50OiBmdW5jdGlvbihlLCBjaGVja3ZhbCwgd3JpdGVPdXQsIHN0cmljdCwgbmR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcywgJGlucHV0ID0gJChpbnB1dCksIGsgPSBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKCEwID09PSBjaGVja3ZhbCB8fCBlLmN0cmxLZXkgJiYgZS5hbHRLZXkpICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGlnbm9yYWJsZSkpIHJldHVybiBrID09PSBJbnB1dG1hc2sua2V5Q29kZS5FTlRFUiAmJiB1bmRvVmFsdWUgIT09IGdldEJ1ZmZlcigpLmpvaW4oXCJcIikgJiYgKHVuZG9WYWx1ZSA9IGdldEJ1ZmZlcigpLmpvaW4oXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApKSwgITA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgNDYgPT09IGsgJiYgITEgPT09IGUuc2hpZnRLZXkgJiYgXCJcIiAhPT0gb3B0cy5yYWRpeFBvaW50ICYmIChrID0gb3B0cy5yYWRpeFBvaW50LmNoYXJDb2RlQXQoMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9yd2FyZFBvc2l0aW9uLCBwb3MgPSBjaGVja3ZhbCA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBuZHgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IG5keFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDogY2FyZXQoaW5wdXQpLCBjID0gU3RyaW5nLmZyb21DaGFyQ29kZShrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLndyaXRlT3V0QnVmZmVyID0gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxSZXN1bHQgPSBpc1ZhbGlkKHBvcywgYywgc3RyaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCExICE9PSB2YWxSZXN1bHQgJiYgKHJlc2V0TWFza1NldCghMCksIGZvcndhcmRQb3NpdGlvbiA9IHZhbFJlc3VsdC5jYXJldCAhPT0gdW5kZWZpbmVkID8gdmFsUmVzdWx0LmNhcmV0IDogY2hlY2t2YWwgPyB2YWxSZXN1bHQucG9zICsgMSA6IHNlZWtOZXh0KHZhbFJlc3VsdC5wb3MpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFza1NldCgpLnAgPSBmb3J3YXJkUG9zaXRpb24pLCAhMSAhPT0gd3JpdGVPdXQgJiYgKHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uS2V5VmFsaWRhdGlvbi5jYWxsKGlucHV0LCBrLCB2YWxSZXN1bHQsIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKSwgZ2V0TWFza1NldCgpLndyaXRlT3V0QnVmZmVyICYmICExICE9PSB2YWxSZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gZ2V0QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihpbnB1dCwgYnVmZmVyLCBvcHRzLm51bWVyaWNJbnB1dCAmJiB2YWxSZXN1bHQuY2FyZXQgPT09IHVuZGVmaW5lZCA/IHNlZWtQcmV2aW91cyhmb3J3YXJkUG9zaXRpb24pIDogZm9yd2FyZFBvc2l0aW9uLCBlLCAhMCAhPT0gY2hlY2t2YWwpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwICE9PSBjaGVja3ZhbCAmJiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwID09PSBpc0NvbXBsZXRlKGJ1ZmZlcikgJiYgJGlucHV0LnRyaWdnZXIoXCJjb21wbGV0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KCksIGNoZWNrdmFsKSByZXR1cm4gITEgIT09IHZhbFJlc3VsdCAmJiAodmFsUmVzdWx0LmZvcndhcmRQb3NpdGlvbiA9IGZvcndhcmRQb3NpdGlvbiksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhc3RlRXZlbnQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFZhbHVlLCBpbnB1dCA9IHRoaXMsIGV2ID0gZS5vcmlnaW5hbEV2ZW50IHx8IGUsICRpbnB1dCA9ICQoaW5wdXQpLCBpbnB1dFZhbHVlID0gaW5wdXQuaW5wdXRtYXNrLl92YWx1ZUdldCghMCksIGNhcmV0UG9zID0gY2FyZXQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUlRMICYmICh0ZW1wVmFsdWUgPSBjYXJldFBvcy5lbmQsIGNhcmV0UG9zLmVuZCA9IGNhcmV0UG9zLmJlZ2luLCBjYXJldFBvcy5iZWdpbiA9IHRlbXBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlQmVmb3JlQ2FyZXQgPSBpbnB1dFZhbHVlLnN1YnN0cigwLCBjYXJldFBvcy5iZWdpbiksIHZhbHVlQWZ0ZXJDYXJldCA9IGlucHV0VmFsdWUuc3Vic3RyKGNhcmV0UG9zLmVuZCwgaW5wdXRWYWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZUJlZm9yZUNhcmV0ID09PSAoaXNSVEwgPyBnZXRCdWZmZXJUZW1wbGF0ZSgpLnJldmVyc2UoKSA6IGdldEJ1ZmZlclRlbXBsYXRlKCkpLnNsaWNlKDAsIGNhcmV0UG9zLmJlZ2luKS5qb2luKFwiXCIpICYmICh2YWx1ZUJlZm9yZUNhcmV0ID0gXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQWZ0ZXJDYXJldCA9PT0gKGlzUlRMID8gZ2V0QnVmZmVyVGVtcGxhdGUoKS5yZXZlcnNlKCkgOiBnZXRCdWZmZXJUZW1wbGF0ZSgpKS5zbGljZShjYXJldFBvcy5lbmQpLmpvaW4oXCJcIikgJiYgKHZhbHVlQWZ0ZXJDYXJldCA9IFwiXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICBpc1JUTCAmJiAodGVtcFZhbHVlID0gdmFsdWVCZWZvcmVDYXJldCwgdmFsdWVCZWZvcmVDYXJldCA9IHZhbHVlQWZ0ZXJDYXJldCwgdmFsdWVBZnRlckNhcmV0ID0gdGVtcFZhbHVlKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsaXBib2FyZERhdGEgJiYgd2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YSkgaW5wdXRWYWx1ZSA9IHZhbHVlQmVmb3JlQ2FyZXQgKyB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKSArIHZhbHVlQWZ0ZXJDYXJldDsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXYuY2xpcGJvYXJkRGF0YSB8fCAhZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKSByZXR1cm4gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWUgPSB2YWx1ZUJlZm9yZUNhcmV0ICsgZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSArIHZhbHVlQWZ0ZXJDYXJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhc3RlVmFsdWUgPSBpbnB1dFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0cy5vbkJlZm9yZVBhc3RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoITEgPT09IChwYXN0ZVZhbHVlID0gb3B0cy5vbkJlZm9yZVBhc3RlLmNhbGwoaW5wdXRtYXNrLCBpbnB1dFZhbHVlLCBvcHRzKSkpIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3RlVmFsdWUgfHwgKHBhc3RlVmFsdWUgPSBpbnB1dFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrVmFsKGlucHV0LCAhMSwgITEsIGlzUlRMID8gcGFzdGVWYWx1ZS5zcGxpdChcIlwiKS5yZXZlcnNlKCkgOiBwYXN0ZVZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoXCJcIikpLCBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihpbnB1dCwgZ2V0QnVmZmVyKCksIHNlZWtOZXh0KGdldExhc3RWYWxpZFBvc2l0aW9uKCkpLCBlLCB1bmRvVmFsdWUgIT09IGdldEJ1ZmZlcigpLmpvaW4oXCJcIikpLCBcclxuICAgICAgICAgICAgICAgICAgICAhMCA9PT0gaXNDb21wbGV0ZShnZXRCdWZmZXIoKSkgJiYgJGlucHV0LnRyaWdnZXIoXCJjb21wbGV0ZVwiKSwgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGlucHV0RmFsbEJhY2tFdmVudDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMsIGlucHV0VmFsdWUgPSBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldEJ1ZmZlcigpLmpvaW4oXCJcIikgIT09IGlucHV0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zID0gY2FyZXQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoITEgPT09IGZ1bmN0aW9uKGlucHV0LCBpbnB1dFZhbHVlLCBjYXJldFBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiLlwiID09PSBpbnB1dFZhbHVlLmNoYXJBdChjYXJldFBvcy5iZWdpbiAtIDEpICYmIFwiXCIgIT09IG9wdHMucmFkaXhQb2ludCAmJiAoKGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnNwbGl0KFwiXCIpKVtjYXJldFBvcy5iZWdpbiAtIDFdID0gb3B0cy5yYWRpeFBvaW50LmNoYXJBdCgwKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlID0gaW5wdXRWYWx1ZS5qb2luKFwiXCIpKSwgaW5wdXRWYWx1ZS5jaGFyQXQoY2FyZXRQb3MuYmVnaW4gLSAxKSA9PT0gb3B0cy5yYWRpeFBvaW50ICYmIGlucHV0VmFsdWUubGVuZ3RoID4gZ2V0QnVmZmVyKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXByZXNzID0gbmV3ICQuRXZlbnQoXCJrZXlwcmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cHJlc3Mud2hpY2ggPSBvcHRzLnJhZGl4UG9pbnQuY2hhckNvZGVBdCgwKSwgRXZlbnRIYW5kbGVycy5rZXlwcmVzc0V2ZW50LmNhbGwoaW5wdXQsIGtleXByZXNzLCAhMCwgITAsICExLCBjYXJldFBvcy5iZWdpbiAtIDEpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfShpbnB1dCwgaW5wdXRWYWx1ZSwgY2FyZXRQb3MpKSByZXR1cm4gITE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlID0gaW5wdXRWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXCIgKyBJbnB1dG1hc2suZXNjYXBlUmVnZXgoZ2V0QnVmZmVyVGVtcGxhdGUoKS5qb2luKFwiXCIpKSArIFwiKSpcIiksIFwiXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IGZ1bmN0aW9uKGlucHV0LCBpbnB1dFZhbHVlLCBjYXJldFBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGllbW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0Q2hhciA9IGlucHV0VmFsdWUucmVwbGFjZShnZXRCdWZmZXIoKS5qb2luKFwiXCIpLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gaW5wdXRDaGFyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5cHJlc3MgPSBuZXcgJC5FdmVudChcImtleXByZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cHJlc3Mud2hpY2ggPSBpbnB1dENoYXIuY2hhckNvZGVBdCgwKSwgRXZlbnRIYW5kbGVycy5rZXlwcmVzc0V2ZW50LmNhbGwoaW5wdXQsIGtleXByZXNzLCAhMCwgITAsICExLCBnZXRNYXNrU2V0KCkudmFsaWRQb3NpdGlvbnNbY2FyZXRQb3MuYmVnaW4gLSAxXSA/IGNhcmV0UG9zLmJlZ2luIDogY2FyZXRQb3MuYmVnaW4gLSAxKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfShpbnB1dCwgaW5wdXRWYWx1ZSwgY2FyZXRQb3MpKSByZXR1cm4gITE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zLmJlZ2luID4gaW5wdXRWYWx1ZS5sZW5ndGggJiYgKGNhcmV0KGlucHV0LCBpbnB1dFZhbHVlLmxlbmd0aCksIGNhcmV0UG9zID0gY2FyZXQoaW5wdXQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGdldEJ1ZmZlcigpLmpvaW4oXCJcIiksIGZyb250UGFydCA9IGlucHV0VmFsdWUuc3Vic3RyKDAsIGNhcmV0UG9zLmJlZ2luKSwgYmFja1BhcnQgPSBpbnB1dFZhbHVlLnN1YnN0cihjYXJldFBvcy5iZWdpbiksIGZyb250QnVmZmVyUGFydCA9IGJ1ZmZlci5zdWJzdHIoMCwgY2FyZXRQb3MuYmVnaW4pLCBiYWNrQnVmZmVyUGFydCA9IGJ1ZmZlci5zdWJzdHIoY2FyZXRQb3MuYmVnaW4pLCBzZWxlY3Rpb24gPSBjYXJldFBvcywgZW50cmllcyA9IFwiXCIsIGlzRW50cnkgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250UGFydCAhPT0gZnJvbnRCdWZmZXJQYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYmVnaW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZnBsID0gKGlzRW50cnkgPSBmcm9udFBhcnQubGVuZ3RoID49IGZyb250QnVmZmVyUGFydC5sZW5ndGgpID8gZnJvbnRQYXJ0Lmxlbmd0aCA6IGZyb250QnVmZmVyUGFydC5sZW5ndGgsIGkgPSAwOyBmcm9udFBhcnQuY2hhckF0KGkpID09PSBmcm9udEJ1ZmZlclBhcnQuY2hhckF0KGkpICYmIGkgPCBmcGw7IGkrKykgc2VsZWN0aW9uLmJlZ2luKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VudHJ5ICYmIChlbnRyaWVzICs9IGZyb250UGFydC5zbGljZShzZWxlY3Rpb24uYmVnaW4sIHNlbGVjdGlvbi5lbmQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrUGFydCAhPT0gYmFja0J1ZmZlclBhcnQgJiYgKGJhY2tQYXJ0Lmxlbmd0aCA+IGJhY2tCdWZmZXJQYXJ0Lmxlbmd0aCA/IGlzRW50cnkgJiYgKHNlbGVjdGlvbi5lbmQgPSBzZWxlY3Rpb24uYmVnaW4pIDogYmFja1BhcnQubGVuZ3RoIDwgYmFja0J1ZmZlclBhcnQubGVuZ3RoID8gc2VsZWN0aW9uLmVuZCArPSBiYWNrQnVmZmVyUGFydC5sZW5ndGggLSBiYWNrUGFydC5sZW5ndGggOiBiYWNrUGFydC5jaGFyQXQoMCkgIT09IGJhY2tCdWZmZXJQYXJ0LmNoYXJBdCgwKSAmJiBzZWxlY3Rpb24uZW5kKyspLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCdWZmZXIoaW5wdXQsIGdldEJ1ZmZlcigpLCBzZWxlY3Rpb24pLCBlbnRyaWVzLmxlbmd0aCA+IDAgPyAkLmVhY2goZW50cmllcy5zcGxpdChcIlwiKSwgZnVuY3Rpb24obmR4LCBlbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXByZXNzID0gbmV3ICQuRXZlbnQoXCJrZXlwcmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXByZXNzLndoaWNoID0gZW50cnkuY2hhckNvZGVBdCgwKSwgaWdub3JhYmxlID0gITEsIEV2ZW50SGFuZGxlcnMua2V5cHJlc3NFdmVudC5jYWxsKGlucHV0LCBrZXlwcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogKHNlbGVjdGlvbi5iZWdpbiA9PT0gc2VsZWN0aW9uLmVuZCAtIDEgJiYgY2FyZXQoaW5wdXQsIHNlZWtQcmV2aW91cyhzZWxlY3Rpb24uYmVnaW4gKyAxKSwgc2VsZWN0aW9uLmVuZCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSBJbnB1dG1hc2sua2V5Q29kZS5ERUxFVEUsIEV2ZW50SGFuZGxlcnMua2V5ZG93bkV2ZW50LmNhbGwoaW5wdXQsIGUpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0VmFsdWVFdmVudDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRtYXNrLnJlZnJlc2hWYWx1ZSA9ICExO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMsIHZhbHVlID0gaW5wdXQuaW5wdXRtYXNrLl92YWx1ZUdldCghMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKG9wdHMub25CZWZvcmVNYXNrKSAmJiAodmFsdWUgPSBvcHRzLm9uQmVmb3JlTWFzay5jYWxsKGlucHV0bWFzaywgdmFsdWUsIG9wdHMpIHx8IHZhbHVlKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdChcIlwiKSwgY2hlY2tWYWwoaW5wdXQsICEwLCAhMSwgaXNSVEwgPyB2YWx1ZS5yZXZlcnNlKCkgOiB2YWx1ZSksIFxyXG4gICAgICAgICAgICAgICAgICAgIHVuZG9WYWx1ZSA9IGdldEJ1ZmZlcigpLmpvaW4oXCJcIiksIChvcHRzLmNsZWFyTWFza09uTG9zdEZvY3VzIHx8IG9wdHMuY2xlYXJJbmNvbXBsZXRlKSAmJiBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCkgPT09IGdldEJ1ZmZlclRlbXBsYXRlKCkuam9pbihcIlwiKSAmJiBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlU2V0KFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZvY3VzRXZlbnQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLCBucHRWYWx1ZSA9IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLnNob3dNYXNrT25Gb2N1cyAmJiAoIW9wdHMuc2hvd01hc2tPbkhvdmVyIHx8IG9wdHMuc2hvd01hc2tPbkhvdmVyICYmIFwiXCIgPT09IG5wdFZhbHVlKSAmJiAoaW5wdXQuaW5wdXRtYXNrLl92YWx1ZUdldCgpICE9PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpID8gd3JpdGVCdWZmZXIoaW5wdXQsIGdldEJ1ZmZlcigpLCBzZWVrTmV4dChnZXRMYXN0VmFsaWRQb3NpdGlvbigpKSkgOiAhMSA9PT0gbW91c2VFbnRlciAmJiBjYXJldChpbnB1dCwgc2Vla05leHQoZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSkpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgITAgPT09IG9wdHMucG9zaXRpb25DYXJldE9uVGFiICYmICExID09PSBtb3VzZUVudGVyICYmIFwiXCIgIT09IG5wdFZhbHVlICYmICh3cml0ZUJ1ZmZlcihpbnB1dCwgZ2V0QnVmZmVyKCksIGNhcmV0KGlucHV0KSksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlcnMuY2xpY2tFdmVudC5hcHBseShpbnB1dCwgWyBlLCAhMCBdKSksIHVuZG9WYWx1ZSA9IGdldEJ1ZmZlcigpLmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VsZWF2ZUV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAobW91c2VFbnRlciA9ICExLCBvcHRzLmNsZWFyTWFza09uTG9zdEZvY3VzICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBnZXRCdWZmZXIoKS5zbGljZSgpLCBucHRWYWx1ZSA9IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnB0VmFsdWUgIT09IGlucHV0LmdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpICYmIFwiXCIgIT09IG5wdFZhbHVlICYmICgtMSA9PT0gZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSAmJiBucHRWYWx1ZSA9PT0gZ2V0QnVmZmVyVGVtcGxhdGUoKS5qb2luKFwiXCIpID8gYnVmZmVyID0gW10gOiBjbGVhck9wdGlvbmFsVGFpbChidWZmZXIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCdWZmZXIoaW5wdXQsIGJ1ZmZlcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjbGlja0V2ZW50OiBmdW5jdGlvbihlLCB0YWJiZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkb1JhZGl4Rm9jdXMoY2xpY2tQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiXCIgIT09IG9wdHMucmFkaXhQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZwcyA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2cHNbY2xpY2tQb3NdID09PSB1bmRlZmluZWQgfHwgdnBzW2NsaWNrUG9zXS5pbnB1dCA9PT0gZ2V0UGxhY2Vob2xkZXIoY2xpY2tQb3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWNrUG9zIDwgc2Vla05leHQoLTEpKSByZXR1cm4gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl4UG9zID0gJC5pbkFycmF5KG9wdHMucmFkaXhQb2ludCwgZ2V0QnVmZmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gcmFkaXhQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdnAgaW4gdnBzKSBpZiAocmFkaXhQb3MgPCB2cCAmJiB2cHNbdnBdLmlucHV0ICE9PSBnZXRQbGFjZWhvbGRlcih2cCkpIHJldHVybiAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDYXJldCA9IGNhcmV0KGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJiZWQgJiYgKGlzUlRMID8gc2VsZWN0ZWRDYXJldC5lbmQgPSBzZWxlY3RlZENhcmV0LmJlZ2luIDogc2VsZWN0ZWRDYXJldC5iZWdpbiA9IHNlbGVjdGVkQ2FyZXQuZW5kKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhcmV0LmJlZ2luID09PSBzZWxlY3RlZENhcmV0LmVuZCkgc3dpdGNoIChvcHRzLnBvc2l0aW9uQ2FyZXRPbkNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub25lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmFkaXhGb2N1c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb1JhZGl4Rm9jdXMoc2VsZWN0ZWRDYXJldC5iZWdpbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl4UG9zID0gZ2V0QnVmZmVyKCkuam9pbihcIlwiKS5pbmRleE9mKG9wdHMucmFkaXhQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCBvcHRzLm51bWVyaWNJbnB1dCA/IHNlZWtOZXh0KHJhZGl4UG9zKSA6IHJhZGl4UG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpY2tQb3NpdGlvbiA9IHNlbGVjdGVkQ2FyZXQuYmVnaW4sIGx2Y2xpY2tQb3NpdGlvbiA9IGdldExhc3RWYWxpZFBvc2l0aW9uKGNsaWNrUG9zaXRpb24sICEwKSwgbGFzdFBvc2l0aW9uID0gc2Vla05leHQobHZjbGlja1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpY2tQb3NpdGlvbiA8IGxhc3RQb3NpdGlvbikgY2FyZXQoaW5wdXQsIGlzTWFzayhjbGlja1Bvc2l0aW9uLCAhMCkgfHwgaXNNYXNrKGNsaWNrUG9zaXRpb24gLSAxLCAhMCkgPyBjbGlja1Bvc2l0aW9uIDogc2Vla05leHQoY2xpY2tQb3NpdGlvbikpOyBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGx2cCA9IGdldE1hc2tTZXQoKS52YWxpZFBvc2l0aW9uc1tsdmNsaWNrUG9zaXRpb25dLCB0dCA9IGdldFRlc3RUZW1wbGF0ZShsYXN0UG9zaXRpb24sIGx2cCA/IGx2cC5tYXRjaC5sb2NhdG9yIDogdW5kZWZpbmVkLCBsdnApLCBwbGFjZWhvbGRlciA9IGdldFBsYWNlaG9sZGVyKGxhc3RQb3NpdGlvbiwgdHQubWF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJcIiAhPT0gcGxhY2Vob2xkZXIgJiYgZ2V0QnVmZmVyKClbbGFzdFBvc2l0aW9uXSAhPT0gcGxhY2Vob2xkZXIgJiYgITAgIT09IHR0Lm1hdGNoLm9wdGlvbmFsUXVhbnRpZmllciAmJiAhMCAhPT0gdHQubWF0Y2gubmV3QmxvY2tNYXJrZXIgfHwgIWlzTWFzayhsYXN0UG9zaXRpb24sICEwKSAmJiB0dC5tYXRjaC5kZWYgPT09IHBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UG9zID0gc2Vla05leHQobGFzdFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjbGlja1Bvc2l0aW9uID49IG5ld1BvcyB8fCBjbGlja1Bvc2l0aW9uID09PSBsYXN0UG9zaXRpb24pICYmIChsYXN0UG9zaXRpb24gPSBuZXdQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCBsYXN0UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRibGNsaWNrRXZlbnQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0KGlucHV0LCAwLCBzZWVrTmV4dChnZXRMYXN0VmFsaWRQb3NpdGlvbigpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY3V0RXZlbnQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLCAkaW5wdXQgPSAkKGlucHV0KSwgcG9zID0gY2FyZXQoaW5wdXQpLCBldiA9IGUub3JpZ2luYWxFdmVudCB8fCBlLCBjbGlwYm9hcmREYXRhID0gd2luZG93LmNsaXBib2FyZERhdGEgfHwgZXYuY2xpcGJvYXJkRGF0YSwgY2xpcERhdGEgPSBpc1JUTCA/IGdldEJ1ZmZlcigpLnNsaWNlKHBvcy5lbmQsIHBvcy5iZWdpbikgOiBnZXRCdWZmZXIoKS5zbGljZShwb3MuYmVnaW4sIHBvcy5lbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaXBib2FyZERhdGEuc2V0RGF0YShcInRleHRcIiwgaXNSVEwgPyBjbGlwRGF0YS5yZXZlcnNlKCkuam9pbihcIlwiKSA6IGNsaXBEYXRhLmpvaW4oXCJcIikpLCBcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCAmJiBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIiksIGhhbmRsZVJlbW92ZShpbnB1dCwgSW5wdXRtYXNrLmtleUNvZGUuREVMRVRFLCBwb3MpLCBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihpbnB1dCwgZ2V0QnVmZmVyKCksIGdldE1hc2tTZXQoKS5wLCBlLCB1bmRvVmFsdWUgIT09IGdldEJ1ZmZlcigpLmpvaW4oXCJcIikpLCBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5pbnB1dG1hc2suX3ZhbHVlR2V0KCkgPT09IGdldEJ1ZmZlclRlbXBsYXRlKCkuam9pbihcIlwiKSAmJiAkaW5wdXQudHJpZ2dlcihcImNsZWFyZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmx1ckV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksIGlucHV0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuaW5wdXRtYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBucHRWYWx1ZSA9IGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKSwgYnVmZmVyID0gZ2V0QnVmZmVyKCkuc2xpY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcIiAhPT0gbnB0VmFsdWUgJiYgKG9wdHMuY2xlYXJNYXNrT25Mb3N0Rm9jdXMgJiYgKC0xID09PSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpICYmIG5wdFZhbHVlID09PSBnZXRCdWZmZXJUZW1wbGF0ZSgpLmpvaW4oXCJcIikgPyBidWZmZXIgPSBbXSA6IGNsZWFyT3B0aW9uYWxUYWlsKGJ1ZmZlcikpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IGlzQ29tcGxldGUoYnVmZmVyKSAmJiAoc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC50cmlnZ2VyKFwiaW5jb21wbGV0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCksIG9wdHMuY2xlYXJJbmNvbXBsZXRlICYmIChyZXNldE1hc2tTZXQoKSwgYnVmZmVyID0gb3B0cy5jbGVhck1hc2tPbkxvc3RGb2N1cyA/IFtdIDogZ2V0QnVmZmVyVGVtcGxhdGUoKS5zbGljZSgpKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihpbnB1dCwgYnVmZmVyLCB1bmRlZmluZWQsIGUpKSwgdW5kb1ZhbHVlICE9PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpICYmICh1bmRvVmFsdWUgPSBidWZmZXIuam9pbihcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC50cmlnZ2VyKFwiY2hhbmdlXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VlbnRlckV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZUVudGVyID0gITAsIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGlucHV0ICYmIG9wdHMuc2hvd01hc2tPbkhvdmVyICYmIGlucHV0LmlucHV0bWFzay5fdmFsdWVHZXQoKSAhPT0gZ2V0QnVmZmVyKCkuam9pbihcIlwiKSAmJiB3cml0ZUJ1ZmZlcihpbnB1dCwgZ2V0QnVmZmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kb1ZhbHVlICE9PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpICYmICRlbC50cmlnZ2VyKFwiY2hhbmdlXCIpLCBvcHRzLmNsZWFyTWFza09uTG9zdEZvY3VzICYmIC0xID09PSBnZXRMYXN0VmFsaWRQb3NpdGlvbigpICYmIGVsLmlucHV0bWFzay5fdmFsdWVHZXQgJiYgZWwuaW5wdXRtYXNrLl92YWx1ZUdldCgpID09PSBnZXRCdWZmZXJUZW1wbGF0ZSgpLmpvaW4oXCJcIikgJiYgZWwuaW5wdXRtYXNrLl92YWx1ZVNldChcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5yZW1vdmVNYXNrT25TdWJtaXQgJiYgKGVsLmlucHV0bWFzay5fdmFsdWVTZXQoZWwuaW5wdXRtYXNrLnVubWFza2VkdmFsdWUoKSwgITApLCBcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ1ZmZlcihlbCwgZ2V0QnVmZmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNldEV2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuaW5wdXRtYXNrLnJlZnJlc2hWYWx1ZSA9ICEwLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWwudHJpZ2dlcihcInNldHZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBJbnB1dG1hc2sucHJvdG90eXBlLnBvc2l0aW9uQ29sb3JNYXNrID0gZnVuY3Rpb24oaW5wdXQsIHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5zdHlsZS5sZWZ0ID0gdGVtcGxhdGUub2Zmc2V0TGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlQnVmZmVyO1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uT2JqICE9PSB1bmRlZmluZWQpIHN3aXRjaCAoYWN0aW9uT2JqLmFjdGlvbikge1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJpc0NvbXBsZXRlXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWwgPSBhY3Rpb25PYmouZWwsIGlzQ29tcGxldGUoZ2V0QnVmZmVyKCkpO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwidW5tYXNrZWR2YWx1ZVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsICE9PSB1bmRlZmluZWQgJiYgYWN0aW9uT2JqLnZhbHVlID09PSB1bmRlZmluZWQgfHwgKHZhbHVlQnVmZmVyID0gYWN0aW9uT2JqLnZhbHVlLCBcclxuICAgICAgICAgICAgICAgIHZhbHVlQnVmZmVyID0gKCQuaXNGdW5jdGlvbihvcHRzLm9uQmVmb3JlTWFzaykgPyBvcHRzLm9uQmVmb3JlTWFzay5jYWxsKGlucHV0bWFzaywgdmFsdWVCdWZmZXIsIG9wdHMpIHx8IHZhbHVlQnVmZmVyIDogdmFsdWVCdWZmZXIpLnNwbGl0KFwiXCIpLCBcclxuICAgICAgICAgICAgICAgIGNoZWNrVmFsKHVuZGVmaW5lZCwgITEsICExLCBpc1JUTCA/IHZhbHVlQnVmZmVyLnJldmVyc2UoKSA6IHZhbHVlQnVmZmVyKSwgJC5pc0Z1bmN0aW9uKG9wdHMub25CZWZvcmVXcml0ZSkgJiYgb3B0cy5vbkJlZm9yZVdyaXRlLmNhbGwoaW5wdXRtYXNrLCB1bmRlZmluZWQsIGdldEJ1ZmZlcigpLCAwLCBvcHRzKSksIFxyXG4gICAgICAgICAgICAgICAgdW5tYXNrZWR2YWx1ZShlbCk7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgXCJtYXNrXCI6XHJcbiAgICAgICAgICAgICAgICAhZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub2ZmKGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1N1cHBvcnRlZCA9IGZ1bmN0aW9uKGlucHV0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIiksIGlzU3VwcG9ydGVkID0gXCJJTlBVVFwiID09PSBpbnB1dC50YWdOYW1lICYmIC0xICE9PSAkLmluQXJyYXkoZWxlbWVudFR5cGUsIG9wdHMuc3VwcG9ydHNJbnB1dFR5cGUpIHx8IGlucHV0LmlzQ29udGVudEVkaXRhYmxlIHx8IFwiVEVYVEFSRUFcIiA9PT0gaW5wdXQudGFnTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCkgaWYgKFwiSU5QVVRcIiA9PT0gaW5wdXQudGFnTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBlbGVtZW50VHlwZSksIGlzU3VwcG9ydGVkID0gXCJ0ZXh0XCIgPT09IGVsLnR5cGUsIGVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlzU3VwcG9ydGVkID0gXCJwYXJ0aWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMSAhPT0gaXNTdXBwb3J0ZWQgPyBmdW5jdGlvbihucHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldHRlcigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnB1dG1hc2sgPyB0aGlzLmlucHV0bWFzay5vcHRzLmF1dG9Vbm1hc2sgPyB0aGlzLmlucHV0bWFzay51bm1hc2tlZHZhbHVlKCkgOiAtMSAhPT0gZ2V0TGFzdFZhbGlkUG9zaXRpb24oKSB8fCAhMCAhPT0gb3B0cy5udWxsYWJsZSA/IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMgJiYgb3B0cy5jbGVhck1hc2tPbkxvc3RGb2N1cyA/IChpc1JUTCA/IGNsZWFyT3B0aW9uYWxUYWlsKGdldEJ1ZmZlcigpLnNsaWNlKCkpLnJldmVyc2UoKSA6IGNsZWFyT3B0aW9uYWxUYWlsKGdldEJ1ZmZlcigpLnNsaWNlKCkpKS5qb2luKFwiXCIpIDogdmFsdWVHZXQuY2FsbCh0aGlzKSA6IFwiXCIgOiB2YWx1ZUdldC5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dGVyKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVTZXQuY2FsbCh0aGlzLCB2YWx1ZSksIHRoaXMuaW5wdXRtYXNrICYmICQodGhpcykudHJpZ2dlcihcInNldHZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlR2V0LCB2YWx1ZVNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbnB0LmlucHV0bWFzay5fX3ZhbHVlR2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEwICE9PSBvcHRzLm5vVmFsdWVQYXRjaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZiA9IFwib2JqZWN0XCIgPT09IF90eXBlb2YoXCJ0ZXN0XCIuX19wcm90b19fKSA/IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19wcm90b19fO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVQcm9wZXJ0eSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LmdldFByb3RvdHlwZU9mKG5wdCksIFwidmFsdWVcIikgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVByb3BlcnR5ICYmIHZhbHVlUHJvcGVydHkuZ2V0ICYmIHZhbHVlUHJvcGVydHkuc2V0ID8gKHZhbHVlR2V0ID0gdmFsdWVQcm9wZXJ0eS5nZXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVTZXQgPSB2YWx1ZVByb3BlcnR5LnNldCwgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5wdCwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBnZXR0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBzZXR0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogXCJJTlBVVFwiICE9PSBucHQudGFnTmFtZSAmJiAodmFsdWVHZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZhbHVlU2V0ID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkobnB0LCBcInZhbHVlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGdldHRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IHNldHRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBkb2N1bWVudC5fX2xvb2t1cEdldHRlcl9fICYmIG5wdC5fX2xvb2t1cEdldHRlcl9fKFwidmFsdWVcIikgJiYgKHZhbHVlR2V0ID0gbnB0Ll9fbG9va3VwR2V0dGVyX18oXCJ2YWx1ZVwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlU2V0ID0gbnB0Ll9fbG9va3VwU2V0dGVyX18oXCJ2YWx1ZVwiKSwgbnB0Ll9fZGVmaW5lR2V0dGVyX18oXCJ2YWx1ZVwiLCBnZXR0ZXIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnB0Ll9fZGVmaW5lU2V0dGVyX18oXCJ2YWx1ZVwiLCBzZXR0ZXIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnB0LmlucHV0bWFzay5fX3ZhbHVlR2V0ID0gdmFsdWVHZXQsIG5wdC5pbnB1dG1hc2suX192YWx1ZVNldCA9IHZhbHVlU2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBucHQuaW5wdXRtYXNrLl92YWx1ZUdldCA9IGZ1bmN0aW9uKG92ZXJydWxlUlRMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1JUTCAmJiAhMCAhPT0gb3ZlcnJ1bGVSVEwgPyB2YWx1ZUdldC5jYWxsKHRoaXMuZWwpLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpIDogdmFsdWVHZXQuY2FsbCh0aGlzLmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBucHQuaW5wdXRtYXNrLl92YWx1ZVNldCA9IGZ1bmN0aW9uKHZhbHVlLCBvdmVycnVsZVJUTCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVNldC5jYWxsKHRoaXMuZWwsIG51bGwgPT09IHZhbHVlIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogITAgIT09IG92ZXJydWxlUlRMICYmIGlzUlRMID8gdmFsdWUuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIikgOiB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdmFsdWVHZXQgPT09IHVuZGVmaW5lZCAmJiAodmFsdWVHZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdmFsdWVTZXQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24odHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC52YWxIb29rcyAmJiAoJC52YWxIb29rc1t0eXBlXSA9PT0gdW5kZWZpbmVkIHx8ICEwICE9PSAkLnZhbEhvb2tzW3R5cGVdLmlucHV0bWFza3BhdGNoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGhvb2tHZXQgPSAkLnZhbEhvb2tzW3R5cGVdICYmICQudmFsSG9va3NbdHlwZV0uZ2V0ID8gJC52YWxIb29rc1t0eXBlXS5nZXQgOiBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB2YWxob29rU2V0ID0gJC52YWxIb29rc1t0eXBlXSAmJiAkLnZhbEhvb2tzW3R5cGVdLnNldCA/ICQudmFsSG9va3NbdHlwZV0uc2V0IDogZnVuY3Rpb24oZWxlbSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS52YWx1ZSA9IHZhbHVlLCBlbGVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudmFsSG9va3NbdHlwZV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmlucHV0bWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uaW5wdXRtYXNrLm9wdHMuYXV0b1VubWFzaykgcmV0dXJuIGVsZW0uaW5wdXRtYXNrLnVubWFza2VkdmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWxob29rR2V0KGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICE9PSBnZXRMYXN0VmFsaWRQb3NpdGlvbih1bmRlZmluZWQsIHVuZGVmaW5lZCwgZWxlbS5pbnB1dG1hc2subWFza3NldC52YWxpZFBvc2l0aW9ucykgfHwgITAgIT09IG9wdHMubnVsbGFibGUgPyByZXN1bHQgOiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxob29rR2V0KGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihlbGVtLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0LCAkZWxlbSA9ICQoZWxlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgPSB2YWxob29rU2V0KGVsZW0sIHZhbHVlKSwgZWxlbS5pbnB1dG1hc2sgJiYgJGVsZW0udHJpZ2dlcihcInNldHZhbHVlXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRtYXNrcGF0Y2g6ICEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShucHQudHlwZSksIGZ1bmN0aW9uKG5wdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudFJ1bGVyLm9uKG5wdCwgXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRtYXNrLl92YWx1ZUdldCgpICE9PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpICYmICRpbnB1dC50cmlnZ2VyKFwic2V0dmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0obnB0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0oaW5wdXQpIDogaW5wdXQuaW5wdXRtYXNrID0gdW5kZWZpbmVkLCBpc1N1cHBvcnRlZDtcclxuICAgICAgICAgICAgICAgICAgICB9KGVsZW0sIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghMSAhPT0gaXNTdXBwb3J0ZWQgJiYgKGVsID0gZWxlbSwgJGVsID0gJChlbCksIC0xID09PSAobWF4TGVuZ3RoID0gZWwgIT09IHVuZGVmaW5lZCA/IGVsLm1heExlbmd0aCA6IHVuZGVmaW5lZCkgJiYgKG1heExlbmd0aCA9IHVuZGVmaW5lZCksIFxyXG4gICAgICAgICAgICAgICAgICAgICEwID09PSBvcHRzLmNvbG9yTWFzayAmJiBpbml0aWFsaXplQ29sb3JNYXNrKGVsKSwgYW5kcm9pZCAmJiAoZWwuaGFzT3duUHJvcGVydHkoXCJpbnB1dG1vZGVcIikgJiYgKGVsLmlucHV0bW9kZSA9IG9wdHMuaW5wdXRtb2RlLCBcclxuICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJpbnB1dG1vZGVcIiwgb3B0cy5pbnB1dG1vZGUpKSwgXCJydGZtXCIgPT09IG9wdHMuYW5kcm9pZEhhY2sgJiYgKCEwICE9PSBvcHRzLmNvbG9yTWFzayAmJiBpbml0aWFsaXplQ29sb3JNYXNrKGVsKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZWwudHlwZSA9IFwicGFzc3dvcmRcIikpLCAhMCA9PT0gaXNTdXBwb3J0ZWQgJiYgKEV2ZW50UnVsZXIub24oZWwsIFwic3VibWl0XCIsIEV2ZW50SGFuZGxlcnMuc3VibWl0RXZlbnQpLCBcclxuICAgICAgICAgICAgICAgICAgICBFdmVudFJ1bGVyLm9uKGVsLCBcInJlc2V0XCIsIEV2ZW50SGFuZGxlcnMucmVzZXRFdmVudCksIEV2ZW50UnVsZXIub24oZWwsIFwibW91c2VlbnRlclwiLCBFdmVudEhhbmRsZXJzLm1vdXNlZW50ZXJFdmVudCksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub24oZWwsIFwiYmx1clwiLCBFdmVudEhhbmRsZXJzLmJsdXJFdmVudCksIEV2ZW50UnVsZXIub24oZWwsIFwiZm9jdXNcIiwgRXZlbnRIYW5kbGVycy5mb2N1c0V2ZW50KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRSdWxlci5vbihlbCwgXCJtb3VzZWxlYXZlXCIsIEV2ZW50SGFuZGxlcnMubW91c2VsZWF2ZUV2ZW50KSwgITAgIT09IG9wdHMuY29sb3JNYXNrICYmIEV2ZW50UnVsZXIub24oZWwsIFwiY2xpY2tcIiwgRXZlbnRIYW5kbGVycy5jbGlja0V2ZW50KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRSdWxlci5vbihlbCwgXCJkYmxjbGlja1wiLCBFdmVudEhhbmRsZXJzLmRibGNsaWNrRXZlbnQpLCBFdmVudFJ1bGVyLm9uKGVsLCBcInBhc3RlXCIsIEV2ZW50SGFuZGxlcnMucGFzdGVFdmVudCksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub24oZWwsIFwiZHJhZ2Ryb3BcIiwgRXZlbnRIYW5kbGVycy5wYXN0ZUV2ZW50KSwgRXZlbnRSdWxlci5vbihlbCwgXCJkcm9wXCIsIEV2ZW50SGFuZGxlcnMucGFzdGVFdmVudCksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub24oZWwsIFwiY3V0XCIsIEV2ZW50SGFuZGxlcnMuY3V0RXZlbnQpLCBFdmVudFJ1bGVyLm9uKGVsLCBcImNvbXBsZXRlXCIsIG9wdHMub25jb21wbGV0ZSksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub24oZWwsIFwiaW5jb21wbGV0ZVwiLCBvcHRzLm9uaW5jb21wbGV0ZSksIEV2ZW50UnVsZXIub24oZWwsIFwiY2xlYXJlZFwiLCBvcHRzLm9uY2xlYXJlZCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGFuZHJvaWQgfHwgITAgPT09IG9wdHMuaW5wdXRFdmVudE9ubHkgPyBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJtYXhMZW5ndGhcIikgOiAoRXZlbnRSdWxlci5vbihlbCwgXCJrZXlkb3duXCIsIEV2ZW50SGFuZGxlcnMua2V5ZG93bkV2ZW50KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRSdWxlci5vbihlbCwgXCJrZXlwcmVzc1wiLCBFdmVudEhhbmRsZXJzLmtleXByZXNzRXZlbnQpKSwgRXZlbnRSdWxlci5vbihlbCwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsICQubm9vcCksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub24oZWwsIFwiY29tcG9zaXRpb251cGRhdGVcIiwgJC5ub29wKSwgRXZlbnRSdWxlci5vbihlbCwgXCJjb21wb3NpdGlvbmVuZFwiLCAkLm5vb3ApLCBcclxuICAgICAgICAgICAgICAgICAgICBFdmVudFJ1bGVyLm9uKGVsLCBcImtleXVwXCIsICQubm9vcCksIEV2ZW50UnVsZXIub24oZWwsIFwiaW5wdXRcIiwgRXZlbnRIYW5kbGVycy5pbnB1dEZhbGxCYWNrRXZlbnQpLCBcclxuICAgICAgICAgICAgICAgICAgICBFdmVudFJ1bGVyLm9uKGVsLCBcImJlZm9yZWlucHV0XCIsICQubm9vcCkpLCBFdmVudFJ1bGVyLm9uKGVsLCBcInNldHZhbHVlXCIsIEV2ZW50SGFuZGxlcnMuc2V0VmFsdWVFdmVudCksIFxyXG4gICAgICAgICAgICAgICAgICAgIHVuZG9WYWx1ZSA9IGdldEJ1ZmZlclRlbXBsYXRlKCkuam9pbihcIlwiKSwgXCJcIiAhPT0gZWwuaW5wdXRtYXNrLl92YWx1ZUdldCghMCkgfHwgITEgPT09IG9wdHMuY2xlYXJNYXNrT25Mb3N0Rm9jdXMgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbml0aWFsVmFsdWUgPSAkLmlzRnVuY3Rpb24ob3B0cy5vbkJlZm9yZU1hc2spID8gb3B0cy5vbkJlZm9yZU1hc2suY2FsbChpbnB1dG1hc2ssIGVsLmlucHV0bWFzay5fdmFsdWVHZXQoITApLCBvcHRzKSB8fCBlbC5pbnB1dG1hc2suX3ZhbHVlR2V0KCEwKSA6IGVsLmlucHV0bWFzay5fdmFsdWVHZXQoITApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiICE9PSBpbml0aWFsVmFsdWUgJiYgY2hlY2tWYWwoZWwsICEwLCAhMSwgaXNSVEwgPyBpbml0aWFsVmFsdWUuc3BsaXQoXCJcIikucmV2ZXJzZSgpIDogaW5pdGlhbFZhbHVlLnNwbGl0KFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGdldEJ1ZmZlcigpLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZG9WYWx1ZSA9IGJ1ZmZlci5qb2luKFwiXCIpLCAhMSA9PT0gaXNDb21wbGV0ZShidWZmZXIpICYmIG9wdHMuY2xlYXJJbmNvbXBsZXRlICYmIHJlc2V0TWFza1NldCgpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5jbGVhck1hc2tPbkxvc3RGb2N1cyAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBlbCAmJiAoLTEgPT09IGdldExhc3RWYWxpZFBvc2l0aW9uKCkgPyBidWZmZXIgPSBbXSA6IGNsZWFyT3B0aW9uYWxUYWlsKGJ1ZmZlcikpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCdWZmZXIoZWwsIGJ1ZmZlciksIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsICYmIGNhcmV0KGVsLCBzZWVrTmV4dChnZXRMYXN0VmFsaWRQb3NpdGlvbigpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfShlbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSBcImZvcm1hdFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlQnVmZmVyID0gKCQuaXNGdW5jdGlvbihvcHRzLm9uQmVmb3JlTWFzaykgPyBvcHRzLm9uQmVmb3JlTWFzay5jYWxsKGlucHV0bWFzaywgYWN0aW9uT2JqLnZhbHVlLCBvcHRzKSB8fCBhY3Rpb25PYmoudmFsdWUgOiBhY3Rpb25PYmoudmFsdWUpLnNwbGl0KFwiXCIpLCBcclxuICAgICAgICAgICAgICAgIGNoZWNrVmFsKHVuZGVmaW5lZCwgITAsICExLCBpc1JUTCA/IHZhbHVlQnVmZmVyLnJldmVyc2UoKSA6IHZhbHVlQnVmZmVyKSwgYWN0aW9uT2JqLm1ldGFkYXRhID8ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc1JUTCA/IGdldEJ1ZmZlcigpLnNsaWNlKCkucmV2ZXJzZSgpLmpvaW4oXCJcIikgOiBnZXRCdWZmZXIoKS5qb2luKFwiXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtYXNrU2NvcGUuY2FsbCh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJnZXRtZXRhZGF0YVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgbWFza3NldCwgb3B0cylcclxuICAgICAgICAgICAgICAgIH0gOiBpc1JUTCA/IGdldEJ1ZmZlcigpLnNsaWNlKCkucmV2ZXJzZSgpLmpvaW4oXCJcIikgOiBnZXRCdWZmZXIoKS5qb2luKFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwiaXNWYWxpZFwiOlxyXG4gICAgICAgICAgICAgICAgYWN0aW9uT2JqLnZhbHVlID8gKHZhbHVlQnVmZmVyID0gYWN0aW9uT2JqLnZhbHVlLnNwbGl0KFwiXCIpLCBjaGVja1ZhbCh1bmRlZmluZWQsICEwLCAhMCwgaXNSVEwgPyB2YWx1ZUJ1ZmZlci5yZXZlcnNlKCkgOiB2YWx1ZUJ1ZmZlcikpIDogYWN0aW9uT2JqLnZhbHVlID0gZ2V0QnVmZmVyKCkuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGJ1ZmZlciA9IGdldEJ1ZmZlcigpLCBybCA9IGRldGVybWluZUxhc3RSZXF1aXJlZFBvc2l0aW9uKCksIGxtaWIgPSBidWZmZXIubGVuZ3RoIC0gMTsgbG1pYiA+IHJsICYmICFpc01hc2sobG1pYik7IGxtaWItLSkgO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlci5zcGxpY2UocmwsIGxtaWIgKyAxIC0gcmwpLCBpc0NvbXBsZXRlKGJ1ZmZlcikgJiYgYWN0aW9uT2JqLnZhbHVlID09PSBnZXRCdWZmZXIoKS5qb2luKFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwiZ2V0ZW1wdHltYXNrXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVmZmVyVGVtcGxhdGUoKS5qb2luKFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgZWwuaW5wdXRtYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGVsID0gJChlbCksIGVsLmlucHV0bWFzay5fdmFsdWVTZXQob3B0cy5hdXRvVW5tYXNrID8gdW5tYXNrZWR2YWx1ZShlbCkgOiBlbC5pbnB1dG1hc2suX3ZhbHVlR2V0KCEwKSksIFxyXG4gICAgICAgICAgICAgICAgICAgIEV2ZW50UnVsZXIub2ZmKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LmdldFByb3RvdHlwZU9mKGVsKSwgXCJ2YWx1ZVwiKSAmJiBlbC5pbnB1dG1hc2suX192YWx1ZUdldCAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsIFwidmFsdWVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGVsLmlucHV0bWFzay5fX3ZhbHVlR2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGVsLmlucHV0bWFzay5fX3ZhbHVlU2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwXHJcbiAgICAgICAgICAgICAgICAgICAgfSkgOiBkb2N1bWVudC5fX2xvb2t1cEdldHRlcl9fICYmIGVsLl9fbG9va3VwR2V0dGVyX18oXCJ2YWx1ZVwiKSAmJiBlbC5pbnB1dG1hc2suX192YWx1ZUdldCAmJiAoZWwuX19kZWZpbmVHZXR0ZXJfXyhcInZhbHVlXCIsIGVsLmlucHV0bWFzay5fX3ZhbHVlR2V0KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZWwuX19kZWZpbmVTZXR0ZXJfXyhcInZhbHVlXCIsIGVsLmlucHV0bWFzay5fX3ZhbHVlU2V0KSksIGVsLmlucHV0bWFzayA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBlbDtcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSBcImdldG1ldGFkYXRhXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoJC5pc0FycmF5KG1hc2tzZXQubWV0YWRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tUYXJnZXQgPSBnZXRNYXNrVGVtcGxhdGUoITAsIDAsICExKS5qb2luKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkLmVhY2gobWFza3NldC5tZXRhZGF0YSwgZnVuY3Rpb24obmR4LCBtdGR0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdGR0Lm1hc2sgPT09IG1hc2tUYXJnZXQpIHJldHVybiBtYXNrVGFyZ2V0ID0gbXRkdCwgITE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSksIG1hc2tUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFza3NldC5tZXRhZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LCBtb2JpbGUgPSAvbW9iaWxlL2kudGVzdCh1YSksIGllbW9iaWxlID0gL2llbW9iaWxlL2kudGVzdCh1YSksIGlwaG9uZSA9IC9pcGhvbmUvaS50ZXN0KHVhKSAmJiAhaWVtb2JpbGUsIGFuZHJvaWQgPSAvYW5kcm9pZC9pLnRlc3QodWEpICYmICFpZW1vYmlsZTtcclxuICAgICAgICByZXR1cm4gSW5wdXRtYXNrLnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgZGF0YUF0dHJpYnV0ZTogXCJkYXRhLWlucHV0bWFza1wiLFxyXG4gICAgICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiX1wiLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uYWxtYXJrZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogXCJbXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBcIl1cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHF1YW50aWZpZXJtYXJrZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogXCJ7XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBcIn1cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdyb3VwbWFya2VyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFwiKFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogXCIpXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhbHRlcm5hdG9ybWFya2VyOiBcInxcIixcclxuICAgICAgICAgICAgICAgIGVzY2FwZUNoYXI6IFwiXFxcXFwiLFxyXG4gICAgICAgICAgICAgICAgbWFzazogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlZ2V4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb25jb21wbGV0ZTogJC5ub29wLFxyXG4gICAgICAgICAgICAgICAgb25pbmNvbXBsZXRlOiAkLm5vb3AsXHJcbiAgICAgICAgICAgICAgICBvbmNsZWFyZWQ6ICQubm9vcCxcclxuICAgICAgICAgICAgICAgIHJlcGVhdDogMCxcclxuICAgICAgICAgICAgICAgIGdyZWVkeTogITAsXHJcbiAgICAgICAgICAgICAgICBhdXRvVW5tYXNrOiAhMSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZU1hc2tPblN1Ym1pdDogITEsXHJcbiAgICAgICAgICAgICAgICBjbGVhck1hc2tPbkxvc3RGb2N1czogITAsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRNb2RlOiAhMCxcclxuICAgICAgICAgICAgICAgIGNsZWFySW5jb21wbGV0ZTogITEsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9uS2V5RG93bjogJC5ub29wLFxyXG4gICAgICAgICAgICAgICAgb25CZWZvcmVNYXNrOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb25CZWZvcmVQYXN0ZTogZnVuY3Rpb24ocGFzdGVkVmFsdWUsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKG9wdHMub25CZWZvcmVNYXNrKSA/IG9wdHMub25CZWZvcmVNYXNrLmNhbGwodGhpcywgcGFzdGVkVmFsdWUsIG9wdHMpIDogcGFzdGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25CZWZvcmVXcml0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9uVW5NYXNrOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc2hvd01hc2tPbkZvY3VzOiAhMCxcclxuICAgICAgICAgICAgICAgIHNob3dNYXNrT25Ib3ZlcjogITAsXHJcbiAgICAgICAgICAgICAgICBvbktleVZhbGlkYXRpb246ICQubm9vcCxcclxuICAgICAgICAgICAgICAgIHNraXBPcHRpb25hbFBhcnRDaGFyYWN0ZXI6IFwiIFwiLFxyXG4gICAgICAgICAgICAgICAgbnVtZXJpY0lucHV0OiAhMSxcclxuICAgICAgICAgICAgICAgIHJpZ2h0QWxpZ246ICExLFxyXG4gICAgICAgICAgICAgICAgdW5kb09uRXNjYXBlOiAhMCxcclxuICAgICAgICAgICAgICAgIHJhZGl4UG9pbnQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICByYWRpeFBvaW50RGVmaW5pdGlvblN5bWJvbDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBTZXBhcmF0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBrZWVwU3RhdGljOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25DYXJldE9uVGFiOiAhMCxcclxuICAgICAgICAgICAgICAgIHRhYlRocm91Z2g6ICExLFxyXG4gICAgICAgICAgICAgICAgc3VwcG9ydHNJbnB1dFR5cGU6IFsgXCJ0ZXh0XCIsIFwidGVsXCIsIFwicGFzc3dvcmRcIiBdLFxyXG4gICAgICAgICAgICAgICAgaWdub3JhYmxlczogWyA4LCA5LCAxMywgMTksIDI3LCAzMywgMzQsIDM1LCAzNiwgMzcsIDM4LCAzOSwgNDAsIDQ1LCA0NiwgOTMsIDExMiwgMTEzLCAxMTQsIDExNSwgMTE2LCAxMTcsIDExOCwgMTE5LCAxMjAsIDEyMSwgMTIyLCAxMjMsIDAsIDIyOSBdLFxyXG4gICAgICAgICAgICAgICAgaXNDb21wbGV0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGNhbkNsZWFyUG9zaXRpb246ICQubm9vcCxcclxuICAgICAgICAgICAgICAgIHByZVZhbGlkYXRpb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwb3N0VmFsaWRhdGlvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0YXRpY0RlZmluaXRpb25TeW1ib2w6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGppdE1hc2tpbmc6ICExLFxyXG4gICAgICAgICAgICAgICAgbnVsbGFibGU6ICEwLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudE9ubHk6ICExLFxyXG4gICAgICAgICAgICAgICAgbm9WYWx1ZVBhdGNoaW5nOiAhMSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uQ2FyZXRPbkNsaWNrOiBcImx2cFwiLFxyXG4gICAgICAgICAgICAgICAgY2FzaW5nOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcInZlcmJhdGltXCIsXHJcbiAgICAgICAgICAgICAgICBjb2xvck1hc2s6ICExLFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZEhhY2s6ICExLFxyXG4gICAgICAgICAgICAgICAgaW1wb3J0RGF0YUF0dHJpYnV0ZXM6ICEwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmluaXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBcIjlcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogXCJbMC0577yRLe+8mV1cIixcclxuICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uU3ltYm9sOiBcIipcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IFwiW0EtWmEtetCQLdGP0IHRkcOALcO/wrVdXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvblN5bWJvbDogXCIqXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcIipcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogXCJbMC0577yRLe+8mUEtWmEtetCQLdGP0IHRkcOALcO/wrVdXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWxpYXNlczoge30sXHJcbiAgICAgICAgICAgIG1hc2tzQ2FjaGU6IHt9LFxyXG4gICAgICAgICAgICBtYXNrOiBmdW5jdGlvbihlbGVtcykge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW1wb3J0QXR0cmlidXRlT3B0aW9ucyhucHQsIG9wdHMsIHVzZXJPcHRpb25zLCBkYXRhQXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEwID09PSBvcHRzLmltcG9ydERhdGFBdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24sIGRhdGFvcHRpb25zLCBvcHRpb25EYXRhLCBwLCBpbXBvcnRPcHRpb24gPSBmdW5jdGlvbihvcHRpb24sIG9wdGlvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IChvcHRpb25EYXRhID0gb3B0aW9uRGF0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9uRGF0YSA6IG5wdC5nZXRBdHRyaWJ1dGUoZGF0YUF0dHJpYnV0ZSArIFwiLVwiICsgb3B0aW9uKSkgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIG9wdGlvbkRhdGEgJiYgKDAgPT09IG9wdGlvbi5pbmRleE9mKFwib25cIikgPyBvcHRpb25EYXRhID0gd2luZG93W29wdGlvbkRhdGFdIDogXCJmYWxzZVwiID09PSBvcHRpb25EYXRhID8gb3B0aW9uRGF0YSA9ICExIDogXCJ0cnVlXCIgPT09IG9wdGlvbkRhdGEgJiYgKG9wdGlvbkRhdGEgPSAhMCkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPcHRpb25zW29wdGlvbl0gPSBvcHRpb25EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgYXR0ck9wdGlvbnMgPSBucHQuZ2V0QXR0cmlidXRlKGRhdGFBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ck9wdGlvbnMgJiYgXCJcIiAhPT0gYXR0ck9wdGlvbnMgJiYgKGF0dHJPcHRpb25zID0gYXR0ck9wdGlvbnMucmVwbGFjZShuZXcgUmVnRXhwKFwiJ1wiLCBcImdcIiksICdcIicpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YW9wdGlvbnMgPSBKU09OLnBhcnNlKFwie1wiICsgYXR0ck9wdGlvbnMgKyBcIn1cIikpLCBkYXRhb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocCBpbiBkYXRhb3B0aW9ucykgaWYgKFwiYWxpYXNcIiA9PT0gcC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRGF0YSA9IGRhdGFvcHRpb25zW3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydE9wdGlvbihcImFsaWFzXCIsIG9wdGlvbkRhdGEpLCB1c2VyT3B0aW9ucy5hbGlhcyAmJiByZXNvbHZlQWxpYXModXNlck9wdGlvbnMuYWxpYXMsIHVzZXJPcHRpb25zLCBvcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvcHRpb24gaW4gb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHAgaW4gZGF0YW9wdGlvbnMpIGlmIChwLnRvTG93ZXJDYXNlKCkgPT09IG9wdGlvbi50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkRhdGEgPSBkYXRhb3B0aW9uc1twXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0T3B0aW9uKG9wdGlvbiwgb3B0aW9uRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKCEwLCBvcHRzLCB1c2VyT3B0aW9ucyksIChcInJ0bFwiID09PSBucHQuZGlyIHx8IG9wdHMucmlnaHRBbGlnbikgJiYgKG5wdC5zdHlsZS50ZXh0QWxpZ24gPSBcInJpZ2h0XCIpLCBcclxuICAgICAgICAgICAgICAgICAgICAoXCJydGxcIiA9PT0gbnB0LmRpciB8fCBvcHRzLm51bWVyaWNJbnB1dCkgJiYgKG5wdC5kaXIgPSBcImx0clwiLCBucHQucmVtb3ZlQXR0cmlidXRlKFwiZGlyXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmlzUlRMID0gITApLCBvcHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGVsZW1zICYmIChlbGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1zKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1zKSksIFxyXG4gICAgICAgICAgICAgICAgZWxlbXMgPSBlbGVtcy5ub2RlTmFtZSA/IFsgZWxlbXMgXSA6IGVsZW1zLCAkLmVhY2goZWxlbXMsIGZ1bmN0aW9uKG5keCwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcGVkT3B0cyA9ICQuZXh0ZW5kKCEwLCB7fSwgdGhhdC5vcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRBdHRyaWJ1dGVPcHRpb25zKGVsLCBzY29wZWRPcHRzLCAkLmV4dGVuZCghMCwge30sIHRoYXQudXNlck9wdGlvbnMpLCB0aGF0LmRhdGFBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXNrc2V0ID0gZ2VuZXJhdGVNYXNrU2V0KHNjb3BlZE9wdHMsIHRoYXQubm9NYXNrc0NhY2hlKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXNrc2V0ICE9PSB1bmRlZmluZWQgJiYgKGVsLmlucHV0bWFzayAhPT0gdW5kZWZpbmVkICYmIChlbC5pbnB1dG1hc2sub3B0cy5hdXRvVW5tYXNrID0gITAsIFxyXG4gICAgICAgICAgICAgICAgICAgIGVsLmlucHV0bWFzay5yZW1vdmUoKSksIGVsLmlucHV0bWFzayA9IG5ldyBJbnB1dG1hc2sodW5kZWZpbmVkLCB1bmRlZmluZWQsICEwKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgZWwuaW5wdXRtYXNrLm9wdHMgPSBzY29wZWRPcHRzLCBlbC5pbnB1dG1hc2subm9NYXNrc0NhY2hlID0gdGhhdC5ub01hc2tzQ2FjaGUsIGVsLmlucHV0bWFzay51c2VyT3B0aW9ucyA9ICQuZXh0ZW5kKCEwLCB7fSwgdGhhdC51c2VyT3B0aW9ucyksIFxyXG4gICAgICAgICAgICAgICAgICAgIGVsLmlucHV0bWFzay5pc1JUTCA9IHNjb3BlZE9wdHMuaXNSVEwgfHwgc2NvcGVkT3B0cy5udW1lcmljSW5wdXQsIGVsLmlucHV0bWFzay5lbCA9IGVsLCBcclxuICAgICAgICAgICAgICAgICAgICBlbC5pbnB1dG1hc2subWFza3NldCA9IG1hc2tzZXQsICQuZGF0YShlbCwgXCJfaW5wdXRtYXNrX29wdHNcIiwgc2NvcGVkT3B0cyksIG1hc2tTY29wZS5jYWxsKGVsLmlucHV0bWFzaywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwibWFza1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfSksIGVsZW1zICYmIGVsZW1zWzBdID8gZWxlbXNbMF0uaW5wdXRtYXNrIHx8IHRoaXMgOiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvcHRpb246IGZ1bmN0aW9uKG9wdGlvbnMsIG5vcmVtYXNrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygb3B0aW9ucyA/IHRoaXMub3B0c1tvcHRpb25zXSA6IFwib2JqZWN0XCIgPT09ICh2b2lkIDAgPT09IG9wdGlvbnMgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvcHRpb25zKSkgPyAoJC5leHRlbmQodGhpcy51c2VyT3B0aW9ucywgb3B0aW9ucyksIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbCAmJiAhMCAhPT0gbm9yZW1hc2sgJiYgdGhpcy5tYXNrKHRoaXMuZWwpLCB0aGlzKSA6IHZvaWQgMDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdW5tYXNrZWR2YWx1ZTogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc2tzZXQgPSB0aGlzLm1hc2tzZXQgfHwgZ2VuZXJhdGVNYXNrU2V0KHRoaXMub3B0cywgdGhpcy5ub01hc2tzQ2FjaGUpLCBcclxuICAgICAgICAgICAgICAgIG1hc2tTY29wZS5jYWxsKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwidW5tYXNrZWR2YWx1ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFza1Njb3BlLmNhbGwodGhpcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZW1vdmVcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldGVtcHR5bWFzazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrc2V0ID0gdGhpcy5tYXNrc2V0IHx8IGdlbmVyYXRlTWFza1NldCh0aGlzLm9wdHMsIHRoaXMubm9NYXNrc0NhY2hlKSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrU2NvcGUuY2FsbCh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImdldGVtcHR5bWFza1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzTWFza2VkVmFsdWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLm9wdHMuYXV0b1VubWFzaztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNDb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrc2V0ID0gdGhpcy5tYXNrc2V0IHx8IGdlbmVyYXRlTWFza1NldCh0aGlzLm9wdHMsIHRoaXMubm9NYXNrc0NhY2hlKSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrU2NvcGUuY2FsbCh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImlzQ29tcGxldGVcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldG1ldGFkYXRhOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc2tzZXQgPSB0aGlzLm1hc2tzZXQgfHwgZ2VuZXJhdGVNYXNrU2V0KHRoaXMub3B0cywgdGhpcy5ub01hc2tzQ2FjaGUpLCBcclxuICAgICAgICAgICAgICAgIG1hc2tTY29wZS5jYWxsKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiZ2V0bWV0YWRhdGFcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrc2V0ID0gdGhpcy5tYXNrc2V0IHx8IGdlbmVyYXRlTWFza1NldCh0aGlzLm9wdHMsIHRoaXMubm9NYXNrc0NhY2hlKSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrU2NvcGUuY2FsbCh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImlzVmFsaWRcIixcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JtYXQ6IGZ1bmN0aW9uKHZhbHVlLCBtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFza3NldCA9IHRoaXMubWFza3NldCB8fCBnZW5lcmF0ZU1hc2tTZXQodGhpcy5vcHRzLCB0aGlzLm5vTWFza3NDYWNoZSksIFxyXG4gICAgICAgICAgICAgICAgbWFza1Njb3BlLmNhbGwodGhpcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJmb3JtYXRcIixcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYW5hbHlzZU1hc2s6IGZ1bmN0aW9uKG1hc2ssIHJlZ2V4TWFzaywgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWFza1Rva2VuKGlzR3JvdXAsIGlzT3B0aW9uYWwsIGlzUXVhbnRpZmllciwgaXNBbHRlcm5hdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVzID0gW10sIHRoaXMub3Blbkdyb3VwID0gaXNHcm91cCB8fCAhMSwgdGhpcy5hbHRlcm5hdG9yR3JvdXAgPSAhMSwgdGhpcy5pc0dyb3VwID0gaXNHcm91cCB8fCAhMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wdGlvbmFsID0gaXNPcHRpb25hbCB8fCAhMSwgdGhpcy5pc1F1YW50aWZpZXIgPSBpc1F1YW50aWZpZXIgfHwgITEsIHRoaXMuaXNBbHRlcm5hdG9yID0gaXNBbHRlcm5hdG9yIHx8ICExLCBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1YW50aWZpZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluc2VydFRlc3REZWZpbml0aW9uKG10b2tlbiwgZWxlbWVudCwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBwb3NpdGlvbiA6IG10b2tlbi5tYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldk1hdGNoID0gbXRva2VuLm1hdGNoZXNbcG9zaXRpb24gLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhNYXNrKSAwID09PSBlbGVtZW50LmluZGV4T2YoXCJbXCIpIHx8IGVzY2FwZWQgJiYgL1xcXFxkfFxcXFxzfFxcXFx3XS9pLnRlc3QoZWxlbWVudCkgfHwgXCIuXCIgPT09IGVsZW1lbnQgPyBtdG9rZW4ubWF0Y2hlcy5zcGxpY2UocG9zaXRpb24rKywgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbjogbmV3IFJlZ0V4cChlbGVtZW50LCBvcHRzLmNhc2luZyA/IFwiaVwiIDogXCJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbGl0eTogbXRva2VuLmlzT3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Jsb2NrTWFya2VyOiBwcmV2TWF0Y2ggPT09IHVuZGVmaW5lZCB8fCBwcmV2TWF0Y2guZGVmICE9PSBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNpbmc6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZjogZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlRGVmOiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfSkgOiAoZXNjYXBlZCAmJiAoZWxlbWVudCA9IGVsZW1lbnRbZWxlbWVudC5sZW5ndGggLSAxXSksICQuZWFjaChlbGVtZW50LnNwbGl0KFwiXCIpLCBmdW5jdGlvbihuZHgsIGxtbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldk1hdGNoID0gbXRva2VuLm1hdGNoZXNbcG9zaXRpb24gLSAxXSwgbXRva2VuLm1hdGNoZXMuc3BsaWNlKHBvc2l0aW9uKyssIDAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbGl0eTogbXRva2VuLmlzT3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdCbG9ja01hcmtlcjogcHJldk1hdGNoID09PSB1bmRlZmluZWQgfHwgcHJldk1hdGNoLmRlZiAhPT0gbG1udCAmJiBudWxsICE9PSBwcmV2TWF0Y2guZm4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNpbmc6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWY6IG9wdHMuc3RhdGljRGVmaW5pdGlvblN5bWJvbCB8fCBsbW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IG9wdHMuc3RhdGljRGVmaW5pdGlvblN5bWJvbCAhPT0gdW5kZWZpbmVkID8gbG1udCA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZURlZjogbG1udFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KSksIGVzY2FwZWQgPSAhMTsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXNrZGVmID0gKG9wdHMuZGVmaW5pdGlvbnMgPyBvcHRzLmRlZmluaXRpb25zW2VsZW1lbnRdIDogdW5kZWZpbmVkKSB8fCBJbnB1dG1hc2sucHJvdG90eXBlLmRlZmluaXRpb25zW2VsZW1lbnRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFza2RlZiAmJiAhZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJldmFsaWRhdG9ycyA9IG1hc2tkZWYucHJldmFsaWRhdG9yLCBwcmV2YWxpZGF0b3JzTCA9IHByZXZhbGlkYXRvcnMgPyBwcmV2YWxpZGF0b3JzLmxlbmd0aCA6IDAsIGkgPSAxOyBpIDwgbWFza2RlZi5jYXJkaW5hbGl0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZhbGlkYXRvciA9IHByZXZhbGlkYXRvcnNMID49IGkgPyBwcmV2YWxpZGF0b3JzW2kgLSAxXSA6IFtdLCB2YWxpZGF0b3IgPSBwcmV2YWxpZGF0b3IudmFsaWRhdG9yLCBjYXJkaW5hbGl0eSA9IHByZXZhbGlkYXRvci5jYXJkaW5hbGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdG9rZW4ubWF0Y2hlcy5zcGxpY2UocG9zaXRpb24rKywgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbjogdmFsaWRhdG9yID8gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdmFsaWRhdG9yID8gbmV3IFJlZ0V4cCh2YWxpZGF0b3IsIG9wdHMuY2FzaW5nID8gXCJpXCIgOiBcIlwiKSA6IG5ldyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVzdCA9IHZhbGlkYXRvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpIDogbmV3IFJlZ0V4cChcIi5cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiBjYXJkaW5hbGl0eSB8fCAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbGl0eTogbXRva2VuLmlzT3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Jsb2NrTWFya2VyOiBwcmV2TWF0Y2ggPT09IHVuZGVmaW5lZCB8fCBwcmV2TWF0Y2guZGVmICE9PSAobWFza2RlZi5kZWZpbml0aW9uU3ltYm9sIHx8IGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNpbmc6IG1hc2tkZWYuY2FzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWY6IG1hc2tkZWYuZGVmaW5pdGlvblN5bWJvbCB8fCBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbWFza2RlZi5wbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlRGVmOiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHByZXZNYXRjaCA9IG10b2tlbi5tYXRjaGVzW3Bvc2l0aW9uIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdG9rZW4ubWF0Y2hlcy5zcGxpY2UocG9zaXRpb24rKywgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuOiBtYXNrZGVmLnZhbGlkYXRvciA/IFwic3RyaW5nXCIgPT0gdHlwZW9mIG1hc2tkZWYudmFsaWRhdG9yID8gbmV3IFJlZ0V4cChtYXNrZGVmLnZhbGlkYXRvciwgb3B0cy5jYXNpbmcgPyBcImlcIiA6IFwiXCIpIDogbmV3IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlc3QgPSBtYXNrZGVmLnZhbGlkYXRvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkgOiBuZXcgUmVnRXhwKFwiLlwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogbWFza2RlZi5jYXJkaW5hbGl0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbGl0eTogbXRva2VuLmlzT3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QmxvY2tNYXJrZXI6IHByZXZNYXRjaCA9PT0gdW5kZWZpbmVkIHx8IHByZXZNYXRjaC5kZWYgIT09IChtYXNrZGVmLmRlZmluaXRpb25TeW1ib2wgfHwgZWxlbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzaW5nOiBtYXNrZGVmLmNhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWY6IG1hc2tkZWYuZGVmaW5pdGlvblN5bWJvbCB8fCBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBtYXNrZGVmLnBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZURlZjogZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBtdG9rZW4ubWF0Y2hlcy5zcGxpY2UocG9zaXRpb24rKywgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsaXR5OiBtdG9rZW4uaXNPcHRpb25hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Jsb2NrTWFya2VyOiBwcmV2TWF0Y2ggPT09IHVuZGVmaW5lZCB8fCBwcmV2TWF0Y2guZGVmICE9PSBlbGVtZW50ICYmIG51bGwgIT09IHByZXZNYXRjaC5mbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2luZzogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZjogb3B0cy5zdGF0aWNEZWZpbml0aW9uU3ltYm9sIHx8IGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogb3B0cy5zdGF0aWNEZWZpbml0aW9uU3ltYm9sICE9PSB1bmRlZmluZWQgPyBlbGVtZW50IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlRGVmOiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlc2NhcGVkID0gITE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdmVyaWZ5R3JvdXBNYXJrZXIobWFza1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFza1Rva2VuICYmIG1hc2tUb2tlbi5tYXRjaGVzICYmICQuZWFjaChtYXNrVG9rZW4ubWF0Y2hlcywgZnVuY3Rpb24obmR4LCB0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFRva2VuID0gbWFza1Rva2VuLm1hdGNoZXNbbmR4ICsgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChuZXh0VG9rZW4gPT09IHVuZGVmaW5lZCB8fCBuZXh0VG9rZW4ubWF0Y2hlcyA9PT0gdW5kZWZpbmVkIHx8ICExID09PSBuZXh0VG9rZW4uaXNRdWFudGlmaWVyKSAmJiB0b2tlbiAmJiB0b2tlbi5pc0dyb3VwICYmICh0b2tlbi5pc0dyb3VwID0gITEsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleE1hc2sgfHwgKGluc2VydFRlc3REZWZpbml0aW9uKHRva2VuLCBvcHRzLmdyb3VwbWFya2VyLnN0YXJ0LCAwKSwgITAgIT09IHRva2VuLm9wZW5Hcm91cCAmJiBpbnNlcnRUZXN0RGVmaW5pdGlvbih0b2tlbiwgb3B0cy5ncm91cG1hcmtlci5lbmQpKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlHcm91cE1hcmtlcih0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWZhdWx0Q2FzZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlbmVuaW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50T3BlbmluZ1Rva2VuID0gb3BlbmVuaW5nc1tvcGVuZW5pbmdzLmxlbmd0aCAtIDFdLCBpbnNlcnRUZXN0RGVmaW5pdGlvbihjdXJyZW50T3BlbmluZ1Rva2VuLCBtKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPcGVuaW5nVG9rZW4uaXNBbHRlcm5hdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdG9yID0gb3BlbmVuaW5ncy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1uZHggPSAwOyBtbmR4IDwgYWx0ZXJuYXRvci5tYXRjaGVzLmxlbmd0aDsgbW5keCsrKSBhbHRlcm5hdG9yLm1hdGNoZXNbbW5keF0uaXNHcm91cCA9ICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVuaW5ncy5sZW5ndGggPiAwID8gKGN1cnJlbnRPcGVuaW5nVG9rZW4gPSBvcGVuZW5pbmdzW29wZW5lbmluZ3MubGVuZ3RoIC0gMV0pLm1hdGNoZXMucHVzaChhbHRlcm5hdG9yKSA6IGN1cnJlbnRUb2tlbi5tYXRjaGVzLnB1c2goYWx0ZXJuYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaW5zZXJ0VGVzdERlZmluaXRpb24oY3VycmVudFRva2VuLCBtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldmVyc2VUb2tlbnMobWFza1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFza1Rva2VuLm1hdGNoZXMgPSBtYXNrVG9rZW4ubWF0Y2hlcy5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbWF0Y2ggaW4gbWFza1Rva2VuLm1hdGNoZXMpIGlmIChtYXNrVG9rZW4ubWF0Y2hlcy5oYXNPd25Qcm9wZXJ0eShtYXRjaCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludE1hdGNoID0gcGFyc2VJbnQobWF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFza1Rva2VuLm1hdGNoZXNbbWF0Y2hdLmlzUXVhbnRpZmllciAmJiBtYXNrVG9rZW4ubWF0Y2hlc1tpbnRNYXRjaCArIDFdICYmIG1hc2tUb2tlbi5tYXRjaGVzW2ludE1hdGNoICsgMV0uaXNHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF0ID0gbWFza1Rva2VuLm1hdGNoZXNbbWF0Y2hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza1Rva2VuLm1hdGNoZXMuc3BsaWNlKG1hdGNoLCAxKSwgbWFza1Rva2VuLm1hdGNoZXMuc3BsaWNlKGludE1hdGNoICsgMSwgMCwgcXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tUb2tlbi5tYXRjaGVzW21hdGNoXS5tYXRjaGVzICE9PSB1bmRlZmluZWQgPyBtYXNrVG9rZW4ubWF0Y2hlc1ttYXRjaF0gPSByZXZlcnNlVG9rZW5zKG1hc2tUb2tlbi5tYXRjaGVzW21hdGNoXSkgOiBtYXNrVG9rZW4ubWF0Y2hlc1ttYXRjaF0gPSBmdW5jdGlvbihzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ID09PSBvcHRzLm9wdGlvbmFsbWFya2VyLnN0YXJ0ID8gc3QgPSBvcHRzLm9wdGlvbmFsbWFya2VyLmVuZCA6IHN0ID09PSBvcHRzLm9wdGlvbmFsbWFya2VyLmVuZCA/IHN0ID0gb3B0cy5vcHRpb25hbG1hcmtlci5zdGFydCA6IHN0ID09PSBvcHRzLmdyb3VwbWFya2VyLnN0YXJ0ID8gc3QgPSBvcHRzLmdyb3VwbWFya2VyLmVuZCA6IHN0ID09PSBvcHRzLmdyb3VwbWFya2VyLmVuZCAmJiAoc3QgPSBvcHRzLmdyb3VwbWFya2VyLnN0YXJ0KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfShtYXNrVG9rZW4ubWF0Y2hlc1ttYXRjaF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFza1Rva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoLCBtLCBvcGVuaW5nVG9rZW4sIGN1cnJlbnRPcGVuaW5nVG9rZW4sIGFsdGVybmF0b3IsIGxhc3RNYXRjaCwgZ3JvdXBUb2tlbiwgdG9rZW5pemVyID0gLyg/Ols/KitdfFxce1swLTlcXCtcXCpdKyg/OixbMC05XFwrXFwqXSopP1xcfSl8W14uPyorXiR7W10oKXxcXFxcXSt8Li9nLCByZWdleFRva2VuaXplciA9IC9cXFtcXF4/XT8oPzpbXlxcXFxcXF1dK3xcXFxcW1xcU1xcc10/KSpdP3xcXFxcKD86MCg/OlswLTNdWzAtN117MCwyfXxbNC03XVswLTddPyk/fFsxLTldWzAtOV0qfHhbMC05QS1GYS1mXXsyfXx1WzAtOUEtRmEtZl17NH18Y1tBLVphLXpdfFtcXFNcXHNdPyl8XFwoKD86XFw/Wzo9IV0/KT98KD86Wz8qK118XFx7WzAtOV0rKD86LFswLTldKik/XFx9KVxcPz98W14uPyorXiR7WygpfFxcXFxdK3wuL2csIGVzY2FwZWQgPSAhMSwgY3VycmVudFRva2VuID0gbmV3IE1hc2tUb2tlbigpLCBvcGVuZW5pbmdzID0gW10sIG1hc2tUb2tlbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAocmVnZXhNYXNrICYmIChvcHRzLm9wdGlvbmFsbWFya2VyLnN0YXJ0ID0gdW5kZWZpbmVkLCBvcHRzLm9wdGlvbmFsbWFya2VyLmVuZCA9IHVuZGVmaW5lZCk7IG1hdGNoID0gcmVnZXhNYXNrID8gcmVnZXhUb2tlbml6ZXIuZXhlYyhtYXNrKSA6IHRva2VuaXplci5leGVjKG1hc2spOyApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobSA9IG1hdGNoWzBdLCByZWdleE1hc2spIHN3aXRjaCAobS5jaGFyQXQoMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI/XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBcInswLDF9XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gXCJ7XCIgKyBtICsgXCJ9XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlc2NhcGVkKSBkZWZhdWx0Q2FzZSgpOyBlbHNlIHN3aXRjaCAobS5jaGFyQXQoMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugb3B0cy5lc2NhcGVDaGFyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlc2NhcGVkID0gITAsIHJlZ2V4TWFzayAmJiBkZWZhdWx0Q2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIG9wdHMub3B0aW9uYWxtYXJrZXIuZW5kOlxyXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBvcHRzLmdyb3VwbWFya2VyLmVuZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5pbmdUb2tlbiA9IG9wZW5lbmluZ3MucG9wKCksIG9wZW5pbmdUb2tlbi5vcGVuR3JvdXAgPSAhMSwgb3BlbmluZ1Rva2VuICE9PSB1bmRlZmluZWQpIGlmIChvcGVuZW5pbmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY3VycmVudE9wZW5pbmdUb2tlbiA9IG9wZW5lbmluZ3Nbb3BlbmVuaW5ncy5sZW5ndGggLSAxXSkubWF0Y2hlcy5wdXNoKG9wZW5pbmdUb2tlbiksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE9wZW5pbmdUb2tlbi5pc0FsdGVybmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdG9yID0gb3BlbmVuaW5ncy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtbmR4ID0gMDsgbW5keCA8IGFsdGVybmF0b3IubWF0Y2hlcy5sZW5ndGg7IG1uZHgrKykgYWx0ZXJuYXRvci5tYXRjaGVzW21uZHhdLmlzR3JvdXAgPSAhMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRvci5tYXRjaGVzW21uZHhdLmFsdGVybmF0b3JHcm91cCA9ICExO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lbmluZ3MubGVuZ3RoID4gMCA/IChjdXJyZW50T3BlbmluZ1Rva2VuID0gb3BlbmVuaW5nc1tvcGVuZW5pbmdzLmxlbmd0aCAtIDFdKS5tYXRjaGVzLnB1c2goYWx0ZXJuYXRvcikgOiBjdXJyZW50VG9rZW4ubWF0Y2hlcy5wdXNoKGFsdGVybmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgY3VycmVudFRva2VuLm1hdGNoZXMucHVzaChvcGVuaW5nVG9rZW4pOyBlbHNlIGRlZmF1bHRDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugb3B0cy5vcHRpb25hbG1hcmtlci5zdGFydDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVuaW5ncy5wdXNoKG5ldyBNYXNrVG9rZW4oITEsICEwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugb3B0cy5ncm91cG1hcmtlci5zdGFydDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVuaW5ncy5wdXNoKG5ldyBNYXNrVG9rZW4oITApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBvcHRzLnF1YW50aWZpZXJtYXJrZXIuc3RhcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWFudGlmaWVyID0gbmV3IE1hc2tUb2tlbighMSwgITEsICEwKSwgbXEgPSAobSA9IG0ucmVwbGFjZSgvW3t9XS9nLCBcIlwiKSkuc3BsaXQoXCIsXCIpLCBtcTAgPSBpc05hTihtcVswXSkgPyBtcVswXSA6IHBhcnNlSW50KG1xWzBdKSwgbXExID0gMSA9PT0gbXEubGVuZ3RoID8gbXEwIDogaXNOYU4obXFbMV0pID8gbXFbMV0gOiBwYXJzZUludChtcVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIipcIiAhPT0gbXExICYmIFwiK1wiICE9PSBtcTEgfHwgKG1xMCA9IFwiKlwiID09PSBtcTEgPyAwIDogMSksIHF1YW50aWZpZXIucXVhbnRpZmllciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbXEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBtcTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3BlbmVuaW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG9wZW5lbmluZ3Nbb3BlbmVuaW5ncy5sZW5ndGggLSAxXS5tYXRjaGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1hdGNoID0gbWF0Y2hlcy5wb3AoKSkuaXNHcm91cCB8fCAoKGdyb3VwVG9rZW4gPSBuZXcgTWFza1Rva2VuKCEwKSkubWF0Y2hlcy5wdXNoKG1hdGNoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGdyb3VwVG9rZW4pLCBtYXRjaGVzLnB1c2gobWF0Y2gpLCBtYXRjaGVzLnB1c2gocXVhbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAobWF0Y2ggPSBjdXJyZW50VG9rZW4ubWF0Y2hlcy5wb3AoKSkuaXNHcm91cCB8fCAocmVnZXhNYXNrICYmIG51bGwgPT09IG1hdGNoLmZuICYmIFwiLlwiID09PSBtYXRjaC5kZWYgJiYgKG1hdGNoLmZuID0gbmV3IFJlZ0V4cChtYXRjaC5kZWYsIG9wdHMuY2FzaW5nID8gXCJpXCIgOiBcIlwiKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ3JvdXBUb2tlbiA9IG5ldyBNYXNrVG9rZW4oITApKS5tYXRjaGVzLnB1c2gobWF0Y2gpLCBtYXRjaCA9IGdyb3VwVG9rZW4pLCBjdXJyZW50VG9rZW4ubWF0Y2hlcy5wdXNoKG1hdGNoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUb2tlbi5tYXRjaGVzLnB1c2gocXVhbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugb3B0cy5hbHRlcm5hdG9ybWFya2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlbmVuaW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVG9rZW4gPSAoY3VycmVudE9wZW5pbmdUb2tlbiA9IG9wZW5lbmluZ3Nbb3BlbmVuaW5ncy5sZW5ndGggLSAxXSkubWF0Y2hlc1tjdXJyZW50T3BlbmluZ1Rva2VuLm1hdGNoZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TWF0Y2ggPSBjdXJyZW50T3BlbmluZ1Rva2VuLm9wZW5Hcm91cCAmJiAoc3ViVG9rZW4ubWF0Y2hlcyA9PT0gdW5kZWZpbmVkIHx8ICExID09PSBzdWJUb2tlbi5pc0dyb3VwICYmICExID09PSBzdWJUb2tlbi5pc0FsdGVybmF0b3IpID8gb3BlbmVuaW5ncy5wb3AoKSA6IGN1cnJlbnRPcGVuaW5nVG9rZW4ubWF0Y2hlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGxhc3RNYXRjaCA9IGN1cnJlbnRUb2tlbi5tYXRjaGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdE1hdGNoLmlzQWx0ZXJuYXRvcikgb3BlbmVuaW5ncy5wdXNoKGxhc3RNYXRjaCk7IGVsc2UgaWYgKGxhc3RNYXRjaC5hbHRlcm5hdG9yR3JvdXAgPyAoYWx0ZXJuYXRvciA9IG9wZW5lbmluZ3MucG9wKCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TWF0Y2guYWx0ZXJuYXRvckdyb3VwID0gITEpIDogYWx0ZXJuYXRvciA9IG5ldyBNYXNrVG9rZW4oITEsICExLCAhMSwgITApLCBhbHRlcm5hdG9yLm1hdGNoZXMucHVzaChsYXN0TWF0Y2gpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVuaW5ncy5wdXNoKGFsdGVybmF0b3IpLCBsYXN0TWF0Y2gub3Blbkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TWF0Y2gub3Blbkdyb3VwID0gITE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWx0ZXJuYXRvckdyb3VwID0gbmV3IE1hc2tUb2tlbighMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdG9yR3JvdXAuYWx0ZXJuYXRvckdyb3VwID0gITAsIG9wZW5lbmluZ3MucHVzaChhbHRlcm5hdG9yR3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICg7b3BlbmVuaW5ncy5sZW5ndGggPiAwOyApIG9wZW5pbmdUb2tlbiA9IG9wZW5lbmluZ3MucG9wKCksIGN1cnJlbnRUb2tlbi5tYXRjaGVzLnB1c2gob3BlbmluZ1Rva2VuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50VG9rZW4ubWF0Y2hlcy5sZW5ndGggPiAwICYmICh2ZXJpZnlHcm91cE1hcmtlcihjdXJyZW50VG9rZW4pLCBtYXNrVG9rZW5zLnB1c2goY3VycmVudFRva2VuKSksIFxyXG4gICAgICAgICAgICAgICAgKG9wdHMubnVtZXJpY0lucHV0IHx8IG9wdHMuaXNSVEwpICYmIHJldmVyc2VUb2tlbnMobWFza1Rva2Vuc1swXSksIG1hc2tUb2tlbnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBJbnB1dG1hc2suZXh0ZW5kRGVmYXVsdHMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKCEwLCBJbnB1dG1hc2sucHJvdG90eXBlLmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgICB9LCBJbnB1dG1hc2suZXh0ZW5kRGVmaW5pdGlvbnMgPSBmdW5jdGlvbihkZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKCEwLCBJbnB1dG1hc2sucHJvdG90eXBlLmRlZmluaXRpb25zLCBkZWZpbml0aW9uKTtcclxuICAgICAgICB9LCBJbnB1dG1hc2suZXh0ZW5kQWxpYXNlcyA9IGZ1bmN0aW9uKGFsaWFzKSB7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKCEwLCBJbnB1dG1hc2sucHJvdG90eXBlLmFsaWFzZXMsIGFsaWFzKTtcclxuICAgICAgICB9LCBJbnB1dG1hc2suZm9ybWF0ID0gZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMsIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbnB1dG1hc2sob3B0aW9ucykuZm9ybWF0KHZhbHVlLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSwgSW5wdXRtYXNrLnVubWFzayA9IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbnB1dG1hc2sob3B0aW9ucykudW5tYXNrZWR2YWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSwgSW5wdXRtYXNrLmlzVmFsaWQgPSBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gSW5wdXRtYXNrKG9wdGlvbnMpLmlzVmFsaWQodmFsdWUpO1xyXG4gICAgICAgIH0sIElucHV0bWFzay5yZW1vdmUgPSBmdW5jdGlvbihlbGVtcykge1xyXG4gICAgICAgICAgICAkLmVhY2goZWxlbXMsIGZ1bmN0aW9uKG5keCwgZWwpIHtcclxuICAgICAgICAgICAgICAgIGVsLmlucHV0bWFzayAmJiBlbC5pbnB1dG1hc2sucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIElucHV0bWFzay5lc2NhcGVSZWdleCA9IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgICAgICAgICB2YXIgc3BlY2lhbHMgPSBbIFwiL1wiLCBcIi5cIiwgXCIqXCIsIFwiK1wiLCBcIj9cIiwgXCJ8XCIsIFwiKFwiLCBcIilcIiwgXCJbXCIsIFwiXVwiLCBcIntcIiwgXCJ9XCIsIFwiXFxcXFwiLCBcIiRcIiwgXCJeXCIgXTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXFxcXFwiICsgc3BlY2lhbHMuam9pbihcInxcXFxcXCIpICsgXCIpXCIsIFwiZ2ltXCIpLCBcIlxcXFwkMVwiKTtcclxuICAgICAgICB9LCBJbnB1dG1hc2sua2V5Q29kZSA9IHtcclxuICAgICAgICAgICAgQUxUOiAxOCxcclxuICAgICAgICAgICAgQkFDS1NQQUNFOiA4LFxyXG4gICAgICAgICAgICBCQUNLU1BBQ0VfU0FGQVJJOiAxMjcsXHJcbiAgICAgICAgICAgIENBUFNfTE9DSzogMjAsXHJcbiAgICAgICAgICAgIENPTU1BOiAxODgsXHJcbiAgICAgICAgICAgIENPTU1BTkQ6IDkxLFxyXG4gICAgICAgICAgICBDT01NQU5EX0xFRlQ6IDkxLFxyXG4gICAgICAgICAgICBDT01NQU5EX1JJR0hUOiA5MyxcclxuICAgICAgICAgICAgQ09OVFJPTDogMTcsXHJcbiAgICAgICAgICAgIERFTEVURTogNDYsXHJcbiAgICAgICAgICAgIERPV046IDQwLFxyXG4gICAgICAgICAgICBFTkQ6IDM1LFxyXG4gICAgICAgICAgICBFTlRFUjogMTMsXHJcbiAgICAgICAgICAgIEVTQ0FQRTogMjcsXHJcbiAgICAgICAgICAgIEhPTUU6IDM2LFxyXG4gICAgICAgICAgICBJTlNFUlQ6IDQ1LFxyXG4gICAgICAgICAgICBMRUZUOiAzNyxcclxuICAgICAgICAgICAgTUVOVTogOTMsXHJcbiAgICAgICAgICAgIE5VTVBBRF9BREQ6IDEwNyxcclxuICAgICAgICAgICAgTlVNUEFEX0RFQ0lNQUw6IDExMCxcclxuICAgICAgICAgICAgTlVNUEFEX0RJVklERTogMTExLFxyXG4gICAgICAgICAgICBOVU1QQURfRU5URVI6IDEwOCxcclxuICAgICAgICAgICAgTlVNUEFEX01VTFRJUExZOiAxMDYsXHJcbiAgICAgICAgICAgIE5VTVBBRF9TVUJUUkFDVDogMTA5LFxyXG4gICAgICAgICAgICBQQUdFX0RPV046IDM0LFxyXG4gICAgICAgICAgICBQQUdFX1VQOiAzMyxcclxuICAgICAgICAgICAgUEVSSU9EOiAxOTAsXHJcbiAgICAgICAgICAgIFJJR0hUOiAzOSxcclxuICAgICAgICAgICAgU0hJRlQ6IDE2LFxyXG4gICAgICAgICAgICBTUEFDRTogMzIsXHJcbiAgICAgICAgICAgIFRBQjogOSxcclxuICAgICAgICAgICAgVVA6IDM4LFxyXG4gICAgICAgICAgICBXSU5ET1dTOiA5MSxcclxuICAgICAgICAgICAgWDogODhcclxuICAgICAgICB9LCBJbnB1dG1hc2s7XHJcbiAgICB9KTtcclxufSwgZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTtcclxufSwgZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogb2JqXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIF9fd2VicGFja19yZXF1aXJlX18oNCksIF9fd2VicGFja19yZXF1aXJlX18oOSksIF9fd2VicGFja19yZXF1aXJlX18oMTIpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKSwgXHJcbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KSwgX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XHJcbiAgICB2YXIgX2lucHV0bWFzazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oMSkpLCBfaW5wdXRtYXNrNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygwKSksIF9qcXVlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKTtcclxuICAgIF9pbnB1dG1hc2s0LmRlZmF1bHQgPT09IF9qcXVlcnkyLmRlZmF1bHQgJiYgX193ZWJwYWNrX3JlcXVpcmVfXygxNiksIHdpbmRvdy5JbnB1dG1hc2sgPSBfaW5wdXRtYXNrMi5kZWZhdWx0O1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcclxuICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGNvbnRlbnQgJiYgKGNvbnRlbnQgPSBbIFsgbW9kdWxlLmksIGNvbnRlbnQsIFwiXCIgXSBdKTtcclxuICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgIGhtcjogITBcclxuICAgIH07XHJcbiAgICBvcHRpb25zLnRyYW5zZm9ybSA9IHZvaWQgMDtcclxuICAgIF9fd2VicGFja19yZXF1aXJlX18oNykoY29udGVudCwgb3B0aW9ucyk7XHJcbiAgICBjb250ZW50LmxvY2FscyAmJiAobW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscyk7XHJcbn0sIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gICAgKG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSh2b2lkIDApKS5wdXNoKFsgbW9kdWxlLmksIFwic3Bhbi5pbS1jYXJldCB7XFxyXFxuICAgIC13ZWJraXQtYW5pbWF0aW9uOiAxcyBibGluayBzdGVwLWVuZCBpbmZpbml0ZTtcXHJcXG4gICAgYW5pbWF0aW9uOiAxcyBibGluayBzdGVwLWVuZCBpbmZpbml0ZTtcXHJcXG59XFxyXFxuXFxyXFxuQGtleWZyYW1lcyBibGluayB7XFxyXFxuICAgIGZyb20sIHRvIHtcXHJcXG4gICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogYmxhY2s7XFxyXFxuICAgIH1cXHJcXG4gICAgNTAlIHtcXHJcXG4gICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuXFxyXFxuQC13ZWJraXQta2V5ZnJhbWVzIGJsaW5rIHtcXHJcXG4gICAgZnJvbSwgdG8ge1xcclxcbiAgICAgICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiBibGFjaztcXHJcXG4gICAgfVxcclxcbiAgICA1MCUge1xcclxcbiAgICAgICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcXHJcXG4gICAgfVxcclxcbn1cXHJcXG5cXHJcXG5zcGFuLmltLXN0YXRpYyB7XFxyXFxuICAgIGNvbG9yOiBncmV5O1xcclxcbn1cXHJcXG5cXHJcXG5kaXYuaW0tY29sb3JtYXNrIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBib3JkZXItc3R5bGU6IGluc2V0O1xcclxcbiAgICBib3JkZXItd2lkdGg6IDJweDtcXHJcXG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XFxyXFxuICAgIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xcclxcbiAgICBhcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XFxyXFxufVxcclxcblxcclxcbmRpdi5pbS1jb2xvcm1hc2sgPiBpbnB1dCB7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXHJcXG4gICAgY29sb3I6IHRyYW5zcGFyZW50O1xcclxcbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IGNhcmV0O1xcclxcbiAgICAtbW96LWFwcGVhcmFuY2U6IGNhcmV0O1xcclxcbiAgICBhcHBlYXJhbmNlOiBjYXJldDtcXHJcXG4gICAgYm9yZGVyLXN0eWxlOiBub25lO1xcclxcbiAgICBsZWZ0OiAwOyAvKmNhbGN1bGF0ZWQqL1xcclxcbn1cXHJcXG5cXHJcXG5kaXYuaW0tY29sb3JtYXNrID4gaW5wdXQ6Zm9jdXMge1xcclxcbiAgICBvdXRsaW5lOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG5kaXYuaW0tY29sb3JtYXNrID4gaW5wdXQ6Oi1tb3otc2VsZWN0aW9ue1xcclxcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG5kaXYuaW0tY29sb3JtYXNrID4gaW5wdXQ6OnNlbGVjdGlvbntcXHJcXG4gICAgYmFja2dyb3VuZDogbm9uZTtcXHJcXG59XFxyXFxuZGl2LmltLWNvbG9ybWFzayA+IGlucHV0OjotbW96LXNlbGVjdGlvbntcXHJcXG4gICAgYmFja2dyb3VuZDogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuZGl2LmltLWNvbG9ybWFzayA+IGRpdiB7XFxyXFxuICAgIGNvbG9yOiBibGFjaztcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB3aWR0aDogMTAwcHg7IC8qY2FsY3VsYXRlZCovXFxyXFxufVwiLCBcIlwiIF0pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcclxuICAgIGZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8IFwiXCIsIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xyXG4gICAgICAgIGlmICghY3NzTWFwcGluZykgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKHVzZVNvdXJjZU1hcCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGJ0b2EpIHtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyksIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIiArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArIFwiICovXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gWyBjb250ZW50IF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbIHNvdXJjZU1hcHBpbmcgXSkuam9pbihcIlxcblwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFsgY29udGVudCBdLmpvaW4oXCJcXG5cIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiLyojIFwiICsgKFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpKSArIFwiICovXCI7XHJcbiAgICB9XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xyXG4gICAgICAgIHZhciBsaXN0ID0gW107XHJcbiAgICAgICAgcmV0dXJuIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bMl0gPyBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIiA6IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH0pLmpvaW4oXCJcIik7XHJcbiAgICAgICAgfSwgbGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xyXG4gICAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBtb2R1bGVzICYmIChtb2R1bGVzID0gWyBbIG51bGwsIG1vZHVsZXMsIFwiXCIgXSBdKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9LCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XHJcbiAgICAgICAgICAgICAgICBcIm51bWJlclwiID09IHR5cGVvZiBpZCAmJiAoYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSAhMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuICAgICAgICAgICAgICAgIFwibnVtYmVyXCIgPT0gdHlwZW9mIGl0ZW1bMF0gJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSB8fCAobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSA/IGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5IDogbWVkaWFRdWVyeSAmJiAoaXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiKSwgXHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2goaXRlbSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgbGlzdDtcclxuICAgIH07XHJcbn0sIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gICAgZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV0sIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcbiAgICAgICAgICAgIGlmIChkb21TdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgZG9tU3R5bGUucmVmcysrO1xyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcclxuICAgICAgICAgICAgICAgIGZvciAoO2ogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHBhcnRzID0gW10sIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgICAgICAgICAgICAgICByZWZzOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiBwYXJ0c1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgZm9yICh2YXIgc3R5bGVzID0gW10sIG5ld1N0eWxlcyA9IHt9LCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBsaXN0W2ldLCBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdLCBwYXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgY3NzOiBpdGVtWzFdLFxyXG4gICAgICAgICAgICAgICAgbWVkaWE6IGl0ZW1bMl0sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbmV3U3R5bGVzW2lkXSA/IG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KSA6IHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogWyBwYXJ0IF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdHlsZXM7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pO1xyXG4gICAgICAgIGlmICghdGFyZ2V0KSB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcclxuICAgICAgICB2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgaWYgKFwidG9wXCIgPT09IG9wdGlvbnMuaW5zZXJ0QXQpIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID8gbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcgPyB0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykgOiB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpIDogdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpLCBcclxuICAgICAgICBzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpOyBlbHNlIGlmIChcImJvdHRvbVwiID09PSBvcHRpb25zLmluc2VydEF0KSB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpOyBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgfHwgIW9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcclxuICAgICAgICAgICAgdmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xyXG4gICAgICAgIGlmIChudWxsID09PSBzdHlsZS5wYXJlbnROb2RlKSByZXR1cm4gITE7XHJcbiAgICAgICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XHJcbiAgICAgICAgdmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XHJcbiAgICAgICAgaWR4ID49IDAgJiYgc3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCIsIGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKSwgaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKSwgXHJcbiAgICAgICAgc3R5bGU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiLCBvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiLCBhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKSwgXHJcbiAgICAgICAgaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspLCBsaW5rO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkQXR0cnMoZWwsIGF0dHJzKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xyXG4gICAgICAgIGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XHJcbiAgICAgICAgICAgIGlmICghKHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpKSkgcmV0dXJuIGZ1bmN0aW9uKCkge307XHJcbiAgICAgICAgICAgIG9iai5jc3MgPSByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG4gICAgICAgICAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcclxuICAgICAgICAgICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSksIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgITEpLCBcclxuICAgICAgICAgICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCAhMCk7XHJcbiAgICAgICAgfSBlbHNlIG9iai5zb3VyY2VNYXAgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBVUkwgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIEJsb2IgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBidG9hID8gKHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyksIFxyXG4gICAgICAgIHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyksIHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpLCBzdHlsZS5ocmVmICYmIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XHJcbiAgICAgICAgfSkgOiAoc3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyksIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSksIFxyXG4gICAgICAgIHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1cGRhdGUob2JqKSwgZnVuY3Rpb24obmV3T2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdPYmopIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xyXG4gICAgICAgICAgICB9IGVsc2UgcmVtb3ZlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xyXG4gICAgICAgIHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcclxuICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyksIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzW2luZGV4XSAmJiBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSksIGNoaWxkTm9kZXMubGVuZ3RoID8gc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKSA6IHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9iaikge1xyXG4gICAgICAgIHZhciBjc3MgPSBvYmouY3NzLCBtZWRpYSA9IG9iai5tZWRpYTtcclxuICAgICAgICBpZiAobWVkaWEgJiYgc3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpLCBzdHlsZS5zdHlsZVNoZWV0KSBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKDtzdHlsZS5maXJzdENoaWxkOyApIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVMaW5rKGxpbmssIG9wdGlvbnMsIG9iaikge1xyXG4gICAgICAgIHZhciBjc3MgPSBvYmouY3NzLCBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwLCBhdXRvRml4VXJscyA9IHZvaWQgMCA9PT0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgJiYgc291cmNlTWFwO1xyXG4gICAgICAgIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykgJiYgKGNzcyA9IGZpeFVybHMoY3NzKSksIHNvdXJjZU1hcCAmJiAoY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiKTtcclxuICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFsgY3NzIF0sIHtcclxuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0L2Nzc1wiXHJcbiAgICAgICAgfSksIG9sZFNyYyA9IGxpbmsuaHJlZjtcclxuICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLCBvbGRTcmMgJiYgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xyXG4gICAgfVxyXG4gICAgdmFyIHN0eWxlc0luRG9tID0ge30sIGlzT2xkSUUgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIHZhciBtZW1vO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbWVtbyAmJiAobWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpLCBtZW1vO1xyXG4gICAgICAgIH07XHJcbiAgICB9KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcclxuICAgIH0pLCBnZXRFbGVtZW50ID0gZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICB2YXIgbWVtbyA9IHt9O1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzZWxlY3Rvcikge1xyXG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBtZW1vW3NlbGVjdG9yXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZm4uY2FsbCh0aGlzLCBzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtZW1vW3NlbGVjdG9yXSA9IHN0eWxlVGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZW1vW3NlbGVjdG9yXTtcclxuICAgICAgICB9O1xyXG4gICAgfShmdW5jdGlvbih0YXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xyXG4gICAgfSksIHNpbmdsZXRvbiA9IG51bGwsIHNpbmdsZXRvbkNvdW50ZXIgPSAwLCBzdHlsZXNJbnNlcnRlZEF0VG9wID0gW10sIGZpeFVybHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERFQlVHICYmIERFQlVHICYmIFwib2JqZWN0XCIgIT0gdHlwZW9mIGRvY3VtZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XHJcbiAgICAgICAgKG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9KS5hdHRycyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPyBvcHRpb25zLmF0dHJzIDoge30sIFxyXG4gICAgICAgIG9wdGlvbnMuc2luZ2xldG9uIHx8IChvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKSksIG9wdGlvbnMuaW5zZXJ0SW50byB8fCAob3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCIpLCBcclxuICAgICAgICBvcHRpb25zLmluc2VydEF0IHx8IChvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIik7XHJcbiAgICAgICAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSwgZnVuY3Rpb24obmV3TGlzdCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBtYXlSZW1vdmUgPSBbXSwgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgKGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF0pLnJlZnMtLSwgbWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0xpc3QgJiYgYWRkU3R5bGVzVG9Eb20obGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IGRvbVN0eWxlLnJlZnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0ZXh0U3RvcmUgPSBbXTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5kZXgsIHJlcGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQsIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcclxuICAgICAgICB9O1xyXG4gICAgfSgpO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY3NzKSB7XHJcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbjtcclxuICAgICAgICBpZiAoIWxvY2F0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcclxuICAgICAgICBpZiAoIWNzcyB8fCBcInN0cmluZ1wiICE9IHR5cGVvZiBjc3MpIHJldHVybiBjc3M7XHJcbiAgICAgICAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3QsIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XHJcbiAgICAgICAgcmV0dXJuIGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XHJcbiAgICAgICAgICAgIHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsLnRyaW0oKS5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkMTtcclxuICAgICAgICAgICAgfSkucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkgcmV0dXJuIGZ1bGxNYXRjaDtcclxuICAgICAgICAgICAgdmFyIG5ld1VybDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld1VybCA9IDAgPT09IHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPyB1bnF1b3RlZE9yaWdVcmwgOiAwID09PSB1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPyBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsIDogY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIiksIFxyXG4gICAgICAgICAgICBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0sIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXztcclxuICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvcjtcclxuICAgICFmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICAgICAgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFsgX193ZWJwYWNrX3JlcXVpcmVfXygwKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxKSBdLCBcclxuICAgICAgICB2b2lkIDAgIT09IChfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IGZhY3RvcnkpID8gX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyk7XHJcbiAgICB9KGZ1bmN0aW9uKCQsIElucHV0bWFzaykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNOYU4oeWVhcikgfHwgMjkgPT09IG5ldyBEYXRlKHllYXIsIDIsIDApLmdldERhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIElucHV0bWFzay5leHRlbmRBbGlhc2VzKHtcclxuICAgICAgICAgICAgXCJkZC9tbS95eXl5XCI6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwiMS8yL3lcIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImRkL21tL3l5eXlcIixcclxuICAgICAgICAgICAgICAgIHJlZ2V4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMXByZTogbmV3IFJlZ0V4cChcIlswLTNdXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDE6IG5ldyBSZWdFeHAoXCIwWzEtOV18WzEyXVswLTldfDNbMDFdXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDJwcmU6IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZFNlcGFyYXRvciA9IElucHV0bWFzay5lc2NhcGVSZWdleC5jYWxsKHRoaXMsIHNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKCgwWzEtOV18WzEyXVswLTldfDNbMDFdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiWzAxXSlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB2YWwyOiBmdW5jdGlvbihzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRTZXBhcmF0b3IgPSBJbnB1dG1hc2suZXNjYXBlUmVnZXguY2FsbCh0aGlzLCBzZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIigoMFsxLTldfFsxMl1bMC05XSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIigwWzEtOV18MVswMTJdKSl8KDMwXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCIoMFsxMy05XXwxWzAxMl0pKXwoMzFcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIigwWzEzNTc4XXwxWzAyXSkpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsZWFwZGF5OiBcIjI5LzAyL1wiLFxyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBcIi9cIixcclxuICAgICAgICAgICAgICAgIHllYXJyYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbnllYXI6IDE5MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4eWVhcjogMjA5OVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGlzSW5ZZWFyUmFuZ2U6IGZ1bmN0aW9uKGNocnMsIG1pbnllYXIsIG1heHllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oY2hycykpIHJldHVybiAhMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50ZXJlZHllYXIgPSBwYXJzZUludChjaHJzLmNvbmNhdChtaW55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoY2hycy5sZW5ndGgpKSksIGVudGVyZWR5ZWFyMiA9IHBhcnNlSW50KGNocnMuY29uY2F0KG1heHllYXIudG9TdHJpbmcoKS5zbGljZShjaHJzLmxlbmd0aCkpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTmFOKGVudGVyZWR5ZWFyKSAmJiAobWlueWVhciA8PSBlbnRlcmVkeWVhciAmJiBlbnRlcmVkeWVhciA8PSBtYXh5ZWFyKSB8fCAhaXNOYU4oZW50ZXJlZHllYXIyKSAmJiAobWlueWVhciA8PSBlbnRlcmVkeWVhcjIgJiYgZW50ZXJlZHllYXIyIDw9IG1heHllYXIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRldGVybWluZWJhc2V5ZWFyOiBmdW5jdGlvbihtaW55ZWFyLCBtYXh5ZWFyLCBoaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnR5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtaW55ZWFyID4gY3VycmVudHllYXIpIHJldHVybiBtaW55ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXh5ZWFyIDwgY3VycmVudHllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbWF4WWVhclByZWZpeCA9IG1heHllYXIudG9TdHJpbmcoKS5zbGljZSgwLCAyKSwgbWF4WWVhclBvc3RmaXggPSBtYXh5ZWFyLnRvU3RyaW5nKCkuc2xpY2UoMiwgNCk7IG1heHllYXIgPCBtYXhZZWFyUHJlZml4ICsgaGludDsgKSBtYXhZZWFyUHJlZml4LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXh4WWVhciA9IG1heFllYXJQcmVmaXggKyBtYXhZZWFyUG9zdGZpeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pbnllYXIgPiBtYXh4WWVhciA/IG1pbnllYXIgOiBtYXh4WWVhcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1pbnllYXIgPD0gY3VycmVudHllYXIgJiYgY3VycmVudHllYXIgPD0gbWF4eWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjdXJyZW50WWVhclByZWZpeCA9IGN1cnJlbnR5ZWFyLnRvU3RyaW5nKCkuc2xpY2UoMCwgMik7IG1heHllYXIgPCBjdXJyZW50WWVhclByZWZpeCArIGhpbnQ7ICkgY3VycmVudFllYXJQcmVmaXgtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRZZWFyQW5kSGludCA9IGN1cnJlbnRZZWFyUHJlZml4ICsgaGludDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRZZWFyQW5kSGludCA8IG1pbnllYXIgPyBtaW55ZWFyIDogY3VycmVudFllYXJBbmRIaW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudHllYXI7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbihlLCBidWZmZXIsIGNhcmV0UG9zLCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSAmJiBlLmtleUNvZGUgPT09IElucHV0bWFzay5rZXlDb2RlLlJJR0hUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwodG9kYXkuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LnRyaWdnZXIoXCJzZXR2YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0RnJvbnRWYWx1ZTogZnVuY3Rpb24obWFzaywgYnVmZmVyLCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc3RhcnQgPSAwLCBsZW5ndGggPSAwLCBpID0gMDsgaSA8IG1hc2subGVuZ3RoICYmIFwiMlwiICE9PSBtYXNrLmNoYXJBdChpKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gb3B0cy5kZWZpbml0aW9uc1ttYXNrLmNoYXJBdChpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPyAoc3RhcnQgKz0gbGVuZ3RoLCBsZW5ndGggPSBkZWZpbml0aW9uLmNhcmRpbmFsaXR5KSA6IGxlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyLmpvaW4oXCJcIikuc3Vic3RyKHN0YXJ0LCBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvc3RWYWxpZGF0aW9uOiBmdW5jdGlvbihidWZmZXIsIGN1cnJlbnRSZXN1bHQsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5TW9udGhWYWx1ZSwgeWVhciwgYnVmZmVyU3RyID0gYnVmZmVyLmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT09IG9wdHMubWFzay5pbmRleE9mKFwieVwiKSA/ICh5ZWFyID0gYnVmZmVyU3RyLnN1YnN0cigwLCA0KSwgZGF5TW9udGhWYWx1ZSA9IGJ1ZmZlclN0ci5zdWJzdHJpbmcoNCwgMTApKSA6ICh5ZWFyID0gYnVmZmVyU3RyLnN1YnN0cmluZyg2LCAxMCksIFxyXG4gICAgICAgICAgICAgICAgICAgIGRheU1vbnRoVmFsdWUgPSBidWZmZXJTdHIuc3Vic3RyKDAsIDYpKSwgY3VycmVudFJlc3VsdCAmJiAoZGF5TW9udGhWYWx1ZSAhPT0gb3B0cy5sZWFwZGF5IHx8IGlzTGVhcFllYXIoeWVhcikpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCIxXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBvcHRzLnJlZ2V4LnZhbDEudGVzdChjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpY3QgfHwgaXNWYWxpZCB8fCBjaHJzLmNoYXJBdCgxKSAhPT0gb3B0cy5zZXBhcmF0b3IgJiYgLTEgPT09IFwiLS4vXCIuaW5kZXhPZihjaHJzLmNoYXJBdCgxKSkgfHwgIShpc1ZhbGlkID0gb3B0cy5yZWdleC52YWwxLnRlc3QoXCIwXCIgKyBjaHJzLmNoYXJBdCgwKSkpID8gaXNWYWxpZCA6IChtYXNrc2V0LmJ1ZmZlcltwb3MgLSAxXSA9IFwiMFwiLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRnJvbUJ1ZmZlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogcG9zIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBwb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGM6IGNocnMuY2hhckF0KDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZhbGlkYXRvcjogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjaHJzID0gY2hycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05hTihtYXNrc2V0LmJ1ZmZlcltwb3MgKyAxXSkgfHwgKHBjaHJzICs9IG1hc2tzZXQuYnVmZmVyW3BvcyArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IDEgPT09IHBjaHJzLmxlbmd0aCA/IG9wdHMucmVnZXgudmFsMXByZS50ZXN0KHBjaHJzKSA6IG9wdHMucmVnZXgudmFsMS50ZXN0KHBjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCAmJiBtYXNrc2V0LnZhbGlkUG9zaXRpb25zW3Bvc10gJiYgKG9wdHMucmVnZXgudmFsMihvcHRzLnNlcGFyYXRvcikudGVzdChjaHJzICsgbWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NdLmlucHV0KSB8fCAobWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NdLmlucHV0ID0gXCIwXCIgPT09IGNocnMgPyBcIjFcIiA6IFwiMFwiKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzdHJpY3QgJiYgIWlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWQgPSBvcHRzLnJlZ2V4LnZhbDEudGVzdChjaHJzICsgXCIwXCIpKSByZXR1cm4gbWFza3NldC5idWZmZXJbcG9zXSA9IGNocnMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrc2V0LmJ1ZmZlclsrK3Bvc10gPSBcIjBcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjOiBcIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCA9IG9wdHMucmVnZXgudmFsMS50ZXN0KFwiMFwiICsgY2hycykpIHJldHVybiBtYXNrc2V0LmJ1ZmZlcltwb3NdID0gXCIwXCIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MrKywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcIjJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbnRWYWx1ZSA9IG9wdHMuZ2V0RnJvbnRWYWx1ZShtYXNrc2V0Lm1hc2ssIG1hc2tzZXQuYnVmZmVyLCBvcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSBmcm9udFZhbHVlLmluZGV4T2Yob3B0cy5wbGFjZWhvbGRlclswXSkgJiYgKGZyb250VmFsdWUgPSBcIjAxXCIgKyBvcHRzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IG9wdHMucmVnZXgudmFsMihvcHRzLnNlcGFyYXRvcikudGVzdChmcm9udFZhbHVlICsgY2hycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaWN0IHx8IGlzVmFsaWQgfHwgY2hycy5jaGFyQXQoMSkgIT09IG9wdHMuc2VwYXJhdG9yICYmIC0xID09PSBcIi0uL1wiLmluZGV4T2YoY2hycy5jaGFyQXQoMSkpIHx8ICEoaXNWYWxpZCA9IG9wdHMucmVnZXgudmFsMihvcHRzLnNlcGFyYXRvcikudGVzdChmcm9udFZhbHVlICsgXCIwXCIgKyBjaHJzLmNoYXJBdCgwKSkpID8gaXNWYWxpZCA6IChtYXNrc2V0LmJ1ZmZlcltwb3MgLSAxXSA9IFwiMFwiLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRnJvbUJ1ZmZlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogcG9zIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBwb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGM6IGNocnMuY2hhckF0KDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZhbGlkYXRvcjogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOYU4obWFza3NldC5idWZmZXJbcG9zICsgMV0pIHx8IChjaHJzICs9IG1hc2tzZXQuYnVmZmVyW3BvcyArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbnRWYWx1ZSA9IG9wdHMuZ2V0RnJvbnRWYWx1ZShtYXNrc2V0Lm1hc2ssIG1hc2tzZXQuYnVmZmVyLCBvcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gZnJvbnRWYWx1ZS5pbmRleE9mKG9wdHMucGxhY2Vob2xkZXJbMF0pICYmIChmcm9udFZhbHVlID0gXCIwMVwiICsgb3B0cy5zZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gMSA9PT0gY2hycy5sZW5ndGggPyBvcHRzLnJlZ2V4LnZhbDJwcmUob3B0cy5zZXBhcmF0b3IpLnRlc3QoZnJvbnRWYWx1ZSArIGNocnMpIDogb3B0cy5yZWdleC52YWwyKG9wdHMuc2VwYXJhdG9yKS50ZXN0KGZyb250VmFsdWUgKyBjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiBtYXNrc2V0LnZhbGlkUG9zaXRpb25zW3Bvc10gJiYgKG9wdHMucmVnZXgudmFsMihvcHRzLnNlcGFyYXRvcikudGVzdChjaHJzICsgbWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NdLmlucHV0KSB8fCAobWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NdLmlucHV0ID0gXCIwXCIgPT09IGNocnMgPyBcIjFcIiA6IFwiMFwiKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdCB8fCBpc1ZhbGlkIHx8ICEoaXNWYWxpZCA9IG9wdHMucmVnZXgudmFsMihvcHRzLnNlcGFyYXRvcikudGVzdChmcm9udFZhbHVlICsgXCIwXCIgKyBjaHJzKSkgPyBpc1ZhbGlkIDogKG1hc2tzZXQuYnVmZmVyW3Bvc10gPSBcIjBcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zKyssIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IF1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuaXNJblllYXJSYW5nZShjaHJzLCBvcHRzLnllYXJyYW5nZS5taW55ZWFyLCBvcHRzLnllYXJyYW5nZS5tYXh5ZWFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZhbGlkYXRvcjogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBvcHRzLmlzSW5ZZWFyUmFuZ2UoY2hycywgb3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJpY3QgJiYgIWlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJQcmVmaXggPSBvcHRzLmRldGVybWluZWJhc2V5ZWFyKG9wdHMueWVhcnJhbmdlLm1pbnllYXIsIG9wdHMueWVhcnJhbmdlLm1heHllYXIsIGNocnMgKyBcIjBcIikudG9TdHJpbmcoKS5zbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWQgPSBvcHRzLmlzSW5ZZWFyUmFuZ2UoeWVhclByZWZpeCArIGNocnMsIG9wdHMueWVhcnJhbmdlLm1pbnllYXIsIG9wdHMueWVhcnJhbmdlLm1heHllYXIpKSByZXR1cm4gbWFza3NldC5idWZmZXJbcG9zKytdID0geWVhclByZWZpeC5jaGFyQXQoMCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeWVhclByZWZpeCA9IG9wdHMuZGV0ZXJtaW5lYmFzZXllYXIob3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhciwgY2hycyArIFwiMFwiKS50b1N0cmluZygpLnNsaWNlKDAsIDIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IG9wdHMuaXNJblllYXJSYW5nZSh5ZWFyUHJlZml4ICsgY2hycywgb3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhcikpIHJldHVybiBtYXNrc2V0LmJ1ZmZlcltwb3MrK10gPSB5ZWFyUHJlZml4LmNoYXJBdCgwKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tzZXQuYnVmZmVyW3BvcysrXSA9IHllYXJQcmVmaXguY2hhckF0KDEpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBvcHRzLmlzSW5ZZWFyUmFuZ2UoY2hycywgb3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJpY3QgJiYgIWlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJQcmVmaXggPSBvcHRzLmRldGVybWluZWJhc2V5ZWFyKG9wdHMueWVhcnJhbmdlLm1pbnllYXIsIG9wdHMueWVhcnJhbmdlLm1heHllYXIsIGNocnMpLnRvU3RyaW5nKCkuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkID0gb3B0cy5pc0luWWVhclJhbmdlKGNocnNbMF0gKyB5ZWFyUHJlZml4WzFdICsgY2hyc1sxXSwgb3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhcikpIHJldHVybiBtYXNrc2V0LmJ1ZmZlcltwb3MrK10gPSB5ZWFyUHJlZml4LmNoYXJBdCgxKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5ZWFyUHJlZml4ID0gb3B0cy5kZXRlcm1pbmViYXNleWVhcihvcHRzLnllYXJyYW5nZS5taW55ZWFyLCBvcHRzLnllYXJyYW5nZS5tYXh5ZWFyLCBjaHJzKS50b1N0cmluZygpLnNsaWNlKDAsIDIpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IG9wdHMuaXNJblllYXJSYW5nZSh5ZWFyUHJlZml4ICsgY2hycywgb3B0cy55ZWFycmFuZ2UubWlueWVhciwgb3B0cy55ZWFycmFuZ2UubWF4eWVhcikpIHJldHVybiBtYXNrc2V0LmJ1ZmZlcltwb3MgLSAxXSA9IHllYXJQcmVmaXguY2hhckF0KDApLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza3NldC5idWZmZXJbcG9zKytdID0geWVhclByZWZpeC5jaGFyQXQoMSksIG1hc2tzZXQuYnVmZmVyW3BvcysrXSA9IGNocnMuY2hhckF0KDApLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZyb21CdWZmZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogcG9zIC0gMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24oY2hycywgbWFza3NldCwgcG9zLCBzdHJpY3QsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5pc0luWWVhclJhbmdlKGNocnMsIG9wdHMueWVhcnJhbmdlLm1pbnllYXIsIG9wdHMueWVhcnJhbmdlLm1heHllYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRNb2RlOiAhMSxcclxuICAgICAgICAgICAgICAgIGF1dG9Vbm1hc2s6ICExXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibW0vZGQveXl5eVwiOiB7XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJtbS9kZC95eXl5XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJkZC9tbS95eXl5XCIsXHJcbiAgICAgICAgICAgICAgICByZWdleDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbDJwcmU6IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZFNlcGFyYXRvciA9IElucHV0bWFzay5lc2NhcGVSZWdleC5jYWxsKHRoaXMsIHNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKCgwWzEzLTldfDFbMDEyXSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIlswLTNdKXwoMDJcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIlswLTJdKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDI6IGZ1bmN0aW9uKHNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZFNlcGFyYXRvciA9IElucHV0bWFzay5lc2NhcGVSZWdleC5jYWxsKHRoaXMsIHNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKCgwWzEtOV18MVswMTJdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiKDBbMS05XXxbMTJdWzAtOV0pKXwoKDBbMTMtOV18MVswMTJdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiMzApfCgoMFsxMzU3OF18MVswMl0pXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCIzMSlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB2YWwxcHJlOiBuZXcgUmVnRXhwKFwiWzAxXVwiKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWwxOiBuZXcgUmVnRXhwKFwiMFsxLTldfDFbMDEyXVwiKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxlYXBkYXk6IFwiMDIvMjkvXCIsXHJcbiAgICAgICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGUsIGJ1ZmZlciwgY2FyZXRQb3MsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PT0gSW5wdXRtYXNrLmtleUNvZGUuUklHSFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LnZhbCgodG9kYXkuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXREYXRlKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQudHJpZ2dlcihcInNldHZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJ5eXl5L21tL2RkXCI6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwieS8xLzJcIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcInl5eXkvbW0vZGRcIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcIm1tL2RkL3l5eXlcIixcclxuICAgICAgICAgICAgICAgIGxlYXBkYXk6IFwiLzAyLzI5XCIsXHJcbiAgICAgICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGUsIGJ1ZmZlciwgY2FyZXRQb3MsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PT0gSW5wdXRtYXNrLmtleUNvZGUuUklHSFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LnZhbCh0b2RheS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXREYXRlKCkudG9TdHJpbmcoKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQudHJpZ2dlcihcInNldHZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJkZC5tbS55eXl5XCI6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwiMS4yLnlcIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImRkLm1tLnl5eXlcIixcclxuICAgICAgICAgICAgICAgIGxlYXBkYXk6IFwiMjkuMDIuXCIsXHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IFwiLlwiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwiZGQvbW0veXl5eVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiZGQtbW0teXl5eVwiOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIjEtMi15XCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJkZC1tbS15eXl5XCIsXHJcbiAgICAgICAgICAgICAgICBsZWFwZGF5OiBcIjI5LTAyLVwiLFxyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBcIi1cIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcImRkL21tL3l5eXlcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm1tLmRkLnl5eXlcIjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCIxLjIueVwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwibW0uZGQueXl5eVwiLFxyXG4gICAgICAgICAgICAgICAgbGVhcGRheTogXCIwMi4yOS5cIixcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogXCIuXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJtbS9kZC95eXl5XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJtbS1kZC15eXl5XCI6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwiMS0yLXlcIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIm1tLWRkLXl5eXlcIixcclxuICAgICAgICAgICAgICAgIGxlYXBkYXk6IFwiMDItMjktXCIsXHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IFwiLVwiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwibW0vZGQveXl5eVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwieXl5eS5tbS5kZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcInkuMS4yXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJ5eXl5Lm1tLmRkXCIsXHJcbiAgICAgICAgICAgICAgICBsZWFwZGF5OiBcIi4wMi4yOVwiLFxyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBcIi5cIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcInl5eXkvbW0vZGRcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInl5eXktbW0tZGRcIjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCJ5LTEtMlwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwieXl5eS1tbS1kZFwiLFxyXG4gICAgICAgICAgICAgICAgbGVhcGRheTogXCItMDItMjlcIixcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogXCItXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJ5eXl5L21tL2RkXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZXRpbWU6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwiMS8yL3kgaDpzXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJkZC9tbS95eXl5IGhoOm1tXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJkZC9tbS95eXl5XCIsXHJcbiAgICAgICAgICAgICAgICByZWdleDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyc3ByZTogbmV3IFJlZ0V4cChcIlswMTJdXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGhyczI0OiBuZXcgUmVnRXhwKFwiMlswLTRdfDFbMy05XVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBocnM6IG5ldyBSZWdFeHAoXCJbMDFdWzAtOV18MlswLTRdXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtcG06IG5ldyBSZWdFeHAoXCJeW2F8cHxBfFBdW218TV1cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgbXNwcmU6IG5ldyBSZWdFeHAoXCJbMC01XVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBtczogbmV3IFJlZ0V4cChcIlswLTVdWzAtOV1cIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aW1lc2VwYXJhdG9yOiBcIjpcIixcclxuICAgICAgICAgICAgICAgIGhvdXJGb3JtYXQ6IFwiMjRcIixcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCIyNFwiID09PSBvcHRzLmhvdXJGb3JtYXQgJiYgMjQgPT09IHBhcnNlSW50KGNocnMsIDEwKSkgcmV0dXJuIG1hc2tzZXQuYnVmZmVyW3BvcyAtIDFdID0gXCIwXCIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza3NldC5idWZmZXJbcG9zXSA9IFwiMFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZyb21CdWZmZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHBvcyAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjOiBcIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gb3B0cy5yZWdleC5ocnMudGVzdChjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RyaWN0ICYmICFpc1ZhbGlkICYmIChjaHJzLmNoYXJBdCgxKSA9PT0gb3B0cy50aW1lc2VwYXJhdG9yIHx8IC0xICE9PSBcIi0uOlwiLmluZGV4T2YoY2hycy5jaGFyQXQoMSkpKSAmJiAoaXNWYWxpZCA9IG9wdHMucmVnZXguaHJzLnRlc3QoXCIwXCIgKyBjaHJzLmNoYXJBdCgwKSkpKSByZXR1cm4gbWFza3NldC5idWZmZXJbcG9zIC0gMV0gPSBcIjBcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrc2V0LmJ1ZmZlcltwb3NdID0gY2hycy5jaGFyQXQoMCksIHBvcysrLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZyb21CdWZmZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHBvcyAtIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjOiBvcHRzLnRpbWVzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCAmJiBcIjI0XCIgIT09IG9wdHMuaG91ckZvcm1hdCAmJiBvcHRzLnJlZ2V4LmhyczI0LnRlc3QoY2hycykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gcGFyc2VJbnQoY2hycywgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyNCA9PT0gdG1wID8gKG1hc2tzZXQuYnVmZmVyW3BvcyArIDVdID0gXCJhXCIsIG1hc2tzZXQuYnVmZmVyW3BvcyArIDZdID0gXCJtXCIpIDogKG1hc2tzZXQuYnVmZmVyW3BvcyArIDVdID0gXCJwXCIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tzZXQuYnVmZmVyW3BvcyArIDZdID0gXCJtXCIpLCAodG1wIC09IDEyKSA8IDEwID8gKG1hc2tzZXQuYnVmZmVyW3Bvc10gPSB0bXAudG9TdHJpbmcoKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza3NldC5idWZmZXJbcG9zIC0gMV0gPSBcIjBcIikgOiAobWFza3NldC5idWZmZXJbcG9zXSA9IHRtcC50b1N0cmluZygpLmNoYXJBdCgxKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza3NldC5idWZmZXJbcG9zIC0gMV0gPSB0bXAudG9TdHJpbmcoKS5jaGFyQXQoMCkpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hGcm9tQnVmZmVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogcG9zIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogcG9zICsgNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjOiBtYXNrc2V0LmJ1ZmZlcltwb3NdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmFsaWRhdG9yOiBbIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24oY2hycywgbWFza3NldCwgcG9zLCBzdHJpY3QsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IG9wdHMucmVnZXguaHJzcHJlLnRlc3QoY2hycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmljdCB8fCBpc1ZhbGlkIHx8ICEoaXNWYWxpZCA9IG9wdHMucmVnZXguaHJzLnRlc3QoXCIwXCIgKyBjaHJzKSkgPyBpc1ZhbGlkIDogKG1hc2tzZXQuYnVmZmVyW3Bvc10gPSBcIjBcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zKyssIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IF1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBcIlswLTVdWzAtOV1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZhbGlkYXRvcjogWyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBvcHRzLnJlZ2V4Lm1zcHJlLnRlc3QoY2hycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmljdCB8fCBpc1ZhbGlkIHx8ICEoaXNWYWxpZCA9IG9wdHMucmVnZXgubXMudGVzdChcIjBcIiArIGNocnMpKSA/IGlzVmFsaWQgOiAobWFza3NldC5idWZmZXJbcG9zXSA9IFwiMFwiLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MrKywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5yZWdleC5hbXBtLnRlc3QoY2hycyArIFwibVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzaW5nOiBcImxvd2VyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGluc2VydE1vZGU6ICExLFxyXG4gICAgICAgICAgICAgICAgYXV0b1VubWFzazogITFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZXRpbWUxMjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCIxLzIveSBoOnMgdFxcXFxtXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJkZC9tbS95eXl5IGhoOm1tIHhtXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJkYXRldGltZVwiLFxyXG4gICAgICAgICAgICAgICAgaG91ckZvcm1hdDogXCIxMlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibW0vZGQveXl5eSBoaDptbSB4bVwiOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIjEvMi95IGg6cyB0XFxcXG1cIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIm1tL2RkL3l5eXkgaGg6bW0geG1cIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcImRhdGV0aW1lMTJcIixcclxuICAgICAgICAgICAgICAgIHJlZ2V4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMnByZTogZnVuY3Rpb24oc2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlc2NhcGVkU2VwYXJhdG9yID0gSW5wdXRtYXNrLmVzY2FwZVJlZ2V4LmNhbGwodGhpcywgc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoKDBbMTMtOV18MVswMTJdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiWzAtM10pfCgwMlwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiWzAtMl0pXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMjogZnVuY3Rpb24oc2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlc2NhcGVkU2VwYXJhdG9yID0gSW5wdXRtYXNrLmVzY2FwZVJlZ2V4LmNhbGwodGhpcywgc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoKDBbMS05XXwxWzAxMl0pXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCIoMFsxLTldfFsxMl1bMC05XSkpfCgoMFsxMy05XXwxWzAxMl0pXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCIzMCl8KCgwWzEzNTc4XXwxWzAyXSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIjMxKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDFwcmU6IG5ldyBSZWdFeHAoXCJbMDFdXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDE6IG5ldyBSZWdFeHAoXCIwWzEtOV18MVswMTJdXCIpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbGVhcGRheTogXCIwMi8yOS9cIixcclxuICAgICAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZSwgYnVmZmVyLCBjYXJldFBvcywgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09PSBJbnB1dG1hc2sua2V5Q29kZS5SSUdIVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQudmFsKCh0b2RheS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKSArIHRvZGF5LmdldERhdGUoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC50cmlnZ2VyKFwic2V0dmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImhoOm1tIHRcIjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCJoOnMgdFxcXFxtXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJoaDptbSB4bVwiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwiZGF0ZXRpbWVcIixcclxuICAgICAgICAgICAgICAgIGhvdXJGb3JtYXQ6IFwiMTJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImg6cyB0XCI6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IFwiaDpzIHRcXFxcbVwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiaGg6bW0geG1cIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcImRhdGV0aW1lXCIsXHJcbiAgICAgICAgICAgICAgICBob3VyRm9ybWF0OiBcIjEyXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJoaDptbTpzc1wiOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcImg6czpzXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJoaDptbTpzc1wiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwiZGF0ZXRpbWVcIixcclxuICAgICAgICAgICAgICAgIGF1dG9Vbm1hc2s6ICExXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiaGg6bW1cIjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCJoOnNcIixcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImhoOm1tXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJkYXRldGltZVwiLFxyXG4gICAgICAgICAgICAgICAgYXV0b1VubWFzazogITFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwiZGQvbW0veXl5eVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibW0veXl5eVwiOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIjEveVwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwibW0veXl5eVwiLFxyXG4gICAgICAgICAgICAgICAgbGVhcGRheTogXCJkb25vdHVzZVwiLFxyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBcIi9cIixcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcIm1tL2RkL3l5eXlcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzaGFtc2k6IHtcclxuICAgICAgICAgICAgICAgIHJlZ2V4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMnByZTogZnVuY3Rpb24oc2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlc2NhcGVkU2VwYXJhdG9yID0gSW5wdXRtYXNrLmVzY2FwZVJlZ2V4LmNhbGwodGhpcywgc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoKDBbMS05XXwxWzAxMl0pXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCJbMC0zXSlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB2YWwyOiBmdW5jdGlvbihzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRTZXBhcmF0b3IgPSBJbnB1dG1hc2suZXNjYXBlUmVnZXguY2FsbCh0aGlzLCBzZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIigoMFsxLTldfDFbMDEyXSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIigwWzEtOV18WzEyXVswLTldKSl8KCgwWzEtOV18MVswMTJdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiMzApfCgoMFsxLTZdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiMzEpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMXByZTogbmV3IFJlZ0V4cChcIlswMV1cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMTogbmV3IFJlZ0V4cChcIjBbMS05XXwxWzAxMl1cIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB5ZWFycmFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBtaW55ZWFyOiAxMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heHllYXI6IDE0OTlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcInkvMS8yXCIsXHJcbiAgICAgICAgICAgICAgICBsZWFwZGF5OiBcIi8xMi8zMFwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwieXl5eS9tbS9kZFwiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwibW0vZGQveXl5eVwiLFxyXG4gICAgICAgICAgICAgICAgY2xlYXJJbmNvbXBsZXRlOiAhMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInl5eXktbW0tZGQgaGg6bW06c3NcIjoge1xyXG4gICAgICAgICAgICAgICAgbWFzazogXCJ5LTEtMiBoOnM6c1wiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwieXl5eS1tbS1kZCBoaDptbTpzc1wiLFxyXG4gICAgICAgICAgICAgICAgYWxpYXM6IFwiZGF0ZXRpbWVcIixcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogXCItXCIsXHJcbiAgICAgICAgICAgICAgICBsZWFwZGF5OiBcIi0wMi0yOVwiLFxyXG4gICAgICAgICAgICAgICAgcmVnZXg6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWwycHJlOiBmdW5jdGlvbihzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRTZXBhcmF0b3IgPSBJbnB1dG1hc2suZXNjYXBlUmVnZXguY2FsbCh0aGlzLCBzZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIigoMFsxMy05XXwxWzAxMl0pXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCJbMC0zXSl8KDAyXCIgKyBlc2NhcGVkU2VwYXJhdG9yICsgXCJbMC0yXSlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB2YWwyOiBmdW5jdGlvbihzZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRTZXBhcmF0b3IgPSBJbnB1dG1hc2suZXNjYXBlUmVnZXguY2FsbCh0aGlzLCBzZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIigoMFsxLTldfDFbMDEyXSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIigwWzEtOV18WzEyXVswLTldKSl8KCgwWzEzLTldfDFbMDEyXSlcIiArIGVzY2FwZWRTZXBhcmF0b3IgKyBcIjMwKXwoKDBbMTM1NzhdfDFbMDJdKVwiICsgZXNjYXBlZFNlcGFyYXRvciArIFwiMzEpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMXByZTogbmV3IFJlZ0V4cChcIlswMV1cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsMTogbmV3IFJlZ0V4cChcIjBbMS05XXwxWzAxMl1cIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbktleURvd246IGZ1bmN0aW9uKGUsIGJ1ZmZlciwgY2FyZXRQb3MsIG9wdHMpIHt9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgSW5wdXRtYXNrO1xyXG4gICAgfSk7XHJcbn0sIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XHJcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICB2b2lkIDAgIT09IChfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSkgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fO1xyXG4gICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yO1xyXG4gICAgdm9pZCAwICE9PSAoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XHJcbiAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSkgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XHJcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICAhZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gICAgICAgIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMSkgXSwgXHJcbiAgICAgICAgdm9pZCAwICE9PSAoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSBmYWN0b3J5KSA/IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXykgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG4gICAgfShmdW5jdGlvbigkLCBJbnB1dG1hc2spIHtcclxuICAgICAgICByZXR1cm4gSW5wdXRtYXNrLmV4dGVuZERlZmluaXRpb25zKHtcclxuICAgICAgICAgICAgQToge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBcIltBLVphLXrQkC3Rj9CB0ZHDgC3Dv8K1XVwiLFxyXG4gICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICBjYXNpbmc6IFwidXBwZXJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIiZcIjoge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBcIlswLTlBLVphLXrQkC3Rj9CB0ZHDgC3Dv8K1XVwiLFxyXG4gICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICBjYXNpbmc6IFwidXBwZXJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIiNcIjoge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBcIlswLTlBLUZhLWZdXCIsXHJcbiAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMSxcclxuICAgICAgICAgICAgICAgIGNhc2luZzogXCJ1cHBlclwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgSW5wdXRtYXNrLmV4dGVuZEFsaWFzZXMoe1xyXG4gICAgICAgICAgICB1cmw6IHtcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IFwiLlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIihcXFxcaHR0cDovLyl8KFxcXFxodHRwXFxcXHM6Ly8pfChmdHA6Ly8pfChmdHBcXFxcczovLylpeyt9XCIsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRNb2RlOiAhMSxcclxuICAgICAgICAgICAgICAgIGF1dG9Vbm1hc2s6ICExLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcInVybFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlwOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcImlbaVtpXV0uaVtpW2ldXS5pW2lbaV1dLmlbaVtpXV1cIixcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zIC0gMSA+IC0xICYmIFwiLlwiICE9PSBtYXNrc2V0LmJ1ZmZlcltwb3MgLSAxXSA/IChjaHJzID0gbWFza3NldC5idWZmZXJbcG9zIC0gMV0gKyBjaHJzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocnMgPSBwb3MgLSAyID4gLTEgJiYgXCIuXCIgIT09IG1hc2tzZXQuYnVmZmVyW3BvcyAtIDJdID8gbWFza3NldC5idWZmZXJbcG9zIC0gMl0gKyBjaHJzIDogXCIwXCIgKyBjaHJzKSA6IGNocnMgPSBcIjAwXCIgKyBjaHJzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoXCIyNVswLTVdfDJbMC00XVswLTldfFswMV1bMC05XVswLTldXCIpLnRlc3QoY2hycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVW5NYXNrOiBmdW5jdGlvbihtYXNrZWRWYWx1ZSwgdW5tYXNrZWRWYWx1ZSwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXNrZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnB1dG1vZGU6IFwibnVtZXJpY1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVtYWlsOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIip7MSw2NH1bLip7MSw2NH1dWy4qezEsNjR9XVsuKnsxLDYzfV1ALXsxLDYzfS4tezEsNjN9Wy4tezEsNjN9XVsuLXsxLDYzfV1cIixcclxuICAgICAgICAgICAgICAgIGdyZWVkeTogITEsXHJcbiAgICAgICAgICAgICAgICBvbkJlZm9yZVBhc3RlOiBmdW5jdGlvbihwYXN0ZWRWYWx1ZSwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFzdGVkVmFsdWUgPSBwYXN0ZWRWYWx1ZS50b0xvd2VyQ2FzZSgpKS5yZXBsYWNlKFwibWFpbHRvOlwiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiKlwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogXCJbMC05QS1aYS16ISMkJSYnKisvPT9eX2B7fH1+LV1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2luZzogXCJsb3dlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcIi1cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IFwiWzAtOUEtWmEtei1dXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNpbmc6IFwibG93ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVuTWFzazogZnVuY3Rpb24obWFza2VkVmFsdWUsIHVubWFza2VkVmFsdWUsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFza2VkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcImVtYWlsXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWFjOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIiMjOiMjOiMjOiMjOiMjOiMjXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmluOiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcIlZ7MTN9OXs0fVwiLFxyXG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBWOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogXCJbQS1ISi1OUFItWmEtaGotbnByLXpcXFxcZF1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2luZzogXCJ1cHBlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNsZWFySW5jb21wbGV0ZTogITAsXHJcbiAgICAgICAgICAgICAgICBhdXRvVW5tYXNrOiAhMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSksIElucHV0bWFzaztcclxuICAgIH0pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XHJcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICAhZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gICAgICAgIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMSkgXSwgXHJcbiAgICAgICAgdm9pZCAwICE9PSAoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSBmYWN0b3J5KSA/IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXykgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG4gICAgfShmdW5jdGlvbigkLCBJbnB1dG1hc2ssIHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGF1dG9Fc2NhcGUodHh0LCBvcHRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGVzY2FwZWRUeHQgPSBcIlwiLCBpID0gMDsgaSA8IHR4dC5sZW5ndGg7IGkrKykgSW5wdXRtYXNrLnByb3RvdHlwZS5kZWZpbml0aW9uc1t0eHQuY2hhckF0KGkpXSB8fCBvcHRzLmRlZmluaXRpb25zW3R4dC5jaGFyQXQoaSldIHx8IG9wdHMub3B0aW9uYWxtYXJrZXIuc3RhcnQgPT09IHR4dC5jaGFyQXQoaSkgfHwgb3B0cy5vcHRpb25hbG1hcmtlci5lbmQgPT09IHR4dC5jaGFyQXQoaSkgfHwgb3B0cy5xdWFudGlmaWVybWFya2VyLnN0YXJ0ID09PSB0eHQuY2hhckF0KGkpIHx8IG9wdHMucXVhbnRpZmllcm1hcmtlci5lbmQgPT09IHR4dC5jaGFyQXQoaSkgfHwgb3B0cy5ncm91cG1hcmtlci5zdGFydCA9PT0gdHh0LmNoYXJBdChpKSB8fCBvcHRzLmdyb3VwbWFya2VyLmVuZCA9PT0gdHh0LmNoYXJBdChpKSB8fCBvcHRzLmFsdGVybmF0b3JtYXJrZXIgPT09IHR4dC5jaGFyQXQoaSkgPyBlc2NhcGVkVHh0ICs9IFwiXFxcXFwiICsgdHh0LmNoYXJBdChpKSA6IGVzY2FwZWRUeHQgKz0gdHh0LmNoYXJBdChpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVzY2FwZWRUeHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBJbnB1dG1hc2suZXh0ZW5kQWxpYXNlcyh7XHJcbiAgICAgICAgICAgIG51bWVyaWM6IHtcclxuICAgICAgICAgICAgICAgIG1hc2s6IGZ1bmN0aW9uKG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gb3B0cy5yZXBlYXQgJiYgaXNOYU4ob3B0cy5pbnRlZ2VyRGlnaXRzKSAmJiAob3B0cy5pbnRlZ2VyRGlnaXRzID0gb3B0cy5yZXBlYXQpLCBcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLnJlcGVhdCA9IDAsIG9wdHMuZ3JvdXBTZXBhcmF0b3IgPT09IG9wdHMucmFkaXhQb2ludCAmJiAoXCIuXCIgPT09IG9wdHMucmFkaXhQb2ludCA/IG9wdHMuZ3JvdXBTZXBhcmF0b3IgPSBcIixcIiA6IFwiLFwiID09PSBvcHRzLnJhZGl4UG9pbnQgPyBvcHRzLmdyb3VwU2VwYXJhdG9yID0gXCIuXCIgOiBvcHRzLmdyb3VwU2VwYXJhdG9yID0gXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIFwiIFwiID09PSBvcHRzLmdyb3VwU2VwYXJhdG9yICYmIChvcHRzLnNraXBPcHRpb25hbFBhcnRDaGFyYWN0ZXIgPSB1bmRlZmluZWQpLCBvcHRzLmF1dG9Hcm91cCA9IG9wdHMuYXV0b0dyb3VwICYmIFwiXCIgIT09IG9wdHMuZ3JvdXBTZXBhcmF0b3IsIFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuYXV0b0dyb3VwICYmIChcInN0cmluZ1wiID09IHR5cGVvZiBvcHRzLmdyb3VwU2l6ZSAmJiBpc0Zpbml0ZShvcHRzLmdyb3VwU2l6ZSkgJiYgKG9wdHMuZ3JvdXBTaXplID0gcGFyc2VJbnQob3B0cy5ncm91cFNpemUpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgaXNGaW5pdGUob3B0cy5pbnRlZ2VyRGlnaXRzKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcHMgPSBNYXRoLmZsb29yKG9wdHMuaW50ZWdlckRpZ2l0cyAvIG9wdHMuZ3JvdXBTaXplKSwgbW9kID0gb3B0cy5pbnRlZ2VyRGlnaXRzICUgb3B0cy5ncm91cFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuaW50ZWdlckRpZ2l0cyA9IHBhcnNlSW50KG9wdHMuaW50ZWdlckRpZ2l0cykgKyAoMCA9PT0gbW9kID8gc2VwcyAtIDEgOiBzZXBzKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuaW50ZWdlckRpZ2l0cyA8IDEgJiYgKG9wdHMuaW50ZWdlckRpZ2l0cyA9IFwiKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5wbGFjZWhvbGRlci5sZW5ndGggPiAxICYmIChvcHRzLnBsYWNlaG9sZGVyID0gb3B0cy5wbGFjZWhvbGRlci5jaGFyQXQoMCkpLCBcclxuICAgICAgICAgICAgICAgICAgICBcInJhZGl4Rm9jdXNcIiA9PT0gb3B0cy5wb3NpdGlvbkNhcmV0T25DbGljayAmJiBcIlwiID09PSBvcHRzLnBsYWNlaG9sZGVyICYmICExID09PSBvcHRzLmludGVnZXJPcHRpb25hbCAmJiAob3B0cy5wb3NpdGlvbkNhcmV0T25DbGljayA9IFwibHZwXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmRlZmluaXRpb25zW1wiO1wiXSA9IG9wdHMuZGVmaW5pdGlvbnNbXCJ+XCJdLCBvcHRzLmRlZmluaXRpb25zW1wiO1wiXS5kZWZpbml0aW9uU3ltYm9sID0gXCJ+XCIsIFxyXG4gICAgICAgICAgICAgICAgICAgICEwID09PSBvcHRzLm51bWVyaWNJbnB1dCAmJiAob3B0cy5wb3NpdGlvbkNhcmV0T25DbGljayA9IFwicmFkaXhGb2N1c1wiID09PSBvcHRzLnBvc2l0aW9uQ2FyZXRPbkNsaWNrID8gXCJsdnBcIiA6IG9wdHMucG9zaXRpb25DYXJldE9uQ2xpY2ssIFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGlnaXRzT3B0aW9uYWwgPSAhMSwgaXNOYU4ob3B0cy5kaWdpdHMpICYmIChvcHRzLmRpZ2l0cyA9IDIpLCBvcHRzLmRlY2ltYWxQcm90ZWN0ID0gITEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXNrID0gXCJbK11cIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFzayArPSBhdXRvRXNjYXBlKG9wdHMucHJlZml4LCBvcHRzKSwgITAgPT09IG9wdHMuaW50ZWdlck9wdGlvbmFsID8gbWFzayArPSBcIn57MSxcIiArIG9wdHMuaW50ZWdlckRpZ2l0cyArIFwifVwiIDogbWFzayArPSBcIn57XCIgKyBvcHRzLmludGVnZXJEaWdpdHMgKyBcIn1cIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kaWdpdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLnJhZGl4UG9pbnREZWZpbml0aW9uU3ltYm9sID0gb3B0cy5kZWNpbWFsUHJvdGVjdCA/IFwiOlwiIDogb3B0cy5yYWRpeFBvaW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHEgPSBvcHRzLmRpZ2l0cy50b1N0cmluZygpLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGaW5pdGUoZHFbMF0gJiYgZHFbMV0gJiYgaXNGaW5pdGUoZHFbMV0pKSA/IG1hc2sgKz0gb3B0cy5yYWRpeFBvaW50RGVmaW5pdGlvblN5bWJvbCArIFwiO3tcIiArIG9wdHMuZGlnaXRzICsgXCJ9XCIgOiAoaXNOYU4ob3B0cy5kaWdpdHMpIHx8IHBhcnNlSW50KG9wdHMuZGlnaXRzKSA+IDApICYmIChvcHRzLmRpZ2l0c09wdGlvbmFsID8gbWFzayArPSBcIltcIiArIG9wdHMucmFkaXhQb2ludERlZmluaXRpb25TeW1ib2wgKyBcIjt7MSxcIiArIG9wdHMuZGlnaXRzICsgXCJ9XVwiIDogbWFzayArPSBvcHRzLnJhZGl4UG9pbnREZWZpbml0aW9uU3ltYm9sICsgXCI7e1wiICsgb3B0cy5kaWdpdHMgKyBcIn1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXNrICs9IGF1dG9Fc2NhcGUob3B0cy5zdWZmaXgsIG9wdHMpLCBtYXNrICs9IFwiWy1dXCIsIG9wdHMuZ3JlZWR5ID0gITEsIG1hc2s7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBncmVlZHk6ICExLFxyXG4gICAgICAgICAgICAgICAgZGlnaXRzOiBcIipcIixcclxuICAgICAgICAgICAgICAgIGRpZ2l0c09wdGlvbmFsOiAhMCxcclxuICAgICAgICAgICAgICAgIGVuZm9yY2VEaWdpdHNPbkJsdXI6ICExLFxyXG4gICAgICAgICAgICAgICAgcmFkaXhQb2ludDogXCIuXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbkNhcmV0T25DbGljazogXCJyYWRpeEZvY3VzXCIsXHJcbiAgICAgICAgICAgICAgICBncm91cFNpemU6IDMsXHJcbiAgICAgICAgICAgICAgICBncm91cFNlcGFyYXRvcjogXCJcIixcclxuICAgICAgICAgICAgICAgIGF1dG9Hcm91cDogITEsXHJcbiAgICAgICAgICAgICAgICBhbGxvd01pbnVzOiAhMCxcclxuICAgICAgICAgICAgICAgIG5lZ2F0aW9uU3ltYm9sOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbnQ6IFwiLVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2s6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ2VyRGlnaXRzOiBcIitcIixcclxuICAgICAgICAgICAgICAgIGludGVnZXJPcHRpb25hbDogITAsXHJcbiAgICAgICAgICAgICAgICBwcmVmaXg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzdWZmaXg6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICByaWdodEFsaWduOiAhMCxcclxuICAgICAgICAgICAgICAgIGRlY2ltYWxQcm90ZWN0OiAhMCxcclxuICAgICAgICAgICAgICAgIG1pbjogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1heDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRNb2RlOiAhMCxcclxuICAgICAgICAgICAgICAgIGF1dG9Vbm1hc2s6ICExLFxyXG4gICAgICAgICAgICAgICAgdW5tYXNrQXNOdW1iZXI6ICExLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcIm51bWVyaWNcIixcclxuICAgICAgICAgICAgICAgIHByZVZhbGlkYXRpb246IGZ1bmN0aW9uKGJ1ZmZlciwgcG9zLCBjLCBpc1NlbGVjdGlvbiwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcIi1cIiA9PT0gYyB8fCBjID09PSBvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250KSByZXR1cm4gITAgPT09IG9wdHMuYWxsb3dNaW51cyAmJiAob3B0cy5pc05lZ2F0aXZlID0gb3B0cy5pc05lZ2F0aXZlID09PSB1bmRlZmluZWQgfHwgIW9wdHMuaXNOZWdhdGl2ZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgXCJcIiA9PT0gYnVmZmVyLmpvaW4oXCJcIikgfHwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldDogcG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3Bvc3Q6ICEwXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCExID09PSBpc1NlbGVjdGlvbiAmJiBjID09PSBvcHRzLnJhZGl4UG9pbnQgJiYgb3B0cy5kaWdpdHMgIT09IHVuZGVmaW5lZCAmJiAoaXNOYU4ob3B0cy5kaWdpdHMpIHx8IHBhcnNlSW50KG9wdHMuZGlnaXRzKSA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYWRpeFBvcyA9ICQuaW5BcnJheShvcHRzLnJhZGl4UG9pbnQsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gcmFkaXhQb3MpIHJldHVybiAhMCA9PT0gb3B0cy5udW1lcmljSW5wdXQgPyBwb3MgPT09IHJhZGl4UG9zIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXQ6IHJhZGl4UG9zICsgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcG9zdFZhbGlkYXRpb246IGZ1bmN0aW9uKGJ1ZmZlciwgY3VycmVudFJlc3VsdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWZmaXggPSBvcHRzLnN1ZmZpeC5zcGxpdChcIlwiKSwgcHJlZml4ID0gb3B0cy5wcmVmaXguc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZXN1bHQucG9zID09PSB1bmRlZmluZWQgJiYgY3VycmVudFJlc3VsdC5jYXJldCAhPT0gdW5kZWZpbmVkICYmICEwICE9PSBjdXJyZW50UmVzdWx0LmRvcG9zdCkgcmV0dXJuIGN1cnJlbnRSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zID0gY3VycmVudFJlc3VsdC5jYXJldCAhPT0gdW5kZWZpbmVkID8gY3VycmVudFJlc3VsdC5jYXJldCA6IGN1cnJlbnRSZXN1bHQucG9zLCBtYXNrZWRWYWx1ZSA9IGJ1ZmZlci5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMubnVtZXJpY0lucHV0ICYmIChjYXJldFBvcyA9IG1hc2tlZFZhbHVlLmxlbmd0aCAtIGNhcmV0UG9zIC0gMSwgbWFza2VkVmFsdWUgPSBtYXNrZWRWYWx1ZS5yZXZlcnNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQXRQb3MgPSBtYXNrZWRWYWx1ZVtjYXJldFBvc107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJBdFBvcyA9PT0gb3B0cy5ncm91cFNlcGFyYXRvciAmJiAoY2hhckF0UG9zID0gbWFza2VkVmFsdWVbY2FyZXRQb3MgKz0gMV0pLCBcclxuICAgICAgICAgICAgICAgICAgICBjYXJldFBvcyA9PT0gbWFza2VkVmFsdWUubGVuZ3RoIC0gb3B0cy5zdWZmaXgubGVuZ3RoIC0gMSAmJiBjaGFyQXRQb3MgPT09IG9wdHMucmFkaXhQb2ludCkgcmV0dXJuIGN1cnJlbnRSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhckF0UG9zICE9PSB1bmRlZmluZWQgJiYgY2hhckF0UG9zICE9PSBvcHRzLnJhZGl4UG9pbnQgJiYgY2hhckF0UG9zICE9PSBvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250ICYmIGNoYXJBdFBvcyAhPT0gb3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrICYmIChtYXNrZWRWYWx1ZVtjYXJldFBvc10gPSBcIj9cIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5wcmVmaXgubGVuZ3RoID4gMCAmJiBjYXJldFBvcyA+PSAoITEgPT09IG9wdHMuaXNOZWdhdGl2ZSA/IDEgOiAwKSAmJiBjYXJldFBvcyA8IG9wdHMucHJlZml4Lmxlbmd0aCAtIDEgKyAoITEgPT09IG9wdHMuaXNOZWdhdGl2ZSA/IDEgOiAwKSA/IHByZWZpeFtjYXJldFBvcyAtICghMSA9PT0gb3B0cy5pc05lZ2F0aXZlID8gMSA6IDApXSA9IFwiP1wiIDogb3B0cy5zdWZmaXgubGVuZ3RoID4gMCAmJiBjYXJldFBvcyA+PSBtYXNrZWRWYWx1ZS5sZW5ndGggLSBvcHRzLnN1ZmZpeC5sZW5ndGggLSAoITEgPT09IG9wdHMuaXNOZWdhdGl2ZSA/IDEgOiAwKSAmJiAoc3VmZml4W2NhcmV0UG9zIC0gKG1hc2tlZFZhbHVlLmxlbmd0aCAtIG9wdHMuc3VmZml4Lmxlbmd0aCAtICghMSA9PT0gb3B0cy5pc05lZ2F0aXZlID8gMSA6IDApKV0gPSBcIj9cIikpLCBcclxuICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBwcmVmaXguam9pbihcIlwiKSwgc3VmZml4ID0gc3VmZml4LmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2Nlc3NWYWx1ZSA9IG1hc2tlZFZhbHVlLmpvaW4oXCJcIikucmVwbGFjZShwcmVmaXgsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUucmVwbGFjZShzdWZmaXgsIFwiXCIpLCBwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLmdyb3VwU2VwYXJhdG9yKSwgXCJnXCIpLCBcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChcIlstXCIgKyBJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5uZWdhdGlvblN5bWJvbC5mcm9udCkgKyBcIl1cIiwgXCJnXCIpLCBcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrKSArIFwiJFwiKSwgXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTmFOKG9wdHMucGxhY2Vob2xkZXIpICYmIChwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLnBsYWNlaG9sZGVyKSwgXCJnXCIpLCBcIlwiKSksIFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NWYWx1ZS5sZW5ndGggPiAxICYmIDEgIT09IHByb2Nlc3NWYWx1ZS5pbmRleE9mKG9wdHMucmFkaXhQb2ludCkgJiYgKFwiMFwiID09PSBjaGFyQXRQb3MgJiYgKHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXBsYWNlKC9eXFw/L2csIFwiXCIpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UoL14wL2csIFwiXCIpKSwgcHJvY2Vzc1ZhbHVlLmNoYXJBdCgwKSA9PT0gb3B0cy5yYWRpeFBvaW50ICYmIFwiXCIgIT09IG9wdHMucmFkaXhQb2ludCAmJiAhMCAhPT0gb3B0cy5udW1lcmljSW5wdXQgJiYgKHByb2Nlc3NWYWx1ZSA9IFwiMFwiICsgcHJvY2Vzc1ZhbHVlKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgXCJcIiAhPT0gcHJvY2Vzc1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUuc3BsaXQoXCJcIiksICghb3B0cy5kaWdpdHNPcHRpb25hbCB8fCBvcHRzLmVuZm9yY2VEaWdpdHNPbkJsdXIgJiYgXCJibHVyXCIgPT09IGN1cnJlbnRSZXN1bHQuZXZlbnQpICYmIGlzRmluaXRlKG9wdHMuZGlnaXRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl4UG9zaXRpb24gPSAkLmluQXJyYXkob3B0cy5yYWRpeFBvaW50LCBwcm9jZXNzVmFsdWUpLCBycGIgPSAkLmluQXJyYXkob3B0cy5yYWRpeFBvaW50LCBtYXNrZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSA9PT0gcmFkaXhQb3NpdGlvbiAmJiAocHJvY2Vzc1ZhbHVlLnB1c2gob3B0cy5yYWRpeFBvaW50KSwgcmFkaXhQb3NpdGlvbiA9IHByb2Nlc3NWYWx1ZS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IG9wdHMuZGlnaXRzOyBpKyspIG9wdHMuZGlnaXRzT3B0aW9uYWwgJiYgKCFvcHRzLmVuZm9yY2VEaWdpdHNPbkJsdXIgfHwgXCJibHVyXCIgIT09IGN1cnJlbnRSZXN1bHQuZXZlbnQpIHx8IHByb2Nlc3NWYWx1ZVtyYWRpeFBvc2l0aW9uICsgaV0gIT09IHVuZGVmaW5lZCAmJiBwcm9jZXNzVmFsdWVbcmFkaXhQb3NpdGlvbiArIGldICE9PSBvcHRzLnBsYWNlaG9sZGVyLmNoYXJBdCgwKSA/IC0xICE9PSBycGIgJiYgbWFza2VkVmFsdWVbcnBiICsgaV0gIT09IHVuZGVmaW5lZCAmJiAocHJvY2Vzc1ZhbHVlW3JhZGl4UG9zaXRpb24gKyBpXSA9IHByb2Nlc3NWYWx1ZVtyYWRpeFBvc2l0aW9uICsgaV0gfHwgbWFza2VkVmFsdWVbcnBiICsgaV0pIDogcHJvY2Vzc1ZhbHVlW3JhZGl4UG9zaXRpb24gKyBpXSA9IGN1cnJlbnRSZXN1bHQucGxhY2Vob2xkZXIgfHwgb3B0cy5wbGFjZWhvbGRlci5jaGFyQXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEwICE9PSBvcHRzLmF1dG9Hcm91cCB8fCBcIlwiID09PSBvcHRzLmdyb3VwU2VwYXJhdG9yIHx8IGNoYXJBdFBvcyA9PT0gb3B0cy5yYWRpeFBvaW50ICYmIGN1cnJlbnRSZXN1bHQucG9zID09PSB1bmRlZmluZWQgJiYgIWN1cnJlbnRSZXN1bHQuZG9wb3N0KSBwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUuam9pbihcIlwiKTsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkUmFkaXggPSBwcm9jZXNzVmFsdWVbcHJvY2Vzc1ZhbHVlLmxlbmd0aCAtIDFdID09PSBvcHRzLnJhZGl4UG9pbnQgJiYgY3VycmVudFJlc3VsdC5jID09PSBvcHRzLnJhZGl4UG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzVmFsdWUgPSBJbnB1dG1hc2soZnVuY3Rpb24oYnVmZmVyLCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RNYXNrID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zdE1hc2sgKz0gXCIoXCIgKyBvcHRzLmdyb3VwU2VwYXJhdG9yICsgXCIqe1wiICsgb3B0cy5ncm91cFNpemUgKyBcIn0peyp9XCIsIFwiXCIgIT09IG9wdHMucmFkaXhQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaXhTcGxpdCA9IGJ1ZmZlci5qb2luKFwiXCIpLnNwbGl0KG9wdHMucmFkaXhQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl4U3BsaXRbMV0gJiYgKHBvc3RNYXNrICs9IG9wdHMucmFkaXhQb2ludCArIFwiKntcIiArIHJhZGl4U3BsaXRbMV0ubWF0Y2goL15cXGQqXFw/P1xcZCovKVswXS5sZW5ndGggKyBcIn1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0TWFzaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0ocHJvY2Vzc1ZhbHVlLCBvcHRzKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWVyaWNJbnB1dDogITAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaml0TWFza2luZzogITAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIqXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogXCJbMC05P11cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mb3JtYXQocHJvY2Vzc1ZhbHVlLmpvaW4oXCJcIikpLCBhZGRSYWRpeCAmJiAocHJvY2Vzc1ZhbHVlICs9IG9wdHMucmFkaXhQb2ludCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlLmNoYXJBdCgwKSA9PT0gb3B0cy5ncm91cFNlcGFyYXRvciAmJiBwcm9jZXNzVmFsdWUuc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmlzTmVnYXRpdmUgJiYgXCJibHVyXCIgPT09IGN1cnJlbnRSZXN1bHQuZXZlbnQgJiYgKG9wdHMuaXNOZWdhdGl2ZSA9IFwiMFwiICE9PSBwcm9jZXNzVmFsdWUpLCBcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzVmFsdWUgPSBwcmVmaXggKyBwcm9jZXNzVmFsdWUsIHByb2Nlc3NWYWx1ZSArPSBzdWZmaXgsIG9wdHMuaXNOZWdhdGl2ZSAmJiAocHJvY2Vzc1ZhbHVlID0gb3B0cy5uZWdhdGlvblN5bWJvbC5mcm9udCArIHByb2Nlc3NWYWx1ZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlICs9IG9wdHMubmVnYXRpb25TeW1ib2wuYmFjayksIHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5zcGxpdChcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhckF0UG9zICE9PSB1bmRlZmluZWQpIGlmIChjaGFyQXRQb3MgIT09IG9wdHMucmFkaXhQb2ludCAmJiBjaGFyQXRQb3MgIT09IG9wdHMubmVnYXRpb25TeW1ib2wuZnJvbnQgJiYgY2hhckF0UG9zICE9PSBvcHRzLm5lZ2F0aW9uU3ltYm9sLmJhY2spIChjYXJldFBvcyA9ICQuaW5BcnJheShcIj9cIiwgcHJvY2Vzc1ZhbHVlKSkgPiAtMSA/IHByb2Nlc3NWYWx1ZVtjYXJldFBvc10gPSBjaGFyQXRQb3MgOiBjYXJldFBvcyA9IGN1cnJlbnRSZXN1bHQuY2FyZXQgfHwgMDsgZWxzZSBpZiAoY2hhckF0UG9zID09PSBvcHRzLnJhZGl4UG9pbnQgfHwgY2hhckF0UG9zID09PSBvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250IHx8IGNoYXJBdFBvcyA9PT0gb3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdDYXJldFBvcyA9ICQuaW5BcnJheShjaGFyQXRQb3MsIHByb2Nlc3NWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSBuZXdDYXJldFBvcyAmJiAoY2FyZXRQb3MgPSBuZXdDYXJldFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMubnVtZXJpY0lucHV0ICYmIChjYXJldFBvcyA9IHByb2Nlc3NWYWx1ZS5sZW5ndGggLSBjYXJldFBvcyAtIDEsIHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXZlcnNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByc2x0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldDogY2hhckF0UG9zID09PSB1bmRlZmluZWQgfHwgY3VycmVudFJlc3VsdC5wb3MgIT09IHVuZGVmaW5lZCA/IGNhcmV0UG9zICsgKG9wdHMubnVtZXJpY0lucHV0ID8gLTEgOiAxKSA6IGNhcmV0UG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHByb2Nlc3NWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZyb21CdWZmZXI6IGN1cnJlbnRSZXN1bHQuZG9wb3N0IHx8IGJ1ZmZlci5qb2luKFwiXCIpICE9PSBwcm9jZXNzVmFsdWUuam9pbihcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzbHQucmVmcmVzaEZyb21CdWZmZXIgPyByc2x0IDogY3VycmVudFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkJlZm9yZVdyaXRlOiBmdW5jdGlvbihlLCBidWZmZXIsIGNhcmV0UG9zLCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHN3aXRjaCAoZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwia2V5ZG93blwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5wb3N0VmFsaWRhdGlvbihidWZmZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0OiBjYXJldFBvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvcG9zdDogITBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3B0cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJsdXJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja3ZhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5tYXNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdW5jdGlvbihvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLnBhcnNlTWluTWF4T3B0aW9ucyA9PT0gdW5kZWZpbmVkICYmIChudWxsICE9PSBvcHRzLm1pbiAmJiAob3B0cy5taW4gPSBvcHRzLm1pbi50b1N0cmluZygpLnJlcGxhY2UobmV3IFJlZ0V4cChJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5ncm91cFNlcGFyYXRvciksIFwiZ1wiKSwgXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIsXCIgPT09IG9wdHMucmFkaXhQb2ludCAmJiAob3B0cy5taW4gPSBvcHRzLm1pbi5yZXBsYWNlKG9wdHMucmFkaXhQb2ludCwgXCIuXCIpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm1pbiA9IGlzRmluaXRlKG9wdHMubWluKSA/IHBhcnNlRmxvYXQob3B0cy5taW4pIDogTmFOLCBpc05hTihvcHRzLm1pbikgJiYgKG9wdHMubWluID0gTnVtYmVyLk1JTl9WQUxVRSkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG9wdHMubWF4ICYmIChvcHRzLm1heCA9IG9wdHMubWF4LnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLmdyb3VwU2VwYXJhdG9yKSwgXCJnXCIpLCBcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIixcIiA9PT0gb3B0cy5yYWRpeFBvaW50ICYmIChvcHRzLm1heCA9IG9wdHMubWF4LnJlcGxhY2Uob3B0cy5yYWRpeFBvaW50LCBcIi5cIikpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMubWF4ID0gaXNGaW5pdGUob3B0cy5tYXgpID8gcGFyc2VGbG9hdChvcHRzLm1heCkgOiBOYU4sIGlzTmFOKG9wdHMubWF4KSAmJiAob3B0cy5tYXggPSBOdW1iZXIuTUFYX1ZBTFVFKSksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5wYXJzZU1pbk1heE9wdGlvbnMgPSBcImRvbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0ob3B0cyksIG51bGwgIT09IG9wdHMubWluIHx8IG51bGwgIT09IG9wdHMubWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5tYXNrZWQgPSBvcHRzLm9uVW5NYXNrKGJ1ZmZlci5qb2luKFwiXCIpLCB1bmRlZmluZWQsICQuZXh0ZW5kKHt9LCBvcHRzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5tYXNrQXNOdW1iZXI6ICEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIG51bGwgIT09IG9wdHMubWluICYmIHVubWFza2VkIDwgb3B0cy5taW4pIHJldHVybiBvcHRzLmlzTmVnYXRpdmUgPSBvcHRzLm1pbiA8IDAsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5wb3N0VmFsaWRhdGlvbihvcHRzLm1pbi50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIG9wdHMucmFkaXhQb2ludCkuc3BsaXQoXCJcIiksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldDogY2FyZXRQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9wb3N0OiAhMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG9wdHMubWF4ICYmIHVubWFza2VkID4gb3B0cy5tYXgpIHJldHVybiBvcHRzLmlzTmVnYXRpdmUgPSBvcHRzLm1heCA8IDAsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5wb3N0VmFsaWRhdGlvbihvcHRzLm1heC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIG9wdHMucmFkaXhQb2ludCkuc3BsaXQoXCJcIiksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldDogY2FyZXRQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9wb3N0OiAhMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRzLnBvc3RWYWxpZGF0aW9uKGJ1ZmZlciwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXQ6IGNhcmV0UG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IFwiYmx1clwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJfY2hlY2t2YWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0OiBjYXJldFBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWdleDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVnZXJQYXJ0OiBmdW5jdGlvbihvcHRzLCBlbXB0eUNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNoZWNrID8gbmV3IFJlZ0V4cChcIltcIiArIElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250KSArIFwiK10/XCIpIDogbmV3IFJlZ0V4cChcIltcIiArIElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250KSArIFwiK10/XFxcXGQrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdlck5QYXJ0OiBmdW5jdGlvbihvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiW1xcXFxkXCIgKyBJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5ncm91cFNlcGFyYXRvcikgKyBJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5wbGFjZWhvbGRlci5jaGFyQXQoMCkpICsgXCJdK1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIn5cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKGNocnMsIG1hc2tzZXQsIHBvcywgc3RyaWN0LCBvcHRzLCBpc1NlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBzdHJpY3QgPyBuZXcgUmVnRXhwKFwiWzAtOVwiICsgSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KG9wdHMuZ3JvdXBTZXBhcmF0b3IpICsgXCJdXCIpLnRlc3QoY2hycykgOiBuZXcgUmVnRXhwKFwiWzAtOV1cIikudGVzdChjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghMCA9PT0gaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghMCAhPT0gb3B0cy5udW1lcmljSW5wdXQgJiYgbWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NdICE9PSB1bmRlZmluZWQgJiYgXCJ+XCIgPT09IG1hc2tzZXQudmFsaWRQb3NpdGlvbnNbcG9zXS5tYXRjaC5kZWYgJiYgIWlzU2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9jZXNzVmFsdWUgPSBtYXNrc2V0LmJ1ZmZlci5qb2luKFwiXCIpLCBwdlJhZGl4U3BsaXQgPSAocHJvY2Vzc1ZhbHVlID0gKHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJbLVwiICsgSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KG9wdHMubmVnYXRpb25TeW1ib2wuZnJvbnQpICsgXCJdXCIsIFwiZ1wiKSwgXCJcIikpLnJlcGxhY2UobmV3IFJlZ0V4cChJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrKSArIFwiJFwiKSwgXCJcIikpLnNwbGl0KG9wdHMucmFkaXhQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB2UmFkaXhTcGxpdC5sZW5ndGggPiAxICYmIChwdlJhZGl4U3BsaXRbMV0gPSBwdlJhZGl4U3BsaXRbMV0ucmVwbGFjZSgvMC9nLCBvcHRzLnBsYWNlaG9sZGVyLmNoYXJBdCgwKSkpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIwXCIgPT09IHB2UmFkaXhTcGxpdFswXSAmJiAocHZSYWRpeFNwbGl0WzBdID0gcHZSYWRpeFNwbGl0WzBdLnJlcGxhY2UoLzAvZywgb3B0cy5wbGFjZWhvbGRlci5jaGFyQXQoMCkpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NWYWx1ZSA9IHB2UmFkaXhTcGxpdFswXSArIG9wdHMucmFkaXhQb2ludCArIHB2UmFkaXhTcGxpdFsxXSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyVGVtcGxhdGUgPSBtYXNrc2V0Ll9idWZmZXIuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwcm9jZXNzVmFsdWUgPT09IG9wdHMucmFkaXhQb2ludCAmJiAocHJvY2Vzc1ZhbHVlID0gYnVmZmVyVGVtcGxhdGUpOyBudWxsID09PSBwcm9jZXNzVmFsdWUubWF0Y2goSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KGJ1ZmZlclRlbXBsYXRlKSArIFwiJFwiKTsgKSBidWZmZXJUZW1wbGF0ZSA9IGJ1ZmZlclRlbXBsYXRlLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gKHByb2Nlc3NWYWx1ZSA9IChwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUucmVwbGFjZShidWZmZXJUZW1wbGF0ZSwgXCJcIikpLnNwbGl0KFwiXCIpKVtwb3NdID09PSB1bmRlZmluZWQgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZTogcG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBzdHJpY3QgfHwgY2hycyAhPT0gb3B0cy5yYWRpeFBvaW50IHx8IG1hc2tzZXQudmFsaWRQb3NpdGlvbnNbcG9zIC0gMV0gIT09IHVuZGVmaW5lZCB8fCAobWFza3NldC5idWZmZXJbcG9zXSA9IFwiMFwiLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3MgKyAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbGl0eTogMVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCIrXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuYWxsb3dNaW51cyAmJiAoXCItXCIgPT09IGNocnMgfHwgY2hycyA9PT0gb3B0cy5uZWdhdGlvblN5bWJvbC5mcm9udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCItXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuYWxsb3dNaW51cyAmJiBjaHJzID09PSBvcHRzLm5lZ2F0aW9uU3ltYm9sLmJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCI6XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl4ID0gXCJbXCIgKyBJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5yYWRpeFBvaW50KSArIFwiXVwiLCBpc1ZhbGlkID0gbmV3IFJlZ0V4cChyYWRpeCkudGVzdChjaHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkICYmIG1hc2tzZXQudmFsaWRQb3NpdGlvbnNbcG9zXSAmJiBtYXNrc2V0LnZhbGlkUG9zaXRpb25zW3Bvc10ubWF0Y2gucGxhY2Vob2xkZXIgPT09IG9wdHMucmFkaXhQb2ludCAmJiAoaXNWYWxpZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldDogcG9zICsgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGlzVmFsaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogZnVuY3Rpb24ob3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMucmFkaXhQb2ludDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVuTWFzazogZnVuY3Rpb24obWFza2VkVmFsdWUsIHVubWFza2VkVmFsdWUsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJcIiA9PT0gdW5tYXNrZWRWYWx1ZSAmJiAhMCA9PT0gb3B0cy5udWxsYWJsZSkgcmV0dXJuIHVubWFza2VkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2Nlc3NWYWx1ZSA9IG1hc2tlZFZhbHVlLnJlcGxhY2Uob3B0cy5wcmVmaXgsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZXNzVmFsdWUgPSBwcm9jZXNzVmFsdWUucmVwbGFjZShvcHRzLnN1ZmZpeCwgXCJcIiksIHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KG9wdHMuZ3JvdXBTZXBhcmF0b3IpLCBcImdcIiksIFwiXCIpLCBcclxuICAgICAgICAgICAgICAgICAgICBcIlwiICE9PSBvcHRzLnBsYWNlaG9sZGVyLmNoYXJBdCgwKSAmJiAocHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChvcHRzLnBsYWNlaG9sZGVyLmNoYXJBdCgwKSwgXCJnXCIpLCBcIjBcIikpLCBcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLnVubWFza0FzTnVtYmVyID8gKFwiXCIgIT09IG9wdHMucmFkaXhQb2ludCAmJiAtMSAhPT0gcHJvY2Vzc1ZhbHVlLmluZGV4T2Yob3B0cy5yYWRpeFBvaW50KSAmJiAocHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UoSW5wdXRtYXNrLmVzY2FwZVJlZ2V4LmNhbGwodGhpcywgb3B0cy5yYWRpeFBvaW50KSwgXCIuXCIpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChcIl5cIiArIElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLm5lZ2F0aW9uU3ltYm9sLmZyb250KSksIFwiLVwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrKSArIFwiJFwiKSwgXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIE51bWJlcihwcm9jZXNzVmFsdWUpKSA6IHByb2Nlc3NWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlOiBmdW5jdGlvbihidWZmZXIsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFza2VkVmFsdWUgPSBidWZmZXIuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLnNsaWNlKCkuam9pbihcIlwiKSAhPT0gbWFza2VkVmFsdWUpIHJldHVybiAhMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc1ZhbHVlID0gbWFza2VkVmFsdWUucmVwbGFjZShvcHRzLnByZWZpeCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXBsYWNlKG9wdHMuc3VmZml4LCBcIlwiKSwgcHJvY2Vzc1ZhbHVlID0gcHJvY2Vzc1ZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChJbnB1dG1hc2suZXNjYXBlUmVnZXgob3B0cy5ncm91cFNlcGFyYXRvciksIFwiZ1wiKSwgXCJcIiksIFxyXG4gICAgICAgICAgICAgICAgICAgIFwiLFwiID09PSBvcHRzLnJhZGl4UG9pbnQgJiYgKHByb2Nlc3NWYWx1ZSA9IHByb2Nlc3NWYWx1ZS5yZXBsYWNlKElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLnJhZGl4UG9pbnQpLCBcIi5cIikpLCBcclxuICAgICAgICAgICAgICAgICAgICBpc0Zpbml0ZShwcm9jZXNzVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQmVmb3JlTWFzazogZnVuY3Rpb24oaW5pdGlhbFZhbHVlLCBvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuaXNOZWdhdGl2ZSA9IHVuZGVmaW5lZCwgaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnRvU3RyaW5nKCkuY2hhckF0KGluaXRpYWxWYWx1ZS5sZW5ndGggLSAxKSA9PT0gb3B0cy5yYWRpeFBvaW50ID8gaW5pdGlhbFZhbHVlLnRvU3RyaW5nKCkuc3Vic3RyKDAsIGluaXRpYWxWYWx1ZS5sZW5ndGggLSAxKSA6IGluaXRpYWxWYWx1ZS50b1N0cmluZygpLCBcclxuICAgICAgICAgICAgICAgICAgICBcIlwiICE9PSBvcHRzLnJhZGl4UG9pbnQgJiYgaXNGaW5pdGUoaW5pdGlhbFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdnMgPSBpbml0aWFsVmFsdWUuc3BsaXQoXCIuXCIpLCBncm91cFNpemUgPSBcIlwiICE9PSBvcHRzLmdyb3VwU2VwYXJhdG9yID8gcGFyc2VJbnQob3B0cy5ncm91cFNpemUpIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMiA9PT0gdnMubGVuZ3RoICYmICh2c1swXS5sZW5ndGggPiBncm91cFNpemUgfHwgdnNbMV0ubGVuZ3RoID4gZ3JvdXBTaXplIHx8IHZzWzBdLmxlbmd0aCA8PSBncm91cFNpemUgJiYgdnNbMV0ubGVuZ3RoIDwgZ3JvdXBTaXplKSAmJiAoaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoXCIuXCIsIG9wdHMucmFkaXhQb2ludCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIga29tbWFNYXRjaGVzID0gaW5pdGlhbFZhbHVlLm1hdGNoKC8sL2cpLCBkb3RNYXRjaGVzID0gaW5pdGlhbFZhbHVlLm1hdGNoKC9cXC4vZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWYWx1ZSA9IGRvdE1hdGNoZXMgJiYga29tbWFNYXRjaGVzID8gZG90TWF0Y2hlcy5sZW5ndGggPiBrb21tYU1hdGNoZXMubGVuZ3RoID8gKGluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZS5yZXBsYWNlKC9cXC4vZywgXCJcIikpLnJlcGxhY2UoXCIsXCIsIG9wdHMucmFkaXhQb2ludCkgOiBrb21tYU1hdGNoZXMubGVuZ3RoID4gZG90TWF0Y2hlcy5sZW5ndGggPyAoaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoLywvZywgXCJcIikpLnJlcGxhY2UoXCIuXCIsIG9wdHMucmFkaXhQb2ludCkgOiBpbml0aWFsVmFsdWUuaW5kZXhPZihcIi5cIikgPCBpbml0aWFsVmFsdWUuaW5kZXhPZihcIixcIikgPyBpbml0aWFsVmFsdWUucmVwbGFjZSgvXFwuL2csIFwiXCIpIDogaW5pdGlhbFZhbHVlLnJlcGxhY2UoLywvZywgXCJcIikgOiBpbml0aWFsVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKElucHV0bWFzay5lc2NhcGVSZWdleChvcHRzLmdyb3VwU2VwYXJhdG9yKSwgXCJnXCIpLCBcIlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgMCA9PT0gb3B0cy5kaWdpdHMgJiYgKC0xICE9PSBpbml0aWFsVmFsdWUuaW5kZXhPZihcIi5cIikgPyBpbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWUuc3Vic3RyaW5nKDAsIGluaXRpYWxWYWx1ZS5pbmRleE9mKFwiLlwiKSkgOiAtMSAhPT0gaW5pdGlhbFZhbHVlLmluZGV4T2YoXCIsXCIpICYmIChpbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWUuc3Vic3RyaW5nKDAsIGluaXRpYWxWYWx1ZS5pbmRleE9mKFwiLFwiKSkpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgXCJcIiAhPT0gb3B0cy5yYWRpeFBvaW50ICYmIGlzRmluaXRlKG9wdHMuZGlnaXRzKSAmJiAtMSAhPT0gaW5pdGlhbFZhbHVlLmluZGV4T2Yob3B0cy5yYWRpeFBvaW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjUGFydCA9IGluaXRpYWxWYWx1ZS5zcGxpdChvcHRzLnJhZGl4UG9pbnQpWzFdLm1hdGNoKG5ldyBSZWdFeHAoXCJcXFxcZCpcIikpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQob3B0cy5kaWdpdHMpIDwgZGVjUGFydC50b1N0cmluZygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpZ2l0c0ZhY3RvciA9IE1hdGgucG93KDEwLCBwYXJzZUludChvcHRzLmRpZ2l0cykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoSW5wdXRtYXNrLmVzY2FwZVJlZ2V4KG9wdHMucmFkaXhQb2ludCksIFwiLlwiKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWUgPSAoaW5pdGlhbFZhbHVlID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGluaXRpYWxWYWx1ZSkgKiBkaWdpdHNGYWN0b3IpIC8gZGlnaXRzRmFjdG9yKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIG9wdHMucmFkaXhQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYW5DbGVhclBvc2l0aW9uOiBmdW5jdGlvbihtYXNrc2V0LCBwb3NpdGlvbiwgbHZwLCBzdHJpY3QsIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdnAgPSBtYXNrc2V0LnZhbGlkUG9zaXRpb25zW3Bvc2l0aW9uXSwgY2FuQ2xlYXIgPSB2cC5pbnB1dCAhPT0gb3B0cy5yYWRpeFBvaW50IHx8IG51bGwgIT09IG1hc2tzZXQudmFsaWRQb3NpdGlvbnNbcG9zaXRpb25dLm1hdGNoLmZuICYmICExID09PSBvcHRzLmRlY2ltYWxQcm90ZWN0IHx8IHZwLmlucHV0ID09PSBvcHRzLnJhZGl4UG9pbnQgJiYgbWFza3NldC52YWxpZFBvc2l0aW9uc1twb3NpdGlvbiArIDFdICYmIG51bGwgPT09IG1hc2tzZXQudmFsaWRQb3NpdGlvbnNbcG9zaXRpb24gKyAxXS5tYXRjaC5mbiB8fCBpc0Zpbml0ZSh2cC5pbnB1dCkgfHwgcG9zaXRpb24gPT09IGx2cCB8fCB2cC5pbnB1dCA9PT0gb3B0cy5ncm91cFNlcGFyYXRvciB8fCB2cC5pbnB1dCA9PT0gb3B0cy5uZWdhdGlvblN5bWJvbC5mcm9udCB8fCB2cC5pbnB1dCA9PT0gb3B0cy5uZWdhdGlvblN5bWJvbC5iYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhY2FuQ2xlYXIgfHwgXCIrXCIgIT09IHZwLm1hdGNoLm5hdGl2ZURlZiAmJiBcIi1cIiAhPT0gdnAubWF0Y2gubmF0aXZlRGVmIHx8IChvcHRzLmlzTmVnYXRpdmUgPSAhMSksIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkNsZWFyO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZSwgYnVmZmVyLCBjYXJldFBvcywgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIElucHV0bWFzay5rZXlDb2RlLlVQOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQudmFsKHBhcnNlRmxvYXQodGhpcy5pbnB1dG1hc2sudW5tYXNrZWR2YWx1ZSgpKSArIHBhcnNlSW50KG9wdHMuc3RlcCkpLCAkaW5wdXQudHJpZ2dlcihcInNldHZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIElucHV0bWFzay5rZXlDb2RlLkRPV046XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwocGFyc2VGbG9hdCh0aGlzLmlucHV0bWFzay51bm1hc2tlZHZhbHVlKCkpIC0gcGFyc2VJbnQob3B0cy5zdGVwKSksICRpbnB1dC50cmlnZ2VyKFwic2V0dmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjdXJyZW5jeToge1xyXG4gICAgICAgICAgICAgICAgcHJlZml4OiBcIiQgXCIsXHJcbiAgICAgICAgICAgICAgICBncm91cFNlcGFyYXRvcjogXCIsXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJudW1lcmljXCIsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCIwXCIsXHJcbiAgICAgICAgICAgICAgICBhdXRvR3JvdXA6ICEwLFxyXG4gICAgICAgICAgICAgICAgZGlnaXRzOiAyLFxyXG4gICAgICAgICAgICAgICAgZGlnaXRzT3B0aW9uYWw6ICExLFxyXG4gICAgICAgICAgICAgICAgY2xlYXJNYXNrT25Mb3N0Rm9jdXM6ICExXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlY2ltYWw6IHtcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcIm51bWVyaWNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpbnRlZ2VyOiB7XHJcbiAgICAgICAgICAgICAgICBhbGlhczogXCJudW1lcmljXCIsXHJcbiAgICAgICAgICAgICAgICBkaWdpdHM6IDAsXHJcbiAgICAgICAgICAgICAgICByYWRpeFBvaW50OiBcIlwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHtcclxuICAgICAgICAgICAgICAgIGFsaWFzOiBcIm51bWVyaWNcIixcclxuICAgICAgICAgICAgICAgIGRpZ2l0czogMixcclxuICAgICAgICAgICAgICAgIGRpZ2l0c09wdGlvbmFsOiAhMCxcclxuICAgICAgICAgICAgICAgIHJhZGl4UG9pbnQ6IFwiLlwiLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiMFwiLFxyXG4gICAgICAgICAgICAgICAgYXV0b0dyb3VwOiAhMSxcclxuICAgICAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgICAgIG1heDogMTAwLFxyXG4gICAgICAgICAgICAgICAgc3VmZml4OiBcIiAlXCIsXHJcbiAgICAgICAgICAgICAgICBhbGxvd01pbnVzOiAhMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSksIElucHV0bWFzaztcclxuICAgIH0pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XHJcbiAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7XHJcbiAgICAhZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gICAgICAgIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMSkgXSwgXHJcbiAgICAgICAgdm9pZCAwICE9PSAoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSBmYWN0b3J5KSA/IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXykgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pO1xyXG4gICAgfShmdW5jdGlvbigkLCBJbnB1dG1hc2spIHtcclxuICAgICAgICBmdW5jdGlvbiBtYXNrU29ydChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXNrYSA9IChhLm1hc2sgfHwgYSkucmVwbGFjZSgvIy9nLCBcIjlcIikucmVwbGFjZSgvXFwpLywgXCI5XCIpLnJlcGxhY2UoL1srKCkjLV0vZywgXCJcIiksIG1hc2tiID0gKGIubWFzayB8fCBiKS5yZXBsYWNlKC8jL2csIFwiOVwiKS5yZXBsYWNlKC9cXCkvLCBcIjlcIikucmVwbGFjZSgvWysoKSMtXS9nLCBcIlwiKSwgbWFza2FzID0gKGEubWFzayB8fCBhKS5zcGxpdChcIiNcIilbMF0sIG1hc2ticyA9IChiLm1hc2sgfHwgYikuc3BsaXQoXCIjXCIpWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gbWFza2JzLmluZGV4T2YobWFza2FzKSA/IC0xIDogMCA9PT0gbWFza2FzLmluZGV4T2YobWFza2JzKSA/IDEgOiBtYXNrYS5sb2NhbGVDb21wYXJlKG1hc2tiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFuYWx5c2VNYXNrQmFzZSA9IElucHV0bWFzay5wcm90b3R5cGUuYW5hbHlzZU1hc2s7XHJcbiAgICAgICAgcmV0dXJuIElucHV0bWFzay5wcm90b3R5cGUuYW5hbHlzZU1hc2sgPSBmdW5jdGlvbihtYXNrLCByZWdleE1hc2ssIG9wdHMpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVkdWNlVmFyaWF0aW9ucyhtYXNrcywgcHJldmlvdXNWYXJpYXRpb24sIHByZXZpb3VzbWFza0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhcmlhdGlvbiA9IHByZXZpb3VzVmFyaWF0aW9uIHx8IFwiXCIsIHByZXZpb3VzbWFza0dyb3VwID0gcHJldmlvdXNtYXNrR3JvdXAgfHwgbWFza0dyb3VwcywgXHJcbiAgICAgICAgICAgICAgICBcIlwiICE9PSBwcmV2aW91c1ZhcmlhdGlvbiAmJiAocHJldmlvdXNtYXNrR3JvdXBbcHJldmlvdXNWYXJpYXRpb25dID0ge30pO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdmFyaWF0aW9uID0gXCJcIiwgbWFza0dyb3VwID0gcHJldmlvdXNtYXNrR3JvdXBbcHJldmlvdXNWYXJpYXRpb25dIHx8IHByZXZpb3VzbWFza0dyb3VwLCBpID0gbWFza3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIG1hc2tHcm91cFt2YXJpYXRpb24gPSAobWFzayA9IG1hc2tzW2ldLm1hc2sgfHwgbWFza3NbaV0pLnN1YnN0cigwLCAxKV0gPSBtYXNrR3JvdXBbdmFyaWF0aW9uXSB8fCBbXSwgXHJcbiAgICAgICAgICAgICAgICBtYXNrR3JvdXBbdmFyaWF0aW9uXS51bnNoaWZ0KG1hc2suc3Vic3RyKDEpKSwgbWFza3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmR4IGluIG1hc2tHcm91cCkgbWFza0dyb3VwW25keF0ubGVuZ3RoID4gNTAwICYmIHJlZHVjZVZhcmlhdGlvbnMobWFza0dyb3VwW25keF0uc2xpY2UoKSwgbmR4LCBtYXNrR3JvdXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlYnVpbGQobWFza0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFzayA9IFwiXCIsIHN1Ym1hc2tzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZHggaW4gbWFza0dyb3VwKSAkLmlzQXJyYXkobWFza0dyb3VwW25keF0pID8gMSA9PT0gbWFza0dyb3VwW25keF0ubGVuZ3RoID8gc3VibWFza3MucHVzaChuZHggKyBtYXNrR3JvdXBbbmR4XSkgOiBzdWJtYXNrcy5wdXNoKG5keCArIG9wdHMuZ3JvdXBtYXJrZXIuc3RhcnQgKyBtYXNrR3JvdXBbbmR4XS5qb2luKG9wdHMuZ3JvdXBtYXJrZXIuZW5kICsgb3B0cy5hbHRlcm5hdG9ybWFya2VyICsgb3B0cy5ncm91cG1hcmtlci5zdGFydCkgKyBvcHRzLmdyb3VwbWFya2VyLmVuZCkgOiBzdWJtYXNrcy5wdXNoKG5keCArIHJlYnVpbGQobWFza0dyb3VwW25keF0pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSBzdWJtYXNrcy5sZW5ndGggPyBtYXNrICs9IHN1Ym1hc2tzWzBdIDogbWFzayArPSBvcHRzLmdyb3VwbWFya2VyLnN0YXJ0ICsgc3VibWFza3Muam9pbihvcHRzLmdyb3VwbWFya2VyLmVuZCArIG9wdHMuYWx0ZXJuYXRvcm1hcmtlciArIG9wdHMuZ3JvdXBtYXJrZXIuc3RhcnQpICsgb3B0cy5ncm91cG1hcmtlci5lbmQsIFxyXG4gICAgICAgICAgICAgICAgbWFzaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWFza0dyb3VwcyA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gb3B0cy5waG9uZUNvZGVzICYmIChvcHRzLnBob25lQ29kZXMgJiYgb3B0cy5waG9uZUNvZGVzLmxlbmd0aCA+IDFlMyAmJiAocmVkdWNlVmFyaWF0aW9ucygobWFzayA9IG1hc2suc3Vic3RyKDEsIG1hc2subGVuZ3RoIC0gMikpLnNwbGl0KG9wdHMuZ3JvdXBtYXJrZXIuZW5kICsgb3B0cy5hbHRlcm5hdG9ybWFya2VyICsgb3B0cy5ncm91cG1hcmtlci5zdGFydCkpLCBcclxuICAgICAgICAgICAgbWFzayA9IHJlYnVpbGQobWFza0dyb3VwcykpLCBtYXNrID0gbWFzay5yZXBsYWNlKC85L2csIFwiXFxcXDlcIikpLCBhbmFseXNlTWFza0Jhc2UuY2FsbCh0aGlzLCBtYXNrLCByZWdleE1hc2ssIG9wdHMpO1xyXG4gICAgICAgIH0sIElucHV0bWFzay5leHRlbmRBbGlhc2VzKHtcclxuICAgICAgICAgICAgYWJzdHJhY3RwaG9uZToge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBtYXJrZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogXCI8XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBcIj5cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvdW50cnljb2RlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcGhvbmVDb2RlczogW10sXHJcbiAgICAgICAgICAgICAgICBtYXNrOiBmdW5jdGlvbihvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuZGVmaW5pdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiI1wiOiBJbnB1dG1hc2sucHJvdG90eXBlLmRlZmluaXRpb25zWzldXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0cy5waG9uZUNvZGVzLnNvcnQobWFza1NvcnQpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGtlZXBTdGF0aWM6ICEwLFxyXG4gICAgICAgICAgICAgICAgb25CZWZvcmVNYXNrOiBmdW5jdGlvbih2YWx1ZSwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9jZXNzZWRWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14wezEsMn0vLCBcIlwiKS5yZXBsYWNlKC9bXFxzXS9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHByb2Nlc3NlZFZhbHVlLmluZGV4T2Yob3B0cy5jb3VudHJ5Y29kZSkgPiAxIHx8IC0xID09PSBwcm9jZXNzZWRWYWx1ZS5pbmRleE9mKG9wdHMuY291bnRyeWNvZGUpKSAmJiAocHJvY2Vzc2VkVmFsdWUgPSBcIitcIiArIG9wdHMuY291bnRyeWNvZGUgKyBwcm9jZXNzZWRWYWx1ZSksIFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVW5NYXNrOiBmdW5jdGlvbihtYXNrZWRWYWx1ZSwgdW5tYXNrZWRWYWx1ZSwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXNrZWRWYWx1ZS5yZXBsYWNlKC9bKCkjLV0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcInRlbFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgSW5wdXRtYXNrO1xyXG4gICAgfSk7XHJcbn0sIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXztcclxuICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvcjtcclxuICAgICFmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICAgICAgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFsgX193ZWJwYWNrX3JlcXVpcmVfXygwKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxKSBdLCBcclxuICAgICAgICB2b2lkIDAgIT09IChfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IGZhY3RvcnkpID8gX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyk7XHJcbiAgICB9KGZ1bmN0aW9uKCQsIElucHV0bWFzaykge1xyXG4gICAgICAgIHJldHVybiBJbnB1dG1hc2suZXh0ZW5kQWxpYXNlcyh7XHJcbiAgICAgICAgICAgIFJlZ2V4OiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrOiBcInJcIixcclxuICAgICAgICAgICAgICAgIGdyZWVkeTogITEsXHJcbiAgICAgICAgICAgICAgICByZXBlYXQ6IFwiKlwiLFxyXG4gICAgICAgICAgICAgICAgcmVnZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZWdleFRva2VuczogbnVsbCxcclxuICAgICAgICAgICAgICAgIHRva2VuaXplcjogL1xcW1xcXj9dPyg/OlteXFxcXFxcXV0rfFxcXFxbXFxTXFxzXT8pKl0/fFxcXFwoPzowKD86WzAtM11bMC03XXswLDJ9fFs0LTddWzAtN10/KT98WzEtOV1bMC05XSp8eFswLTlBLUZhLWZdezJ9fHVbMC05QS1GYS1mXXs0fXxjW0EtWmEtel18W1xcU1xcc10/KXxcXCgoPzpcXD9bOj0hXT8pP3woPzpbPyorXXxcXHtbMC05XSsoPzosWzAtOV0qKT9cXH0pXFw/P3xbXi4/KiteJHtbKCl8XFxcXF0rfC4vZyxcclxuICAgICAgICAgICAgICAgIHF1YW50aWZpZXJGaWx0ZXI6IC9bMC05XStbXixdLyxcclxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGU6IGZ1bmN0aW9uKGJ1ZmZlciwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG9wdHMucmVnZXgsIG9wdHMuY2FzaW5nID8gXCJpXCIgOiBcIlwiKS50ZXN0KGJ1ZmZlci5qb2luKFwiXCIpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbihjaHJzLCBtYXNrc2V0LCBwb3MsIHN0cmljdCwgb3B0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUmVnZXhUb2tlbihpc0dyb3VwLCBpc1F1YW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZXMgPSBbXSwgdGhpcy5pc0dyb3VwID0gaXNHcm91cCB8fCAhMSwgdGhpcy5pc1F1YW50aWZpZXIgPSBpc1F1YW50aWZpZXIgfHwgITEsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVhbnRpZmllciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnJlcGVhdGVyUGFydCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUmVnZXhUb2tlbih0b2tlbiwgZnJvbUdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzdmFsaWQgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tR3JvdXAgJiYgKHJlZ2V4UGFydCArPSBcIihcIiwgb3Blbkdyb3VwQ291bnQrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbW5keCA9IDA7IG1uZHggPCB0b2tlbi5tYXRjaGVzLmxlbmd0aDsgbW5keCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaFRva2VuID0gdG9rZW4ubWF0Y2hlc1ttbmR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEwID09PSBtYXRjaFRva2VuLmlzR3JvdXApIGlzdmFsaWQgPSB2YWxpZGF0ZVJlZ2V4VG9rZW4obWF0Y2hUb2tlbiwgITApOyBlbHNlIGlmICghMCA9PT0gbWF0Y2hUb2tlbi5pc1F1YW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcnJudG5keCA9ICQuaW5BcnJheShtYXRjaFRva2VuLCB0b2tlbi5tYXRjaGVzKSwgbWF0Y2hHcm91cCA9IHRva2VuLm1hdGNoZXNbY3JybnRuZHggLSAxXSwgcmVnZXhQYXJ0QmFrID0gcmVnZXhQYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKG1hdGNoVG9rZW4ucXVhbnRpZmllci5tYXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7bWF0Y2hUb2tlbi5yZXBlYXRlclBhcnQgJiYgbWF0Y2hUb2tlbi5yZXBlYXRlclBhcnQgIT09IHJlZ2V4UGFydCAmJiBtYXRjaFRva2VuLnJlcGVhdGVyUGFydC5sZW5ndGggPiByZWdleFBhcnQubGVuZ3RoICYmICEoaXN2YWxpZCA9IHZhbGlkYXRlUmVnZXhUb2tlbihtYXRjaEdyb3VwLCAhMCkpOyApIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXN2YWxpZCA9IGlzdmFsaWQgfHwgdmFsaWRhdGVSZWdleFRva2VuKG1hdGNoR3JvdXAsICEwKSkgJiYgKG1hdGNoVG9rZW4ucmVwZWF0ZXJQYXJ0ID0gcmVnZXhQYXJ0KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhQYXJ0ID0gcmVnZXhQYXJ0QmFrICsgbWF0Y2hUb2tlbi5xdWFudGlmaWVyLm1heDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHFtID0gbWF0Y2hUb2tlbi5xdWFudGlmaWVyLm1heCAtIDE7IGkgPCBxbSAmJiAhKGlzdmFsaWQgPSB2YWxpZGF0ZVJlZ2V4VG9rZW4obWF0Y2hHcm91cCwgITApKTsgaSsrKSA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhQYXJ0ID0gcmVnZXhQYXJ0QmFrICsgXCJ7XCIgKyBtYXRjaFRva2VuLnF1YW50aWZpZXIubWluICsgXCIsXCIgKyBtYXRjaFRva2VuLnF1YW50aWZpZXIubWF4ICsgXCJ9XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodm9pZCAwICE9PSBtYXRjaFRva2VuLm1hdGNoZXMpIGZvciAodmFyIGsgPSAwOyBrIDwgbWF0Y2hUb2tlbi5sZW5ndGggJiYgIShpc3ZhbGlkID0gdmFsaWRhdGVSZWdleFRva2VuKG1hdGNoVG9rZW5ba10sIGZyb21Hcm91cCkpOyBrKyspIDsgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdEV4cDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIltcIiA9PSBtYXRjaFRva2VuLmNoYXJBdCgwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RFeHAgPSByZWdleFBhcnQsIHRlc3RFeHAgKz0gbWF0Y2hUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgb3Blbkdyb3VwQ291bnQ7IGorKykgdGVzdEV4cCArPSBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3ZhbGlkID0gKGV4cCA9IG5ldyBSZWdFeHAoXCJeKFwiICsgdGVzdEV4cCArIFwiKSRcIiwgb3B0cy5jYXNpbmcgPyBcImlcIiA6IFwiXCIpKS50ZXN0KGJ1ZmZlclN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZm9yICh2YXIgbCA9IDAsIHRsID0gbWF0Y2hUb2tlbi5sZW5ndGg7IGwgPCB0bDsgbCsrKSBpZiAoXCJcXFxcXCIgIT09IG1hdGNoVG9rZW4uY2hhckF0KGwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdEV4cCA9IHJlZ2V4UGFydCwgdGVzdEV4cCA9ICh0ZXN0RXhwICs9IG1hdGNoVG9rZW4uc3Vic3RyKDAsIGwgKyAxKSkucmVwbGFjZSgvXFx8JC8sIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3Blbkdyb3VwQ291bnQ7IGorKykgdGVzdEV4cCArPSBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwID0gbmV3IFJlZ0V4cChcIl4oXCIgKyB0ZXN0RXhwICsgXCIpJFwiLCBvcHRzLmNhc2luZyA/IFwiaVwiIDogXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzdmFsaWQgPSBleHAudGVzdChidWZmZXJTdHIpKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4UGFydCArPSBtYXRjaFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3ZhbGlkKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyb21Hcm91cCAmJiAocmVnZXhQYXJ0ICs9IFwiKVwiLCBvcGVuR3JvdXBDb3VudC0tKSwgaXN2YWxpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXJTdHIsIGdyb3VwVG9rZW4sIGNidWZmZXIgPSBtYXNrc2V0LmJ1ZmZlci5zbGljZSgpLCByZWdleFBhcnQgPSBcIlwiLCBpc1ZhbGlkID0gITEsIG9wZW5Hcm91cENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IG9wdHMucmVnZXhUb2tlbnMgJiYgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoLCBtLCBjdXJyZW50VG9rZW4gPSBuZXcgUmVnZXhUb2tlbigpLCBvcGVuZ3JvdXBzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvcHRzLnJlZ2V4VG9rZW5zID0gW107IG1hdGNoID0gb3B0cy50b2tlbml6ZXIuZXhlYyhvcHRzLnJlZ2V4KTsgKSBzd2l0Y2ggKChtID0gbWF0Y2hbMF0pLmNoYXJBdCgwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIihcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Blbmdyb3Vwcy5wdXNoKG5ldyBSZWdleFRva2VuKCEwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIpXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwVG9rZW4gPSBvcGVuZ3JvdXBzLnBvcCgpLCBvcGVuZ3JvdXBzLmxlbmd0aCA+IDAgPyBvcGVuZ3JvdXBzW29wZW5ncm91cHMubGVuZ3RoIC0gMV0ubWF0Y2hlcy5wdXNoKGdyb3VwVG9rZW4pIDogY3VycmVudFRva2VuLm1hdGNoZXMucHVzaChncm91cFRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIntcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVhbnRpZmllclRva2VuID0gbmV3IFJlZ2V4VG9rZW4oITEsICEwKSwgbXEgPSAobSA9IG0ucmVwbGFjZSgvW3t9XS9nLCBcIlwiKSkuc3BsaXQoXCIsXCIpLCBtcTAgPSBpc05hTihtcVswXSkgPyBtcVswXSA6IHBhcnNlSW50KG1xWzBdKSwgbXExID0gMSA9PT0gbXEubGVuZ3RoID8gbXEwIDogaXNOYU4obXFbMV0pID8gbXFbMV0gOiBwYXJzZUludChtcVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWFudGlmaWVyVG9rZW4ucXVhbnRpZmllciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbXEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBtcTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3Blbmdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG9wZW5ncm91cHNbb3Blbmdyb3Vwcy5sZW5ndGggLSAxXS5tYXRjaGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1hdGNoID0gbWF0Y2hlcy5wb3AoKSkuaXNHcm91cCB8fCAoKGdyb3VwVG9rZW4gPSBuZXcgUmVnZXhUb2tlbighMCkpLm1hdGNoZXMucHVzaChtYXRjaCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBncm91cFRva2VuKSwgbWF0Y2hlcy5wdXNoKG1hdGNoKSwgbWF0Y2hlcy5wdXNoKHF1YW50aWZpZXJUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAobWF0Y2ggPSBjdXJyZW50VG9rZW4ubWF0Y2hlcy5wb3AoKSkuaXNHcm91cCB8fCAoKGdyb3VwVG9rZW4gPSBuZXcgUmVnZXhUb2tlbighMCkpLm1hdGNoZXMucHVzaChtYXRjaCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGdyb3VwVG9rZW4pLCBjdXJyZW50VG9rZW4ubWF0Y2hlcy5wdXNoKG1hdGNoKSwgY3VycmVudFRva2VuLm1hdGNoZXMucHVzaChxdWFudGlmaWVyVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuZ3JvdXBzLmxlbmd0aCA+IDAgPyBvcGVuZ3JvdXBzW29wZW5ncm91cHMubGVuZ3RoIC0gMV0ubWF0Y2hlcy5wdXNoKG0pIDogY3VycmVudFRva2VuLm1hdGNoZXMucHVzaChtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRva2VuLm1hdGNoZXMubGVuZ3RoID4gMCAmJiBvcHRzLnJlZ2V4VG9rZW5zLnB1c2goY3VycmVudFRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwgY2J1ZmZlci5zcGxpY2UocG9zLCAwLCBjaHJzKSwgYnVmZmVyU3RyID0gY2J1ZmZlci5qb2luKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRzLnJlZ2V4VG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZ2V4VG9rZW4gPSBvcHRzLnJlZ2V4VG9rZW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkID0gdmFsaWRhdGVSZWdleFRva2VuKHJlZ2V4VG9rZW4sIHJlZ2V4VG9rZW4uaXNHcm91cCkpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSksIElucHV0bWFzaztcclxuICAgIH0pO1xyXG59LCBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18sIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIG9iajtcclxuICAgIH0gOiBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xyXG4gICAgfTtcclxuICAgICFmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICAgICAgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFsgX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxKSBdLCBcclxuICAgICAgICB2b2lkIDAgIT09IChfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IGZhY3RvcnkpID8gX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyk7XHJcbiAgICB9KGZ1bmN0aW9uKCQsIElucHV0bWFzaykge1xyXG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09ICQuZm4uaW5wdXRtYXNrICYmICgkLmZuLmlucHV0bWFzayA9IGZ1bmN0aW9uKGZuLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBucHRtYXNrLCBpbnB1dCA9IHRoaXNbMF07XHJcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMgJiYgKG9wdGlvbnMgPSB7fSksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGZuKSBzd2l0Y2ggKGZuKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSBcInVubWFza2VkdmFsdWVcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dCAmJiBpbnB1dC5pbnB1dG1hc2sgPyBpbnB1dC5pbnB1dG1hc2sudW5tYXNrZWR2YWx1ZSgpIDogJChpbnB1dCkudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgXCJyZW1vdmVcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dG1hc2sgJiYgdGhpcy5pbnB1dG1hc2sucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgY2FzZSBcImdldGVtcHR5bWFza1wiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0ICYmIGlucHV0LmlucHV0bWFzayA/IGlucHV0LmlucHV0bWFzay5nZXRlbXB0eW1hc2soKSA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgXCJoYXNNYXNrZWRWYWx1ZVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEoIWlucHV0IHx8ICFpbnB1dC5pbnB1dG1hc2spICYmIGlucHV0LmlucHV0bWFzay5oYXNNYXNrZWRWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwiaXNDb21wbGV0ZVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFpbnB1dCB8fCAhaW5wdXQuaW5wdXRtYXNrIHx8IGlucHV0LmlucHV0bWFzay5pc0NvbXBsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgIGNhc2UgXCJnZXRtZXRhZGF0YVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0ICYmIGlucHV0LmlucHV0bWFzayA/IGlucHV0LmlucHV0bWFzay5nZXRtZXRhZGF0YSgpIDogdm9pZCAwO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwic2V0dmFsdWVcIjpcclxuICAgICAgICAgICAgICAgICQoaW5wdXQpLnZhbChvcHRpb25zKSwgaW5wdXQgJiYgdm9pZCAwID09PSBpbnB1dC5pbnB1dG1hc2sgJiYgJChpbnB1dCkudHJpZ2dlckhhbmRsZXIoXCJzZXR2YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIFwib3B0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2Ygb3B0aW9ucykgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLmlucHV0bWFzaykgcmV0dXJuIHRoaXMuaW5wdXRtYXNrLm9wdGlvbihvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0ICYmIHZvaWQgMCAhPT0gaW5wdXQuaW5wdXRtYXNrKSByZXR1cm4gaW5wdXQuaW5wdXRtYXNrLm9wdGlvbihvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuYWxpYXMgPSBmbiwgbnB0bWFzayA9IG5ldyBJbnB1dG1hc2sob3B0aW9ucyksIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBucHRtYXNrLm1hc2sodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChcIm9iamVjdFwiID09ICh2b2lkIDAgPT09IGZuID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZm4pKSkgcmV0dXJuIG5wdG1hc2sgPSBuZXcgSW5wdXRtYXNrKGZuKSwgXHJcbiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGZuLm1hc2sgJiYgdm9pZCAwID09PSBmbi5hbGlhcyA/IHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLmlucHV0bWFzaykgcmV0dXJuIHRoaXMuaW5wdXRtYXNrLm9wdGlvbihmbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbnB0bWFzay5tYXNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSkgOiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnB0bWFzay5tYXNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBmbikgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAobnB0bWFzayA9IG5ldyBJbnB1dG1hc2sob3B0aW9ucykpLm1hc2sodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCAkLmZuLmlucHV0bWFzaztcclxuICAgIH0pO1xyXG59IF0pOyIsIi8vIGpRdWVyeSBNYXNrIFBsdWdpbiB2MS4xNC4xNVxyXG4vLyBnaXRodWIuY29tL2lnb3Jlc2NvYmFyL2pRdWVyeS1NYXNrLVBsdWdpblxyXG52YXIgJGpzY29tcD17c2NvcGU6e30sZmluZEludGVybmFsOmZ1bmN0aW9uKGEsbCxkKXthIGluc3RhbmNlb2YgU3RyaW5nJiYoYT1TdHJpbmcoYSkpO2Zvcih2YXIgcD1hLmxlbmd0aCxoPTA7aDxwO2grKyl7dmFyIGI9YVtoXTtpZihsLmNhbGwoZCxiLGgsYSkpcmV0dXJue2k6aCx2OmJ9fXJldHVybntpOi0xLHY6dm9pZCAwfX19OyRqc2NvbXAuZGVmaW5lUHJvcGVydHk9XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsbCxkKXtpZihkLmdldHx8ZC5zZXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkVTMyBkb2VzIG5vdCBzdXBwb3J0IGdldHRlcnMgYW5kIHNldHRlcnMuXCIpO2EhPUFycmF5LnByb3RvdHlwZSYmYSE9T2JqZWN0LnByb3RvdHlwZSYmKGFbbF09ZC52YWx1ZSl9O1xyXG4kanNjb21wLmdldEdsb2JhbD1mdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c9PT1hP2E6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDphfTskanNjb21wLmdsb2JhbD0kanNjb21wLmdldEdsb2JhbCh0aGlzKTskanNjb21wLnBvbHlmaWxsPWZ1bmN0aW9uKGEsbCxkLHApe2lmKGwpe2Q9JGpzY29tcC5nbG9iYWw7YT1hLnNwbGl0KFwiLlwiKTtmb3IocD0wO3A8YS5sZW5ndGgtMTtwKyspe3ZhciBoPWFbcF07aCBpbiBkfHwoZFtoXT17fSk7ZD1kW2hdfWE9YVthLmxlbmd0aC0xXTtwPWRbYV07bD1sKHApO2whPXAmJm51bGwhPWwmJiRqc2NvbXAuZGVmaW5lUHJvcGVydHkoZCxhLHtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bH0pfX07XHJcbiRqc2NvbXAucG9seWZpbGwoXCJBcnJheS5wcm90b3R5cGUuZmluZFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oYSxkKXtyZXR1cm4gJGpzY29tcC5maW5kSW50ZXJuYWwodGhpcyxhLGQpLnZ9fSxcImVzNi1pbXBsXCIsXCJlczNcIik7XHJcbihmdW5jdGlvbihhLGwsZCl7XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hKHJlcXVpcmUoXCJqcXVlcnlcIikpOmEobHx8ZCl9KShmdW5jdGlvbihhKXt2YXIgbD1mdW5jdGlvbihiLGUsZil7dmFyIGM9e2ludmFsaWQ6W10sZ2V0Q2FyZXQ6ZnVuY3Rpb24oKXt0cnl7dmFyIGEscj0wLGc9Yi5nZXQoMCksZT1kb2N1bWVudC5zZWxlY3Rpb24sZj1nLnNlbGVjdGlvblN0YXJ0O2lmKGUmJi0xPT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgMTBcIikpYT1lLmNyZWF0ZVJhbmdlKCksYS5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwtYy52YWwoKS5sZW5ndGgpLHI9YS50ZXh0Lmxlbmd0aDtlbHNlIGlmKGZ8fFwiMFwiPT09ZilyPWY7cmV0dXJuIHJ9Y2F0Y2goQyl7fX0sc2V0Q2FyZXQ6ZnVuY3Rpb24oYSl7dHJ5e2lmKGIuaXMoXCI6Zm9jdXNcIikpe3ZhciBjLFxyXG5nPWIuZ2V0KDApO2cuc2V0U2VsZWN0aW9uUmFuZ2U/Zy5zZXRTZWxlY3Rpb25SYW5nZShhLGEpOihjPWcuY3JlYXRlVGV4dFJhbmdlKCksYy5jb2xsYXBzZSghMCksYy5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsYSksYy5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIixhKSxjLnNlbGVjdCgpKX19Y2F0Y2goQil7fX0sZXZlbnRzOmZ1bmN0aW9uKCl7Yi5vbihcImtleWRvd24ubWFza1wiLGZ1bmN0aW9uKGEpe2IuZGF0YShcIm1hc2sta2V5Y29kZVwiLGEua2V5Q29kZXx8YS53aGljaCk7Yi5kYXRhKFwibWFzay1wcmV2aXVzLXZhbHVlXCIsYi52YWwoKSk7Yi5kYXRhKFwibWFzay1wcmV2aXVzLWNhcmV0LXBvc1wiLGMuZ2V0Q2FyZXQoKSk7Yy5tYXNrRGlnaXRQb3NNYXBPbGQ9Yy5tYXNrRGlnaXRQb3NNYXB9KS5vbihhLmpNYXNrR2xvYmFscy51c2VJbnB1dD9cImlucHV0Lm1hc2tcIjpcImtleXVwLm1hc2tcIixjLmJlaGF2aW91cikub24oXCJwYXN0ZS5tYXNrIGRyb3AubWFza1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2Iua2V5ZG93bigpLmtleXVwKCl9LFxyXG4xMDApfSkub24oXCJjaGFuZ2UubWFza1wiLGZ1bmN0aW9uKCl7Yi5kYXRhKFwiY2hhbmdlZFwiLCEwKX0pLm9uKFwiYmx1ci5tYXNrXCIsZnVuY3Rpb24oKXtkPT09Yy52YWwoKXx8Yi5kYXRhKFwiY2hhbmdlZFwiKXx8Yi50cmlnZ2VyKFwiY2hhbmdlXCIpO2IuZGF0YShcImNoYW5nZWRcIiwhMSl9KS5vbihcImJsdXIubWFza1wiLGZ1bmN0aW9uKCl7ZD1jLnZhbCgpfSkub24oXCJmb2N1cy5tYXNrXCIsZnVuY3Rpb24oYil7ITA9PT1mLnNlbGVjdE9uRm9jdXMmJmEoYi50YXJnZXQpLnNlbGVjdCgpfSkub24oXCJmb2N1c291dC5tYXNrXCIsZnVuY3Rpb24oKXtmLmNsZWFySWZOb3RNYXRjaCYmIWgudGVzdChjLnZhbCgpKSYmYy52YWwoXCJcIil9KX0sZ2V0UmVnZXhNYXNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGIsYyxmLG4sZD0wO2Q8ZS5sZW5ndGg7ZCsrKShiPW0udHJhbnNsYXRpb25bZS5jaGFyQXQoZCldKT8oYz1iLnBhdHRlcm4udG9TdHJpbmcoKS5yZXBsYWNlKC8uezF9JHxeLnsxfS9nLFwiXCIpLGY9Yi5vcHRpb25hbCxcclxuKGI9Yi5yZWN1cnNpdmUpPyhhLnB1c2goZS5jaGFyQXQoZCkpLG49e2RpZ2l0OmUuY2hhckF0KGQpLHBhdHRlcm46Y30pOmEucHVzaChmfHxiP2MrXCI/XCI6YykpOmEucHVzaChlLmNoYXJBdChkKS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csXCJcXFxcJCZcIikpO2E9YS5qb2luKFwiXCIpO24mJihhPWEucmVwbGFjZShuZXcgUmVnRXhwKFwiKFwiK24uZGlnaXQrXCIoLipcIituLmRpZ2l0K1wiKT8pXCIpLFwiKCQxKT9cIikucmVwbGFjZShuZXcgUmVnRXhwKG4uZGlnaXQsXCJnXCIpLG4ucGF0dGVybikpO3JldHVybiBuZXcgUmVnRXhwKGEpfSxkZXN0cm95RXZlbnRzOmZ1bmN0aW9uKCl7Yi5vZmYoXCJpbnB1dCBrZXlkb3duIGtleXVwIHBhc3RlIGRyb3AgYmx1ciBmb2N1c291dCBcIi5zcGxpdChcIiBcIikuam9pbihcIi5tYXNrIFwiKSl9LHZhbDpmdW5jdGlvbihhKXt2YXIgYz1iLmlzKFwiaW5wdXRcIik/XCJ2YWxcIjpcInRleHRcIjtpZigwPGFyZ3VtZW50cy5sZW5ndGgpe2lmKGJbY10oKSE9PWEpYltjXShhKTtcclxuYz1ifWVsc2UgYz1iW2NdKCk7cmV0dXJuIGN9LGNhbGN1bGF0ZUNhcmV0UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT1iLmRhdGEoXCJtYXNrLXByZXZpdXMtdmFsdWVcIil8fFwiXCIsZT1jLmdldE1hc2tlZCgpLGc9Yy5nZXRDYXJldCgpO2lmKGEhPT1lKXt2YXIgZj1iLmRhdGEoXCJtYXNrLXByZXZpdXMtY2FyZXQtcG9zXCIpfHwwLGU9ZS5sZW5ndGgsZD1hLmxlbmd0aCxtPWE9MCxoPTAsbD0wLGs7Zm9yKGs9ZztrPGUmJmMubWFza0RpZ2l0UG9zTWFwW2tdO2srKyltKys7Zm9yKGs9Zy0xOzA8PWsmJmMubWFza0RpZ2l0UG9zTWFwW2tdO2stLSlhKys7Zm9yKGs9Zy0xOzA8PWs7ay0tKWMubWFza0RpZ2l0UG9zTWFwW2tdJiZoKys7Zm9yKGs9Zi0xOzA8PWs7ay0tKWMubWFza0RpZ2l0UG9zTWFwT2xkW2tdJiZsKys7Zz5kP2c9MTAqZTpmPj1nJiZmIT09ZD9jLm1hc2tEaWdpdFBvc01hcE9sZFtnXXx8KGY9ZyxnPWctKGwtaCktYSxjLm1hc2tEaWdpdFBvc01hcFtnXSYmKGc9ZikpOmc+ZiYmXHJcbihnPWcrKGgtbCkrbSl9cmV0dXJuIGd9LGJlaGF2aW91cjpmdW5jdGlvbihmKXtmPWZ8fHdpbmRvdy5ldmVudDtjLmludmFsaWQ9W107dmFyIGU9Yi5kYXRhKFwibWFzay1rZXljb2RlXCIpO2lmKC0xPT09YS5pbkFycmF5KGUsbS5ieVBhc3NLZXlzKSl7dmFyIGU9Yy5nZXRNYXNrZWQoKSxnPWMuZ2V0Q2FyZXQoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5zZXRDYXJldChjLmNhbGN1bGF0ZUNhcmV0UG9zaXRpb24oKSl9LGEuak1hc2tHbG9iYWxzLmtleVN0cm9rZUNvbXBlbnNhdGlvbik7Yy52YWwoZSk7Yy5zZXRDYXJldChnKTtyZXR1cm4gYy5jYWxsYmFja3MoZil9fSxnZXRNYXNrZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgZz1bXSxkPXZvaWQgMD09PWI/Yy52YWwoKTpiK1wiXCIsbj0wLGg9ZS5sZW5ndGgscT0wLGw9ZC5sZW5ndGgsaz0xLHI9XCJwdXNoXCIscD0tMSx0PTAseT1bXSx2LHo7Zi5yZXZlcnNlPyhyPVwidW5zaGlmdFwiLGs9LTEsdj0wLG49aC0xLHE9bC0xLHo9ZnVuY3Rpb24oKXtyZXR1cm4tMTxcclxubiYmLTE8cX0pOih2PWgtMSx6PWZ1bmN0aW9uKCl7cmV0dXJuIG48aCYmcTxsfSk7Zm9yKHZhciBBO3ooKTspe3ZhciB4PWUuY2hhckF0KG4pLHc9ZC5jaGFyQXQocSksdT1tLnRyYW5zbGF0aW9uW3hdO2lmKHUpdy5tYXRjaCh1LnBhdHRlcm4pPyhnW3JdKHcpLHUucmVjdXJzaXZlJiYoLTE9PT1wP3A9bjpuPT09diYmbiE9PXAmJihuPXAtayksdj09PXAmJihuLT1rKSksbis9ayk6dz09PUE/KHQtLSxBPXZvaWQgMCk6dS5vcHRpb25hbD8obis9ayxxLT1rKTp1LmZhbGxiYWNrPyhnW3JdKHUuZmFsbGJhY2spLG4rPWsscS09ayk6Yy5pbnZhbGlkLnB1c2goe3A6cSx2OncsZTp1LnBhdHRlcm59KSxxKz1rO2Vsc2V7aWYoIWEpZ1tyXSh4KTt3PT09eD8oeS5wdXNoKHEpLHErPWspOihBPXgseS5wdXNoKHErdCksdCsrKTtuKz1rfX1kPWUuY2hhckF0KHYpO2ghPT1sKzF8fG0udHJhbnNsYXRpb25bZF18fGcucHVzaChkKTtnPWcuam9pbihcIlwiKTtjLm1hcE1hc2tkaWdpdFBvc2l0aW9ucyhnLFxyXG55LGwpO3JldHVybiBnfSxtYXBNYXNrZGlnaXRQb3NpdGlvbnM6ZnVuY3Rpb24oYSxiLGUpe2E9Zi5yZXZlcnNlP2EubGVuZ3RoLWU6MDtjLm1hc2tEaWdpdFBvc01hcD17fTtmb3IoZT0wO2U8Yi5sZW5ndGg7ZSsrKWMubWFza0RpZ2l0UG9zTWFwW2JbZV0rYV09MX0sY2FsbGJhY2tzOmZ1bmN0aW9uKGEpe3ZhciBoPWMudmFsKCksZz1oIT09ZCxtPVtoLGEsYixmXSxxPWZ1bmN0aW9uKGEsYixjKXtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZlthXSYmYiYmZlthXS5hcHBseSh0aGlzLGMpfTtxKFwib25DaGFuZ2VcIiwhMD09PWcsbSk7cShcIm9uS2V5UHJlc3NcIiwhMD09PWcsbSk7cShcIm9uQ29tcGxldGVcIixoLmxlbmd0aD09PWUubGVuZ3RoLG0pO3EoXCJvbkludmFsaWRcIiwwPGMuaW52YWxpZC5sZW5ndGgsW2gsYSxiLGMuaW52YWxpZCxmXSl9fTtiPWEoYik7dmFyIG09dGhpcyxkPWMudmFsKCksaDtlPVwiZnVuY3Rpb25cIj09PXR5cGVvZiBlP2UoYy52YWwoKSx2b2lkIDAsYixmKTplO20ubWFzaz1cclxuZTttLm9wdGlvbnM9ZjttLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBhPWMuZ2V0Q2FyZXQoKTttLm9wdGlvbnMucGxhY2Vob2xkZXImJmIucmVtb3ZlQXR0cihcInBsYWNlaG9sZGVyXCIpO2IuZGF0YShcIm1hc2stbWF4bGVuZ3RoXCIpJiZiLnJlbW92ZUF0dHIoXCJtYXhsZW5ndGhcIik7Yy5kZXN0cm95RXZlbnRzKCk7Yy52YWwobS5nZXRDbGVhblZhbCgpKTtjLnNldENhcmV0KGEpO3JldHVybiBifTttLmdldENsZWFuVmFsPWZ1bmN0aW9uKCl7cmV0dXJuIGMuZ2V0TWFza2VkKCEwKX07bS5nZXRNYXNrZWRWYWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZ2V0TWFza2VkKCExLGEpfTttLmluaXQ9ZnVuY3Rpb24oZCl7ZD1kfHwhMTtmPWZ8fHt9O20uY2xlYXJJZk5vdE1hdGNoPWEuak1hc2tHbG9iYWxzLmNsZWFySWZOb3RNYXRjaDttLmJ5UGFzc0tleXM9YS5qTWFza0dsb2JhbHMuYnlQYXNzS2V5czttLnRyYW5zbGF0aW9uPWEuZXh0ZW5kKHt9LGEuak1hc2tHbG9iYWxzLnRyYW5zbGF0aW9uLGYudHJhbnNsYXRpb24pO1xyXG5tPWEuZXh0ZW5kKCEwLHt9LG0sZik7aD1jLmdldFJlZ2V4TWFzaygpO2lmKGQpYy5ldmVudHMoKSxjLnZhbChjLmdldE1hc2tlZCgpKTtlbHNle2YucGxhY2Vob2xkZXImJmIuYXR0cihcInBsYWNlaG9sZGVyXCIsZi5wbGFjZWhvbGRlcik7Yi5kYXRhKFwibWFza1wiKSYmYi5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIik7ZD0wO2Zvcih2YXIgbD0hMDtkPGUubGVuZ3RoO2QrKyl7dmFyIGc9bS50cmFuc2xhdGlvbltlLmNoYXJBdChkKV07aWYoZyYmZy5yZWN1cnNpdmUpe2w9ITE7YnJlYWt9fWwmJmIuYXR0cihcIm1heGxlbmd0aFwiLGUubGVuZ3RoKS5kYXRhKFwibWFzay1tYXhsZW5ndGhcIiwhMCk7Yy5kZXN0cm95RXZlbnRzKCk7Yy5ldmVudHMoKTtkPWMuZ2V0Q2FyZXQoKTtjLnZhbChjLmdldE1hc2tlZCgpKTtjLnNldENhcmV0KGQpfX07bS5pbml0KCFiLmlzKFwiaW5wdXRcIikpfTthLm1hc2tXYXRjaGVycz17fTt2YXIgZD1mdW5jdGlvbigpe3ZhciBiPWEodGhpcyksZT17fSxmPWIuYXR0cihcImRhdGEtbWFza1wiKTtcclxuYi5hdHRyKFwiZGF0YS1tYXNrLXJldmVyc2VcIikmJihlLnJldmVyc2U9ITApO2IuYXR0cihcImRhdGEtbWFzay1jbGVhcmlmbm90bWF0Y2hcIikmJihlLmNsZWFySWZOb3RNYXRjaD0hMCk7XCJ0cnVlXCI9PT1iLmF0dHIoXCJkYXRhLW1hc2stc2VsZWN0b25mb2N1c1wiKSYmKGUuc2VsZWN0T25Gb2N1cz0hMCk7aWYocChiLGYsZSkpcmV0dXJuIGIuZGF0YShcIm1hc2tcIixuZXcgbCh0aGlzLGYsZSkpfSxwPWZ1bmN0aW9uKGIsZSxmKXtmPWZ8fHt9O3ZhciBjPWEoYikuZGF0YShcIm1hc2tcIiksZD1KU09OLnN0cmluZ2lmeTtiPWEoYikudmFsKCl8fGEoYikudGV4dCgpO3RyeXtyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgZSYmKGU9ZShiKSksXCJvYmplY3RcIiE9PXR5cGVvZiBjfHxkKGMub3B0aW9ucykhPT1kKGYpfHxjLm1hc2shPT1lfWNhdGNoKHQpe319LGg9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkO2E9XCJvblwiK2E7ZD1hIGluIGI7ZHx8KGIuc2V0QXR0cmlidXRlKGEsXHJcblwicmV0dXJuO1wiKSxkPVwiZnVuY3Rpb25cIj09PXR5cGVvZiBiW2FdKTtyZXR1cm4gZH07YS5mbi5tYXNrPWZ1bmN0aW9uKGIsZCl7ZD1kfHx7fTt2YXIgZT10aGlzLnNlbGVjdG9yLGM9YS5qTWFza0dsb2JhbHMsaD1jLndhdGNoSW50ZXJ2YWwsYz1kLndhdGNoSW5wdXRzfHxjLndhdGNoSW5wdXRzLHQ9ZnVuY3Rpb24oKXtpZihwKHRoaXMsYixkKSlyZXR1cm4gYSh0aGlzKS5kYXRhKFwibWFza1wiLG5ldyBsKHRoaXMsYixkKSl9O2EodGhpcykuZWFjaCh0KTtlJiZcIlwiIT09ZSYmYyYmKGNsZWFySW50ZXJ2YWwoYS5tYXNrV2F0Y2hlcnNbZV0pLGEubWFza1dhdGNoZXJzW2VdPXNldEludGVydmFsKGZ1bmN0aW9uKCl7YShkb2N1bWVudCkuZmluZChlKS5lYWNoKHQpfSxoKSk7cmV0dXJuIHRoaXN9O2EuZm4ubWFza2VkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEoXCJtYXNrXCIpLmdldE1hc2tlZFZhbChhKX07YS5mbi51bm1hc2s9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGEubWFza1dhdGNoZXJzW3RoaXMuc2VsZWN0b3JdKTtcclxuZGVsZXRlIGEubWFza1dhdGNoZXJzW3RoaXMuc2VsZWN0b3JdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLmRhdGEoXCJtYXNrXCIpO2ImJmIucmVtb3ZlKCkucmVtb3ZlRGF0YShcIm1hc2tcIil9KX07YS5mbi5jbGVhblZhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEoXCJtYXNrXCIpLmdldENsZWFuVmFsKCl9O2EuYXBwbHlEYXRhTWFzaz1mdW5jdGlvbihiKXtiPWJ8fGEuak1hc2tHbG9iYWxzLm1hc2tFbGVtZW50czsoYiBpbnN0YW5jZW9mIGE/YjphKGIpKS5maWx0ZXIoYS5qTWFza0dsb2JhbHMuZGF0YU1hc2tBdHRyKS5lYWNoKGQpfTtoPXttYXNrRWxlbWVudHM6XCJpbnB1dCx0ZCxzcGFuLGRpdlwiLGRhdGFNYXNrQXR0cjpcIipbZGF0YS1tYXNrXVwiLGRhdGFNYXNrOiEwLHdhdGNoSW50ZXJ2YWw6MzAwLHdhdGNoSW5wdXRzOiEwLGtleVN0cm9rZUNvbXBlbnNhdGlvbjoxMCx1c2VJbnB1dDohL0Nocm9tZVxcL1syLTRdWzAtOV18U2Ftc3VuZ0Jyb3dzZXIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpJiZcclxuaChcImlucHV0XCIpLHdhdGNoRGF0YU1hc2s6ITEsYnlQYXNzS2V5czpbOSwxNiwxNywxOCwzNiwzNywzOCwzOSw0MCw5MV0sdHJhbnNsYXRpb246ezA6e3BhdHRlcm46L1xcZC99LDk6e3BhdHRlcm46L1xcZC8sb3B0aW9uYWw6ITB9LFwiI1wiOntwYXR0ZXJuOi9cXGQvLHJlY3Vyc2l2ZTohMH0sQTp7cGF0dGVybjovW2EtekEtWjAtOV0vfSxTOntwYXR0ZXJuOi9bYS16QS1aXS99fX07YS5qTWFza0dsb2JhbHM9YS5qTWFza0dsb2JhbHN8fHt9O2g9YS5qTWFza0dsb2JhbHM9YS5leHRlbmQoITAse30saCxhLmpNYXNrR2xvYmFscyk7aC5kYXRhTWFzayYmYS5hcHBseURhdGFNYXNrKCk7c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLmpNYXNrR2xvYmFscy53YXRjaERhdGFNYXNrJiZhLmFwcGx5RGF0YU1hc2soKX0saC53YXRjaEludGVydmFsKX0sd2luZG93LmpRdWVyeSx3aW5kb3cuWmVwdG8pO1xyXG4iLCIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDA3LTIwMTUgQXJpZWwgRmxlc2xlciAtIGFmbGVzbGVyIDAgZ21haWwg77+9IGNvbSB8IGh0dHA6Ly9mbGVzbGVyLmJsb2dzcG90LmNvbVxyXG4gKiBMaWNlbnNlZCB1bmRlciBNSVRcclxuICogQGF1dGhvciBBcmllbCBGbGVzbGVyXHJcbiAqIEB2ZXJzaW9uIDIuMS4zXHJcbiAqL1xyXG47KGZ1bmN0aW9uKGYpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmKTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZihyZXF1aXJlKFwianF1ZXJ5XCIpKTpmKGpRdWVyeSl9KShmdW5jdGlvbigkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGEpe3JldHVybiFhLm5vZGVOYW1lfHwtMSE9PSQuaW5BcnJheShhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksW1wiaWZyYW1lXCIsXCIjZG9jdW1lbnRcIixcImh0bWxcIixcImJvZHlcIl0pfWZ1bmN0aW9uIGgoYSl7cmV0dXJuICQuaXNGdW5jdGlvbihhKXx8JC5pc1BsYWluT2JqZWN0KGEpP2E6e3RvcDphLGxlZnQ6YX19dmFyIHA9JC5zY3JvbGxUbz1mdW5jdGlvbihhLGQsYil7cmV0dXJuICQod2luZG93KS5zY3JvbGxUbyhhLGQsYil9O3AuZGVmYXVsdHM9e2F4aXM6XCJ4eVwiLGR1cmF0aW9uOjAsbGltaXQ6ITB9OyQuZm4uc2Nyb2xsVG89ZnVuY3Rpb24oYSxkLGIpe1wib2JqZWN0XCI9PT0gdHlwZW9mIGQmJihiPWQsZD0wKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYiYmKGI9e29uQWZ0ZXI6Yn0pO1wibWF4XCI9PT1hJiYoYT05RTkpO2I9JC5leHRlbmQoe30scC5kZWZhdWx0cyxiKTtkPWR8fGIuZHVyYXRpb247dmFyIHU9Yi5xdWV1ZSYmMTxiLmF4aXMubGVuZ3RoO3UmJihkLz0yKTtiLm9mZnNldD1oKGIub2Zmc2V0KTtiLm92ZXI9aChiLm92ZXIpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBrKGEpe3ZhciBrPSQuZXh0ZW5kKHt9LGIse3F1ZXVlOiEwLGR1cmF0aW9uOmQsY29tcGxldGU6YSYmZnVuY3Rpb24oKXthLmNhbGwocSxlLGIpfX0pO3IuYW5pbWF0ZShmLGspfWlmKG51bGwhPT1hKXt2YXIgbD1uKHRoaXMpLHE9bD90aGlzLmNvbnRlbnRXaW5kb3d8fHdpbmRvdzp0aGlzLHI9JChxKSxlPWEsZj17fSx0O3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjppZigvXihbKy1dPT8pP1xcZCsoXFwuXFxkKyk/KHB4fCUpPyQvLnRlc3QoZSkpe2U9IGgoZSk7YnJlYWt9ZT1sPyQoZSk6JChlLHEpO2Nhc2UgXCJvYmplY3RcIjppZihlLmxlbmd0aD09PTApcmV0dXJuO2lmKGUuaXN8fGUuc3R5bGUpdD0oZT0kKGUpKS5vZmZzZXQoKX12YXIgdj0kLmlzRnVuY3Rpb24oYi5vZmZzZXQpJiZiLm9mZnNldChxLGUpfHxiLm9mZnNldDskLmVhY2goYi5heGlzLnNwbGl0KFwiXCIpLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9XCJ4XCI9PT1jP1wiTGVmdFwiOlwiVG9wXCIsbT1kLnRvTG93ZXJDYXNlKCksZz1cInNjcm9sbFwiK2QsaD1yW2ddKCksbj1wLm1heChxLGMpO3Q/KGZbZ109dFttXSsobD8wOmgtci5vZmZzZXQoKVttXSksYi5tYXJnaW4mJihmW2ddLT1wYXJzZUludChlLmNzcyhcIm1hcmdpblwiK2QpLDEwKXx8MCxmW2ddLT1wYXJzZUludChlLmNzcyhcImJvcmRlclwiK2QrXCJXaWR0aFwiKSwxMCl8fDApLGZbZ10rPXZbbV18fDAsYi5vdmVyW21dJiYoZltnXSs9ZVtcInhcIj09PWM/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJdKCkqYi5vdmVyW21dKSk6KGQ9ZVttXSxmW2ddPWQuc2xpY2UmJiBcIiVcIj09PWQuc2xpY2UoLTEpP3BhcnNlRmxvYXQoZCkvMTAwKm46ZCk7Yi5saW1pdCYmL15cXGQrJC8udGVzdChmW2ddKSYmKGZbZ109MD49ZltnXT8wOk1hdGgubWluKGZbZ10sbikpOyFhJiYxPGIuYXhpcy5sZW5ndGgmJihoPT09ZltnXT9mPXt9OnUmJihrKGIub25BZnRlckZpcnN0KSxmPXt9KSl9KTtrKGIub25BZnRlcil9fSl9O3AubWF4PWZ1bmN0aW9uKGEsZCl7dmFyIGI9XCJ4XCI9PT1kP1wiV2lkdGhcIjpcIkhlaWdodFwiLGg9XCJzY3JvbGxcIitiO2lmKCFuKGEpKXJldHVybiBhW2hdLSQoYSlbYi50b0xvd2VyQ2FzZSgpXSgpO3ZhciBiPVwiY2xpZW50XCIrYixrPWEub3duZXJEb2N1bWVudHx8YS5kb2N1bWVudCxsPWsuZG9jdW1lbnRFbGVtZW50LGs9ay5ib2R5O3JldHVybiBNYXRoLm1heChsW2hdLGtbaF0pLU1hdGgubWluKGxbYl0sa1tiXSl9OyQuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9JC5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuICQoYS5lbGVtKVthLnByb3BdKCl9LCBzZXQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5nZXQoYSk7aWYoYS5vcHRpb25zLmludGVycnVwdCYmYS5fbGFzdCYmYS5fbGFzdCE9PWQpcmV0dXJuICQoYS5lbGVtKS5zdG9wKCk7dmFyIGI9TWF0aC5yb3VuZChhLm5vdyk7ZCE9PWImJigkKGEuZWxlbSlbYS5wcm9wXShiKSxhLl9sYXN0PXRoaXMuZ2V0KGEpKX19O3JldHVybiBwfSk7IiwiLyohIENvcHlyaWdodCAoYykgMjAxMSBQaW90ciBSb2NoYWxhIChodHRwOi8vcm9jaGEubGEpXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXHJcbiAqIGFuZCBHUEwgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvZ3BsLWxpY2Vuc2UucGhwKSBsaWNlbnNlcy5cclxuICpcclxuICogVmVyc2lvbjogMS4zLjIgKG1vZGlmaWVkIGZvciBmdWxscGFnZS5qcylcclxuICpcclxuICovXHJcbihmdW5jdGlvbihmKXtqUXVlcnkuZm4uZXh0ZW5kKHtzbGltU2Nyb2xsOmZ1bmN0aW9uKGcpe3ZhciBhPWYuZXh0ZW5kKHt3aWR0aDpcImF1dG9cIixoZWlnaHQ6XCIyNTBweFwiLHNpemU6XCI3cHhcIixjb2xvcjpcIiMwMDBcIixwb3NpdGlvbjpcInJpZ2h0XCIsZGlzdGFuY2U6XCIxcHhcIixzdGFydDpcInRvcFwiLG9wYWNpdHk6LjQsYWx3YXlzVmlzaWJsZTohMSxkaXNhYmxlRmFkZU91dDohMSxyYWlsVmlzaWJsZTohMSxyYWlsQ29sb3I6XCIjMzMzXCIscmFpbE9wYWNpdHk6LjIscmFpbERyYWdnYWJsZTohMCxyYWlsQ2xhc3M6XCJzbGltU2Nyb2xsUmFpbFwiLGJhckNsYXNzOlwic2xpbVNjcm9sbEJhclwiLHdyYXBwZXJDbGFzczpcInNsaW1TY3JvbGxEaXZcIixhbGxvd1BhZ2VTY3JvbGw6ITEsd2hlZWxTdGVwOjIwLHRvdWNoU2Nyb2xsU3RlcDoyMDAsYm9yZGVyUmFkaXVzOlwiN3B4XCIscmFpbEJvcmRlclJhZGl1czpcIjdweFwifSxnKTt0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBzKGQpe2Q9ZHx8d2luZG93LmV2ZW50O1xyXG52YXIgYz0wO2Qud2hlZWxEZWx0YSYmKGM9LWQud2hlZWxEZWx0YS8xMjApO2QuZGV0YWlsJiYoYz1kLmRldGFpbC8zKTtmKGQudGFyZ2V0fHxkLnNyY1RhcmdldHx8ZC5zcmNFbGVtZW50KS5jbG9zZXN0KFwiLlwiK2Eud3JhcHBlckNsYXNzKS5pcyhiLnBhcmVudCgpKSYmbShjLCEwKTtkLnByZXZlbnREZWZhdWx0JiYhayYmZC5wcmV2ZW50RGVmYXVsdCgpO2t8fChkLnJldHVyblZhbHVlPSExKX1mdW5jdGlvbiBtKGQsZixnKXtrPSExO3ZhciBlPWQsaD1iLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpO2YmJihlPXBhcnNlSW50KGMuY3NzKFwidG9wXCIpKStkKnBhcnNlSW50KGEud2hlZWxTdGVwKS8xMDAqYy5vdXRlckhlaWdodCgpLGU9TWF0aC5taW4oTWF0aC5tYXgoZSwwKSxoKSxlPTA8ZD9NYXRoLmNlaWwoZSk6TWF0aC5mbG9vcihlKSxjLmNzcyh7dG9wOmUrXCJweFwifSkpO2w9cGFyc2VJbnQoYy5jc3MoXCJ0b3BcIikpLyhiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpKTtcclxuZT1sKihiWzBdLnNjcm9sbEhlaWdodC1iLm91dGVySGVpZ2h0KCkpO2cmJihlPWQsZD1lL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSxkPU1hdGgubWluKE1hdGgubWF4KGQsMCksaCksYy5jc3Moe3RvcDpkK1wicHhcIn0pKTtiLnNjcm9sbFRvcChlKTtiLnRyaWdnZXIoXCJzbGltc2Nyb2xsaW5nXCIsfn5lKTt1KCk7cCgpfWZ1bmN0aW9uIEMoKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj8odGhpcy5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIixzLCExKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIscywhMSkpOmRvY3VtZW50LmF0dGFjaEV2ZW50KFwib25tb3VzZXdoZWVsXCIscyl9ZnVuY3Rpb24gdigpe3I9TWF0aC5tYXgoYi5vdXRlckhlaWdodCgpL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSxEKTtjLmNzcyh7aGVpZ2h0OnIrXCJweFwifSk7dmFyIGE9cj09Yi5vdXRlckhlaWdodCgpP1wibm9uZVwiOlwiYmxvY2tcIjtjLmNzcyh7ZGlzcGxheTphfSl9XHJcbmZ1bmN0aW9uIHUoKXt2KCk7Y2xlYXJUaW1lb3V0KEEpO2w9PX5+bD8oaz1hLmFsbG93UGFnZVNjcm9sbCxCIT1sJiZiLnRyaWdnZXIoXCJzbGltc2Nyb2xsXCIsMD09fn5sP1widG9wXCI6XCJib3R0b21cIikpOms9ITE7Qj1sO3I+PWIub3V0ZXJIZWlnaHQoKT9rPSEwOihjLnN0b3AoITAsITApLmZhZGVJbihcImZhc3RcIiksYS5yYWlsVmlzaWJsZSYmaC5zdG9wKCEwLCEwKS5mYWRlSW4oXCJmYXN0XCIpKX1mdW5jdGlvbiBwKCl7YS5hbHdheXNWaXNpYmxlfHwoQT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5kaXNhYmxlRmFkZU91dCYmd3x8eHx8eXx8KGMuZmFkZU91dChcInNsb3dcIiksaC5mYWRlT3V0KFwic2xvd1wiKSl9LDFFMykpfXZhciB3LHgseSxBLHoscixsLEIsRD0zMCxrPSExLGI9Zih0aGlzKTtpZihiLnBhcmVudCgpLmhhc0NsYXNzKGEud3JhcHBlckNsYXNzKSl7dmFyIG49Yi5zY3JvbGxUb3AoKSxjPWIucGFyZW50KCkuZmluZChcIi5cIithLmJhckNsYXNzKSxoPWIucGFyZW50KCkuZmluZChcIi5cIitcclxuYS5yYWlsQ2xhc3MpO3YoKTtpZihmLmlzUGxhaW5PYmplY3QoZykpe2lmKFwiaGVpZ2h0XCJpbiBnJiZcImF1dG9cIj09Zy5oZWlnaHQpe2IucGFyZW50KCkuY3NzKFwiaGVpZ2h0XCIsXCJhdXRvXCIpO2IuY3NzKFwiaGVpZ2h0XCIsXCJhdXRvXCIpO3ZhciBxPWIucGFyZW50KCkucGFyZW50KCkuaGVpZ2h0KCk7Yi5wYXJlbnQoKS5jc3MoXCJoZWlnaHRcIixxKTtiLmNzcyhcImhlaWdodFwiLHEpfWlmKFwic2Nyb2xsVG9cImluIGcpbj1wYXJzZUludChhLnNjcm9sbFRvKTtlbHNlIGlmKFwic2Nyb2xsQnlcImluIGcpbis9cGFyc2VJbnQoYS5zY3JvbGxCeSk7ZWxzZSBpZihcImRlc3Ryb3lcImluIGcpe2MucmVtb3ZlKCk7aC5yZW1vdmUoKTtiLnVud3JhcCgpO3JldHVybn1tKG4sITEsITApfX1lbHNle2EuaGVpZ2h0PVwiYXV0b1wiPT1nLmhlaWdodD9iLnBhcmVudCgpLmhlaWdodCgpOmcuaGVpZ2h0O249ZihcIjxkaXY+PC9kaXY+XCIpLmFkZENsYXNzKGEud3JhcHBlckNsYXNzKS5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIixcclxub3ZlcmZsb3c6XCJoaWRkZW5cIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO2IuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0fSk7dmFyIGg9ZihcIjxkaXY+PC9kaXY+XCIpLmFkZENsYXNzKGEucmFpbENsYXNzKS5jc3Moe3dpZHRoOmEuc2l6ZSxoZWlnaHQ6XCIxMDAlXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGRpc3BsYXk6YS5hbHdheXNWaXNpYmxlJiZhLnJhaWxWaXNpYmxlP1wiYmxvY2tcIjpcIm5vbmVcIixcImJvcmRlci1yYWRpdXNcIjphLnJhaWxCb3JkZXJSYWRpdXMsYmFja2dyb3VuZDphLnJhaWxDb2xvcixvcGFjaXR5OmEucmFpbE9wYWNpdHksekluZGV4OjkwfSksYz1mKFwiPGRpdj48L2Rpdj5cIikuYWRkQ2xhc3MoYS5iYXJDbGFzcykuY3NzKHtiYWNrZ3JvdW5kOmEuY29sb3Isd2lkdGg6YS5zaXplLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxvcGFjaXR5OmEub3BhY2l0eSxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZT9cclxuXCJibG9ja1wiOlwibm9uZVwiLFwiYm9yZGVyLXJhZGl1c1wiOmEuYm9yZGVyUmFkaXVzLEJvcmRlclJhZGl1czphLmJvcmRlclJhZGl1cyxNb3pCb3JkZXJSYWRpdXM6YS5ib3JkZXJSYWRpdXMsV2Via2l0Qm9yZGVyUmFkaXVzOmEuYm9yZGVyUmFkaXVzLHpJbmRleDo5OX0pLHE9XCJyaWdodFwiPT1hLnBvc2l0aW9uP3tyaWdodDphLmRpc3RhbmNlfTp7bGVmdDphLmRpc3RhbmNlfTtoLmNzcyhxKTtjLmNzcyhxKTtiLndyYXAobik7Yi5wYXJlbnQoKS5hcHBlbmQoYyk7Yi5wYXJlbnQoKS5hcHBlbmQoaCk7YS5yYWlsRHJhZ2dhYmxlJiZjLmJpbmQoXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXt2YXIgYj1mKGRvY3VtZW50KTt5PSEwO3Q9cGFyc2VGbG9hdChjLmNzcyhcInRvcFwiKSk7cGFnZVk9YS5wYWdlWTtiLmJpbmQoXCJtb3VzZW1vdmUuc2xpbXNjcm9sbFwiLGZ1bmN0aW9uKGEpe2N1cnJUb3A9dCthLnBhZ2VZLXBhZ2VZO2MuY3NzKFwidG9wXCIsY3VyclRvcCk7bSgwLGMucG9zaXRpb24oKS50b3AsITEpfSk7XHJcbmIuYmluZChcIm1vdXNldXAuc2xpbXNjcm9sbFwiLGZ1bmN0aW9uKGEpe3k9ITE7cCgpO2IudW5iaW5kKFwiLnNsaW1zY3JvbGxcIil9KTtyZXR1cm4hMX0pLmJpbmQoXCJzZWxlY3RzdGFydC5zbGltc2Nyb2xsXCIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKTthLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuITF9KTtoLmhvdmVyKGZ1bmN0aW9uKCl7dSgpfSxmdW5jdGlvbigpe3AoKX0pO2MuaG92ZXIoZnVuY3Rpb24oKXt4PSEwfSxmdW5jdGlvbigpe3g9ITF9KTtiLmhvdmVyKGZ1bmN0aW9uKCl7dz0hMDt1KCk7cCgpfSxmdW5jdGlvbigpe3c9ITE7cCgpfSk7Yi5iaW5kKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGEsYil7YS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoJiYoej1hLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSl9KTtiLmJpbmQoXCJ0b3VjaG1vdmVcIixmdW5jdGlvbihiKXtrfHxiLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtiLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGgmJlxyXG4obSgoei1iLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSkvYS50b3VjaFNjcm9sbFN0ZXAsITApLHo9Yi5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpfSk7digpO1wiYm90dG9tXCI9PT1hLnN0YXJ0PyhjLmNzcyh7dG9wOmIub3V0ZXJIZWlnaHQoKS1jLm91dGVySGVpZ2h0KCl9KSxtKDAsITApKTpcInRvcFwiIT09YS5zdGFydCYmKG0oZihhLnN0YXJ0KS5wb3NpdGlvbigpLnRvcCxudWxsLCEwKSxhLmFsd2F5c1Zpc2libGV8fGMuaGlkZSgpKTtDKCl9fSk7cmV0dXJuIHRoaXN9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7c2xpbXNjcm9sbDpqUXVlcnkuZm4uc2xpbVNjcm9sbH0pfSkoalF1ZXJ5KTsiLCIvKiEgbGctZnVsbHNjcmVlbiAtIHYxLjAuMCAtIDIwMTYtMDktMjBcclxuKiBodHRwOi8vc2FjaGluY2hvb2x1ci5naXRodWIuaW8vbGlnaHRHYWxsZXJ5XHJcbiogQ29weXJpZ2h0IChjKSAyMDE2IFNhY2hpbiBOOyBMaWNlbnNlZCBHUEx2MyAqL1xyXG4hZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGIoKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoKTpiKCl9KHRoaXMsZnVuY3Rpb24oKXshZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e2Z1bGxTY3JlZW46ITB9LGY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY29yZT1hKGIpLmRhdGEoXCJsaWdodEdhbGxlcnlcIiksdGhpcy4kZWw9YShiKSx0aGlzLmNvcmUucz1hLmV4dGVuZCh7fSxlLHRoaXMuY29yZS5zKSx0aGlzLmluaXQoKSx0aGlzfTtmLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9XCJcIjtpZih0aGlzLmNvcmUucy5mdWxsU2NyZWVuKXtpZighKGMuZnVsbHNjcmVlbkVuYWJsZWR8fGMud2Via2l0RnVsbHNjcmVlbkVuYWJsZWR8fGMubW96RnVsbFNjcmVlbkVuYWJsZWR8fGMubXNGdWxsc2NyZWVuRW5hYmxlZCkpcmV0dXJuO2E9JzxzcGFuIGNsYXNzPVwibGctZnVsbHNjcmVlbiBsZy1pY29uXCI+PC9zcGFuPicsdGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2xiYXJcIikuYXBwZW5kKGEpLHRoaXMuZnVsbFNjcmVlbigpfX0sZi5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKXt2YXIgYT1jLmRvY3VtZW50RWxlbWVudDthLnJlcXVlc3RGdWxsc2NyZWVuP2EucmVxdWVzdEZ1bGxzY3JlZW4oKTphLm1zUmVxdWVzdEZ1bGxzY3JlZW4/YS5tc1JlcXVlc3RGdWxsc2NyZWVuKCk6YS5tb3pSZXF1ZXN0RnVsbFNjcmVlbj9hLm1velJlcXVlc3RGdWxsU2NyZWVuKCk6YS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiYmYS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpfSxmLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbj1mdW5jdGlvbigpe2MuZXhpdEZ1bGxzY3JlZW4/Yy5leGl0RnVsbHNjcmVlbigpOmMubXNFeGl0RnVsbHNjcmVlbj9jLm1zRXhpdEZ1bGxzY3JlZW4oKTpjLm1vekNhbmNlbEZ1bGxTY3JlZW4/Yy5tb3pDYW5jZWxGdWxsU2NyZWVuKCk6Yy53ZWJraXRFeGl0RnVsbHNjcmVlbiYmYy53ZWJraXRFeGl0RnVsbHNjcmVlbigpfSxmLnByb3RvdHlwZS5mdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKGMpLm9uKFwiZnVsbHNjcmVlbmNoYW5nZS5sZyB3ZWJraXRmdWxsc2NyZWVuY2hhbmdlLmxnIG1vemZ1bGxzY3JlZW5jaGFuZ2UubGcgTVNGdWxsc2NyZWVuQ2hhbmdlLmxnXCIsZnVuY3Rpb24oKXtiLmNvcmUuJG91dGVyLnRvZ2dsZUNsYXNzKFwibGctZnVsbHNjcmVlbi1vblwiKX0pLHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy1mdWxsc2NyZWVuXCIpLm9uKFwiY2xpY2subGdcIixmdW5jdGlvbigpe2MuZnVsbHNjcmVlbkVsZW1lbnR8fGMubW96RnVsbFNjcmVlbkVsZW1lbnR8fGMud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR8fGMubXNGdWxsc2NyZWVuRWxlbWVudD9iLmV4aXRGdWxsc2NyZWVuKCk6Yi5yZXF1ZXN0RnVsbHNjcmVlbigpfSl9LGYucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmV4aXRGdWxsc2NyZWVuKCksYShjKS5vZmYoXCJmdWxsc2NyZWVuY2hhbmdlLmxnIHdlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UubGcgbW96ZnVsbHNjcmVlbmNoYW5nZS5sZyBNU0Z1bGxzY3JlZW5DaGFuZ2UubGdcIil9LGEuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuZnVsbHNjcmVlbj1mfShqUXVlcnksd2luZG93LGRvY3VtZW50KX0pOyIsIi8qISBsZy10aHVtYm5haWwgLSB2MS4wLjAgLSAyMDE2LTA5LTIwXHJcbiogaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeVxyXG4qIENvcHlyaWdodCAoYykgMjAxNiBTYWNoaW4gTjsgTGljZW5zZWQgR1BMdjMgKi9cclxuIWZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiBiKCl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKCk6YigpfSh0aGlzLGZ1bmN0aW9uKCl7IWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPXt0aHVtYm5haWw6ITAsYW5pbWF0ZVRodW1iOiEwLGN1cnJlbnRQYWdlclBvc2l0aW9uOlwibWlkZGxlXCIsdGh1bWJXaWR0aDoxMDAsdGh1bWJDb250SGVpZ2h0OjEwMCx0aHVtYk1hcmdpbjo1LGV4VGh1bWJJbWFnZTohMSxzaG93VGh1bWJCeURlZmF1bHQ6ITAsdG9vZ2xlVGh1bWI6ITAscHVsbENhcHRpb25VcDohMCxlbmFibGVUaHVtYkRyYWc6ITAsZW5hYmxlVGh1bWJTd2lwZTohMCxzd2lwZVRocmVzaG9sZDo1MCxsb2FkWW91dHViZVRodW1ibmFpbDohMCx5b3V0dWJlVGh1bWJTaXplOjEsbG9hZFZpbWVvVGh1bWJuYWlsOiEwLHZpbWVvVGh1bWJTaXplOlwidGh1bWJuYWlsX3NtYWxsXCIsbG9hZERhaWx5bW90aW9uVGh1bWJuYWlsOiEwfSxmPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNvcmU9YShiKS5kYXRhKFwibGlnaHRHYWxsZXJ5XCIpLHRoaXMuY29yZS5zPWEuZXh0ZW5kKHt9LGUsdGhpcy5jb3JlLnMpLHRoaXMuJGVsPWEoYiksdGhpcy4kdGh1bWJPdXRlcj1udWxsLHRoaXMudGh1bWJPdXRlcldpZHRoPTAsdGhpcy50aHVtYlRvdGFsV2lkdGg9dGhpcy5jb3JlLiRpdGVtcy5sZW5ndGgqKHRoaXMuY29yZS5zLnRodW1iV2lkdGgrdGhpcy5jb3JlLnMudGh1bWJNYXJnaW4pLHRoaXMudGh1bWJJbmRleD10aGlzLmNvcmUuaW5kZXgsdGhpcy5sZWZ0PTAsdGhpcy5pbml0KCksdGhpc307Zi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5jb3JlLnMudGh1bWJuYWlsJiZ0aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aD4xJiYodGhpcy5jb3JlLnMuc2hvd1RodW1iQnlEZWZhdWx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXRodW1iLW9wZW5cIil9LDcwMCksdGhpcy5jb3JlLnMucHVsbENhcHRpb25VcCYmdGhpcy5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLXB1bGwtY2FwdGlvbi11cFwiKSx0aGlzLmJ1aWxkKCksdGhpcy5jb3JlLnMuYW5pbWF0ZVRodW1iPyh0aGlzLmNvcmUucy5lbmFibGVUaHVtYkRyYWcmJiF0aGlzLmNvcmUuaXNUb3VjaCYmdGhpcy5jb3JlLmRvQ3NzKCkmJnRoaXMuZW5hYmxlVGh1bWJEcmFnKCksdGhpcy5jb3JlLnMuZW5hYmxlVGh1bWJTd2lwZSYmdGhpcy5jb3JlLmlzVG91Y2gmJnRoaXMuY29yZS5kb0NzcygpJiZ0aGlzLmVuYWJsZVRodW1iU3dpcGUoKSx0aGlzLnRodW1iQ2xpY2thYmxlPSExKTp0aGlzLnRodW1iQ2xpY2thYmxlPSEwLHRoaXMudG9vZ2xlKCksdGhpcy50aHVtYmtleVByZXNzKCkpfSxmLnByb3RvdHlwZS5idWlsZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSxiLGMpe3ZhciBkLGg9ZS5jb3JlLmlzVmlkZW8oYSxjKXx8e30saT1cIlwiO2gueW91dHViZXx8aC52aW1lb3x8aC5kYWlseW1vdGlvbj9oLnlvdXR1YmU/ZD1lLmNvcmUucy5sb2FkWW91dHViZVRodW1ibmFpbD9cIi8vaW1nLnlvdXR1YmUuY29tL3ZpL1wiK2gueW91dHViZVsxXStcIi9cIitlLmNvcmUucy55b3V0dWJlVGh1bWJTaXplK1wiLmpwZ1wiOmI6aC52aW1lbz9lLmNvcmUucy5sb2FkVmltZW9UaHVtYm5haWw/KGQ9XCIvL2kudmltZW9jZG4uY29tL3ZpZGVvL2Vycm9yX1wiK2crXCIuanBnXCIsaT1oLnZpbWVvWzFdKTpkPWI6aC5kYWlseW1vdGlvbiYmKGQ9ZS5jb3JlLnMubG9hZERhaWx5bW90aW9uVGh1bWJuYWlsP1wiLy93d3cuZGFpbHltb3Rpb24uY29tL3RodW1ibmFpbC92aWRlby9cIitoLmRhaWx5bW90aW9uWzFdOmIpOmQ9YixmKz0nPGRpdiBkYXRhLXZpbWVvLWlkPVwiJytpKydcIiBjbGFzcz1cImxnLXRodW1iLWl0ZW1cIiBzdHlsZT1cIndpZHRoOicrZS5jb3JlLnMudGh1bWJXaWR0aCtcInB4OyBtYXJnaW4tcmlnaHQ6IFwiK2UuY29yZS5zLnRodW1iTWFyZ2luKydweFwiPjxpbWcgc3JjPVwiJytkKydcIiAvPjwvZGl2PicsaT1cIlwifXZhciBkLGU9dGhpcyxmPVwiXCIsZz1cIlwiLGg9JzxkaXYgY2xhc3M9XCJsZy10aHVtYi1vdXRlclwiPjxkaXYgY2xhc3M9XCJsZy10aHVtYiBncm91cFwiPjwvZGl2PjwvZGl2Pic7c3dpdGNoKHRoaXMuY29yZS5zLnZpbWVvVGh1bWJTaXplKXtjYXNlXCJ0aHVtYm5haWxfbGFyZ2VcIjpnPVwiNjQwXCI7YnJlYWs7Y2FzZVwidGh1bWJuYWlsX21lZGl1bVwiOmc9XCIyMDB4MTUwXCI7YnJlYWs7Y2FzZVwidGh1bWJuYWlsX3NtYWxsXCI6Zz1cIjEwMHg3NVwifWlmKGUuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy1oYXMtdGh1bWJcIiksZS5jb3JlLiRvdXRlci5maW5kKFwiLmxnXCIpLmFwcGVuZChoKSxlLiR0aHVtYk91dGVyPWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYi1vdXRlclwiKSxlLnRodW1iT3V0ZXJXaWR0aD1lLiR0aHVtYk91dGVyLndpZHRoKCksZS5jb3JlLnMuYW5pbWF0ZVRodW1iJiZlLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuY3NzKHt3aWR0aDplLnRodW1iVG90YWxXaWR0aCtcInB4XCIscG9zaXRpb246XCJyZWxhdGl2ZVwifSksdGhpcy5jb3JlLnMuYW5pbWF0ZVRodW1iJiZlLiR0aHVtYk91dGVyLmNzcyhcImhlaWdodFwiLGUuY29yZS5zLnRodW1iQ29udEhlaWdodCtcInB4XCIpLGUuY29yZS5zLmR5bmFtaWMpZm9yKHZhciBpPTA7aTxlLmNvcmUucy5keW5hbWljRWwubGVuZ3RoO2krKyljKGUuY29yZS5zLmR5bmFtaWNFbFtpXS5zcmMsZS5jb3JlLnMuZHluYW1pY0VsW2ldLnRodW1iLGkpO2Vsc2UgZS5jb3JlLiRpdGVtcy5lYWNoKGZ1bmN0aW9uKGIpe2UuY29yZS5zLmV4VGh1bWJJbWFnZT9jKGEodGhpcykuYXR0cihcImhyZWZcIil8fGEodGhpcykuYXR0cihcImRhdGEtc3JjXCIpLGEodGhpcykuYXR0cihlLmNvcmUucy5leFRodW1iSW1hZ2UpLGIpOmMoYSh0aGlzKS5hdHRyKFwiaHJlZlwiKXx8YSh0aGlzKS5hdHRyKFwiZGF0YS1zcmNcIiksYSh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIiksYil9KTtlLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuaHRtbChmKSxkPWUuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYi1pdGVtXCIpLGQuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyksYz1iLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpO2MmJmEuZ2V0SlNPTihcIi8vd3d3LnZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vXCIrYytcIi5qc29uP2NhbGxiYWNrPT9cIix7Zm9ybWF0OlwianNvblwifSxmdW5jdGlvbihhKXtiLmZpbmQoXCJpbWdcIikuYXR0cihcInNyY1wiLGFbMF1bZS5jb3JlLnMudmltZW9UaHVtYlNpemVdKX0pfSksZC5lcShlLmNvcmUuaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGUuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGQuZXEoZS5jb3JlLmluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKX0pLGQub24oXCJjbGljay5sZyB0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7KGUudGh1bWJDbGlja2FibGUmJiFlLmNvcmUubGdCdXN5fHwhZS5jb3JlLmRvQ3NzKCkpJiYoZS5jb3JlLmluZGV4PWIuaW5kZXgoKSxlLmNvcmUuc2xpZGUoZS5jb3JlLmluZGV4LCExLCEwKSl9LDUwKX0pLGUuY29yZS4kZWwub24oXCJvbkJlZm9yZVNsaWRlLmxnLnRtXCIsZnVuY3Rpb24oKXtlLmFuaW1hdGVUaHVtYihlLmNvcmUuaW5kZXgpfSksYShiKS5vbihcInJlc2l6ZS5sZy50aHVtYiBvcmllbnRhdGlvbmNoYW5nZS5sZy50aHVtYlwiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2UuYW5pbWF0ZVRodW1iKGUuY29yZS5pbmRleCksZS50aHVtYk91dGVyV2lkdGg9ZS4kdGh1bWJPdXRlci53aWR0aCgpfSwyMDApfSl9LGYucHJvdG90eXBlLnNldFRyYW5zbGF0ZT1mdW5jdGlvbihhKXt0aGlzLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrYStcInB4LCAwcHgsIDBweClcIn0pfSxmLnByb3RvdHlwZS5hbmltYXRlVGh1bWI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpO2lmKHRoaXMuY29yZS5zLmFuaW1hdGVUaHVtYil7dmFyIGM7c3dpdGNoKHRoaXMuY29yZS5zLmN1cnJlbnRQYWdlclBvc2l0aW9uKXtjYXNlXCJsZWZ0XCI6Yz0wO2JyZWFrO2Nhc2VcIm1pZGRsZVwiOmM9dGhpcy50aHVtYk91dGVyV2lkdGgvMi10aGlzLmNvcmUucy50aHVtYldpZHRoLzI7YnJlYWs7Y2FzZVwicmlnaHRcIjpjPXRoaXMudGh1bWJPdXRlcldpZHRoLXRoaXMuY29yZS5zLnRodW1iV2lkdGh9dGhpcy5sZWZ0PSh0aGlzLmNvcmUucy50aHVtYldpZHRoK3RoaXMuY29yZS5zLnRodW1iTWFyZ2luKSphLTEtYyx0aGlzLmxlZnQ+dGhpcy50aHVtYlRvdGFsV2lkdGgtdGhpcy50aHVtYk91dGVyV2lkdGgmJih0aGlzLmxlZnQ9dGhpcy50aHVtYlRvdGFsV2lkdGgtdGhpcy50aHVtYk91dGVyV2lkdGgpLHRoaXMubGVmdDwwJiYodGhpcy5sZWZ0PTApLHRoaXMuY29yZS5sR2FsbGVyeU9uPyhiLmhhc0NsYXNzKFwib25cIil8fHRoaXMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsdGhpcy5jb3JlLnMuc3BlZWQrXCJtc1wiKSx0aGlzLmNvcmUuZG9Dc3MoKXx8Yi5hbmltYXRlKHtsZWZ0Oi10aGlzLmxlZnQrXCJweFwifSx0aGlzLmNvcmUucy5zcGVlZCkpOnRoaXMuY29yZS5kb0NzcygpfHxiLmNzcyhcImxlZnRcIiwtdGhpcy5sZWZ0K1wicHhcIiksdGhpcy5zZXRUcmFuc2xhdGUodGhpcy5sZWZ0KX19LGYucHJvdG90eXBlLmVuYWJsZVRodW1iRHJhZz1mdW5jdGlvbigpe3ZhciBjPXRoaXMsZD0wLGU9MCxmPSExLGc9ITEsaD0wO2MuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoXCJsZy1ncmFiXCIpLGMuY29yZS4kb3V0ZXIuZmluZChcIi5sZy10aHVtYlwiKS5vbihcIm1vdXNlZG93bi5sZy50aHVtYlwiLGZ1bmN0aW9uKGEpe2MudGh1bWJUb3RhbFdpZHRoPmMudGh1bWJPdXRlcldpZHRoJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGQ9YS5wYWdlWCxmPSEwLGMuY29yZS4kb3V0ZXIuc2Nyb2xsTGVmdCs9MSxjLmNvcmUuJG91dGVyLnNjcm9sbExlZnQtPTEsYy50aHVtYkNsaWNrYWJsZT0hMSxjLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZ3JhYlwiKS5hZGRDbGFzcyhcImxnLWdyYWJiaW5nXCIpKX0pLGEoYikub24oXCJtb3VzZW1vdmUubGcudGh1bWJcIixmdW5jdGlvbihhKXtmJiYoaD1jLmxlZnQsZz0hMCxlPWEucGFnZVgsYy4kdGh1bWJPdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGgtPWUtZCxoPmMudGh1bWJUb3RhbFdpZHRoLWMudGh1bWJPdXRlcldpZHRoJiYoaD1jLnRodW1iVG90YWxXaWR0aC1jLnRodW1iT3V0ZXJXaWR0aCksaDwwJiYoaD0wKSxjLnNldFRyYW5zbGF0ZShoKSl9KSxhKGIpLm9uKFwibW91c2V1cC5sZy50aHVtYlwiLGZ1bmN0aW9uKCl7Zz8oZz0hMSxjLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKFwibGctZHJhZ2dpbmdcIiksYy5sZWZ0PWgsTWF0aC5hYnMoZS1kKTxjLmNvcmUucy5zd2lwZVRocmVzaG9sZCYmKGMudGh1bWJDbGlja2FibGU9ITApKTpjLnRodW1iQ2xpY2thYmxlPSEwLGYmJihmPSExLGMuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoXCJsZy1ncmFiYmluZ1wiKS5hZGRDbGFzcyhcImxnLWdyYWJcIikpfSl9LGYucHJvdG90eXBlLmVuYWJsZVRodW1iU3dpcGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9MCxjPTAsZD0hMSxlPTA7YS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRodW1iXCIpLm9uKFwidG91Y2hzdGFydC5sZ1wiLGZ1bmN0aW9uKGMpe2EudGh1bWJUb3RhbFdpZHRoPmEudGh1bWJPdXRlcldpZHRoJiYoYy5wcmV2ZW50RGVmYXVsdCgpLGI9Yy5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgsYS50aHVtYkNsaWNrYWJsZT0hMSl9KSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikub24oXCJ0b3VjaG1vdmUubGdcIixmdW5jdGlvbihmKXthLnRodW1iVG90YWxXaWR0aD5hLnRodW1iT3V0ZXJXaWR0aCYmKGYucHJldmVudERlZmF1bHQoKSxjPWYub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYLGQ9ITAsYS4kdGh1bWJPdXRlci5hZGRDbGFzcyhcImxnLWRyYWdnaW5nXCIpLGU9YS5sZWZ0LGUtPWMtYixlPmEudGh1bWJUb3RhbFdpZHRoLWEudGh1bWJPdXRlcldpZHRoJiYoZT1hLnRodW1iVG90YWxXaWR0aC1hLnRodW1iT3V0ZXJXaWR0aCksZTwwJiYoZT0wKSxhLnNldFRyYW5zbGF0ZShlKSl9KSxhLmNvcmUuJG91dGVyLmZpbmQoXCIubGctdGh1bWJcIikub24oXCJ0b3VjaGVuZC5sZ1wiLGZ1bmN0aW9uKCl7YS50aHVtYlRvdGFsV2lkdGg+YS50aHVtYk91dGVyV2lkdGgmJmQ/KGQ9ITEsYS4kdGh1bWJPdXRlci5yZW1vdmVDbGFzcyhcImxnLWRyYWdnaW5nXCIpLE1hdGguYWJzKGMtYik8YS5jb3JlLnMuc3dpcGVUaHJlc2hvbGQmJihhLnRodW1iQ2xpY2thYmxlPSEwKSxhLmxlZnQ9ZSk6YS50aHVtYkNsaWNrYWJsZT0hMH0pfSxmLnByb3RvdHlwZS50b29nbGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29yZS5zLnRvb2dsZVRodW1iJiYoYS5jb3JlLiRvdXRlci5hZGRDbGFzcyhcImxnLWNhbi10b2dnbGVcIiksYS4kdGh1bWJPdXRlci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibGctdG9vZ2xlLXRodW1iIGxnLWljb25cIj48L3NwYW4+JyksYS5jb3JlLiRvdXRlci5maW5kKFwiLmxnLXRvb2dsZS10aHVtYlwiKS5vbihcImNsaWNrLmxnXCIsZnVuY3Rpb24oKXthLmNvcmUuJG91dGVyLnRvZ2dsZUNsYXNzKFwibGctdGh1bWItb3BlblwiKX0pKX0sZi5wcm90b3R5cGUudGh1bWJrZXlQcmVzcz1mdW5jdGlvbigpe3ZhciBjPXRoaXM7YShiKS5vbihcImtleWRvd24ubGcudGh1bWJcIixmdW5jdGlvbihhKXszOD09PWEua2V5Q29kZT8oYS5wcmV2ZW50RGVmYXVsdCgpLGMuY29yZS4kb3V0ZXIuYWRkQ2xhc3MoXCJsZy10aHVtYi1vcGVuXCIpKTo0MD09PWEua2V5Q29kZSYmKGEucHJldmVudERlZmF1bHQoKSxjLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctdGh1bWItb3BlblwiKSl9KX0sZi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY29yZS5zLnRodW1ibmFpbCYmdGhpcy5jb3JlLiRpdGVtcy5sZW5ndGg+MSYmKGEoYikub2ZmKFwicmVzaXplLmxnLnRodW1iIG9yaWVudGF0aW9uY2hhbmdlLmxnLnRodW1iIGtleWRvd24ubGcudGh1bWJcIiksdGhpcy4kdGh1bWJPdXRlci5yZW1vdmUoKSx0aGlzLmNvcmUuJG91dGVyLnJlbW92ZUNsYXNzKFwibGctaGFzLXRodW1iXCIpKX0sYS5mbi5saWdodEdhbGxlcnkubW9kdWxlcy5UaHVtYm5haWw9Zn0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCl9KTsiLCIvKiBNb2Rlcm5penIgMi4wLjYgKEN1c3RvbSBCdWlsZCkgfCBNSVQgJiBCU0RcclxuICogQnVpbGQ6IGh0dHA6Ly93d3cubW9kZXJuaXpyLmNvbS9kb3dubG9hZC8jLWNzc3RyYW5zZm9ybXMtY3NzdHJhbnNmb3JtczNkLWNzc3RyYW5zaXRpb25zLWllcHAtY3NzY2xhc3Nlcy10ZXN0c3R5bGVzLXRlc3Rwcm9wLXRlc3RhbGxwcm9wcy1wcmVmaXhlcy1kb21wcmVmaXhlcy1sb2FkXHJcbiAqL1xyXG47d2luZG93Lk1vZGVybml6cj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gQyhhLGIpe3ZhciBjPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSksZD0oYStcIiBcIitvLmpvaW4oYytcIiBcIikrYykuc3BsaXQoXCIgXCIpO3JldHVybiBCKGQsYil9ZnVuY3Rpb24gQihhLGIpe2Zvcih2YXIgZCBpbiBhKWlmKGtbYVtkXV0hPT1jKXJldHVybiBiPT1cInBmeFwiP2FbZF06ITA7cmV0dXJuITF9ZnVuY3Rpb24gQShhLGIpe3JldHVybiEhfihcIlwiK2EpLmluZGV4T2YoYil9ZnVuY3Rpb24geihhLGIpe3JldHVybiB0eXBlb2YgYT09PWJ9ZnVuY3Rpb24geShhLGIpe3JldHVybiB4KG4uam9pbihhK1wiO1wiKSsoYnx8XCJcIikpfWZ1bmN0aW9uIHgoYSl7ay5jc3NUZXh0PWF9dmFyIGQ9XCIyLjAuNlwiLGU9e30sZj0hMCxnPWIuZG9jdW1lbnRFbGVtZW50LGg9Yi5oZWFkfHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxpPVwibW9kZXJuaXpyXCIsaj1iLmNyZWF0ZUVsZW1lbnQoaSksaz1qLnN0eWxlLGwsbT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG49XCIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gLWtodG1sLSBcIi5zcGxpdChcIiBcIiksbz1cIldlYmtpdCBNb3ogTyBtcyBLaHRtbFwiLnNwbGl0KFwiIFwiKSxwPXt9LHE9e30scj17fSxzPVtdLHQ9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsaCxqLGs9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKHBhcnNlSW50KGQsMTApKXdoaWxlKGQtLSlqPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxqLmlkPWU/ZVtkXTppKyhkKzEpLGsuYXBwZW5kQ2hpbGQoaik7Zj1bXCImc2h5O1wiLFwiPHN0eWxlPlwiLGEsXCI8L3N0eWxlPlwiXS5qb2luKFwiXCIpLGsuaWQ9aSxrLmlubmVySFRNTCs9ZixnLmFwcGVuZENoaWxkKGspLGg9YyhrLGEpLGsucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChrKTtyZXR1cm4hIWh9LHUsdj17fS5oYXNPd25Qcm9wZXJ0eSx3OyF6KHYsYykmJiF6KHYuY2FsbCxjKT93PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHYuY2FsbChhLGIpfTp3PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIgaW4gYSYmeihhLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtiXSxjKX07dmFyIEQ9ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLmpvaW4oXCJcIiksZj1jLmxlbmd0aDt0KGQsZnVuY3Rpb24oYSxjKXt2YXIgZD1iLnN0eWxlU2hlZXRzW2Iuc3R5bGVTaGVldHMubGVuZ3RoLTFdLGc9ZC5jc3NSdWxlcyYmZC5jc3NSdWxlc1swXT9kLmNzc1J1bGVzWzBdLmNzc1RleHQ6ZC5jc3NUZXh0fHxcIlwiLGg9YS5jaGlsZE5vZGVzLGk9e307d2hpbGUoZi0tKWlbaFtmXS5pZF09aFtmXTtlLmNzc3RyYW5zZm9ybXMzZD1pLmNzc3RyYW5zZm9ybXMzZC5vZmZzZXRMZWZ0PT09OX0sZixjKX0oWyxbXCJAbWVkaWEgKFwiLG4uam9pbihcInRyYW5zZm9ybS0zZCksKFwiKSxpLFwiKVwiLFwieyNjc3N0cmFuc2Zvcm1zM2R7bGVmdDo5cHg7cG9zaXRpb246YWJzb2x1dGV9fVwiXS5qb2luKFwiXCIpXSxbLFwiY3NzdHJhbnNmb3JtczNkXCJdKTtwLmNzc3RyYW5zZm9ybXM9ZnVuY3Rpb24oKXtyZXR1cm4hIUIoW1widHJhbnNmb3JtUHJvcGVydHlcIixcIldlYmtpdFRyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJPVHJhbnNmb3JtXCIsXCJtc1RyYW5zZm9ybVwiXSl9LHAuY3NzdHJhbnNmb3JtczNkPWZ1bmN0aW9uKCl7dmFyIGE9ISFCKFtcInBlcnNwZWN0aXZlUHJvcGVydHlcIixcIldlYmtpdFBlcnNwZWN0aXZlXCIsXCJNb3pQZXJzcGVjdGl2ZVwiLFwiT1BlcnNwZWN0aXZlXCIsXCJtc1BlcnNwZWN0aXZlXCJdKTthJiZcIndlYmtpdFBlcnNwZWN0aXZlXCJpbiBnLnN0eWxlJiYoYT1lLmNzc3RyYW5zZm9ybXMzZCk7cmV0dXJuIGF9LHAuY3NzdHJhbnNpdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gQyhcInRyYW5zaXRpb25Qcm9wZXJ0eVwiKX07Zm9yKHZhciBFIGluIHApdyhwLEUpJiYodT1FLnRvTG93ZXJDYXNlKCksZVt1XT1wW0VdKCkscy5wdXNoKChlW3VdP1wiXCI6XCJuby1cIikrdSkpO3goXCJcIiksaj1sPW51bGwsYS5hdHRhY2hFdmVudCYmZnVuY3Rpb24oKXt2YXIgYT1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5pbm5lckhUTUw9XCI8ZWxlbT48L2VsZW0+XCI7cmV0dXJuIGEuY2hpbGROb2Rlcy5sZW5ndGghPT0xfSgpJiZmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIHMoYSl7dmFyIGI9LTE7d2hpbGUoKytiPGcpYS5jcmVhdGVFbGVtZW50KGZbYl0pfWEuaWVwcD1hLmllcHB8fHt9O3ZhciBkPWEuaWVwcCxlPWQuaHRtbDVlbGVtZW50c3x8XCJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98Y2FudmFzfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvXCIsZj1lLnNwbGl0KFwifFwiKSxnPWYubGVuZ3RoLGg9bmV3IFJlZ0V4cChcIihefFxcXFxzKShcIitlK1wiKVwiLFwiZ2lcIiksaT1uZXcgUmVnRXhwKFwiPCgvKikoXCIrZStcIilcIixcImdpXCIpLGo9L15cXHMqW1xce1xcfV1cXHMqJC8saz1uZXcgUmVnRXhwKFwiKF58W15cXFxcbl0qP1xcXFxzKShcIitlK1wiKShbXlxcXFxuXSopKHtbXFxcXG5cXFxcd1xcXFxXXSo/fSlcIixcImdpXCIpLGw9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbT1iLmRvY3VtZW50RWxlbWVudCxuPW0uZmlyc3RDaGlsZCxvPWIuY3JlYXRlRWxlbWVudChcImJvZHlcIikscD1iLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxxPS9wcmludHxhbGwvLHI7ZC5nZXRDU1M9ZnVuY3Rpb24oYSxiKXtpZihhK1wiXCI9PT1jKXJldHVyblwiXCI7dmFyIGU9LTEsZj1hLmxlbmd0aCxnLGg9W107d2hpbGUoKytlPGYpe2c9YVtlXTtpZihnLmRpc2FibGVkKWNvbnRpbnVlO2I9Zy5tZWRpYXx8YixxLnRlc3QoYikmJmgucHVzaChkLmdldENTUyhnLmltcG9ydHMsYiksZy5jc3NUZXh0KSxiPVwiYWxsXCJ9cmV0dXJuIGguam9pbihcIlwiKX0sZC5wYXJzZUNTUz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO3doaWxlKChjPWsuZXhlYyhhKSkhPW51bGwpYi5wdXNoKCgoai5leGVjKGNbMV0pP1wiXFxuXCI6Y1sxXSkrY1syXStjWzNdKS5yZXBsYWNlKGgsXCIkMS5pZXBwXyQyXCIpK2NbNF0pO3JldHVybiBiLmpvaW4oXCJcXG5cIil9LGQud3JpdGVIVE1MPWZ1bmN0aW9uKCl7dmFyIGE9LTE7cj1yfHxiLmJvZHk7d2hpbGUoKythPGcpe3ZhciBjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZlthXSksZD1jLmxlbmd0aCxlPS0xO3doaWxlKCsrZTxkKWNbZV0uY2xhc3NOYW1lLmluZGV4T2YoXCJpZXBwX1wiKTwwJiYoY1tlXS5jbGFzc05hbWUrPVwiIGllcHBfXCIrZlthXSl9bC5hcHBlbmRDaGlsZChyKSxtLmFwcGVuZENoaWxkKG8pLG8uY2xhc3NOYW1lPXIuY2xhc3NOYW1lLG8uaWQ9ci5pZCxvLmlubmVySFRNTD1yLmlubmVySFRNTC5yZXBsYWNlKGksXCI8JDFmb250XCIpfSxkLl9iZWZvcmVQcmludD1mdW5jdGlvbigpe3Auc3R5bGVTaGVldC5jc3NUZXh0PWQucGFyc2VDU1MoZC5nZXRDU1MoYi5zdHlsZVNoZWV0cyxcImFsbFwiKSksZC53cml0ZUhUTUwoKX0sZC5yZXN0b3JlSFRNTD1mdW5jdGlvbigpe28uaW5uZXJIVE1MPVwiXCIsbS5yZW1vdmVDaGlsZChvKSxtLmFwcGVuZENoaWxkKHIpfSxkLl9hZnRlclByaW50PWZ1bmN0aW9uKCl7ZC5yZXN0b3JlSFRNTCgpLHAuc3R5bGVTaGVldC5jc3NUZXh0PVwiXCJ9LHMoYikscyhsKTtkLmRpc2FibGVQUHx8KG4uaW5zZXJ0QmVmb3JlKHAsbi5maXJzdENoaWxkKSxwLm1lZGlhPVwicHJpbnRcIixwLmNsYXNzTmFtZT1cImllcHAtcHJpbnRzaGltXCIsYS5hdHRhY2hFdmVudChcIm9uYmVmb3JlcHJpbnRcIixkLl9iZWZvcmVQcmludCksYS5hdHRhY2hFdmVudChcIm9uYWZ0ZXJwcmludFwiLGQuX2FmdGVyUHJpbnQpKX0oYSxiKSxlLl92ZXJzaW9uPWQsZS5fcHJlZml4ZXM9bixlLl9kb21QcmVmaXhlcz1vLGUudGVzdFByb3A9ZnVuY3Rpb24oYSl7cmV0dXJuIEIoW2FdKX0sZS50ZXN0QWxsUHJvcHM9QyxlLnRlc3RTdHlsZXM9dCxnLmNsYXNzTmFtZT1nLmNsYXNzTmFtZS5yZXBsYWNlKC9cXGJuby1qc1xcYi8sXCJcIikrKGY/XCIganMgXCIrcy5qb2luKFwiIFwiKTpcIlwiKTtyZXR1cm4gZX0odGhpcyx0aGlzLmRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gayhhKXtyZXR1cm4hYXx8YT09XCJsb2FkZWRcInx8YT09XCJjb21wbGV0ZVwifWZ1bmN0aW9uIGooKXt2YXIgYT0xLGI9LTE7d2hpbGUocC5sZW5ndGgtICsrYilpZihwW2JdLnMmJiEoYT1wW2JdLnIpKWJyZWFrO2EmJmcoKX1mdW5jdGlvbiBpKGEpe3ZhciBjPWIuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxkO2Muc3JjPWEucyxjLm9ucmVhZHlzdGF0ZWNoYW5nZT1jLm9ubG9hZD1mdW5jdGlvbigpeyFkJiZrKGMucmVhZHlTdGF0ZSkmJihkPTEsaigpLGMub25sb2FkPWMub25yZWFkeXN0YXRlY2hhbmdlPW51bGwpfSxtKGZ1bmN0aW9uKCl7ZHx8KGQ9MSxqKCkpfSxILmVycm9yVGltZW91dCksYS5lP2Mub25sb2FkKCk6bi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLG4pfWZ1bmN0aW9uIGgoYSl7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KFwibGlua1wiKSxkO2MuaHJlZj1hLnMsYy5yZWw9XCJzdHlsZXNoZWV0XCIsYy50eXBlPVwidGV4dC9jc3NcIjtpZighYS5lJiYod3x8cikpe3ZhciBlPWZ1bmN0aW9uKGEpe20oZnVuY3Rpb24oKXtpZighZCl0cnl7YS5zaGVldC5jc3NSdWxlcy5sZW5ndGg/KGQ9MSxqKCkpOmUoYSl9Y2F0Y2goYil7Yi5jb2RlPT0xZTN8fGIubWVzc2FnZT09XCJzZWN1cml0eVwifHxiLm1lc3NhZ2U9PVwiZGVuaWVkXCI/KGQ9MSxtKGZ1bmN0aW9uKCl7aigpfSwwKSk6ZShhKX19LDApfTtlKGMpfWVsc2UgYy5vbmxvYWQ9ZnVuY3Rpb24oKXtkfHwoZD0xLG0oZnVuY3Rpb24oKXtqKCl9LDApKX0sYS5lJiZjLm9ubG9hZCgpO20oZnVuY3Rpb24oKXtkfHwoZD0xLGooKSl9LEguZXJyb3JUaW1lb3V0KSwhYS5lJiZuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsbil9ZnVuY3Rpb24gZygpe3ZhciBhPXAuc2hpZnQoKTtxPTEsYT9hLnQ/bShmdW5jdGlvbigpe2EudD09XCJjXCI/aChhKTppKGEpfSwwKTooYSgpLGooKSk6cT0wfWZ1bmN0aW9uIGYoYSxjLGQsZSxmLGgpe2Z1bmN0aW9uIGkoKXshbyYmayhsLnJlYWR5U3RhdGUpJiYoci5yPW89MSwhcSYmaigpLGwub25sb2FkPWwub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsbShmdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQobCl9LDApKX12YXIgbD1iLmNyZWF0ZUVsZW1lbnQoYSksbz0wLHI9e3Q6ZCxzOmMsZTpofTtsLnNyYz1sLmRhdGE9YywhcyYmKGwuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksbC53aWR0aD1sLmhlaWdodD1cIjBcIixhIT1cIm9iamVjdFwiJiYobC50eXBlPWQpLGwub25sb2FkPWwub25yZWFkeXN0YXRlY2hhbmdlPWksYT09XCJpbWdcIj9sLm9uZXJyb3I9aTphPT1cInNjcmlwdFwiJiYobC5vbmVycm9yPWZ1bmN0aW9uKCl7ci5lPXIucj0xLGcoKX0pLHAuc3BsaWNlKGUsMCxyKSx1Lmluc2VydEJlZm9yZShsLHM/bnVsbDpuKSxtKGZ1bmN0aW9uKCl7b3x8KHUucmVtb3ZlQ2hpbGQobCksci5yPXIuZT1vPTEsaigpKX0sSC5lcnJvclRpbWVvdXQpfWZ1bmN0aW9uIGUoYSxiLGMpe3ZhciBkPWI9PVwiY1wiP3o6eTtxPTAsYj1ifHxcImpcIixDKGEpP2YoZCxhLGIsdGhpcy5pKyssbCxjKToocC5zcGxpY2UodGhpcy5pKyssMCxhKSxwLmxlbmd0aD09MSYmZygpKTtyZXR1cm4gdGhpc31mdW5jdGlvbiBkKCl7dmFyIGE9SDthLmxvYWRlcj17bG9hZDplLGk6MH07cmV0dXJuIGF9dmFyIGw9Yi5kb2N1bWVudEVsZW1lbnQsbT1hLnNldFRpbWVvdXQsbj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdLG89e30udG9TdHJpbmcscD1bXSxxPTAscj1cIk1vekFwcGVhcmFuY2VcImluIGwuc3R5bGUscz1yJiYhIWIuY3JlYXRlUmFuZ2UoKS5jb21wYXJlTm9kZSx0PXImJiFzLHU9cz9sOm4ucGFyZW50Tm9kZSx2PWEub3BlcmEmJm8uY2FsbChhLm9wZXJhKT09XCJbb2JqZWN0IE9wZXJhXVwiLHc9XCJ3ZWJraXRBcHBlYXJhbmNlXCJpbiBsLnN0eWxlLHg9dyYmXCJhc3luY1wiaW4gYi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLHk9cj9cIm9iamVjdFwiOnZ8fHg/XCJpbWdcIjpcInNjcmlwdFwiLHo9dz9cImltZ1wiOnksQT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gby5jYWxsKGEpPT1cIltvYmplY3QgQXJyYXldXCJ9LEI9ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdChhKT09PWF9LEM9ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBhPT1cInN0cmluZ1wifSxEPWZ1bmN0aW9uKGEpe3JldHVybiBvLmNhbGwoYSk9PVwiW29iamVjdCBGdW5jdGlvbl1cIn0sRT1bXSxGPXt9LEcsSDtIPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGYoYSl7dmFyIGI9YS5zcGxpdChcIiFcIiksYz1FLmxlbmd0aCxkPWIucG9wKCksZT1iLmxlbmd0aCxmPXt1cmw6ZCxvcmlnVXJsOmQscHJlZml4ZXM6Yn0sZyxoO2ZvcihoPTA7aDxlO2grKylnPUZbYltoXV0sZyYmKGY9ZyhmKSk7Zm9yKGg9MDtoPGM7aCsrKWY9RVtoXShmKTtyZXR1cm4gZn1mdW5jdGlvbiBlKGEsYixlLGcsaCl7dmFyIGk9ZihhKSxqPWkuYXV0b0NhbGxiYWNrO2lmKCFpLmJ5cGFzcyl7YiYmKGI9RChiKT9iOmJbYV18fGJbZ118fGJbYS5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCI/XCIpWzBdXSk7aWYoaS5pbnN0ZWFkKXJldHVybiBpLmluc3RlYWQoYSxiLGUsZyxoKTtlLmxvYWQoaS51cmwsaS5mb3JjZUNTU3x8IWkuZm9yY2VKUyYmL2NzcyQvLnRlc3QoaS51cmwpP1wiY1wiOmMsaS5ub2V4ZWMpLChEKGIpfHxEKGopKSYmZS5sb2FkKGZ1bmN0aW9uKCl7ZCgpLGImJmIoaS5vcmlnVXJsLGgsZyksaiYmaihpLm9yaWdVcmwsaCxnKX0pfX1mdW5jdGlvbiBiKGEsYil7ZnVuY3Rpb24gYyhhKXtpZihDKGEpKWUoYSxoLGIsMCxkKTtlbHNlIGlmKEIoYSkpZm9yKGkgaW4gYSlhLmhhc093blByb3BlcnR5KGkpJiZlKGFbaV0saCxiLGksZCl9dmFyIGQ9ISFhLnRlc3QsZj1kP2EueWVwOmEubm9wZSxnPWEubG9hZHx8YS5ib3RoLGg9YS5jYWxsYmFjayxpO2MoZiksYyhnKSxhLmNvbXBsZXRlJiZiLmxvYWQoYS5jb21wbGV0ZSl9dmFyIGcsaCxpPXRoaXMueWVwbm9wZS5sb2FkZXI7aWYoQyhhKSllKGEsMCxpLDApO2Vsc2UgaWYoQShhKSlmb3IoZz0wO2c8YS5sZW5ndGg7ZysrKWg9YVtnXSxDKGgpP2UoaCwwLGksMCk6QShoKT9IKGgpOkIoaCkmJmIoaCxpKTtlbHNlIEIoYSkmJmIoYSxpKX0sSC5hZGRQcmVmaXg9ZnVuY3Rpb24oYSxiKXtGW2FdPWJ9LEguYWRkRmlsdGVyPWZ1bmN0aW9uKGEpe0UucHVzaChhKX0sSC5lcnJvclRpbWVvdXQ9MWU0LGIucmVhZHlTdGF0ZT09bnVsbCYmYi5hZGRFdmVudExpc3RlbmVyJiYoYi5yZWFkeVN0YXRlPVwibG9hZGluZ1wiLGIuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixHPWZ1bmN0aW9uKCl7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEcsMCksYi5yZWFkeVN0YXRlPVwiY29tcGxldGVcIn0sMCkpLGEueWVwbm9wZT1kKCl9KHRoaXMsdGhpcy5kb2N1bWVudCksTW9kZXJuaXpyLmxvYWQ9ZnVuY3Rpb24oKXt5ZXBub3BlLmFwcGx5KHdpbmRvdyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSl9OyIsIihmdW5jdGlvbiAod2luZG93LCB1bmRlZmluZWQpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgLy8gdGVzdCBmb3IgUkVNIHVuaXQgc3VwcG9ydFxyXG4gICAgdmFyIGNzc3JlbXVuaXQgPSAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcbiAgICAgICAgICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gJ2ZvbnQtc2l6ZTogMXJlbTsnO1xyXG5cclxuICAgICAgICByZXR1cm4gKC9yZW0vKS50ZXN0KGRpdi5zdHlsZS5mb250U2l6ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGZpbHRlciByZXR1cm5lZCBsaW5rcyBmb3Igc3R5bGVzaGVldHNcclxuICAgIGlzU3R5bGVTaGVldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpbmsnKSxcclxuICAgICAgICAgICAgZmlsdGVyZWRMaW5rcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCBzdHlsZXNbaV0ucmVsLnRvTG93ZXJDYXNlKCkgPT09ICdzdHlsZXNoZWV0JyAmJiBzdHlsZXNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLW5vcmVtJykgPT09IG51bGwgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRMaW5rcy5wdXNoKCBzdHlsZXNbaV0uaHJlZiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmlsdGVyZWRMaW5rcztcclxuICAgIH0sXHJcblxyXG4gICBwcm9jZXNzTGlua3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9wcmVwYXJlIHRvIG1hdGNoIGVhY2ggbGlua1xyXG4gICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgeGhyKCBsaW5rc1tpXSwgc3RvcmVDU1MgKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHN0b3JlQ1NTID0gZnVuY3Rpb24gKCByZXNwb25zZSwgbGluayApIHtcclxuXHJcbiAgICAgICAgcHJlQ1NTLnB1c2gocmVzcG9uc2UucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICBDU1NMaW5rcy5wdXNoKGxpbmspO1xyXG5cclxuICAgICAgICBpZiggQ1NTTGlua3MubGVuZ3RoID09PSBsaW5rcy5sZW5ndGggKXtcclxuICAgICAgICAgICAgZm9yKCB2YXIgaiA9IDA7IGogPCAgQ1NTTGlua3MubGVuZ3RoOyBqKysgKXtcclxuICAgICAgICAgICAgICAgIG1hdGNoQ1NTKCBwcmVDU1Nbal0sIENTU0xpbmtzW2pdICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCAoIGxpbmtzID0gaW1wb3J0TGlua3Muc2xpY2UoMCkgKS5sZW5ndGggPiAwICl7IC8vYWZ0ZXIgZmluaXNoaW5nIGFsbCBjdXJyZW50IGxpbmtzLCBzZXQgbGlua3MgZXF1YWwgdG8gdGhlIG5ldyBpbXBvcnRzIGZvdW5kXHJcbiAgICAgICAgICAgICAgICBDU1NMaW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcHJlQ1NTID0gW107XHJcbiAgICAgICAgICAgICAgICBpbXBvcnRMaW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc0xpbmtzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidWlsZENTUygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBtYXRjaENTUyA9IGZ1bmN0aW9uICggc2hlZXRDU1MsIGxpbmsgKSB7IC8vIGNvbGxlY3QgYWxsIG9mIHRoZSBydWxlcyBmcm9tIHRoZSB4aHIgcmVzcG9uc2UgdGV4dHMgYW5kIG1hdGNoIHRoZW0gdG8gYSBwYXR0ZXJuXHJcbiAgICAgICAgdmFyIGNsZWFuID0gcmVtb3ZlTWVkaWFRdWVyaWVzKCBzaGVldENTUyApLnJlcGxhY2UoL1xcL1xcKltcXHNcXFNdKj9cXCpcXC8vZywgJycpLCAvLyByZW1vdmUgTWVkaWFRdWVyaWVzIGFuZCBjb21tZW50c1xyXG4gICAgICAgICAgICBwYXR0ZXJuID0gL1tcXHdcXGRcXHNcXC1cXC9cXFxcXFxbXFxdOiwuJ1wiKigpPD4rfiUjXiRfPXxAXStcXHtbXFx3XFxkXFxzXFwtXFwvXFxcXCUjOiE7LC4nXCIqKCldK1xcZCpcXC4/XFxkK3JlbVtcXHdcXGRcXHNcXC1cXC9cXFxcJSM6ITssLidcIiooKV0qXFx9L2csIC8vZmluZCBzZWxlY3RvcnMgdGhhdCB1c2UgcmVtIGluIG9uZSBvciBtb3JlIG9mIHRoZWlyIHJ1bGVzXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjbGVhbi5tYXRjaChwYXR0ZXJuKSxcclxuICAgICAgICAgICAgcmVtUGF0dGVybiA9L1xcZCpcXC4/XFxkK3JlbS9nLFxyXG4gICAgICAgICAgICByZW1DdXJyZW50ID0gY2xlYW4ubWF0Y2gocmVtUGF0dGVybiksXHJcbiAgICAgICAgICAgIHNoZWV0UGF0aFBhdHRlcm4gPSAvKC4qXFwvKS8sXHJcbiAgICAgICAgICAgIHNoZWV0UGF0aCA9IHNoZWV0UGF0aFBhdHRlcm4uZXhlYyhsaW5rKVswXSwgLy9yZWxhdGl2ZSBwYXRoIHRvIGNzcyBmaWxlIHNwZWNpZmllZCBpbiBAaW1wb3J0XHJcbiAgICAgICAgICAgIGltcG9ydFBhdHRlcm4gPSAvQGltcG9ydCAoPzp1cmxcXCgpP1snXCJdPyhbXidcXClcIl0qKVsnXCJdP1xcKT9bXjtdKi9nbSwgLy9tYXRjaGVzIGFsbCBAaW1wb3J0IHZhcmlhdGlvbnMgb3V0bGluZWQgYXQ6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AaW1wb3J0XHJcbiAgICAgICAgICAgIGltcG9ydFN0YXRlbWVudDtcclxuXHJcbiAgICAgICAgd2hpbGUoIChpbXBvcnRTdGF0ZW1lbnQgPSBpbXBvcnRQYXR0ZXJuLmV4ZWMoc2hlZXRDU1MpKSAhPT0gbnVsbCApe1xyXG4gICAgICAgICAgICBpZiggaW1wb3J0U3RhdGVtZW50WzFdLmluZGV4T2YoXCIvXCIpID09PSAwICkgeyAvLyBjaGVjayBpZiB0aGUgdmFsdWUgb2YgaW1wb3J0U3RhdGVtZW50WzFdIGlzIGEgcm9vdCByZWxhdGl2ZSBwYXRoLCBpbiB3aGljaCBjYXNlIGl0IHNob3VsZG4ndCBiZSBjb25jYXRlbmF0ZWQgd2l0aCBzaGVldFBhdGhcclxuICAgICAgICAgICAgICAgIGltcG9ydExpbmtzLnB1c2goIGltcG9ydFN0YXRlbWVudFsxXSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW1wb3J0TGlua3MucHVzaCggc2hlZXRQYXRoICsgaW1wb3J0U3RhdGVtZW50WzFdICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCBjdXJyZW50ICE9PSBudWxsICYmIGN1cnJlbnQubGVuZ3RoICE9PSAwICl7XHJcbiAgICAgICAgICAgIGZvdW5kID0gZm91bmQuY29uY2F0KCBjdXJyZW50ICk7IC8vIHNhdmUgYWxsIG9mIHRoZSBibG9ja3Mgb2YgcnVsZXMgd2l0aCByZW0gaW4gYSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICBmb3VuZFByb3BzID0gZm91bmRQcm9wcy5jb25jYXQoIHJlbUN1cnJlbnQgKTsgLy8gc2F2ZSBhbGwgb2YgdGhlIHByb3BlcnRpZXMgd2l0aCByZW1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGJ1aWxkQ1NTID0gZnVuY3Rpb24gKCkgeyAvLyBmaXJzdCBidWlsZCBlYWNoIGluZGl2aWR1YWwgcnVsZSBmcm9tIGVsZW1lbnRzIGluIHRoZSBmb3VuZCBhcnJheSBhbmQgdGhlbiBhZGQgaXQgdG8gdGhlIHN0cmluZyBvZiBydWxlcy5cclxuICAgICAgICB2YXIgcGF0dGVybiA9IC9bXFx3XFxkXFxzXFwtXFwvXFxcXCUjOiwuJ1wiKigpXStcXGQqXFwuP1xcZCtyZW1bXFx3XFxkXFxzXFwtXFwvXFxcXCUjOiEsLidcIiooKV0qWzt9XS9nOyAvLyBmaW5kIHByb3BlcnRpZXMgd2l0aCByZW0gdmFsdWVzIGluIHRoZW1cclxuICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8IGZvdW5kLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHJ1bGVzID0gcnVsZXMgKyBmb3VuZFtpXS5zdWJzdHIoMCxmb3VuZFtpXS5pbmRleE9mKFwie1wiKSsxKTsgLy8gc2F2ZSB0aGUgc2VsZWN0b3IgcG9ydGlvbiBvZiBlYWNoIHJ1bGUgd2l0aCBhIHJlbSB2YWx1ZVxyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IGZvdW5kW2ldLm1hdGNoKCBwYXR0ZXJuICk7XHJcbiAgICAgICAgICAgIGZvciggdmFyIGogPSAwOyBqPGN1cnJlbnQubGVuZ3RoOyBqKysgKXsgLy8gYnVpbGQgYSBuZXcgc2V0IG9mIHdpdGggb25seSB0aGUgc2VsZWN0b3IgYW5kIHByb3BlcnRpZXMgdGhhdCBoYXZlIHJlbSBpbiB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIHJ1bGVzID0gcnVsZXMgKyBjdXJyZW50W2pdO1xyXG4gICAgICAgICAgICAgICAgaWYoIGogPT09IGN1cnJlbnQubGVuZ3RoLTEgJiYgcnVsZXNbcnVsZXMubGVuZ3RoLTFdICE9PSBcIn1cIiApe1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gcnVsZXMgKyBcIlxcbn1cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGFyc2VDU1MoKTtcclxuICAgIH0sXHJcblxyXG4gICAgcGFyc2VDU1MgPSBmdW5jdGlvbiAoKSB7IC8vIHJlcGxhY2UgZWFjaCBzZXQgb2YgcGFyZW50aGVzZXMgd2l0aCBldmFsdWF0ZWQgY29udGVudFxyXG4gICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDwgZm91bmRQcm9wcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICBjc3NbaV0gPSBNYXRoLnJvdW5kKCBwYXJzZUZsb2F0KGZvdW5kUHJvcHNbaV0uc3Vic3RyKDAsZm91bmRQcm9wc1tpXS5sZW5ndGgtMykqZm9udFNpemUpICkgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9hZENTUygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb2FkQ1NTID0gZnVuY3Rpb24gKCkgeyAvLyByZXBsYWNlIGFuZCBsb2FkIHRoZSBuZXcgcnVsZXNcclxuICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8IGNzcy5sZW5ndGg7IGkrKyApeyAvLyBvbmx5IHJ1biB0aGlzIGxvb3AgYXMgbWFueSB0aW1lcyBhcyBjc3MgaGFzIGVudHJpZXNcclxuICAgICAgICAgICAgaWYoIGNzc1tpXSApe1xyXG4gICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5yZXBsYWNlKCBmb3VuZFByb3BzW2ldLGNzc1tpXSApOyAvLyByZXBsYWNlIG9sZCBydWxlcyB3aXRoIG91ciBwcm9jZXNzZWQgcnVsZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVtY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3N0eWxlJyApO1xyXG4gICAgICAgIHJlbWNzcy5zZXRBdHRyaWJ1dGUoICd0eXBlJywgJ3RleHQvY3NzJyApO1xyXG4gICAgICAgIHJlbWNzcy5pZCA9ICdyZW1SZXBsYWNlJztcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2hlYWQnIClbMF0uYXBwZW5kQ2hpbGQoIHJlbWNzcyApOyAgIC8vIGNyZWF0ZSB0aGUgbmV3IGVsZW1lbnRcclxuICAgICAgICBpZiggcmVtY3NzLnN0eWxlU2hlZXQgKSB7XHJcbiAgICAgICAgICAgIHJlbWNzcy5zdHlsZVNoZWV0LmNzc1RleHQgPSBydWxlczsgLy8gSUU4IHdpbGwgbm90IHN1cHBvcnQgaW5uZXJIVE1MIG9uIHJlYWQtb25seSBlbGVtZW50cywgc3VjaCBhcyBTVFlMRVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbWNzcy5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHJ1bGVzICkgKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHhociA9IGZ1bmN0aW9uICggdXJsLCBjYWxsYmFjayApIHsgLy8gY3JlYXRlIG5ldyBYTUxIdHRwUmVxdWVzdCBvYmplY3QgYW5kIHJ1biBpdFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vdHJ5IHRvIGNyZWF0ZSBhIHJlcXVlc3Qgb2JqZWN0XHJcbiAgICAgICAgICAgIC8vYXJyYW5naW5nIHRoZSB0d28gY29uZGl0aW9ucyB0aGlzIHdheSBpcyBmb3IgSUU3LzgncyBiZW5lZml0XHJcbiAgICAgICAgICAgIC8vc28gdGhhdCBpdCB3b3JrcyB3aXRoIGFueSBjb21iaW5hdGlvbiBvZiBBY3RpdmVYIG9yIE5hdGl2ZSBYSFIgc2V0dGluZ3MsIFxyXG4gICAgICAgICAgICAvL2FzIGxvbmcgYXMgb25lIG9yIHRoZSBvdGhlciBpcyBlbmFibGVkOyBidXQgaWYgYm90aCBhcmUgZW5hYmxlZFxyXG4gICAgICAgICAgICAvL2l0IHByZWZlcnMgQWN0aXZlWCwgd2hpY2ggbWVhbnMgaXQgc3RpbGwgd29ya3Mgd2l0aCBsb2NhbCBmaWxlc1xyXG4gICAgICAgICAgICAvLyhOYXRpdmUgWEhSIGluIElFNy84IGlzIGJsb2NrZWQgYW5kIHRocm93cyBcImFjY2VzcyBpcyBkZW5pZWRcIixcclxuICAgICAgICAgICAgLy8gYnV0IEFjdGl2ZVggaXMgcGVybWl0dGVkIGlmIHRoZSB1c2VyIGFsbG93cyBpdCBbZGVmYXVsdCBpcyB0byBwcm9tcHRdKVxyXG4gICAgICAgICAgICB2YXIgeGhyID0gd2luZG93LkFjdGl2ZVhPYmplY3QgPyAoIG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpIHx8IG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpICkgOiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKCAnR0VUJywgdXJsLCB0cnVlICk7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKXtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh4aHIsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB9IC8vIGVsc2UgeyBjYWxsYmFjayBmdW5jdGlvbiBvbiBBSkFYIGVycm9yIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHhoci5zZW5kKCBudWxsICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSl7XHJcbiAgICAgICAgICAgIGlmICggd2luZG93LlhEb21haW5SZXF1ZXN0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHhkciA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgeGRyLm9wZW4oJ2dldCcsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB4ZHIub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeGRyLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHhkci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyB4ZHIgbG9hZCBmYWlsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgeGRyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gUmVtb3ZlIHF1ZXJpZXMuXHJcbiAgICByZW1vdmVNZWRpYVF1ZXJpZXMgPSBmdW5jdGlvbihjc3MpIHtcclxuICAgICAgICAvLyBUZXN0IGZvciBNZWRpYSBRdWVyeSBzdXBwb3J0XHJcbiAgICAgICAgaWYgKCAhd2luZG93Lm1hdGNoTWVkaWEgJiYgIXdpbmRvdy5tc01hdGNoTWVkaWEgKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBtZWRpYSBxdWVyaWVzLCB3ZSBmaW5kIGFsbCBAbWVkaWEgZGVjbGFyYXRpb25zIGluIHRoZSBDU1MgYW5kIHJlbW92ZSB0aGVtLlxyXG4gICAgICAgICAgICAvLyBOb3RlOiBTaW5jZSBAcnVsZXMgY2FuJ3QgYmUgbmVzdGVkIGluIHRoZSBDU1Mgc3BlYywgd2UncmUgc2FmZSB0byBqdXN0IGNoZWNrIGZvciB0aGUgY2xvc2VzdCBmb2xsb3dpbmcgXCJ9fVwiIHRvIHRoZSBcIkBtZWRpYVwiLlxyXG4gICAgICAgICAgICBjc3MgPSBjc3MucmVwbGFjZSgvQG1lZGlhW1xcc1xcU10qP1xcfVxccypcXH0vZywgXCJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY3NzO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiggIWNzc3JlbXVuaXQoKSApeyAvLyB0aGlzIGNoZWNrcyBpZiB0aGUgcmVtIHZhbHVlIGlzIHN1cHBvcnRlZFxyXG4gICAgICAgIHZhciBydWxlcyA9ICcnLCAvLyBpbml0aWFsaXplIHRoZSBydWxlcyB2YXJpYWJsZSBpbiB0aGlzIHNjb3BlIHNvIGl0IGNhbiBiZSB1c2VkIGxhdGVyXHJcbiAgICAgICAgICAgIGxpbmtzID0gaXNTdHlsZVNoZWV0KCksIC8vIGluaXRpYWxpemUgdGhlIGFycmF5IGhvbGRpbmcgdGhlIHNoZWV0cyB1cmxzIGZvciB1c2UgbGF0ZXJcclxuICAgICAgICAgICAgaW1wb3J0TGlua3MgPSBbXSwgLy9pbml0aWFsaXplIHRoZSBhcnJheSBob2xkaW5nIHRoZSBpbXBvcnQgc2hlZXQgdXJscyBmb3IgdXNlIGxhdGVyXHJcbiAgICAgICAgICAgIGZvdW5kID0gW10sIC8vIGluaXRpYWxpemUgdGhlIGFycmF5IGhvbGRpbmcgdGhlIGZvdW5kIHJ1bGVzIGZvciB1c2UgbGF0ZXJcclxuICAgICAgICAgICAgZm91bmRQcm9wcyA9IFtdLCAvLyBpbml0aWFsaXplIHRoZSBhcnJheSBob2xkaW5nIHRoZSBmb3VuZCBwcm9wZXJ0aWVzIGZvciB1c2UgbGF0ZXJcclxuICAgICAgICAgICAgcHJlQ1NTID0gW10sIC8vIGluaXRpYWxpemUgYXJyYXkgdGhhdCBob2xkcyBjc3MgYmVmb3JlIGJlaW5nIHBhcnNlZFxyXG4gICAgICAgICAgICBDU1NMaW5rcyA9IFtdLCAvL2luaXRpYWxpemUgYXJyYXkgaG9sZGluZyBjc3MgbGlua3MgcmV0dXJuZWQgZnJvbSB4aHJcclxuICAgICAgICAgICAgY3NzID0gW10sIC8vIGluaXRpYWxpemUgdGhlIGFycmF5IGhvbGRpbmcgdGhlIHBhcnNlZCBydWxlcyBmb3IgdXNlIGxhdGVyXHJcbiAgICAgICAgICAgIGZvbnRTaXplID0gJyc7XHJcblxyXG4gICAgICAgIC8vIE5vdGljZTogcmVtIGlzIGEgXCJyb290IGVtXCIgdGhhdCBtZWFucyB0aGF0IGluIGNhc2Ugd2hlbiBodG1sIGVsZW1lbnQgc2l6ZSB3YXMgY2hhbmdlZCBieSBjc3NcclxuICAgICAgICAvLyBvciBzdHlsZSB3ZSBzaG91bGQgbm90IGNoYW5nZSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZm9udFNpemUgdG8gMWVtIC0gb25seSBib2R5IHNpemUgc2hvdWxkIGJlIGNoYW5nZWRcclxuICAgICAgICAvLyB0byAxZW0gZm9yIGNhbGN1bGF0aW9uXHJcblxyXG4gICAgICAgIGZvbnRTaXplID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LFxyXG4gICAgICAgICAgICAgICAgZG9jRWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBib2R5ID0gZG9jLmJvZHkgfHwgZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKSxcclxuICAgICAgICAgICAgICAgIGlzRmFrZUJvZHkgPSAhZG9jLmJvZHksXHJcbiAgICAgICAgICAgICAgICBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2l6ZSA9IGJvZHkuc3R5bGUuZm9udFNpemUsXHJcbiAgICAgICAgICAgICAgICBzaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBpc0Zha2VCb2R5ICkge1xyXG4gICAgICAgICAgICAgICAgZG9jRWxlbWVudC5hcHBlbmRDaGlsZCggYm9keSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDoxZW07IHBvc2l0aW9uOmFic29sdXRlOyB2aXNpYmlsaXR5OmhpZGRlbjsgcGFkZGluZzogMDsnO1xyXG5cclxuICAgICAgICAgICAgYm9keS5zdHlsZS5mb250U2l6ZSA9ICcxZW0nO1xyXG5cclxuICAgICAgICAgICAgYm9keS5hcHBlbmRDaGlsZCggZGl2ICk7XHJcbiAgICAgICAgICAgIHNpemUgPSBkaXYub2Zmc2V0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGlzRmFrZUJvZHkgKSB7XHJcbiAgICAgICAgICAgICAgICBkb2NFbGVtZW50LnJlbW92ZUNoaWxkKCBib2R5ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKCBkaXYgKTtcclxuICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUuZm9udFNpemUgPSBjdXJyZW50U2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNpemU7XHJcbiAgICAgICAgfSgpKTtcclxuXHJcbiAgICAgICAgcHJvY2Vzc0xpbmtzKCk7XHJcbiAgICB9IC8vIGVsc2UgeyBkbyBub3RoaW5nLCB5b3UgYXJlIGF3ZXNvbWUgYW5kIGhhdmUgUkVNIHN1cHBvcnQgfVxyXG5cclxufSkod2luZG93KTtcclxuIiwiLyohIFJlc3BvbmQuanMgdjEuNC4yOiBtaW4vbWF4LXdpZHRoIG1lZGlhIHF1ZXJ5IHBvbHlmaWxsXHJcbiAqIENvcHlyaWdodCAyMDE0IFNjb3R0IEplaGxcclxuICogTGljZW5zZWQgdW5kZXIgTUlUXHJcbiAqIGh0dHA6Ly9qLm1wL3Jlc3BvbmRqcyAqL1xyXG5cclxuLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovXHJcbi8qISBOT1RFOiBJZiB5b3UncmUgYWxyZWFkeSBpbmNsdWRpbmcgYSB3aW5kb3cubWF0Y2hNZWRpYSBwb2x5ZmlsbCB2aWEgTW9kZXJuaXpyIG9yIG90aGVyd2lzZSwgeW91IGRvbid0IG5lZWQgdGhpcyBwYXJ0ICovXHJcbihmdW5jdGlvbih3KSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgdy5tYXRjaE1lZGlhID0gdy5tYXRjaE1lZGlhIHx8IGZ1bmN0aW9uKGRvYywgdW5kZWZpbmVkKSB7XHJcbiAgICB2YXIgYm9vbCwgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsIHJlZk5vZGUgPSBkb2NFbGVtLmZpcnN0RWxlbWVudENoaWxkIHx8IGRvY0VsZW0uZmlyc3RDaGlsZCwgZmFrZUJvZHkgPSBkb2MuY3JlYXRlRWxlbWVudChcImJvZHlcIiksIGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGl2LmlkID0gXCJtcS10ZXN0LTFcIjtcclxuICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtXCI7XHJcbiAgICBmYWtlQm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XHJcbiAgICBmYWtlQm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHEpIHtcclxuICAgICAgZGl2LmlubmVySFRNTCA9ICcmc2h5OzxzdHlsZSBtZWRpYT1cIicgKyBxICsgJ1wiPiAjbXEtdGVzdC0xIHsgd2lkdGg6IDQycHg7IH08L3N0eWxlPic7XHJcbiAgICAgIGRvY0VsZW0uaW5zZXJ0QmVmb3JlKGZha2VCb2R5LCByZWZOb2RlKTtcclxuICAgICAgYm9vbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gNDI7XHJcbiAgICAgIGRvY0VsZW0ucmVtb3ZlQ2hpbGQoZmFrZUJvZHkpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG1hdGNoZXM6IGJvb2wsXHJcbiAgICAgICAgbWVkaWE6IHFcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSh3LmRvY3VtZW50KTtcclxufSkodGhpcyk7XHJcblxyXG4oZnVuY3Rpb24odykge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG4gIHZhciByZXNwb25kID0ge307XHJcbiAgdy5yZXNwb25kID0gcmVzcG9uZDtcclxuICByZXNwb25kLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge307XHJcbiAgdmFyIHJlcXVlc3RRdWV1ZSA9IFtdLCB4bWxIdHRwID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgeG1saHR0cG1ldGhvZCA9IGZhbHNlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgeG1saHR0cG1ldGhvZCA9IG5ldyB3LlhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHhtbGh0dHBtZXRob2QgPSBuZXcgdy5BY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB4bWxodHRwbWV0aG9kO1xyXG4gICAgfTtcclxuICB9KCksIGFqYXggPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgcmVxID0geG1sSHR0cCgpO1xyXG4gICAgaWYgKCFyZXEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVxLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcclxuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlICE9PSA0IHx8IHJlcS5zdGF0dXMgIT09IDIwMCAmJiByZXEuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FsbGJhY2socmVxLnJlc3BvbnNlVGV4dCk7XHJcbiAgICB9O1xyXG4gICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlcS5zZW5kKG51bGwpO1xyXG4gIH0sIGlzVW5zdXBwb3J0ZWRNZWRpYVF1ZXJ5ID0gZnVuY3Rpb24ocXVlcnkpIHtcclxuICAgIHJldHVybiBxdWVyeS5yZXBsYWNlKHJlc3BvbmQucmVnZXgubWlubWF4d2gsIFwiXCIpLm1hdGNoKHJlc3BvbmQucmVnZXgub3RoZXIpO1xyXG4gIH07XHJcbiAgcmVzcG9uZC5hamF4ID0gYWpheDtcclxuICByZXNwb25kLnF1ZXVlID0gcmVxdWVzdFF1ZXVlO1xyXG4gIHJlc3BvbmQudW5zdXBwb3J0ZWRtcSA9IGlzVW5zdXBwb3J0ZWRNZWRpYVF1ZXJ5O1xyXG4gIHJlc3BvbmQucmVnZXggPSB7XHJcbiAgICBtZWRpYTogL0BtZWRpYVteXFx7XStcXHsoW15cXHtcXH1dKlxce1teXFx9XFx7XSpcXH0pKy9naSxcclxuICAgIGtleWZyYW1lczogL0AoPzpcXC0oPzpvfG1venx3ZWJraXQpXFwtKT9rZXlmcmFtZXNbXlxce10rXFx7KD86W15cXHtcXH1dKlxce1teXFx9XFx7XSpcXH0pK1teXFx9XSpcXH0vZ2ksXHJcbiAgICBjb21tZW50czogL1xcL1xcKlteKl0qXFwqKyhbXi9dW14qXSpcXCorKSpcXC8vZ2ksXHJcbiAgICB1cmxzOiAvKHVybFxcKClbJ1wiXT8oW15cXC9cXCknXCJdW146XFwpJ1wiXSspWydcIl0/KFxcKSkvZyxcclxuICAgIGZpbmRTdHlsZXM6IC9AbWVkaWEgKihbXlxce10rKVxceyhbXFxTXFxzXSs/KSQvLFxyXG4gICAgb25seTogLyhvbmx5XFxzKyk/KFthLXpBLVpdKylcXHM/LyxcclxuICAgIG1pbnc6IC9cXChcXHMqbWluXFwtd2lkdGhcXHMqOlxccyooXFxzKlswLTlcXC5dKykocHh8ZW0pXFxzKlxcKS8sXHJcbiAgICBtYXh3OiAvXFwoXFxzKm1heFxcLXdpZHRoXFxzKjpcXHMqKFxccypbMC05XFwuXSspKHB4fGVtKVxccypcXCkvLFxyXG4gICAgbWlubWF4d2g6IC9cXChcXHMqbShpbnxheClcXC0oaGVpZ2h0fHdpZHRoKVxccyo6XFxzKihcXHMqWzAtOVxcLl0rKShweHxlbSlcXHMqXFwpL2dpLFxyXG4gICAgb3RoZXI6IC9cXChbXlxcKV0qXFwpL2dcclxuICB9O1xyXG4gIHJlc3BvbmQubWVkaWFRdWVyaWVzU3VwcG9ydGVkID0gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYShcIm9ubHkgYWxsXCIpICE9PSBudWxsICYmIHcubWF0Y2hNZWRpYShcIm9ubHkgYWxsXCIpLm1hdGNoZXM7XHJcbiAgaWYgKHJlc3BvbmQubWVkaWFRdWVyaWVzU3VwcG9ydGVkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIHZhciBkb2MgPSB3LmRvY3VtZW50LCBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudCwgbWVkaWFzdHlsZXMgPSBbXSwgcnVsZXMgPSBbXSwgYXBwZW5kZWRFbHMgPSBbXSwgcGFyc2VkU2hlZXRzID0ge30sIHJlc2l6ZVRocm90dGxlID0gMzAsIGhlYWQgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdIHx8IGRvY0VsZW0sIGJhc2UgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJiYXNlXCIpWzBdLCBsaW5rcyA9IGhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpLCBsYXN0Q2FsbCwgcmVzaXplRGVmZXIsIGVtaW5weCwgZ2V0RW1WYWx1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHJldCwgZGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIGJvZHkgPSBkb2MuYm9keSwgb3JpZ2luYWxIVE1MRm9udFNpemUgPSBkb2NFbGVtLnN0eWxlLmZvbnRTaXplLCBvcmlnaW5hbEJvZHlGb250U2l6ZSA9IGJvZHkgJiYgYm9keS5zdHlsZS5mb250U2l6ZSwgZmFrZVVzZWQgPSBmYWxzZTtcclxuICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbVwiO1xyXG4gICAgaWYgKCFib2R5KSB7XHJcbiAgICAgIGJvZHkgPSBmYWtlVXNlZCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtcclxuICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBkb2NFbGVtLnN0eWxlLmZvbnRTaXplID0gXCIxMDAlXCI7XHJcbiAgICBib2R5LnN0eWxlLmZvbnRTaXplID0gXCIxMDAlXCI7XHJcbiAgICBib2R5LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICBpZiAoZmFrZVVzZWQpIHtcclxuICAgICAgZG9jRWxlbS5pbnNlcnRCZWZvcmUoYm9keSwgZG9jRWxlbS5maXJzdENoaWxkKTtcclxuICAgIH1cclxuICAgIHJldCA9IGRpdi5vZmZzZXRXaWR0aDtcclxuICAgIGlmIChmYWtlVXNlZCkge1xyXG4gICAgICBkb2NFbGVtLnJlbW92ZUNoaWxkKGJvZHkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm9keS5yZW1vdmVDaGlsZChkaXYpO1xyXG4gICAgfVxyXG4gICAgZG9jRWxlbS5zdHlsZS5mb250U2l6ZSA9IG9yaWdpbmFsSFRNTEZvbnRTaXplO1xyXG4gICAgaWYgKG9yaWdpbmFsQm9keUZvbnRTaXplKSB7XHJcbiAgICAgIGJvZHkuc3R5bGUuZm9udFNpemUgPSBvcmlnaW5hbEJvZHlGb250U2l6ZTtcclxuICAgIH1cclxuICAgIHJldCA9IGVtaW5weCA9IHBhcnNlRmxvYXQocmV0KTtcclxuICAgIHJldHVybiByZXQ7XHJcbiAgfSwgYXBwbHlNZWRpYSA9IGZ1bmN0aW9uKGZyb21SZXNpemUpIHtcclxuICAgIHZhciBuYW1lID0gXCJjbGllbnRXaWR0aFwiLCBkb2NFbGVtUHJvcCA9IGRvY0VsZW1bbmFtZV0sIGN1cnJXaWR0aCA9IGRvYy5jb21wYXRNb2RlID09PSBcIkNTUzFDb21wYXRcIiAmJiBkb2NFbGVtUHJvcCB8fCBkb2MuYm9keVtuYW1lXSB8fCBkb2NFbGVtUHJvcCwgc3R5bGVCbG9ja3MgPSB7fSwgbGFzdExpbmsgPSBsaW5rc1tsaW5rcy5sZW5ndGggLSAxXSwgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICBpZiAoZnJvbVJlc2l6ZSAmJiBsYXN0Q2FsbCAmJiBub3cgLSBsYXN0Q2FsbCA8IHJlc2l6ZVRocm90dGxlKSB7XHJcbiAgICAgIHcuY2xlYXJUaW1lb3V0KHJlc2l6ZURlZmVyKTtcclxuICAgICAgcmVzaXplRGVmZXIgPSB3LnNldFRpbWVvdXQoYXBwbHlNZWRpYSwgcmVzaXplVGhyb3R0bGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsYXN0Q2FsbCA9IG5vdztcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgaW4gbWVkaWFzdHlsZXMpIHtcclxuICAgICAgaWYgKG1lZGlhc3R5bGVzLmhhc093blByb3BlcnR5KGkpKSB7XHJcbiAgICAgICAgdmFyIHRoaXNzdHlsZSA9IG1lZGlhc3R5bGVzW2ldLCBtaW4gPSB0aGlzc3R5bGUubWludywgbWF4ID0gdGhpc3N0eWxlLm1heHcsIG1pbm51bGwgPSBtaW4gPT09IG51bGwsIG1heG51bGwgPSBtYXggPT09IG51bGwsIGVtID0gXCJlbVwiO1xyXG4gICAgICAgIGlmICghIW1pbikge1xyXG4gICAgICAgICAgbWluID0gcGFyc2VGbG9hdChtaW4pICogKG1pbi5pbmRleE9mKGVtKSA+IC0xID8gZW1pbnB4IHx8IGdldEVtVmFsdWUoKSA6IDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISFtYXgpIHtcclxuICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQobWF4KSAqIChtYXguaW5kZXhPZihlbSkgPiAtMSA/IGVtaW5weCB8fCBnZXRFbVZhbHVlKCkgOiAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzc3R5bGUuaGFzcXVlcnkgfHwgKCFtaW5udWxsIHx8ICFtYXhudWxsKSAmJiAobWlubnVsbCB8fCBjdXJyV2lkdGggPj0gbWluKSAmJiAobWF4bnVsbCB8fCBjdXJyV2lkdGggPD0gbWF4KSkge1xyXG4gICAgICAgICAgaWYgKCFzdHlsZUJsb2Nrc1t0aGlzc3R5bGUubWVkaWFdKSB7XHJcbiAgICAgICAgICAgIHN0eWxlQmxvY2tzW3RoaXNzdHlsZS5tZWRpYV0gPSBbXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHN0eWxlQmxvY2tzW3RoaXNzdHlsZS5tZWRpYV0ucHVzaChydWxlc1t0aGlzc3R5bGUucnVsZXNdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAodmFyIGogaW4gYXBwZW5kZWRFbHMpIHtcclxuICAgICAgaWYgKGFwcGVuZGVkRWxzLmhhc093blByb3BlcnR5KGopKSB7XHJcbiAgICAgICAgaWYgKGFwcGVuZGVkRWxzW2pdICYmIGFwcGVuZGVkRWxzW2pdLnBhcmVudE5vZGUgPT09IGhlYWQpIHtcclxuICAgICAgICAgIGhlYWQucmVtb3ZlQ2hpbGQoYXBwZW5kZWRFbHNbal0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXBwZW5kZWRFbHMubGVuZ3RoID0gMDtcclxuICAgIGZvciAodmFyIGsgaW4gc3R5bGVCbG9ja3MpIHtcclxuICAgICAgaWYgKHN0eWxlQmxvY2tzLmhhc093blByb3BlcnR5KGspKSB7XHJcbiAgICAgICAgdmFyIHNzID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSwgY3NzID0gc3R5bGVCbG9ja3Nba10uam9pbihcIlxcblwiKTtcclxuICAgICAgICBzcy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG4gICAgICAgIHNzLm1lZGlhID0gaztcclxuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzcywgbGFzdExpbmsubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIGlmIChzcy5zdHlsZVNoZWV0KSB7XHJcbiAgICAgICAgICBzcy5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNzLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBwZW5kZWRFbHMucHVzaChzcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB0cmFuc2xhdGUgPSBmdW5jdGlvbihzdHlsZXMsIGhyZWYsIG1lZGlhKSB7XHJcbiAgICB2YXIgcXMgPSBzdHlsZXMucmVwbGFjZShyZXNwb25kLnJlZ2V4LmNvbW1lbnRzLCBcIlwiKS5yZXBsYWNlKHJlc3BvbmQucmVnZXgua2V5ZnJhbWVzLCBcIlwiKS5tYXRjaChyZXNwb25kLnJlZ2V4Lm1lZGlhKSwgcWwgPSBxcyAmJiBxcy5sZW5ndGggfHwgMDtcclxuICAgIGhyZWYgPSBocmVmLnN1YnN0cmluZygwLCBocmVmLmxhc3RJbmRleE9mKFwiL1wiKSk7XHJcbiAgICB2YXIgcmVwVXJscyA9IGZ1bmN0aW9uKGNzcykge1xyXG4gICAgICByZXR1cm4gY3NzLnJlcGxhY2UocmVzcG9uZC5yZWdleC51cmxzLCBcIiQxXCIgKyBocmVmICsgXCIkMiQzXCIpO1xyXG4gICAgfSwgdXNlTWVkaWEgPSAhcWwgJiYgbWVkaWE7XHJcbiAgICBpZiAoaHJlZi5sZW5ndGgpIHtcclxuICAgICAgaHJlZiArPSBcIi9cIjtcclxuICAgIH1cclxuICAgIGlmICh1c2VNZWRpYSkge1xyXG4gICAgICBxbCA9IDE7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHFsOyBpKyspIHtcclxuICAgICAgdmFyIGZ1bGxxLCB0aGlzcSwgZWFjaHEsIGVxbDtcclxuICAgICAgaWYgKHVzZU1lZGlhKSB7XHJcbiAgICAgICAgZnVsbHEgPSBtZWRpYTtcclxuICAgICAgICBydWxlcy5wdXNoKHJlcFVybHMoc3R5bGVzKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZnVsbHEgPSBxc1tpXS5tYXRjaChyZXNwb25kLnJlZ2V4LmZpbmRTdHlsZXMpICYmIFJlZ0V4cC4kMTtcclxuICAgICAgICBydWxlcy5wdXNoKFJlZ0V4cC4kMiAmJiByZXBVcmxzKFJlZ0V4cC4kMikpO1xyXG4gICAgICB9XHJcbiAgICAgIGVhY2hxID0gZnVsbHEuc3BsaXQoXCIsXCIpO1xyXG4gICAgICBlcWwgPSBlYWNocS5sZW5ndGg7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZXFsOyBqKyspIHtcclxuICAgICAgICB0aGlzcSA9IGVhY2hxW2pdO1xyXG4gICAgICAgIGlmIChpc1Vuc3VwcG9ydGVkTWVkaWFRdWVyeSh0aGlzcSkpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZWRpYXN0eWxlcy5wdXNoKHtcclxuICAgICAgICAgIG1lZGlhOiB0aGlzcS5zcGxpdChcIihcIilbMF0ubWF0Y2gocmVzcG9uZC5yZWdleC5vbmx5KSAmJiBSZWdFeHAuJDIgfHwgXCJhbGxcIixcclxuICAgICAgICAgIHJ1bGVzOiBydWxlcy5sZW5ndGggLSAxLFxyXG4gICAgICAgICAgaGFzcXVlcnk6IHRoaXNxLmluZGV4T2YoXCIoXCIpID4gLTEsXHJcbiAgICAgICAgICBtaW53OiB0aGlzcS5tYXRjaChyZXNwb25kLnJlZ2V4Lm1pbncpICYmIHBhcnNlRmxvYXQoUmVnRXhwLiQxKSArIChSZWdFeHAuJDIgfHwgXCJcIiksXHJcbiAgICAgICAgICBtYXh3OiB0aGlzcS5tYXRjaChyZXNwb25kLnJlZ2V4Lm1heHcpICYmIHBhcnNlRmxvYXQoUmVnRXhwLiQxKSArIChSZWdFeHAuJDIgfHwgXCJcIilcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXBwbHlNZWRpYSgpO1xyXG4gIH0sIG1ha2VSZXF1ZXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHJlcXVlc3RRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgdmFyIHRoaXNSZXF1ZXN0ID0gcmVxdWVzdFF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgIGFqYXgodGhpc1JlcXVlc3QuaHJlZiwgZnVuY3Rpb24oc3R5bGVzKSB7XHJcbiAgICAgICAgdHJhbnNsYXRlKHN0eWxlcywgdGhpc1JlcXVlc3QuaHJlZiwgdGhpc1JlcXVlc3QubWVkaWEpO1xyXG4gICAgICAgIHBhcnNlZFNoZWV0c1t0aGlzUmVxdWVzdC5ocmVmXSA9IHRydWU7XHJcbiAgICAgICAgdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbWFrZVJlcXVlc3RzKCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sIHJpcENTUyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgc2hlZXQgPSBsaW5rc1tpXSwgaHJlZiA9IHNoZWV0LmhyZWYsIG1lZGlhID0gc2hlZXQubWVkaWEsIGlzQ1NTID0gc2hlZXQucmVsICYmIHNoZWV0LnJlbC50b0xvd2VyQ2FzZSgpID09PSBcInN0eWxlc2hlZXRcIjtcclxuICAgICAgaWYgKCEhaHJlZiAmJiBpc0NTUyAmJiAhcGFyc2VkU2hlZXRzW2hyZWZdKSB7XHJcbiAgICAgICAgaWYgKHNoZWV0LnN0eWxlU2hlZXQgJiYgc2hlZXQuc3R5bGVTaGVldC5yYXdDc3NUZXh0KSB7XHJcbiAgICAgICAgICB0cmFuc2xhdGUoc2hlZXQuc3R5bGVTaGVldC5yYXdDc3NUZXh0LCBocmVmLCBtZWRpYSk7XHJcbiAgICAgICAgICBwYXJzZWRTaGVldHNbaHJlZl0gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoIS9eKFthLXpBLVo6XSpcXC9cXC8pLy50ZXN0KGhyZWYpICYmICFiYXNlIHx8IGhyZWYucmVwbGFjZShSZWdFeHAuJDEsIFwiXCIpLnNwbGl0KFwiL1wiKVswXSA9PT0gdy5sb2NhdGlvbi5ob3N0KSB7XHJcbiAgICAgICAgICAgIGlmIChocmVmLnN1YnN0cmluZygwLCAyKSA9PT0gXCIvL1wiKSB7XHJcbiAgICAgICAgICAgICAgaHJlZiA9IHcubG9jYXRpb24ucHJvdG9jb2wgKyBocmVmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcXVlc3RRdWV1ZS5wdXNoKHtcclxuICAgICAgICAgICAgICBocmVmOiBocmVmLFxyXG4gICAgICAgICAgICAgIG1lZGlhOiBtZWRpYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG1ha2VSZXF1ZXN0cygpO1xyXG4gIH07XHJcbiAgcmlwQ1NTKCk7XHJcbiAgcmVzcG9uZC51cGRhdGUgPSByaXBDU1M7XHJcbiAgcmVzcG9uZC5nZXRFbVZhbHVlID0gZ2V0RW1WYWx1ZTtcclxuICBmdW5jdGlvbiBjYWxsTWVkaWEoKSB7XHJcbiAgICBhcHBseU1lZGlhKHRydWUpO1xyXG4gIH1cclxuICBpZiAody5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgICB3LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2FsbE1lZGlhLCBmYWxzZSk7XHJcbiAgfSBlbHNlIGlmICh3LmF0dGFjaEV2ZW50KSB7XHJcbiAgICB3LmF0dGFjaEV2ZW50KFwib25yZXNpemVcIiwgY2FsbE1lZGlhKTtcclxuICB9XHJcbn0pKHRoaXMpOyIsIi8qKlxyXG4gKiBqUXVlcnkgQ1NTIEN1c3RvbWl6YWJsZSBTY3JvbGxiYXJcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTUsIFl1cml5IEtoYWJhcm92XHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLlxyXG4gKlxyXG4gKiBJZiB5b3UgZm91bmQgYnVnLCBwbGVhc2UgY29udGFjdCBtZSB2aWEgZW1haWwgPDEzcmVhbDAwOEBnbWFpbC5jb20+XHJcbiAqXHJcbiAqIEBhdXRob3IgWXVyaXkgS2hhYmFyb3YgYWthIEdyb21vXHJcbiAqIEB2ZXJzaW9uIDAuMi4xMFxyXG4gKiBAdXJsIGh0dHBzOi8vZ2l0aHViLmNvbS9ncm9tby9qcXVlcnkuc2Nyb2xsYmFyL1xyXG4gKlxyXG4gKi9cclxuO1xyXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3Rvcnkocm9vdC5qUXVlcnkpO1xyXG4gICAgfVxyXG59KHRoaXMsIGZ1bmN0aW9uICgkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gaW5pdCBmbGFncyAmIHZhcmlhYmxlc1xyXG4gICAgdmFyIGRlYnVnID0gZmFsc2U7XHJcblxyXG4gICAgdmFyIGJyb3dzZXIgPSB7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgbmFtZTogJ3Njcm9sbGJhcidcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1hY29zeDogL21hYy9pLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxcclxuICAgICAgICBtb2JpbGU6IC9hbmRyb2lkfHdlYm9zfGlwaG9uZXxpcGFkfGlwb2R8YmxhY2tiZXJyeS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgb3ZlcmxheTogbnVsbCxcclxuICAgICAgICBzY3JvbGw6IG51bGwsXHJcbiAgICAgICAgc2Nyb2xsczogW10sXHJcbiAgICAgICAgd2Via2l0OiAvd2Via2l0L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL2VkZ2VcXC9cXGQrL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxyXG4gICAgfTtcclxuXHJcbiAgICBicm93c2VyLnNjcm9sbHMuYWRkID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5zdGFuY2UpLnB1c2goaW5zdGFuY2UpO1xyXG4gICAgfTtcclxuICAgIGJyb3dzZXIuc2Nyb2xscy5yZW1vdmUgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB3aGlsZSAoJC5pbkFycmF5KGluc3RhbmNlLCB0aGlzKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWNlKCQuaW5BcnJheShpbnN0YW5jZSwgdGhpcyksIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIFwiYXV0b1Njcm9sbFNpemVcIjogdHJ1ZSwgICAgIC8vIGF1dG9tYXRpY2FsbHkgY2FsY3VsYXRlIHNjcm9sbHNpemVcclxuICAgICAgICBcImF1dG9VcGRhdGVcIjogdHJ1ZSwgICAgICAgICAvLyB1cGRhdGUgc2Nyb2xsYmFyIGlmIGNvbnRlbnQvY29udGFpbmVyIHNpemUgY2hhbmdlZFxyXG4gICAgICAgIFwiZGVidWdcIjogZmFsc2UsICAgICAgICAgICAgIC8vIGRlYnVnIG1vZGVcclxuICAgICAgICBcImRpc2FibGVCb2R5U2Nyb2xsXCI6IGZhbHNlLCAvLyBkaXNhYmxlIGJvZHkgc2Nyb2xsIGlmIG1vdXNlIG92ZXIgY29udGFpbmVyXHJcbiAgICAgICAgXCJkdXJhdGlvblwiOiAyMDAsICAgICAgICAgICAgLy8gc2Nyb2xsIGFuaW1hdGUgZHVyYXRpb24gaW4gbXNcclxuICAgICAgICBcImlnbm9yZU1vYmlsZVwiOiBmYWxzZSwgICAgICAvLyBpZ25vcmUgbW9iaWxlIGRldmljZXNcclxuICAgICAgICBcImlnbm9yZU92ZXJsYXlcIjogZmFsc2UsICAgICAvLyBpZ25vcmUgYnJvd3NlcnMgd2l0aCBvdmVybGF5IHNjcm9sbGJhcnMgKG1vYmlsZSwgTWFjT1MpXHJcbiAgICAgICAgXCJzY3JvbGxTdGVwXCI6IDMwLCAgICAgICAgICAgLy8gc2Nyb2xsIHN0ZXAgZm9yIHNjcm9sbGJhciBhcnJvd3NcclxuICAgICAgICBcInNob3dBcnJvd3NcIjogZmFsc2UsICAgICAgICAvLyBhZGQgY2xhc3MgdG8gc2hvdyBhcnJvd3NcclxuICAgICAgICBcInN0ZXBTY3JvbGxpbmdcIjogdHJ1ZSwgICAgICAvLyB3aGVuIHNjcm9sbGluZyB0byBzY3JvbGxiYXIgbW91c2Vkb3duIHBvc2l0aW9uXHJcblxyXG4gICAgICAgIFwic2Nyb2xseFwiOiBudWxsLCAgICAgICAgICAgIC8vIGhvcml6b250YWwgc2Nyb2xsIGVsZW1lbnRcclxuICAgICAgICBcInNjcm9sbHlcIjogbnVsbCwgICAgICAgICAgICAvLyB2ZXJ0aWNhbCBzY3JvbGwgZWxlbWVudFxyXG5cclxuICAgICAgICBcIm9uRGVzdHJveVwiOiBudWxsLCAgICAgICAgICAvLyBjYWxsYmFjayBmdW5jdGlvbiBvbiBkZXN0cm95LFxyXG4gICAgICAgIFwib25Jbml0XCI6IG51bGwsICAgICAgICAgICAgIC8vIGNhbGxiYWNrIGZ1bmN0aW9uIG9uIGZpcnN0IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgXCJvblNjcm9sbFwiOiBudWxsLCAgICAgICAgICAgLy8gY2FsbGJhY2sgZnVuY3Rpb24gb24gY29udGVudCBzY3JvbGxpbmdcclxuICAgICAgICBcIm9uVXBkYXRlXCI6IG51bGwgICAgICAgICAgICAvLyBjYWxsYmFjayBmdW5jdGlvbiBvbiBpbml0L3Jlc2l6ZSAoYmVmb3JlIHNjcm9sbGJhciBzaXplIGNhbGN1bGF0aW9uKVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIEJhc2VTY3JvbGxiYXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XHJcblxyXG4gICAgICAgIGlmICghYnJvd3Nlci5zY3JvbGwpIHtcclxuICAgICAgICAgICAgYnJvd3Nlci5vdmVybGF5ID0gaXNTY3JvbGxPdmVybGF5c0NvbnRlbnQoKTtcclxuICAgICAgICAgICAgYnJvd3Nlci5zY3JvbGwgPSBnZXRCcm93c2VyU2Nyb2xsU2l6ZSgpO1xyXG4gICAgICAgICAgICB1cGRhdGVTY3JvbGxiYXJzKCk7XHJcblxyXG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3JjZVVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyb3dzZXIuc2Nyb2xsICYmIChicm93c2VyLnNjcm9sbC5oZWlnaHQgfHwgYnJvd3Nlci5zY3JvbGwud2lkdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbCA9IGdldEJyb3dzZXJTY3JvbGxTaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbC5oZWlnaHQgIT09IGJyb3dzZXIuc2Nyb2xsLmhlaWdodCB8fCBzY3JvbGwud2lkdGggIT09IGJyb3dzZXIuc2Nyb2xsLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXIuc2Nyb2xsID0gc2Nyb2xsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZVVwZGF0ZSA9IHRydWU7IC8vIGhhbmRsZSBwYWdlIHpvb21cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTY3JvbGxiYXJzKGZvcmNlVXBkYXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9ICcuc2Nyb2xsYmFyXycgKyBicm93c2VyLmRhdGEuaW5kZXgrKztcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIHdpbmRvdy5qUXVlcnlTY3JvbGxiYXJPcHRpb25zIHx8IHt9KTtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNjcm9sbHggPSB7fTtcclxuICAgICAgICB0aGlzLnNjcm9sbHkgPSB7fTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmRhdGEoYnJvd3Nlci5kYXRhLm5hbWUsIHRoaXMpO1xyXG4gICAgICAgIGJyb3dzZXIuc2Nyb2xscy5hZGQodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VTY3JvbGxiYXIucHJvdG90eXBlID0ge1xyXG5cclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVEYXRhKGJyb3dzZXIuZGF0YS5uYW1lKTtcclxuICAgICAgICAgICAgYnJvd3Nlci5zY3JvbGxzLnJlbW92ZSh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgdmFyaWFibGVzXHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdGhpcy5jb250YWluZXIuc2Nyb2xsTGVmdCgpO1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy5jb250YWluZXIuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy53cmFwcGVyKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogXCJcIixcclxuICAgICAgICAgICAgICAgIFwibWFyZ2luXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIm1heC1oZWlnaHRcIjogXCJcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzY3JvbGwtY29udGVudCBzY3JvbGwtc2Nyb2xseF92aXNpYmxlIHNjcm9sbC1zY3JvbGx5X3Zpc2libGUnKVxyXG4gICAgICAgICAgICAgICAgLm9mZih0aGlzLm5hbWVzcGFjZSlcclxuICAgICAgICAgICAgICAgIC5zY3JvbGxMZWZ0KHNjcm9sbExlZnQpXHJcbiAgICAgICAgICAgICAgICAuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbHguc2Nyb2xsLnJlbW92ZUNsYXNzKCdzY3JvbGwtc2Nyb2xseF92aXNpYmxlJykuZmluZCgnZGl2JykuYW5kU2VsZigpLm9mZih0aGlzLm5hbWVzcGFjZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xseS5zY3JvbGwucmVtb3ZlQ2xhc3MoJ3Njcm9sbC1zY3JvbGx5X3Zpc2libGUnKS5maW5kKCdkaXYnKS5hbmRTZWxmKCkub2ZmKHRoaXMubmFtZXNwYWNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLmFkZCgnYm9keScpLm9mZih0aGlzLm5hbWVzcGFjZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5vbkRlc3Ryb3kpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRlc3Ryb3kuYXBwbHkodGhpcywgW3RoaXMuY29udGFpbmVyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IHZhcmlhYmxlc1xyXG4gICAgICAgICAgICB2YXIgUyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBjID0gdGhpcy5jb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBjdyA9IHRoaXMuY29udGFpbmVyV3JhcHBlciB8fCBjLFxyXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gdGhpcy5uYW1lc3BhY2UsXHJcbiAgICAgICAgICAgICAgICBvID0gJC5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KSxcclxuICAgICAgICAgICAgICAgIHMgPSB7eDogdGhpcy5zY3JvbGx4LCB5OiB0aGlzLnNjcm9sbHl9LFxyXG4gICAgICAgICAgICAgICAgdyA9IHRoaXMud3JhcHBlcjtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbml0U2Nyb2xsID0ge1xyXG4gICAgICAgICAgICAgICAgXCJzY3JvbGxMZWZ0XCI6IGMuc2Nyb2xsTGVmdCgpLFxyXG4gICAgICAgICAgICAgICAgXCJzY3JvbGxUb3BcIjogYy5zY3JvbGxUb3AoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gZG8gbm90IGluaXQgaWYgaW4gaWdub3JhYmxlIGJyb3dzZXJcclxuICAgICAgICAgICAgaWYgKChicm93c2VyLm1vYmlsZSAmJiBvLmlnbm9yZU1vYmlsZSlcclxuICAgICAgICAgICAgICAgIHx8IChicm93c2VyLm92ZXJsYXkgJiYgby5pZ25vcmVPdmVybGF5KVxyXG4gICAgICAgICAgICAgICAgfHwgKGJyb3dzZXIubWFjb3N4ICYmICFicm93c2VyLndlYmtpdCkgLy8gc3RpbGwgcmVxdWlyZWQgdG8gaWdub3JlIG5vbldlYktpdCBicm93c2VycyBvbiBNYWNcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IHNjcm9sbCBjb250YWluZXJcclxuICAgICAgICAgICAgaWYgKCF3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIgPSB3ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnc2Nyb2xsLXdyYXBwZXInKS5hZGRDbGFzcyhjLmF0dHIoJ2NsYXNzJykpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCBjLmNzcygncG9zaXRpb24nKSA9PSAnYWJzb2x1dGUnID8gJ2Fic29sdXRlJyA6ICdmaXhlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmluc2VydEJlZm9yZShjKS5hcHBlbmQoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGMuaXMoJ3RleHRhcmVhJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcldyYXBwZXIgPSBjdyA9ICQoJzxkaXY+JykuaW5zZXJ0QmVmb3JlKGMpLmFwcGVuZChjKTtcclxuICAgICAgICAgICAgICAgICAgICB3LmFkZENsYXNzKCdzY3JvbGwtdGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjdy5hZGRDbGFzcygnc2Nyb2xsLWNvbnRlbnQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFyZ2luLWJvdHRvbVwiOiBicm93c2VyLnNjcm9sbC5oZWlnaHQgKiAtMSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXJnaW4tcmlnaHRcIjogYnJvd3Nlci5zY3JvbGwud2lkdGggKiAtMSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGMub24oJ3Njcm9sbCcgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oby5vblNjcm9sbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5vblNjcm9sbC5jYWxsKFMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4U2Nyb2xsXCI6IHMueS5tYXhTY3JvbGxPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNjcm9sbFwiOiBjLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaXplXCI6IHMueS5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmxlXCI6IHMueS52aXNpYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4U2Nyb2xsXCI6IHMueC5tYXhTY3JvbGxPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNjcm9sbFwiOiBjLnNjcm9sbExlZnQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiBzLnguc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlzaWJsZVwiOiBzLngudmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcy54LmlzVmlzaWJsZSAmJiBzLnguc2Nyb2xsLmJhci5jc3MoJ2xlZnQnLCBjLnNjcm9sbExlZnQoKSAqIHMueC5reCArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMueS5pc1Zpc2libGUgJiYgcy55LnNjcm9sbC5iYXIuY3NzKCd0b3AnLCBjLnNjcm9sbFRvcCgpICogcy55Lmt4ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBwcmV2ZW50IG5hdGl2ZSBzY3JvbGxiYXJzIHRvIGJlIHZpc2libGUgb24gI2FuY2hvciBjbGljayAqL1xyXG4gICAgICAgICAgICAgICAgdy5vbignc2Nyb2xsJyArIG5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuc2Nyb2xsVG9wKDApLnNjcm9sbExlZnQoMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoby5kaXNhYmxlQm9keVNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVNb3VzZVNjcm9sbCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ZlcnRpY2FsU2Nyb2xsKGV2ZW50KSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnkuaXNWaXNpYmxlICYmIHMueS5tb3VzZXdoZWVsKGV2ZW50KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnguaXNWaXNpYmxlICYmIHMueC5tb3VzZXdoZWVsKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHcub24oJ01vek1vdXNlUGl4ZWxTY3JvbGwnICsgbmFtZXNwYWNlLCBoYW5kbGVNb3VzZVNjcm9sbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdy5vbignbW91c2V3aGVlbCcgKyBuYW1lc3BhY2UsIGhhbmRsZU1vdXNlU2Nyb2xsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXIubW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcub24oJ3RvdWNoc3RhcnQnICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAmJiBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gfHwgZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxUb3VjaCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhZ2VYXCI6IHRvdWNoLnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFnZVlcIjogdG91Y2gucGFnZVlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxTY3JvbGwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsZWZ0XCI6IGMuc2Nyb2xsTGVmdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCI6IGMuc2Nyb2xsVG9wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJyArIG5hbWVzcGFjZSwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoID0gZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXSB8fCBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnNjcm9sbExlZnQob3JpZ2luYWxTY3JvbGwubGVmdCArIG9yaWdpbmFsVG91Y2gucGFnZVggLSB0b3VjaC5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5zY3JvbGxUb3Aob3JpZ2luYWxTY3JvbGwudG9wICsgb3JpZ2luYWxUb3VjaC5wYWdlWSAtIHRvdWNoLnBhZ2VZKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbigndG91Y2hlbmQnICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKG5hbWVzcGFjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihvLm9uSW5pdCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIG8ub25Jbml0LmFwcGx5KHRoaXMsIFtjXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFyZ2luLWJvdHRvbVwiOiBicm93c2VyLnNjcm9sbC5oZWlnaHQgKiAtMSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXJnaW4tcmlnaHRcIjogYnJvd3Nlci5zY3JvbGwud2lkdGggKiAtMSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IHNjcm9sbGJhcnMgJiByZWNhbGN1bGF0ZSBzaXplc1xyXG4gICAgICAgICAgICAkLmVhY2gocywgZnVuY3Rpb24gKGQsIHNjcm9sbHgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbEZvcndhcmQgPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IChkID09PSAneCcpID8gJ3Njcm9sbExlZnQnIDogJ3Njcm9sbFRvcCc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU3RlcCA9IG8uc2Nyb2xsU3RlcDtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE9mZnNldCA9IGNbc2Nyb2xsT2Zmc2V0XSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNbc2Nyb2xsT2Zmc2V0XShjdXJyZW50T2Zmc2V0ICsgc2Nyb2xsU3RlcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbEZvcndhcmQgPT0gMSAmJiAoY3VycmVudE9mZnNldCArIHNjcm9sbFN0ZXApID49IHNjcm9sbFRvVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPZmZzZXQgPSBjW3Njcm9sbE9mZnNldF0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsRm9yd2FyZCA9PSAtMSAmJiAoY3VycmVudE9mZnNldCArIHNjcm9sbFN0ZXApIDw9IHNjcm9sbFRvVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPZmZzZXQgPSBjW3Njcm9sbE9mZnNldF0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY1tzY3JvbGxPZmZzZXRdKCkgPT0gY3VycmVudE9mZnNldCAmJiBzY3JvbGxDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb1ZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbHguc2Nyb2xsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsID0gUy5fZ2V0U2Nyb2xsKG9bJ3Njcm9sbCcgKyBkXSkuYWRkQ2xhc3MoJ3Njcm9sbC0nICsgZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG8uc2hvd0Fycm93cyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsLmFkZENsYXNzKCdzY3JvbGwtZWxlbWVudF9hcnJvd3NfdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xseC5tb3VzZXdoZWVsID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbHguaXNWaXNpYmxlIHx8IChkID09PSAneCcgJiYgaXNWZXJ0aWNhbFNjcm9sbChldmVudCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PT0gJ3knICYmICFpc1ZlcnRpY2FsU2Nyb2xsKGV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy54Lm1vdXNld2hlZWwoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSAqIC0xIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4U2Nyb2xsVmFsdWUgPSBzY3JvbGx4LnNpemUgLSBzY3JvbGx4LnZpc2libGUgLSBzY3JvbGx4Lm9mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZGVsdGEgPiAwICYmIHNjcm9sbFRvVmFsdWUgPCBtYXhTY3JvbGxWYWx1ZSkgfHwgKGRlbHRhIDwgMCAmJiBzY3JvbGxUb1ZhbHVlID4gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvVmFsdWUgPSBzY3JvbGxUb1ZhbHVlICsgZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9WYWx1ZSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9WYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9WYWx1ZSA+IG1heFNjcm9sbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvVmFsdWUgPSBtYXhTY3JvbGxWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnNjcm9sbFRvID0gUy5zY3JvbGxUbyB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMuc2Nyb2xsVG9bc2Nyb2xsT2Zmc2V0XSA9IHNjcm9sbFRvVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUy5zY3JvbGxUbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnN0b3AoKS5hbmltYXRlKFMuc2Nyb2xsVG8sIDI0MCwgJ2xpbmVhcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvVmFsdWUgPSBjW3Njcm9sbE9mZnNldF0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMuc2Nyb2xsVG8gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xseC5zY3JvbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdNb3pNb3VzZVBpeGVsU2Nyb2xsJyArIG5hbWVzcGFjZSwgc2Nyb2xseC5tb3VzZXdoZWVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ21vdXNld2hlZWwnICsgbmFtZXNwYWNlLCBzY3JvbGx4Lm1vdXNld2hlZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VlbnRlcicgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvVmFsdWUgPSBjW3Njcm9sbE9mZnNldF0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBhcnJvd3MgJiBzY3JvbGwgaW5uZXIgbW91c2Vkb3duIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xseC5zY3JvbGwuZmluZCgnLnNjcm9sbC1hcnJvdywgLnNjcm9sbC1lbGVtZW50X3RyYWNrJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24nICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT0gMSkgLy8gbG1iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRm9yd2FyZCA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJldmVudE9mZnNldFwiOiBldmVudFsoZCA9PT0gJ3gnKSA/ICdwYWdlWCcgOiAncGFnZVknXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1heFNjcm9sbFZhbHVlXCI6IHNjcm9sbHguc2l6ZSAtIHNjcm9sbHgudmlzaWJsZSAtIHNjcm9sbHgub2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2Nyb2xsYmFyT2Zmc2V0XCI6IHNjcm9sbHguc2Nyb2xsLmJhci5vZmZzZXQoKVsoZCA9PT0gJ3gnKSA/ICdsZWZ0JyA6ICd0b3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNjcm9sbGJhclNpemVcIjogc2Nyb2xseC5zY3JvbGwuYmFyWyhkID09PSAneCcpID8gJ291dGVyV2lkdGgnIDogJ291dGVySGVpZ2h0J10oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gMCwgdGltZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzY3JvbGwtYXJyb3cnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEZvcndhcmQgPSAkKHRoaXMpLmhhc0NsYXNzKFwic2Nyb2xsLWFycm93X21vcmVcIikgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsU3RlcCA9IG8uc2Nyb2xsU3RlcCAqIHNjcm9sbEZvcndhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9WYWx1ZSA9IHNjcm9sbEZvcndhcmQgPiAwID8gZGF0YS5tYXhTY3JvbGxWYWx1ZSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEZvcndhcmQgPSAoZGF0YS5ldmVudE9mZnNldCA+IChkYXRhLnNjcm9sbGJhck9mZnNldCArIGRhdGEuc2Nyb2xsYmFyU2l6ZSkgPyAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGRhdGEuZXZlbnRPZmZzZXQgPCBkYXRhLnNjcm9sbGJhck9mZnNldCA/IC0xIDogMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFN0ZXAgPSBNYXRoLnJvdW5kKHNjcm9sbHgudmlzaWJsZSAqIDAuNzUpICogc2Nyb2xsRm9yd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb1ZhbHVlID0gKGRhdGEuZXZlbnRPZmZzZXQgLSBkYXRhLnNjcm9sbGJhck9mZnNldCAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLnN0ZXBTY3JvbGxpbmcgPyAoc2Nyb2xsRm9yd2FyZCA9PSAxID8gZGF0YS5zY3JvbGxiYXJTaXplIDogMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5yb3VuZChkYXRhLnNjcm9sbGJhclNpemUgLyAyKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvVmFsdWUgPSBjW3Njcm9sbE9mZnNldF0oKSArIChzY3JvbGxUb1ZhbHVlIC8gc2Nyb2xseC5reCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5zY3JvbGxUbyA9IFMuc2Nyb2xsVG8gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnNjcm9sbFRvW3Njcm9sbE9mZnNldF0gPSBvLnN0ZXBTY3JvbGxpbmcgPyBjW3Njcm9sbE9mZnNldF0oKSArIHNjcm9sbFN0ZXAgOiBzY3JvbGxUb1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnN0ZXBTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9WYWx1ZSA9IGNbc2Nyb2xsT2Zmc2V0XSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lciA9IHNldEludGVydmFsKHNjcm9sbFRvLCA0MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgby5kdXJhdGlvbiArIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFMuc2Nyb2xsVG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5hbmltYXRlKFMuc2Nyb2xsVG8sIG8uZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnNjcm9sbFRvID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUy5faGFuZGxlTW91c2VEb3duKHNjcm9sbENhbGxiYWNrLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2Nyb2xsYmFyIGRyYWcnbidkcm9wXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xseC5zY3JvbGwuYmFyLm9uKCdtb3VzZWRvd24nICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCAhPSAxKSAvLyBsbWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50UG9zaXRpb24gPSBldmVudFsoZCA9PT0gJ3gnKSA/ICdwYWdlWCcgOiAncGFnZVknXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluaXRPZmZzZXQgPSBjW3Njcm9sbE9mZnNldF0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsLmFkZENsYXNzKCdzY3JvbGwtZHJhZ2dhYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlJyArIG5hbWVzcGFjZSwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHBhcnNlSW50KChldmVudFsoZCA9PT0gJ3gnKSA/ICdwYWdlWCcgOiAncGFnZVknXSAtIGV2ZW50UG9zaXRpb24pIC8gc2Nyb2xseC5reCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY1tzY3JvbGxPZmZzZXRdKGluaXRPZmZzZXQgKyBkaWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUy5faGFuZGxlTW91c2VEb3duKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsLnJlbW92ZUNsYXNzKCdzY3JvbGwtZHJhZ2dhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb1ZhbHVlID0gY1tzY3JvbGxPZmZzZXRdKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyByZW1vdmUgY2xhc3NlcyAmIHJlc2V0IGFwcGxpZWQgc3R5bGVzXHJcbiAgICAgICAgICAgICQuZWFjaChzLCBmdW5jdGlvbiAoZCwgc2Nyb2xseCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbENsYXNzID0gJ3Njcm9sbC1zY3JvbGwnICsgZCArICdfdmlzaWJsZSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xseSA9IChkID09IFwieFwiKSA/IHMueSA6IHMueDtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGx4LnNjcm9sbC5yZW1vdmVDbGFzcyhzY3JvbGxDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGx5LnNjcm9sbC5yZW1vdmVDbGFzcyhzY3JvbGxDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBjdy5yZW1vdmVDbGFzcyhzY3JvbGxDbGFzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGluaXQgc2l6ZXNcclxuICAgICAgICAgICAgJC5lYWNoKHMsIGZ1bmN0aW9uIChkLCBzY3JvbGx4KSB7XHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZChzY3JvbGx4LCAoZCA9PSBcInhcIikgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvZmZzZXRcIjogcGFyc2VJbnQoYy5jc3MoJ2xlZnQnKSwgMTApIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzaXplXCI6IGMucHJvcCgnc2Nyb2xsV2lkdGgnKSxcclxuICAgICAgICAgICAgICAgICAgICBcInZpc2libGVcIjogdy53aWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9IDoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwib2Zmc2V0XCI6IHBhcnNlSW50KGMuY3NzKCd0b3AnKSwgMTApIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzaXplXCI6IGMucHJvcCgnc2Nyb2xsSGVpZ2h0JyksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmxlXCI6IHcuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzY3JvbGxiYXIgdmlzaWJpbGl0eS9kaW1lbnNpb25zXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjcm9sbCgneCcsIHRoaXMuc2Nyb2xseCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjcm9sbCgneScsIHRoaXMuc2Nyb2xseSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKG8ub25VcGRhdGUpKXtcclxuICAgICAgICAgICAgICAgIG8ub25VcGRhdGUuYXBwbHkodGhpcywgW2NdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHNjcm9sbCBzaXplXHJcbiAgICAgICAgICAgICQuZWFjaChzLCBmdW5jdGlvbiAoZCwgc2Nyb2xseCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjc3NPZmZzZXQgPSAoZCA9PT0gJ3gnKSA/ICdsZWZ0JyA6ICd0b3AnO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzc0Z1bGxTaXplID0gKGQgPT09ICd4JykgPyAnb3V0ZXJXaWR0aCcgOiAnb3V0ZXJIZWlnaHQnO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzc1NpemUgPSAoZCA9PT0gJ3gnKSA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludChjLmNzcyhjc3NPZmZzZXQpLCAxMCkgfHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgQXJlYVNpemUgPSBzY3JvbGx4LnNpemU7XHJcbiAgICAgICAgICAgICAgICB2YXIgQXJlYVZpc2libGUgPSBzY3JvbGx4LnZpc2libGUgKyBvZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFNpemUgPSBzY3JvbGx4LnNjcm9sbC5zaXplW2Nzc0Z1bGxTaXplXSgpICsgKHBhcnNlSW50KHNjcm9sbHguc2Nyb2xsLnNpemUuY3NzKGNzc09mZnNldCksIDEwKSB8fCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoby5hdXRvU2Nyb2xsU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsYmFyU2l6ZSA9IHBhcnNlSW50KHNjcm9sbFNpemUgKiBBcmVhVmlzaWJsZSAvIEFyZWFTaXplLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xseC5zY3JvbGwuYmFyLmNzcyhjc3NTaXplLCBzY3JvbGx4LnNjcm9sbGJhclNpemUgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGx4LnNjcm9sbGJhclNpemUgPSBzY3JvbGx4LnNjcm9sbC5iYXJbY3NzRnVsbFNpemVdKCk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGx4Lmt4ID0gKChzY3JvbGxTaXplIC0gc2Nyb2xseC5zY3JvbGxiYXJTaXplKSAvIChBcmVhU2l6ZSAtIEFyZWFWaXNpYmxlKSkgfHwgMTtcclxuICAgICAgICAgICAgICAgIHNjcm9sbHgubWF4U2Nyb2xsT2Zmc2V0ID0gQXJlYVNpemUgLSBBcmVhVmlzaWJsZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjLnNjcm9sbExlZnQoaW5pdFNjcm9sbC5zY3JvbGxMZWZ0KS5zY3JvbGxUb3AoaW5pdFNjcm9sbC5zY3JvbGxUb3ApLnRyaWdnZXIoJ3Njcm9sbCcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzY3JvbGx4L3Njcm9sbHkgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge01peGVkfSBzY3JvbGxcclxuICAgICAgICAgKiBAcmV0dXJucyB7alF1ZXJ5fSBzY3JvbGwgb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX2dldFNjcm9sbDogZnVuY3Rpb24gKHNjcm9sbCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBhZHZhbmNlZDogW1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRcIj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfY29ybmVyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNjcm9sbC1hcnJvdyBzY3JvbGwtYXJyb3dfbGVzc1wiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGwtYXJyb3cgc2Nyb2xsLWFycm93X21vcmVcIj48L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfb3V0ZXJcIj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfc2l6ZVwiPjwvZGl2PicsIC8vIHJlcXVpcmVkISB1c2VkIGZvciBzY3JvbGxiYXIgc2l6ZSBjYWxjdWxhdGlvbiAhXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF9pbm5lci13cmFwcGVyXCI+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNjcm9sbC1lbGVtZW50X2lubmVyIHNjcm9sbC1lbGVtZW50X3RyYWNrXCI+JywgLy8gdXNlZCBmb3IgaGFuZGxpbmcgc2Nyb2xsYmFyIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF9pbm5lci1ib3R0b21cIj48L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhclwiPicsIC8vIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGwtYmFyX2JvZHlcIj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhcl9ib2R5LWlubmVyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNjcm9sbC1iYXJfYm90dG9tXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNjcm9sbC1iYXJfY2VudGVyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgXS5qb2luKCcnKSxcclxuICAgICAgICAgICAgICAgIHNpbXBsZTogW1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRcIj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfb3V0ZXJcIj4nLFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfc2l6ZVwiPjwvZGl2PicsIC8vIHJlcXVpcmVkISB1c2VkIGZvciBzY3JvbGxiYXIgc2l6ZSBjYWxjdWxhdGlvbiAhXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF90cmFja1wiPjwvZGl2PicsIC8vIHVzZWQgZm9yIGhhbmRsaW5nIHNjcm9sbGJhciBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhclwiPjwvZGl2PicsIC8vIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICAgICAgICAgIF0uam9pbignJylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHR5cGVzW3Njcm9sbF0pIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbCA9IHR5cGVzW3Njcm9sbF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFzY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbCA9IHR5cGVzWydzaW1wbGUnXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChzY3JvbGwpID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGwgPSAkKHNjcm9sbCkuYXBwZW5kVG8odGhpcy53cmFwcGVyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbCA9ICQoc2Nyb2xsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkLmV4dGVuZChzY3JvbGwsIHtcclxuICAgICAgICAgICAgICAgIGJhcjogc2Nyb2xsLmZpbmQoJy5zY3JvbGwtYmFyJyksXHJcbiAgICAgICAgICAgICAgICBzaXplOiBzY3JvbGwuZmluZCgnLnNjcm9sbC1lbGVtZW50X3NpemUnKSxcclxuICAgICAgICAgICAgICAgIHRyYWNrOiBzY3JvbGwuZmluZCgnLnNjcm9sbC1lbGVtZW50X3RyYWNrJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGw7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgX2hhbmRsZU1vdXNlRG93bjogZnVuY3Rpb24oY2FsbGJhY2ssIGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmFtZXNwYWNlID0gdGhpcy5uYW1lc3BhY2U7XHJcblxyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignYmx1cicgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmFkZCgnYm9keScpLm9mZihuYW1lc3BhY2UpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdkcmFnc3RhcnQnICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2V1cCcgKyBuYW1lc3BhY2UsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmFkZCgnYm9keScpLm9mZihuYW1lc3BhY2UpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignc2VsZWN0c3RhcnQnICsgbmFtZXNwYWNlLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIF91cGRhdGVTY3JvbGw6IGZ1bmN0aW9uIChkLCBzY3JvbGx4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJXcmFwcGVyID0gdGhpcy5jb250YWluZXJXcmFwcGVyIHx8IGNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIHNjcm9sbENsYXNzID0gJ3Njcm9sbC1zY3JvbGwnICsgZCArICdfdmlzaWJsZScsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGx5ID0gKGQgPT09ICd4JykgPyB0aGlzLnNjcm9sbHkgOiB0aGlzLnNjcm9sbHgsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwYXJzZUludCh0aGlzLmNvbnRhaW5lci5jc3MoKGQgPT09ICd4JykgPyAnbGVmdCcgOiAndG9wJyksIDEwKSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgd3JhcHBlciA9IHRoaXMud3JhcHBlcjtcclxuXHJcbiAgICAgICAgICAgIHZhciBBcmVhU2l6ZSA9IHNjcm9sbHguc2l6ZTtcclxuICAgICAgICAgICAgdmFyIEFyZWFWaXNpYmxlID0gc2Nyb2xseC52aXNpYmxlICsgb2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgc2Nyb2xseC5pc1Zpc2libGUgPSAoQXJlYVNpemUgLSBBcmVhVmlzaWJsZSkgPiAxOyAvLyBidWcgaW4gSUU5LzExIHdpdGggMXB4IGRpZmZcclxuICAgICAgICAgICAgaWYgKHNjcm9sbHguaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGx4LnNjcm9sbC5hZGRDbGFzcyhzY3JvbGxDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGx5LnNjcm9sbC5hZGRDbGFzcyhzY3JvbGxDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJXcmFwcGVyLmFkZENsYXNzKHNjcm9sbENsYXNzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbHguc2Nyb2xsLnJlbW92ZUNsYXNzKHNjcm9sbENsYXNzKTtcclxuICAgICAgICAgICAgICAgIHNjcm9sbHkuc2Nyb2xsLnJlbW92ZUNsYXNzKHNjcm9sbENsYXNzKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcldyYXBwZXIucmVtb3ZlQ2xhc3Moc2Nyb2xsQ2xhc3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZCA9PT0gJ3knKSB7XHJcbiAgICAgICAgICAgICAgICBpZihjb250YWluZXIuaXMoJ3RleHRhcmVhJykgfHwgQXJlYVNpemUgPCBBcmVhVmlzaWJsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyV3JhcHBlci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAoQXJlYVZpc2libGUgKyBicm93c2VyLnNjcm9sbC5oZWlnaHQpICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcldyYXBwZXIuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cImhlaWdodFwiOiBcImF1dG9cIiwgLy8gZG8gbm90IHJlc2V0IGhlaWdodCB2YWx1ZTogaXNzdWUgd2l0aCBoZWlnaHQ6MTAwJSFcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXgtaGVpZ2h0XCI6IChBcmVhVmlzaWJsZSArIGJyb3dzZXIuc2Nyb2xsLmhlaWdodCkgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzY3JvbGx4LnNpemUgIT0gY29udGFpbmVyLnByb3AoJ3Njcm9sbFdpZHRoJylcclxuICAgICAgICAgICAgICAgIHx8IHNjcm9sbHkuc2l6ZSAhPSBjb250YWluZXIucHJvcCgnc2Nyb2xsSGVpZ2h0JylcclxuICAgICAgICAgICAgICAgIHx8IHNjcm9sbHgudmlzaWJsZSAhPSB3cmFwcGVyLndpZHRoKClcclxuICAgICAgICAgICAgICAgIHx8IHNjcm9sbHkudmlzaWJsZSAhPSB3cmFwcGVyLmhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB8fCBzY3JvbGx4Lm9mZnNldCAhPSAocGFyc2VJbnQoY29udGFpbmVyLmNzcygnbGVmdCcpLCAxMCkgfHwgMClcclxuICAgICAgICAgICAgICAgIHx8IHNjcm9sbHkub2Zmc2V0ICE9IChwYXJzZUludChjb250YWluZXIuY3NzKCd0b3AnKSwgMTApIHx8IDApXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICQuZXh0ZW5kKHRoaXMuc2Nyb2xseCwge1xyXG4gICAgICAgICAgICAgICAgICAgIFwib2Zmc2V0XCI6IHBhcnNlSW50KGNvbnRhaW5lci5jc3MoJ2xlZnQnKSwgMTApIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzaXplXCI6IGNvbnRhaW5lci5wcm9wKCdzY3JvbGxXaWR0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmlzaWJsZVwiOiB3cmFwcGVyLndpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJC5leHRlbmQodGhpcy5zY3JvbGx5LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvZmZzZXRcIjogcGFyc2VJbnQoY29udGFpbmVyLmNzcygndG9wJyksIDEwKSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiB0aGlzLmNvbnRhaW5lci5wcm9wKCdzY3JvbGxIZWlnaHQnKSxcclxuICAgICAgICAgICAgICAgICAgICBcInZpc2libGVcIjogd3JhcHBlci5oZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTY3JvbGwoZCA9PT0gJ3gnID8gJ3knIDogJ3gnLCBzY3JvbGx5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIEN1c3RvbVNjcm9sbGJhciA9IEJhc2VTY3JvbGxiYXI7XHJcblxyXG4gICAgLypcclxuICAgICAqIEV4dGVuZCBqUXVlcnkgYXMgcGx1Z2luXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtNaXhlZH0gY29tbWFuZCB0byBleGVjdXRlXHJcbiAgICAgKiBAcGFyYW0ge01peGVkfSBhcmd1bWVudHMgYXMgQXJyYXlcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeX1cclxuICAgICAqL1xyXG4gICAgJC5mbi5zY3JvbGxiYXIgPSBmdW5jdGlvbiAoY29tbWFuZCwgYXJncykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgYXJncyA9IGNvbW1hbmQ7XHJcbiAgICAgICAgICAgIGNvbW1hbmQgPSAnaW5pdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgYXJncyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISQuaXNBcnJheShhcmdzKSkge1xyXG4gICAgICAgICAgICBhcmdzID0gW2FyZ3NdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vdCgnYm9keSwgLnNjcm9sbC13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZWxlbWVudC5kYXRhKGJyb3dzZXIuZGF0YS5uYW1lKTtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlIHx8IGNvbW1hbmQgPT09ICdpbml0Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEN1c3RvbVNjcm9sbGJhcihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZVtjb21tYW5kXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlW2NvbW1hbmRdLmFwcGx5KGluc3RhbmNlLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3QgZGVmYXVsdCBvcHRpb25zIHRvIGdsb2JhbCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgJC5mbi5zY3JvbGxiYXIub3B0aW9ucyA9IGRlZmF1bHRzO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHNjcm9sbCBjb250ZW50L2NvbnRhaW5lciBzaXplIGlzIGNoYW5nZWRcclxuICAgICAqL1xyXG5cclxuICAgIHZhciB1cGRhdGVTY3JvbGxiYXJzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGltZXIgPSAwLFxyXG4gICAgICAgICAgICB0aW1lckNvdW50ZXIgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZvcmNlKSB7XHJcbiAgICAgICAgICAgIHZhciBpLCBjb250YWluZXIsIG9wdGlvbnMsIHNjcm9sbCwgd3JhcHBlciwgc2Nyb2xseCwgc2Nyb2xseTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGJyb3dzZXIuc2Nyb2xscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsID0gYnJvd3Nlci5zY3JvbGxzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gc2Nyb2xsLmNvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBzY3JvbGwub3B0aW9ucztcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIgPSBzY3JvbGwud3JhcHBlcjtcclxuICAgICAgICAgICAgICAgIHNjcm9sbHggPSBzY3JvbGwuc2Nyb2xseDtcclxuICAgICAgICAgICAgICAgIHNjcm9sbHkgPSBzY3JvbGwuc2Nyb2xseTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JjZSB8fCAob3B0aW9ucy5hdXRvVXBkYXRlICYmIHdyYXBwZXIgJiYgd3JhcHBlci5pcygnOnZpc2libGUnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChjb250YWluZXIucHJvcCgnc2Nyb2xsV2lkdGgnKSAhPSBzY3JvbGx4LnNpemUgfHwgY29udGFpbmVyLnByb3AoJ3Njcm9sbEhlaWdodCcpICE9IHNjcm9sbHkuc2l6ZSB8fCB3cmFwcGVyLndpZHRoKCkgIT0gc2Nyb2xseC52aXNpYmxlIHx8IHdyYXBwZXIuaGVpZ2h0KCkgIT0gc2Nyb2xseS52aXNpYmxlKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGwuaW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWJ1Zykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmxvZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQ6IGNvbnRhaW5lci5wcm9wKCdzY3JvbGxIZWlnaHQnKSArICc6JyArIHNjcm9sbC5zY3JvbGx5LnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aDogY29udGFpbmVyLnByb3AoJ3Njcm9sbFdpZHRoJykgKyAnOicgKyBzY3JvbGwuc2Nyb2xseC5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUhlaWdodDogd3JhcHBlci5oZWlnaHQoKSArICc6JyArIHNjcm9sbC5zY3JvbGx5LnZpc2libGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlV2lkdGg6IHdyYXBwZXIud2lkdGgoKSArICc6JyArIHNjcm9sbC5zY3JvbGx4LnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyQ291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGVidWcgJiYgdGltZXJDb3VudGVyID4gMTApIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUubG9nKCdTY3JvbGwgdXBkYXRlcyBleGNlZWQgMTAnKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNjcm9sbGJhcnMgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodXBkYXRlU2Nyb2xsYmFycywgMzAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qIEFERElUSU9OQUwgRlVOQ1RJT05TICovXHJcbiAgICAvKipcclxuICAgICAqIEdldCBuYXRpdmUgYnJvd3NlciBzY3JvbGxiYXIgc2l6ZSAoaGVpZ2h0L3dpZHRoKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYWN0dWFsIHNpemUgb3IgQ1NTIHNpemUsIGRlZmF1bHQgLSBDU1Mgc2l6ZVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gd2l0aCBoZWlnaHQsIHdpZHRoXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEJyb3dzZXJTY3JvbGxTaXplKGFjdHVhbFNpemUpIHtcclxuXHJcbiAgICAgICAgaWYgKGJyb3dzZXIud2Via2l0ICYmICFhY3R1YWxTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWJyb3dzZXIuZGF0YS5vdXRlcikge1xyXG4gICAgICAgICAgICB2YXIgY3NzID0ge1xyXG4gICAgICAgICAgICAgICAgXCJib3JkZXJcIjogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICBcImJveC1zaXppbmdcIjogXCJjb250ZW50LWJveFwiLFxyXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogXCIyMDBweFwiLFxyXG4gICAgICAgICAgICAgICAgXCJtYXJnaW5cIjogXCIwXCIsXHJcbiAgICAgICAgICAgICAgICBcInBhZGRpbmdcIjogXCIwXCIsXHJcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IFwiMjAwcHhcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicm93c2VyLmRhdGEuaW5uZXIgPSAkKFwiPGRpdj5cIikuY3NzKCQuZXh0ZW5kKHt9LCBjc3MpKTtcclxuICAgICAgICAgICAgYnJvd3Nlci5kYXRhLm91dGVyID0gJChcIjxkaXY+XCIpLmNzcygkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogXCItMTAwMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93XCI6IFwic2Nyb2xsXCIsXHJcbiAgICAgICAgICAgICAgICBcInBvc2l0aW9uXCI6IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgIFwidG9wXCI6IFwiLTEwMDBweFwiXHJcbiAgICAgICAgICAgIH0sIGNzcykpLmFwcGVuZChicm93c2VyLmRhdGEuaW5uZXIpLmFwcGVuZFRvKFwiYm9keVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJyb3dzZXIuZGF0YS5vdXRlci5zY3JvbGxMZWZ0KDEwMDApLnNjcm9sbFRvcCgxMDAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJoZWlnaHRcIjogTWF0aC5jZWlsKChicm93c2VyLmRhdGEub3V0ZXIub2Zmc2V0KCkudG9wIC0gYnJvd3Nlci5kYXRhLmlubmVyLm9mZnNldCgpLnRvcCkgfHwgMCksXHJcbiAgICAgICAgICAgIFwid2lkdGhcIjogTWF0aC5jZWlsKChicm93c2VyLmRhdGEub3V0ZXIub2Zmc2V0KCkubGVmdCAtIGJyb3dzZXIuZGF0YS5pbm5lci5vZmZzZXQoKS5sZWZ0KSB8fCAwKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBuYXRpdmUgYnJvd3NlciBzY3JvbGxiYXJzIG92ZXJsYXkgY29udGVudFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpc1Njcm9sbE92ZXJsYXlzQ29udGVudCgpIHtcclxuICAgICAgICB2YXIgc2Nyb2xsU2l6ZSA9IGdldEJyb3dzZXJTY3JvbGxTaXplKHRydWUpO1xyXG4gICAgICAgIHJldHVybiAhKHNjcm9sbFNpemUuaGVpZ2h0IHx8IHNjcm9sbFNpemUud2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmVydGljYWxTY3JvbGwoZXZlbnQpIHtcclxuICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgaWYgKGUuYXhpcyAmJiBlLmF4aXMgPT09IGUuSE9SSVpPTlRBTF9BWElTKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGUud2hlZWxEZWx0YVgpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRlbmQgQW5ndWxhckpTIGFzIFVJIGRpcmVjdGl2ZVxyXG4gICAgICogYW5kIGV4cG9zZSBhIHByb3ZpZGVyIGZvciBvdmVycmlkZSBkZWZhdWx0IGNvbmZpZ1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgaWYgKHdpbmRvdy5hbmd1bGFyKSB7XHJcbiAgICAgICAgKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdqUXVlcnlTY3JvbGxiYXInLCBbXSlcclxuICAgICAgICAgICAgICAgIC5wcm92aWRlcignalF1ZXJ5U2Nyb2xsYmFyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IGRlZmF1bHRzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogYW5ndWxhci5jb3B5KGRlZmF1bHRPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRpcmVjdGl2ZSgnanF1ZXJ5U2Nyb2xsYmFyJywgWydqUXVlcnlTY3JvbGxiYXInLCAnJHBhcnNlJywgZnVuY3Rpb24gKGpRdWVyeVNjcm9sbGJhciwgJHBhcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkFDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGlua1wiOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSAkcGFyc2UoYXR0cnMuanF1ZXJ5U2Nyb2xsYmFyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbW9kZWwoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxiYXIob3B0aW9ucyB8fCBqUXVlcnlTY3JvbGxiYXIub3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbGJhcignZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICB9KSh3aW5kb3cuYW5ndWxhcik7XHJcbiAgICB9XHJcbn0pKTtcclxuIiwiLyoqXHJcbiogQ3VzdG9taXplZCB2ZXJzaW9uIG9mIGlTY3JvbGwuanMgMC4wLjhcclxuKiBJdCBmaXhlcyBidWdzIGFmZmVjdGluZyBpdHMgaW50ZWdyYXRpb24gd2l0aCBmdWxscGFnZS5qc1xyXG4qIEBsaWNlbnNlXHJcbiovXHJcbi8qISBpU2Nyb2xsIHY1LjIuMCB+IChjKSAyMDA4LTIwMTYgTWF0dGVvIFNwaW5lbGxpIH4gaHR0cDovL2N1YmlxLm9yZy9saWNlbnNlICovXHJcbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgTWF0aCkge1xyXG52YXIgckFGID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAgfHxcclxuICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIHx8XHJcbiAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICB8fFxyXG4gICAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICAgfHxcclxuICAgIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgIHx8XHJcbiAgICBmdW5jdGlvbiAoY2FsbGJhY2spIHsgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7IH07XHJcblxyXG52YXIgdXRpbHMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1lID0ge307XHJcblxyXG4gICAgdmFyIF9lbGVtZW50U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcclxuICAgIHZhciBfdmVuZG9yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQnLCAnbXNUJywgJ09UJ10sXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSxcclxuICAgICAgICAgICAgaSA9IDAsXHJcbiAgICAgICAgICAgIGwgPSB2ZW5kb3JzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yICggOyBpIDwgbDsgaSsrICkge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSB2ZW5kb3JzW2ldICsgJ3JhbnNmb3JtJztcclxuICAgICAgICAgICAgaWYgKCB0cmFuc2Zvcm0gaW4gX2VsZW1lbnRTdHlsZSApIHJldHVybiB2ZW5kb3JzW2ldLnN1YnN0cigwLCB2ZW5kb3JzW2ldLmxlbmd0aC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gX3ByZWZpeFN0eWxlIChzdHlsZSkge1xyXG4gICAgICAgIGlmICggX3ZlbmRvciA9PT0gZmFsc2UgKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKCBfdmVuZG9yID09PSAnJyApIHJldHVybiBzdHlsZTtcclxuICAgICAgICByZXR1cm4gX3ZlbmRvciArIHN0eWxlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3R5bGUuc3Vic3RyKDEpO1xyXG4gICAgfVxyXG5cclxuICAgIG1lLmdldFRpbWUgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbiBnZXRUaW1lICgpIHsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9O1xyXG5cclxuICAgIG1lLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQsIG9iaikge1xyXG4gICAgICAgIGZvciAoIHZhciBpIGluIG9iaiApIHtcclxuICAgICAgICAgICAgdGFyZ2V0W2ldID0gb2JqW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbWUuYWRkRXZlbnQgPSBmdW5jdGlvbiAoZWwsIHR5cGUsIGZuLCBjYXB0dXJlKSB7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgISFjYXB0dXJlKTtcclxuICAgIH07XHJcblxyXG4gICAgbWUucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiAoZWwsIHR5cGUsIGZuLCBjYXB0dXJlKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgISFjYXB0dXJlKTtcclxuICAgIH07XHJcblxyXG4gICAgbWUucHJlZml4UG9pbnRlckV2ZW50ID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuTVNQb2ludGVyRXZlbnQgP1xyXG4gICAgICAgICAgICAnTVNQb2ludGVyJyArIHBvaW50ZXJFdmVudC5jaGFyQXQoNykudG9VcHBlckNhc2UoKSArIHBvaW50ZXJFdmVudC5zdWJzdHIoOCk6XHJcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudDtcclxuICAgIH07XHJcblxyXG4gICAgbWUubW9tZW50dW0gPSBmdW5jdGlvbiAoY3VycmVudCwgc3RhcnQsIHRpbWUsIGxvd2VyTWFyZ2luLCB3cmFwcGVyU2l6ZSwgZGVjZWxlcmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gY3VycmVudCAtIHN0YXJ0LFxyXG4gICAgICAgICAgICBzcGVlZCA9IE1hdGguYWJzKGRpc3RhbmNlKSAvIHRpbWUsXHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjtcclxuXHJcbiAgICAgICAgZGVjZWxlcmF0aW9uID0gZGVjZWxlcmF0aW9uID09PSB1bmRlZmluZWQgPyAwLjAwMDYgOiBkZWNlbGVyYXRpb247XHJcblxyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gY3VycmVudCArICggc3BlZWQgKiBzcGVlZCApIC8gKCAyICogZGVjZWxlcmF0aW9uICkgKiAoIGRpc3RhbmNlIDwgMCA/IC0xIDogMSApO1xyXG4gICAgICAgIGR1cmF0aW9uID0gc3BlZWQgLyBkZWNlbGVyYXRpb247XHJcblxyXG4gICAgICAgIGlmICggZGVzdGluYXRpb24gPCBsb3dlck1hcmdpbiApIHtcclxuICAgICAgICAgICAgZGVzdGluYXRpb24gPSB3cmFwcGVyU2l6ZSA/IGxvd2VyTWFyZ2luIC0gKCB3cmFwcGVyU2l6ZSAvIDIuNSAqICggc3BlZWQgLyA4ICkgKSA6IGxvd2VyTWFyZ2luO1xyXG4gICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGRlc3RpbmF0aW9uIC0gY3VycmVudCk7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uID0gZGlzdGFuY2UgLyBzcGVlZDtcclxuICAgICAgICB9IGVsc2UgaWYgKCBkZXN0aW5hdGlvbiA+IDAgKSB7XHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uID0gd3JhcHBlclNpemUgPyB3cmFwcGVyU2l6ZSAvIDIuNSAqICggc3BlZWQgLyA4ICkgOiAwO1xyXG4gICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnQpICsgZGVzdGluYXRpb247XHJcbiAgICAgICAgICAgIGR1cmF0aW9uID0gZGlzdGFuY2UgLyBzcGVlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBNYXRoLnJvdW5kKGRlc3RpbmF0aW9uKSxcclxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIF90cmFuc2Zvcm0gPSBfcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpO1xyXG5cclxuICAgIG1lLmV4dGVuZChtZSwge1xyXG4gICAgICAgIGhhc1RyYW5zZm9ybTogX3RyYW5zZm9ybSAhPT0gZmFsc2UsXHJcbiAgICAgICAgaGFzUGVyc3BlY3RpdmU6IF9wcmVmaXhTdHlsZSgncGVyc3BlY3RpdmUnKSBpbiBfZWxlbWVudFN0eWxlLFxyXG4gICAgICAgIGhhc1RvdWNoOiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3csXHJcbiAgICAgICAgaGFzUG9pbnRlcjogISEod2luZG93LlBvaW50ZXJFdmVudCB8fCB3aW5kb3cuTVNQb2ludGVyRXZlbnQpLCAvLyBJRTEwIGlzIHByZWZpeGVkXHJcbiAgICAgICAgaGFzVHJhbnNpdGlvbjogX3ByZWZpeFN0eWxlKCd0cmFuc2l0aW9uJykgaW4gX2VsZW1lbnRTdHlsZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLypcclxuICAgIFRoaXMgc2hvdWxkIGZpbmQgYWxsIEFuZHJvaWQgYnJvd3NlcnMgbG93ZXIgdGhhbiBidWlsZCA1MzUuMTkgKGJvdGggc3RvY2sgYnJvd3NlciBhbmQgd2VidmlldylcclxuICAgIC0gZ2FsYXh5IFMyIGlzIG9rXHJcbiAgICAtIDIuMy42IDogYEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzMuMWBcclxuICAgIC0gNC4wLjQgOiBgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzBgXHJcbiAgIC0gZ2FsYXh5IFMzIGlzIGJhZEFuZHJvaWQgKHN0b2NrIGJyb3dlciwgd2VidmlldylcclxuICAgICBgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzBgXHJcbiAgIC0gZ2FsYXh5IFM0IGlzIGJhZEFuZHJvaWQgKHN0b2NrIGJyb3dlciwgd2VidmlldylcclxuICAgICBgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzBgXHJcbiAgIC0gZ2FsYXh5IFM1IGlzIE9LXHJcbiAgICAgYEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM3LjM2IChDaHJvbWUvKWBcclxuICAgLSBnYWxheHkgUzYgaXMgT0tcclxuICAgICBgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzcuMzYgKENocm9tZS8pYFxyXG4gICovXHJcbiAgICBtZS5pc0JhZEFuZHJvaWQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGFwcFZlcnNpb24gPSB3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb247XHJcbiAgICAgICAgLy8gQW5kcm9pZCBicm93c2VyIGlzIG5vdCBhIGNocm9tZSBicm93c2VyLlxyXG4gICAgICAgIGlmICgvQW5kcm9pZC8udGVzdChhcHBWZXJzaW9uKSAmJiAhKC9DaHJvbWVcXC9cXGQvLnRlc3QoYXBwVmVyc2lvbikpKSB7XHJcbiAgICAgICAgICAgIHZhciBzYWZhcmlWZXJzaW9uID0gYXBwVmVyc2lvbi5tYXRjaCgvU2FmYXJpXFwvKFxcZCsuXFxkKS8pO1xyXG4gICAgICAgICAgICBpZihzYWZhcmlWZXJzaW9uICYmIHR5cGVvZiBzYWZhcmlWZXJzaW9uID09PSBcIm9iamVjdFwiICYmIHNhZmFyaVZlcnNpb24ubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHNhZmFyaVZlcnNpb25bMV0pIDwgNTM1LjE5O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICBtZS5leHRlbmQobWUuc3R5bGUgPSB7fSwge1xyXG4gICAgICAgIHRyYW5zZm9ybTogX3RyYW5zZm9ybSxcclxuICAgICAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IF9wcmVmaXhTdHlsZSgndHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uJyksXHJcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBfcHJlZml4U3R5bGUoJ3RyYW5zaXRpb25EdXJhdGlvbicpLFxyXG4gICAgICAgIHRyYW5zaXRpb25EZWxheTogX3ByZWZpeFN0eWxlKCd0cmFuc2l0aW9uRGVsYXknKSxcclxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IF9wcmVmaXhTdHlsZSgndHJhbnNmb3JtT3JpZ2luJylcclxuICAgIH0pO1xyXG5cclxuICAgIG1lLmhhc0NsYXNzID0gZnVuY3Rpb24gKGUsIGMpIHtcclxuICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBjICsgXCIoXFxcXHN8JClcIik7XHJcbiAgICAgICAgcmV0dXJuIHJlLnRlc3QoZS5jbGFzc05hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBtZS5hZGRDbGFzcyA9IGZ1bmN0aW9uIChlLCBjKSB7XHJcbiAgICAgICAgaWYgKCBtZS5oYXNDbGFzcyhlLCBjKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld2NsYXNzID0gZS5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuICAgICAgICBuZXdjbGFzcy5wdXNoKGMpO1xyXG4gICAgICAgIGUuY2xhc3NOYW1lID0gbmV3Y2xhc3Muam9pbignICcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBtZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIChlLCBjKSB7XHJcbiAgICAgICAgaWYgKCAhbWUuaGFzQ2xhc3MoZSwgYykgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGMgKyBcIihcXFxcc3wkKVwiLCAnZycpO1xyXG4gICAgICAgIGUuY2xhc3NOYW1lID0gZS5jbGFzc05hbWUucmVwbGFjZShyZSwgJyAnKTtcclxuICAgIH07XHJcblxyXG4gICAgbWUub2Zmc2V0ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIGxlZnQgPSAtZWwub2Zmc2V0TGVmdCxcclxuICAgICAgICAgICAgdG9wID0gLWVsLm9mZnNldFRvcDtcclxuXHJcbiAgICAgICAgLy8ganNoaW50IC1XMDg0XHJcbiAgICAgICAgd2hpbGUgKGVsID0gZWwub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgIGxlZnQgLT0gZWwub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgdG9wIC09IGVsLm9mZnNldFRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8ganNoaW50ICtXMDg0XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IGxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogdG9wXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgbWUucHJldmVudERlZmF1bHRFeGNlcHRpb24gPSBmdW5jdGlvbiAoZWwsIGV4Y2VwdGlvbnMpIHtcclxuICAgICAgICBmb3IgKCB2YXIgaSBpbiBleGNlcHRpb25zICkge1xyXG4gICAgICAgICAgICBpZiAoIGV4Y2VwdGlvbnNbaV0udGVzdChlbFtpXSkgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBtZS5leHRlbmQobWUuZXZlbnRUeXBlID0ge30sIHtcclxuICAgICAgICB0b3VjaHN0YXJ0OiAxLFxyXG4gICAgICAgIHRvdWNobW92ZTogMSxcclxuICAgICAgICB0b3VjaGVuZDogMSxcclxuXHJcbiAgICAgICAgbW91c2Vkb3duOiAyLFxyXG4gICAgICAgIG1vdXNlbW92ZTogMixcclxuICAgICAgICBtb3VzZXVwOiAyLFxyXG5cclxuICAgICAgICBwb2ludGVyZG93bjogMyxcclxuICAgICAgICBwb2ludGVybW92ZTogMyxcclxuICAgICAgICBwb2ludGVydXA6IDMsXHJcblxyXG4gICAgICAgIE1TUG9pbnRlckRvd246IDMsXHJcbiAgICAgICAgTVNQb2ludGVyTW92ZTogMyxcclxuICAgICAgICBNU1BvaW50ZXJVcDogM1xyXG4gICAgfSk7XHJcblxyXG4gICAgbWUuZXh0ZW5kKG1lLmVhc2UgPSB7fSwge1xyXG4gICAgICAgIHF1YWRyYXRpYzoge1xyXG4gICAgICAgICAgICBzdHlsZTogJ2N1YmljLWJlemllcigwLjI1LCAwLjQ2LCAwLjQ1LCAwLjk0KScsXHJcbiAgICAgICAgICAgIGZuOiBmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGsgKiAoIDIgLSBrICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNpcmN1bGFyOiB7XHJcbiAgICAgICAgICAgIHN0eWxlOiAnY3ViaWMtYmV6aWVyKDAuMSwgMC41NywgMC4xLCAxKScsICAgLy8gTm90IHByb3Blcmx5IFwiY2lyY3VsYXJcIiBidXQgdGhpcyBsb29rcyBiZXR0ZXIsIGl0IHNob3VsZCBiZSAoMC4wNzUsIDAuODIsIDAuMTY1LCAxKVxyXG4gICAgICAgICAgICBmbjogZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoIDEgLSAoIC0tayAqIGsgKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYWNrOiB7XHJcbiAgICAgICAgICAgIHN0eWxlOiAnY3ViaWMtYmV6aWVyKDAuMTc1LCAwLjg4NSwgMC4zMiwgMS4yNzUpJyxcclxuICAgICAgICAgICAgZm46IGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IDQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCBrID0gayAtIDEgKSAqIGsgKiAoICggYiArIDEgKSAqIGsgKyBiICkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBib3VuY2U6IHtcclxuICAgICAgICAgICAgc3R5bGU6ICcnLFxyXG4gICAgICAgICAgICBmbjogZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgIGlmICggKCBrIC89IDEgKSA8ICggMSAvIDIuNzUgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNy41NjI1ICogayAqIGs7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBrIDwgKCAyIC8gMi43NSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA3LjU2MjUgKiAoIGsgLT0gKCAxLjUgLyAyLjc1ICkgKSAqIGsgKyAwLjc1O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggayA8ICggMi41IC8gMi43NSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA3LjU2MjUgKiAoIGsgLT0gKCAyLjI1IC8gMi43NSApICkgKiBrICsgMC45Mzc1O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKCBrIC09ICggMi42MjUgLyAyLjc1ICkgKSAqIGsgKyAwLjk4NDM3NTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZWxhc3RpYzoge1xyXG4gICAgICAgICAgICBzdHlsZTogJycsXHJcbiAgICAgICAgICAgIGZuOiBmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSAwLjIyLFxyXG4gICAgICAgICAgICAgICAgICAgIGUgPSAwLjQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBrID09PSAwICkgeyByZXR1cm4gMDsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBrID09IDEgKSB7IHJldHVybiAxOyB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICggZSAqIE1hdGgucG93KCAyLCAtIDEwICogayApICogTWF0aC5zaW4oICggayAtIGYgLyA0ICkgKiAoIDIgKiBNYXRoLlBJICkgLyBmICkgKyAxICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBtZS50YXAgPSBmdW5jdGlvbiAoZSwgZXZlbnROYW1lKSB7XHJcbiAgICAgICAgdmFyIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XHJcbiAgICAgICAgZXYuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgZXYucGFnZVggPSBlLnBhZ2VYO1xyXG4gICAgICAgIGV2LnBhZ2VZID0gZS5wYWdlWTtcclxuICAgICAgICBlLnRhcmdldC5kaXNwYXRjaEV2ZW50KGV2KTtcclxuICAgIH07XHJcblxyXG4gICAgbWUuY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCxcclxuICAgICAgICAgICAgZXY7XHJcblxyXG4gICAgICAgIGlmICggISgvKFNFTEVDVHxJTlBVVHxURVhUQVJFQSkvaSkudGVzdCh0YXJnZXQudGFnTmFtZSkgKSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Nb3VzZUV2ZW50L2luaXRNb3VzZUV2ZW50XHJcbiAgICAgICAgICAgIC8vIGluaXRNb3VzZUV2ZW50IGlzIGRlcHJlY2F0ZWQuXHJcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQod2luZG93Lk1vdXNlRXZlbnQgPyAnTW91c2VFdmVudHMnIDogJ0V2ZW50Jyk7XHJcbiAgICAgICAgICAgIGV2LmluaXRFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgZXYudmlldyA9IGUudmlldyB8fCB3aW5kb3c7XHJcbiAgICAgICAgICAgIGV2LmRldGFpbCA9IDE7XHJcbiAgICAgICAgICAgIGV2LnNjcmVlblggPSB0YXJnZXQuc2NyZWVuWCB8fCAwO1xyXG4gICAgICAgICAgICBldi5zY3JlZW5ZID0gdGFyZ2V0LnNjcmVlblkgfHwgMDtcclxuICAgICAgICAgICAgZXYuY2xpZW50WCA9IHRhcmdldC5jbGllbnRYIHx8IDA7XHJcbiAgICAgICAgICAgIGV2LmNsaWVudFkgPSB0YXJnZXQuY2xpZW50WSB8fCAwO1xyXG4gICAgICAgICAgICBldi5jdHJsS2V5ID0gISFlLmN0cmxLZXk7XHJcbiAgICAgICAgICAgIGV2LmFsdEtleSA9ICEhZS5hbHRLZXk7XHJcbiAgICAgICAgICAgIGV2LnNoaWZ0S2V5ID0gISFlLnNoaWZ0S2V5O1xyXG4gICAgICAgICAgICBldi5tZXRhS2V5ID0gISFlLm1ldGFLZXk7XHJcbiAgICAgICAgICAgIGV2LmJ1dHRvbiA9IDA7XHJcbiAgICAgICAgICAgIGV2LnJlbGF0ZWRUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgICAgICBldi5fY29uc3RydWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbWU7XHJcbn0pKCk7XHJcbmZ1bmN0aW9uIElTY3JvbGwgKGVsLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLndyYXBwZXIgPSB0eXBlb2YgZWwgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xyXG4gICAgdGhpcy5zY3JvbGxlciA9IHRoaXMud3JhcHBlci5jaGlsZHJlblswXTtcclxuICAgIHRoaXMuc2Nyb2xsZXJTdHlsZSA9IHRoaXMuc2Nyb2xsZXIuc3R5bGU7ICAgICAgIC8vIGNhY2hlIHN0eWxlIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMgPSB7XHJcblxyXG4gICAgICAgIHJlc2l6ZVNjcm9sbGJhcnM6IHRydWUsXHJcblxyXG4gICAgICAgIG1vdXNlV2hlZWxTcGVlZDogMjAsXHJcblxyXG4gICAgICAgIHNuYXBUaHJlc2hvbGQ6IDAuMzM0LFxyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBPUFRJT05TXHJcbiAgICAgICAgZGlzYWJsZVBvaW50ZXIgOiAhdXRpbHMuaGFzUG9pbnRlcixcclxuICAgICAgICBkaXNhYmxlVG91Y2ggOiB1dGlscy5oYXNQb2ludGVyIHx8ICF1dGlscy5oYXNUb3VjaCxcclxuICAgICAgICBkaXNhYmxlTW91c2UgOiB1dGlscy5oYXNQb2ludGVyIHx8IHV0aWxzLmhhc1RvdWNoLFxyXG4gICAgICAgIHN0YXJ0WDogMCxcclxuICAgICAgICBzdGFydFk6IDAsXHJcbiAgICAgICAgc2Nyb2xsWTogdHJ1ZSxcclxuICAgICAgICBkaXJlY3Rpb25Mb2NrVGhyZXNob2xkOiA1LFxyXG4gICAgICAgIG1vbWVudHVtOiB0cnVlLFxyXG5cclxuICAgICAgICBib3VuY2U6IHRydWUsXHJcbiAgICAgICAgYm91bmNlVGltZTogNjAwLFxyXG4gICAgICAgIGJvdW5jZUVhc2luZzogJycsXHJcblxyXG4gICAgICAgIHByZXZlbnREZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgIHByZXZlbnREZWZhdWx0RXhjZXB0aW9uOiB7IHRhZ05hbWU6IC9eKElOUFVUfFRFWFRBUkVBfEJVVFRPTnxTRUxFQ1R8TEFCRUwpJC8gfSxcclxuXHJcbiAgICAgICAgSFdDb21wb3NpdGluZzogdHJ1ZSxcclxuICAgICAgICB1c2VUcmFuc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgIHVzZVRyYW5zZm9ybTogdHJ1ZSxcclxuICAgICAgICBiaW5kVG9XcmFwcGVyOiB0eXBlb2Ygd2luZG93Lm9ubW91c2Vkb3duID09PSBcInVuZGVmaW5lZFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zW2ldID0gb3B0aW9uc1tpXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3JtYWxpemUgb3B0aW9uc1xyXG4gICAgdGhpcy50cmFuc2xhdGVaID0gdGhpcy5vcHRpb25zLkhXQ29tcG9zaXRpbmcgJiYgdXRpbHMuaGFzUGVyc3BlY3RpdmUgPyAnIHRyYW5zbGF0ZVooMCknIDogJyc7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSB1dGlscy5oYXNUcmFuc2l0aW9uICYmIHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uO1xyXG4gICAgdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSA9IHV0aWxzLmhhc1RyYW5zZm9ybSAmJiB0aGlzLm9wdGlvbnMudXNlVHJhbnNmb3JtO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID0gdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT09IHRydWUgPyAndmVydGljYWwnIDogdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2g7XHJcbiAgICB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQgPSAhdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggJiYgdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0O1xyXG5cclxuICAgIC8vIElmIHlvdSB3YW50IGV2ZW50UGFzc3Rocm91Z2ggSSBoYXZlIHRvIGxvY2sgb25lIG9mIHRoZSBheGVzXHJcbiAgICB0aGlzLm9wdGlvbnMuc2Nyb2xsWSA9IHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICd2ZXJ0aWNhbCcgPyBmYWxzZSA6IHRoaXMub3B0aW9ucy5zY3JvbGxZO1xyXG4gICAgdGhpcy5vcHRpb25zLnNjcm9sbFggPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA9PSAnaG9yaXpvbnRhbCcgPyBmYWxzZSA6IHRoaXMub3B0aW9ucy5zY3JvbGxYO1xyXG5cclxuICAgIC8vIFdpdGggZXZlbnRQYXNzdGhyb3VnaCB3ZSBhbHNvIG5lZWQgbG9ja0RpcmVjdGlvbiBtZWNoYW5pc21cclxuICAgIHRoaXMub3B0aW9ucy5mcmVlU2Nyb2xsID0gdGhpcy5vcHRpb25zLmZyZWVTY3JvbGwgJiYgIXRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoO1xyXG4gICAgdGhpcy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA/IDAgOiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uTG9ja1RocmVzaG9sZDtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nID0gdHlwZW9mIHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmcgPT0gJ3N0cmluZycgPyB1dGlscy5lYXNlW3RoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmddIHx8IHV0aWxzLmVhc2UuY2lyY3VsYXIgOiB0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nID0gdGhpcy5vcHRpb25zLnJlc2l6ZVBvbGxpbmcgPT09IHVuZGVmaW5lZCA/IDYwIDogdGhpcy5vcHRpb25zLnJlc2l6ZVBvbGxpbmc7XHJcblxyXG4gICAgaWYgKCB0aGlzLm9wdGlvbnMudGFwID09PSB0cnVlICkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy50YXAgPSAndGFwJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY3ViaXEvaXNjcm9sbC9pc3N1ZXMvMTAyOVxyXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiAhdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSkge1xyXG4gICAgICAgIGlmKCEoL3JlbGF0aXZlfGFic29sdXRlL2kpLnRlc3QodGhpcy5zY3JvbGxlclN0eWxlLnBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5vcHRpb25zLnNocmlua1Njcm9sbGJhcnMgPT0gJ3NjYWxlJyApIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA/IC0xIDogMTtcclxuXHJcbi8vIElOU0VSVCBQT0lOVDogTk9STUFMSVpBVElPTlxyXG5cclxuICAgIC8vIFNvbWUgZGVmYXVsdHNcclxuICAgIHRoaXMueCA9IDA7XHJcbiAgICB0aGlzLnkgPSAwO1xyXG4gICAgdGhpcy5kaXJlY3Rpb25YID0gMDtcclxuICAgIHRoaXMuZGlyZWN0aW9uWSA9IDA7XHJcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcclxuXHJcbi8vIElOU0VSVCBQT0lOVDogREVGQVVMVFNcclxuXHJcbiAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB0aGlzLnJlZnJlc2goKTtcclxuXHJcbiAgICB0aGlzLnNjcm9sbFRvKHRoaXMub3B0aW9ucy5zdGFydFgsIHRoaXMub3B0aW9ucy5zdGFydFkpO1xyXG4gICAgdGhpcy5lbmFibGUoKTtcclxufVxyXG5cclxuSVNjcm9sbC5wcm90b3R5cGUgPSB7XHJcbiAgICB2ZXJzaW9uOiAnNS4yLjAnLFxyXG5cclxuICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdEV2ZW50cygpO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJzIHx8IHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzICkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0SW5kaWNhdG9ycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMubW91c2VXaGVlbCApIHtcclxuICAgICAgICAgICAgdGhpcy5faW5pdFdoZWVsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwICkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRLZXlzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBfaW5pdFxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRFdmVudHModHJ1ZSk7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ2Rlc3Ryb3knKTtcclxuICAgIH0sXHJcblxyXG4gICAgX3RyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCBlLnRhcmdldCAhPSB0aGlzLnNjcm9sbGVyIHx8ICF0aGlzLmlzSW5UcmFuc2l0aW9uICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90cmFuc2l0aW9uVGltZSgpO1xyXG4gICAgICAgIGlmICggIXRoaXMucmVzZXRQb3NpdGlvbih0aGlzLm9wdGlvbnMuYm91bmNlVGltZSkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9zdGFydDogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvLyBSZWFjdCB0byBsZWZ0IG1vdXNlIGJ1dHRvbiBvbmx5XHJcbiAgICAgICAgaWYgKCB1dGlscy5ldmVudFR5cGVbZS50eXBlXSAhPSAxICkge1xyXG4gICAgICAgICAgLy8gZm9yIGJ1dHRvbiBwcm9wZXJ0eVxyXG4gICAgICAgICAgLy8gaHR0cDovL3VuaXhwYXBhLmNvbS9qcy9tb3VzZS5odG1sXHJcbiAgICAgICAgICB2YXIgYnV0dG9uO1xyXG4gICAgICAgIGlmICghZS53aGljaCkge1xyXG4gICAgICAgICAgLyogSUUgY2FzZSAqL1xyXG4gICAgICAgICAgYnV0dG9uID0gKGUuYnV0dG9uIDwgMikgPyAwIDpcclxuICAgICAgICAgICAgICAgICAgICgoZS5idXR0b24gPT0gNCkgPyAxIDogMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8qIEFsbCBvdGhlcnMgKi9cclxuICAgICAgICAgIGJ1dHRvbiA9IGUuYnV0dG9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCBidXR0b24gIT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMuZW5hYmxlZCB8fCAodGhpcy5pbml0aWF0ZWQgJiYgdXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT09IHRoaXMuaW5pdGlhdGVkKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQgJiYgIXV0aWxzLmlzQmFkQW5kcm9pZCAmJiAhdXRpbHMucHJldmVudERlZmF1bHRFeGNlcHRpb24oZS50YXJnZXQsIHRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbikgKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwb2ludCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXSA6IGUsXHJcbiAgICAgICAgICAgIHBvcztcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWF0ZWQgID0gdXRpbHMuZXZlbnRUeXBlW2UudHlwZV07XHJcbiAgICAgICAgdGhpcy5tb3ZlZCAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXN0WCAgICAgID0gMDtcclxuICAgICAgICB0aGlzLmRpc3RZICAgICAgPSAwO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdXRpbHMuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIHRoaXMuaXNJblRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25UaW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgcG9zID0gdGhpcy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zbGF0ZShNYXRoLnJvdW5kKHBvcy54KSwgTWF0aC5yb3VuZChwb3MueSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoICF0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzQW5pbWF0aW5nICkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsRW5kJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0WCAgICA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLnN0YXJ0WSAgICA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLmFic1N0YXJ0WCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLmFic1N0YXJ0WSA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLnBvaW50WCAgICA9IHBvaW50LnBhZ2VYO1xyXG4gICAgICAgIHRoaXMucG9pbnRZICAgID0gcG9pbnQucGFnZVk7XHJcblxyXG4gICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnYmVmb3JlU2Nyb2xsU3RhcnQnKTtcclxuICAgIH0sXHJcblxyXG4gICAgX21vdmU6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5lbmFibGVkIHx8IHV0aWxzLmV2ZW50VHlwZVtlLnR5cGVdICE9PSB0aGlzLmluaXRpYXRlZCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQgKSB7ICAgIC8vIGluY3JlYXNlcyBwZXJmb3JtYW5jZSBvbiBBbmRyb2lkPyBUT0RPOiBjaGVjayFcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHBvaW50ICAgICAgID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdIDogZSxcclxuICAgICAgICAgICAgZGVsdGFYICAgICAgPSBwb2ludC5wYWdlWCAtIHRoaXMucG9pbnRYLFxyXG4gICAgICAgICAgICBkZWx0YVkgICAgICA9IHBvaW50LnBhZ2VZIC0gdGhpcy5wb2ludFksXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcCAgID0gdXRpbHMuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBuZXdYLCBuZXdZLFxyXG4gICAgICAgICAgICBhYnNEaXN0WCwgYWJzRGlzdFk7XHJcblxyXG4gICAgICAgIHRoaXMucG9pbnRYICAgICA9IHBvaW50LnBhZ2VYO1xyXG4gICAgICAgIHRoaXMucG9pbnRZICAgICA9IHBvaW50LnBhZ2VZO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3RYICAgICAgKz0gZGVsdGFYO1xyXG4gICAgICAgIHRoaXMuZGlzdFkgICAgICArPSBkZWx0YVk7XHJcbiAgICAgICAgYWJzRGlzdFggICAgICAgID0gTWF0aC5hYnModGhpcy5kaXN0WCk7XHJcbiAgICAgICAgYWJzRGlzdFkgICAgICAgID0gTWF0aC5hYnModGhpcy5kaXN0WSk7XHJcblxyXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gbW92ZSBhdCBsZWFzdCAxMCBwaXhlbHMgZm9yIHRoZSBzY3JvbGxpbmcgdG8gaW5pdGlhdGVcclxuICAgICAgICBpZiAoIHRpbWVzdGFtcCAtIHRoaXMuZW5kVGltZSA+IDMwMCAmJiAoYWJzRGlzdFggPCAxMCAmJiBhYnNEaXN0WSA8IDEwKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgeW91IGFyZSBzY3JvbGxpbmcgaW4gb25lIGRpcmVjdGlvbiBsb2NrIHRoZSBvdGhlclxyXG4gICAgICAgIGlmICggIXRoaXMuZGlyZWN0aW9uTG9ja2VkICYmICF0aGlzLm9wdGlvbnMuZnJlZVNjcm9sbCApIHtcclxuICAgICAgICAgICAgaWYgKCBhYnNEaXN0WCA+IGFic0Rpc3RZICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9ICdoJzsgICAgIC8vIGxvY2sgaG9yaXpvbnRhbGx5XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGFic0Rpc3RZID49IGFic0Rpc3RYICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9ICd2JzsgICAgIC8vIGxvY2sgdmVydGljYWxseVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPSAnbic7ICAgICAvLyBubyBsb2NrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPT0gJ2gnICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICd2ZXJ0aWNhbCcgKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICdob3Jpem9udGFsJyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlbHRhWSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPT0gJ3YnICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICdob3Jpem9udGFsJyApIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT0gJ3ZlcnRpY2FsJyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlbHRhWCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZWx0YVggPSB0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgPyBkZWx0YVggOiAwO1xyXG4gICAgICAgIGRlbHRhWSA9IHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyBkZWx0YVkgOiAwO1xyXG5cclxuICAgICAgICBuZXdYID0gdGhpcy54ICsgZGVsdGFYO1xyXG4gICAgICAgIG5ld1kgPSB0aGlzLnkgKyBkZWx0YVk7XHJcblxyXG4gICAgICAgIC8vIFNsb3cgZG93biBpZiBvdXRzaWRlIG9mIHRoZSBib3VuZGFyaWVzXHJcbiAgICAgICAgaWYgKCBuZXdYID4gMCB8fCBuZXdYIDwgdGhpcy5tYXhTY3JvbGxYICkge1xyXG4gICAgICAgICAgICBuZXdYID0gdGhpcy5vcHRpb25zLmJvdW5jZSA/IHRoaXMueCArIGRlbHRhWCAvIDMgOiBuZXdYID4gMCA/IDAgOiB0aGlzLm1heFNjcm9sbFg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggbmV3WSA+IDAgfHwgbmV3WSA8IHRoaXMubWF4U2Nyb2xsWSApIHtcclxuICAgICAgICAgICAgbmV3WSA9IHRoaXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLnkgKyBkZWx0YVkgLyAzIDogbmV3WSA+IDAgPyAwIDogdGhpcy5tYXhTY3JvbGxZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25YID0gZGVsdGFYID4gMCA/IC0xIDogZGVsdGFYIDwgMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWSA9IGRlbHRhWSA+IDAgPyAtMSA6IGRlbHRhWSA8IDAgPyAxIDogMDtcclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy5tb3ZlZCApIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxTdGFydCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tb3ZlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyYW5zbGF0ZShuZXdYLCBuZXdZKTtcclxuXHJcbi8qIFJFUExBQ0UgU1RBUlQ6IF9tb3ZlICovXHJcblxyXG4gICAgICAgIGlmICggdGltZXN0YW1wIC0gdGhpcy5zdGFydFRpbWUgPiAzMDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGltZXN0YW1wO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0WCA9IHRoaXMueDtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFkgPSB0aGlzLnk7XHJcbiAgICAgICAgfVxyXG5cclxuLyogUkVQTEFDRSBFTkQ6IF9tb3ZlICovXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBfZW5kOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmICggIXRoaXMuZW5hYmxlZCB8fCB1dGlscy5ldmVudFR5cGVbZS50eXBlXSAhPT0gdGhpcy5pbml0aWF0ZWQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICYmICF1dGlscy5wcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbihlLnRhcmdldCwgdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uKSApIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHBvaW50ID0gZS5jaGFuZ2VkVG91Y2hlcyA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlLFxyXG4gICAgICAgICAgICBtb21lbnR1bVgsXHJcbiAgICAgICAgICAgIG1vbWVudHVtWSxcclxuICAgICAgICAgICAgZHVyYXRpb24gPSB1dGlscy5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0VGltZSxcclxuICAgICAgICAgICAgbmV3WCA9IE1hdGgucm91bmQodGhpcy54KSxcclxuICAgICAgICAgICAgbmV3WSA9IE1hdGgucm91bmQodGhpcy55KSxcclxuICAgICAgICAgICAgZGlzdGFuY2VYID0gTWF0aC5hYnMobmV3WCAtIHRoaXMuc3RhcnRYKSxcclxuICAgICAgICAgICAgZGlzdGFuY2VZID0gTWF0aC5hYnMobmV3WSAtIHRoaXMuc3RhcnRZKSxcclxuICAgICAgICAgICAgdGltZSA9IDAsXHJcbiAgICAgICAgICAgIGVhc2luZyA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gMDtcclxuICAgICAgICB0aGlzLmluaXRpYXRlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lID0gdXRpbHMuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAvLyByZXNldCBpZiB3ZSBhcmUgb3V0c2lkZSBvZiB0aGUgYm91bmRhcmllc1xyXG4gICAgICAgIGlmICggdGhpcy5yZXNldFBvc2l0aW9uKHRoaXMub3B0aW9ucy5ib3VuY2VUaW1lKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhuZXdYLCBuZXdZKTsgIC8vIGVuc3VyZXMgdGhhdCB0aGUgbGFzdCBwb3NpdGlvbiBpcyByb3VuZGVkXHJcblxyXG4gICAgICAgIC8vIHdlIHNjcm9sbGVkIGxlc3MgdGhhbiAxMCBwaXhlbHNcclxuICAgICAgICBpZiAoICF0aGlzLm1vdmVkICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy50YXAgKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlscy50YXAoZSwgdGhpcy5vcHRpb25zLnRhcCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmNsaWNrICkge1xyXG4gICAgICAgICAgICAgICAgdXRpbHMuY2xpY2soZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsQ2FuY2VsJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5fZXZlbnRzLmZsaWNrICYmIGR1cmF0aW9uIDwgMjAwICYmIGRpc3RhbmNlWCA8IDEwMCAmJiBkaXN0YW5jZVkgPCAxMDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnZmxpY2snKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc3RhcnQgbW9tZW50dW0gYW5pbWF0aW9uIGlmIG5lZWRlZFxyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLm1vbWVudHVtICYmIGR1cmF0aW9uIDwgMzAwICkge1xyXG4gICAgICAgICAgICBtb21lbnR1bVggPSB0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgPyB1dGlscy5tb21lbnR1bSh0aGlzLngsIHRoaXMuc3RhcnRYLCBkdXJhdGlvbiwgdGhpcy5tYXhTY3JvbGxYLCB0aGlzLm9wdGlvbnMuYm91bmNlID8gdGhpcy53cmFwcGVyV2lkdGggOiAwLCB0aGlzLm9wdGlvbnMuZGVjZWxlcmF0aW9uKSA6IHsgZGVzdGluYXRpb246IG5ld1gsIGR1cmF0aW9uOiAwIH07XHJcbiAgICAgICAgICAgIG1vbWVudHVtWSA9IHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyB1dGlscy5tb21lbnR1bSh0aGlzLnksIHRoaXMuc3RhcnRZLCBkdXJhdGlvbiwgdGhpcy5tYXhTY3JvbGxZLCB0aGlzLm9wdGlvbnMuYm91bmNlID8gdGhpcy53cmFwcGVySGVpZ2h0IDogMCwgdGhpcy5vcHRpb25zLmRlY2VsZXJhdGlvbikgOiB7IGRlc3RpbmF0aW9uOiBuZXdZLCBkdXJhdGlvbjogMCB9O1xyXG4gICAgICAgICAgICBuZXdYID0gbW9tZW50dW1YLmRlc3RpbmF0aW9uO1xyXG4gICAgICAgICAgICBuZXdZID0gbW9tZW50dW1ZLmRlc3RpbmF0aW9uO1xyXG4gICAgICAgICAgICB0aW1lID0gTWF0aC5tYXgobW9tZW50dW1YLmR1cmF0aW9uLCBtb21lbnR1bVkuZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gMTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwICkge1xyXG4gICAgICAgICAgICB2YXIgc25hcCA9IHRoaXMuX25lYXJlc3RTbmFwKG5ld1gsIG5ld1kpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gc25hcDtcclxuICAgICAgICAgICAgdGltZSA9IHRoaXMub3B0aW9ucy5zbmFwU3BlZWQgfHwgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKG5ld1ggLSBzbmFwLngpLCAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5hYnMobmV3WSAtIHNuYXAueSksIDEwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgKSwgMzAwKTtcclxuICAgICAgICAgICAgbmV3WCA9IHNuYXAueDtcclxuICAgICAgICAgICAgbmV3WSA9IHNuYXAueTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uWSA9IDA7XHJcbiAgICAgICAgICAgIGVhc2luZyA9IHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBfZW5kXHJcblxyXG4gICAgICAgIGlmICggbmV3WCAhPSB0aGlzLnggfHwgbmV3WSAhPSB0aGlzLnkgKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBlYXNpbmcgZnVuY3Rpb24gd2hlbiBzY3JvbGxlciBnb2VzIG91dCBvZiB0aGUgYm91bmRhcmllc1xyXG4gICAgICAgICAgICBpZiAoIG5ld1ggPiAwIHx8IG5ld1ggPCB0aGlzLm1heFNjcm9sbFggfHwgbmV3WSA+IDAgfHwgbmV3WSA8IHRoaXMubWF4U2Nyb2xsWSApIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IHV0aWxzLmVhc2UucXVhZHJhdGljO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIHRpbWUsIGVhc2luZyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsRW5kJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9yZXNpemU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhhdC5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLnJlc2l6ZVBvbGxpbmcpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZXNldFBvc2l0aW9uOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy54LFxyXG4gICAgICAgICAgICB5ID0gdGhpcy55O1xyXG5cclxuICAgICAgICB0aW1lID0gdGltZSB8fCAwO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgfHwgdGhpcy54ID4gMCApIHtcclxuICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy54IDwgdGhpcy5tYXhTY3JvbGxYICkge1xyXG4gICAgICAgICAgICB4ID0gdGhpcy5tYXhTY3JvbGxYO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCB8fCB0aGlzLnkgPiAwICkge1xyXG4gICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnkgPCB0aGlzLm1heFNjcm9sbFkgKSB7XHJcbiAgICAgICAgICAgIHkgPSB0aGlzLm1heFNjcm9sbFk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHggPT0gdGhpcy54ICYmIHkgPT0gdGhpcy55ICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbFRvKHgsIHksIHRpbWUsIHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmcpO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgZGlzYWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBlbmFibGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJmID0gdGhpcy53cmFwcGVyLm9mZnNldEhlaWdodDsgICAgIC8vIEZvcmNlIHJlZmxvd1xyXG5cclxuICAgICAgICB0aGlzLndyYXBwZXJXaWR0aCAgID0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIHRoaXMud3JhcHBlckhlaWdodCAgPSB0aGlzLndyYXBwZXIuY2xpZW50SGVpZ2h0O1xyXG5cclxuLyogUkVQTEFDRSBTVEFSVDogcmVmcmVzaCAqL1xyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbGVyV2lkdGggID0gdGhpcy5zY3JvbGxlci5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLnNjcm9sbGVySGVpZ2h0ID0gdGhpcy5zY3JvbGxlci5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMubWF4U2Nyb2xsWCAgICAgPSB0aGlzLndyYXBwZXJXaWR0aCAtIHRoaXMuc2Nyb2xsZXJXaWR0aDtcclxuICAgICAgICB0aGlzLm1heFNjcm9sbFkgICAgID0gdGhpcy53cmFwcGVySGVpZ2h0IC0gdGhpcy5zY3JvbGxlckhlaWdodDtcclxuXHJcbi8qIFJFUExBQ0UgRU5EOiByZWZyZXNoICovXHJcblxyXG4gICAgICAgIHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCAgICA9IHRoaXMub3B0aW9ucy5zY3JvbGxYICYmIHRoaXMubWF4U2Nyb2xsWCA8IDA7XHJcbiAgICAgICAgdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCAgICAgID0gdGhpcy5vcHRpb25zLnNjcm9sbFkgJiYgdGhpcy5tYXhTY3JvbGxZIDwgMDtcclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy5oYXNIb3Jpem9udGFsU2Nyb2xsICkge1xyXG4gICAgICAgICAgICB0aGlzLm1heFNjcm9sbFggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbGVyV2lkdGggPSB0aGlzLndyYXBwZXJXaWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4U2Nyb2xsWSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsZXJIZWlnaHQgPSB0aGlzLndyYXBwZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVuZFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy53cmFwcGVyT2Zmc2V0ID0gdXRpbHMub2Zmc2V0KHRoaXMud3JhcHBlcik7XHJcblxyXG4gICAgICAgIHRoaXMuX2V4ZWNFdmVudCgncmVmcmVzaCcpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuXHJcbi8vIElOU0VSVCBQT0lOVDogX3JlZnJlc2hcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG9uOiBmdW5jdGlvbiAodHlwZSwgZm4pIHtcclxuICAgICAgICBpZiAoICF0aGlzLl9ldmVudHNbdHlwZV0gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2goZm4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBvZmY6IGZ1bmN0aW9uICh0eXBlLCBmbikge1xyXG4gICAgICAgIGlmICggIXRoaXMuX2V2ZW50c1t0eXBlXSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZXZlbnRzW3R5cGVdLmluZGV4T2YoZm4pO1xyXG5cclxuICAgICAgICBpZiAoIGluZGV4ID4gLTEgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2V4ZWNFdmVudDogZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICBpZiAoICF0aGlzLl9ldmVudHNbdHlwZV0gKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpID0gMCxcclxuICAgICAgICAgICAgbCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICggIWwgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdW2ldLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzY3JvbGxCeTogZnVuY3Rpb24gKHgsIHksIHRpbWUsIGVhc2luZykge1xyXG4gICAgICAgIHggPSB0aGlzLnggKyB4O1xyXG4gICAgICAgIHkgPSB0aGlzLnkgKyB5O1xyXG4gICAgICAgIHRpbWUgPSB0aW1lIHx8IDA7XHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG8oeCwgeSwgdGltZSwgZWFzaW5nKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2Nyb2xsVG86IGZ1bmN0aW9uICh4LCB5LCB0aW1lLCBlYXNpbmcpIHtcclxuICAgICAgICBlYXNpbmcgPSBlYXNpbmcgfHwgdXRpbHMuZWFzZS5jaXJjdWxhcjtcclxuXHJcbiAgICAgICAgdGhpcy5pc0luVHJhbnNpdGlvbiA9IHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIHRpbWUgPiAwO1xyXG4gICAgICAgIHZhciB0cmFuc2l0aW9uVHlwZSA9IHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIGVhc2luZy5zdHlsZTtcclxuICAgICAgICBpZiAoICF0aW1lIHx8IHRyYW5zaXRpb25UeXBlICkge1xyXG4gICAgICAgICAgICAgICAgaWYodHJhbnNpdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24oZWFzaW5nLnN0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uVGltZSh0aW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNsYXRlKHgsIHkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGUoeCwgeSwgdGltZSwgZWFzaW5nLmZuKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gKGVsLCB0aW1lLCBvZmZzZXRYLCBvZmZzZXRZLCBlYXNpbmcpIHtcclxuICAgICAgICBlbCA9IGVsLm5vZGVUeXBlID8gZWwgOiB0aGlzLnNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3IoZWwpO1xyXG5cclxuICAgICAgICBpZiAoICFlbCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHBvcyA9IHV0aWxzLm9mZnNldChlbCk7XHJcblxyXG4gICAgICAgIHBvcy5sZWZ0IC09IHRoaXMud3JhcHBlck9mZnNldC5sZWZ0O1xyXG4gICAgICAgIHBvcy50b3AgIC09IHRoaXMud3JhcHBlck9mZnNldC50b3A7XHJcblxyXG4gICAgICAgIC8vIGlmIG9mZnNldFgvWSBhcmUgdHJ1ZSB3ZSBjZW50ZXIgdGhlIGVsZW1lbnQgdG8gdGhlIHNjcmVlblxyXG4gICAgICAgIGlmICggb2Zmc2V0WCA9PT0gdHJ1ZSApIHtcclxuICAgICAgICAgICAgb2Zmc2V0WCA9IE1hdGgucm91bmQoZWwub2Zmc2V0V2lkdGggLyAyIC0gdGhpcy53cmFwcGVyLm9mZnNldFdpZHRoIC8gMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggb2Zmc2V0WSA9PT0gdHJ1ZSApIHtcclxuICAgICAgICAgICAgb2Zmc2V0WSA9IE1hdGgucm91bmQoZWwub2Zmc2V0SGVpZ2h0IC8gMiAtIHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQgLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBvcy5sZWZ0IC09IG9mZnNldFggfHwgMDtcclxuICAgICAgICBwb3MudG9wICAtPSBvZmZzZXRZIHx8IDA7XHJcblxyXG4gICAgICAgIHBvcy5sZWZ0ID0gcG9zLmxlZnQgPiAwID8gMCA6IHBvcy5sZWZ0IDwgdGhpcy5tYXhTY3JvbGxYID8gdGhpcy5tYXhTY3JvbGxYIDogcG9zLmxlZnQ7XHJcbiAgICAgICAgcG9zLnRvcCAgPSBwb3MudG9wICA+IDAgPyAwIDogcG9zLnRvcCAgPCB0aGlzLm1heFNjcm9sbFkgPyB0aGlzLm1heFNjcm9sbFkgOiBwb3MudG9wO1xyXG5cclxuICAgICAgICB0aW1lID0gdGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWUgPT09IG51bGwgfHwgdGltZSA9PT0gJ2F1dG8nID8gTWF0aC5tYXgoTWF0aC5hYnModGhpcy54LXBvcy5sZWZ0KSwgTWF0aC5hYnModGhpcy55LXBvcy50b3ApKSA6IHRpbWU7XHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG8ocG9zLmxlZnQsIHBvcy50b3AsIHRpbWUsIGVhc2luZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF90cmFuc2l0aW9uVGltZTogZnVuY3Rpb24gKHRpbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGltZSA9IHRpbWUgfHwgMDtcclxuICAgICAgICB2YXIgZHVyYXRpb25Qcm9wID0gdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgIGlmKCFkdXJhdGlvblByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxlclN0eWxlW2R1cmF0aW9uUHJvcF0gPSB0aW1lICsgJ21zJztcclxuXHJcbiAgICAgICAgaWYgKCAhdGltZSAmJiB1dGlscy5pc0JhZEFuZHJvaWQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZVtkdXJhdGlvblByb3BdID0gJzAuMDAwMW1zJztcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIDAuMDAwMW1zXHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5zY3JvbGxlclN0eWxlW2R1cmF0aW9uUHJvcF0gPT09ICcwLjAwMDFtcycpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbGVyU3R5bGVbZHVyYXRpb25Qcm9wXSA9ICcwcyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pbmRpY2F0b3JzICkge1xyXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvcnNbaV0udHJhbnNpdGlvblRpbWUodGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBfdHJhbnNpdGlvblRpbWVcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIF90cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGZ1bmN0aW9uIChlYXNpbmcpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uXSA9IGVhc2luZztcclxuXHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pbmRpY2F0b3JzICkge1xyXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvcnNbaV0udHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uKGVhc2luZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBfdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBfdHJhbnNsYXRlOiBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSApIHtcclxuXHJcbi8qIFJFUExBQ0UgU1RBUlQ6IF90cmFuc2xhdGUgKi9cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2Zvcm1dID0gJ3RyYW5zbGF0ZSgnICsgeCArICdweCwnICsgeSArICdweCknICsgdGhpcy50cmFuc2xhdGVaO1xyXG5cclxuLyogUkVQTEFDRSBFTkQ6IF90cmFuc2xhdGUgKi9cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCA9IE1hdGgucm91bmQoeCk7XHJcbiAgICAgICAgICAgIHkgPSBNYXRoLnJvdW5kKHkpO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGUubGVmdCA9IHggKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGUudG9wID0geSArICdweCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcblxyXG5cclxuICAgIGlmICggdGhpcy5pbmRpY2F0b3JzICkge1xyXG4gICAgICAgIGZvciAoIHZhciBpID0gdGhpcy5pbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyApIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JzW2ldLnVwZGF0ZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbi8vIElOU0VSVCBQT0lOVDogX3RyYW5zbGF0ZVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgX2luaXRFdmVudHM6IGZ1bmN0aW9uIChyZW1vdmUpIHtcclxuICAgICAgICB2YXIgZXZlbnRUeXBlID0gcmVtb3ZlID8gdXRpbHMucmVtb3ZlRXZlbnQgOiB1dGlscy5hZGRFdmVudCxcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5vcHRpb25zLmJpbmRUb1dyYXBwZXIgPyB0aGlzLndyYXBwZXIgOiB3aW5kb3c7XHJcblxyXG4gICAgICAgIGV2ZW50VHlwZSh3aW5kb3csICdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMpO1xyXG4gICAgICAgIGV2ZW50VHlwZSh3aW5kb3csICdyZXNpemUnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuY2xpY2sgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0aGlzLndyYXBwZXIsICdjbGljaycsIHRoaXMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVNb3VzZSApIHtcclxuICAgICAgICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgJ21vdXNlZG93bicsIHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2Vtb3ZlJywgdGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsICdtb3VzZWNhbmNlbCcsIHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2V1cCcsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB1dGlscy5oYXNQb2ludGVyICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZVBvaW50ZXIgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0aGlzLndyYXBwZXIsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmRvd24nKSwgdGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmNhbmNlbCcpLCB0aGlzKTtcclxuICAgICAgICAgICAgZXZlbnRUeXBlKHRhcmdldCwgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVydXAnKSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHV0aWxzLmhhc1RvdWNoICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZVRvdWNoICkge1xyXG4gICAgICAgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVyLCAndG91Y2hzdGFydCcsIHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAndG91Y2htb3ZlJywgdGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsICd0b3VjaGNhbmNlbCcsIHRoaXMpO1xyXG4gICAgICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAndG91Y2hlbmQnLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50VHlwZSh0aGlzLnNjcm9sbGVyLCAndHJhbnNpdGlvbmVuZCcsIHRoaXMpO1xyXG4gICAgICAgIGV2ZW50VHlwZSh0aGlzLnNjcm9sbGVyLCAnd2Via2l0VHJhbnNpdGlvbkVuZCcsIHRoaXMpO1xyXG4gICAgICAgIGV2ZW50VHlwZSh0aGlzLnNjcm9sbGVyLCAnb1RyYW5zaXRpb25FbmQnLCB0aGlzKTtcclxuICAgICAgICBldmVudFR5cGUodGhpcy5zY3JvbGxlciwgJ01TVHJhbnNpdGlvbkVuZCcsIHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRDb21wdXRlZFBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1hdHJpeCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuc2Nyb2xsZXIsIG51bGwpLFxyXG4gICAgICAgICAgICB4LCB5O1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy51c2VUcmFuc2Zvcm0gKSB7XHJcbiAgICAgICAgICAgIG1hdHJpeCA9IG1hdHJpeFt1dGlscy5zdHlsZS50cmFuc2Zvcm1dLnNwbGl0KCcpJylbMF0uc3BsaXQoJywgJyk7XHJcbiAgICAgICAgICAgIHggPSArKG1hdHJpeFsxMl0gfHwgbWF0cml4WzRdKTtcclxuICAgICAgICAgICAgeSA9ICsobWF0cml4WzEzXSB8fCBtYXRyaXhbNV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHggPSArbWF0cml4LmxlZnQucmVwbGFjZSgvW14tXFxkLl0vZywgJycpO1xyXG4gICAgICAgICAgICB5ID0gK21hdHJpeC50b3AucmVwbGFjZSgvW14tXFxkLl0vZywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSB9O1xyXG4gICAgfSxcclxuICAgIF9pbml0SW5kaWNhdG9yczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbnRlcmFjdGl2ZSA9IHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZVNjcm9sbGJhcnMsXHJcbiAgICAgICAgICAgIGN1c3RvbVN0eWxlID0gdHlwZW9mIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJzICE9ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBpbmRpY2F0b3JzID0gW10sXHJcbiAgICAgICAgICAgIGluZGljYXRvcjtcclxuXHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmluZGljYXRvcnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyApIHtcclxuICAgICAgICAgICAgLy8gVmVydGljYWwgc2Nyb2xsYmFyXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNjcm9sbFkgKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWw6IGNyZWF0ZURlZmF1bHRTY3JvbGxiYXIoJ3YnLCBpbnRlcmFjdGl2ZSwgdGhpcy5vcHRpb25zLnNjcm9sbGJhcnMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aXZlOiBpbnRlcmFjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U2Nyb2xsYmFyczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TdHlsZTogY3VzdG9tU3R5bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiB0aGlzLm9wdGlvbnMucmVzaXplU2Nyb2xsYmFycyxcclxuICAgICAgICAgICAgICAgICAgICBzaHJpbms6IHRoaXMub3B0aW9ucy5zaHJpbmtTY3JvbGxiYXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHRoaXMub3B0aW9ucy5mYWRlU2Nyb2xsYmFycyxcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5YOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yLmVsKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvcnMucHVzaChpbmRpY2F0b3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBIb3Jpem9udGFsIHNjcm9sbGJhclxyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zY3JvbGxYICkge1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsOiBjcmVhdGVEZWZhdWx0U2Nyb2xsYmFyKCdoJywgaW50ZXJhY3RpdmUsIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJzKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZTogaW50ZXJhY3RpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNjcm9sbGJhcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tU3R5bGU6IGN1c3RvbVN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogdGhpcy5vcHRpb25zLnJlc2l6ZVNjcm9sbGJhcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hyaW5rOiB0aGlzLm9wdGlvbnMuc2hyaW5rU2Nyb2xsYmFycyxcclxuICAgICAgICAgICAgICAgICAgICBmYWRlOiB0aGlzLm9wdGlvbnMuZmFkZVNjcm9sbGJhcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuWTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKGluZGljYXRvci5lbCk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3JzLnB1c2goaW5kaWNhdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycyApIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogY2hlY2sgY29uY2F0IGNvbXBhdGliaWxpdHlcclxuICAgICAgICAgICAgaW5kaWNhdG9ycyA9IGluZGljYXRvcnMuY29uY2F0KHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoIHZhciBpID0gaW5kaWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9ycy5wdXNoKCBuZXcgSW5kaWNhdG9yKHRoaXMsIGluZGljYXRvcnNbaV0pICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB3ZSBjYW4gdXNlIGFycmF5Lm1hcCAod2lkZSBjb21wYXRpYmlsaXR5IGFuZCBwZXJmb3JtYW5jZSBpc3N1ZXMpXHJcbiAgICAgICAgZnVuY3Rpb24gX2luZGljYXRvcnNNYXAgKGZuKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGF0LmluZGljYXRvcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gdGhhdC5pbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKHRoYXQuaW5kaWNhdG9yc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxiYXJzICkge1xyXG4gICAgICAgICAgICB0aGlzLm9uKCdzY3JvbGxFbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKCdzY3JvbGxDYW5jZWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKCdzY3JvbGxTdGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhZGUoMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKCdiZWZvcmVTY3JvbGxTdGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhZGUoMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5vbigncmVmcmVzaCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pbmRpY2F0b3JzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdFdoZWVsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXRpbHMuYWRkRXZlbnQodGhpcy53cmFwcGVyLCAnd2hlZWwnLCB0aGlzKTtcclxuICAgICAgICB1dGlscy5hZGRFdmVudCh0aGlzLndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7XHJcbiAgICAgICAgdXRpbHMuYWRkRXZlbnQodGhpcy53cmFwcGVyLCAnRE9NTW91c2VTY3JvbGwnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2hlZWxUaW1lb3V0KTtcclxuICAgICAgICAgICAgdGhpcy53aGVlbFRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLndyYXBwZXIsICd3aGVlbCcsIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHRoaXMud3JhcHBlciwgJ0RPTU1vdXNlU2Nyb2xsJywgdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF93aGVlbDogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB3aGVlbERlbHRhWCwgd2hlZWxEZWx0YVksXHJcbiAgICAgICAgICAgIG5ld1gsIG5ld1ksXHJcbiAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMud2hlZWxUaW1lb3V0ID09PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgIHRoYXQuX2V4ZWNFdmVudCgnc2Nyb2xsU3RhcnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHNjcm9sbEVuZCBldmVudCBhZnRlciA0MDBtcyB0aGUgd2hlZWwgc3RvcHBlZCBzY3JvbGxpbmdcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy53aGVlbFRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMud2hlZWxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGF0Lm9wdGlvbnMuc25hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGF0LndoZWVsVGltZW91dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9LCA0MDApO1xyXG5cclxuICAgICAgICBpZiAoICdkZWx0YVgnIGluIGUgKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmRlbHRhTW9kZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgd2hlZWxEZWx0YVggPSAtZS5kZWx0YVggKiB0aGlzLm9wdGlvbnMubW91c2VXaGVlbFNwZWVkO1xyXG4gICAgICAgICAgICAgICAgd2hlZWxEZWx0YVkgPSAtZS5kZWx0YVkgKiB0aGlzLm9wdGlvbnMubW91c2VXaGVlbFNwZWVkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hlZWxEZWx0YVggPSAtZS5kZWx0YVg7XHJcbiAgICAgICAgICAgICAgICB3aGVlbERlbHRhWSA9IC1lLmRlbHRhWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoICd3aGVlbERlbHRhWCcgaW4gZSApIHtcclxuICAgICAgICAgICAgd2hlZWxEZWx0YVggPSBlLndoZWVsRGVsdGFYIC8gMTIwICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDtcclxuICAgICAgICAgICAgd2hlZWxEZWx0YVkgPSBlLndoZWVsRGVsdGFZIC8gMTIwICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDtcclxuICAgICAgICB9IGVsc2UgaWYgKCAnd2hlZWxEZWx0YScgaW4gZSApIHtcclxuICAgICAgICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWSA9IGUud2hlZWxEZWx0YSAvIDEyMCAqIHRoaXMub3B0aW9ucy5tb3VzZVdoZWVsU3BlZWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICggJ2RldGFpbCcgaW4gZSApIHtcclxuICAgICAgICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWSA9IC1lLmRldGFpbCAvIDMgKiB0aGlzLm9wdGlvbnMubW91c2VXaGVlbFNwZWVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoZWVsRGVsdGFYICo9IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbjtcclxuICAgICAgICB3aGVlbERlbHRhWSAqPSB0aGlzLm9wdGlvbnMuaW52ZXJ0V2hlZWxEaXJlY3Rpb247XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7XHJcbiAgICAgICAgICAgIHdoZWVsRGVsdGFYID0gd2hlZWxEZWx0YVk7XHJcbiAgICAgICAgICAgIHdoZWVsRGVsdGFZID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNuYXAgKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYO1xyXG4gICAgICAgICAgICBuZXdZID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWTtcclxuXHJcbiAgICAgICAgICAgIGlmICggd2hlZWxEZWx0YVggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgbmV3WC0tO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB3aGVlbERlbHRhWCA8IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdYKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggd2hlZWxEZWx0YVkgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgbmV3WS0tO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB3aGVlbERlbHRhWSA8IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdZKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ29Ub1BhZ2UobmV3WCwgbmV3WSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXdYID0gdGhpcy54ICsgTWF0aC5yb3VuZCh0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgPyB3aGVlbERlbHRhWCA6IDApO1xyXG4gICAgICAgIG5ld1kgPSB0aGlzLnkgKyBNYXRoLnJvdW5kKHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyB3aGVlbERlbHRhWSA6IDApO1xyXG5cclxuICAgICAgICB0aGlzLmRpcmVjdGlvblggPSB3aGVlbERlbHRhWCA+IDAgPyAtMSA6IHdoZWVsRGVsdGFYIDwgMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWSA9IHdoZWVsRGVsdGFZID4gMCA/IC0xIDogd2hlZWxEZWx0YVkgPCAwID8gMSA6IDA7XHJcblxyXG4gICAgICAgIGlmICggbmV3WCA+IDAgKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIG5ld1ggPCB0aGlzLm1heFNjcm9sbFggKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIG5ld1kgPiAwICkge1xyXG4gICAgICAgICAgICBuZXdZID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKCBuZXdZIDwgdGhpcy5tYXhTY3JvbGxZICkge1xyXG4gICAgICAgICAgICBuZXdZID0gdGhpcy5tYXhTY3JvbGxZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhuZXdYLCBuZXdZLCAwKTtcclxuXHJcbi8vIElOU0VSVCBQT0lOVDogX3doZWVsXHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0U25hcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLnNuYXAgPT0gJ3N0cmluZycgKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zbmFwID0gdGhpcy5zY3JvbGxlci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5zbmFwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub24oJ3JlZnJlc2gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMCwgbCxcclxuICAgICAgICAgICAgICAgIG0gPSAwLCBuLFxyXG4gICAgICAgICAgICAgICAgY3gsIGN5LFxyXG4gICAgICAgICAgICAgICAgeCA9IDAsIHksXHJcbiAgICAgICAgICAgICAgICBzdGVwWCA9IHRoaXMub3B0aW9ucy5zbmFwU3RlcFggfHwgdGhpcy53cmFwcGVyV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBzdGVwWSA9IHRoaXMub3B0aW9ucy5zbmFwU3RlcFkgfHwgdGhpcy53cmFwcGVySGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgZWw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VzID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAoICF0aGlzLndyYXBwZXJXaWR0aCB8fCAhdGhpcy53cmFwcGVySGVpZ2h0IHx8ICF0aGlzLnNjcm9sbGVyV2lkdGggfHwgIXRoaXMuc2Nyb2xsZXJIZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNuYXAgPT09IHRydWUgKSB7XHJcbiAgICAgICAgICAgICAgICBjeCA9IE1hdGgucm91bmQoIHN0ZXBYIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgY3kgPSBNYXRoLnJvdW5kKCBzdGVwWSAvIDIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIHggPiAtdGhpcy5zY3JvbGxlcldpZHRoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXNbaV0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB5ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCB5ID4gLXRoaXMuc2Nyb2xsZXJIZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXNbaV1bbF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLm1heCh4LCB0aGlzLm1heFNjcm9sbFgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogTWF0aC5tYXgoeSwgdGhpcy5tYXhTY3JvbGxZKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzdGVwWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogc3RlcFksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeDogeCAtIGN4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3k6IHkgLSBjeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeSAtPSBzdGVwWTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCAtPSBzdGVwWDtcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbCA9IHRoaXMub3B0aW9ucy5zbmFwO1xyXG4gICAgICAgICAgICAgICAgbCA9IGVsLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIG4gPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpID09PSAwIHx8IGVsW2ldLm9mZnNldExlZnQgPD0gZWxbaS0xXS5vZmZzZXRMZWZ0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5wYWdlc1ttXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlc1ttXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IE1hdGgubWF4KC1lbFtpXS5vZmZzZXRMZWZ0LCB0aGlzLm1heFNjcm9sbFgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBNYXRoLm1heCgtZWxbaV0ub2Zmc2V0VG9wLCB0aGlzLm1heFNjcm9sbFkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN4ID0geCAtIE1hdGgucm91bmQoZWxbaV0ub2Zmc2V0V2lkdGggLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICBjeSA9IHkgLSBNYXRoLnJvdW5kKGVsW2ldLm9mZnNldEhlaWdodCAvIDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VzW21dW25dID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogZWxbaV0ub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZWxbaV0ub2Zmc2V0SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjeDogY3gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN5OiBjeVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggeCA+IHRoaXMubWF4U2Nyb2xsWCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5nb1RvUGFnZSh0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYIHx8IDAsIHRoaXMuY3VycmVudFBhZ2UucGFnZVkgfHwgMCwgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgc25hcCB0aHJlc2hvbGQgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQgJSAxID09PSAwICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFwVGhyZXNob2xkWCA9IHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFwVGhyZXNob2xkWSA9IHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFwVGhyZXNob2xkWCA9IE1hdGgucm91bmQodGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYXVt0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZXS53aWR0aCAqIHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25hcFRocmVzaG9sZFkgPSBNYXRoLnJvdW5kKHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZS5wYWdlWF1bdGhpcy5jdXJyZW50UGFnZS5wYWdlWV0uaGVpZ2h0ICogdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2ZsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IHRoaXMub3B0aW9ucy5zbmFwU3BlZWQgfHwgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHRoaXMueCAtIHRoaXMuc3RhcnRYKSwgMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHRoaXMueSAtIHRoaXMuc3RhcnRZKSwgMTAwMClcclxuICAgICAgICAgICAgICAgICAgICApLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nb1RvUGFnZShcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UucGFnZVggKyB0aGlzLmRpcmVjdGlvblgsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZICsgdGhpcy5kaXJlY3Rpb25ZLFxyXG4gICAgICAgICAgICAgICAgdGltZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfbmVhcmVzdFNuYXA6IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5wYWdlcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHBhZ2VYOiAwLCBwYWdlWTogMCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICBsID0gdGhpcy5wYWdlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIG0gPSAwO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBleGNlZWRlZCB0aGUgc25hcCB0aHJlc2hvbGRcclxuICAgICAgICBpZiAoIE1hdGguYWJzKHggLSB0aGlzLmFic1N0YXJ0WCkgPCB0aGlzLnNuYXBUaHJlc2hvbGRYICYmXHJcbiAgICAgICAgICAgIE1hdGguYWJzKHkgLSB0aGlzLmFic1N0YXJ0WSkgPCB0aGlzLnNuYXBUaHJlc2hvbGRZICkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggeCA+IDAgKSB7XHJcbiAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHggPCB0aGlzLm1heFNjcm9sbFggKSB7XHJcbiAgICAgICAgICAgIHggPSB0aGlzLm1heFNjcm9sbFg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHkgPiAwICkge1xyXG4gICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKCB5IDwgdGhpcy5tYXhTY3JvbGxZICkge1xyXG4gICAgICAgICAgICB5ID0gdGhpcy5tYXhTY3JvbGxZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICggOyBpIDwgbDsgaSsrICkge1xyXG4gICAgICAgICAgICBpZiAoIHggPj0gdGhpcy5wYWdlc1tpXVswXS5jeCApIHtcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLnBhZ2VzW2ldWzBdLng7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbCA9IHRoaXMucGFnZXNbaV0ubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IgKCA7IG0gPCBsOyBtKysgKSB7XHJcbiAgICAgICAgICAgIGlmICggeSA+PSB0aGlzLnBhZ2VzWzBdW21dLmN5ICkge1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIGkgPT0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWCApIHtcclxuICAgICAgICAgICAgaSArPSB0aGlzLmRpcmVjdGlvblg7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGkgPCAwICkge1xyXG4gICAgICAgICAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGkgPj0gdGhpcy5wYWdlcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICBpID0gdGhpcy5wYWdlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB4ID0gdGhpcy5wYWdlc1tpXVswXS54O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBtID09IHRoaXMuY3VycmVudFBhZ2UucGFnZVkgKSB7XHJcbiAgICAgICAgICAgIG0gKz0gdGhpcy5kaXJlY3Rpb25ZO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBtIDwgMCApIHtcclxuICAgICAgICAgICAgICAgIG0gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBtID49IHRoaXMucGFnZXNbMF0ubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgbSA9IHRoaXMucGFnZXNbMF0ubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgIHk6IHksXHJcbiAgICAgICAgICAgIHBhZ2VYOiBpLFxyXG4gICAgICAgICAgICBwYWdlWTogbVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGdvVG9QYWdlOiBmdW5jdGlvbiAoeCwgeSwgdGltZSwgZWFzaW5nKSB7XHJcbiAgICAgICAgZWFzaW5nID0gZWFzaW5nIHx8IHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmc7XHJcblxyXG4gICAgICAgIGlmICggeCA+PSB0aGlzLnBhZ2VzLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgeCA9IHRoaXMucGFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHtcclxuICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHkgPj0gdGhpcy5wYWdlc1t4XS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIHkgPSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIGlmICggeSA8IDAgKSB7XHJcbiAgICAgICAgICAgIHkgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHBvc1ggPSB0aGlzLnBhZ2VzW3hdW3ldLngsXHJcbiAgICAgICAgICAgIHBvc1kgPSB0aGlzLnBhZ2VzW3hdW3ldLnk7XHJcblxyXG4gICAgICAgIHRpbWUgPSB0aW1lID09PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMuc25hcFNwZWVkIHx8IE1hdGgubWF4KFxyXG4gICAgICAgICAgICBNYXRoLm1heChcclxuICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHBvc1ggLSB0aGlzLngpLCAxMDAwKSxcclxuICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHBvc1kgLSB0aGlzLnkpLCAxMDAwKVxyXG4gICAgICAgICAgICApLCAzMDApIDogdGltZTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHtcclxuICAgICAgICAgICAgeDogcG9zWCxcclxuICAgICAgICAgICAgeTogcG9zWSxcclxuICAgICAgICAgICAgcGFnZVg6IHgsXHJcbiAgICAgICAgICAgIHBhZ2VZOiB5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhwb3NYLCBwb3NZLCB0aW1lLCBlYXNpbmcpO1xyXG4gICAgfSxcclxuXHJcbiAgICBuZXh0OiBmdW5jdGlvbiAodGltZSwgZWFzaW5nKSB7XHJcbiAgICAgICAgdmFyIHggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYLFxyXG4gICAgICAgICAgICB5ID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWTtcclxuXHJcbiAgICAgICAgeCsrO1xyXG5cclxuICAgICAgICBpZiAoIHggPj0gdGhpcy5wYWdlcy5sZW5ndGggJiYgdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCApIHtcclxuICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIHkrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ29Ub1BhZ2UoeCwgeSwgdGltZSwgZWFzaW5nKTtcclxuICAgIH0sXHJcblxyXG4gICAgcHJldjogZnVuY3Rpb24gKHRpbWUsIGVhc2luZykge1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWCxcclxuICAgICAgICAgICAgeSA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVk7XHJcblxyXG4gICAgICAgIHgtLTtcclxuXHJcbiAgICAgICAgaWYgKCB4IDwgMCAmJiB0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsICkge1xyXG4gICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgeS0tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nb1RvUGFnZSh4LCB5LCB0aW1lLCBlYXNpbmcpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdEtleXM6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gZGVmYXVsdCBrZXkgYmluZGluZ3NcclxuICAgICAgICB2YXIga2V5cyA9IHtcclxuICAgICAgICAgICAgcGFnZVVwOiAzMyxcclxuICAgICAgICAgICAgcGFnZURvd246IDM0LFxyXG4gICAgICAgICAgICBlbmQ6IDM1LFxyXG4gICAgICAgICAgICBob21lOiAzNixcclxuICAgICAgICAgICAgbGVmdDogMzcsXHJcbiAgICAgICAgICAgIHVwOiAzOCxcclxuICAgICAgICAgICAgcmlnaHQ6IDM5LFxyXG4gICAgICAgICAgICBkb3duOiA0MFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGk7XHJcblxyXG4gICAgICAgIC8vIGlmIHlvdSBnaXZlIG1lIGNoYXJhY3RlcnMgSSBnaXZlIHlvdSBrZXljb2RlXHJcbiAgICAgICAgaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzID09ICdvYmplY3QnICkge1xyXG4gICAgICAgICAgICBmb3IgKCBpIGluIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncyApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5nc1tpXSA9PSAnc3RyaW5nJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0udG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKCBpIGluIGtleXMgKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5nc1tpXSA9IHRoaXMub3B0aW9ucy5rZXlCaW5kaW5nc1tpXSB8fCBrZXlzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAna2V5ZG93bicsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICdrZXlkb3duJywgdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9rZXk6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5lbmFibGVkICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc25hcCA9IHRoaXMub3B0aW9ucy5zbmFwLCAgIC8vIHdlIGFyZSB1c2luZyB0aGlzIGFsb3QsIGJldHRlciB0byBjYWNoZSBpdFxyXG4gICAgICAgICAgICBuZXdYID0gc25hcCA/IHRoaXMuY3VycmVudFBhZ2UucGFnZVggOiB0aGlzLngsXHJcbiAgICAgICAgICAgIG5ld1kgPSBzbmFwID8gdGhpcy5jdXJyZW50UGFnZS5wYWdlWSA6IHRoaXMueSxcclxuICAgICAgICAgICAgbm93ID0gdXRpbHMuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBwcmV2VGltZSA9IHRoaXMua2V5VGltZSB8fCAwLFxyXG4gICAgICAgICAgICBhY2NlbGVyYXRpb24gPSAwLjI1MCxcclxuICAgICAgICAgICAgcG9zO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIHRoaXMuaXNJblRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgIHBvcyA9IHRoaXMuZ2V0Q29tcHV0ZWRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNsYXRlKE1hdGgucm91bmQocG9zLngpLCBNYXRoLnJvdW5kKHBvcy55KSk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMua2V5QWNjZWxlcmF0aW9uID0gbm93IC0gcHJldlRpbWUgPCAyMDAgPyBNYXRoLm1pbih0aGlzLmtleUFjY2VsZXJhdGlvbiArIGFjY2VsZXJhdGlvbiwgNTApIDogMDtcclxuXHJcbiAgICAgICAgc3dpdGNoICggZS5rZXlDb2RlICkge1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5wYWdlVXA6XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCAmJiAhdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdYICs9IHNuYXAgPyAxIDogdGhpcy53cmFwcGVyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1kgKz0gc25hcCA/IDEgOiB0aGlzLndyYXBwZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MucGFnZURvd246XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCAmJiAhdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdYIC09IHNuYXAgPyAxIDogdGhpcy53cmFwcGVyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1kgLT0gc25hcCA/IDEgOiB0aGlzLndyYXBwZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MuZW5kOlxyXG4gICAgICAgICAgICAgICAgbmV3WCA9IHNuYXAgPyB0aGlzLnBhZ2VzLmxlbmd0aC0xIDogdGhpcy5tYXhTY3JvbGxYO1xyXG4gICAgICAgICAgICAgICAgbmV3WSA9IHNuYXAgPyB0aGlzLnBhZ2VzWzBdLmxlbmd0aC0xIDogdGhpcy5tYXhTY3JvbGxZO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzLmhvbWU6XHJcbiAgICAgICAgICAgICAgICBuZXdYID0gMDtcclxuICAgICAgICAgICAgICAgIG5ld1kgPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzLmxlZnQ6XHJcbiAgICAgICAgICAgICAgICBuZXdYICs9IHNuYXAgPyAtMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy51cDpcclxuICAgICAgICAgICAgICAgIG5ld1kgKz0gc25hcCA/IDEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24+PjA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MucmlnaHQ6XHJcbiAgICAgICAgICAgICAgICBuZXdYIC09IHNuYXAgPyAtMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5kb3duOlxyXG4gICAgICAgICAgICAgICAgbmV3WSAtPSBzbmFwID8gMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBzbmFwICkge1xyXG4gICAgICAgICAgICB0aGlzLmdvVG9QYWdlKG5ld1gsIG5ld1kpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIG5ld1ggPiAwICkge1xyXG4gICAgICAgICAgICBuZXdYID0gMDtcclxuICAgICAgICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIG5ld1ggPCB0aGlzLm1heFNjcm9sbFggKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7XHJcbiAgICAgICAgICAgIHRoaXMua2V5QWNjZWxlcmF0aW9uID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggbmV3WSA+IDAgKSB7XHJcbiAgICAgICAgICAgIG5ld1kgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmtleUFjY2VsZXJhdGlvbiA9IDA7XHJcbiAgICAgICAgfSBlbHNlIGlmICggbmV3WSA8IHRoaXMubWF4U2Nyb2xsWSApIHtcclxuICAgICAgICAgICAgbmV3WSA9IHRoaXMubWF4U2Nyb2xsWTtcclxuICAgICAgICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhuZXdYLCBuZXdZLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5rZXlUaW1lID0gbm93O1xyXG4gICAgfSxcclxuXHJcbiAgICBfYW5pbWF0ZTogZnVuY3Rpb24gKGRlc3RYLCBkZXN0WSwgZHVyYXRpb24sIGVhc2luZ0ZuKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICBzdGFydFggPSB0aGlzLngsXHJcbiAgICAgICAgICAgIHN0YXJ0WSA9IHRoaXMueSxcclxuICAgICAgICAgICAgc3RhcnRUaW1lID0gdXRpbHMuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBkZXN0VGltZSA9IHN0YXJ0VGltZSArIGR1cmF0aW9uO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdGVwICgpIHtcclxuICAgICAgICAgICAgdmFyIG5vdyA9IHV0aWxzLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIG5ld1gsIG5ld1ksXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc7XHJcblxyXG4gICAgICAgICAgICBpZiAoIG5vdyA+PSBkZXN0VGltZSApIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoYXQuX3RyYW5zbGF0ZShkZXN0WCwgZGVzdFkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggIXRoYXQucmVzZXRQb3NpdGlvbih0aGF0Lm9wdGlvbnMuYm91bmNlVGltZSkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vdyA9ICggbm93IC0gc3RhcnRUaW1lICkgLyBkdXJhdGlvbjtcclxuICAgICAgICAgICAgZWFzaW5nID0gZWFzaW5nRm4obm93KTtcclxuICAgICAgICAgICAgbmV3WCA9ICggZGVzdFggLSBzdGFydFggKSAqIGVhc2luZyArIHN0YXJ0WDtcclxuICAgICAgICAgICAgbmV3WSA9ICggZGVzdFkgLSBzdGFydFkgKSAqIGVhc2luZyArIHN0YXJ0WTtcclxuICAgICAgICAgICAgdGhhdC5fdHJhbnNsYXRlKG5ld1gsIG5ld1kpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGF0LmlzQW5pbWF0aW5nICkge1xyXG4gICAgICAgICAgICAgICAgckFGKHN0ZXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICBzdGVwKCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgc3dpdGNoICggZS50eXBlICkge1xyXG4gICAgICAgICAgICBjYXNlICd0b3VjaHN0YXJ0JzpcclxuICAgICAgICAgICAgY2FzZSAncG9pbnRlcmRvd24nOlxyXG4gICAgICAgICAgICBjYXNlICdNU1BvaW50ZXJEb3duJzpcclxuICAgICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0KGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvdWNobW92ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50ZXJtb3ZlJzpcclxuICAgICAgICAgICAgY2FzZSAnTVNQb2ludGVyTW92ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNlbW92ZSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlKGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvdWNoZW5kJzpcclxuICAgICAgICAgICAgY2FzZSAncG9pbnRlcnVwJzpcclxuICAgICAgICAgICAgY2FzZSAnTVNQb2ludGVyVXAnOlxyXG4gICAgICAgICAgICBjYXNlICdtb3VzZXVwJzpcclxuICAgICAgICAgICAgY2FzZSAndG91Y2hjYW5jZWwnOlxyXG4gICAgICAgICAgICBjYXNlICdwb2ludGVyY2FuY2VsJzpcclxuICAgICAgICAgICAgY2FzZSAnTVNQb2ludGVyQ2FuY2VsJzpcclxuICAgICAgICAgICAgY2FzZSAnbW91c2VjYW5jZWwnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW5kKGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ29yaWVudGF0aW9uY2hhbmdlJzpcclxuICAgICAgICAgICAgY2FzZSAncmVzaXplJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RyYW5zaXRpb25lbmQnOlxyXG4gICAgICAgICAgICBjYXNlICd3ZWJraXRUcmFuc2l0aW9uRW5kJzpcclxuICAgICAgICAgICAgY2FzZSAnb1RyYW5zaXRpb25FbmQnOlxyXG4gICAgICAgICAgICBjYXNlICdNU1RyYW5zaXRpb25FbmQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbkVuZChlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd3aGVlbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0RPTU1vdXNlU2Nyb2xsJzpcclxuICAgICAgICAgICAgY2FzZSAnbW91c2V3aGVlbCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93aGVlbChlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdrZXlkb3duJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleShlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjbGljayc6XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZW5hYmxlZCAmJiAhZS5fY29uc3RydWN0ZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRTY3JvbGxiYXIgKGRpcmVjdGlvbiwgaW50ZXJhY3RpdmUsIHR5cGUpIHtcclxuICAgIHZhciBzY3JvbGxiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICBpZiAoIHR5cGUgPT09IHRydWUgKSB7XHJcbiAgICAgICAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo5OTk5JztcclxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuY3NzVGV4dCA9ICctd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuOSk7Ym9yZGVyLXJhZGl1czozcHgnO1xyXG4gICAgfVxyXG5cclxuICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAnaVNjcm9sbEluZGljYXRvcic7XHJcblxyXG4gICAgaWYgKCBkaXJlY3Rpb24gPT0gJ2gnICkge1xyXG4gICAgICAgIGlmICggdHlwZSA9PT0gdHJ1ZSApIHtcclxuICAgICAgICAgICAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQgKz0gJztoZWlnaHQ6N3B4O2xlZnQ6MnB4O3JpZ2h0OjJweDtib3R0b206MCc7XHJcbiAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjcm9sbGJhci5jbGFzc05hbWUgPSAnaVNjcm9sbEhvcml6b250YWxTY3JvbGxiYXInO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIHR5cGUgPT09IHRydWUgKSB7XHJcbiAgICAgICAgICAgIHNjcm9sbGJhci5zdHlsZS5jc3NUZXh0ICs9ICc7d2lkdGg6N3B4O2JvdHRvbToycHg7dG9wOjJweDtyaWdodDoxcHgnO1xyXG4gICAgICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjcm9sbGJhci5jbGFzc05hbWUgPSAnaVNjcm9sbFZlcnRpY2FsU2Nyb2xsYmFyJztcclxuICAgIH1cclxuXHJcbiAgICBzY3JvbGxiYXIuc3R5bGUuY3NzVGV4dCArPSAnO292ZXJmbG93OmhpZGRlbic7XHJcblxyXG4gICAgaWYgKCAhaW50ZXJhY3RpdmUgKSB7XHJcbiAgICAgICAgc2Nyb2xsYmFyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgc2Nyb2xsYmFyLmFwcGVuZENoaWxkKGluZGljYXRvcik7XHJcblxyXG4gICAgcmV0dXJuIHNjcm9sbGJhcjtcclxufVxyXG5cclxuZnVuY3Rpb24gSW5kaWNhdG9yIChzY3JvbGxlciwgb3B0aW9ucykge1xyXG4gICAgdGhpcy53cmFwcGVyID0gdHlwZW9mIG9wdGlvbnMuZWwgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuZWwpIDogb3B0aW9ucy5lbDtcclxuICAgIHRoaXMud3JhcHBlclN0eWxlID0gdGhpcy53cmFwcGVyLnN0eWxlO1xyXG4gICAgdGhpcy5pbmRpY2F0b3IgPSB0aGlzLndyYXBwZXIuY2hpbGRyZW5bMF07XHJcbiAgICB0aGlzLmluZGljYXRvclN0eWxlID0gdGhpcy5pbmRpY2F0b3Iuc3R5bGU7XHJcbiAgICB0aGlzLnNjcm9sbGVyID0gc2Nyb2xsZXI7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0ge1xyXG4gICAgICAgIGxpc3Rlblg6IHRydWUsXHJcbiAgICAgICAgbGlzdGVuWTogdHJ1ZSxcclxuICAgICAgICBpbnRlcmFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgcmVzaXplOiB0cnVlLFxyXG4gICAgICAgIGRlZmF1bHRTY3JvbGxiYXJzOiBmYWxzZSxcclxuICAgICAgICBzaHJpbms6IGZhbHNlLFxyXG4gICAgICAgIGZhZGU6IGZhbHNlLFxyXG4gICAgICAgIHNwZWVkUmF0aW9YOiAwLFxyXG4gICAgICAgIHNwZWVkUmF0aW9ZOiAwXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zW2ldID0gb3B0aW9uc1tpXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNpemVSYXRpb1ggPSAxO1xyXG4gICAgdGhpcy5zaXplUmF0aW9ZID0gMTtcclxuICAgIHRoaXMubWF4UG9zWCA9IDA7XHJcbiAgICB0aGlzLm1heFBvc1kgPSAwO1xyXG5cclxuICAgIGlmICggdGhpcy5vcHRpb25zLmludGVyYWN0aXZlICkge1xyXG4gICAgICAgIGlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlVG91Y2ggKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMuaW5kaWNhdG9yLCAndG91Y2hzdGFydCcsIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csICd0b3VjaGVuZCcsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZVBvaW50ZXIgKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMuaW5kaWNhdG9yLCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJkb3duJyksIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcnVwJyksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZU1vdXNlICkge1xyXG4gICAgICAgICAgICB1dGlscy5hZGRFdmVudCh0aGlzLmluZGljYXRvciwgJ21vdXNlZG93bicsIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csICdtb3VzZXVwJywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5vcHRpb25zLmZhZGUgKSB7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNmb3JtXSA9IHRoaXMuc2Nyb2xsZXIudHJhbnNsYXRlWjtcclxuICAgICAgICB2YXIgZHVyYXRpb25Qcm9wID0gdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgIGlmKCFkdXJhdGlvblByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndyYXBwZXJTdHlsZVtkdXJhdGlvblByb3BdID0gdXRpbHMuaXNCYWRBbmRyb2lkID8gJzAuMDAwMW1zJyA6ICcwbXMnO1xyXG4gICAgICAgIC8vIHJlbW92ZSAwLjAwMDFtc1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBpZih1dGlscy5pc0JhZEFuZHJvaWQpIHtcclxuICAgICAgICAgICAgckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi53cmFwcGVyU3R5bGVbZHVyYXRpb25Qcm9wXSA9PT0gJzAuMDAwMW1zJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYud3JhcHBlclN0eWxlW2R1cmF0aW9uUHJvcF0gPSAnMHMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53cmFwcGVyU3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgIH1cclxufVxyXG5cclxuSW5kaWNhdG9yLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZUV2ZW50OiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHN3aXRjaCAoIGUudHlwZSApIHtcclxuICAgICAgICAgICAgY2FzZSAndG91Y2hzdGFydCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50ZXJkb3duJzpcclxuICAgICAgICAgICAgY2FzZSAnTVNQb2ludGVyRG93bic6XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydChlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3VjaG1vdmUnOlxyXG4gICAgICAgICAgICBjYXNlICdwb2ludGVybW92ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ01TUG9pbnRlck1vdmUnOlxyXG4gICAgICAgICAgICBjYXNlICdtb3VzZW1vdmUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZShlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3VjaGVuZCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50ZXJ1cCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ01TUG9pbnRlclVwJzpcclxuICAgICAgICAgICAgY2FzZSAnbW91c2V1cCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvdWNoY2FuY2VsJzpcclxuICAgICAgICAgICAgY2FzZSAncG9pbnRlcmNhbmNlbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ01TUG9pbnRlckNhbmNlbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNlY2FuY2VsJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZChlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxiYXJzICkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mYWRlVGltZW91dCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFkZVRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSApIHtcclxuICAgICAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy5pbmRpY2F0b3IsICd0b3VjaHN0YXJ0JywgdGhpcyk7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHRoaXMuaW5kaWNhdG9yLCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJkb3duJyksIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLmluZGljYXRvciwgJ21vdXNlZG93bicsIHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAndG91Y2htb3ZlJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTtcclxuICAgICAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3VjaGVuZCcsIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcnVwJyksIHRoaXMpO1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICdtb3VzZXVwJywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycyApIHtcclxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53cmFwcGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9zdGFydDogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgcG9pbnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0gOiBlO1xyXG5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uVGltZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFBvaW50WCA9IHBvaW50LnBhZ2VYO1xyXG4gICAgICAgIHRoaXMubGFzdFBvaW50WSA9IHBvaW50LnBhZ2VZO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSAgPSB1dGlscy5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlVG91Y2ggKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgJ3RvdWNobW92ZScsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZVBvaW50ZXIgKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVNb3VzZSApIHtcclxuICAgICAgICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbGVyLl9leGVjRXZlbnQoJ2JlZm9yZVNjcm9sbFN0YXJ0Jyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9tb3ZlOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBwb2ludCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXSA6IGUsXHJcbiAgICAgICAgICAgIGRlbHRhWCwgZGVsdGFZLFxyXG4gICAgICAgICAgICBuZXdYLCBuZXdZLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXAgPSB1dGlscy5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMubW92ZWQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsZXIuX2V4ZWNFdmVudCgnc2Nyb2xsU3RhcnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW92ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBkZWx0YVggPSBwb2ludC5wYWdlWCAtIHRoaXMubGFzdFBvaW50WDtcclxuICAgICAgICB0aGlzLmxhc3RQb2ludFggPSBwb2ludC5wYWdlWDtcclxuXHJcbiAgICAgICAgZGVsdGFZID0gcG9pbnQucGFnZVkgLSB0aGlzLmxhc3RQb2ludFk7XHJcbiAgICAgICAgdGhpcy5sYXN0UG9pbnRZID0gcG9pbnQucGFnZVk7XHJcblxyXG4gICAgICAgIG5ld1ggPSB0aGlzLnggKyBkZWx0YVg7XHJcbiAgICAgICAgbmV3WSA9IHRoaXMueSArIGRlbHRhWTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9zKG5ld1gsIG5ld1kpO1xyXG5cclxuLy8gSU5TRVJUIFBPSU5UOiBpbmRpY2F0b3IuX21vdmVcclxuXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9lbmQ6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5pbml0aWF0ZWQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdGlhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3VjaG1vdmUnLCB0aGlzKTtcclxuICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7XHJcbiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5zY3JvbGxlci5vcHRpb25zLnNuYXAgKSB7XHJcbiAgICAgICAgICAgIHZhciBzbmFwID0gdGhpcy5zY3JvbGxlci5fbmVhcmVzdFNuYXAodGhpcy5zY3JvbGxlci54LCB0aGlzLnNjcm9sbGVyLnkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRpbWUgPSB0aGlzLm9wdGlvbnMuc25hcFNwZWVkIHx8IE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyh0aGlzLnNjcm9sbGVyLnggLSBzbmFwLngpLCAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5hYnModGhpcy5zY3JvbGxlci55IC0gc25hcC55KSwgMTAwMClcclxuICAgICAgICAgICAgICAgICAgICApLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLnNjcm9sbGVyLnggIT0gc25hcC54IHx8IHRoaXMuc2Nyb2xsZXIueSAhPSBzbmFwLnkgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGVyLmRpcmVjdGlvblggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlci5kaXJlY3Rpb25ZID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsZXIuY3VycmVudFBhZ2UgPSBzbmFwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlci5zY3JvbGxUbyhzbmFwLngsIHNuYXAueSwgdGltZSwgdGhpcy5zY3JvbGxlci5vcHRpb25zLmJvdW5jZUVhc2luZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5tb3ZlZCApIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxlci5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHRyYW5zaXRpb25UaW1lOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHRpbWUgPSB0aW1lIHx8IDA7XHJcbiAgICAgICAgdmFyIGR1cmF0aW9uUHJvcCA9IHV0aWxzLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgICAgICBpZighZHVyYXRpb25Qcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGVbZHVyYXRpb25Qcm9wXSA9IHRpbWUgKyAnbXMnO1xyXG5cclxuICAgICAgICBpZiAoICF0aW1lICYmIHV0aWxzLmlzQmFkQW5kcm9pZCApIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZVtkdXJhdGlvblByb3BdID0gJzAuMDAwMW1zJztcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIDAuMDAwMW1zXHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgckFGKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5pbmRpY2F0b3JTdHlsZVtkdXJhdGlvblByb3BdID09PSAnMC4wMDAxbXMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRpY2F0b3JTdHlsZVtkdXJhdGlvblByb3BdID0gJzBzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGZ1bmN0aW9uIChlYXNpbmcpIHtcclxuICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbl0gPSBlYXNpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25UaW1lKCk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggJiYgIXRoaXMub3B0aW9ucy5saXN0ZW5ZICkge1xyXG4gICAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmRpc3BsYXkgPSB0aGlzLnNjcm9sbGVyLmhhc0hvcml6b250YWxTY3JvbGwgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy5saXN0ZW5ZICYmICF0aGlzLm9wdGlvbnMubGlzdGVuWCApIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3JvbGxlci5oYXNWZXJ0aWNhbFNjcm9sbCA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9udGFsU2Nyb2xsIHx8IHRoaXMuc2Nyb2xsZXIuaGFzVmVydGljYWxTY3JvbGwgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnNjcm9sbGVyLmhhc0hvcml6b250YWxTY3JvbGwgJiYgdGhpcy5zY3JvbGxlci5oYXNWZXJ0aWNhbFNjcm9sbCApIHtcclxuICAgICAgICAgICAgdXRpbHMuYWRkQ2xhc3ModGhpcy53cmFwcGVyLCAnaVNjcm9sbEJvdGhTY3JvbGxiYXJzJyk7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxMb25lU2Nyb2xsYmFyJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycyAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tU3R5bGUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5saXN0ZW5YICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5yaWdodCA9ICc4cHgnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUuYm90dG9tID0gJzhweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVDbGFzcyh0aGlzLndyYXBwZXIsICdpU2Nyb2xsQm90aFNjcm9sbGJhcnMnKTtcclxuICAgICAgICAgICAgdXRpbHMuYWRkQ2xhc3ModGhpcy53cmFwcGVyLCAnaVNjcm9sbExvbmVTY3JvbGxiYXInKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmRlZmF1bHRTY3JvbGxiYXJzICYmIHRoaXMub3B0aW9ucy5jdXN0b21TdHlsZSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJzJweCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5ib3R0b20gPSAnMnB4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHIgPSB0aGlzLndyYXBwZXIub2Zmc2V0SGVpZ2h0OyAgLy8gZm9yY2UgcmVmcmVzaFxyXG5cclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5saXN0ZW5YICkge1xyXG4gICAgICAgICAgICB0aGlzLndyYXBwZXJXaWR0aCA9IHRoaXMud3JhcHBlci5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMucmVzaXplICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JXaWR0aCA9IE1hdGgubWF4KE1hdGgucm91bmQodGhpcy53cmFwcGVyV2lkdGggKiB0aGlzLndyYXBwZXJXaWR0aCAvICh0aGlzLnNjcm9sbGVyLnNjcm9sbGVyV2lkdGggfHwgdGhpcy53cmFwcGVyV2lkdGggfHwgMSkpLCA4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLmluZGljYXRvcldpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yV2lkdGggPSB0aGlzLmluZGljYXRvci5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXhQb3NYID0gdGhpcy53cmFwcGVyV2lkdGggLSB0aGlzLmluZGljYXRvcldpZHRoO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdjbGlwJyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWluQm91bmRhcnlYID0gLXRoaXMuaW5kaWNhdG9yV2lkdGggKyA4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVggPSB0aGlzLndyYXBwZXJXaWR0aCAtIDg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1pbkJvdW5kYXJ5WCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WCA9IHRoaXMubWF4UG9zWDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zaXplUmF0aW9YID0gdGhpcy5vcHRpb25zLnNwZWVkUmF0aW9YIHx8ICh0aGlzLnNjcm9sbGVyLm1heFNjcm9sbFggJiYgKHRoaXMubWF4UG9zWCAvIHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWSApIHtcclxuICAgICAgICAgICAgdGhpcy53cmFwcGVySGVpZ2h0ID0gdGhpcy53cmFwcGVyLmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMucmVzaXplICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIZWlnaHQgPSBNYXRoLm1heChNYXRoLnJvdW5kKHRoaXMud3JhcHBlckhlaWdodCAqIHRoaXMud3JhcHBlckhlaWdodCAvICh0aGlzLnNjcm9sbGVyLnNjcm9sbGVySGVpZ2h0IHx8IHRoaXMud3JhcHBlckhlaWdodCB8fCAxKSksIDgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmluZGljYXRvckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvckhlaWdodCA9IHRoaXMuaW5kaWNhdG9yLmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXhQb3NZID0gdGhpcy53cmFwcGVySGVpZ2h0IC0gdGhpcy5pbmRpY2F0b3JIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ2NsaXAnICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taW5Cb3VuZGFyeVkgPSAtdGhpcy5pbmRpY2F0b3JIZWlnaHQgKyA4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVkgPSB0aGlzLndyYXBwZXJIZWlnaHQgLSA4O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taW5Cb3VuZGFyeVkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVkgPSB0aGlzLm1heFBvc1k7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubWF4UG9zWSA9IHRoaXMud3JhcHBlckhlaWdodCAtIHRoaXMuaW5kaWNhdG9ySGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnNpemVSYXRpb1kgPSB0aGlzLm9wdGlvbnMuc3BlZWRSYXRpb1kgfHwgKHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWSAmJiAodGhpcy5tYXhQb3NZIC8gdGhpcy5zY3JvbGxlci5tYXhTY3JvbGxZKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHggPSB0aGlzLm9wdGlvbnMubGlzdGVuWCAmJiBNYXRoLnJvdW5kKHRoaXMuc2l6ZVJhdGlvWCAqIHRoaXMuc2Nyb2xsZXIueCkgfHwgMCxcclxuICAgICAgICAgICAgeSA9IHRoaXMub3B0aW9ucy5saXN0ZW5ZICYmIE1hdGgucm91bmQodGhpcy5zaXplUmF0aW9ZICogdGhpcy5zY3JvbGxlci55KSB8fCAwO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLm9wdGlvbnMuaWdub3JlQm91bmRhcmllcyApIHtcclxuICAgICAgICAgICAgaWYgKCB4IDwgdGhpcy5taW5Cb3VuZGFyeVggKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JXaWR0aCArIHgsIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm1pbkJvdW5kYXJ5WDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggeCA+IHRoaXMubWF4Qm91bmRhcnlYICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdzY2FsZScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgubWF4KHRoaXMuaW5kaWNhdG9yV2lkdGggLSAoeCAtIHRoaXMubWF4UG9zWCksIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB4ID0gdGhpcy5tYXhQb3NYICsgdGhpcy5pbmRpY2F0b3JXaWR0aCAtIHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSB0aGlzLm1heEJvdW5kYXJ5WDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICYmIHRoaXMud2lkdGggIT0gdGhpcy5pbmRpY2F0b3JXaWR0aCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmluZGljYXRvcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHkgPCB0aGlzLm1pbkJvdW5kYXJ5WSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JIZWlnaHQgKyB5ICogMywgOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5taW5Cb3VuZGFyeVk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHkgPiB0aGlzLm1heEJvdW5kYXJ5WSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JIZWlnaHQgLSAoeSAtIHRoaXMubWF4UG9zWSkgKiAzLCA4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB5ID0gdGhpcy5tYXhQb3NZICsgdGhpcy5pbmRpY2F0b3JIZWlnaHQgLSB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMubWF4Qm91bmRhcnlZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdzY2FsZScgJiYgdGhpcy5oZWlnaHQgIT0gdGhpcy5pbmRpY2F0b3JIZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnNjcm9sbGVyLm9wdGlvbnMudXNlVHJhbnNmb3JtICkge1xyXG4gICAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCcgKyB5ICsgJ3B4KScgKyB0aGlzLnNjcm9sbGVyLnRyYW5zbGF0ZVo7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5sZWZ0ID0geCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUudG9wID0geSArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfcG9zOiBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICggeCA8IDAgKSB7XHJcbiAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHggPiB0aGlzLm1heFBvc1ggKSB7XHJcbiAgICAgICAgICAgIHggPSB0aGlzLm1heFBvc1g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHkgPCAwICkge1xyXG4gICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKCB5ID4gdGhpcy5tYXhQb3NZICkge1xyXG4gICAgICAgICAgICB5ID0gdGhpcy5tYXhQb3NZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeCA9IHRoaXMub3B0aW9ucy5saXN0ZW5YID8gTWF0aC5yb3VuZCh4IC8gdGhpcy5zaXplUmF0aW9YKSA6IHRoaXMuc2Nyb2xsZXIueDtcclxuICAgICAgICB5ID0gdGhpcy5vcHRpb25zLmxpc3RlblkgPyBNYXRoLnJvdW5kKHkgLyB0aGlzLnNpemVSYXRpb1kpIDogdGhpcy5zY3JvbGxlci55O1xyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbGVyLnNjcm9sbFRvKHgsIHkpO1xyXG4gICAgfSxcclxuXHJcbiAgICBmYWRlOiBmdW5jdGlvbiAodmFsLCBob2xkKSB7XHJcbiAgICAgICAgaWYgKCBob2xkICYmICF0aGlzLnZpc2libGUgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZhZGVUaW1lb3V0KTtcclxuICAgICAgICB0aGlzLmZhZGVUaW1lb3V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIHRpbWUgPSB2YWwgPyAyNTAgOiA1MDAsXHJcbiAgICAgICAgICAgIGRlbGF5ID0gdmFsID8gMCA6IDMwMDtcclxuXHJcbiAgICAgICAgdmFsID0gdmFsID8gJzEnIDogJzAnO1xyXG5cclxuICAgICAgICB0aGlzLndyYXBwZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb25dID0gdGltZSArICdtcyc7XHJcblxyXG4gICAgICAgIHRoaXMuZmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KChmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlclN0eWxlLm9wYWNpdHkgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICt2YWw7XHJcbiAgICAgICAgfSkuYmluZCh0aGlzLCB2YWwpLCBkZWxheSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5JU2Nyb2xsLnV0aWxzID0gdXRpbHM7XHJcblxyXG5pZiAoIHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IElTY3JvbGw7XHJcbn0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xyXG4gICAgICAgIGRlZmluZSggZnVuY3Rpb24gKCkgeyByZXR1cm4gSVNjcm9sbDsgfSApO1xyXG59IGVsc2Uge1xyXG4gICAgd2luZG93LklTY3JvbGwgPSBJU2Nyb2xsO1xyXG59XHJcblxyXG59KSh3aW5kb3csIGRvY3VtZW50LCBNYXRoKTtcclxuXHJcblxyXG4vKiFcclxuKiBTY3JvbGxvdmVyZmxvdyAyLjAuMCBtb2R1bGUgZm9yIGZ1bGxQYWdlLmpzID49IDNcclxuKiBodHRwczovL2dpdGh1Yi5jb20vYWx2YXJvdHJpZ28vZnVsbFBhZ2UuanNcclxuKiBAbGljZW5zZSBNSVQgbGljZW5zZWRcclxuKlxyXG4qIENvcHlyaWdodCAoQykgMjAxNSBhbHZhcm90cmlnby5jb20gLSBBIHByb2plY3QgYnkgQWx2YXJvIFRyaWdvXHJcbiovXHJcbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xyXG4gICAgd2luZG93LmZwX3Njcm9sbG92ZXJmbG93ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvLyBrZWVwaW5nIGNlbnRyYWwgc2V0IG9mIGNsYXNzbmFtZXMgYW5kIHNlbGVjdG9yc1xyXG4gICAgICAgIHZhciBTQ1JPTExBQkxFID0gICAgICAgICAgICAnZnAtc2Nyb2xsYWJsZSc7XHJcbiAgICAgICAgdmFyIFNDUk9MTEFCTEVfU0VMID0gICAgICAgICcuJyArIFNDUk9MTEFCTEU7XHJcblxyXG4gICAgICAgIHZhciBBQ1RJVkUgPSAgICAgICAgICAgICAgICAnYWN0aXZlJztcclxuICAgICAgICB2YXIgQUNUSVZFX1NFTCA9ICAgICAgICAgICAgJy4nICsgQUNUSVZFO1xyXG5cclxuICAgICAgICB2YXIgU0VDVElPTiA9ICAgICAgICAgICAgICAgJ2ZwLXNlY3Rpb24nO1xyXG4gICAgICAgIHZhciBTRUNUSU9OX1NFTCA9ICAgICAgICAgICAnLicgKyBTRUNUSU9OO1xyXG4gICAgICAgIHZhciBTRUNUSU9OX0FDVElWRV9TRUwgPSAgICBTRUNUSU9OX1NFTCArIEFDVElWRV9TRUw7XHJcblxyXG4gICAgICAgIHZhciBTTElERSA9ICAgICAgICAgICAgICAgICAnZnAtc2xpZGUnO1xyXG4gICAgICAgIHZhciBTTElERV9TRUwgPSAgICAgICAgICAgICAnLicgKyBTTElERTtcclxuICAgICAgICB2YXIgU0xJREVfQUNUSVZFX1NFTCA9ICAgICAgU0xJREVfU0VMICsgQUNUSVZFX1NFTDtcclxuXHJcbiAgICAgICAgdmFyIFNMSURFU19XUkFQUEVSID0gICAgICAgICdmcC1zbGlkZXMnO1xyXG4gICAgICAgIHZhciBTTElERVNfV1JBUFBFUl9TRUwgPSAgICAnLicgKyBTTElERVNfV1JBUFBFUjtcclxuXHJcbiAgICAgICAgdmFyIFRBQkxFX0NFTEwgPSAgICAgICAgICAgICdmcC10YWJsZUNlbGwnO1xyXG4gICAgICAgIHZhciBUQUJMRV9DRUxMX1NFTCA9ICAgICAgICAnLicgKyBUQUJMRV9DRUxMO1xyXG5cclxuICAgICAgICB2YXIgUkVTUE9OU0lWRSA9ICAgICAgICAgICAgJ2ZwLXJlc3BvbnNpdmUnO1xyXG4gICAgICAgIHZhciBBVVRPX0hFSUdIVF9SRVNQT05TSVZFPSAnZnAtYXV0by1oZWlnaHQtcmVzcG9uc2l2ZSc7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBUdXJucyBpU2Nyb2xsIGBtb3VzZXdoZWVsYCBvcHRpb24gb2ZmIGR5bmFtaWNhbGx5XHJcbiAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY3ViaXEvaXNjcm9sbC9pc3N1ZXMvMTAzNlxyXG4gICAgICAgICovXHJcbiAgICAgICAgSVNjcm9sbC5wcm90b3R5cGUud2hlZWxPbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHRoaXMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBUdXJucyBpU2Nyb2xsIGBtb3VzZXdoZWVsYCBvcHRpb24gb24gZHluYW1pY2FsbHlcclxuICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWJpcS9pc2Nyb2xsL2lzc3Vlcy8xMDM2XHJcbiAgICAgICAgKi9cclxuICAgICAgICBJU2Nyb2xsLnByb3RvdHlwZS53aGVlbE9mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHRoaXMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogUmV0dXJucyBhbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgcGFkZGluZyBkaW1lbnNpb25zIGluIHB4LlxyXG4gICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGFkZGluZ3MoZWxlbWVudCl7XHJcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gZnBfdXRpbHMuY2xvc2VzdChlbGVtZW50LCBTRUNUSU9OX1NFTCk7XHJcbiAgICAgICAgICAgIGlmKHNlY3Rpb24gIT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShzZWN0aW9uKVsncGFkZGluZy1ib3R0b20nXSkgKyBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHNlY3Rpb24pWydwYWRkaW5nLXRvcCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbEJhckhhbmRsZXIoKXtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24ob3B0aW9ucywgaXNjcm9sbE9wdGlvbnMpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIHNlbGYuaXNjcm9sbE9wdGlvbnMgPSBpc2Nyb2xsT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKXtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3JvbGxCYXJGb3JBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICBmdWxscGFnZV9hcGkuc2hhcmVkLmFmdGVyUmVuZGVyQWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9hZnRlciBET00gYW5kIGltYWdlcyBhcmUgbG9hZGVkXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2Nyb2xsQmFyRm9yQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVsbHBhZ2VfYXBpLnNoYXJlZC5hZnRlclJlbmRlckFjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogQ3JlYXRlcyB0aGUgc2Nyb2xsYmFyIGZvciB0aGUgc2VjdGlvbnMgYW5kIHNsaWRlcyBpbiB0aGUgc2l0ZVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTY3JvbGxCYXJGb3JBbGwoKXtcclxuICAgICAgICAgICAgICAgIGlmKGZwX3V0aWxzLmhhc0NsYXNzKGRvY3VtZW50LmJvZHksIFJFU1BPTlNJVkUpKXtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXNwb25zaXZlU2Nyb2xsT3ZlcmZsb3dzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGZvckVhY2hTZWN0aW9uQW5kU2xpZGUoY3JlYXRlU2Nyb2xsQmFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBlbGVtZW50IG5lZWRzIHNjcm9sbGJhciBhbmQgaWYgdGhlIHVzZXIgd2FudHMgdG8gYXBwbHkgaXQuXHJcbiAgICAgICAgICAgICogSWYgc28gaXQgY3JlYXRlcyBpdC5cclxuICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50ICAgalF1ZXJ5IG9iamVjdCBvZiB0aGUgc2VjdGlvbiBvciBzbGlkZVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTY3JvbGxCYXIoZWxlbWVudCl7XHJcbiAgICAgICAgICAgICAgICAvL1VzZXIgZG9lc24ndCB3YW50IHNjcm9sbGJhciBoZXJlPyBTYXlvbmFyYSBiYWJ5IVxyXG4gICAgICAgICAgICAgICAgaWYoZnBfdXRpbHMuaGFzQ2xhc3MoZWxlbWVudCwgJ2ZwLW5vc2Nyb2xsJykpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAvL25lY2Vzc2FyeSB0byBtYWtlIGBzY3JvbGxIZWlnaHRgIHdvcmsgdW5kZXIgT3BlcmEgMTJcclxuICAgICAgICAgICAgICAgIGZwX3V0aWxzLmNzcyhlbGVtZW50LCB7J292ZXJmbG93JzogJ2hpZGRlbid9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyID0gc2VsZi5vcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlcjtcclxuICAgICAgICAgICAgICAgIHZhciB3cmFwID0gc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyLndyYXBDb250ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbiA9IGZwX3V0aWxzLmNsb3Nlc3QoZWxlbWVudCwgU0VDVElPTl9TRUwpOyAvL2luIGNhc2UgZWxlbWVudCBpcyBhIHNsaWRlXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9IHNjcm9sbE92ZXJmbG93SGFuZGxlci5zY3JvbGxhYmxlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZ3MgPSBnZXRQYWRkaW5ncyhzZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2lmIHRoZXJlIHdhcyBzY3JvbGwsIHRoZSBjb250ZW50SGVpZ2h0IHdpbGwgYmUgdGhlIG9uZSBpbiB0aGUgc2Nyb2xsYWJsZSBzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZihzY3JvbGxhYmxlICE9IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSBzY3JvbGxPdmVyZmxvd0hhbmRsZXIuc2Nyb2xsSGVpZ2h0KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50SGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQgLSBwYWRkaW5ncztcclxuICAgICAgICAgICAgICAgICAgICBpZihzZWxmLm9wdGlvbnMudmVydGljYWxDZW50ZXJlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSAkKFRBQkxFX0NFTExfU0VMLCBlbGVtZW50KVswXS5zY3JvbGxIZWlnaHQgLSBwYWRkaW5ncztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IGZwX3V0aWxzLmdldFdpbmRvd0hlaWdodCgpIC0gcGFkZGluZ3M7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9uZWVkcyBzY3JvbGw/XHJcbiAgICAgICAgICAgICAgICBpZiAoIGNvbnRlbnRIZWlnaHQgPiBzY3JvbGxIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2RpZCB3ZSBhbHJlYWR5IGhhdmUgYW4gc2Nyb2xsYmFyID8gVXBkYXRpbmcgaXRcclxuICAgICAgICAgICAgICAgICAgICBpZihzY3JvbGxhYmxlICE9IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxPdmVyZmxvd0hhbmRsZXIudXBkYXRlKGVsZW1lbnQsIHNjcm9sbEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAvL2NyZWF0aW5nIHRoZSBzY3JvbGxpbmdcclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLm9wdGlvbnMudmVydGljYWxDZW50ZXJlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcF91dGlscy53cmFwSW5uZXIoJChUQUJMRV9DRUxMX1NFTCwgZWxlbWVudClbMF0sIHdyYXAuc2Nyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnBfdXRpbHMud3JhcElubmVyKCQoVEFCTEVfQ0VMTF9TRUwsIGVsZW1lbnQpWzBdLCB3cmFwLnNjcm9sbGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZwX3V0aWxzLndyYXBJbm5lcihlbGVtZW50LCB3cmFwLnNjcm9sbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZwX3V0aWxzLndyYXBJbm5lcihlbGVtZW50LCB3cmFwLnNjcm9sbGFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbE92ZXJmbG93SGFuZGxlci5jcmVhdGUoZWxlbWVudCwgc2Nyb2xsSGVpZ2h0LCBzZWxmLmlzY3JvbGxPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9yZW1vdmluZyB0aGUgc2Nyb2xsaW5nIHdoZW4gaXQgaXMgbm90IG5lY2Vzc2FyeSBhbnltb3JlXHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbE92ZXJmbG93SGFuZGxlci5yZW1vdmUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy91bmRvXHJcbiAgICAgICAgICAgICAgICBmcF91dGlscy5jc3MoZWxlbWVudCwgeydvdmVyZmxvdyc6ICcnfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIEFwcGxpZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBlYWNoIHNlY3Rpb24gaW4gdGhlIHNpdGVcclxuICAgICAgICAgICAgKiBvciB0aGUgc2xpZGVzIHdpdGhpbiB0aGVtXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvckVhY2hTZWN0aW9uQW5kU2xpZGUoY2FsbGJhY2spe1xyXG4gICAgICAgICAgICAgICAgJChTRUNUSU9OX1NFTCkuZm9yRWFjaChmdW5jdGlvbihzZWN0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGVzID0gJChTTElERV9TRUwsIHNlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihzbGlkZXMubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oc2xpZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIFJlbW92ZXMgc2Nyb2xsT3ZlcmZsb3cgZm9yIHNlY3Rpb25zIHVzaW5nIHRoZSBjbGFzcyBgZnAtYXV0by1oZWlnaHQtcmVzcG9uc2l2ZWBcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUmVzcG9uc2l2ZVNjcm9sbE92ZXJmbG93cygpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbE92ZXJmbG93SGFuZGxlciA9IHNlbGYub3B0aW9ucy5zY3JvbGxPdmVyZmxvd0hhbmRsZXI7XHJcbiAgICAgICAgICAgICAgICBmb3JFYWNoU2VjdGlvbkFuZFNsaWRlKGZ1bmN0aW9uKGVsZW1lbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZwX3V0aWxzLmhhc0NsYXNzKCBmcF91dGlscy5jbG9zZXN0KGVsZW1lbnQsIFNFQ1RJT05fU0VMKSwgQVVUT19IRUlHSFRfUkVTUE9OU0lWRSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxPdmVyZmxvd0hhbmRsZXIucmVtb3ZlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3B1YmxpYyBmdW5jdGlvbnNcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTY3JvbGxCYXJGb3JBbGwgPSBjcmVhdGVTY3JvbGxCYXJGb3JBbGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBvYmplY3QgdG8gaGFuZGxlIG92ZXJmbG93IHNjcm9sbGluZy5cclxuICAgICAgICAgKiBUaGlzIHVzZXMganF1ZXJ5LnNsaW1TY3JvbGwgdG8gYWNjb21wbGlzaCBvdmVyZmxvdyBzY3JvbGxpbmcuXHJcbiAgICAgICAgICogSXQgaXMgcG9zc2libGUgdG8gcGFzcyBpbiBhbiBhbHRlcm5hdGUgc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyXHJcbiAgICAgICAgICogdG8gdGhlIGZ1bGxwYWdlLmpzIG9wdGlvbiB0aGF0IGltcGxlbWVudHMgdGhlIHNhbWUgZnVuY3Rpb25zXHJcbiAgICAgICAgICogYXMgdGhpcyBoYW5kbGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgJCA9IG51bGw7XHJcbiAgICAgICAgdmFyIGlzY3JvbGxIYW5kbGVyID0ge1xyXG4gICAgICAgICAgICByZWZyZXNoSWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGlTY3JvbGxJbnN0YW5jZXM6IFtdLFxyXG5cclxuICAgICAgICAgICAgLy8gRGVmYXVsdCBvcHRpb25zIGZvciBpU2Nyb2xsLmpzIHVzZWQgd2hlbiB1c2luZyBzY3JvbGxPdmVyZmxvd1xyXG4gICAgICAgICAgICBpc2Nyb2xsT3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlV2hlZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoaWRlU2Nyb2xsYmFyczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmYWRlU2Nyb2xsYmFyczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlTW91c2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZVNjcm9sbGJhcnM6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG4gICAgICAgICAgICAgICAgJCA9IGZwX3V0aWxzLiQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGlzVG91Y2ggPSAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMCkgfHwgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cykpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vZml4aW5nIGJ1ZyBpbiBpU2Nyb2xsIHdpdGggbGlua3M6IGh0dHBzOi8vZ2l0aHViLmNvbS9jdWJpcS9pc2Nyb2xsL2lzc3Vlcy83ODNcclxuICAgICAgICAgICAgICAgIGlzY3JvbGxIYW5kbGVyLmlzY3JvbGxPcHRpb25zLmNsaWNrID0gaXNUb3VjaDsgLy8gc2VlICMyMDM1XHJcblxyXG4gICAgICAgICAgICAgICAgLy9leHRlbmRpbmcgaVNjcm9sbCBvcHRpb25zIHdpdGggdGhlIHVzZXIgY3VzdG9tIG9uZXNcclxuICAgICAgICAgICAgICAgIGlzY3JvbGxIYW5kbGVyLmlzY3JvbGxPcHRpb25zID0gZnBfdXRpbHMuZGVlcEV4dGVuZChpc2Nyb2xsSGFuZGxlci5pc2Nyb2xsT3B0aW9ucywgb3B0aW9ucy5zY3JvbGxPdmVyZmxvd09wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgc2Nyb2xsQmFySGFuZGxlcigpLmluaXQob3B0aW9ucywgaXNjcm9sbEhhbmRsZXIuaXNjcm9sbE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gRW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgbW91c2Ugd2hlZWwgZm9yIHRoZSBhY3RpdmUgc2VjdGlvbiBvciBhbGwgc2xpZGVzIGluIGl0XHJcbiAgICAgICAgICAgIHRvZ2dsZVdoZWVsOiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9ICQoU0NST0xMQUJMRV9TRUwsICQoU0VDVElPTl9BQ1RJVkVfU0VMKVswXSk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlTY3JvbGxJbnN0YW5jZSA9IGl0ZW0uZnBfaXNjcm9sbEluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlTY3JvbGxJbnN0YW5jZSAhPSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaVNjcm9sbEluc3RhbmNlLndoZWVsT24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaVNjcm9sbEluc3RhbmNlLndoZWVsT2ZmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAqIFR1cm5zIG9mZiBpU2Nyb2xsIGZvciB0aGUgZGVzdGluYXRpb24gc2VjdGlvbi5cclxuICAgICAgICAgICAgKiBXaGVuIHNjcm9sbGluZyB2ZXJ5IGZhc3Qgb24gc29tZSB0cmFja3BhZHMgKGFuZCBBcHBsZSBsYXB0b3BzKSB0aGUgaW5lcnRpYWwgc2Nyb2xsaW5nIHdvdWxkXHJcbiAgICAgICAgICAgICogc2Nyb2xsIHRoZSBkZXN0aW5hdGlvbiBzZWN0aW9uL3NsaWRlIGJlZm9yZSB0aGUgc2VjdGlvbnMgYW5pbWF0aW9ucyBlbmRzLlxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvbkxlYXZlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaXNjcm9sbEhhbmRsZXIudG9nZ2xlV2hlZWwoZmFsc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gVHVybnMgb2ZmIGlTY3JvbGwgZm9yIHRoZSBsZWF2aW5nIHNlY3Rpb25cclxuICAgICAgICAgICAgYmVmb3JlTGVhdmU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpc2Nyb2xsSGFuZGxlci5vbkxlYXZlKClcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIFR1cm5zIG9uIGlTY3JvbGwgb24gc2VjdGlvbiBsb2FkXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlzY3JvbGxIYW5kbGVyLnRvZ2dsZVdoZWVsKHRydWUpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENhbGxlZCB3aGVuIG92ZXJmbG93IHNjcm9sbGluZyBpcyBuZWVkZWQgZm9yIGEgc2VjdGlvbi5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBlbGVtZW50ICAgICAgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIGN1cnJlbnQgc2VjdGlvblxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHNjcm9sbEhlaWdodCBDdXJyZW50IHdpbmRvdyBoZWlnaHQgaW4gcGl4ZWxzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHNjcm9sbEhlaWdodCwgaXNjcm9sbE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxhYmxlID0gJChTQ1JPTExBQkxFX1NFTCwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYWJsZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmcF91dGlscy5jc3MoaXRlbSwgeydoZWlnaHQnOiBzY3JvbGxIZWlnaHQgKyAncHgnfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpU2Nyb2xsSW5zdGFuY2UgPSBpdGVtLmZwX2lzY3JvbGxJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaVNjcm9sbEluc3RhbmNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNjcm9sbEhhbmRsZXIuaVNjcm9sbEluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGluc3RhbmNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpU2Nyb2xsSW5zdGFuY2UgPSBuZXcgSVNjcm9sbChpdGVtLCBpc2Nyb2xsT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNjcm9sbEhhbmRsZXIuaVNjcm9sbEluc3RhbmNlcy5wdXNoKGlTY3JvbGxJbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFmcF91dGlscy5oYXNDbGFzcyhmcF91dGlscy5jbG9zZXN0KGVsZW1lbnQsIFNFQ1RJT05fU0VMKSwgQUNUSVZFKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vb2ZmIGJ5IGRlZmF1bHQgdW50aWwgdGhlIHNlY3Rpb24gZ2V0cyBhY3RpdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaVNjcm9sbEluc3RhbmNlLndoZWVsT2ZmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmZwX2lzY3JvbGxJbnN0YW5jZSA9IGlTY3JvbGxJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJldHVybiBhIGJvb2xlYW4gZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHNjcm9sbGFibGUgZWxlbWVudCBpcyBhXHJcbiAgICAgICAgICAgICAqIHRoZSBlbmQgb3IgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzY3JvbGxpbmcgZGVwZW5kaW5nIG9uIHRoZSBnaXZlbiB0eXBlLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB0eXBlICAgICAgIEVpdGhlciAndG9wJyBvciAnYm90dG9tJ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICBzY3JvbGxhYmxlIGpRdWVyeSBvYmplY3QgZm9yIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnRcclxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlzU2Nyb2xsZWQ6IGZ1bmN0aW9uKHR5cGUsIHNjcm9sbGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlciA9IHNjcm9sbGFibGUuZnBfaXNjcm9sbEluc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vbm8gc2Nyb2xsZXI/XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd0b3AnKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsZXIueSA+PSAwICYmICFmcF91dGlscy5nZXRTY3JvbGxUb3Aoc2Nyb2xsYWJsZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwIC0gc2Nyb2xsZXIueSkgKyBmcF91dGlscy5nZXRTY3JvbGxUb3Aoc2Nyb2xsYWJsZSkgKyAxICsgc2Nyb2xsYWJsZS5vZmZzZXRIZWlnaHQgPj0gc2Nyb2xsYWJsZS5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmV0dXJucyB0aGUgc2Nyb2xsYWJsZSBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gc2VjdGlvbi5cclxuICAgICAgICAgICAgICogSWYgdGhlcmUgYXJlIGxhbmRzY2FwZSBzbGlkZXMsIHdpbGwgb25seSByZXR1cm4gYSBzY3JvbGxhYmxlIGVsZW1lbnRcclxuICAgICAgICAgICAgICogaWYgaXQgaXMgaW4gdGhlIGFjdGl2ZSBzbGlkZS5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSAgYWN0aXZlU2VjdGlvbiBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgY3VycmVudCBzZWN0aW9uXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzY3JvbGxhYmxlOiBmdW5jdGlvbihhY3RpdmVTZWN0aW9uKXtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBsYW5kc2NhcGUgc2xpZGVzLCB3ZSBjaGVjayBpZiB0aGUgc2Nyb2xsaW5nIGJhciBpcyBpbiB0aGUgY3VycmVudCBvbmUgb3Igbm90XHJcbiAgICAgICAgICAgICAgICBpZiAoJChTTElERVNfV1JBUFBFUl9TRUwsIGFjdGl2ZVNlY3Rpb24pLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKFNDUk9MTEFCTEVfU0VMLCAkKFNMSURFX0FDVElWRV9TRUwsIGFjdGl2ZVNlY3Rpb24pWzBdIClbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJChTQ1JPTExBQkxFX1NFTCwgYWN0aXZlU2VjdGlvbilbMF07XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmV0dXJucyB0aGUgc2Nyb2xsIGhlaWdodCBvZiB0aGUgd3JhcHBlZCBjb250ZW50LlxyXG4gICAgICAgICAgICAgKiBJZiB0aGlzIGlzIGxhcmdlciB0aGFuIHRoZSB3aW5kb3cgaGVpZ2h0IG1pbnVzIHNlY3Rpb24gcGFkZGluZyxcclxuICAgICAgICAgICAgICogb3ZlcmZsb3cgc2Nyb2xsaW5nIGlzIG5lZWRlZC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBlbGVtZW50IGpRdWVyeSBvYmplY3QgY29udGFpbmluZyBjdXJyZW50IHNlY3Rpb25cclxuICAgICAgICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0OiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCgnLmZwLXNjcm9sbGVyJywgJChTQ1JPTExBQkxFX1NFTCwgZWxlbWVudClbMF0gKVswXS5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ2FsbGVkIHdoZW4gb3ZlcmZsb3cgc2Nyb2xsaW5nIGlzIG5vIGxvbmdlciBuZWVkZWQgZm9yIGEgc2VjdGlvbi5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBlbGVtZW50ICAgICAgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIGN1cnJlbnQgc2VjdGlvblxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50ID09IG51bGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9ICQoU0NST0xMQUJMRV9TRUwsIGVsZW1lbnQpWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbGFibGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpU2Nyb2xsSW5zdGFuY2UgPSBzY3JvbGxhYmxlLmZwX2lzY3JvbGxJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpU2Nyb2xsSW5zdGFuY2UgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlTY3JvbGxJbnN0YW5jZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxhYmxlLmZwX2lzY3JvbGxJbnN0YW5jZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vdW53cmFwcGluZy4uLlxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mcC1zY3JvbGxlcicsIGVsZW1lbnQpWzBdLm91dGVySFRNTCA9ICQoJy5mcC1zY3JvbGxlcicsIGVsZW1lbnQpWzBdLmlubmVySFRNTDtcclxuICAgICAgICAgICAgICAgICAgICAkKFNDUk9MTEFCTEVfU0VMLCBlbGVtZW50KVswXS5vdXRlckhUTUwgPSAkKFNDUk9MTEFCTEVfU0VMLCBlbGVtZW50KVswXS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ2FsbGVkIHdoZW4gb3ZlcmZsb3cgc2Nyb2xsaW5nIGhhcyBhbHJlYWR5IGJlZW4gc2V0dXAgYnV0IHRoZVxyXG4gICAgICAgICAgICAgKiB3aW5kb3cgaGVpZ2h0IGhhcyBwb3RlbnRpYWxseSBjaGFuZ2VkLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGVsZW1lbnQgICAgICBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgY3VycmVudCBzZWN0aW9uXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge051bWJlcn0gc2Nyb2xsSGVpZ2h0IEN1cnJlbnQgd2luZG93IGhlaWdodCBpbiBwaXhlbHNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgc2Nyb2xsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAvL3VzaW5nIGEgdGltZW91dCBpbiBvcmRlciB0byBleGVjdXRlIHRoZSByZWZyZXNoIGZ1bmN0aW9uIG9ubHkgb25jZSB3aGVuIGB1cGRhdGVgIGlzIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBpbiBhXHJcbiAgICAgICAgICAgICAgICAvL3Nob3J0IHBlcmlvZCBvZiB0aW1lLlxyXG4gICAgICAgICAgICAgICAgLy9pdCBhbHNvIGNvbWVzIG9uIGhhbmR5IGJlY2F1c2UgaVNjcm9sbCByZXF1aXJlcyB0aGUgdXNlIG9mIHRpbWVvdXQgd2hlbiB1c2luZyBgcmVmcmVzaGAuXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaXNjcm9sbEhhbmRsZXIucmVmcmVzaElkKTtcclxuICAgICAgICAgICAgICAgIGlzY3JvbGxIYW5kbGVyLnJlZnJlc2hJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpc2Nyb2xsSGFuZGxlci5pU2Nyb2xsSW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24oaW5zdGFuY2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5yZWZyZXNoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VnbHkgaGFjayB0aGF0IHdlIGFyZSBmb3JjZWQgdG8gdXNlIGR1ZSB0byB0aGUgdGltZW91dCBkZWxheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL290aGVyd2lzZSBkb25lIG9uIHRoZSBmdWxscGFnZS5qcyByZUJ1aWxkIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxwYWdlX2FwaS5zaWxlbnRNb3ZlVG8oZnBfdXRpbHMuaW5kZXgoJChTRUNUSU9OX0FDVElWRV9TRUwpWzBdKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0aW5nIHRoZSB3cmFwcGVycyBoZWlnaHRcclxuICAgICAgICAgICAgICAgIGZwX3V0aWxzLmNzcygkKFNDUk9MTEFCTEVfU0VMLCBlbGVtZW50KVswXSwgeydoZWlnaHQnOiBzY3JvbGxIZWlnaHQgKyAncHgnfSk7XHJcbiAgICAgICAgICAgICAgICBmcF91dGlscy5jc3MoJChTQ1JPTExBQkxFX1NFTCwgZWxlbWVudClbMF0ucGFyZW50Tm9kZSwgeydoZWlnaHQnOiBzY3JvbGxIZWlnaHQgKyBnZXRQYWRkaW5ncyhlbGVtZW50KSArICdweCd9KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDYWxsZWQgdG8gZ2V0IGFueSBhZGRpdGlvbmFsIGVsZW1lbnRzIG5lZWRlZCB0byB3cmFwIHRoZSBzZWN0aW9uXHJcbiAgICAgICAgICAgICAqIGNvbnRlbnQgaW4gb3JkZXIgdG8gZmFjaWxpdGF0ZSBvdmVyZmxvdyBzY3JvbGxpbmcuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge1N0cmluZ3xPYmplY3R9IENhbiBiZSBhIHN0cmluZyBjb250YWluaW5nIEhUTUwsXHJcbiAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgIGEgRE9NIGVsZW1lbnQsIG9yIGpRdWVyeSBvYmplY3QuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB3cmFwQ29udGVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYWJsZS5jbGFzc05hbWUgPSBTQ1JPTExBQkxFO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsZXIuY2xhc3NOYW1lID0gJ2ZwLXNjcm9sbGVyJztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbGFibGU6IHNjcm9sbGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsZXI6IHNjcm9sbGVyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNjcm9sbEhhbmRsZXI6IGlzY3JvbGxIYW5kbGVyXHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn0pKHdpbmRvdywgZG9jdW1lbnQpOyIsIiQoZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgLy/RhNC+0YDQvNCwINC00L7QsdCw0LLQu9C10L3QuNC1INGC0YPRgNCwIC0g0LLRi9Cx0L7RgCDQv9Cw0YHQv9C+0YDRgiDQutCw0LrQvtC5XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXBhc3N3b3JkLWFjYycscGFzc3dvcmRfYWNjKTtcclxuICAgIC8v0L3QvtCy0YvQuSDRgdGC0LDRgNGL0Lkg0L/QvtGB0YLQsNCy0YnQuNC6XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXR5cGUtc29mdC12aWV3Jyx2aWV3X3R5cGUpO1xyXG5cclxuICAgIC8v0L3QsNCx0L7RgCDRgtC10LrRgdGC0LAg0LIg0L/QvtC40YHQutC1XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5wcmljZV94dmdfLC5jb3VudF94dmdfLC5kZWxpdmVyeV94dmdfJyxpdG9ncHJpY2VfeHZnKTtcclxuXHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1kZWwtaXRlbXMtYmFza2V0LXZpZXcnLGRlbF9hY2NfbWF0ZXJpYWwpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWFkZC1hY2Mtc2F2ZScsc2F2ZV9hY2MpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWVkaXQtYWNjLW1vcmUnLGVkaXRfbW9yZV9hY2MpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1kZWxsLWFjYy1tb3JlJyxkZWxsX21vcmVfYWNjKTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnRhYnNfMDA2VScse2tleTogXCIwMDZVXCJ9LHRhYnNfYWNjKTtcclxuXHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1yZWplY3QtYWNjJyxSZWplY3RGb0EpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1mb3J3YXJkLWFjYycsRm9yd2FyZEZvQSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1zaWduLWExJyxTaW5nRm9BKTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXNpZ24tZW5kJyxTaW5nRm9FbmQpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtc2lnbi1wYXknLFNpbmdGb1BheSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlXCIsJy5qcy1pZC1rdG8tYWpheCcsa3RvX2Zucyk7XHJcblxyXG4gICAgJChcIi5kcm9wLXJhZGlvXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaXJhZGlvKTtcclxuXHJcbiAgICAvLyQoJyNhY2NfMycpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZWFjY18zKTtcclxuICAgIC8vJCgnI2FjY18yJykuYmluZCgnY2hhbmdlJywgY2hhbmdlYWNjXzIoMikpO1xyXG4gICAgLy8kKCcjYWNjXzQnKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VhY2NfMig0KSk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2VcIiwnI2FjY18zJyx7a2V5OiBcIjNcIn0sY2hhbmdlYWNjKTtcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZVwiLCcjYWNjXzInLHtrZXk6IFwiMlwifSxjaGFuZ2VhY2MpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlXCIsJyNhY2NfNycse2tleTogXCI3XCJ9LGNoYW5nZWFjYyk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2VcIiwnI2FjY184Jyx7a2V5OiBcIjhcIn0sY2hhbmdlYWNjKTtcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZVwiLCcjYWNjXzknLHtrZXk6IFwiOVwifSxjaGFuZ2VhY2MpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlXCIsJyNhY2NfNCcse2tleTogXCI0XCJ9LGNoYW5nZWFjYyk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VhY2MoZXZlbnQpIHtcclxuICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcblxyXG4gICAgJC5jb29raWUoXCJhY2NfXCIrZXZlbnQuZGF0YS5rZXkraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2V9KTtcclxuICAgIENvb2tpZUxpc3QoXCJhY2NfXCIrZXZlbnQuZGF0YS5rZXkraXUsJCh0aGlzKS52YWwoKSwnYWRkJyk7XHJcblxyXG4gICAgJCgnLmpzLXJlbG9hZC10b3AnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXInKTtcclxuICAgICQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblxyXG5cclxuICAgIGlmKGV2ZW50LmRhdGEua2V5PT03KVxyXG4gICAge1xyXG4gICAgICAgIC8v0LLRi9Cx0YDQsNC7INCz0L7RgNC+0LQg0LTRgNGD0LPQvtC5XHJcbiAgICAgICAgLy/QvtCx0L3QsNCy0LvRj9C10Lwg0YHQv9C40YHQutC4INC60LLQsNGA0YLQsNC7LNC+0LHRitC10LrRglxyXG4gICAgICAgIHZhciBkYXRhID0gJ3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9JyskKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIC8vYWxlcnQoZGF0YSk7XHJcbiAgICAgICAgQWpheENsaWVudCgnYWNjJywnc2VsZWN0X3Rvd24nLCdHRVQnLGRhdGEsJ0FmdGVyU2VsZWN0VG93bicsMCwwKTtcclxuICAgICAgICAkKCcuanMta3ZhcnRhbCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICQoJy5qcy1vYmplY3QtYycpLnJlbW92ZSgpO1xyXG5cclxuICAgIH1cclxuICAgIGlmKGV2ZW50LmRhdGEua2V5PT04KVxyXG4gICAge1xyXG4gICAgICAgIC8v0LLRi9Cx0YDQsNC7INC60LLQsNGA0YLQsNC7INC00YDRg9Cz0L7QuVxyXG4gICAgICAgIC8v0L7QsdC90LDQstC70Y/QtdC8INGB0L/QuNGB0LrQuCDQvtCx0YrQtdC60YJcclxuICAgICAgICB2YXIgZGF0YSA9ICd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScrJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAvL2FsZXJ0KGRhdGEpO1xyXG4gICAgICAgIEFqYXhDbGllbnQoJ2FjYycsJ3NlbGVjdF9rdmFydGFsJywnR0VUJyxkYXRhLCdBZnRlclNlbGVjdEt2YXJ0YWwnLDAsMCk7XHJcbiAgICAgICAgJCgnLmpzLW9iamVjdC1jJykucmVtb3ZlKCk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIEFmdGVyU2VsZWN0VG93bihkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdvaycgKSB7XHJcblxyXG4gICAgICAgICQoJy5qcy1jaXR5JykuYWZ0ZXIoZGF0YS5lY2hvKTtcclxuICAgICAgICAkKFwiLnNsY3RcIikudW5iaW5kKCdjbGljay5zeXMnKTtcclxuICAgICAgICAkKFwiLnNsY3RcIikuYmluZCgnY2xpY2suc3lzJywgc2xjdGNsaWNrKTtcclxuICAgICAgICAkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLmJpbmQoJ2NsaWNrJywgZHJvcGxpKTtcclxuICAgICAgICBaaW5kZXgoKTtcclxuICAgICAgICAkKFwiLmRyb3AtcmFkaW9cIikuZmluZChcImxpXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAkKFwiLmRyb3AtcmFkaW9cIikuZmluZChcImxpXCIpLmJpbmQoJ2NsaWNrJywgZHJvcGxpcmFkaW8pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gQWZ0ZXJTZWxlY3RLdmFydGFsKGRhdGEsdXBkYXRlKVxyXG57XHJcbiAgICBpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcbiAgICAgICAgV2luZG93TG9naW4oKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApIHtcclxuXHJcbiAgICAgICAgJCgnLmpzLWt2YXJ0YWwnKS5hZnRlcihkYXRhLmVjaG8pO1xyXG4gICAgICAgICQoXCIuc2xjdFwiKS51bmJpbmQoJ2NsaWNrLnN5cycpO1xyXG4gICAgICAgICQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG4gICAgICAgICQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgICQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGkpO1xyXG4gICAgICAgIFppbmRleCgpO1xyXG4gICAgICAgICQoXCIuZHJvcC1yYWRpb1wiKS5maW5kKFwibGlcIikudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgICQoXCIuZHJvcC1yYWRpb1wiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGlyYWRpbyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBkcm9wbGlyYWRpbygpIHtcclxuXHJcbiAgICB2YXIgYWN0aXZlX29sZD0kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5hdHRyKFwiZGF0YV9zcmNcIik7XHJcbiAgICB2YXIgYWN0aXZlX25ldz0kKHRoaXMpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcblxyXG4gICAgdmFyIGY9JCh0aGlzKS5maW5kKFwiYVwiKS50ZXh0KCk7XHJcbiAgICB2YXIgZT0kKHRoaXMpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcbiAgICB2YXIgZHJvcF9vYmplY3Q9JCh0aGlzKS5wYXJlbnRzKCcuZHJvcC1yYWRpbycpO1xyXG5cclxuICAgIGlmICgkKHRoaXMpLmZpbmQoJ2knKS5pcyhcIi5hY3RpdmVfdGFza19jYlwiKSlcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCdpJykuYWRkQ2xhc3MoXCJhY3RpdmVfdGFza19jYlwiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy/Qv9GA0L7QsdC10LbQsNGC0YzRgdGPINC/0L4g0LLRgdC10Lkg0LLRi9Cx0YDQsNC90L3QvtC80YMg0YHQtdC70LXQutGC0YNcclxuICAgIHZhciBzZWxlY3RfbGk9Jyc7XHJcbiAgICB2YXIgc2VsZWN0X2xpX3RleHQ9Jyc7XHJcbiAgICBkcm9wX29iamVjdC5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaScpLmlzKFwiLmFjdGl2ZV90YXNrX2NiXCIpKSB7ICBpZihzZWxlY3RfbGk9PScnKXtzZWxlY3RfbGk9JCh0aGlzKS5maW5kKFwiYVwiKS5hdHRyKFwicmVsXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3RfbGlfdGV4dD0kKHRoaXMpLmZpbmQoXCJhXCIpLnRleHQoKTtcclxuICAgICAgICB9IGVsc2Uge3NlbGVjdF9saT1zZWxlY3RfbGkrJywnKyQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0X2xpX3RleHQ9c2VsZWN0X2xpX3RleHQrJywgJyskKHRoaXMpLmZpbmQoXCJhXCIpLnRleHQoKTtcclxuICAgICAgICB9fVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGlmKGRyb3Bfb2JqZWN0LmlzKCcuanMtbm8tbnVsLXNlbGVjdCcpKVxyXG4gICAge1xyXG4gICAgICAgIC8v0LXRgdGC0Ywg0LrQu9Cw0YHRgSDQutC+0YLQvtGA0YvQuSDQs9C+0LLQvtGA0LjRgiDRh9GC0L4g0LXRgdC70Lgg0YPQsdGA0LDRgtGMINCz0LDQu9C60Lgg0YHQviDQstGB0LXRhSDRgtC+INC30LDQs9Cw0YDRj9GC0YHRjyDQstGB0LUg0YHRgNCw0LfRg1xyXG4gICAgICAgIGlmKHNlbGVjdF9saT09JycpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkcm9wX29iamVjdC5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxlY3RfbGk9PScnKXtzZWxlY3RfbGk9JCh0aGlzKS5maW5kKFwiYVwiKS5hdHRyKFwicmVsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdF9saV90ZXh0PSQodGhpcykuZmluZChcImFcIikudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtzZWxlY3RfbGk9c2VsZWN0X2xpKycsJyskKHRoaXMpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0X2xpX3RleHQ9c2VsZWN0X2xpX3RleHQrJywgJyskKHRoaXMpLmZpbmQoXCJhXCIpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRyb3Bfb2JqZWN0LmZpbmQoJ2knKS5hZGRDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgICAgICAgICAgICBpZihlIT0wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxlZnRfZHJvcCcpLmZpbmQoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZV9sYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4kKHRoaXMpLnBhcmVudHMoJy5sZWZ0X2Ryb3AnKS5maW5kKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmVfbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAqL1xyXG4gICAgLypcclxuICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInNlbF9hY3RpdmVcIik7XHJcbiAgJCh0aGlzKS5hZGRDbGFzcyhcInNlbF9hY3RpdmVcIik7XHJcbiovXHJcblxyXG5cclxuICAgIC8vICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5zbGN0XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmh0bWwoZik7XHJcbiAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5lbXB0eSgpLmFwcGVuZChzZWxlY3RfbGlfdGV4dCk7XHJcbiAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5hdHRyKFwiZGF0YV9zcmNcIixzZWxlY3RfbGkpO1xyXG5cclxuICAgIC8vJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuaGlkZSgpO1xyXG4gICAgLy8gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cclxuICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcImlucHV0XCIpLnZhbChzZWxlY3RfbGkpLmNoYW5nZSgpO1xyXG5cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGt0b19mbnMoKVxyXG57XHJcbiAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgIHZhciBrdG89JCh0aGlzKS52YWwoKS5zbGljZSgxKTtcclxuICAgIHZhciBuZXdfcz0kKHRoaXMpLnZhbCgpWzBdO1xyXG4gICAgaWYobmV3X3M9PSduJylcclxuICAgIHtcclxuICAgICAgICAvL9GN0YLQviDQvdC+0LLRi9C5INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRgSDRhNC90YFcclxuXHJcbiAgICAgICAgLy/Qv9C10YDQtdC50YLQuCDQvdCwINCy0LrQu9Cw0LTQutGDINC90L7QstGL0Lkg0LrQvtC90YLRgNCw0LPQtdC90YJcclxuICAgICAgICAkKCcuanMtYWpheC1uZXctcHJvZmlbaWQ9MV0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1zdXBwbHktMScpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgJCgnLmpzLW9wdGlvbnMtc3VwcGx5LTEnKS5hZnRlcignPGRpdiBjbGFzcz1cImJfbG9hZGluZ19zbWFsbCBqcy1tZXRrYVwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IG1hcmdpbi1ib3R0b206IDIwcHg7IFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0gJ3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaW5uPScra3RvO1xyXG4gICAgICAgIC8vYWxlcnQoZGF0YSk7XHJcbiAgICAgICAgQWpheENsaWVudCgnYWNjJywnbmV3X2NvbnRyYWN0b3InLCdHRVQnLGRhdGEsJ0FmdGVya3RvX2ZucycsMCwwKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFmdGVya3RvX2ZucyhkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdvaycgKSB7XHJcblxyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9bmFtZV9jb250cmFjdG9yXScpLnZhbChkYXRhLm5hbWUpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgJCgnLmpzLW9wdGlvbnMtc3VwcGx5LTEnKS5maW5kKCdbbmFtZT1hZGRyZXNzX2NvbnRyYWN0b3JdJykudmFsKGRhdGEuYWRyZXNzKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9ZGlyX2NvbnRyYWN0b3JdJykudmFsKGRhdGEuZGlyKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9aW5uX2NvbnRyYWN0b3JdJykudmFsKGRhdGEuaW5uKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9b2dybl9jb250cmFjdG9yXScpLnZhbChkYXRhLm9ncm4pLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblxyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9bmFtZV9zbWFsbF9jb250cmFjdG9yXScpLnZhbChkYXRhLm5hbWVfc21hbGwpO1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0xJykuZmluZCgnW25hbWU9c3RhdHVzX2NvbnRyYWN0b3JdJykudmFsKGRhdGEuc3RhdHVzX2YpO1xyXG5cclxuICAgICAgICAkKCcuanMtbWV0a2EnKS5yZW1vdmUoKTtcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1zdXBwbHktMScpLnNsaWRlRG93bihcInNsb3dcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQntGI0LjQsdC60LAg0LLRi9Cx0L7RgNCwINC/0L7RgdGC0LDQstGJ0LjQutCwLiDQn9C+0L/RgNC+0LHRg9C50YLQtSDQtdGJ0LUg0YDQsNC3LicpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gQWZ0ZXJTaWduQWNjKGRhdGEsdXBkYXRlKVxyXG57XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGl1PSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignaXUnKTtcclxuXHJcbiAgICAgICAgdmFyIGNvb2tpZV9mbGFnX2N1cnJlbnQgPSAkLmNvb2tpZSgnY3VycmVudF9zdXBwbHlfJytpdSk7XHJcblxyXG4gICAgICAgIC8v0LXRgdC70Lgg0YHRh9C10YIg0LrQvtGC0L7RgNGL0Lkg0YHQvtCz0LvQsNGB0L7QstGL0LLQsNC70Lgg0LHRi9C7INGC0LXQutGD0YnQuNC8XHJcbiAgICAgICAgaWYoKGNvb2tpZV9mbGFnX2N1cnJlbnQhPW51bGwpJiYoY29va2llX2ZsYWdfY3VycmVudD09dXBkYXRlKSkge1xyXG4gICAgICAgICAgICAkLmNvb2tpZShcImN1cnJlbnRfc3VwcGx5X1wiICsgaXUsIG51bGwsIHtcclxuICAgICAgICAgICAgICAgIHBhdGg6ICcvJyxcclxuICAgICAgICAgICAgICAgIGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sXHJcbiAgICAgICAgICAgICAgICBzZWN1cmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2FtZXNpdGU6ICdsYXgnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkLmNvb2tpZShcImJhc2tldF9zY29yZV9cIiArIGl1LCBudWxsLCB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgICAgICAgICBkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgc2VjdXJlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNhbWVzaXRlOiAnbGF4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJC5jb29raWUoXCJiYXNrZXRfc3VwcGx5X1wiICsgaXUsIG51bGwsIHtcclxuICAgICAgICAgICAgICAgIHBhdGg6ICcvJyxcclxuICAgICAgICAgICAgICAgIGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sXHJcbiAgICAgICAgICAgICAgICBzZWN1cmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2FtZXNpdGU6ICdsYXgnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5yZW1vdmVDbGFzcygnbW9yZS1hY3RpdmUtcycpO1xyXG4gICAgICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5yZW1vdmVDbGFzcygnbW9yZS1hY3RpdmUtczEnKTtcclxuICAgICAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjIC5tb3JlX3N1cHBseTEnKS5maW5kKCdpJykuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgICAgIC8v0YPQsdGA0LDRgtGMINCy0YvQtNC10LvQtdC90LjRjyDQvdCwINC80LDRgtC10LvQuNCw0LvQsNGFXHJcbiAgICAgICAgICAgICQoJy5jaGVjaGVyX3N1cHBseScpLnJlbW92ZUNsYXNzKCdjaGVjaGVyX3N1cHBseScpO1xyXG5cclxuICAgICAgICAgICAgLy/Rg9Cx0YDQsNGC0Ywg0LDQutGC0LjQstC90L7RgdGC0Ywg0YHQviDRgdGH0LXRgtCwXHJcbiAgICAgICAgICAgICQoJy5zY29yZV9hY3RpdmUnKS5yZW1vdmVDbGFzcygnc2NvcmVfYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgLy/Rg9C00LDRj9C10Lwg0LjRhSDQvNC10L3RjiDQu9C40YjQvdC10LUg0YLQtdC/0LXRgNGMXHJcbiAgICAgICAgICAgICQoJ1tyZWxfc2NvcmU9Jyt1cGRhdGUrJ10nKS5uZXh0KCkuZmluZCgnW3JlbD0yXScpLnBhcmVudHMoJ2xpJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCdbcmVsX3Njb3JlPScrdXBkYXRlKyddJykubmV4dCgpLmZpbmQoJ1tyZWw9M10nKS5wYXJlbnRzKCdsaScpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnW3JlbF9zY29yZT0nK3VwZGF0ZSsnXScpLm5leHQoKS5maW5kKCdbcmVsPTRdJykucGFyZW50cygnbGknKS5oaWRlKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy/QtNC+0LHQsNCy0LjRgtGMINC6INGN0YLQvtC5INC30LDRj9Cy0LrQtSDRgdGC0LDRgtGD0YEg0LrQvtGC0L7RgNGL0Lkg0L/RgNC40YjQtdC7INC40Lcg0YHQuNGB0YLQtdC80YtcclxuICAgICAgICAgICAgJCgnW3JlbF9zY29yZT0nK3VwZGF0ZSsnXScpLmZpbmQoJy5qcy1zdGF0ZS1hY2MtbGluaycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKCdbcmVsX3Njb3JlPScrdXBkYXRlKyddJykuZmluZCgnaScpLmFmdGVyKGRhdGEuZWNobyk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy/QvtCx0L3QvtCy0LvQtdC90LjQtSDQtNC70Y8g0LzQsNGC0LXRgNC40LDQu9CwINC10YnQtSDQvdC10L7QsdGF0L7QtNC40LzQvlxyXG4gICAgICAgICAgICB2YXIgaGY9JCgnW3JlbF9zY29yZT0nK3VwZGF0ZSsnXScpLnBhcmVudHMoJ1tzdXBwbHlfc3RvY2tdJyk7XHJcbiAgICAgICAgICAgIGhmLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnR0dD0kKHRoaXMpLmF0dHIoJ3N1cHBseV9zdG9jaycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhmMT0gW107XHJcbiAgICAgICAgICAgICAgICBoZjE9cnR0dC5zcGxpdCgnXycpO1xyXG4gICAgICAgICAgICAgICAgLy9hbGVydChoZjFbMF0pO1xyXG4gICAgICAgICAgICAgICAgVXBkYXRlU3RhdHVzQURBKGhmMVswXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdvaycsJ9Ch0YfQtdGCINC+0YLQv9GA0LDQstC70LXQvSDQvdCwINGB0L7Qs9C70LDRgdC+0LLQsNC90LjQtScpO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J2Vycm9yJyApIHtcclxuXHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCAn0J7RiNC40LHQutCwIC0g0L/QvtC/0YDQvtCx0YPQudGC0LUg0LXRidC1INGA0LDQtycpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBib3ggPSAkKCcuYm94LW1vZGFsOmxhc3QnKTtcclxuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICBib3guZmluZCgnLmFyY3RpY21vZGFsLWNsb3NlJykuY2xpY2soKTtcclxuXHJcbn1cclxuXHJcbi8v0L7RgtC60LvQvtC90LjRgtGMINC30LDRj9Cy0LrRg1xyXG5mdW5jdGlvbiBSZWplY3RGb0EoKVxyXG57XHJcbiAgICBpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG4gICAgICAgIHZhciBwcmUgPSAkKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX2FjY19yZWplY3QucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8v0L/QtdGA0LXRgdC70LDRgtGMINC30LDRj9Cy0LrRg1xyXG5mdW5jdGlvbiBGb3J3YXJkRm9BKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF9hY2NfZm9yd2FyZC5waHA/aWQ9JyArIHByZSxcclxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBTaW5nRm9BKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgZm8gPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICghZm8uaGFzQ2xhc3MoXCJncmF5LWJiXCIpKSB7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoXCIhXCIpO1xyXG4gICAgICAgICAgICBpZiAoZm8uZmluZCgnaW5wdXQnKS52YWwoKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C+0YLQutGA0YvRgtGMINC+0LrQvdC+INC00LvRjyDQstC/0LjRgdCw0L3QuNC1INC30LDQvNC10YfQsNC90LjRj1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZSA9ICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyk7XHJcbiAgICAgICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfYWNjX3JlbWFyay5waHA/aWQ9JyArIHByZSxcclxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL9Ce0YLQv9GA0LDQstC40YLRjCDQv9GA0Y/QvNGD0Y4g0YTQvtGA0LzRgyDQvdCwINGB0L7Qs9C70LDRgdC+0LLQsNC90LjQtVxyXG4gICAgICAgICAgICAgICAgJCgnI2pzLWZvcm0tbmV4dC1zaWduJykuc3VibWl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNpbmdGb0VuZCgpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIGZvID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoIWZvLmhhc0NsYXNzKFwiZ3JheS1iYlwiKSkge1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICAgICAgICAgIC8v0L7RgtC60YDRi9GC0Ywg0L7QutC90L4g0LTQu9GPINCy0L/QuNGB0LDQvdC40LUg0LfQsNC80LXRh9Cw0L3QuNGPXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX3llc19iaWxsLnBocD9pZD0nICsgcHJlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBTaW5nRm9QYXkoKVxyXG57XHJcbiAgICBpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG4gICAgICAgIHZhciBmbyA9ICQodGhpcyk7XHJcbiAgICAgICAgaWYgKCFmby5oYXNDbGFzcyhcImdyYXktYmJcIikpIHtcclxuICAgICAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgICAgICAgICAgIC8v0L7RgtC60YDRi9GC0Ywg0L7QutC90L4g0LTQu9GPINCy0L/QuNGB0LDQvdC40LUg0LfQsNC80LXRh9Cw0L3QuNGPXHJcbiAgICAgICAgICAgIHZhciBwcmUgPSAkKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYm9va2VyX3llcy5waHA/aWQ9JyArIHByZSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy/RgtCw0LHRgdGLINCyINC+0LHRgNCw0YnQtdC90LjRj9GFXHJcbnZhciB0YWJzX2FjYyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAvL2V2ZW50LmRhdGEua2V5XHJcblxyXG4gICAgdmFyIHVvbz0kKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuXHJcblxyXG4gICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5hZGRDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggJCh0aGlzKS5pcyhcIi5hY3RpdmVcIikgKVxyXG4gICAge1xyXG4gICAgICAgIC8v0YPQttC1INCw0LrRgtC40LLQvdCw0Y8g0LLQutC70LDQtNC60LBcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy9hbGVydChldmVudC5kYXRhLmtleSk7XHJcbiAgICAgICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX3NtYWxsXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTsgbGVmdDogY2FsYyg1MCUgLSAzMHB4KTsgXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbCBiX2xvYWRpbmdfY2lyY2xlX2RlbGF5ZWRfc21hbGxcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5uZXh0KCkuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmZvcm0nK2V2ZW50LmRhdGEua2V5KycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkgKyAnW2lkPScgKyB1b28gKyAnXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vdmFyIGtleV89JzAwMlUnO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSAndXJsPScgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArICcmaWRfdGFicz0nICsgJCh0aGlzKS5hdHRyKFwiaWRcIikgK1xyXG4gICAgICAgICAgICAgICAgJyZpZD0nICsgJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICBBamF4Q2xpZW50KCdhY2MnLCd0YWJzX2luZm8nLCdHRVQnLGRhdGEsJ0FmdGVyVGFic0luZm9BY2MnLCQodGhpcykuYXR0cihcImlkXCIpKycsJyskKHRoaXMpLnBhcmVudHMoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyksMCwxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQstC60LvQsNC00LrQuCDQsiDQvtCx0YDQsNGJ0LXQvdC40Y/RhVxyXG5mdW5jdGlvbiBBZnRlclRhYnNJbmZvQWNjKGRhdGEsdXBkYXRlKVxyXG57XHJcbiAgICBpZih1cGRhdGUhPW51bGwpeyBpZiAodHlwZW9mKHVwZGF0ZSkgPT0gXCJzdHJpbmdcIikgeyB1cGRhdGUgPSB1cGRhdGUuc3BsaXQoJywnKTsgfSBlbHNlIHsgdXBkYXRlWzBdPXVwZGF0ZTsgfSB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWxbaWRfcHJlPScrdXBkYXRlWzFdKyddJykuZmluZCgnLnB4X2JnX3RyaXBzJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcblxyXG4gICAgICAgIC8vJCgnLmNoYV8xJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLndhbGxldF9jaGVja2JveCcsd2FsbGV0X2NoZWNrYm94KTtcclxuXHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLmpzLXRhYnNfZG9jYycpLmhpZGUoKTtcclxuICAgICAgICAvLyQoJy5mb3JtJyt1cGRhdGVbMV0rJyAuanMtdGFic18nK3VwZGF0ZVswXSkuc2hvdygpO1xyXG5cclxuICAgICAgICBOdW1iZXJCbG9ja0ZpbGUoKTtcclxuICAgICAgICBUb29sVGlwKCk7XHJcbiAgICAgICAgaWYoKHVwZGF0ZVswXT09Myl8fCh1cGRhdGVbMF09PTQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIi5zbGN0XCIpLnVuYmluZCgnY2xpY2suc3lzJyk7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG4gICAgICAgICAgICAkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS51bmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNheSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXkpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0X21vcmVfYWNjKClcclxue1xyXG4gICAgdmFyIG9wcGY9JCh0aGlzKS5wYXJlbnRzKCdbaWRfcHJlXScpLmF0dHIoXCJpZF9wcmVcIik7XHJcblxyXG4gICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fZWRpdF9hY2NfbW9yZS5waHA/aWQ9JyArIG9wcGYsXHJcbiAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBkZWxsX21vcmVfYWNjKClcclxue1xyXG4gICAgdmFyIG9wcGY9JCh0aGlzKS5wYXJlbnRzKCdbaWRfcHJlXScpLmF0dHIoXCJpZF9wcmVcIik7XHJcblxyXG4gICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF9zb3BseS5waHA/aWQ9JyArIG9wcGYsXHJcbiAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8v0YHQvtGF0YDQsNC90LjRgtGMINGB0YfQtdGCINC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LrQvtC70LjRh9C10YHRgtCy0LBcclxuZnVuY3Rpb24gc2F2ZV9hY2MoKVxyXG57XHJcbiAgICB2YXIgZXJyID0gMDtcclxuICAgICQoJy5qcy1zYXZlLWZvcm0tYWNjJykuZmluZCgnLmdsb2FiJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICBpZigoJCh0aGlzKS52YWwoKSA9PSAnJyl8fCgkKHRoaXMpLnZhbCgpID09ICcwJykpIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgIGVycisrO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuYXR0cignbmFtZScpKTtcclxuICAgICAgICB9IGVsc2UgeyQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpOyQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7fVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoZXJyPT0wKSB7XHJcblxyXG4gICAgICAgICQoJy5qcy1zYXZlLWZvcm0tYWNjJykuc3VibWl0KCk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQndC1INCy0YHQtSDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90YsnKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0LzQsNGC0LXRgNC40LDQuyDQuNC3INGB0YfQtdGC0LAg0LLQvdGD0YLRgNC4INGB0YfQtdGC0LBcclxuZnVuY3Rpb24gZGVsX2FjY19tYXRlcmlhbChldmVudClcclxue1xyXG5cclxuICAgIHZhciBjY19tYXQ9JCgnLmpzLWFjYy1ibG9jaycpLmxlbmd0aDtcclxuLy9hbGVydChjY19tYXQpO1xyXG4gICAgaWYoY2NfbWF0PjEpIHtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfbWF0ZXJpYWxfYWNjLnBocD9pZD0nICsgJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpLFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxufVxyXG5cclxuLy/Qv9C+0LTRgdGH0LXRgiDQuNGC0L7Qs9C+0LLQvtC5INGB0YPQvNC80YMg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INGB0YfQtdGC0LBcclxudmFyIGl0b2dwcmljZV94dmcgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgYm94X2FjdGl2ZSA9ICQodGhpcykuY2xvc2VzdCgnLmJveC1tb2RhbCcpO1xyXG4gICAgdmFyIHh2Zz0kKCcuanMtYWNjLWJsb2NrJyk7XHJcbiAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1hZGQtYWNjLWJsb2NrLXgnKS5zaG93KCk7XHJcbiAgICAvLyQoJyN5ZXNfc29wbHkxMScpLnNob3coKTtcclxuICAgIC8vJCgnI3llc19zb3BseTEyJykuc2hvdygpO1xyXG4gICAgdmFyIHN1bW1feHZnPTA7XHJcbiAgICB4dmcuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcuY291bnRfeHZnXycpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlZGFhcycpO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLnByaWNlX3h2Z18nKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLnJlbW92ZUNsYXNzKCdyZWRhYXMnKTtcclxuXHJcbiAgICAgICAgdmFyIGNvdW50PSBwYXJzZUZsb2F0KCQodGhpcykuZmluZCgnLmNvdW50X3h2Z18nKS52YWwoKSk7XHJcbiAgICAgICAgdmFyIGNvdW50X21heD0gcGFyc2VGbG9hdCgkKHRoaXMpLmZpbmQoJy5jb3VudF94dmdfJykuYXR0cignbWF4JykpO1xyXG4gICAgICAgIHZhciBwcmljZT0gcGFyc2VGbG9hdChjdHJpbSgkKHRoaXMpLmZpbmQoJy5wcmljZV94dmdfJykudmFsKCkpKTtcclxuICAgICAgICB2YXIgcHJpY2VfbWF4PSBwYXJzZUZsb2F0KGN0cmltKCQodGhpcykuZmluZCgnLnByaWNlX3h2Z18nKS5hdHRyKCdtYXgnKSkpO1xyXG4gICAgICAgIC8vIHZhciBtYXhfY291bnQ9cGFyc2VGbG9hdCgkKCcjY291bnRfd29ya18nK2lkX3RycikuYXR0cignbWF4JykpO1xyXG5cclxuICAgICAgICBpZihjb3VudD5jb3VudF9tYXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL9Cy0YvQtNC10LvRj9C10Lwg0LrRgNCw0YHQvdGL0Lwg0Lgg0L7RgtC60YDRi9Cy0LDQtdC8INGB0LvRg9C20LXQsdC90YPRjiDQt9Cw0L/QuNGB0LrRg1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jb3VudF94dmdfJykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygncmVkYWFzJyk7XHJcbiAgICAgICAgICAgIC8vYm94X2FjdGl2ZS5maW5kKCcuanMtYWRkLWFjYy1ibG9jay14JykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwcmljZT5wcmljZV9tYXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL9Cy0YvQtNC10LvRj9C10Lwg0LrRgNCw0YHQvdGL0Lwg0Lgg0L7RgtC60YDRi9Cy0LDQtdC8INGB0LvRg9C20LXQsdC90YPRjiDQt9Cw0L/QuNGB0LrRg1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5wcmljZV94dmdfJykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygncmVkYWFzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIHZhbHVlPShjb3VudCpwcmljZSkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgaWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuYWxsX3ByaWNlX2NvdW50X3h2ZyBzcGFuJykuZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIodmFsdWUsIDIsICcuJywgJyAnKSk7XHJcbiAgICAgICAgICAgIHN1bW1feHZnPShwYXJzZUZsb2F0KHN1bW1feHZnKStwYXJzZUZsb2F0KHZhbHVlKSkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5hbGxfcHJpY2VfY291bnRfeHZnIHNwYW4nKS5lbXB0eSgpLmFwcGVuZCgnMCcpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4vL9C00L7RgdGC0LDQstC60LBcclxuICAgIGlmKCQoJy5kZWxpdmVyeV94dmdfJykubGVuZ3RoIT0wKSB7XHJcbiAgICAgICAgdmFyIGRlbGl2ZXJ5ID0gcGFyc2VGbG9hdChjdHJpbSgkKCcuZGVsaXZlcnlfeHZnXycpLnZhbCgpKSk7XHJcblxyXG4gICAgICAgIGlmICgoZGVsaXZlcnkgIT0gMCkgJiYgKGRlbGl2ZXJ5ICE9ICcnKSAmJiAoJC5pc051bWVyaWMoZGVsaXZlcnkpKSkge1xyXG5cclxuICAgICAgICAgICAgc3VtbV94dmcgPSAocGFyc2VGbG9hdChzdW1tX3h2ZykgKyBwYXJzZUZsb2F0KGRlbGl2ZXJ5KSkudG9GaXhlZCgyKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZigkKCcuZGVsaXZlcnlfeHZnXycpLnBhcmVudHMoJy5pdGVtc19hY2NfYmFza2V0JykuZmluZCgnLnBheV9zdW1tX2JpbGwxJykubGVuZ3RoIT0wKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoKGRlbGl2ZXJ5ICE9IDApICYmIChkZWxpdmVyeSAhPSAnJykgJiYgKCQuaXNOdW1lcmljKGRlbGl2ZXJ5KSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcuZGVsaXZlcnlfeHZnXycpLnBhcmVudHMoJy5pdGVtc19hY2NfYmFza2V0JykuZmluZCgnLnBheV9zdW1tX2JpbGwxJykuZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIoZGVsaXZlcnksIDIsICcuJywgJyAnKSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCgnLmRlbGl2ZXJ5X3h2Z18nKS5wYXJlbnRzKCcuaXRlbXNfYWNjX2Jhc2tldCcpLmZpbmQoJy5wYXlfc3VtbV9iaWxsMScpLmVtcHR5KCkuYXBwZW5kKDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgJCgnLmFsbF9zdW1tYV94dmcnKS5maW5kKCdzcGFuJykuZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIoc3VtbV94dmcsIDIsICcuJywgJyAnKSk7XHJcbiAgICBpZihzdW1tX3h2Zz4wKVxyXG4gICAge1xyXG4gICAgICAgIC8vJCgnLmFsbF94dmcnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmFsbF94dmcnKS5zbGlkZURvd24oIFwic2xvd1wiICk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAvLyQoJy5hbGxfeHZnJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5hbGxfeHZnJykuc2xpZGVVcCggXCJzbG93XCIgKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuLy/QstGL0LHQvtGAINC60LDQutC+0Lkg0L/QsNGB0L/QvtGA0YJcclxuZnVuY3Rpb24gcGFzc3dvcmRfYWNjKClcclxue1xyXG4gICAgdmFyIGNiX2g9JCh0aGlzKS5wYXJlbnRzKCcucGFzc3dvcmRfYWNjJykuZmluZCgnaW5wdXQnKTtcclxuICAgIGlmKGNiX2gudmFsKCkhPSQodGhpcykuYXR0cignaWQnKSlcclxuICAgIHtcclxuICAgICAgICBjYl9oLnZhbCgkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wYXNzd29yZF9hY2MnKS5maW5kKCcuY2hvaWNlLXJhZGlvIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlX3Rhc2tfY2InKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wYXNzd29yZF9hY2MnKS5maW5kKCcuaW5wdXQtY2hvaWNlLWNsaWNrLXBhc3MnKS5yZW1vdmVDbGFzcygnYWN0aXZlX3Bhc3MnKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcuY2hvaWNlLXJhZGlvIGknKS5hZGRDbGFzcygnYWN0aXZlX3Rhc2tfY2InKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmVfcGFzcycpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2aWV3X3R5cGUoKVxyXG57XHJcblxyXG4gICAgdmFyIHRfc29mdD0kKCcuanMtdHlwZS1zb2Z0LXZpZXcxJykudmFsKCk7XHJcbiAgICBpZih0X3NvZnQ9PTEpXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLmpzLW9wdGlvbnMtc3VwcGx5LTEnKS5zbGlkZURvd24oXCJzbG93XCIpOyAvL9C/0L7QutCw0LfQsNGC0YxcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1zdXBwbHktMCcpLnNsaWRlVXAoXCJzbG93XCIpOyAvL9GB0LrRgNGL0YLRjFxyXG5cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLXN1cHBseS0wJykuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1zdXBwbHktMScpLnNsaWRlVXAoXCJzbG93XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgZGVsYXkxID0gKGZ1bmN0aW9uKHRoKXtcclxuICAgIHZhciB0aW1lciA9IDA7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2ssIG1zKXtcclxuICAgICAgICBjbGVhclRpbWVvdXQgKHRpbWVyKTtcclxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcclxuICAgIH07XHJcbn0pKCk7XHJcblxyXG52YXIgZGVsYXlzID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdGltZXIgPSAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrLCBtcyl7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0ICh0aW1lcik7XHJcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QslxyXG4gICAgJCgnYm9keScpLm9uKFwiY2xpY2tcIiwgJy5qcy11cGxvYWQtZmlsZScsIFVwbG9hZEludm9pY2UpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImRyYWdvdmVyXCIsICcuanMtaW1hZ2UtZ2wnLCBGaWxlRHJhZ0hvdmVyKTtcclxuICAgICQoJ2JvZHknKS5vbihcImRyYWdsZWF2ZVwiLCAnLmpzLWltYWdlLWdsJywgRmlsZURyYWdIb3ZlcjEpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImRyb3BcIiwgJy5qcy1pbWFnZS1nbCcsIEZpbGVTZWxlY3RIYW5kbGVyKTtcclxuXHJcbi8v0L/QvtGB0LvQtSDQstGL0LHQvtGA0LAg0YTQsNC50LvQsCDQuCDQvdCw0LbQsNGC0LjQtSDQutC90L7Qv9C60Lgg0L7QulxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlXCIsICcuanMtZmlsZS1sb2FkJywgVXBsb2FkU2NhblNDaGFuZ2UpO1xyXG4vL9GD0LTQsNC70LjRgtGMINC30LDQs9GA0YPQttC10L3QvdGL0Lkg0YTQsNC50LtcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCAnLmpzLWltYWdlLWdsIC5qcy1kZWxsLWltYWdlJywgRGVsbEltYWdlQmxvY2spO1xyXG5cclxuLy/RgNCw0YHRgdGC0LDQstC40YLRjCDQvdC+0LzQtdGA0LAg0LTQu9GPINCx0LvQvtC60L7QsiDRgSDQt9Cw0LPRgNGD0LfQutC+0Lkg0YTQsNC50LvQvtCyXHJcbiAgICBOdW1iZXJCbG9ja0ZpbGUoKTtcclxuXHJcbn0pO1xyXG5cclxuXHJcbi8vINCk0LDQudC7INC90LDQtCDQvdGD0LbQvdC+0Lkg0L7QsdC70LDRgdGC0YzRjlxyXG5mdW5jdGlvbiBGaWxlRHJhZ0hvdmVyKGUpe1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ2RyYWdob3ZlcicpO1xyXG59XHJcbmZ1bmN0aW9uIEZpbGVEcmFnSG92ZXIxKGUpe1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2RyYWdob3ZlcicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBGaWxlU2VsZWN0SGFuZGxlcihlKVxyXG57XHJcbiAgICBGaWxlRHJhZ0hvdmVyKGUpO1xyXG5cclxuXHJcbiAgICBpZiAodHlwZW9mKHdpbmRvdy5GaWxlUmVhZGVyKSA9PSAndW5kZWZpbmVkJykge1xyXG5cclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cf0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LUg0L3QtSDQv9C+0LTQtNC10YDQttC40LLQsNC10YLRgdGPINCx0YDQsNGD0LfQtdGA0L7QvCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINC/0YDQvtGF0L7QtNC40LzRgdGPINC/0L4g0L7QsdGK0LXQutGC0YMgRmlsZUxpc3RcclxuICAgIHZhciBmaWxlID0gZS5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcclxuXHJcbiAgICAvLyDQv9Cw0YDRgdC40Lwg0LLRgdC1INC+0LHRitC10LrRgtGLINGC0LjQv9CwIEZpbGVcclxuICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZVtpXTsgaSsrKXtcclxuICAgICAgICAvL1BhcnNlRmlsZShmKTtcclxuICAgICAgICB2YXIgaWRfYmxvY2s9JCh0aGlzKS5maW5kKCcuanMtdXBsb2FkLWZpbGUnKS5hdHRyKCd0eXBlX2Jsb2NrJyk7ICAgLy/QvdC+0LzQtdGAINCx0LvQvtC60LAg0LIg0YTQvtGA0LzQtVxyXG4gICAgICAgIHZhciBpZF90eXBlPSQodGhpcykuZmluZCgnLmpzLXVwbG9hZC1maWxlJykuYXR0cigndHlwZV9sb2FkJyk7ICAgICAvL9GC0LjQvyDQt9Cw0LPRgNGD0LfQutC4IDEtINGB0LXRgNGC0LjRhNC40LrQsNGC0YsgIDItINGB0YDQviDQuCDRgtCw0Log0LTQsNC70LXQtVxyXG4gICAgICAgIHZhciBpZF9vYmplY3Q9JCh0aGlzKS5maW5kKCcuanMtdXBsb2FkLWZpbGUnKS5hdHRyKCdpZF9vYmplY3QnKTtcclxuXHJcbiAgICAgICAgdmFyIGZvcm1hYT0kKCdbbmFtZT1teWZpbGVdJykucGFyZW50cygnZm9ybScpO1xyXG4gICAgICAgIGZvcm1hYS5hdHRyKCd0eXBlX2xvYWQnLGlkX3R5cGUpO1xyXG4gICAgICAgIGZvcm1hYS5hdHRyKCd0eXBlX2Jsb2NrJyxpZF9ibG9jayk7XHJcbiAgICAgICAgZm9ybWFhLmF0dHIoJ2lkX29iamVjdCcsaWRfb2JqZWN0KTtcclxuXHJcblxyXG4gICAgICAgIHZhciB0eXBlPWlkX3R5cGU7XHJcbiAgICAgICAgdmFyIG51bWJlcl9ibG9jaz1pZF9ibG9jaztcclxuXHJcbiAgICAgICAgdmFyIGlkX29iamVjdD1pZF9vYmplY3Q7XHJcblxyXG4gICAgICAgIHZhciBnbGw9JCgnZGl2W3R5cGVfYmxvY2s9XCInK251bWJlcl9ibG9jaysnXCJdJykucGFyZW50cygnLmpzLWltYWdlLWdsJyk7XHJcblxyXG4gICAgICAgIC8v0L7Qv9GA0LXQtNC10LvRj9C10Lwg0YHQutC+0LvRjNC60L4g0LjRhSDRg9C20LUg0LrQsNGA0YLQuNC90L7QuiDQsiDRgdC/0LjRgdC60LVcclxuICAgICAgICB2YXIgbnVtYmVyX2xpID0gKGdsbC5maW5kKCcubGktaW1hZ2UnKS5sZW5ndGgrMSk7XHJcblxyXG4gICAgICAgIC8vZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgaWYgKGYpIHtcclxuICAgICAgICAgICAgdmFyIHNpemVfYmx1PScnO1xyXG4gICAgICAgICAgICBpZihnbGwuZmluZCgnLmxpc3QtaW1hZ2UtaWNvbnMnKS5sZW5ndGghPTApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNpemVfYmx1PSc8c3BhbiBjbGFzcz1cInR5cGUtaW1nXCI+PC9zcGFuPic7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBnbGwuZmluZCgnLmxpc3QtaW1hZ2UnKS5hcHBlbmQoJzxkaXYgbnVtYmVyX2xpPVwiJytudW1iZXJfbGkrJ1wiIGNsYXNzPVwibGktaW1hZ2VcIj48c3BhbiBjbGFzcz1cIm5hbWUtaW1nXCI+PGE+JytmLm5hbWUrJzwvYT48L3NwYW4+JytzaXplX2JsdSsnPHNwYW4gY2xhc3M9XCJkZWwtaW1nIGpzLWRlbGwtaW1hZ2VcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJzaXplLWltZ1wiPicrKGYuc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpKycg0JzQkTwvc3Bhbj48ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtaW1nXCI+PGRpdiBjbGFzcz1cInAtaW1nXCIgc3R5bGU9XCJ3aWR0aDogMCU7XCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgICAgICBnbGwuZmluZCgnLmxpc3QtaW1hZ2UnKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICBnbGwuZmluZCgnLmpzLXVwbG9hZC1maWxlJykuaGlkZSgpLmFkZENsYXNzKCdlc2hlLWxvYWQtZmlsZScpOyAgLy/RgdC/0YDRj9GC0Ywg0LrQvdC+0L/QutGDINCy0YvQsdGA0LDRgtGMINGE0LDQudC7INC/0L7QutCwINCz0YDRg9C30LjRgtGB0Y9cclxuXHJcbiAgICAgICAgICAgIC8v0L/QvtC60LDQt9GL0LLQsNC10Lwg0LfQsNCz0YDRg9C30YfQuNC6INC00LvRjyDRjdGC0L7QuSDQutCw0YDRgtC40L3QutC4XHJcbiAgICAgICAgICAgIGdsbC5maW5kKCdbbnVtYmVyX2xpPScrbnVtYmVyX2xpKyddIC5wLWltZycpLnNob3coKTtcclxuXHJcblxyXG4gICAgICAgICAgICB1cGxvYWRTKGYsdHlwZSxpZF9vYmplY3QsbnVtYmVyX2xpLG51bWJlcl9ibG9jayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gUGFyc2VGaWxlKGZpbGUpIHtcclxuICAgIGFsZXJ0KFxyXG4gICAgICAgIFwiPHA+RmlsZSBpbmZvcm1hdGlvbjogPHN0cm9uZz5cIiArIGZpbGUubmFtZSArXHJcbiAgICAgICAgXCI8L3N0cm9uZz4gdHlwZTogPHN0cm9uZz5cIiArIGZpbGUudHlwZSArXHJcbiAgICAgICAgXCI8L3N0cm9uZz4gc2l6ZTogPHN0cm9uZz5cIiArIGZpbGUuc2l6ZSArXHJcbiAgICAgICAgXCI8L3N0cm9uZz4gYnl0ZXM8L3A+XCJcclxuICAgICk7XHJcbn1cclxuXHJcblxyXG4vL9C30LDQs9GA0YPQt9C60LAg0YTQsNC50LvQvtCyIC1cdNC90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINCy0YvQsdGA0LDRgtGMINGE0LDQudC7XHJcbi8vICB8XHJcbi8vIFxcL1xyXG52YXIgVXBsb2FkSW52b2ljZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgdmFyIGlkX2Jsb2NrPSQodGhpcykuYXR0cigndHlwZV9ibG9jaycpOyAgIC8v0L3QvtC80LXRgCDQsdC70L7QutCwINCyINGE0L7RgNC80LVcclxuICAgIHZhciBpZF90eXBlPSQodGhpcykuYXR0cigndHlwZV9sb2FkJyk7ICAgICAvL9GC0LjQvyDQt9Cw0LPRgNGD0LfQutC4IDEtINGB0LXRgNGC0LjRhNC40LrQsNGC0YsgIDItINGB0YDQviDQuCDRgtCw0Log0LTQsNC70LXQtVxyXG4gICAgdmFyIGlkX29iamVjdD0kKHRoaXMpLmF0dHIoJ2lkX29iamVjdCcpO1xyXG5cclxuICAgIHZhciBmb3JtYWE9JCgnW25hbWU9bXlmaWxlXScpLnBhcmVudHMoJ2Zvcm0nKTtcclxuICAgIGZvcm1hYS5hdHRyKCd0eXBlX2xvYWQnLGlkX3R5cGUpO1xyXG4gICAgZm9ybWFhLmF0dHIoJ3R5cGVfYmxvY2snLGlkX2Jsb2NrKTtcclxuICAgIGZvcm1hYS5hdHRyKCdpZF9vYmplY3QnLGlkX29iamVjdCk7XHJcblxyXG4gICAgJCgnW25hbWU9bXlmaWxlXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbn1cclxuXHJcbi8v0YDQsNGB0YHRgtCw0LLQuNGC0Ywg0L3QvtC80LXRgNCwINC00LvRjyDQsdC70L7QutC+0LIg0YEg0LfQsNCz0YDRg9C30LrQvtC5INGE0LDQudC70L7QslxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gTnVtYmVyQmxvY2tGaWxlKCkge1xyXG4gICAgLy9hbGVydChcIiFcIik7XHJcbi8v0YDQsNGB0YHRgtCw0LLQu9GP0LXRgtGB0Y8g0YLQvtC70YzQutC+INC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1LiDQsiDQv9GA0L7RhtC10YHRgdC1INC90LXQu9GM0LfRjyDQvNC10L3Rj9GC0Ywg0L3QvtC80LXRgNCwINGC0LDQuiDQutCw0Log0LIg0Y3RgtC+INCy0YDQtdC80Y8g0LzQvtC20LXRgiDQs9GA0YPQt9C40YLRgdGPINGE0LDQudC7INGBINGN0YLQuNC8INC90L7QvNC10YDQvtC8INCx0LvQvtC60LBcclxuICAgIHZhciBudW1iZXJfZmlsZT0xO1xyXG4gICAgJCgnLmpzLXVwbG9hZC1maWxlJykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG4gICAgICAgICQodGhpcykuYXR0cigndHlwZV9ibG9jaycsbnVtYmVyX2ZpbGUpO1xyXG4gICAgICAgIG51bWJlcl9maWxlKys7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/QtNC70Y8g0L7RgtC/0YDQsNCy0LrQuCDRhNCw0LnQu9C+0LIg0L3Rg9C20L3QsCDQv9GD0YHRgtCw0Y8g0YTQvtGA0LzQsCDRgSBpbnB1dD1maWxlINC10YHQu9C4INC90LXRgiDRgdC+0LfQtNCw0LXQvCDQtdC1XHJcbiAgICAvL2FsZXJ0KCQoJy5mb3JtX3VwJykubGVuZ3RoKTtcclxuICAgIGlmKCQoJy5mb3JtX3VwJykubGVuZ3RoPT0wKVxyXG4gICAge1xyXG5cclxuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8Zm9ybSBjbGFzcz1cImZvcm1fdXBcIj48aW5wdXQgY2xhc3M9XCJqcy1maWxlLWxvYWRcIiB0eXBlPVwiZmlsZVwiIG5hbWU9XCJteWZpbGVcIj48L2Zvcm0+Jyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QsiAtXHTQv9C+0YHQu9C1INCy0YvQsdC+0YDQsCDRhNCw0LnQu9CwINC90LDRh9Cw0LvQviDQt9Cw0LPRgNGD0LfQutC4XHJcbi8vICB8XHJcbi8vIFxcL1xyXG52YXIgVXBsb2FkU2NhblNDaGFuZ2UgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIHZhciB0eXBlPSQodGhpcykucGFyZW50cygnZm9ybScpLmF0dHIoJ3R5cGVfbG9hZCcpO1xyXG4gICAgdmFyIG51bWJlcl9ibG9jaz0kKHRoaXMpLnBhcmVudHMoJ2Zvcm0nKS5hdHRyKCd0eXBlX2Jsb2NrJyk7XHJcblxyXG4gICAgdmFyIGlkX29iamVjdD0kKHRoaXMpLnBhcmVudHMoJ2Zvcm0nKS5hdHRyKCdpZF9vYmplY3QnKTtcclxuXHJcblxyXG4gICAgLy9hbGVydChpZF9vYmplY3QpO1xyXG4gICAgdmFyIGdsbD0kKCdkaXZbdHlwZV9ibG9jaz1cIicrbnVtYmVyX2Jsb2NrKydcIl0nKS5wYXJlbnRzKCcuanMtaW1hZ2UtZ2wnKTtcclxuXHJcbiAgICAvL9C+0L/RgNC10LTQtdC70Y/QtdC8INGB0LrQvtC70YzQutC+INC40YUg0YPQttC1INC60LDRgNGC0LjQvdC+0Log0LIg0YHQv9C40YHQutC1XHJcbiAgICB2YXIgbnVtYmVyX2xpID0gKGdsbC5maW5kKCcubGktaW1hZ2UnKS5sZW5ndGgrMSk7XHJcblxyXG4gICAgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICBpZiAoZmlsZSkge1xyXG52YXIgc2l6ZV9ibHU9Jyc7XHJcbiAgICAgICBpZihnbGwuZmluZCgnLmxpc3QtaW1hZ2UtaWNvbnMnKS5sZW5ndGghPTApXHJcbiAgICAgICB7XHJcbiAgICAgICAgICAgc2l6ZV9ibHU9JzxzcGFuIGNsYXNzPVwidHlwZS1pbWdcIj48L3NwYW4+JztcclxuICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGdsbC5maW5kKCcubGlzdC1pbWFnZScpLmFwcGVuZCgnPGRpdiBudW1iZXJfbGk9XCInK251bWJlcl9saSsnXCIgY2xhc3M9XCJsaS1pbWFnZVwiPjxzcGFuIGNsYXNzPVwibmFtZS1pbWdcIj48YT4nK3RoaXMuZmlsZXNbMF0ubmFtZSsnPC9hPjwvc3Bhbj4nK3NpemVfYmx1Kyc8c3BhbiBjbGFzcz1cImRlbC1pbWcganMtZGVsbC1pbWFnZVwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInNpemUtaW1nXCI+JysodGhpcy5maWxlc1swXS5zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMikrJyDQnNCRPC9zcGFuPjxkaXYgY2xhc3M9XCJwcm9ncmVzcy1pbWdcIj48ZGl2IGNsYXNzPVwicC1pbWdcIiBzdHlsZT1cIndpZHRoOiAwJTtcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgZ2xsLmZpbmQoJy5saXN0LWltYWdlJykuc2hvdygpO1xyXG5cclxuICAgICAgICBnbGwuZmluZCgnLmpzLXVwbG9hZC1maWxlJykuaGlkZSgpLmFkZENsYXNzKCdlc2hlLWxvYWQtZmlsZScpOyAgLy/RgdC/0YDRj9GC0Ywg0LrQvdC+0L/QutGDINCy0YvQsdGA0LDRgtGMINGE0LDQudC7INC/0L7QutCwINCz0YDRg9C30LjRgtGB0Y9cclxuXHJcbiAgICAgICAgLy/Qv9C+0LrQsNC30YvQstCw0LXQvCDQt9Cw0LPRgNGD0LfRh9C40Log0LTQu9GPINGN0YLQvtC5INC60LDRgNGC0LjQvdC60LhcclxuICAgICAgICBnbGwuZmluZCgnW251bWJlcl9saT0nK251bWJlcl9saSsnXSAucC1pbWcnKS5zaG93KCk7XHJcblxyXG5cclxuICAgICAgICB1cGxvYWRTKGZpbGUsdHlwZSxpZF9vYmplY3QsbnVtYmVyX2xpLG51bWJlcl9ibG9jayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8v0LfQsNCz0YDRg9C30LrQsCDRhNCw0LnQu9C+0LIgLVx00YPQtNCw0LvQuNGC0Ywg0LfQsNCz0YDRg9C20LXQvdC90YvQuSDRhNCw0LnQuyDQutGA0LXRgdGC0LjQulxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gRGVsbEltYWdlQmxvY2soKVxyXG57XHJcbiAgICB2YXIgbGk9JCh0aGlzKS5wYXJlbnRzKCcubGktaW1hZ2UnKTtcclxuICAgIHZhciBsaXN0PSQodGhpcykucGFyZW50cygnLmxpc3QtaW1hZ2UnKTtcclxuICAgIERlbGxGaWxlKCQodGhpcykuYXR0cignaWQnKSk7XHJcbiAgICAvL9GD0LTQsNC70LjRgtGMINC90LDQt9Cy0LDQvdC40LUg0YTQsNC50LvQsCDQuNC3IGlucHV0XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy1pbWFnZS1nbCcpLmZpbmQoJ2lucHV0JykudmFsKERlbGxWYWxTdHJpbmcoJ2RlbGwnLCcsJywkKHRoaXMpLnBhcmVudHMoJy5qcy1pbWFnZS1nbCcpLmZpbmQoJ2lucHV0JykudmFsKCksJCh0aGlzKS5hdHRyKCdpZCcpKSk7XHJcblxyXG5cclxuICAgIGxpLnNsaWRlVXAoXCJzbG93XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgIGlmIChsaXN0LmZpbmQoJy5saS1pbWFnZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGxpc3Quc2xpZGVVcChcInNsb3dcIik7XHJcbiAgICAgICAgICAgIGxpc3QucGFyZW50cygnLmpzLWltYWdlLWdsJykuZmluZCgnLmpzLXVwbG9hZC1maWxlJykucmVtb3ZlQ2xhc3MoJ2VzaGUtbG9hZC1maWxlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbnVtYmVyX2xpID0gMTtcclxuICAgICAgICBsaXN0LmZpbmQoJy5saS1pbWFnZScpLmVhY2goZnVuY3Rpb24gKGksIGVsZW0pIHtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cignbnVtYmVyX2xpJywgbnVtYmVyX2xpKTtcclxuICAgICAgICAgICAgbnVtYmVyX2xpKys7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG59XHJcblxyXG4vL9C30LDQs9GA0YPQt9C60LAg0YTQsNC50LvQvtCyIC1cdNC/0YDQvtGG0LXRgdGBINC30LDQs9GA0YPQt9C60Lgg0YTQsNC50LvQsCDQvdCwINGB0LXRgNCy0LXRgFxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gdXBsb2FkUyhmaWxlLHR5cGUsaWRfb2JqZWN0LG51bWJlcl9saSxudW1iZXJfYmxvY2spIHtcclxuICAgIHZhciBnbGw9JCgnZGl2W3R5cGVfYmxvY2s9JytudW1iZXJfYmxvY2srJ10nKS5wYXJlbnRzKCcuanMtaW1hZ2UtZ2wnKTtcclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC80L7QttC90L4g0L7QsdGK0LXQtNC40L3QuNGC0Ywg0LIg0L7QtNC40L0sXHJcbiAgICAvLyDQtdGB0LvQuCBzdGF0dXMgPT0gMjAwLCDRgtC+INGN0YLQviDRg9GB0L/QtdGFLCDQuNC90LDRh9C1INC+0YjQuNCx0LrQsFxyXG4gICAgeGhyLm9ubG9hZCA9IHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9hbGVydCh0aGlzLnN0YXR1cyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIGdsbC5maW5kKCcuanMtdXBsb2FkLWZpbGUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGdsbC5maW5kKCdbbnVtYmVyX2xpPScrbnVtYmVyX2xpKyddIC5wLWltZycpLndpZHRoKDApLmhpZGUoKTtcclxuICAgICAgICAgICAgZ2xsLmZpbmQoJ1tudW1iZXJfbGk9JytudW1iZXJfbGkrJ10nKS5hZGRDbGFzcygneWVzLWxvYWQnKTtcclxuLy9hbGVydChcIiEhIVwiKTtcclxuICAgICAgICAgICAgYWxlcnRfbWVzc2FnZSgnb2snLCfQpNCw0LnQuyDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcbiAgICAgICAgICAgIC8v0L7RgdGC0LDQu9C+0YHRjCDQtNC+0LHQsNCy0LjRgtGMINCyIGlucHV0INC30LDQs9GA0YPQttC10L3QvdGL0LkgaWQg0YTQsNC50LvQsFxyXG5cclxuICAgICAgICAgICAgaWYodHlwZT09MTQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8v0LfQsNCz0YDRg9C30LrQsCDQvtGA0LTQtdGA0L7QsiDQsiDQuNGB0L/QvtC70L3QuNGC0LXQu9GP0YVcclxuICAgICAgICAgICAgICAgIC8vYWxlcnRfbWVzc2FnZSgnb2snLCfQutCw0YHRgdCwJyk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVjYXNoKGlkX29iamVjdCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcj1KU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgLy9hbGVydF9tZXNzYWdlKCdvaycsci50eXBlKTtcclxuICAgICAgICAgICAgZ2xsLmZpbmQoJ1tudW1iZXJfbGk9JytudW1iZXJfbGkrJ10gLmRlbC1pbWcnKS5hdHRyKCdpZCcsci5lY2hvKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGdsbC5maW5kKCdbbnVtYmVyX2xpPScrbnVtYmVyX2xpKyddIC50eXBlLWltZycpLmxlbmd0aCE9MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2xsLmZpbmQoJ1tudW1iZXJfbGk9JytudW1iZXJfbGkrJ10gLnR5cGUtaW1nJykuZW1wdHkoKS5hcHBlbmQoci50eXBlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2xsLmZpbmQoJ1tudW1iZXJfbGk9JytudW1iZXJfbGkrJ10gLm5hbWUtaW1nIGEnKS5hdHRyKCdocmVmJyxyLmxpbmspO1xyXG5cclxuICAgICAgICAgICAgbmFtZV9zcWxfaW1hZ2U9ci5lY2hvOyAgLy9pZCDRhNC+0YLQutC4INC60L7RgtC+0YDRg9GOINC30LDQs9GA0YPQt9C40LvQuFxyXG5cclxuICAgICAgICAgICAgdmFyIGlucHU9Z2xsLmZpbmQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoaW5wdS52YWwoKSk7XHJcbiAgICAgICAgICAgIGlmKGlucHUudmFsKCk9PScnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1LnZhbChuYW1lX3NxbF9pbWFnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1LnZhbChpbnB1LnZhbCgpKycsJytuYW1lX3NxbF9pbWFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvL1VwZGF0ZUltYWdlU3VwcGx5KGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGdsbC5maW5kKCcuanMtdXBsb2FkLWZpbGUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGdsbC5maW5kKCdbbnVtYmVyX2xpPScrbnVtYmVyX2xpKyddIC5wLWltZycpLndpZHRoKDApLmhpZGUoKTtcclxuICAgICAgICAgICAgZ2xsLmZpbmQoJ1tudW1iZXJfbGk9JytudW1iZXJfbGkrJ10nKS5hZGRDbGFzcygnbm8tbG9hZCcpO1xyXG4gICAgICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Ck0LDQudC7INC90LUg0LfQsNCz0YDRg9C20LXQvS4g0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YInKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBnbGwuZmluZCgnW251bWJlcl9saT0nICsgbnVtYmVyX2xpICsgJ10nKS5zbGlkZVVwKFwic2xvd1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3Q9JCh0aGlzKS5wYXJlbnRzKCcubGlzdC1pbWFnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3QuZmluZCgnLmxpLWltYWdlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5zbGlkZVVwKFwic2xvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xsLmZpbmQoJy5qcy11cGxvYWQtZmlsZScpLnJlbW92ZUNsYXNzKCdlc2hlLWxvYWQtZmlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQt9Cw0LrQsNGH0LrQuFxyXG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICB2YXIgd2lkdGhzPU1hdGgucm91bmQoKGV2ZW50LmxvYWRlZCoxMDApL2V2ZW50LnRvdGFsKTtcclxuICAgICAgICBnbGwuZmluZCgnW251bWJlcl9saT0nK251bWJlcl9saSsnXSAucC1pbWcnKS53aWR0aCh3aWR0aHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcIkFqYXgvZmlsZS91cGxvYWQucGhwXCIsIHRydWUpO1xyXG4gICAgLy94aHIuc2VuZChmaWxlKTtcclxuXHJcbiAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcInRoZWZpbGVcIiwgZmlsZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJ0eXBlXCIsdHlwZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJvYmplY3RcIixpZF9vYmplY3QpO1xyXG4gICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDRhNCw0LnQuyDQvdCwINGB0LXRgNCy0LXRgNC1XHJcbi8vICB8XHJcbi8vIFxcL1xyXG5mdW5jdGlvbiBEZWxsRmlsZShpZClcclxue1xyXG4gICAgaWYoaWQhPScnKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRhID0naWQ9JytpZDtcclxuXHJcbiAgICAgICAgQWpheENsaWVudCgnZmlsZScsJ2RlbGwnLCdHRVQnLGRhdGEsJ0FmdGVyWmVybycsMCwwKTtcclxuICAgIH1cclxufVxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0L/Rg9GB0YLRi9GI0LrQsFxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gQWZ0ZXJaZXJvKGRhdGEsdXBkYXRlKXt9XHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0Lgg0YPQtNCw0LvQtdC90LjQtSDQuNC3INGB0YLRgNC+0LrQuCDQt9C90LDRh9C10L3QuNC1INGBINC+0L/RgNC10LTQtdC70LXQvdC90YvQvCDRgNCw0LfQtNC10LvQuNGC0LXQu9C10LxcclxuLy8gIHxcclxuLy8gXFwvXHJcbi8vRGVsbFZhbFN0cmluZygnZGVsbCcsJywnLCcyLDUsOCcsNSkgLSA+ICDQv9C+0LvRg9GH0LjQvCDRgdGC0YDQvtC60YMgMiw4XHJcbmZ1bmN0aW9uIERlbGxWYWxTdHJpbmcoY29tbWFuZCxzZXBhcmF0b3Isc3RyaW5nLHZhbClcclxue1xyXG4vL2RlbGwgLSBhZGRcclxuICAgIHZhciB0ZXh0ID0gJyc7XHJcbiAgICBpZiAoY29tbWFuZCA9PSAnZGVsbCcpIHtcclxuXHJcbiAgICAgICAgdmFyIGNjID0gc3RyaW5nLnNwbGl0KHNlcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIGxwID0gMDtcclxuICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGNjLmxlbmd0aDsgdCsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjY1t0XSAhPSB2YWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjY1t0XSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChscCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBjY1t0XTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dCArIHNlcGFyYXRvciArIGNjW3RdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBscCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8v0LTQvtCx0LDQstC70LXQvdC40LVcclxuICAgICAgICBpZiAoalF1ZXJ5LnRyaW0oc3RyaW5nKSAhPSAnJykge1xyXG4gICAgICAgICAgICB0ZXh0ID0gc3RyaW5nICsgc2VwYXJhdG9yICsgdmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHQgPSB2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dDtcclxufVxyXG4iLCIvLyBKYXZhU2NyaXB0IERvY3VtZW50XHJcbiQoZnVuY3Rpb24gKCl7XHJcblxyXG4vL9C00L7QsdCw0LLQuNGC0Ywg0LPRgNGD0L/Qv9GDINCyINGE0L7RgNC80LUg0LrQvdC+0L/QutCwICtcdFxyXG4kKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWFkZC1ncm91cCcsQWRkR3JvdXApO1x0XHJcbi8v0YPQtNCw0LvQuNGC0Ywg0LPRgNGD0L/Qv9GDINCyINGE0L7RgNC80LUg0LrQvdC+0L/QutCwIC1cdFxyXG4kKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWRlbGwtZ3JvdXAnLERlbGxHcm91cCk7XHRcclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG4vL9GD0LTQsNC70LjRgtGMINCz0YDRg9C/0L/RgyDQsiDRhNC+0YDQvNC1INC60L3QvtC/0LrQsCAtXHRcclxuLy8gIHxcclxuLy8gXFwvXHJcbmZ1bmN0aW9uIERlbGxHcm91cCgpXHJcbntcclxuXHR2YXIgZ3JvdXA9JCh0aGlzKS5wYXJlbnRzKCcuanMtZ3JvdXAnKTtcclxuXHRcclxuXHRncm91cC5zbGlkZVVwKFwic2xvd1wiLGZ1bmN0aW9uICgpIHtncm91cC5yZW1vdmUoKTsgIH0pO1xyXG5cdFxyXG59XHJcblxyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINCz0YDRg9C/0L/RgyDQsiDRhNC+0YDQvNC1INC60L3QvtC/0LrQsCArXHRcclxuLy8gIHxcclxuLy8gXFwvXHJcbmZ1bmN0aW9uIEFkZEdyb3VwKClcclxue1xyXG5cdC8vYWxlcnQoXCIhIVwiKTtcclxuXHR2YXIgZ3JvdXA9JCh0aGlzKS5wYXJlbnRzKCcuanMtZ3JvdXAnKTtcclxuXHR2YXIgY2xhc3NfZ3JvdXA9Jyc7XHJcblx0aWYoZ3JvdXAuaXMoJy5ncm91cC1yaWdodCcpKVxyXG5cdHtcclxuXHRcdFx0Y2xhc3NfZ3JvdXA9J2dyb3VwLXJpZ2h0JztcclxuXHR9XHJcblx0XHJcblx0dmFyIGdyb3VwX2h0bWw9Z3JvdXAuaHRtbCgpO1xyXG5cdFxyXG5cdGdyb3VwLmFmdGVyKCc8ZGl2IGNsYXNzPVwianMtZ3JvdXAgJytjbGFzc19ncm91cCsnIGNvbnRhY3QtZ3JvdXAgbGluZS1ncm91cFwiPicrZ3JvdXBfaHRtbCsnPC9kaXY+Jyk7XHJcblx0XHJcblx0dmFyIG5leHRfZ3JvdXA9Z3JvdXAubmV4dCgpO1xyXG5cdFxyXG5cdG5leHRfZ3JvdXAuZmluZCgnLmFjdGl2ZV9pbl8yMDE4JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV9pbl8yMDE4Jyk7XHJcblx0bmV4dF9ncm91cC5maW5kKCcucmVxdWlyZWRfaW5fMjAxOCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHJcblx0XHJcblx0XHJcblx0aWYobmV4dF9ncm91cC5maW5kKCcuanMtZGVsbC1ncm91cCcpLmxlbmd0aD09MClcclxuXHRcdHtcclxuXHRuZXh0X2dyb3VwLmZpbmQoJy5qcy1hZGQtZ3JvdXAnKS5hZnRlcignPGRpdiBkYXRhLXRvb2x0aXA9XCLQo9C00LDQu9C40YLRjFwiIGNsYXNzPVwiZGVsbC1ncm91cCBqcy1kZWxsLWdyb3VwXCI+PGRpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHRcdH1cclxuXHRUb29sVGlwKCk7XHJcblx0bmV4dF9ncm91cC5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XHJcblx0bmV4dF9ncm91cC5maW5kKCd0ZXh0YXJlYScpLnZhbCgnJyk7XHJcblx0XHJcblx0Ly/Rg9C00LDQu9GP0LXQvCDQu9C40YjQvdC10LUg0LjQtyB0ZXh0YXJlYSDRgSByZXNpemUg0Lgg0LDQutGC0LjQstC40YDRg9C10Lwg0Log0L3QvtCy0YvQvCDQv9C+0LvRj9C8XHJcblx0bmV4dF9ncm91cC5maW5kKCcuanMtcmVzaXplLWJsb2NrJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHRcdFxyXG5cdFx0aWYoJCh0aGlzKS5maW5kKCd0ZXh0YXJlYScpLmxlbmd0aD09MilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQodGhpcykuZmluZCgndGV4dGFyZWEnKS5maXJzdCgpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdCQodGhpcykuZmluZCgndGV4dGFyZWEnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdFx0XHRcdCQodGhpcykuZmluZCgndGV4dGFyZWEnKS5hdXRvUmVzaXplKHtleHRyYVNwYWNlIDogMTB9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHR9KTtcclxuXHRcclxuXHRcclxuXHRuZXh0X2dyb3VwLmZpbmQoJy5saXN0XzIwMTgnKS5yZW1vdmVDbGFzcygnYWN0aXZlX2luXzIwMTgnKS5yZW1vdmVDbGFzcygnYWN0aXZlMV9pbl8yMDE4Jyk7XHJcblx0bmV4dF9ncm91cC5maW5kKCcubGlzdF8yMDE4IGlucHV0JykudmFsKCcnKTtcclxuXHRuZXh0X2dyb3VwLmZpbmQoJy5saXN0XzIwMTggLnNlbF9hY3RpdmUnKS5yZW1vdmVDbGFzcygnc2VsX2FjdGl2ZScpO1xyXG5cdFxyXG5cdG5leHRfZ3JvdXAuZmluZCgnLnNsY3QnKS5hdHRyKCdkYXRhX3NyYycsJycpLmVtcHR5KCk7XHJcblx0XHJcblx0Ly9qUXVlcnkuc2Nyb2xsVG8obmV4dF9ncm91cCwgMTAwMCwge29mZnNldDotNzB9KTtcclxuXHRcclxuXHRaaW5kZXgoKTtcclxuXHRTZWxlY3RVcGRhdGUoKTtcclxufS8vIEphdmFTY3JpcHQgRG9jdW1lbnRcclxuXHJcbi8v0L7QsdC90L7QstC40YLRjCDRgdC10LvQtdC60YLRiyDQv9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgg0L3QvtCy0YvRhVxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gU2VsZWN0VXBkYXRlKClcclxue1xyXG5cdCQoXCIuc2xjdFwiKS51bmJpbmQoJ2NsaWNrLnN5cycpO1xyXG4gICAgJChcIi5zbGN0XCIpLmJpbmQoJ2NsaWNrLnN5cycsIHNsY3RjbGljayk7XHJcblx0JChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcblx0JChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcbn1cclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXphbWUtdG91cnMnLGZvcm1fZG9jX3JhdGUpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1vay1yYXRlLWNoYXQtbGVmdCcsb2tfcmF0ZV9mb3JtX2NoYXRfbGVmdCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZm9ybV9kb2NfcmF0ZSgpIHtcclxuXHJcbiAgICBpZiAoISQodGhpcykucGFyZW50cygnLnBsdXNfY29tbV92b3QnKS5maW5kKCcuZm9ybS1yYXRlLW9rMScpLmlzKFwiLnNob3ctZm9ybS1yYXRlMVwiKSkge1xyXG4gICAgICAgIC8vYWxlcnQoXCIhIVwiKTtcclxuXHJcblxyXG4gICAgICAgIGlmICgkKHRoaXMpLnBhcmVudHMoJy5wbHVzX2NvbW1fdm90JykuZmluZCgnLmZvcm0tcmF0ZS1vazEnKS5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAkKCcuZm9ybS1yYXRlLW9rMScpLnJlbW92ZUNsYXNzKCdzaG93LWZvcm0tcmF0ZTEnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucGx1c19jb21tX3ZvdCcpLmZpbmQoJy5mb3JtLXJhdGUtb2sxJykuYWRkQ2xhc3MoJ3Nob3ctZm9ybS1yYXRlMScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wbHVzX2NvbW1fdm90JykuZmluZCgnLmZvcm0tcmF0ZS1vazEgLnR5eW8xJykuZm9jdXMoKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9pbnB1dF8yMDE4KCk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog0YLRg9GA0YsgLSDQvtC6INC/0L7RgdC70LUg0LLQstC+0LTQsCDQktC/0LXRh9Cw0YLQu9C10L3QuNGPINC/0L4g0YLRg9GA0YNcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIG9rX3JhdGVfZm9ybV9jaGF0X2xlZnQoZXZlbnQpXHJcbntcclxuICAgIC8v0L/RgNC+0LLQtdGA0Y/QtdC8INGH0YLQviDQstCy0LXQtNC10L0g0LrRg9GA0YFcclxuICAgIHZhciByYXRlX2I9ICQodGhpcykucGFyZW50cygnLmZvcm0tcmF0ZS1vazEnKS5maW5kKCcudHl5bzEnKS52YWwoKTtcclxuICAgIC8vbGVydChyYXRlX2IpO1xyXG4gICAgaWYoalF1ZXJ5LnRyaW0ocmF0ZV9iKSE9JycpXHJcbiAgICB7XHJcbiAgICAgICAgLy/QktGB0LUg0L7QuiDRgNCw0YHRgdGH0LjRgtGL0LLQsNC10Lwg0Lgg0YHQutGA0YvQstCw0LXQvCDRjdGC0YMg0YTQvtGA0LzRg1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmZvcm0tcmF0ZS1vazEnKS5yZW1vdmVDbGFzcygnc2hvdy1mb3JtLXJhdGUxJyk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcItCe0LHRgNCw0LHQvtGC0YfQuNC6INC/0LDRgNCw0LPRgNCw0YTQsC5cIik7XHJcblxyXG4gICAgICAgICQodGhpcykucGFyZW50cygndGQnKS5maW5kKCcuemFtZV9raycpLmFkZENsYXNzKCd5ZXMtbm90ZScpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RkJykuZmluZCgnLmNvbW11bicpLmVtcHR5KCkuYXBwZW5kKHJhdGVfYik7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0ZCcpLmZpbmQoJy5jb21tdW5faGlkZScpLnZhbCgxKTtcclxuICAgICAgICAvL9GB0L7Qt9C00LDRgtGMIHBvc3QgZm9ybXVcclxuXHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5mb3JtLXJhdGUtb2sxJykucmVtb3ZlQ2xhc3MoJ3Nob3ctZm9ybS1yYXRlMScpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCLQntCx0YDQsNCx0L7RgtGH0LjQuiDQv9Cw0YDQsNCz0YDQsNGE0LAuXCIpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RkJykuZmluZCgnLnphbWVfa2snKS5yZW1vdmVDbGFzcygneWVzLW5vdGUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RkJykuZmluZCgnLmNvbW11bicpLmVtcHR5KCk7XHJcblxyXG4gICAgICAgICQodGhpcykucGFyZW50cygndGQnKS5maW5kKCcuY29tbXVuX2hpZGUnKS52YWwoMCk7XHJcblxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59IiwiJChmdW5jdGlvbiAoKXtcclxuXHJcbiAgICAvL9GE0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40LUg0YLRg9GA0LAgLSDQstGL0LHQvtGAINC/0LDRgdC/0L7RgNGCINC60LDQutC+0LlcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtcGFzc3dvcmQtZG9jcycscGFzc3dvcmRfZG9jcyk7XHJcbiAgICAvL9C90L7QstGL0Lkg0YHRgtCw0YDRi9C5INC/0L7RgdGC0LDQstGJ0LjQulxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtYWRkLWRvY3MnLGFkZF9kb2NzXzIwMjEpO1xyXG4gICAgLy/QvdCw0LHQvtGAINGC0LXQutGB0YLQsCDQsiDQv9C+0LjRgdC60LVcclxuXHJcblxyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWFkZC1kb2NzLXNhdmUnLHNhdmVfZG9jcyk7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtZWRpdC1kb2NzLW1vcmUnLGVkaXRfbW9yZV9kb2NzKTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnRhYnNfMDA3VScse2tleTogXCIwMDdVXCJ9LHRhYnNfZG9jcyk7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtcmVqZWN0LWRvY3MnLFJlamVjdEZvRCk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWZvcndhcmQtZG9jcycsRm9yd2FyZEZvRCk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1zaWduLWEyJyxTaW5nRm9EKTtcclxuXHJcblxyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiBhZGRfZG9jc18yMDIxKClcclxue1xyXG4gICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX2RvY3NfMjAyMS5waHAnLFxyXG4gICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuLy/QvtGC0LrQu9C+0L3QuNGC0Ywg0LfQsNGP0LLQutGDXHJcbmZ1bmN0aW9uIFJlamVjdEZvRCgpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIHByZSA9ICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyk7XHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfZG9jc19yZWplY3QucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8v0L/QtdGA0LXRgdC70LDRgtGMINC30LDRj9Cy0LrRg1xyXG5mdW5jdGlvbiBGb3J3YXJkRm9EKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF9kb2NzX2ZvcndhcmQucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gU2luZ0ZvRCgpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIGZvID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoIWZvLmhhc0NsYXNzKFwiZ3JheS1iYlwiKSkge1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICAgICAgaWYgKGZvLmZpbmQoJ2lucHV0JykudmFsKCkgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDQvtC60L3QviDQtNC70Y8g0LLQv9C40YHQsNC90LjQtSDQt9Cw0LzQtdGH0LDQvdC40Y9cclxuICAgICAgICAgICAgICAgIHZhciBwcmUgPSAkKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX2RvY3NfcmVtYXJrLnBocD9pZD0nICsgcHJlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v0J7RgtC/0YDQsNCy0LjRgtGMINC/0YDRj9C80YPRjiDRhNC+0YDQvNGDINC90LAg0YHQvtCz0LvQsNGB0L7QstCw0L3QuNC1XHJcbiAgICAgICAgICAgICAgICAkKCcjanMtZm9ybS1uZXh0LXNpZ24nKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vL9GC0LDQsdGB0Ysg0LIg0L7QsdGA0LDRidC10L3QuNGP0YVcclxudmFyIHRhYnNfZG9jcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAvL2V2ZW50LmRhdGEua2V5XHJcblxyXG4gICAgdmFyIHVvbz0kKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuXHJcblxyXG4gICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5hZGRDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggJCh0aGlzKS5pcyhcIi5hY3RpdmVcIikgKVxyXG4gICAge1xyXG4gICAgICAgIC8v0YPQttC1INCw0LrRgtC40LLQvdCw0Y8g0LLQutC70LDQtNC60LBcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy9hbGVydChldmVudC5kYXRhLmtleSk7XHJcbiAgICAgICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX3NtYWxsXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTsgbGVmdDogY2FsYyg1MCUgLSAzMHB4KTsgXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbCBiX2xvYWRpbmdfY2lyY2xlX2RlbGF5ZWRfc21hbGxcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5uZXh0KCkuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmZvcm0nK2V2ZW50LmRhdGEua2V5KycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkgKyAnW2lkPScgKyB1b28gKyAnXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vdmFyIGtleV89JzAwMlUnO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSAndXJsPScgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArICcmaWRfdGFicz0nICsgJCh0aGlzKS5hdHRyKFwiaWRcIikgK1xyXG4gICAgICAgICAgICAgICAgJyZpZD0nICsgJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICBBamF4Q2xpZW50KCdkb2NzJywndGFic19pbmZvJywnR0VUJyxkYXRhLCdBZnRlclRhYnNJbmZvZG9jcycsJCh0aGlzKS5hdHRyKFwiaWRcIikrJywnKyQodGhpcykucGFyZW50cygnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKSwwLDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy/Qv9C+0YHRgtGE0YPQvdC60YbQuNGPINCy0LrQu9Cw0LTQutC4INCyINC+0LHRgNCw0YnQtdC90LjRj9GFXHJcbmZ1bmN0aW9uIEFmdGVyVGFic0luZm9kb2NzKGRhdGEsdXBkYXRlKVxyXG57XHJcbiAgICBpZih1cGRhdGUhPW51bGwpeyBpZiAodHlwZW9mKHVwZGF0ZSkgPT0gXCJzdHJpbmdcIikgeyB1cGRhdGUgPSB1cGRhdGUuc3BsaXQoJywnKTsgfSBlbHNlIHsgdXBkYXRlWzBdPXVwZGF0ZTsgfSB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWxbaWRfcHJlPScrdXBkYXRlWzFdKyddJykuZmluZCgnLnB4X2JnX3RyaXBzJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcblxyXG4gICAgICAgIC8vJCgnLmNoYV8xJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLndhbGxldF9jaGVja2JveCcsd2FsbGV0X2NoZWNrYm94KTtcclxuXHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLmpzLXRhYnNfZG9jYycpLmhpZGUoKTtcclxuICAgICAgICAvLyQoJy5mb3JtJyt1cGRhdGVbMV0rJyAuanMtdGFic18nK3VwZGF0ZVswXSkuc2hvdygpO1xyXG5cclxuICAgICAgICBOdW1iZXJCbG9ja0ZpbGUoKTtcclxuICAgICAgICBUb29sVGlwKCk7XHJcbiAgICAgICAgaWYoKHVwZGF0ZVswXT09Myl8fCh1cGRhdGVbMF09PTQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIi5zbGN0XCIpLnVuYmluZCgnY2xpY2suc3lzJyk7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG4gICAgICAgICAgICAkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS51bmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNheSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXkpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0X21vcmVfZG9jcygpXHJcbntcclxuICAgIHZhciBvcHBmPSQodGhpcykucGFyZW50cygnW2lkX3ByZV0nKS5hdHRyKFwiaWRfcHJlXCIpO1xyXG5cclxuICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2VkaXRfZG9jc19tb3JlLnBocD9pZD0nICsgb3BwZixcclxuICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy/RgdC+0YXRgNCw0L3QuNGC0Ywg0YHRh9C10YIg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQutC+0LvQuNGH0LXRgdGC0LLQsFxyXG5mdW5jdGlvbiBzYXZlX2RvY3MoKVxyXG57XHJcbiAgICB2YXIgZXJyID0gMDtcclxuICAgICQoJy5qcy1zYXZlLWZvcm0tZG9jcycpLmZpbmQoJy5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYoKCQodGhpcykudmFsKCkgPT0gJycpfHwoJCh0aGlzKS52YWwoKSA9PSAnMCcpKSB7ICQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICBlcnIrKztcclxuICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO31cclxuICAgIH0pO1xyXG5cclxuICAgIGlmKGVycj09MCkge1xyXG5cclxuICAgICAgICAkKCcuanMtc2F2ZS1mb3JtLWRvY3MnKS5zdWJtaXQoKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vL9Cy0YvQsdC+0YAg0LrQsNC60L7QuSDQv9Cw0YHQv9C+0YDRglxyXG5mdW5jdGlvbiBwYXNzd29yZF9kb2NzKClcclxue1xyXG4gICAgdmFyIGNiX2g9JCh0aGlzKS5wYXJlbnRzKCcucGFzc3dvcmRfZG9jcycpLmZpbmQoJ2lucHV0Jyk7XHJcbiAgICBpZihjYl9oLnZhbCgpIT0kKHRoaXMpLmF0dHIoJ2lkJykpXHJcbiAgICB7XHJcbiAgICAgICAgY2JfaC52YWwoJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucGFzc3dvcmRfZG9jcycpLmZpbmQoJy5jaG9pY2UtcmFkaW8gaScpLnJlbW92ZUNsYXNzKCdhY3RpdmVfdGFza19jYicpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnBhc3N3b3JkX2RvY3MnKS5maW5kKCcuaW5wdXQtY2hvaWNlLWNsaWNrLXBhc3MnKS5yZW1vdmVDbGFzcygnYWN0aXZlX3Bhc3MnKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcuY2hvaWNlLXJhZGlvIGknKS5hZGRDbGFzcygnYWN0aXZlX3Rhc2tfY2InKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmVfcGFzcycpO1xyXG4gICAgICAgIHZpZXdfdHlwZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1hZGRfbmFyJyxzYXZlX25hcnlhZCk7XHJcbiAgIC8vICQoXCIuYWRkX25hclwiKS5iaW5kKCdjbGljaycsIHNhdmVfbmFyeWFkKTtcclxufSk7XHJcblxyXG5cclxuXHJcbi8v0YHQvtGF0YDQsNC90LjRgtGMINC90LDRgNGP0LRcclxuZnVuY3Rpb24gc2F2ZV9uYXJ5YWQoKVxyXG57XHJcbiAgICB2YXIgZXJyb3I9MDtcclxuXHJcbiAgICAkKCcubWVzc2E6dmlzaWJsZScpLmZpbmQoJy50ZXh0X2ZpbmVyeV9tZXNzYWdlXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgJCgnLm1lc3NhOnZpc2libGUnKS5maW5kKCcudGV4dF9maW5lcnlfbWVzc2FnZV8nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cclxuICAgICAgICB2YXIgdGV4dD0kKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIGlmKHRleHQ9PScnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy53b3JrX19zJykuZmluZCgnLnByaWNlX2ZpbmVyeV8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICQoJy53b3JrX19zJykuZmluZCgnLmNvdW50X2ZpbmVyeV8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICQoJy5tYXQnKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgJCgnLm1hdCcpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblxyXG4gICAgJCgnLm1lc3NhOnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgIHZhciBpZF93b3JrPSQodGhpcykuYXR0cignaWRfbWVzJyk7XHJcbiAgICAgICAgLy/Qv9GA0L7QstC10YDQuNC8INGH0YLQviDQstGB0LUg0L/QvtC70Y8g0LTQu9GPINC60LDQttC00L7QuSDRgdC70YPQttC10LHQvdC+0Lkg0LfQsNC/0LjRgdC60Lgg0LfQsNC/0L7Qu9C90LXQvdGLXHJcblxyXG5cclxuICAgICAgICAvL9C+0L/RgNC10LTQtdC70LjQvCDQvtGC0L3QvtGB0YLQuNC80YHRjyDQt9Cw0L/QuNGB0LrQsCDQuiDRgNCw0LHQvtGC0LUg0LjQu9C4INC80LDRgtC10YDQuNCw0LvRg1xyXG4gICAgICAgIHZhciBhYSA9IGlkX3dvcmsuc3BsaXQoJ18nKTtcclxuICAgICAgICBpZihhYS5sZW5ndGg9PTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL9GN0YLQviDRgNCw0LHQvtGC0LBcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0LzQsNGC0LXRgNC40LDQu1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZF93b3JrPWFhWzBdO1xyXG5cclxuICAgICAgICB2YXIgY291bnQ9JCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfJykudmFsKCk7XHJcbiAgICAgICAgdmFyIHByaWNlPSQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5XycpLnZhbCgpO1xyXG4gICAgICAgICQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5XycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcuY291bnRfZmluZXJ5XycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgIGlmKChjb3VudD09MCl8fChjb3VudD09JycpfHwoISQuaXNOdW1lcmljKGNvdW50KSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV8nKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoKHByaWNlPT0wKXx8KHByaWNlPT0nJyl8fCghJC5pc051bWVyaWMocHJpY2UpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5XycpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICBlcnJvcj0xO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICQoJy5tYXRbcmVsX3c9JytpZF93b3JrKyddJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50PSQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHByaWNlPSQodGhpcykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgIC8vaWYoKGNvdW50PT0wKXx8KGNvdW50PT0nJyl8fCghJC5pc051bWVyaWMoY291bnQpKSlcclxuXHJcbiAgICAgICAgICAgIGlmKChjb3VudD09JycpfHwoISQuaXNOdW1lcmljKGNvdW50KSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgaWYoKHByaWNlPT0wKXx8KHByaWNlPT0nJyl8fCghJC5pc051bWVyaWMocHJpY2UpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmpzLWFkZC13b3JkZXItbWF0ZXJpYWwgLmdsb2FiMicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYoJCh0aGlzKS52YWwoKSA9PSAnJykgIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgIGVycm9yKys7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgIH0gZWxzZSB7JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTt9XHJcbiAgICB9KTtcclxuICAgIGlmKGVycm9yIT0wKVxyXG4gICAge1xyXG5cclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycpO1xyXG5cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJyNsYWxhbGFfYWRkX2Zvcm0nKS5zdWJtaXQoKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG4iLCJcclxuXHJcbi8v0YTRg9C90LrRhtC40Y8g0LfQsNC00LXRgNC20LrQuCDQv9GA0Lgg0L3QsNC/0LjRgdCw0L3QuNC4INC/0L7QuNGB0LrQsCDQsiDQv9C+0LvRj9GFXHJcblxyXG53aW5kb3cuc2VhcmNoX21pbiA9IDE7ICAvL9C80LjQvSDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdC40LzQstC+0LvQvtCyINC00LvRjyDQsdGL0YHRgtGA0L7Qs9C+INC/0L7QuNGB0LrQsFxyXG53aW5kb3cuc2VhcmNoX2RlbGV5PTgwMDtcdC8v0LfQsNC00LXRgNC20LrQsCDQvNC10LbQtNGDINCy0LLQvtC00LDQvNC4INGB0LjQvNCy0L7Qu9C+0LIgLSDQvdCw0YfQsNC70L4g0L/QvtC40YHQutCwXHJcbndpbmRvdy5zZWFyY2hfY2xhc3M9Jy5sb2xsX3NvcGx5JztcdC8v0LfQsNC00LXRgNC20LrQsCDQvNC10LbQtNGDINCy0LLQvtC00LDQvNC4INGB0LjQvNCy0L7Qu9C+0LIgLSDQvdCw0YfQsNC70L4g0L/QvtC40YHQutCwXHJcblxyXG52YXIgZGVsYXkxID0gKGZ1bmN0aW9uKHRoKXsgXHJcbiAgdmFyIHRpbWVyID0gMDtcclxuICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2ssIG1zKXtcclxuICAgIGNsZWFyVGltZW91dCAodGltZXIpO1xyXG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XHJcbiAgfTtcclxufSkoKTtcclxuXHJcblxyXG4vL9GC0LDQsdGB0Ysg0LIg0L7QsdGA0LDRidC10L3QuNGP0YVcclxudmFyIHRhYnNfYXBwID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHQvL2V2ZW50LmRhdGEua2V5XHJcblxyXG5cdHZhciB1b289JCh0aGlzKS5hdHRyKFwiaWRcIik7XHJcblxyXG5cclxuXHRpZih1b28hPTApIHtcclxuXHRcdCQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykuYWRkQ2xhc3MoJ2FjdGl2ZS10cmlwcy1tZW51Jyk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cclxuXHRcdCQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS10cmlwcy1tZW51Jyk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmhpZGUoKTtcclxuXHRcdCQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdH1cclxuXHJcblx0aWYgKCAkKHRoaXMpLmlzKFwiLmFjdGl2ZVwiKSApXHJcblx0e1xyXG5cdFx0Ly/Rg9C20LUg0LDQutGC0LjQstC90LDRjyDQstC60LvQsNC00LrQsFxyXG5cdFx0JCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuXHRcdCQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG5cdFx0JCh0aGlzKS5wYXJlbnRzKCcuanMtdGFicy1tZW51JykuZmluZCgnLnRhYnNfJyArIGV2ZW50LmRhdGEua2V5KS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0Ly9hbGVydChldmVudC5kYXRhLmtleSk7XHJcblx0XHRpZih1b28hPTApIHtcclxuXHRcdFx0JCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5uZXh0KCkuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyBsZWZ0OiBjYWxjKDUwJSAtIDMwcHgpOyBcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsIGJfbG9hZGluZ19jaXJjbGVfZGVsYXllZF9zbWFsbFwiPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG5cdFx0XHQkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5zbGlkZURvd24oXCJzbG93XCIpO1xyXG5cclxuXHRcdFx0LypcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZm9ybScrZXZlbnQuZGF0YS5rZXkrJyAucHhfYmcnKS5lbXB0eSgpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJfbG9hZGluZ19zbWFsbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbCBiX2xvYWRpbmdfY2lyY2xlX2RlbGF5ZWRfc21hbGxcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgKi9cclxuXHRcdFx0JCh0aGlzKS5wYXJlbnRzKCcuanMtdGFicy1tZW51JykuZmluZCgnLnRhYnNfJyArIGV2ZW50LmRhdGEua2V5KS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSArICdbaWQ9JyArIHVvbyArICddJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuXHRcdFx0Ly92YXIga2V5Xz0nMDAyVSc7XHJcblxyXG5cdFx0XHR2YXIgZGF0YSA9ICd1cmw9JyArIHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgJyZpZF90YWJzPScgKyAkKHRoaXMpLmF0dHIoXCJpZFwiKSArXHJcblx0XHRcdFx0JyZpZD0nICsgJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG5cdFx0XHQvL2FsZXJ0KGRhdGEpO1xyXG5cdFx0XHRBamF4Q2xpZW50KCdhcHAnLCd0YWJzX2luZm8nLCdHRVQnLGRhdGEsJ0FmdGVyVGFic0luZm9BcHAnLCQodGhpcykuYXR0cihcImlkXCIpKycsJyskKHRoaXMpLnBhcmVudHMoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyksMCwxKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gQWRkRG9wU1coKVxyXG57XHJcblxyXG5cdGlmICggJCh0aGlzKS5pcyhcIltmb3JdXCIpIClcclxuXHR7XHJcblx0XHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdFx0e1xyXG5cdFx0XHQkLmFyY3RpY21vZGFsKHtcclxuXHRcdFx0XHR0eXBlOiAnYWpheCcsXHJcblx0XHRcdFx0dXJsOiAnZm9ybXMvZm9ybV9hZGRfZG9wXzIwMjEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG5cdFx0XHRcdGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdFx0Ly/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHRcdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdEJvZHlTY3Jvb2woKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBmYWxzZTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkb3Bfc21ldGFfc2Nyb2xsKClcclxue1xyXG5cdHZhciBpZF9zb3BseT0kKHRoaXMpLnBhcmVudHMoJy5tYXRlcmlhbC1kb3AnKS5hdHRyKCdyZWxfZG9wJyk7XHJcblxyXG5cdGpRdWVyeS5zY3JvbGxUbygnLmJsb2NrX2lbcmVsPScraWRfc29wbHkrJ10nLCAxMDAwLCB7b2Zmc2V0Oi0xMjB9KTtcclxuXHJcblx0aWYoISQoJy5ibG9ja19pW3JlbD0nK2lkX3NvcGx5KyddJykuaXMoJy5hY3RpdmUnKSlcclxuXHR7XHJcblx0XHQkKCcuYmxvY2tfaVtyZWw9JytpZF9zb3BseSsnXScpLmZpbmQoJy5pX18nKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkb3Bfc21ldGFfc2Nyb2xsXzEoKVxyXG57XHJcblx0dmFyIGlkX3NvcGx5PSQodGhpcykuYXR0cigndWtyX2lkJyk7XHJcblx0dmFyIGJsb2Nra191a3I9JCgnLmpvcFtyZWxfaWQ9JytpZF9zb3BseSsnXScpLnBhcmVudHMoXCIuYmxvY2tfaVwiKTtcclxuXHRpZighYmxvY2trX3Vrci5pcygnLmFjdGl2ZScpKVxyXG5cdHtcclxuXHRcdGJsb2Nra191a3IuZmluZCgnLmlfXycpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblx0fVxyXG5cdGpRdWVyeS5zY3JvbGxUbygnLmpvcFtyZWxfaWQ9JytpZF9zb3BseSsnXScsIDEwMDAsIHtvZmZzZXQ6LTE0MH0pO1xyXG5cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcbi8vINCk0YPQvdC60YbQuNGPINGD0LTQsNC70LXQvdC40Y8g0L/RgNC+0LHQtdC70L7QslxyXG5mdW5jdGlvbiBjdHJpbShzdHIpXHJcbntcclxuXHRzdHIgPSBzdHIucmVwbGFjZSgvXFxzL2csICcnKTtcclxuXHRyZXR1cm4gc3RyO1xyXG59XHJcblxyXG5cclxuLy/RhNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INCy0LLQvtC00LAg0YLQvtC70YzQutC+INGH0LjRgdC10Lsg0Lgg0YEg0LfQsNC/0Y/RgtC+0LlcclxudmFyIHZhbGlkYXRlMTEgPSBmdW5jdGlvbigpIHtcclxuICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnJlcGxhY2UoL1teXFxkLl0qL2csICcnKS5yZXBsYWNlKC8oWy5dKVsuXSsvZywgJyQxJykucmVwbGFjZSgvXlteXFxkXSooXFxkKyhbLl1cXGR7MCw1fSk/KS4qJC9nLCAnJDEnKSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBVcGxvYWRJbnZvaWNlX29sZCgpXHJcbntcclxuXHR2YXIgaWRfdXBsb2FkPSQodGhpcykuYXR0cignaWRfdXBsb2FkJyk7XHJcblx0JCgnW25hbWU9bXlmaWxlcycraWRfdXBsb2FkKyddJykudHJpZ2dlcignY2xpY2snKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFVwbG9hZFJlcG9ydHNDaGFuZ2Vfb2xkKClcclxue1xyXG5cdHZhciBpZD0kKHRoaXMpLnBhcmVudHMoJ2Zvcm0nKS5hdHRyKCdpZF9zYycpO1xyXG5cdGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG5cdGlmIChmaWxlKSB7XHJcblx0XHR1cGxvYWRSUl9vbGQoZmlsZSxpZCk7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiB1cGxvYWRSUl9vbGQoZmlsZSxpZCkge1xyXG5cclxuXHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG5cdC8vINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LzQvtC20L3QviDQvtCx0YrQtdC00LjQvdC40YLRjCDQsiDQvtC00LjQvSxcclxuXHQvLyDQtdGB0LvQuCBzdGF0dXMgPT0gMjAwLCDRgtC+INGN0YLQviDRg9GB0L/QtdGFLCDQuNC90LDRh9C1INC+0YjQuNCx0LrQsFxyXG5cdHhoci5vbmxvYWQgPSB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gYWxlcnQodGhpcy5zdGF0dXMpO1xyXG5cdFx0aWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG5cclxuXHRcdFx0JCgnW2lkX3VwbG9hZD0nK2lkKyddJykuc2hvdygpOyAvL9C60L3QvtC/0LrQsFxyXG5cdFx0XHQkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKDApO1xyXG5cdFx0XHQkKCcuc2NhcF9sb2FkXycraWQpLmhpZGUoKTtcclxuXHRcdFx0JCgnLnNjYXBfbG9hZF8nK2lkKS5hZnRlcigpO1xyXG5cdFx0XHQvL1VwZGF0ZUltYWdlUmVwb3J0cyhpZCk7XHJcblx0XHRcdGFsZXJ0X21lc3NhZ2UoJ29rJywn0LLQsNGIINC/0YDQvtGE0LjQu9GMINC+0LHQvdC+0LLQu9C10L0nKTtcclxuXHRcdFx0YXV0b1JlbG9hZEhhaygpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdCQoJ1tpZF91cGxvYWQ9JytpZCsnXScpLnNob3coKTtcclxuXHRcdFx0JCgnLnNjYXBfbG9hZF8nK2lkKS5maW5kKCcuc2NhcF9sb2FkX18nKS53aWR0aCgwKTtcclxuXHRcdFx0JCgnLnNjYXBfbG9hZF8nK2lkKS5oaWRlKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8g0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC30LDQutCw0YfQutC4XHJcblx0eGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCQoJ1tpZF91cGxvYWQ9JytpZCsnXScpLmhpZGUoKTtcclxuXHRcdCQoJy5zY2FwX2xvYWRfJytpZCkuc2hvdygpO1xyXG5cdFx0dmFyIHdpZHRocz1NYXRoLnJvdW5kKChldmVudC5sb2FkZWQqMTAwKS9ldmVudC50b3RhbCk7XHJcblx0XHQkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKHdpZHRocysnJScpO1xyXG5cdH1cclxuXHJcblx0eGhyLm9wZW4oXCJQT1NUXCIsIFwidXNlcnMvdXBsb2FkLnBocFwiLCB0cnVlKTtcclxuXHQvL3hoci5zZW5kKGZpbGUpO1xyXG5cclxuXHR2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuXHRmb3JtRGF0YS5hcHBlbmQoXCJ0aGVmaWxlXCIsIGZpbGUpO1xyXG5cdGZvcm1EYXRhLmFwcGVuZChcImlkXCIsaWQpO1xyXG5cdHhoci5zZW5kKGZvcm1EYXRhKTtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuLy/QvdCw0LbQsNGC0Ywg0L3QsCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMINC90LDRgdGC0YDQvtC50LrQuFxyXG5mdW5jdGlvbiBzYXZlX3NldHRpbmcoKVxyXG57XHJcblxyXG5cclxuXHR2YXIgZXJyID0gMDtcclxuLy9hbGVydCgkKCcuanMtZm9ybS1yZWdpc3RlciAuZ2xvYWInKS5sZW5ndGgpO1xyXG5cdCQoJy5qcy1mb3JtLWdsb2FiIC5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRpZigkKHRoaXMpLnZhbCgpID09ICcnKSAgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuXHRcdFx0JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuXHRcdFx0ZXJyKys7XHJcblx0XHRcdC8vYWxlcnQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG5cdFx0fSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO31cclxuXHR9KTtcclxuXHJcblx0Ly9hbGVydChlcnIpO1xyXG5cclxuXHRpZihlcnI9PTApXHJcblx0e1xyXG5cdFx0JCgnLmpzLWZvcm0tZ2xvYWIgIC5qcy1zYXZlLXNldHRpbmcnKS5oaWRlKCkuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyB3aWR0aDogNDBweDtwYWRkaW5nLXRvcDogN3B4O3RvcDogYXV0bztyaWdodDogYXV0bztsZWZ0OiBjYWxjKDUwJSAtIDIwcHgpO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG5cdFx0Ly9BamF4Q2xpZW50KCdub3RpZmljYXRpb24nLCdldmVuJywnR0VUJyxkYXRhLCdBZnRlck5vZmknLDEsMCwxKTtcclxuXHRcdC8vQWpheENsaWVudCgndGVkbmVyJywnYWRkJywnUE9TVCcsMCwnQWZ0ZXJBZGRGb3JtVGVuZGVyJywwLCdqcy1mb3JtLXRlbmRlci1uZXcnLDEpO1xyXG5cdFx0JCgnI2xhbGFsYV9hZGRfZm9ybScpLnN1Ym1pdCgpO1xyXG5cclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHQvL9C90LDQudC00LXQvCDRgdCw0LzRi9C5INCy0LXRgNGF0L3RjtGOINC+0YjQuNCx0LrRgyDQuCDQv9GA0L7Qu9C10YHRgtC90LXQvCDQuiDQvdC10LlcclxuXHRcdC8valF1ZXJ5LnNjcm9sbFRvKCcucmVxdWlyZWRfaW5fMjAxODpmaXJzdCcsIDEwMDAsIHtvZmZzZXQ6LTcwfSk7XHJcblx0XHQvL0Vycm9yQnV0KCcuanMtZm9ybS10ZW5kZXItbmV3IC5qcy1hZGQtdGVuZGVyLWZvcm0nLCfQntGI0LjQsdC60LAg0LfQsNC/0L7Qu9C90LXQvdC40Y8hJyk7XHJcblx0XHRhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycpO1xyXG5cdH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vL9C30LDQutGA0YvRgtGMINGE0L7RgNC80YMg0L/QvtC00L/QuNGB0LrQuCDQutGA0LXRgdGC0LjQulxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gRXllKClcclxue1xyXG5cdGlmKCQodGhpcykuaXMoJy5haXMtb3BlbicpKVxyXG5cdHtcclxuXHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2Fpcy1vcGVuJyk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuZmluZCgnLmlucHV0X25ld18yMDIxJykuYXR0cigndHlwZScsJ3Bhc3N3b3JkJyk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0JCh0aGlzKS5hZGRDbGFzcygnYWlzLW9wZW4nKTtcclxuXHRcdCQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuaW5wdXRfbmV3XzIwMjEnKS5hdHRyKCd0eXBlJywndGV4dCcpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBjb3VudF90YXNrKClcclxue1xyXG52YXIgY291bnRfZHI9JCgnLmhpZGRlbi1jb3VudC10YXNrJykudGV4dCgpO1xyXG5pZihjb3VudF9kciE9JycpXHJcbntcclxuXHQkKCcubWVudS0wOS1jb3VudCcpLmVtcHR5KCkuYXBwZW5kKCQoJy5oaWRkZW4tY291bnQtdGFzaycpLnRleHQoKSk7XHJcblx0JCgnLm1lbnUtMDktY291bnQnKS5zaG93KCk7XHJcbn1cclxuXHJcbn1cclxuXHJcblxyXG4vL9GD0LTQsNC70LXQvdC40LUg0L/QsNGA0LDQvNC10YLRgNCwINC40LcgdXJsXHJcbi8vdmFyIHVybCA9IFwiaHR0cDovL3NvbWVVcmwucnU/cGFyYW0xPTEyMyZwYXJhbTI9MjM0JnBhcmFtMz00MzVcIjtcclxuLy92YXIgdXJsMSA9IHJlbW92ZVBhcmFtKFwicGFyYW0xXCIsIHVybCk7XHJcbmZ1bmN0aW9uIHJlbW92ZVBhcmFtKGtleSwgc291cmNlVVJMKSB7XHJcblx0dmFyIHNwbGl0VXJsID0gc291cmNlVVJMLnNwbGl0KCc/JyksXHJcblx0XHRydG4gPSBzcGxpdFVybFswXSxcclxuXHRcdHBhcmFtLFxyXG5cdFx0cGFyYW1zX2FyciA9IFtdLFxyXG5cdFx0cXVlcnlTdHJpbmcgPSAoc291cmNlVVJMLmluZGV4T2YoXCI/XCIpICE9PSAtMSkgPyBzcGxpdFVybFsxXSA6ICcnO1xyXG5cclxuXHRpZiAocXVlcnlTdHJpbmcgIT09ICcnKSB7XHJcblx0XHRwYXJhbXNfYXJyID0gcXVlcnlTdHJpbmcuc3BsaXQoJyYnKTtcclxuXHRcdGZvciAodmFyIGkgPSBwYXJhbXNfYXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XHJcblx0XHRcdHBhcmFtID0gcGFyYW1zX2FycltpXS5zcGxpdCgnPScpWzBdO1xyXG5cdFx0XHRpZiAocGFyYW0gPT09IGtleSkge1xyXG5cdFx0XHRcdHBhcmFtc19hcnIuc3BsaWNlKGksIDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRydG4gPSBydG4gKyAnPycgKyBwYXJhbXNfYXJyLmpvaW4oJyYnKTtcclxuXHR9XHJcblxyXG5cdGlmKHJ0bi50b1N0cmluZygpLnNsaWNlKC0xKT09Jz8nKVxyXG5cdHtcclxuXHRcdHJ0bj1ydG4uc2xpY2UoMCwgLTEpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHJ0bjtcclxufVxyXG5cclxuXHJcblxyXG4vL9C/0LXRgNC10YHQu9Cw0YLRjCDQt9Cw0Y/QstC60YNcclxuZnVuY3Rpb24gRm9yd2FyZEZvKClcclxue1xyXG5cdGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcblx0XHR2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuXHRcdCQuYXJjdGljbW9kYWwoe1xyXG5cdFx0XHR0eXBlOiAnYWpheCcsXHJcblx0XHRcdHVybDogJ2Zvcm1zL2Zvcm1fYWRkX2FwcF9mb3J3YXJkLnBocD9pZD0nICsgcHJlLFxyXG5cdFx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0XHQvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRcdGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbi8v0L7RgtC60LvQvtC90LjRgtGMINC30LDRj9Cy0LrRg1xyXG5mdW5jdGlvbiBSZWplY3RGbygpXHJcbntcclxuXHRpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG5cdFx0dmFyIHByZSA9ICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyk7XHJcblx0XHQkLmFyY3RpY21vZGFsKHtcclxuXHRcdFx0dHlwZTogJ2FqYXgnLFxyXG5cdFx0XHR1cmw6ICdmb3Jtcy9mb3JtX2FkZF9hcHBfcmVqZWN0LnBocD9pZD0nICsgcHJlLFxyXG5cdFx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0XHQvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRcdGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNpbmdGbygpXHJcbntcclxuXHRpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG5cdFx0dmFyIGZvID0gJCh0aGlzKTtcclxuXHRcdGlmICghZm8uaGFzQ2xhc3MoXCJncmF5LWJiXCIpKSB7XHJcblx0XHRcdC8vYWxlcnQoXCIhXCIpO1xyXG5cdFx0XHRpZiAoZm8uZmluZCgnaW5wdXQnKS52YWwoKSA9PSAxKSB7XHJcblx0XHRcdFx0Ly/QvtGC0LrRgNGL0YLRjCDQvtC60L3QviDQtNC70Y8g0LLQv9C40YHQsNC90LjQtSDQt9Cw0LzQtdGH0LDQvdC40Y9cclxuXHRcdFx0XHR2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuXHRcdFx0XHQkLmFyY3RpY21vZGFsKHtcclxuXHRcdFx0XHRcdHR5cGU6ICdhamF4JyxcclxuXHRcdFx0XHRcdHVybDogJ2Zvcm1zL2Zvcm1fYWRkX2FwcF9yZW1hcmsucGhwP2lkPScgKyBwcmUsXHJcblx0XHRcdFx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0XHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdFx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRcdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0XHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly/QntGC0L/RgNCw0LLQuNGC0Ywg0L/RgNGP0LzRg9GOINGE0L7RgNC80YMg0L3QsCDRgdC+0LPQu9Cw0YHQvtCy0LDQvdC40LVcclxuXHRcdFx0XHQkKCcjanMtZm9ybS1uZXh0LXNpZ24nKS5zdWJtaXQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gTWVtb0J1dFR5cGUoZWxlbSlcclxue1xyXG5cclxuXHR2YXIgYmJ0PWVsZW0ucGFyZW50cygnLnNhdmVfYnV0dG9uJyk7XHJcblx0aWYoZWxlbS52YWwoKT09MSlcclxuXHR7XHJcblx0XHRiYnQuYWRkQ2xhc3MoJ3llbGxvdy1iYicpO1xyXG5cclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHRiYnQucmVtb3ZlQ2xhc3MoJ3llbGxvdy1iYicpO1xyXG5cdH1cclxuXHRiYnQuZmluZCgnLmpzLXNvbicpLmhpZGUoKTtcclxuXHRiYnQuZmluZCgnW3Nvbj0nK2VsZW0udmFsKCkrJ10nKS5zaG93KCk7XHJcbn1cclxuXHJcblxyXG4vL9Cw0LrRgtC40LLQsNGG0LjRjyDQuNC90L/Rg9GC0L7QsiAyMDIxXHJcbmZ1bmN0aW9uIGlucHV0XzIwMjEoKVxyXG57XHJcblx0Ly/Qv9C10YDQtdCx0YDQsNGC0Ywg0LLRgdC1INC90L7QstGL0LUg0LjQvdC/0YPRgtGLINC4INC10YHQu9C4INC90LUg0L/Rg9GB0YLQviDQsNC60YLQuNCy0LjRgNC+0LLQsNGC0YxcclxuXHQkKFwiLmlucHV0X25ld18yMDIxXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG5cclxuXHRcdHZhciBpbnB1dD0kLnRyaW0oJCh0aGlzKS52YWwoKSk7XHJcblx0XHRpZihpbnB1dCE9JycpXHJcblx0XHR7XHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygnYWN0aXZlX2luXzIwMjEnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn1cclxuLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC+0YLQtNC10LvRjNC90YvQtSBjaHRja2JveCDQt9Cw0LvQutC4INCyINC+0L/RgNC10LTQtdC70LXQvdC90L7QuSDQs9GA0YPQv9C/0LVcclxuLy8gIHxcclxuLy8gXFwvXHJcbmZ1bmN0aW9uIENoZWNrYm94R3JvdXAoZXZlbnQpXHJcbntcclxuXHQvKlxyXG4gICAgdmFyIGFjdGl2ZV9vbGQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5hdHRyKFwiZGF0YV9zcmNcIik7XHJcbiAgICB2YXIgYWN0aXZlX25ldyA9ICQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuICAgICovXHJcbi8vdmFyIGYgPSAkKHRoaXMpLmZpbmQoXCJhXCIpLnRleHQoKTtcclxuXHJcblx0Ly/QtdGB0LvQuCDRgdGC0L7QuNGCINC60LvQsNGB0YEgbm9fYWN0aXZlX2NoZWNrINGC0L4g0L3QuNGH0LXQs9C+INC90LUg0LTQtdC70LDQtdC8XHJcblx0aWYoISQodGhpcykuaXMoJy5ub19hY3RpdmVfY2hlY2snKSkge1xyXG5cclxuXHJcblx0XHR2YXIgZSA9ICQodGhpcykuZmluZChcImlucHV0XCIpLmZpcnN0KCkudmFsKCk7XHJcblx0XHR2YXIgZHJvcF9vYmplY3QgPSAkKHRoaXMpLnBhcmVudHMoJy5qcy1ncm91cC1jJyk7XHJcblxyXG5cdFx0dmFyIGFjdGl2ZV9qaiA9IDA7XHJcblxyXG5cdFx0aWYgKCQodGhpcykuZmluZCgnaScpLmlzKFwiLmFjdGl2ZV90YXNrX2NiXCIpKSB7XHJcblxyXG5cdFx0XHQkKHRoaXMpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cdFx0XHQkKHRoaXMpLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgwKTtcclxuXHRcdFx0YWN0aXZlX2pqID0gMTtcclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHQkKHRoaXMpLmZpbmQoJ2knKS5hZGRDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cdFx0XHQkKHRoaXMpLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgxKTtcclxuXHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8v0L/RgNC+0LHQtdC20LDRgtGM0YHRjyDQv9C+INCy0YHQtdC5INCy0YvQsdGA0LDQvdC90L7QvNGDINGB0LXQu9C10LrRgtGDXHJcblx0XHR2YXIgc2VsZWN0X2xpID0gJyc7XHJcblx0XHRkcm9wX29iamVjdC5maW5kKCcuanMtY2hlY2tib3gtZ3JvdXAnKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmZpbmQoJ2knKS5pcyhcIi5hY3RpdmVfdGFza19jYlwiKSkge1xyXG5cdFx0XHRcdGlmIChzZWxlY3RfbGkgPT0gJycpIHtcclxuXHRcdFx0XHRcdHNlbGVjdF9saSA9ICQodGhpcykuZmluZChcImlucHV0XCIpLmZpcnN0KCkudmFsKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGVjdF9saSA9IHNlbGVjdF9saSArICcsJyArICQodGhpcykuZmluZChcImlucHV0XCIpLmZpcnN0KCkudmFsKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0Ly/QtdGB0YLRjCDRgtC40L8g0LrQvtGC0L7RgNGL0Lkg0L/QvtC30LLQvtC70Y/QtdGCINCy0YvQsdGA0LDRgtGMINGC0L7Qu9GM0LrQviDQvtC00LjQvSDQv9GD0L3QutGCXHJcblx0XHRpZiAoZHJvcF9vYmplY3QuaXMoJy5qcy10b2xrby1vbmUnKSkge1xyXG5cclxuXHJcblx0XHRcdC8vc2VsZWN0X2xpID0gb25lX2xpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcblx0XHRcdGRyb3Bfb2JqZWN0LmZpbmQoJ2knKS5yZW1vdmVDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cclxuXHRcdFx0ZHJvcF9vYmplY3QuZmluZCgnLmpzLWNoZWNrYm94LWdyb3VwJykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG5cdFx0XHRcdCQodGhpcykuZmluZCgnaW5wdXQnKS5sYXN0KCkudmFsKDApO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9hbGVydChhY3RpdmVfamopO1xyXG5cdFx0XHRpZiAoYWN0aXZlX2pqID09IDApIHtcclxuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJ2knKS5hZGRDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cdFx0XHRcdCQodGhpcykuZmluZCgnaW5wdXQnKS5sYXN0KCkudmFsKDEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHQvL9C10YHRgtGMINC60LvQsNGB0YEg0LrQvtGC0L7RgNGL0Lkg0LPQvtCy0L7RgNC40YIg0YfRgtC+INC10YHQu9C4INCy0YvQsdGA0LDQvdC+INC/0LXRgNCy0L7QtSDQsiDRgdC/0LjRgdC60LUg0YLQviDRg9Cx0LjRgNCw0LXQvCDQs9Cw0LvQutC4INGB0L4g0LLRgdC10YUg0L7RgdGC0LDQu9GM0L3Ri9GFXHJcblx0XHQvL9C10YHQu9C4INC10YHRgtGMINGH0YLQvi3RgtC+INCy0YvQsdGA0LDQvdC90L7QtSDRgtC+INC/0LXRgNCy0L7QtSDQsiDRgdC/0LjRgdC60LUg0L3QtSDQs9C+0YDQuNGCXHJcblx0XHQvL9C10YHQu9C4INC90LjRh9C10LPQviDQvdC1INCy0YvQsdGA0LDQvdC+INC/0LXRgNCy0L7QtSDQsiDRgdC/0LjRgdC60LUg0LfQsNC20LXRh9GMXHJcblxyXG5cdFx0aWYgKGRyb3Bfb2JqZWN0LmlzKCcuanMtb25lLWFsbC1zZWxlY3QnKSkge1xyXG5cclxuXHRcdFx0dmFyIG9uZV9saSA9IGRyb3Bfb2JqZWN0LmZpbmQoJy5qcy1jaGVja2JveC1ncm91cCcpLmZpcnN0KCk7XHJcblxyXG5cclxuXHRcdFx0Ly/QtdGB0LvQuCDQvdC1INC+0LTQvdCwINCz0LDQu9C60LAg0L3QtSDQstGL0LTQtdC70LXQvdCwINGC0L4g0LfQsNC20LjQs9Cw0LXQvCDQv9C10YDQstC+0LVcclxuXHRcdFx0aWYgKHNlbGVjdF9saSA9PSAnJykge1xyXG5cclxuXHRcdFx0XHRvbmVfbGkudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL9C90LDQttC40LzQsNC10Lwg0L3QsCDQv9C10YDQstC+0LUg0LIg0YHQv9C40YHQutC1INC60L7Qs9C00LAg0L7QvSDQvdC1INCz0L7RgNC10Lsg0YLQvtCz0LTQsCDRgtGD0YjQuNC8INCy0YHQtSDQvtGB0YLQsNC70YzQvdGL0LVcclxuXHRcdFx0aWYgKCgkKHRoaXMpLmZpbmQoJ2knKS5pcyhcIi5hY3RpdmVfdGFza19jYlwiKSkgJiYgKGUgPT0gMCkgJiYgKChzZWxlY3RfbGkgIT0gJycpICYmIChzZWxlY3RfbGkgIT0gJzAnKSkpIHtcclxuXHJcblx0XHRcdFx0c2VsZWN0X2xpID0gb25lX2xpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcblx0XHRcdFx0ZHJvcF9vYmplY3QuZmluZCgnaScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlX3Rhc2tfY2JcIik7XHJcblxyXG5cdFx0XHRcdGRyb3Bfb2JqZWN0LmZpbmQoJy5qcy1jaGVja2JveC1ncm91cCcpLmVhY2goZnVuY3Rpb24gKGksIGVsZW0pIHtcclxuXHRcdFx0XHRcdCQodGhpcykuZmluZCgnaW5wdXQnKS5sYXN0KCkudmFsKDApO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHJcblx0XHRcdFx0b25lX2xpLmZpbmQoJ2knKS5hZGRDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cdFx0XHRcdG9uZV9saS5maW5kKCdpbnB1dCcpLmxhc3QoKS52YWwoMSk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly/QtdGB0LvQuCDQstGL0LHRgNCw0LvQuCDQstGB0LUg0LrRgNC+0LzQtSDQv9C10YDQstC+0LPQviDRgtC+INC/0L7RgtGD0YjQuNGC0Ywg0LLRgdC1INCwINC/0LXRgNCy0YvQuSDQsiDRgdC/0LjRgdC60LUg0LfQsNC20LXRh9GMXHJcblx0XHRcdGlmIChlICE9IDApIHtcclxuXHRcdFx0XHR2YXIgY291bnRfYWxsX2xpID0gZHJvcF9vYmplY3QuZmluZCgnLmpzLWNoZWNrYm94LWdyb3VwJykubGVuZ3RoO1xyXG5cdFx0XHRcdHZhciBjb3VudF9hY3RpdmVfbGkgPSBkcm9wX29iamVjdC5maW5kKCcuYWN0aXZlX3Rhc2tfY2InKS5sZW5ndGg7XHJcblx0XHRcdFx0Ly9hbGVydChjb3VudF9hbGxfbGkpO1xyXG5cdFx0XHRcdGlmIChwYXJzZUludChjb3VudF9hY3RpdmVfbGkgKyAxKSA9PSBjb3VudF9hbGxfbGkpIHtcclxuXHRcdFx0XHRcdGRyb3Bfb2JqZWN0LmZpbmQoJ2knKS5yZW1vdmVDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cclxuXHRcdFx0XHRcdGRyb3Bfb2JqZWN0LmZpbmQoJy5qcy1jaGVja2JveC1ncm91cCcpLmVhY2goZnVuY3Rpb24gKGksIGVsZW0pIHtcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCdpbnB1dCcpLmxhc3QoKS52YWwoMCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblxyXG5cdFx0XHRcdFx0b25lX2xpLmZpbmQoJ2knKS5hZGRDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG5cdFx0XHRcdFx0b25lX2xpLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgxKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHQvL2FsZXJ0KHNlbGVjdF9saV90ZXh0KTtcclxuXHRcdFx0Ly/QtdGB0LvQuCDRh9GC0L4t0YLQviDQstGL0LHRgNCw0L3QviDQutGA0L7QvNC1INC/0LXRgNCy0L7Qs9C+INGC0L4g0Lgg0L/QtdGA0LLRi9C5INCz0LDRgNC40LQg0YLQviDQv9C+0YLRg9GI0LjRgtGMINC10LPQvlxyXG5cdFx0XHRpZiAoKHNlbGVjdF9saSAhPSAnJykgJiYgKHNlbGVjdF9saSAhPSAnMCcpKSB7XHJcblx0XHRcdFx0aWYgKG9uZV9saS5maW5kKCdpJykuaXMoJy5hY3RpdmVfdGFza19jYicpKSB7XHJcblx0XHRcdFx0XHRvbmVfbGkudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblx0XHRNZW1vQnV0VHlwZSgkKHRoaXMpLmZpbmQoXCJpbnB1dFwiKSk7XHJcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGlvbl90ZXBzX3N1cHBseSgpXHJcbntcclxuXHQkKCcudGVwc19zdXBwbHknKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdCQodGhpcykuYW5pbWF0ZSh7d2lkdGg6ICQodGhpcykuYXR0cigncmVsX3cnKStcIiVcIn0sIDIwMDAsIGZ1bmN0aW9uKCkgeyAgfSk7XHJcbn0pO1xyXG59XHJcblxyXG4vL9C/0YDQvtGF0L7QtNC40Lwg0L/QviDQstGB0LXQvCB0ZXh0YXJlYSByZXNpemUg0Lgg0LDQutGC0LjQstC40YDRg9C10Lwg0LjRhVxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gQXV0b1Jlc2l6ZVQoKVxyXG57XHJcblx0Ly8kKHRoaXMpLmF1dG9SZXNpemUoe2V4dHJhU3BhY2UgOiAxMH0pO1xyXG5cclxuXHQkKCcuanMtYXV0b1Jlc2l6ZScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHQkKHRoaXMpLmF1dG9SZXNpemUoe2V4dHJhU3BhY2UgOiAxMH0pO1xyXG5cdH0pO1xyXG5cclxufVxyXG5cclxuLy/QstCy0L7QtCDRgtC10LrRgdGC0LAg0LIg0L3QvtCy0YvQtSDQuNC90L/Rg9GC0Ysg0YHQutGA0YvRgtC40LUg0L7RiNC40LHQutC4INC10YHQu9C4INC+0L3QsCDQsdGL0LvQsFxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gS2V5VXBJbnB1dDIwMjEoKVxyXG57XHJcblx0aWYoJCh0aGlzKS5pcygnLmdsb2FiJykpXHJcblx0e1xyXG5cdFx0aWYoKCQodGhpcykudmFsKCkhPScnKSYmKCQodGhpcykudmFsKCkhPTApKVxyXG5cdFx0XHQkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuXHRcdCQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5yZW1vdmVDbGFzcygnZXJyb3JfMjAyMScpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8v0LLQstC+0LQg0YLQtdC60YHRgtCwINCyINC90L7QstGL0LUg0LjQvdC/0YPRgtGLINGB0LrRgNGL0YLQuNC1INC+0YjQuNCx0LrQuCDQtdGB0LvQuCDQvtC90LAg0LHRi9C70LBcclxuLy8gIHxcclxuLy8gXFwvXHJcbmZ1bmN0aW9uIEtleVVwSW5wdXQoKVxyXG57XHJcblx0aWYoJCh0aGlzKS5pcygnLmdsb2FiJykpXHJcblx0e1xyXG5cdFx0aWYoKCQodGhpcykudmFsKCkhPScnKSYmKCQodGhpcykudmFsKCkhPTApKVxyXG5cdFx0XHQkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuXHRcdCQodGhpcykucGFyZW50cygnLmlucHV0XzIwMTgnKS5yZW1vdmVDbGFzcygnZXJyb3JfMjAxOCcpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8v0L/QvtC00YHQutCw0LfQutC4INC+0YHQvtCx0YvQtSDQtNC70Y8g0YTQvtGA0LzRi1xyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gVG9vbFRpcElucHV0KCl7XHJcblxyXG5cclxuXHJcblx0JChcIi5oZWxwLWljb25cIikubW91c2Vtb3ZlKGZ1bmN0aW9uIChldmVudE9iamVjdCkge1xyXG5cclxuXHRcdHZhciBpbnB1dHg9JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpO1xyXG5cclxuXHRcdGlmKGlucHV0eC5sZW5ndGg9PTApXHJcblx0XHR7XHJcblx0XHRcdHZhciBpbnB1dHg9JCh0aGlzKS5wYXJlbnRzKCcuanMtaGVscHMnKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZihpbnB1dHguZmluZCgnLnRvb2xoZWxwJykubGVuZ3RoPT0wKVxyXG5cdFx0e1xyXG5cdFx0XHRpbnB1dHgucHJlcGVuZCgnPGRpdiBjbGFzcz1cInRvb2xoZWxwXCI+PHNwYW4+PC9zcGFuPjwvZGl2PicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZhciB0b29saD1pbnB1dHguZmluZChcIi50b29saGVscFwiKTtcclxuXHRcdHZhciB0b29saHM9aW5wdXR4LmZpbmQoXCIudG9vbGhlbHAgc3BhblwiKTtcclxuXHRcdCRkYXRhX3Rvb2x0aXAgPSAkKHRoaXMpLmF0dHIoXCJoZWxwXCIpO1xyXG5cdFx0dG9vbGhzLnRleHQoJGRhdGFfdG9vbHRpcCk7XHJcblx0XHR2YXIgb2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKTtcclxuXHJcblxyXG5cdFx0aWYoKGV2ZW50T2JqZWN0LnBhZ2VYLTI1MCk8PSgkKHdpbmRvdykud2lkdGgoKS8yKSlcclxuXHRcdHtcclxuXHRcdFx0dG9vbGguY3NzKHtcclxuXHRcdFx0XHRcInRvcFwiIDogJzBweCcsXHJcblx0XHRcdFx0XCJyaWdodFwiIDogLSAodG9vbGgub3V0ZXJXaWR0aCgpICsgNDApXHJcblxyXG5cdFx0XHR9KTtcclxuXHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0ICggZnVuY3Rpb24gKCkgeyB0b29saC5mYWRlSW4oNTAwKTsgfSwgXHQ0MDAgKTtcclxuXHJcblxyXG5cdFx0fWVsc2VcclxuXHRcdHtcclxuXHJcblx0XHRcdHRvb2xoLmhpZGUoKTtcclxuXHJcblxyXG5cdFx0fVxyXG5cdH0pLm1vdXNlb3V0KGZ1bmN0aW9uICgpIHsgdmFyIHRvb2xoPSQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKFwiLnRvb2xoZWxwXCIpO1xyXG5cclxuXHJcblx0XHRpZih0b29saC5sZW5ndGg9PTApXHJcblx0XHR7XHJcblx0XHRcdHZhciB0b29saD0kKHRoaXMpLnBhcmVudHMoJy5qcy1oZWxwcycpLmZpbmQoXCIudG9vbGhlbHBcIik7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdHRvb2xoLnJlbW92ZSgpOyB9KTtcclxuXHJcblxyXG59XHJcblxyXG4vL9C30LDQs9GA0YPQttCw0YLRjCDQuNC70Lgg0L3QtdGCIGpzIGZvcm1zIC8vINC90YPQttC90L4g0LrQvtCz0LTQsCDQvtGC0LrRgNGL0LLQsNC10YLRgdGPINC90LXRgdC60L7Qu9GM0LrQviDQvtC60L7QvSDRgdGA0LDQt9GDXHJcbi8vICB8XHJcbi8vIFxcL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplRm9ybXNKcygpXHJcbntcclxuXHR0cnkge1xyXG5cdFx0Ly/RhNGD0L3QutGG0LjRjyDQvtC/0YDQtdC00LXQu9C10L3QsCDQsiDRhNCw0LnQu9C1IGpzIGZvcm1zLiDQuCDQtdGB0LvQuCDQvtC9INC90LUg0L/QvtC00LPRgNGD0LbQtdC9INGC0L4g0L7QvSDQvdC1INCx0YPQtNC10YIg0LfQvdCw0YLRjCDRgtCw0LrRg9GOINGE0YPQvdC60YbQuNGOINC4INC+0L3QsCDQstGL0LfQvtCy0LXRgiDQvtGI0LjQsdC60YNcclxuXHRcdGZvcm1zX2pzX2xvYWQoKTtcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0Ly/QsCDRgtGD0YIg0YLQviwg0YfRgtC+INC00LXQu9Cw0YLRjCwg0LrQvtCz0LTQsCDQutC+0LQg0LLRi9GI0LUg0LLRi9C30LLQsNC7INC+0YjQuNCx0LrRg1xyXG5cdFx0JC5nZXRTY3JpcHQoIHdpbmRvdy5zcmNfZm9ybXMsIGZ1bmN0aW9uKCBkYXRhLCB0ZXh0U3RhdHVzLCBqcXhociApIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJ5ZXMgbG9hZCBzY3JpcHRcIik7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIExvYWRGRm8oKVxyXG57XHJcblx0Y29uc29sZS5sb2coXCLQv9GA0L7QstC10YDQutCwINC/0L7Qu9C90L7QuSDQt9Cw0LPRgNGD0LfQutC4XCIpO1xyXG5cdGlmKHdpbmRvdy55ZXNmb3JtPT0xKSB7XHJcblx0XHRjbGVhckludGVydmFsKFRpbWVyU2NyaXB0KTtcclxuXHRcdFNjcmlwdEZvcm1zKCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcbi8v0L/QtdGA0LXQt9Cw0LPRgNGD0LfQutCwINGB0YLRgNCw0L3QuNGG0YtcclxuLy8gIHxcclxuLy8gXFwvXHJcbmZ1bmN0aW9uIGF1dG9SZWxvYWRIYWsoKXtcclxuXHR2YXIgZ29hbCA9IHNlbGYubG9jYXRpb247XHJcblx0bG9jYXRpb24uaHJlZiA9IGdvYWw7XHJcbn1cclxuXHJcbi8v0LLQvtC30LLRgNCw0YnQsNC10Lwg0YHQutGA0YPQuyDRgyDRgdCw0LnRgtCwINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCDQtdGB0LvQuCDQvtC60L7QvSDQsdC+0LvRjNGI0LUg0L3QtdGCXHJcbi8vICB8XHJcbi8vIFxcL1xyXG5mdW5jdGlvbiBCb2R5U2Nyb29sKClcclxue1xyXG5cclxuXHRpZigkKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykubGVuZ3RoPT0xKVxyXG5cdHtcclxuXHRcdCQoJ2JvZHknKS5jc3MoIFwibWFyZ2luLXJpZ2h0XCIsIFwiMHB4XCIgKTtcclxuXHRcdCQoJ2JvZHknKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBkZWxsX2ludm9pY2UoKVxyXG57XHJcblx0dmFyIGF0dHI9JCh0aGlzKS5hdHRyKCdpZF9yZWwnKTtcclxuXHQkKCdbaW52b2ljZV9tYXRlcmlhbD0nK2F0dHIrJ10nKS5oaWRlKCk7XHJcblx0XHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfaW52b2ljZS5waHA/aWQ9JythdHRyLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuICB9KTtcclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICBVcGRhdGVJbWFnZUludm9pY2VBa3QoaWQsdHlwZSlcclxue1x0XHJcblx0dmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWQrJyZ0eXBlPScrdHlwZTtcclxuICAgIEFqYXhDbGllbnQoJ2ludm9pY2VzJywndXBkYXRlX2FrdCcsJ0dFVCcsZGF0YSwnQWZ0ZXJVcGRhdGVBa3QnLHR5cGUsMCk7XHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIEVycm9yTWF4KClcclxue1xyXG5cdFxyXG5cdHZhciBtYXg9cGFyc2VGbG9hdCgkKHRoaXMpLmF0dHIoJ21heCcpKTtcclxuXHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdyZWRhYXNfaW52Y29pY2UnKTtcclxuXHR2YXIgY291bnQ9cGFyc2VGbG9hdCgkKHRoaXMpLnZhbCgpKTtcclxuXHRcclxuXHQvL2FsZXJ0KGlkKTtcclxuXHRcclxuXHRpZigoY291bnQhPScnKSYmKG1heDxjb3VudCkmJihjb3VudCE9JzAnKSlcclxuXHR7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3JlZGFhc19pbnZjb2ljZScpO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdFx0Ly8kKCdbaW52b2ljZXNfbWVzc2E9JytpZCsnXScpLmZpbmQoJy5jb3VudF9kZWZlY3RfaW5fJykucmVtb3ZlQ2xhc3MoJ3JlZGFhc19pbnZjb2ljZScpO1xyXG5cdH1cclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy/Qv9GA0L7QstC10YDQutCwINC60L7Qu9C40YfQtdGB0YLQstC+INCx0YDQsNC60LAg0L3QtSDQsdC+0LvRjNGI0LUg0L7QsdGJ0LXQs9C+INC60L7Qu9C40YfQtdGB0YLQstCwINGN0YLQvtCz0L4g0LzQsNGC0LXRgNC40LDQu9CwXHJcblxyXG5mdW5jdGlvbiBCcmFrRXJyb3IoKVxyXG57XHJcblx0XHJcblx0dmFyIGlkPSQodGhpcykucGFyZW50cygnW2ludm9pY2VfZ3JvdXBdJykuYXR0cignaW52b2ljZV9ncm91cCcpO1xyXG5cdCQoJ1tpbnZvaWNlc19tZXNzYT0nK2lkKyddJykuZmluZCgnLmNvdW50X2RlZmVjdF9pbl8nKS5yZW1vdmVDbGFzcygncmVkYWFzX2ludmNvaWNlJyk7XHJcblx0dmFyIGNvdW50PXBhcnNlRmxvYXQoJCgnW2ludm9pY2VfbWF0ZXJpYWw9JytpZCsnXScpLmZpbmQoJy5jb3VudF9pbl8nKS52YWwoKSk7XHJcblx0dmFyIGNvdW50X2FrdD1wYXJzZUZsb2F0KCQoJ1tpbnZvaWNlc19tZXNzYT0nK2lkKyddJykuZmluZCgnLmNvdW50X2RlZmVjdF9pbl8nKS52YWwoKSk7XHJcblx0XHJcblx0Ly9hbGVydChpZCk7XHJcblx0XHJcblx0aWYoKGNvdW50X2FrdCE9JycpJiYoY291bnRfYWt0PmNvdW50KSYmKGNvdW50IT0nJykpXHJcblx0e1xyXG5cdFx0XHQkKCdbaW52b2ljZXNfbWVzc2E9JytpZCsnXScpLmZpbmQoJy5jb3VudF9kZWZlY3RfaW5fJykuYWRkQ2xhc3MoJ3JlZGFhc19pbnZjb2ljZScpO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdFx0Ly8kKCdbaW52b2ljZXNfbWVzc2E9JytpZCsnXScpLmZpbmQoJy5jb3VudF9kZWZlY3RfaW5fJykucmVtb3ZlQ2xhc3MoJ3JlZGFhc19pbnZjb2ljZScpO1xyXG5cdH1cclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY291bnRFcnJvck1heCgpXHJcbntcclxuXHRcclxuXHR2YXIgeHZnPSQoJy5jb3VudF9pbl8nKTtcclxuXHR4dmcuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHRcdHZhciBtYXg9cGFyc2VGbG9hdCgkKHRoaXMpLmF0dHIoJ21heCcpKTtcclxuXHQgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygncmVkYWFzX2ludmNvaWNlJyk7XHJcblx0ICAgIHZhciBjb3VudD1wYXJzZUZsb2F0KCQodGhpcykudmFsKCkpO1xyXG5cdFx0XHJcblx0ICAgIGlmKChjb3VudCE9JycpJiYobWF4PGNvdW50KSYmKGNvdW50IT0nMCcpKVxyXG5cdCAgICB7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3JlZGFhc19pbnZjb2ljZScpO1xyXG5cdCAgICB9XHJcblx0fSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gc2VhcmNoX3Bvc3RhX2xpMigpXHJcbntcclxuXHQkKCcuY29udHJhY3Rvcl9hZGQnKS5oaWRlKCk7XHJcblx0JCgnLnNlbGVjdC1tYW5pYS10aGVtZS1vcmFuZ2UxJykuc2hvdygpO1xyXG5cdFxyXG5cdCQoJy5uZXdfY29udHJhY3Rvcl8nKS52YWwoMCk7XHRcclxufVxyXG5cclxuZnVuY3Rpb24gcGx1c19wb3N0dCgpXHJcbntcclxuXHQkKCcuY29udHJhY3Rvcl9hZGQnKS5zaG93KCk7XHJcblx0JCgnLmNvbnRyYWN0b3JfXycpLmhpZGUoKTtcclxuXHQkKCcubmV3X2NvbnRyYWN0b3JfJykudmFsKDEpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24geW9vcF9jbGljaygpXHJcbntcclxuXHQvL2FsZXJ0KFwiIVwiKTtcclxuXHR2YXIgaGw9JCh0aGlzKS5wYXJlbnRzKCcueW9vcF8nKTtcclxuXHRpZiAoIGhsLmlzKFwiLmhpZGVfeW9vcFwiKSApXHJcbiAgICB7XHJcblx0XHRcclxuXHRcdGhsLnJlbW92ZUNsYXNzKCdoaWRlX3lvb3AnKTtcclxuXHRcdFxyXG5cdH0gZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHRobC5hZGRDbGFzcygnaGlkZV95b29wJyk7XHJcblx0XHR9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hfcG9zdGFfbGkoKVxyXG57XHJcblx0JCgnLmxvbGxfZHJvcCcpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHQkKCcucG9zdF9wJykudmFsKCQodGhpcykuZmluZCgnYScpLmF0dHIoJ3JlbCcpKTtcclxuXHQkKHRoaXMpLnBhcmVudHMoJy5sb2xsX2RpdicpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHJcblx0JCgnW25hbWU9bnVtYmVyX3NvcGx5XScpLnZhbCgkKHRoaXMpLmZpbmQoJ2EnKS50ZXh0KCkudG9VcHBlckNhc2UoKSk7XHJcblx0JCgnW25hbWU9bnVtYmVyX3NvcGx5XScpLmF0dHIoJ3ZhbF9vbGQnLCQodGhpcykuZmluZCgnYScpLnRleHQoKS50b1VwcGVyQ2FzZSgpKTtcclxuXHQkKCcuYi1sb2FkaW5nLW1lc3NhZ2UnKS5lbXB0eSgpLmhpZGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VhcmNoX3Bvc3RhMSgpXHJcbntcclxuaWYoJC50cmltKCQodGhpcykudmFsKCkubGVuZ3RoKSA+PSAxKVxyXG5cdFx0e1xyXG5cdFx0ICAkKCcubG9sbF9kcm9wJykuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDEpXCIpO1x0XHJcblx0XHR9IFxyXG59XHJcblx0XHJcbmZ1bmN0aW9uIHNlYXJjaF9wb3N0YSgpXHJcbntcclxuXHQgICAgLy/Qv9GA0L7QstC10YDQuNGC0Ywg0YfRgtC+INC/0L7Qu9C1INC80L7QttC90L4g0L/RgNCw0LLQuNGC0YxcclxuXHQvL2FsZXJ0KFwiISFcIik7XHJcblx0aWYoJCh0aGlzKS5hdHRyKFwicmVhZG9ubHlcIik9PXVuZGVmaW5lZCkge1xyXG5cdFx0aWYoJC50cmltKCQodGhpcykudmFsKCkubGVuZ3RoKSA+PSAxKVxyXG5cdFx0e1xyXG5cdFx0ICAkKHRoaXMpLnBhcmVudHMoJy5sb2xsX2RpdicpLmZpbmQoJy5sb2xsX2RlbGwnKS5zaG93KCk7XHRcclxuXHRcdH0gZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHQkKHRoaXMpLnBhcmVudHMoJy5sb2xsX2RpdicpLmZpbmQoJy5sb2xsX2RlbGwnKS5oaWRlKCk7XHJcblx0XHR9XHJcblx0dmFyIHRoPSQodGhpcyk7XHJcblx0XHJcbiAgICBkZWxheTEoZnVuY3Rpb24odGgpe1xyXG5cdFx0Ly9hbGVydCh0aC52YWwoKSk7XHJcblx0XHRcclxuXHRcdGlmKCQudHJpbSgkKHdpbmRvdy5zZWFyY2hfY2xhc3MpLnZhbCgpLmxlbmd0aCkgPj0gd2luZG93LnNlYXJjaF9taW4pXHJcblx0XHR7XHJcbiAgICAgICAgICAgICAvLyBhbGVydCgkKHdpbmRvdy5zZWFyY2hfY2xhc3MpLnZhbCgpKTsgIFxyXG5cdFx0XHQkKCcuYi1sb2FkaW5nLW1lc3NhZ2UnKS5lbXB0eSgpLmhpZGUoKTtcclxuXHRcdFx0ICQoJy5iLWxvYWRpbmcnKS5zaG93KCk7XHJcblx0XHRcdCAkKHRoaXMpLnBhcmVudHMoJy5sb2xsX2RpdicpLmZpbmQoJy5sb2xsX2Ryb3AnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0XHRcdCBcclxuXHRcdFx0XHR2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmcXVlcnk9JyskKHdpbmRvdy5zZWFyY2hfY2xhc3MpLnZhbCgpKycmYWN0aXZlPScrJCgnLnBvc3RfcCcpLnZhbCgpO1xyXG5cdCAgICAgICAgICAgQWpheENsaWVudCgnc3VwcGx5Jywnc2VhcmNoX2NvbnRyYWN0b3InLCdHRVQnLGRhdGEsJ0FmdGVyc2VhcmNoX3Bvc3RhJywxLDApO1x0XHJcblx0XHRcdFxyXG5cdFx0XHQgIC8v0L/QvtGB0LvQsNGC0YwgYWpheCDQv9C+0LjRgdC6INC/0L7RgdGC0LDQstGJ0LjQutC+0LJcclxuXHRcdFx0XHJcblx0XHRcdCAgLy/Qt9Cw0L/Rg9GB0YLQuNGC0Ywg0LvQvtC00LXRgCDRh9GC0L4g0LjRidC10YLRgdGPXHJcblx0XHR9XHJcblx0XHRcclxuICAgIH0sIHdpbmRvdy5zZWFyY2hfZGVsZXksJCh0aGlzKSk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBBZnRlcnNlYXJjaF9wb3N0YShkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdCQoJy5iLWxvYWRpbmcnKS5oaWRlKCk7XHJcblx0XHRXaW5kb3dMb2dpbigpO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0neWVzJyApXHJcbiAgICB7XHRcdFx0XHRcclxuXHRcdCQoJy5sb2xsX2Ryb3AnKS5lbXB0eSgpLmFwcGVuZChkYXRhLmVjaG8pLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgxKVwiKTtcclxuXHRcdCQoJy5iLWxvYWRpbmcnKS5oaWRlKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLmItbG9hZGluZycpLmhpZGUoKTtcclxuXHRcdCQoJy5iLWxvYWRpbmctbWVzc2FnZScpLmVtcHR5KCkuYXBwZW5kKCfQvdC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3QvicpLnNob3coKTtcclxuXHRcdC8v0L/QvtC60LDQt9Cw0YLRjCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC40YLRjCDQvdC+0LLRi9C5XHJcblx0fVxyXG5cdFxyXG59XHJcblxyXG4vL9C/0L7Qu9GD0YfQtdC90LjQtSDRhNC+0LrRg9GB0LAg0LTQu9GPINC90L7QstGL0YUg0LjQvdC/0YPRgtC+0LJcclxuZnVuY3Rpb24gSW5wdXRGb2N1c05ldzIwMjEoKVxyXG57XHJcblx0dmFyIHZhbF9pbnB1dD0kKHRoaXMpLnZhbCgpO1xyXG5cdHZhciBsYWJlbD0kKHRoaXMpLnByZXYoJ2xhYmVsJyk7XHJcblx0dmFyIGlucHV0X2Rpdj0kKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJyk7XHJcblxyXG5cdGlmKCFpbnB1dF9kaXYuaXMoJy5hY3RpdmVfaW5fMjAyMScpKVxyXG5cdHtcclxuXHRcdGlucHV0X2Rpdi5hZGRDbGFzcygnYWN0aXZlX2luXzIwMjEnKTtcclxuXHR9XHJcblxyXG5cdGlmKCFpbnB1dF9kaXYuaXMoJy5hY3RpdmUxX2luXzIwMjEnKSlcclxuXHR7XHJcblx0XHRpbnB1dF9kaXYuYWRkQ2xhc3MoJ2FjdGl2ZTFfaW5fMjAyMScpO1xyXG5cdH1cclxuXHJcblx0Ly/QvNC+0LbQtdGCINC90LDQtNC+INC+0YLQutGA0YvRgtGMINC60LDQu9C10L3QtNCw0YDRjFxyXG5cdHZhciBjYWxlbmRhcj1pbnB1dF9kaXYuZmluZCgnLmNhbF8yMDIxJyk7XHJcblx0aWYoY2FsZW5kYXIubGVuZ3RoIT0wKVxyXG5cdHtcclxuXHRcdCQoXCIuZGF0ZV9fXzIwMTlcIikuc2hvdygpO1xyXG5cdH1cclxuXHJcblxyXG5cclxufVxyXG4vL9C/0L7RgtC10YDRjyDRhNC+0LrRg9GB0LAg0LTQu9GPINC90L7QstGL0YUg0LjQvdC/0YPRgtC+0LJcclxuZnVuY3Rpb24gSW5wdXRCbHVyTmV3MjAyMSgpXHJcbntcclxuXHRpZigkKHRoaXMpLmlzKCcuZ2xvYWInKSkge1xyXG5cdFx0Ly9hbGVydCgkKHRoaXMpLnZhbCgpKTtcclxuXHRcdHZhciB2YWxfaW5wdXQgPSAkKHRoaXMpLnZhbCgpO1xyXG5cdFx0dmFyIGxhYmVsID0gJCh0aGlzKS5wcmV2KCdsYWJlbCcpO1xyXG5cdFx0dmFyIGlucHV0X2RpdiA9ICQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKTtcclxuXHJcblx0XHRpbnB1dF9kaXYucmVtb3ZlQ2xhc3MoJ2FjdGl2ZTFfaW5fMjAyMScpO1xyXG5cclxuXHRcdGlmICh2YWxfaW5wdXQgPT0gJycpIHtcclxuXHRcdFx0aW5wdXRfZGl2LnJlbW92ZUNsYXNzKCdhY3RpdmVfaW5fMjAyMScpO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRpZiAoISQodGhpcykuaXMoJy5kYXRlMjAyMV9tYXNrJykpIHtcclxuXHRcdFx0Ly/QtNC70Y8g0LLRgdC10LPQviDQvtGB0YLQsNC70YzQvdC+0LPQviDQutGA0L7QvNC1INC00LDRgiDRgSDQvNCw0YHQutC+0LlcclxuXHRcdFx0aWYgKCgkKHRoaXMpLmlzKCcucmVxdWlyZWQnKSkgJiYgKHZhbF9pbnB1dCA9PSAnJykgJiYgKCFpbnB1dF9kaXYuaXMoJy5yZXF1aXJlZF9pbl8yMDIxJykpKSB7XHJcblx0XHRcdFx0aW5wdXRfZGl2LmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKCgkKHRoaXMpLmlzKCcucmVxdWlyZWQnKSkgJiYgKHZhbF9pbnB1dCAhPSAnJykpIHtcclxuXHRcdFx0XHRcdGlucHV0X2Rpdi5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCgkKHRoaXMpLmlzKCcucmVxdWlyZWQnKSkgJiYgKCh2YWxfaW5wdXQgPT0gJycpIHx8ICh2YWxfaW5wdXQgPT0gJ9C00LQu0LzQvC7Qs9Cz0LPQsycpKSAmJiAoIWlucHV0X2Rpdi5pcygnLnJlcXVpcmVkX2luXzIwMjEnKSkpIHtcclxuXHRcdFx0XHRpbnB1dF9kaXYuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAoKCQodGhpcykuaXMoJy5yZXF1aXJlZCcpKSAmJiAodmFsX2lucHV0ICE9ICcnKSAmJiAodmFsX2lucHV0ICE9ICfQtNC0LtC80Lwu0LPQs9Cz0LMnKSkge1xyXG5cdFx0XHRcdFx0aW5wdXRfZGl2LnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG59XHJcblxyXG5cclxuLy/Qv9C+0LvRg9GH0LXQvdC40LUg0YTQvtC60YPRgdCwINC00LvRjyDQvdC+0LLRi9GFINC40L3Qv9GD0YLQvtCyXHJcbmZ1bmN0aW9uIElucHV0Rm9jdXNOZXcoKVxyXG57XHJcblx0dmFyIHZhbF9pbnB1dD0kKHRoaXMpLnZhbCgpO1xyXG5cdHZhciBsYWJlbD0kKHRoaXMpLnByZXYoJ2xhYmVsJyk7XHJcblx0dmFyIGlucHV0X2Rpdj0kKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4Jyk7XHJcblx0XHJcblx0aWYoIWlucHV0X2Rpdi5pcygnLmFjdGl2ZV9pbl8yMDE4JykpXHJcblx0e1xyXG5cdFx0aW5wdXRfZGl2LmFkZENsYXNzKCdhY3RpdmVfaW5fMjAxOCcpO1x0XHJcblx0fVxyXG5cdFxyXG5cdGlmKCFpbnB1dF9kaXYuaXMoJy5hY3RpdmUxX2luXzIwMTgnKSlcclxuXHR7XHJcblx0XHRpbnB1dF9kaXYuYWRkQ2xhc3MoJ2FjdGl2ZTFfaW5fMjAxOCcpO1x0XHJcblx0fVxyXG5cdFxyXG5cdC8v0LzQvtC20LXRgiDQvdCw0LTQviDQvtGC0LrRgNGL0YLRjCDQutCw0LvQtdC90LTQsNGA0YxcclxuXHR2YXIgY2FsZW5kYXI9aW5wdXRfZGl2LmZpbmQoJy5jYWxfMjAxOCcpO1xyXG5cdGlmKGNhbGVuZGFyLmxlbmd0aCE9MClcclxuXHR7XHJcblx0XHRcdCQoXCIuZGF0ZV9fXzIwMTlcIikuc2hvdygpO1x0XHJcblx0fVxyXG5cdFxyXG5cdCBcclxuXHRcclxufVxyXG4vL9C/0L7RgtC10YDRjyDRhNC+0LrRg9GB0LAg0LTQu9GPINC90L7QstGL0YUg0LjQvdC/0YPRgtC+0LJcclxuZnVuY3Rpb24gSW5wdXRCbHVyTmV3KClcclxue1xyXG5cdC8qXHJcblx0Ly9hbGVydCgkKHRoaXMpLnZhbCgpKTtcclxuXHR2YXIgdmFsX2lucHV0PSQodGhpcykudmFsKCk7XHJcblx0dmFyIGxhYmVsPSQodGhpcykucHJldignbGFiZWwnKTtcclxuXHR2YXIgaW5wdXRfZGl2PSQodGhpcykucGFyZW50cygnLmlucHV0XzIwMTgnKTtcclxuXHRcclxuXHRpbnB1dF9kaXYucmVtb3ZlQ2xhc3MoJ2FjdGl2ZTFfaW5fMjAxOCcpO1xyXG5cdFxyXG5cdGlmKHZhbF9pbnB1dD09JycpXHJcblx0e1xyXG5cdFx0aW5wdXRfZGl2LnJlbW92ZUNsYXNzKCdhY3RpdmVfaW5fMjAxOCcpO1x0XHJcblx0fVxyXG5cdGlmKCEkKHRoaXMpLmlzKCcuZGF0ZTIwMThfbWFzaycpKVxyXG5cdHtcclxuXHQgIC8v0LTQu9GPINCy0YHQtdCz0L4g0L7RgdGC0LDQu9GM0L3QvtCz0L4g0LrRgNC+0LzQtSDQtNCw0YIg0YEg0LzQsNGB0LrQvtC5XHJcblx0ICBpZigoJCh0aGlzKS5pcygnLnJlcXVpcmVkJykpJiYodmFsX2lucHV0PT0nJykmJighaW5wdXRfZGl2LmlzKCcucmVxdWlyZWRfaW5fMjAxOCcpKSlcclxuXHQgIHtcclxuXHRcdGlucHV0X2Rpdi5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpO1x0XHJcblx0ICB9IGVsc2VcclxuXHQgIHtcclxuXHRcdGlmKCgkKHRoaXMpLmlzKCcucmVxdWlyZWQnKSkmJih2YWxfaW5wdXQhPScnKSlcclxuXHRcdHtcclxuXHRcdCAgaW5wdXRfZGl2LnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHJcblx0XHR9XHJcblx0ICB9XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdCAgaWYoKCQodGhpcykuaXMoJy5yZXF1aXJlZCcpKSYmKCh2YWxfaW5wdXQ9PScnKXx8KHZhbF9pbnB1dD09J9C00LQu0LzQvC7Qs9Cz0LPQsycpKSYmKCFpbnB1dF9kaXYuaXMoJy5yZXF1aXJlZF9pbl8yMDE4JykpKVxyXG5cdCAge1xyXG5cdFx0aW5wdXRfZGl2LmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHRcclxuXHQgIH0gZWxzZVxyXG5cdCAge1xyXG5cdFx0aWYoKCQodGhpcykuaXMoJy5yZXF1aXJlZCcpKSYmKHZhbF9pbnB1dCE9JycpJiYodmFsX2lucHV0IT0n0LTQtC7QvNC8LtCz0LPQs9CzJykpXHJcblx0XHR7XHJcblx0XHQgIGlucHV0X2Rpdi5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpO1xyXG5cdFx0fVxyXG5cdCAgfVxyXG5cdFx0XHJcblx0XHRcclxuXHR9XHJcblx0XHQqL1xyXG5cdHZhciB2YWxfaW5wdXQ9JCh0aGlzKS52YWwoKTtcclxuXHR2YXIgbGFiZWw9JCh0aGlzKS5wcmV2KCdsYWJlbCcpO1xyXG5cdHZhciBpbnB1dF9kaXY9JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAxOCcpO1xyXG5cclxuXHRpbnB1dF9kaXYucmVtb3ZlQ2xhc3MoJ2FjdGl2ZTFfaW5fMjAxOCcpO1xyXG5cclxuXHRpZih2YWxfaW5wdXQ9PScnKVxyXG5cdHtcclxuXHRcdGlucHV0X2Rpdi5yZW1vdmVDbGFzcygnYWN0aXZlX2luXzIwMTgnKTtcclxuXHRcdGlmKCQodGhpcykuaXMoJy5nbG9hYicpKVxyXG5cdFx0e1xyXG5cdFx0XHRpbnB1dF9kaXYuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuXHRcdH1lbHNlXHJcblx0XHR7XHJcblx0XHRcdGlucHV0X2Rpdi5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxufVxyXG5cclxuXHJcblxyXG4vL9GD0LTQsNC70LjRgtGMINGE0L7RgtC+INC40Lcg0L3QsNC60LvQsNC00L3QvtC5XHJcbmZ1bmN0aW9uIERlbGxJbWFnZUludm9pY2UoKVxyXG57XHJcblx0dmFyIGZvcl9pZD0kKHRoaXMpLmF0dHIoJ2ZvcicpO1xyXG5cdHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2Zvcl9pZDtcclxuICAgIEFqYXhDbGllbnQoJ2ludm9pY2VzJywnZGVsX2ltZycsJ0dFVCcsZGF0YSwnQWZ0ZXJEZWxsSW1hZ2VJbnZvaWNlJyxmb3JfaWQsMCk7XHRcclxufVxyXG5cclxuLy/QuNC30LzQtdC90LjRgtGMINC/0L7RgdGC0LDQstGJ0LjQutCwINCyINC90LDRgNGP0LTQsNGFXHJcbmZ1bmN0aW9uIFVwZGF0ZUNvbnRyYWN0b3JJbnZvaWNlKClcclxue1xyXG5cdHZhciB2YWw9JCh0aGlzKS52YWwoKTtcclxuXHRpZigoJC5pc051bWVyaWModmFsKSkmJih2YWwhPTApKVxyXG5cdHtcclxuXHRcdCQoJy5hZGRfbWF0ZXJpYWxfaW52b2ljZScpLmF0dHIoJ2NvbCcsdmFsKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gRGVsbEltYWdlU3VwcGx5KClcclxue1xyXG5cdHZhciBmb3JfaWQ9JCh0aGlzKS5hdHRyKCdmb3InKTtcclxuXHR2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9Jytmb3JfaWQ7XHJcbiAgICBBamF4Q2xpZW50KCdzdXBwbHknLCdkZWxfaW1nJywnR0VUJyxkYXRhLCdBZnRlckRlbGxJbWFnZVN1cHBseScsZm9yX2lkLDApO1x0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFVwZGF0ZUltYWdlU3VwcGx5KGlkKVxyXG57XHJcblx0dmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWQ7XHJcbiAgICBBamF4Q2xpZW50KCdzdXBwbHknLCd1cGRhdGVfaW1nJywnR0VUJyxkYXRhLCdBZnRlclVwZGF0ZUltYWdlU3VwcGx5JyxpZCwwKTtcdFxyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVJbWFnZUludm9pY2UoaWQpXHJcbntcclxuXHR2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9JytpZDtcclxuICAgIEFqYXhDbGllbnQoJ2ludm9pY2VzJywndXBkYXRlX2ltZycsJ0dFVCcsZGF0YSwnQWZ0ZXJVcGRhdGVJbWFnZUludm9pY2UnLGlkLDApO1x0XHJcbn1cclxuXHJcbi8v0L7QsdC90LDQstC70LXQvdC40LUg0YHRgtCw0YLRg9GB0LAg0LIg0YHRh9C10YLQsNGFINC/0L7RgdC70LUgXCLQuiDQvtC/0LvQsNGC0LVcIlxyXG5mdW5jdGlvbiBVcGRhdGVXYWxsZXRTdGF0dXMoaWQpXHJcbntcclxuXHQkKCcuYmlsbGxbcmVsX2lkPScraWQrJ10nKS5maW5kKCcuc3RhdHVzX3dhbGxldF9hZGEnKS5lbXB0eSgpO1xyXG5cdCQoJy5iaWxsbFtyZWxfaWQ9JytpZCsnXScpLmZpbmQoJy5idXR0b25fYWRhX3dhbGwnKS5lbXB0eSgpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxvYWRlcl9pbnRlclwiPjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblx0XHJcblx0dmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWQ7XHRcdFx0XHJcblx0XHJcbiAgICBBamF4Q2xpZW50KCdiaWxsJywnYmlsbF9zdGF0dXMnLCdHRVQnLGRhdGEsJ0FmdGVyV2FsbGV0U1R4JyxpZCwwKTtcdFxyXG59XHJcblxyXG5mdW5jdGlvbiBtZXNzYWdlX2xvYWQoKVxyXG57XHJcblx0aWYoICQoJy5oaXN0b3J5X21lc3NhZ2UnKS5pcygnOnZpc2libGUnKSApIHsgXHJcblx0JCgnLmhpc3RvcnlfbWVzc2FnZScpLmhpZGUoKTtcclxuXHRcclxuXHR2YXIgZm9yX2lkPSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignaWRfY29udGVudCcpO1x0XHJcbiAgICB2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9Jytmb3JfaWQrJyZuX3N0PScrJCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCduJykrJyZzPScrJCgnLmhpc3RvcnlfbWVzc2FnZScpLmF0dHIoJ3NfbScpO1xyXG4gICAgQWpheENsaWVudCgnbWVzc2FnZScsJ2xvYWRfbWVzc2FnZScsJ0dFVCcsZGF0YSwnQWZ0ZXJNRVNTJyxmb3JfaWQsMCk7XHRcclxuXHR9XHJcbn1cclxuXHJcbi8v0Log0L7Qv9C70LDRgtC1INGB0YfQtdGCXHJcbmZ1bmN0aW9uIHh2Z195ZXMoKVxyXG57XHJcblx0dmFyIGl1PSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignaXUnKTtcclxuXHR2YXIgaWRfYmlsbD0kKHRoaXMpLmF0dHIoJ3JlbF9iaWxsJyk7XHJcblx0XHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX3llc19iaWxsLnBocD9pZD0nK2lkX2JpbGwsXHJcblx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHR9XHJcblxyXG4gIH0pO1xyXG5cdFxyXG59XHJcblxyXG5cclxuLy/QvtC/0LvQsNGC0LjRgtGMINCx0YPRhdCz0LDQu9GC0LXRgNC40Y9cclxuZnVuY3Rpb24gYm9va2VyX3llcygpXHJcbntcclxuXHR2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG5cdHZhciBpZF9iaWxsPSQodGhpcykuYXR0cigncmVsX2Jvb2tlcicpO1xyXG5cclxuXHQkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fYm9va2VyX3llcy5waHA/aWQ9JytpZF9iaWxsLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuICB9KTtcclxuXHQgXHRcdFxyXG5cdFx0XHJcblx0XHRcclxuXHRcclxuXHRcclxufVxyXG5cclxuLy/QuNC30LzQtdC90LjRgtGMINC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDQuNC3INGB0LrQu9Cw0LTQsFxyXG5mdW5jdGlvbiB4dmdfeWVzMSgpXHJcbntcclxuXHJcblx0dmFyIGF0dHI9JCh0aGlzKS5hdHRyKCdyZWxfYmlsbCcpO1xyXG5cclxuXHQkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZWRpdF9zdG9jay5waHA/aWQ9JythdHRyLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuICB9KTtcclxuXHRcclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0LjQtyDRgdC60LvQsNC00LBcclxuZnVuY3Rpb24geHZnX25vMSgpXHJcbntcclxuXHR2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG5cdHZhciBpZF9iaWxsPSQodGhpcykuYXR0cigncmVsX2JpbGwnKTtcclxuXHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfc3RvY2sucGhwP2lkPScraWRfYmlsbCxcclxuXHRcdGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHRcdGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0XHRpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEJvZHlTY3Jvb2woKTtcclxuXHRcdH1cclxuXHJcbiAgfSk7XHJcblx0IFx0XHRcclxuXHRcdFxyXG5cdFx0XHJcblx0XHJcblx0XHJcbn1cclxuXHJcblxyXG5cclxuLy/QvtGC0LzQtdC90LjRgtGMINC+0L/Qu9Cw0YLRgyDQv9C+INGB0YfQtdGC0YNcclxuZnVuY3Rpb24geHZnX25vKClcclxue1xyXG5cdHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcblx0dmFyIGlkX2JpbGw9JCh0aGlzKS5hdHRyKCdyZWxfYmlsbCcpO1xyXG5cclxuXHQkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fbm9fYmlsbC5waHA/aWQ9JytpZF9iaWxsLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuICB9KTtcclxuXHQgXHRcdFxyXG5cdFx0XHJcblx0XHRcclxuXHRcclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHZhbGxfc3VwcGx5KCkgeyAgXHJcblx0dmFyIGVsX3Y9JCh0aGlzKS52YWwoKTtcclxuXHRcclxuXHRcclxuXHQkKCdbcmVsX3N0YXR1cz0nKyQodGhpcykuYXR0cigncmVsJykrJ10nKS5oaWRlKCk7XHJcblx0dmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScrJCh0aGlzKS5hdHRyKCdyZWwnKSsnJnZhbD0nK2VsX3Y7XHJcblx0QWpheENsaWVudCgnc3VwcGx5Jywnc3RhdHVzX3dvcmsnLCdHRVQnLGRhdGEsJ0FmdGVydmFsbF9zdXBwbHknLCQodGhpcykuYXR0cigncmVsJyksMCk7XHRcdFx0XHJcbn07XHJcblxyXG5mdW5jdGlvbiBvcHRpb25fbWF0MSgpIHtcclxuXHR2YXIgZWxfdj0kKHRoaXMpLnZhbCgpO1xyXG5cdHZhciBpZF9iaWxsPSQodGhpcykucGFyZW50cygnW3JlbF9pZF0nKS5hdHRyKCdyZWxfaWQnKTtcclxuXHQvL3ZhciBpZF9zb3BseT1zb3BseS5hdHRyKCdyZWxfc2NvcmUnKTtcclxuXHJcblx0XHRcclxuXHRcclxuXHRpZihlbF92PT0xKVx0XHJcblx0e1xyXG5cdFx0Ly/QuNC30LzQtdC90LjRgtGMIFxyXG5cdFx0XHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2VkaXRfeWVzX2JpbGwucGhwP2lkPScraWRfYmlsbCxcclxuXHRcdGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHRcdGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0XHRpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEJvZHlTY3Jvb2woKTtcclxuXHRcdH1cclxuXHJcbiAgfSk7XHJcblx0XHRcclxuXHRcdC8vdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWRfc29wbHk7XHJcblx0ICAgIC8vQWpheENsaWVudCgnc3VwcGx5JywnZGVsbF9zb3BseScsJ0dFVCcsZGF0YSwnQWZ0ZXJkZWxsX3NvcGx5JyxpZF9zb3BseSwwKTtcdFx0XHJcblx0XHRcclxuXHR9XHJcblx0XHRpZihlbF92PT0yKVx0XHJcblx0e1xyXG5cdFx0Ly/QvtGC0LzQtdC90LjRgtGMINC+0L/Qu9Cw0YLRg1xyXG5cdCQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX3llc19iaWxsLnBocD9pZD0nK2lkX2JpbGwsXHJcblx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHR9XHJcblxyXG4gIH0pO1x0XHJcblx0fVxyXG5cdFxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIG9wdGlvbl9tYXQoKSB7XHJcblx0dmFyIGVsX3Y9JCh0aGlzKS52YWwoKTtcclxuXHR2YXIgaWRfc29wbHk9JCh0aGlzKS5wYXJlbnRzKCdbc3VwcGx5X2lkXScpLmF0dHIoJ3N1cHBseV9pZCcpO1xyXG5cdC8vdmFyIGlkX3NvcGx5PXNvcGx5LmF0dHIoJ3JlbF9zY29yZScpO1xyXG5cclxuXHRcclxuXHRpZihlbF92PT0xKVx0XHJcblx0e1xyXG5cdFx0Ly/Rg9C00LDQu9C40YLRjCDRgdGH0LXRglxyXG5cdFx0XHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX3NvcGx5X3NrbGFkXzIwMjEucGhwP2lkPScraWRfc29wbHksXHJcblx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHR9XHJcblxyXG4gIH0pO1xyXG5cdFx0XHJcblx0XHQvL3ZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2lkX3NvcGx5O1xyXG5cdCAgICAvL0FqYXhDbGllbnQoJ3N1cHBseScsJ2RlbGxfc29wbHknLCdHRVQnLGRhdGEsJ0FmdGVyZGVsbF9zb3BseScsaWRfc29wbHksMCk7XHRcdFxyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdFxyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVDb3N0RmluZXJ5KGlkKVxyXG57XHJcblxyXG5cdHZhciBjb3VudD1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLtCwbWF0ZXJfJykudmFsKCkpO1xyXG5cdHZhciBjb3VudF9teT1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdteScpKTtcclxuXHR2YXIgaWRfc3RvY2s9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJ1tpZF9zdG9ja19tXScpLmF0dHIoJ2lkX3N0b2NrX20nKSk7XHJcblx0XHJcblx0Ly9hbGVydChjb3VudF9teSk7XHJcblx0XHJcblx0aWYoKGNvdW50IT0nJykmJihjb3VudCE9MCkmJihpZF9zdG9jayE9JycpJiYoaWRfc3RvY2shPTApJiYoY291bnRfbXkhPScnKSYmKGNvdW50X215IT0wKSYmKGNvdW50X215Pj1jb3VudCkpXHJcbiAgICB7XHJcblx0XHQkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykudmFsKCcnKTtcclxuXHRcdC8vYWxlcnQoXCIhIVwiKTtcclxuXHRcdFxyXG5cdFx0XHR2YXIgcmVsX2lkPSQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5wYXJlbnRzKCcubWF0JykuYXR0cigncmVsX3cnKTtcclxuXHR2YXIgcmVsX21hdD0kKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucGFyZW50cygnLm1hdCcpLmF0dHIoJ3JlbF9tYXQnKTtcclxuXHRcclxuXHR2YXIgbWF4PXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScraWQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmF0dHIoJ21heCcpKTtcclxuXHR2YXIgbXk9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYXR0cignbXknKSk7XHJcblx0XHJcblx0dmFyIHZhbHVlPSQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcdFxyXG5cdCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5yZW1vdmVDbGFzcygncmVkYWFzJyk7XHJcblx0aWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG5cdHtcclxuXHRcdC8vaWYoKChwYXJzZUZsb2F0KHZhbHVlKSE9bWF4KSYmKCFpc05hTihtYXgpKSl8fChwYXJzZUZsb2F0KHZhbHVlKT5teSkpXHJcblx0XHRcdGlmKCgocGFyc2VGbG9hdCh2YWx1ZSkhPW1heCkmJighaXNOYU4obWF4KSkpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly/QstGL0LTQtdC70Y/QtdC8INC60YDQsNGB0L3Ri9C8INC4INC+0YLQutGA0YvQstCw0LXQvCDRgdC70YPQttC10LHQvdGD0Y4g0LfQsNC/0LjRgdC60YNcclxuXHRcdFx0XHQkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYWRkQ2xhc3MoJ3JlZGFhcycpO1xyXG5cclxuXHRcdFx0fSBcclxuXHRcdFx0XHRcclxuXHR9IFxyXG5cdFx0XHJcblx0XHRzZXJ2X21lc3NfbSgkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykpO1xyXG5cdFx0c3VtbV9maW5lcnkxKGlkKTtcclxuXHRcdFxyXG5cdFx0aWYoJCgnW25hbWU9aWRfbmFhXScpLmxlbmd0aCE9MClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCBcdHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2lkX3N0b2NrKycmY291bnQ9Jytjb3VudCsnJmZpbj0nKyQoJ1tuYW1lPWlkX25hYV0nKS52YWwoKTtcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHJcblx0XHRcclxuXHQgICBcdHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2lkX3N0b2NrKycmY291bnQ9Jytjb3VudDtcclxuXHQgICAgXHJcblx0XHRcdFx0fVxyXG5cdFx0QWpheENsaWVudCgnZmluZXJ5JywndXBkYXRlX2Nvc3QnLCdHRVQnLGRhdGEsJ0FmdGVyVXBkYXRlQ29zdEZpbmVyeScsaWQsMCk7XHRcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHJcblx0XHRpZigkKCdbbmFtZT1zdGF0dXNfbmFyeWFkXScpLmxlbmd0aD09MClcclxuXHRcdHtcdFxyXG5cdCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoJycpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0dmFyIHJlbF9pZD0kKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucGFyZW50cygnLm1hdCcpLmF0dHIoJ3JlbF93Jyk7XHJcblx0dmFyIHJlbF9tYXQ9JCgnLm1hdFtyZWxfbWF0PScraWQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnBhcmVudHMoJy5tYXQnKS5hdHRyKCdyZWxfbWF0Jyk7XHJcblx0XHJcblx0dmFyIG1heD1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdtYXgnKSk7XHJcblx0dmFyIG15PXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScraWQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmF0dHIoJ215JykpO1xyXG5cdFxyXG5cdHZhciB2YWx1ZT0kKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHRcclxuXHQkKCcubWF0W3JlbF9tYXQ9JytpZCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdGlmKCh2YWx1ZSE9MCkmJih2YWx1ZSE9JycpJiYoJC5pc051bWVyaWModmFsdWUpKSlcclxuXHR7XHJcblx0XHQvL2lmKCgocGFyc2VGbG9hdCh2YWx1ZSkhPW1heCkmJighaXNOYU4obWF4KSkpfHwocGFyc2VGbG9hdCh2YWx1ZSk+bXkpKVxyXG5cdFx0XHRpZigoKHBhcnNlRmxvYXQodmFsdWUpIT1tYXgpJiYoIWlzTmFOKG1heCkpKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8v0LLRi9C00LXQu9GP0LXQvCDQutGA0LDRgdC90YvQvCDQuCDQvtGC0LrRgNGL0LLQsNC10Lwg0YHQu9GD0LbQtdCx0L3Rg9GOINC30LDQv9C40YHQutGDXHJcblx0XHRcdFx0JCgnLm1hdFtyZWxfbWF0PScraWQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmFkZENsYXNzKCdyZWRhYXMnKTtcclxuXHJcblx0XHRcdH0gXHJcblx0XHRcdFx0XHJcblx0fSBcdFxyXG5cdFx0XHJcblxyXG5cdCAgIHNlcnZfbWVzc19tKCQoJy5tYXRbcmVsX21hdD0nK2lkKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKSk7XHJcblx0ICAgc3VtbV9maW5lcnkxKGlkKTtcclxuXHJcblxyXG5cdH1cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB4dmdfYmlsbCgpXHJcbntcclxuXHR2YXIgaWRfc29wbHk9JCh0aGlzKS5hdHRyKCdyZWxfc2NvcmUnKTtcclxuXHRcclxuXHRqUXVlcnkuc2Nyb2xsVG8oJy5iaWxsbFtyZWxfaWQ9JytpZF9zb3BseSsnXScsIDEwMDAsIHtvZmZzZXQ6LTEyMH0pO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBzY3JvbGxfdG9fYm90dG9tKHNwZWVkKSB7XHJcblx0dmFyIGhlaWdodD0gJChcImJvZHlcIikuaGVpZ2h0KCk7IFxyXG5cdCQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZSh7XCJzY3JvbGxUb3BcIjpoZWlnaHR9LHNwZWVkKTsgXHJcbn1cclxuXHJcbiBmdW5jdGlvbiBpbldpbmRvdyhzKXtcclxuICB2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gIHZhciB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgdmFyIGN1cnJlbnRFbHMgPSAkKHMpO1xyXG4gIHZhciByZXN1bHQgPSBbXTtcclxuICBjdXJyZW50RWxzLmVhY2goZnVuY3Rpb24oKXtcclxuICAgIHZhciBlbCA9ICQodGhpcyk7XHJcbiAgICB2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7XHJcbiAgICBpZihzY3JvbGxUb3AgPD0gb2Zmc2V0LnRvcCAmJiAoZWwuaGVpZ2h0KCkgKyBvZmZzZXQudG9wKSA8IChzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQpKVxyXG4gICAgICByZXN1bHQucHVzaCh0aGlzKTtcclxuICB9KTtcclxuICByZXR1cm4gJChyZXN1bHQpO1xyXG4gIFxyXG5cclxufVxyXG4vL9C40LfQvNC10L3QtdC90LjQtSDRgNCw0LfQvNC10YDQvtCyINCx0YDQsNGD0LfQtdGA0LBcclxuZnVuY3Rpb24gd2luZG93U2l6ZSgpXHJcbntcclxuICBzbF9tZXNzYWdlX3dpZHRoKCk7XHRcclxufVxyXG5cclxuZnVuY3Rpb24gdHJpbV9udW1iZXIoJG51bWJlcilcclxue1xyXG5cdCRudW1iZXI9JG51bWJlci5yZXBsYWNlKC9cXHMrL2csJycpO1xyXG5cdHJldHVybiAkbnVtYmVyO1xyXG59XHJcblxyXG4vL9C/0LXRgNC10YXQvtC0INC/0L4g0LTQuNCw0LvQvtCz0YMg0LIg0YHQvtC+0LHRidC10L3QuNGP0YVcclxuZnVuY3Rpb24gRGlhbG9nKGUpXHJcbntcclxuICBpZigkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLmRlbF9kaWFsb2dcIikubGVuZ3RoPT0wKVxyXG4gIHtcclxuXHR2YXIgZGlhbG9nX2lkPSQodGhpcykuYXR0cigncmVsX2RpYWdvbCcpO1xyXG5cdCQodGhpcykuYXR0cignaHJlZicsJy9tZXNzYWdlL2RpYWxvZy8nK2RpYWxvZ19pZCsnLycpO1xyXG5cdCQodGhpcykudHJpZ2dlcignQ2xpY2snKTtcclxuXHJcbiAgfVxyXG59XHJcbi8v0LDQvdC40LzQsNGG0LjRjyDQt9Cw0LPRgNGD0LfRh9C40LrQsCDQutC+0LvQuNGH0LXRgdCy0YLQsCDQstGL0L/QvtC70L3QtdC90L3Ri9GFINGA0LDQsdC+0YLRi1xyXG5mdW5jdGlvbiBhbmltYXRpb25fdGVwcygpXHJcbntcclxuXHQkKCcudGVwcycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHQkKHRoaXMpLmNzcygnd2lkdGgnLCAkKHRoaXMpLmF0dHIoJ3JlbF93JykrXCIlXCIpO1xyXG5cdFx0Ly8kKHRoaXMpLmFuaW1hdGUoe3dpZHRoOiAkKHRoaXMpLmF0dHIoJ3JlbF93JykrXCIlXCJ9LCAyMDAwLCBmdW5jdGlvbigpIHsgIH0pO1xyXG5cdH0pO1xyXG5cclxuXHJcbn1cclxuXHJcbi8v0L/RgNC40LLQtdC00LXQvdC40LUg0YHQu9GD0LbQtdCx0YvRhSDQt9Cw0L/QuNGB0L7QuiDQuiDQvdGD0LbQvdC+0LzRgyDQstC40LTRg1xyXG5mdW5jdGlvbiBzbF9tZXNzYWdlX3dpZHRoKClcclxue1xyXG5cdHNldFRpbWVvdXQgKCBmdW5jdGlvbiAoKSB7ICBcclxuXHRpZigkKCcuc21ldGExJykubGVuZ3RoKVxyXG5cdFx0e1xyXG5cdHZhciB3aWR0aF9qazQ9JCgnLnNtZXRhMScpLmZpbmQoJy5qazQnKS5vdXRlcldpZHRoKCk7ICAvL9GB0YLQvtC70LHQuNC6INC90LDQt9Cy0LDQvdC40LVcclxuXHR2YXIgd2lkdGhfams0ND0kKCcuc21ldGExJykuZmluZCgnLmprNDQnKS5vdXRlcldpZHRoKCk7IC8v0YHRgtC+0LvQsdC40Log0LXQtC4g0LjQt9C8XHJcblx0XHRcdFxyXG5cdC8vdmFyIHdpZHRoX2prNT0kKCcuc21ldGExJykuZmluZCgnLmprNScpLm91dGVyV2lkdGgoKTtcclxuXHQvL3ZhciB3aWR0aF9qazY9JCgnLnNtZXRhMScpLmZpbmQoJy5qazYnKS5vdXRlcldpZHRoKCk7XHJcblx0XHJcbiAgICB2YXIgd2lkdGhfams3PSQoJy5zbWV0YTEnKS5maW5kKCcuams2Jykub3V0ZXJXaWR0aCgpO1x0IC8v0YHRgtC+0LvQsdC40Log0YPQtNCw0LvQuNGC0YxcdFxyXG5cdHZhciB0YWJsZT0kKCcuc21ldGExJykud2lkdGgoKTsgIC8v0L7QsdGJ0LDRjyDRiNC40YDQuNC90LBcclxuXHQvL2FsZXJ0KHRhYmxlKTtcdFxyXG5cdHZhciB3dz10YWJsZS13aWR0aF9qazQtd2lkdGhfams0NC13aWR0aF9qazctMjA7XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHQkKCcuc21ldGExJykuZmluZCgnLm1lc3Nfc2x1Jykud2lkdGgod3cpO1xyXG5cdFx0XHRcclxuXHQkKCcuc21ldGExJykuZmluZCgnLmhzJykud2lkdGgoKHdpZHRoX2prNCt3aWR0aF9qazQ0KSk7XHJcblx0XHR9XHJcblx0XHJcbiAgIH0sIDEwMDAgKTtcclxuXHRcclxufVxyXG5cclxuLy/QvNCw0YHQutCwINCy0LLQvtC00LjRgtGMINGC0L7Qu9GM0LrQviDRhtC10LvRi9C1INC4IGZsb2F0XHJcbmZ1bmN0aW9uIG1hc2trKHRoaXNzKVxyXG57XHJcblx0dGhpc3MudmFsKHRoaXNzLnZhbCgpLnJlcGxhY2UoL1teXFxkLl0qL2csICcnKS5yZXBsYWNlKC8oWy5dKVsuXSsvZywgJyQxJykucmVwbGFjZSgvXlteXFxkXSooXFxkKyhbLl1cXGR7MCw1fSk/KS4qJC9nLCAnJDEnKSk7XHJcblx0Ly9hbGVydCh0aGlzcy52YWwoKSk7XHJcblx0aWYoJCgnW25hbWU9c2F2ZV96YXl5XScpLmxlbmd0aCA+IDApXHJcblx0XHR7XHJcblx0c2F2ZWRlZmF1bHRfemF5KHRoaXNzKTtcclxuXHRcdH0gZWxzZVxyXG5cdFx0XHR7XHJcbiAgICBzYXZlZGVmYXVsdCh0aGlzcyk7XHJcblx0XHRcdH1cclxuXHRcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG1hc2trX21heCh0aGlzcylcclxue1xyXG5cdFxyXG5cdHZhciBtYXhfPTA7XHJcblx0Ly9hbGVydChcIiFcIik7XHJcblx0dmFyIGNvdW50PXBhcnNlRmxvYXQodGhpc3MudmFsKCkpO1xyXG5cdC8vYWxlcnQoY291bnQpO1xyXG52YXIgcmVhZG9ubHk9MDsgLy/Qv9C+INGD0LzQvtC70YfQsNC90LjRjiDRgNC10LTQsNC60YLQuNGA0YPQtdC80L7QtSDQv9C+0LvQtVxyXG5cdGlmICggdGhpc3MuaXMoJ1tyZWFkb25seV0nKSApIHsgcmVhZG9ubHk9MTsgfVxyXG5cclxuXHRpZihjb3VudD4wKVxyXG5cdFx0e1xyXG5cdFxyXG5cdHZhciBtYXQ9dGhpc3MucGFyZW50cygnLm1hdCcpO1x0XHJcblx0dmFyIGlkX3N0b2NrPW1hdC5maW5kKCcubXlfbWF0ZXJpYWwnKS5hdHRyKCdpZF9zdG9ja19tJyk7XHJcblx0dmFyIG15X3N0b2NrPW1hdC5maW5kKCcubXlfbWF0ZXJpYWwnKS5hdHRyKCdjb3VudCcpO1xyXG5cdFxyXG5cdFxyXG5cdCQoJ1tpZF9zdG9ja19tPScraWRfc3RvY2srJ10nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0XHR2YXIgY291bnRfaW5wdXQ9cGFyc2VGbG9hdCgkKHRoaXMpLnBhcmVudHMoJy5tYXQnKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnZhbCgpKTtcclxuXHRcdCAgICBpZigoY291bnRfaW5wdXQhPScnKSYmKGNvdW50X2lucHV0PjApKVxyXG5cdFx0XHR7XHJcblx0XHQgICAgICAgbWF4Xz1tYXhfICsgcGFyc2VGbG9hdChjb3VudF9pbnB1dCk7XHJcblx0XHRcdH1cclxuICAgIH0pO1xyXG5cdG1heF89bWF4Xy1cdGNvdW50O1x0XHJcblxyXG5cclxuXHQvL9C10YHQu9C4INC/0L7Qu9C1INC/0YDQvtGB0YLQviDQtNC70Y8g0YfRgtC10L3QuNGPINGC0L4g0YPQttC1INC90LUg0L3QsNC00L4g0LXQs9C+INGA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMXHJcblxyXG5pZihyZWFkb25seT09MCkge1xyXG5cdGlmICgoY291bnQgKyBtYXhfKSA+IHBhcnNlRmxvYXQobXlfc3RvY2spKSB7XHJcblx0XHQvL2FsZXJ0KG1heF8pO1xyXG5cdFx0Ly9hbGVydChjb3VudCk7XHJcblx0XHR0aGlzcy52YWwodGhpc3MudmFsKCkuc2xpY2UoMCwgLTEpKTtcclxuXHR9XHJcbn1cclxuXHRcdFx0XHJcblx0XHRcdFxyXG4gfVxyXG5cclxuXHRcclxuXHRcclxuXHR2YXIgbWF4Xz0wO1xyXG5cdC8vYWxlcnQoXCIhXCIpO1xyXG5cdHZhciBjb3VudD1wYXJzZUZsb2F0KHRoaXNzLnZhbCgpKTtcclxuXHQvL2FsZXJ0KGNvdW50KTtcclxuXHRpZihjb3VudD4wKVxyXG5cdFx0e1xyXG5cdFxyXG5cdHZhciBtYXQ9dGhpc3MucGFyZW50cygnLm1hdCcpO1x0XHJcblx0dmFyIGlkX3N0b2NrPW1hdC5maW5kKCcubXlfbWF0ZXJpYWwnKS5hdHRyKCdpZF9zdG9ja19tJyk7XHJcblx0dmFyIG15X3N0b2NrPW1hdC5maW5kKCcubXlfbWF0ZXJpYWwnKS5hdHRyKCdjb3VudCcpO1xyXG5cdFxyXG5cdFxyXG5cdCQoJ1tpZF9zdG9ja19tPScraWRfc3RvY2srJ10nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0XHR2YXIgY291bnRfaW5wdXQ9cGFyc2VGbG9hdCgkKHRoaXMpLnBhcmVudHMoJy5tYXQnKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnZhbCgpKTtcclxuXHRcdCAgICBpZigoY291bnRfaW5wdXQhPScnKSYmKGNvdW50X2lucHV0PjApKVxyXG5cdFx0XHR7XHJcblx0XHQgICAgICAgbWF4Xz1tYXhfICsgcGFyc2VGbG9hdChjb3VudF9pbnB1dCk7XHJcblx0XHRcdH1cclxuICAgIH0pO1xyXG5cdG1heF89bWF4Xy1cdGNvdW50O1xyXG5cclxuXHRcdFx0aWYocmVhZG9ubHk9PTApIHtcclxuXHRcdFx0XHRpZiAoKGNvdW50ICsgbWF4XykgPiBwYXJzZUZsb2F0KG15X3N0b2NrKSkge1xyXG5cdFx0XHRcdFx0Ly9hbGVydChtYXhfKTtcclxuXHRcdFx0XHRcdC8vYWxlcnQoY291bnQpO1xyXG5cdFx0XHRcdFx0dGhpc3MudmFsKCcnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdFxyXG4gfVxyXG5cdFx0XHJcblx0XHJcblx0XHJcbn1cclxuXHJcblxyXG4vL9C80LDRgdC60LAg0LLQstC+0LTQuNGC0Ywg0YLQvtC70YzQutC+INGG0LXQu9GL0LVcclxuZnVuY3Rpb24gbWFza2sxKHRoaXNzKVxyXG57XHJcblx0Ly9jb25zb2xlLmxvZyh0aGlzcy52YWwoKSk7XHJcblx0dGhpc3MudmFsKHRoaXNzLnZhbCgpLnJlcGxhY2UoL1teXFxkXSovZywgJycpLnJlcGxhY2UoLyhbXSlbXSsvZywgJyQxJykucmVwbGFjZSgvXlteXFxkXSooXFxkKyhbXVxcZHswLDV9KT8pLiokL2csICckMScpKTtcclxuXHJcblx0Ly9jb25zb2xlLmxvZyh0aGlzcy52YWwoKSk7XHJcblxyXG5cdFx0aWYoJCgnW25hbWU9c2F2ZV96YXl5XScpLmxlbmd0aCA+IDApXHJcblx0XHR7XHJcblx0c2F2ZWRlZmF1bHRfemF5KHRoaXNzKTtcclxuXHRcdH0gZWxzZVxyXG5cdFx0XHR7XHJcblx0c2F2ZWRlZmF1bHQodGhpc3MpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxufVxyXG5cclxuXHJcbnZhciBDaGFuZ2VTdXBwbHk9ZnVuY3Rpb24oKSB7XHJcblx0dmFyIHRyX3M9JCh0aGlzKS5wYXJlbnRzKCcuc3VwcHBfdHInKTtcclxuXHR2YXIgcmVsX3RyX3M9dHJfcy5hdHRyKCdyZWxfaWQnKTtcclxuXHRpZighdHJfcy5pcygnLmFjdGl2ZV9zdXBwbHl4JykpXHJcblx0e1xyXG5cdCAgdHJfcy5hZGRDbGFzcygnYWN0aXZlX3N1cHBseXgnKTtcclxuXHRcdCQoJ1tzdXBwbHlfc3RvY2s9JytyZWxfdHJfcysnXScpLnNob3coKTtcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHR0cl9zLnJlbW92ZUNsYXNzKCdhY3RpdmVfc3VwcGx5eCcpO1xyXG5cdFx0JCgnW3N1cHBseV9zdG9jaz0nK3JlbF90cl9zKyddJykuaGlkZSgpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbnZhciBzbGlkZV9za2trID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0aWYoISQodGhpcykuaXMoJy5zbGlkZV9vbm9uJykpXHJcblx0e1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuc2tsYWRfcGx1c191c3MnKS5zbGlkZURvd24oIFwic2xvd1wiICk7IFxyXG5cdFx0JCh0aGlzKS5hZGRDbGFzcygnc2xpZGVfb25vbicpO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdCQodGhpcykuZmluZCgnLnNrbGFkX3BsdXNfdXNzJykuc2xpZGVVcChcInNsb3dcIik7IFxyXG5cdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnc2xpZGVfb25vbicpO1x0XHRcdFxyXG5cdH1cclxuXHRcclxufVxyXG5cclxuLy/RgNCw0YHQutGA0YvQstCw0Y7RidC10LUg0LzQtdC90Y4g0L/QviDQutC90L7Qv9C60LVcclxudmFyIG1lbnVjbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciB0cl9zPSQodGhpcykubmV4dChcIi5tZW51X3N1cHBseVwiKS5maW5kKCcuZHJvcHMnKTtcclxuXHRpZih0cl9zLmlzKFwiLmFjdGl2ZV9tZW51X3NcIikpIFxyXG5cdCAge1xyXG5cdFx0ICB0cl9zLnJlbW92ZUNsYXNzKFwiYWN0aXZlX21lbnVfc1wiKTtcclxuXHRcdCAgdHJfcy5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0ICB9IGVsc2VcclxuXHQgIHtcclxuXHRcdCAgdHJfcy5hZGRDbGFzcyhcImFjdGl2ZV9tZW51X3NcIik7XHJcblx0XHQgIHRyX3MuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDEpXCIpO1xyXG5cdCAgfVxyXG59XHJcblxyXG5cclxuLy/Qv9C+0LrQsNC30LDRgtGMINC/0L7QtNGB0LrQsNC30LrQuCDQuiDQv9C+0LvRj9C8INC/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLINCz0LTQtSDQt9Cw0L/QvtC70L3QtdC90L5cclxudmFyIGxhYmVsX3Nob3dfbG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdCQoJy5sYWJlbF9zJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHRpZigkKHRoaXMpLnByZXYoJ2xhYmVsJykubGVuZ3RoKVxyXG5cdHtcclxuXHQgICBpZigkKHRoaXMpLnZhbCgpPT0nJylcclxuXHRcdCAgIHtcclxuXHRcdFx0ICAgJCh0aGlzKS5wcmV2KCdsYWJlbCcpLmhpZGUoKTtcclxuXHRcdFx0ICAgXHJcblx0XHQgICB9IGVsc2VcclxuXHRcdFx0ICAge1xyXG5cdFx0XHRcdCAgIFxyXG5cdFx0XHRcdCAgICQodGhpcykucHJldignbGFiZWwnKS5zaG93KCk7XHJcblx0XHRcdCAgIH1cclxuXHRcclxuXHR9XHJcblx0XHJcblx0fSk7XHJcblx0XHJcbn1cclxuXHJcblxyXG4vL9C/0L7QtNGB0LrQsNC30LrQuCDQv9C+0LQg0LjQvdC/0YPRgiDQv9C+0LvRj1xyXG52YXIgbGFiZWxfc2hvdyA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdFxyXG5cdGlmKCQodGhpcykucHJldignbGFiZWwnKS5sZW5ndGgpXHJcblx0e1xyXG5cdCAgIGlmKCQodGhpcykudmFsKCk9PScnKVxyXG5cdFx0ICAge1xyXG5cdFx0XHQgICAkKHRoaXMpLnByZXYoJ2xhYmVsJykuaGlkZSgpO1xyXG5cdFx0XHQgICBcclxuXHRcdCAgIH0gZWxzZVxyXG5cdFx0XHQgICB7XHJcblx0XHRcdFx0ICAgXHJcblx0XHRcdFx0ICAgJCh0aGlzKS5wcmV2KCdsYWJlbCcpLnNob3coKTtcclxuXHRcdFx0ICAgfVxyXG5cdFxyXG5cdH1cclxuXHRcclxuXHRcclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBNeWRibGNsaWNrWFgoKVxyXG57XHJcbnZhciBtYXhfPTA7XHJcblx0aWYoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpIHsgXHJcblx0Ly9hbGVydChcIiFcIik7XHJcblx0dmFyIGNvdW50PSQodGhpcykuYXR0cignbWF4Jyk7XHJcblx0Ly9hbGVydChjb3VudCk7XHJcblxyXG5cdFxyXG5cdHZhciBtYXQ9JCh0aGlzKS5wYXJlbnRzKCcubWF0Jyk7XHRcclxuXHR2YXIgaWRfc3RvY2s9bWF0LmZpbmQoJy5teV9tYXRlcmlhbCcpLmF0dHIoJ2lkX3N0b2NrX20nKTtcclxuXHR2YXIgbXlfc3RvY2s9bWF0LmZpbmQoJy5teV9tYXRlcmlhbCcpLmF0dHIoJ2NvdW50Jyk7XHJcblx0XHJcblx0XHJcblx0JCgnW2lkX3N0b2NrX209JytpZF9zdG9jaysnXScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRcdHZhciBjb3VudF9pbnB1dD1wYXJzZUZsb2F0KCQodGhpcykucGFyZW50cygnLm1hdCcpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykudmFsKCkpO1xyXG5cdFxyXG5cdFx0ICAgIGlmKChjb3VudF9pbnB1dCE9JycpJiYoY291bnRfaW5wdXQ+MCkmJigoIWlzTmFOKGNvdW50X2lucHV0KSkpKVxyXG5cdFx0XHR7XHJcblx0XHQgICAgICAgbWF4Xz1tYXhfICsgcGFyc2VGbG9hdChjb3VudF9pbnB1dCk7XHJcblx0XHRcdH1cclxuICAgIH0pO1xyXG5cdFx0LypcclxuXHRcdGlmKGNvdW50IT0nJylcclxuXHRcdFx0e1xyXG5cdG1heF89bWF4Xy0gcGFyc2VGbG9hdChjb3VudCk7XHRcclxuXHRcdFx0fVxyXG5cdFx0XHQqL1xyXG5cdFx0Ly9hbGVydChtYXhfKTtcclxuXHRcclxuXHRpZihwYXJzZUZsb2F0KGNvdW50K21heF8pPD1wYXJzZUZsb2F0KG15X3N0b2NrKSlcclxuXHR7XHJcblx0XHRcclxuXHRcdCAkKHRoaXMpLnZhbCgkKHRoaXMpLmF0dHIoJ21heCcpKS5jaGFuZ2UoKTtcclxuXHRcdFx0XHRpZigkKCdbbmFtZT1zYXZlX3pheXldJykubGVuZ3RoID4gMClcclxuXHRcdHtcclxuXHRzYXZlZGVmYXVsdF96YXkoJCh0aGlzKSk7XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0e1xyXG5cdCAgIHNhdmVkZWZhdWx0KCQodGhpcykpO1xyXG5cdFx0XHR9XHJcblx0XHRcclxuXHR9XHJcblx0XHRcdFxyXG5cdFx0XHJcblx0XHRcclxuXHRcdFxyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy/QtNCy0L7QudC90L4g0LrQu9C40Log0L/QviDQuNC90L/Rg9GC0YNcclxuZnVuY3Rpb24gTXlkYmxjbGljaygpXHJcbntcclxuXHRpZigkKHRoaXMpLmF0dHIoJ3JlYWRvbmx5Jyk9PXVuZGVmaW5lZCkgeyBcclxuXHQgICAkKHRoaXMpLnZhbCgkKHRoaXMpLmF0dHIoJ21heCcpKS5jaGFuZ2UoKTtcclxuXHRcdFx0XHRpZigkKCdbbmFtZT1zYXZlX3pheXldJykubGVuZ3RoID4gMClcclxuXHRcdHtcclxuXHRzYXZlZGVmYXVsdF96YXkoJCh0aGlzKSk7XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0e1xyXG5cdCAgIHNhdmVkZWZhdWx0KCQodGhpcykpO1xyXG5cdFx0XHR9XHJcblx0fVxyXG5cdFxyXG59XHJcblxyXG4vL9Cy0YvQstC+0LQg0YHQu9GD0LbQtdCx0L3QvtC5INC30LDQv9C40YHQutC4INC/0L4g0YDQsNCx0L7RgtC1XHJcbmZ1bmN0aW9uIHNlcnZfbWVzcyhpZF90cnIpXHJcbntcclxuXHR2YXIgaWRfd29yaz0kKCcud29ya19fc1tpZF90cnI9JytpZF90cnIrJ10nKS5hdHRyKCdyZWxfaWQnKTtcclxuXHR2YXIgY291bnQ9cGFyc2VGbG9hdCgkKCcjY291bnRfd29ya18nK2lkX3RycikudmFsKCkpO1xyXG5cdHZhciBwcmljZT1wYXJzZUZsb2F0KCQoJyNwcmljZV93b3JrXycraWRfdHJyKS52YWwoKSk7XHJcblx0Ly9hbGVydChwcmljZSk7XHJcblx0dmFyIG1heF9jb3VudD1wYXJzZUZsb2F0KCQoJyNjb3VudF93b3JrXycraWRfdHJyKS5hdHRyKCdtYXgnKSk7XHRcclxuXHR2YXIgbWF4X3ByaWNlPXBhcnNlRmxvYXQoJCgnI3ByaWNlX3dvcmtfJytpZF90cnIpLmF0dHIoJ21heCcpKTtcclxuXHR2YXIgZmxhZ19zaG93PTA7XHJcblx0dmFyIGNvdW50X3Jhej0wO1xyXG5cdHZhciBwcmljZV9yYXo9MDtcclxuXHRpZihjb3VudD5tYXhfY291bnQpIHtmbGFnX3Nob3c9MTsgY291bnRfcmF6PW1heF9jb3VudDsgfSBlbHNlIHsgIGNvdW50X3Jhej1jb3VudDsgfVxyXG5cdGlmKHByaWNlPm1heF9wcmljZSkge2ZsYWdfc2hvdz0xO31cclxuXHQvL2FsZXJ0KGZsYWdfc2hvdyk7XHJcblx0Ly8kKCcud19zaXplJykuYXBwZW5kKCcgJytmbGFnX3Nob3cpO1xyXG5cdFxyXG5cdC8v0L/RgNC+0LLQtdGA0Y/QtdC8INC90YPQttC90L4g0LvQuCDQstGL0LLQvtC00LjRgtGMINC90LAg0YHQutC+0LvRjNC60L4g0L/RgNC40LLRi9GI0LXQvdC40LVcclxuXHQkKCcud29ya19fc1tpZF90cnI9JytpZF90cnIrJ10nKS5maW5kKCcuZXhjZWVkJykuZW1wdHkoKTtcclxuXHR2YXIgZXhjZWVkPTA7IC8vINC90LUg0L3QsNC00L5cclxuXHRpZigkKCcuZXhjZWVkJykubGVuZ3RoKVxyXG5cdFx0e1xyXG5cdFx0XHRleGNlZWQ9MTtcclxuXHRcdFx0dmFyIGV4Y2VlZF9zdW1tPSAoKGNvdW50X3JheiptYXhfcHJpY2UpLShjb3VudCpwcmljZSkpLnRvRml4ZWQoMik7XHJcblx0XHRcdGlmKGV4Y2VlZF9zdW1tPjApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZXhjZWVkPTA7XHJcblx0XHRcdFx0fVxyXG5cdFx0fVxyXG5cdFxyXG5cdFxyXG5cdGlmKGZsYWdfc2hvdz09MSlcclxuXHR7XHRcclxuXHQgICAvL9C+0YLQutGA0YvQstCw0LXQvCDQt9Cw0L/QuNGB0LrRg1x0XHRcdFxyXG5cdCAgICQoJy53b3JrX19zW2lkX3Rycj0nK2lkX3RycisnXScpLm5leHQoKS5maW5kKCcubWVzc2EnKS5zdG9wKHRydWUpLnNsaWRlRG93biggXCJzbG93XCIsIGZ1bmN0aW9uKCkgeyAgJCh0aGlzKS5jc3MoXCJoZWlnaHRcIiwgXCJcIik7ICB9KTtcclxuXHQgICAvL2FsZXJ0KFwiIVwiKTtcclxuXHQgICBpZihleGNlZWQ9PTEpIHskKCcud29ya19fc1tpZF90cnI9JytpZF90cnIrJ10nKS5maW5kKCcuZXhjZWVkJykuZW1wdHkoKS5hcHBlbmQoJysnKyQubnVtYmVyKE1hdGguYWJzKGV4Y2VlZF9zdW1tKSwgMiwgJy4nLCAnICcpKTtcdH1cclxuXHRcdC8vYWxlcnQoXCIhIVwiKTtcclxuXHQgICAvLyQoJy5tZXNzYVtpZF9tZXM9JytpZF93b3JrKyddJykuc3RvcCh0cnVlKS5zbGlkZURvd24oIFwic2xvd1wiICk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0Ly8kKCcubWVzc2FbaWRfbWVzPScraWRfd29yaysnXScpLnN0b3AodHJ1ZSkuc2xpZGVVcCggXCJzbG93XCIgKTtcclxuXHRcdCQoJy53b3JrX19zW2lkX3Rycj0nK2lkX3RycisnXScpLm5leHQoKS5maW5kKCcubWVzc2EnKS5zdG9wKHRydWUpLnNsaWRlVXAoIFwic2xvd1wiICk7XHJcblx0XHQgLy9pZihleGNlZWQ9PTEpIHskKCcud29ya19fc1tpZF90cnI9JytpZF90cnIrJ10nKS5maW5kKCcuZXhjZWVkJykuZW1wdHkoKTtcdH1cclxuXHRcdFxyXG5cdH1cclxufVxyXG5cclxuLy/QstGL0LLQvtC0INGB0LvRg9C20LXQsdC90L7QuSDQt9Cw0L/QuNGB0LrQuCDQv9C+INC80LDRgtC10YDQuNCw0LvQsNC8XHJcbmZ1bmN0aW9uIHNlcnZfbWVzc19tKHRoaXNzKVxyXG57XHJcblx0Ly9hbGVydChcIiEhIVwiKTtcclxuXHR2YXIgcmVsX21hdD10aGlzcy5wYXJlbnRzKCcubWF0JykuYXR0cigncmVsX21hdCcpO1xyXG5cdFxyXG5cdC8vYWxlcnQocmVsX21hdCk7XHJcblx0XHJcblx0dmFyIGNvdW50PXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykudmFsKCkpO1xyXG5cdHZhciBwcmljZT1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK3JlbF9tYXQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnZhbCgpKTtcclxuXHRcclxuXHQvL2FsZXJ0KHByaWNlKTtcclxuXHR2YXIgbWF4X2NvdW50PXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykuYXR0cignbWF4JykpO1xyXG5cdHZhciBtYXhfbXk9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdteScpKTtcclxuXHR2YXIgbWF4X3ByaWNlPXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYXR0cignbWF4JykpO1xyXG5cdHZhciBmbGFnX3Nob3c9MDtcclxuXHR2YXIgY291bnRfcmF6PTA7XHJcblx0dmFyIHByaWNlX3Jhej0wO1xyXG5cdC8vYWxlcnQobWF4X2NvdW50KTtcclxuXHQvL2FsZXJ0KGNvdW50KTtcclxuXHRpZigoY291bnQhPScnKXx8KGNvdW50PT0wKSlcclxuXHRcdHtcclxuXHRcdFx0Ly9hbGVydChjb3VudCk7XHJcblx0aWYoKChjb3VudCE9bWF4X2NvdW50KSYmKCFpc05hTihtYXhfY291bnQpKSl8fChjb3VudD09MCkpIHtmbGFnX3Nob3c9MTsgY291bnRfcmF6PW1heF9jb3VudDsgfSBlbHNlIHsgIGNvdW50X3Jhej1jb3VudDsgfVxyXG5cdC8vaWYocHJpY2U+bWF4X3ByaWNlKSB7ZmxhZ19zaG93PTE7fVxyXG5cdFx0XHJcblx0aWYoJCgnW25hbWU9c3RhdHVzX25hcnlhZF0nKS5sZW5ndGg9PTApXHJcblx0XHR7XHJcblx0aWYoY291bnQ+bWF4X215KSB7ZmxhZ19zaG93PTI7fVxyXG5cdFx0fVxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHQvL2FsZXJ0KGZsYWdfc2hvdyk7XHJcblx0Ly8kKCcud19zaXplJykuYXBwZW5kKCcgJytmbGFnX3Nob3cpO1xyXG5cdC8vYWxlcnQoY291bnQpO1xyXG5cdC8qXHJcblx0aWYoKGNvdW50IT0nJykmJihjb3VudCE9MCkpXHJcblx0e1xyXG5cdCAgVXBkYXRlQ29zdEZpbmVyeShyZWxfbWF0KTtcclxuXHR9XHJcblx0Ki9cclxuXHRcdC8v0L/RgNC+0LLQtdGA0Y/QtdC8INC90YPQttC90L4g0LvQuCDQstGL0LLQvtC00LjRgtGMINC90LAg0YHQutC+0LvRjNC60L4g0L/RgNC40LLRi9GI0LXQvdC40LVcclxuXHQkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLmV4Y2VlZCcpLmVtcHR5KCk7XHJcblx0dmFyIGV4Y2VlZD0wOyAvLyDQvdC1INC90LDQtNC+XHJcblx0aWYoJCgnLmV4Y2VlZCcpLmxlbmd0aClcclxuXHRcdHtcclxuXHRcdFx0ZXhjZWVkPTE7XHJcblx0XHRcdHZhciBleGNlZWRfc3VtbT0gKChjb3VudF9yYXoqbWF4X3ByaWNlKS0oY291bnQqcHJpY2UpKS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRpZihleGNlZWRfc3VtbT4wKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGV4Y2VlZD0wO1xyXG5cdFx0XHRcdH1cclxuXHRcdH1cclxuXHQvL2FsZXJ0KGZsYWdfc2hvdyk7XHJcblx0aWYoZmxhZ19zaG93PT0xKVxyXG5cdHtcdFxyXG5cdCAgIC8v0L7RgtC60YDRi9Cy0LDQtdC8INC30LDQv9C40YHQutGDXHRcdFx0XHJcblx0ICAgJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLm5leHQoKS5maW5kKCcubWVzc2EnKS5zdG9wKHRydWUpLnNsaWRlRG93biggXCJzbG93XCIgKTtcclxuXHRcdCQoJy5tYXRbcmVsX21hdD0nK3JlbF9tYXQrJ10nKS5uZXh0KCkubmV4dCgpLmZpbmQoJy5tZXNzYV9teScpLnN0b3AodHJ1ZSkuc2xpZGVVcCggXCJzbG93XCIgKTtcclxuXHRcdGlmKGV4Y2VlZD09MSkgeyAkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLmV4Y2VlZCcpLmVtcHR5KCkuYXBwZW5kKCcrJyskLm51bWJlcihNYXRoLmFicyhleGNlZWRfc3VtbSksIDIsICcuJywgJyAnKSk7XHR9XHJcblx0XHQvL2FsZXJ0KFwiISFcIik7XHJcblx0ICAgLy8kKCcubWVzc2FbaWRfbWVzPScraWRfd29yaysnXScpLnN0b3AodHJ1ZSkuc2xpZGVEb3duKCBcInNsb3dcIiApO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdC8vJCgnLm1lc3NhW2lkX21lcz0nK2lkX3dvcmsrJ10nKS5zdG9wKHRydWUpLnNsaWRlVXAoIFwic2xvd1wiICk7XHJcblx0XHQkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykubmV4dCgpLmZpbmQoJy5tZXNzYScpLnN0b3AodHJ1ZSkuc2xpZGVVcCggXCJzbG93XCIgKTtcdFxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGlmKGZsYWdfc2hvdz09MilcclxuXHQgICAge1xyXG5cdFx0XHQkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykubmV4dCgpLm5leHQoKS5maW5kKCcubWVzc2FfbXknKS5zdG9wKHRydWUpLnNsaWRlRG93biggXCJzbG93XCIgKTtcclxuXHRcdFx0XHJcblx0XHRcdCQoJy5qcy11dF9uYXInKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5qcy1wb2RfbmFyJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcuanMtYWRkX25hcicpLnNob3coKTtcclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHRcdCQoJy5tYXRbcmVsX21hdD0nK3JlbF9tYXQrJ10nKS5uZXh0KCkubmV4dCgpLmZpbmQoJy5tZXNzYV9teScpLnN0b3AodHJ1ZSkuc2xpZGVVcCggXCJzbG93XCIgKTtcdFxyXG5cdFx0fVxyXG5cdFx0XHRcclxuXHRcdFxyXG5cdH1cclxuXHRcclxufVxyXG5cclxuLy/QstGL0LLQvtC0INGB0LvRg9C20LXQsdC90L7QuSDQt9Cw0L/QuNGB0LrQuCDQv9C+INC80LDRgtC10YDQuNCw0LvQsNC8IC0g0LfQsNGP0LLQutCwINC90LAg0LzQsNGC0LXRgNC40LDQu1xyXG5mdW5jdGlvbiBzZXJ2X21lc3NfbV9hcHAodGhpc3MpXHJcbntcclxuXHR2YXIgcmVsX21hdD10aGlzcy5wYXJlbnRzKCcubWF0X3p6JykuYXR0cigncmVsX21hdF96eicpO1xyXG5cdFxyXG5cdHZhciBjb3VudD0kKCcubWF0X3p6W3JlbF9tYXRfeno9JytyZWxfbWF0KyddJykuZmluZCgnLmNvdW50X2FwcF9tYXRlcl8nKS52YWwoKTtcclxuXHQvL3ZhciBwcmljZT0kKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcclxuXHRcclxuXHQvL2FsZXJ0KHByaWNlKTtcclxuXHR2YXIgbWF4X2NvdW50PXBhcnNlRmxvYXQoJCgnLm1hdF96eltyZWxfbWF0X3p6PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9hcHBfbWF0ZXJfJykuYXR0cignbWF4JykpO1x0XHJcblx0Ly92YXIgbWF4X3ByaWNlPXBhcnNlRmxvYXQoJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYXR0cignbWF4JykpO1xyXG5cdHZhciBmbGFnX3Nob3c9MDtcclxuXHRcdHZhciBjb3VudF9yYXo9MDtcclxuXHQvL3ZhciBwcmljZV9yYXo9MDtcclxuXHRpZihjb3VudD5tYXhfY291bnQpIHtmbGFnX3Nob3c9MTsgY291bnRfcmF6PW1heF9jb3VudDsgfSBlbHNlIHsgIGNvdW50X3Jhej1jb3VudDsgfVxyXG5cdC8vaWYocHJpY2U+bWF4X3ByaWNlKSB7ZmxhZ19zaG93PTE7fVxyXG5cdC8vYWxlcnQoZmxhZ19zaG93KTtcclxuXHQvLyQoJy53X3NpemUnKS5hcHBlbmQoJyAnK2ZsYWdfc2hvdyk7XHJcblx0XHJcblx0XHJcblx0aWYoZmxhZ19zaG93PT0xKVxyXG5cdHtcdFxyXG5cdCAgIC8v0L7RgtC60YDRi9Cy0LDQtdC8INC30LDQv9C40YHQutGDXHRcdFx0XHJcblx0ICAgJCgnLm1hdF96eltyZWxfbWF0X3p6PScrcmVsX21hdCsnXScpLm5leHQoKS5uZXh0KCkuZmluZCgnLm1lc3NhJykuc3RvcCh0cnVlKS5zbGlkZURvd24oIFwic2xvd1wiICk7XHJcblx0XHQvL2lmKGV4Y2VlZD09MSkgeyAkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLmV4Y2VlZCcpLmVtcHR5KCkuYXBwZW5kKCcrJyskLm51bWJlcihNYXRoLmFicyhleGNlZWRfc3VtbSksIDIsICcuJywgJyAnKSk7XHR9XHJcblx0XHQvL2FsZXJ0KFwiISFcIik7XHJcblx0ICAgLy8kKCcubWVzc2FbaWRfbWVzPScraWRfd29yaysnXScpLnN0b3AodHJ1ZSkuc2xpZGVEb3duKCBcInNsb3dcIiApO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdC8vJCgnLm1lc3NhW2lkX21lcz0nK2lkX3dvcmsrJ10nKS5zdG9wKHRydWUpLnNsaWRlVXAoIFwic2xvd1wiICk7XHJcblx0XHQkKCcubWF0X3p6W3JlbF9tYXRfeno9JytyZWxfbWF0KyddJykubmV4dCgpLm5leHQoKS5maW5kKCcubWVzc2EnKS5zdG9wKHRydWUpLnNsaWRlVXAoIFwic2xvd1wiICk7XHRcclxuXHRcdFxyXG5cdH1cclxuXHRcclxufVxyXG5cclxuLy/Qv9C10YDQtdGB0YfQtdGCINC+0LHRidC10Lkg0YHRg9C80LzRiyDQvNCw0YLQtdGA0LjQsNC70L7QslxyXG5mdW5jdGlvbiBzdW1tX2ZpbmVyeTEocmVsX21hdClcclxue1xyXG5cdFxyXG5cdHZhciBjb3VudD1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK3JlbF9tYXQrJ10nKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnZhbCgpKTtcclxuXHR2YXIgcHJpY2U9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoKSk7XHJcblx0XHJcblx0dmFyIHN1bT0kKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLnN1bW1hX2ZpbmVyeV9tYXRlcl8nKTtcclxuXHRcclxuXHR2YXIgdmFsdWU9KGNvdW50KnByaWNlKS50b0ZpeGVkKDIpO1xyXG5cdC8vYWxlcnQoc3VtKTtcclxuXHRpZigodmFsdWUhPTApJiYodmFsdWUhPScnKSYmKCQuaXNOdW1lcmljKHZhbHVlKSkpXHJcblx0e1xyXG5cdCAgc3VtLmVtcHR5KCkuYXBwZW5kKCQubnVtYmVyKHZhbHVlLCAyLCAnLicsICcgJykpO1xyXG5cdH0gZWxzZVxyXG5cdFx0e1xyXG5cdCAgc3VtLmVtcHR5KCk7XHJcblx0XHR9XHRcclxuXHRVcGRhdGVJdG9nKCk7XHJcbn1cclxuXHJcbi8v0L/QtdGA0LXRgdGH0LXRgiDQvtCx0YnQtdC5INGB0YPQvNC80Ysg0Lgg0YHRg9C80LzRiyDQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDQvNCw0YLQtdGA0LjQsNC70L7QslxyXG5mdW5jdGlvbiBzdW1tX2ZpbmVyeShpZF90cnIpXHJcbntcclxuXHR2YXIgcmVsX2lkPSQoJy53b3JrX19zW2lkX3Rycj0nK2lkX3RycisnXScpLmF0dHIoJ3JlbF9pZCcpO1xyXG5cdHZhciBjb3VudD1wYXJzZUZsb2F0KCQoJyNjb3VudF93b3JrXycraWRfdHJyKS52YWwoKSk7XHJcblx0dmFyIGNvdW50X2FsbF93b3JrPXBhcnNlRmxvYXQoJCgnI2NvdW50X3dvcmtfJytpZF90cnIpLmF0dHIoJ2FsbCcpKTtcclxuXHR2YXIgcHJpY2U9cGFyc2VGbG9hdCgkKCcjcHJpY2Vfd29ya18nK2lkX3RycikudmFsKCkpO1xyXG5cdHZhciBzdW09JCgnI3N1bW1hX2ZpbmVyeV8nK2lkX3Rycik7XHJcblx0dmFyIHZhbHVlPShjb3VudCpwcmljZSkudG9GaXhlZCgyKTtcclxuXHQvL2FsZXJ0KHN1bSk7XHJcblx0aWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG5cdHtcclxuXHRzdW0uZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIodmFsdWUsIDIsICcuJywgJyAnKSk7XHJcblx0fSBlbHNlXHJcblx0XHR7XHJcblx0c3VtLmVtcHR5KCk7XHJcblx0XHR9XHJcblx0XHJcblx0Ly/RgdGH0LjRgtCw0LXQvCDQtNC70Y8g0LzQsNGC0LXRgNC40LDQu9C+0LIg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHRgtC+0LjQvNC+0YHRgtGMINC4INGB0YPQvNC80YNcclxuXHRpZigoY291bnQhPTApJiYoY291bnQhPScnKSYmKCQuaXNOdW1lcmljKGNvdW50KSkpXHJcblx0e1xyXG4vL2FsZXJ0KFwiISFcIik7XHJcblx0ICAgJCgnLm1hdFtyZWxfdz0nK3JlbF9pZCsnXScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0ICAgIHZhciBjb3VudF9hbGxfbWF0dCA9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmF0dHIoJ2FsbCcpKTtcclxuXHRcdHZhciBjb3VudF9vc3RfbWF0dCA9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmF0dHIoJ29zdCcpKTtcclxuXHRcdCAgIFxyXG5cdFx0Ly92YXIgY291bnRfZW5kID0gKChjb3VudF9hbGxfbWF0dCpjb3VudCkvY291bnRfYWxsX3dvcmspLnRvRml4ZWQoNCk7XHJcblx0XHQgICB2YXIgY291bnRfZW5kID0gKChjb3VudF9hbGxfbWF0dCpjb3VudCkvY291bnRfYWxsX3dvcmspLnRvRml4ZWQoMyk7XHJcblx0XHR2YXIgZmxhZ19zb290PTE7ICAgXHJcblx0XHQvL2FsZXJ0KGNvdW50X2FsbF9tYXR0KTtcclxuXHRcdC8vYWxlcnQoY291bnQpOyAgIFxyXG5cdFx0ICAgLy9hbGVydChjb3VudF9hbGxfd29yayk7ICAgXHJcblx0XHQvL9C10YHQu9C4INGA0LDRgdGB0YfQuNGC0LDQvdC90L7QtSDQutC+0Lst0LLQviDQvNCw0YLQtdGA0LjQsNC70LAg0LHQvtC70YzRiNC1INGH0LXQvCDQt9Cw0L/Qu9Cw0L3QuNGA0L7QstCw0L3QviDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG5cdFx0Ly/QsdGL0LLQsNC10YIg0LjQty3Qt9CwINC/0YDQuNCy0YvRiNC10L3QuNGPINGA0LDQsdC+0YLRiyDRgdCy0Y/Qt9Cw0L3QvdC+0Lkg0YEg0Y3RgtC40LzQuCDQvNCw0YLQtdGA0LjQsNC70LDQvNC4XHJcblx0XHRpZihjb3VudF9lbmQ+Y291bnRfb3N0X21hdHQpXHJcblx0XHR7XHJcblx0XHQgIGNvdW50X2VzdD1jb3VudF9lbmQ7XHQgLy9FU1QgLSDQv9GA0LXQtNC/0L7Qu9Cw0LPQsNC10LzQvtC1INC60L7Qu9C40YfQtdGB0YLQstC+XHJcblx0XHQgIC8vY291bnRfZW5kPWNvdW50X29zdF9tYXR0O1xyXG5cdFx0XHRjb3VudF9lbmQ9Y291bnRfb3N0X21hdHQudG9GaXhlZCgzKTtcclxuXHRcdCAgZmxhZ19zb290PTA7ICBcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0ICAgXHJcblx0XHRpZihmbGFnX3Nvb3Q9PTEpXHJcblx0XHRcdHtcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdwbGFjZWhvbGRlcicsJ01BWCAtICcrY291bnRfZW5kKTtcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdtYXgnLGNvdW50X2VuZCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgXHJcblx0XHQkKHRoaXMpLmZpbmQoJy5oaWRkZW5fbWF4X2NvdW50JykudmFsKGNvdW50X2VuZCk7XHRcdFx0XHRcdFx0XHRcdFx0XHQgIFxyXG5cdFx0JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnByZXYoJ2xhYmVsJykuZW1wdHkoKS5hcHBlbmQoJ01BWCAoJytjb3VudF9lbmQrJyknKTtcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5jaGFuZ2UoKTsgICBcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmF0dHIoJ3BsYWNlaG9sZGVyJywnTUFYIC0gJytjb3VudF9lbmQrJyBFU1QgLSAnK2NvdW50X2VzdCk7XHJcblx0XHQkKHRoaXMpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykuYXR0cignbWF4Jyxjb3VudF9lbmQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgIFxyXG5cdFx0JCh0aGlzKS5maW5kKCcuaGlkZGVuX21heF9jb3VudCcpLnZhbChjb3VudF9lbmQpO1x0XHRcdFx0XHRcdFx0XHRcdFx0ICBcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5wcmV2KCdsYWJlbCcpLmVtcHR5KCkuYXBwZW5kKCdNQVggKCcrY291bnRfZW5kKycpJysnIEVTVCAoJytjb3VudF9lc3QrJyknKTtcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5jaGFuZ2UoKTsgIFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuICAgICAgIH0pO1xyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcclxuXHQgICAkKCcubWF0W3JlbF93PScrcmVsX2lkKyddJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHJcblx0XHRcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdwbGFjZWhvbGRlcicsJycpO1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmF0dHIoJ21heCcsJycpO1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnByZXYoJ2xhYmVsJykuZW1wdHkoKTtcclxuXHRcdCQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5jaGFuZ2UoKTsgIFxyXG5cdFx0ICAkKHRoaXMpLmZpbmQoJy5oaWRkZW5fbWF4X2NvdW50JykudmFsKFwiXCIpO1x0IFxyXG5cdFx0ICAgXHJcbiAgICAgICB9KTtcdFx0XHJcblx0XHJcblx0fVxyXG5cdFVwZGF0ZUl0b2coKTtcclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDQtNC40LDQu9C+0LNcclxuZnVuY3Rpb24gZGVsX2RpYWxvZygpXHJcbntcclxuXHRpZiAoICQodGhpcykuaXMoXCJbZm9yXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF9kaWFsb2cucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcclxufVxyXG59XHJcbiAgXHJcbnJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDQvNCw0YLQtdGA0LjQsNC7INC40Lcg0LfQsNGP0LLQutC4INC40Lcg0LrQvtGA0LfQuNC90YtcclxuXHJcbmZ1bmN0aW9uIERlbGxaYXl2YU1hdGVyaWFsKClcclxue1xyXG5cclxuXHRpZiAoICQodGhpcykuaXMoXCJbaWRfcmVsXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJpZF9yZWxcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF9tYXRlcmlhbF96YXlhdmEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKycmbj0nKyQodGhpcykuYXR0cihcIm5hcnlkXCIpLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcclxufVxyXG59XHJcbiAgXHJcbnJldHVybiBmYWxzZTtcdFxyXG59XHJcblxyXG5mdW5jdGlvbiBEZWxsWmF5dmFNYXRlcmlhbDEoKVxyXG57XHJcblxyXG5cdGlmICggJCh0aGlzKS5pcyhcIltpZF9yZWxdXCIpIClcclxue1xyXG5cdGlmKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImlkX3JlbFwiKSkpXHJcblx0e1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX21hdGVyaWFsX3pheWF2YTEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKycmbj0nKyQodGhpcykuYXR0cihcInpheXVcIiksXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1xyXG59XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1x0XHJcbn1cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0YDQsNCx0L7RgtGDINC40Lcg0LrQvtGA0LfQuNC90Ysg0L3QsNGA0Y/QtNCwXHJcbmZ1bmN0aW9uIERlbGxOYXJ5ZFdvcmsoKVxyXG57XHJcblx0aWYgKCAkKHRoaXMpLmlzKFwiW2lkX3JlbF1cIikgKVxyXG57XHJcblx0aWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKSlcclxuXHR7XHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfbm9fYWpheC5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJpZF9yZWxcIikrJyZuPScrJCh0aGlzKS5hdHRyKFwibmFyeWRcIiksXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1xyXG59XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vL9GD0LTQsNC70LjRgtGMINC30LDRj9Cy0LrRgyDQvdCwINC80LDRgtC10YDQuNCw0Lsg0YbQtdC70LjQutC+0LxcclxuZnVuY3Rpb24gRGVsbFpheVpheSgpXHJcbntcclxuXHRpZiAoICQodGhpcykuaXMoXCJbaWRfcmVsXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJpZF9yZWxcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF96YXlfemF5LnBocD9pZD0nKyQodGhpcykuYXR0cihcImlkX3JlbFwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0L3QsNGA0Y/QtCDRhtC10LvQuNC60L7QvFxyXG5mdW5jdGlvbiBEZWxsTmFyeWQoKVxyXG57XHJcblx0aWYgKCAkKHRoaXMpLmlzKFwiW2lkX3JlbF1cIikgKVxyXG57XHJcblx0aWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKSlcclxuXHR7XHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfbmFyaWFkLnBocD9pZD0nKyQodGhpcykuYXR0cihcImlkX3JlbFwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0YDQsNCx0L7RgtGDINC40Lcg0L3QsNGA0Y/QtNCwXHJcbmZ1bmN0aW9uIERlbGxOYXJ5ZFdvcmsxKClcclxue1xyXG4gaWYoJCh0aGlzKS5pcyhcIltpZF9yZWxdXCIpKVxyXG4ge1xyXG4gIGlmKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImlkX3JlbFwiKSkpXHJcbiAge1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX3dvcmtfaXNfbmFyaWFkLnBocD9pZD0nKyQodGhpcykuYXR0cihcImlkX3JlbFwiKSsnJm49JyskKHRoaXMpLmF0dHIoXCJuYXJ5ZFwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbiB9XHJcbn1cclxuXHJcbiBpZigkKHRoaXMpLnBhcmVudHMoJy5teV9ubycpLmxlbmd0aCE9MClcclxuIHtcclxuXHQgJCgnLnBvZF96YXknKS5oaWRlKCk7ICQoJy5hZGRfemF5Jykuc2hvdygpO1xyXG4gfVxyXG5cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5cclxuLy/QstGL0LHQvtGAINC60LDQutC+0Lkg0L/QsNGB0L/QvtGA0YJcclxuZnVuY3Rpb24gcGFzc3dvcmRfYnV0dCgpXHJcbntcclxuXHR2YXIgY2JfaD0kKHRoaXMpLnBhcmVudHMoJy5wYXNzd29yZF90dXJzJykuZmluZCgnaW5wdXQnKTtcclxuXHRpZihjYl9oLnZhbCgpIT0kKHRoaXMpLmF0dHIoJ2lkJykpXHJcblx0e1xyXG5cdFx0Y2JfaC52YWwoJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5wYXNzd29yZF90dXJzJykuZmluZCgnLmNob2ljZS1yYWRpbyBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV90YXNrX2NiJyk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5wYXNzd29yZF90dXJzJykuZmluZCgnLmlucHV0LWNob2ljZS1jbGljay1wYXNzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV9wYXNzJyk7XHJcblxyXG5cdFx0JCh0aGlzKS5maW5kKCcuY2hvaWNlLXJhZGlvIGknKS5hZGRDbGFzcygnYWN0aXZlX3Rhc2tfY2InKTtcclxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZV9wYXNzJyk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcbi8v0J7QsdC90L7QstC70LXQvdC40LUg0LrQvtGA0LfQuNC90Ysg0L/RgNC4INC+0YTQvtGA0LzQu9C10L3QuNC4INC30LDRj9Cy0LrQuCDQvdCwINC80LDRgtC10YDQuNCw0LtcclxuZnVuY3Rpb24gQmFza2V0VXBkYXRlX1ooZG9tX2lkKVxyXG57XHJcblx0dmFyIGNvb2tpZSA9ICQuY29va2llKHdpbmRvdy5iX2NtKydfJytkb21faWQpO1xyXG5cdC8vYWxlcnQod2luZG93LmJfY28pO1xyXG5cdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdHZhciBjb3VudHM9Y2MubGVuZ3RoO1xyXG5cdCQoJy5iYXNrZXRfb3JkZXInKS5lbXB0eSgpLmFwcGVuZChjb3VudHMpO1xyXG5cdCQoJy5jb3VudF93b3Jrc3NzcycpLnZhbChjb3VudHMpO1xyXG59XHJcblxyXG5cclxuLy/QntCx0L3QvtCy0LvQtdC90LjQtSDQutC+0YDQt9C40L3RiyDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbmZ1bmN0aW9uIEJhc2tldFVwZGF0ZShkb21faWQpXHJcbntcclxuXHR2YXIgY29va2llID0gJC5jb29raWUod2luZG93LmJfY28rJ18nK2RvbV9pZCk7XHJcblx0Ly9hbGVydCh3aW5kb3cuYl9jbyk7XHJcblx0dmFyIGNjID0gY29va2llLnNwbGl0KCcuJyk7XHJcblx0dmFyIGNvdW50cz1jYy5sZW5ndGg7XHJcblx0JCgnLmJhc2tldF9vcmRlcicpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblx0JCgnLmNvdW50X3dvcmtzc3NzJykudmFsKGNvdW50cyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZWNhc2goaWQpXHJcbntcclxuXHQgICAgICAgdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWQ7XHJcblx0ICAgICAgICBBamF4Q2xpZW50KCdjYXNoYm94JywndXBkYXRlX2Nhc2gnLCdHRVQnLGRhdGEsJ0FmdGVyVUNBU0gnLGlkLDApO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gVXBkYXRlSXRvZygpXHJcbntcclxuXHR2YXIgc3VtX3dvcms9MDtcclxuXHR2YXIgc3VtX21hdD0wO1xyXG5cdFxyXG5cdC8vbGVydCgkKCcud29ya19fcycpLmZpbmQoJy5zdW1tX3ByaWNlJykudGV4dCgpKTtcclxuXHQvL2FsZXJ0KCQoJy53b3JrX19zJykuZmluZCgnLnN1bW1fcHJpY2UnKS5sZW5ndGgpO1xyXG5cdCQoJy53b3JrX19zJykuZmluZCgnLnN1bW1fcHJpY2UnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0aWYoJCh0aGlzKS50ZXh0KCkhPScnKVxyXG5cdFx0XHR7XHJcblx0XHR2YXIgdmFsbD1wYXJzZUZsb2F0KHRyaW1fbnVtYmVyKCQodGhpcykudGV4dCgpKSk7XHJcblx0ICAgICBpZiAoKHZhbGwhPScnKSYmKHZhbGwhPTApKSB7c3VtX3dvcms9c3VtX3dvcmsrdmFsbDtcdH1cclxuXHRcdFx0fVxyXG4gICAgfSk7XHJcblx0JCgnLm1hdFtyZWxfd10nKS5maW5kKCcuc3VtbWFfZmluZXJ5X21hdGVyXycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRcdFx0aWYoJCh0aGlzKS50ZXh0KCkhPScnKVxyXG5cdFx0XHR7XHJcblx0XHR2YXIgdmFsbD1wYXJzZUZsb2F0KHRyaW1fbnVtYmVyKCQodGhpcykudGV4dCgpKSk7XHJcblx0ICAgICBpZiAoKHZhbGwhPScnKSYmKHZhbGwhPTApKSB7c3VtX21hdD1zdW1fbWF0K3ZhbGw7XHR9XHJcblx0XHRcdH1cclxuICAgIH0pO1xyXG5cdFxyXG5cdFxyXG5cdHZhciBzdW1fZXhjZWVkPTA7XHJcblx0JCgnLnByZXZpJykuaGlkZSgpO1xyXG5cdCQoJy5leGNlZWQnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0XHRpZigkKHRoaXMpLnRleHQoKSE9JycpXHJcblx0XHRcdHtcclxuXHRcdHZhciB2YWxsPXBhcnNlRmxvYXQodHJpbV9udW1iZXIoJCh0aGlzKS50ZXh0KCkpKTtcclxuXHQgICAgIGlmICgodmFsbCE9JycpJiYodmFsbCE9MCkpIHtzdW1fZXhjZWVkPXN1bV9leGNlZWQrdmFsbDtcdH1cclxuXHRcdFx0fVxyXG4gICAgfSk7XHRcclxuXHRpZihzdW1fZXhjZWVkIT0wKVxyXG5cdHtcclxuXHRcdC8vJC5udW1iZXIoIDUwMjAuMjM2NCwgMiwgJywnLCAnICcpOyAgIC8vIE91dHB1dHM6IDUgMDIwLDIxXHRcclxuXHRcdCQoJy5wcmV2aScpLmZpbmQoJy5pdG9nc3VtYWxsMScpLmVtcHR5KCkuYXBwZW5kKCcrJyskLm51bWJlcihzdW1fZXhjZWVkLCAyLCAnLicsICcgJykpO1x0XHJcblx0XHQkKCcucHJldmknKS5zaG93KCk7XHRcclxuXHR9XHJcblx0XHJcblx0XHJcblx0Ly9hbGVydChzdW1fd29yayk7XHJcblx0JCgnLml0b2dzdW1tYXQnKS5lbXB0eSgpLmFwcGVuZCgkLm51bWJlcihzdW1fbWF0LnRvRml4ZWQoMiksIDIsICcuJywgJyAnKSk7XHJcblx0JCgnLml0b2dzdW13b3JrJykuZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIoc3VtX3dvcmsudG9GaXhlZCgyKSwgMiwgJy4nLCAnICcpKTtcclxuXHQvLyQoJy5pdG9nc3VtYWxsJykuZW1wdHkoKS5hcHBlbmQoJC5udW1iZXIoKHN1bV93b3JrK3N1bV9tYXQpLnRvRml4ZWQoMiksIDIsICcuJywgJyAnKSk7XHRcclxufVxyXG4vL9C/0L7QutCw0LfQsNGC0Ywg0LjRgdGC0L7RgNC40Y4g0YHQv9C40YHQsNC90LjRjyDQv9C+INC80LDRgtC10YDQuNCw0LvRgyAtINC90LDRgNGP0LTRi1xyXG5mdW5jdGlvbiBIaXN0b3J5TjEoZXZlbnQpIHtcclxuXHJcblxyXG5cdHZhciBibG9ja19oaXM9JCh0aGlzKS5wYXJlbnRzKCcuZWRpdF9wYW5lbDExX21hdCcpLmZpbmQoJy5oaXN0b3J5X2FjdF9tYXQnKTtcclxuXHQkKCcuaGlzdG9yeV9hY3RfbWF0Jykubm90KGJsb2NrX2hpcykuaGlkZSgpO1xyXG5cclxuXHJcblxyXG5cclxuXHR2YXIgYmxvY2tfaGlzPSQodGhpcykucGFyZW50cygnLmVkaXRfcGFuZWwxMV9tYXQnKS5maW5kKCcuaGlzdG9yeV9hY3RfbWF0Jyk7XHJcblx0Ly9hbGVydCgkKCcjeW91cklEOnZpc2libGUnKS5sZW5ndGgpO1xyXG5cdGlmKGJsb2NrX2hpcy5pcygnOnZpc2libGUnKSlcclxuXHR7XHJcblxyXG5cdFx0Ly9hbGVydChcIjJcIik7XHJcblx0XHQvL9GB0LrRgNGL0YLRjFxyXG5cdFx0YmxvY2tfaGlzLnNsaWRlVXAoXCJzbG93XCIpO1xyXG5cdFx0Ly9ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0YmxvY2tfaGlzLnNsaWRlRG93bihcInNsb3dcIik7XHJcblx0XHQvL2FsZXJ0KFwiM1wiKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG4vL9C40YHRgtC+0YDQuNGPINC/0L4g0L3QsNGA0Y/QtNCw0Lwg0L/QviDRgNCw0LHQvtGC0LVcclxuZnVuY3Rpb24gSGlzdG9yeU4oKVxyXG57XHJcblx0dmFyIGlkX3JlbD0kKHRoaXMpLmF0dHIoJ2ZvcicpO1xyXG5cdGlmKCQodGhpcykuaXMoJy5zaG93cycpKVxyXG5cdHtcclxuXHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3Nob3dzJyk7XHJcblx0XHQkKCcuaGlzdHRvcnlbcmVsX2g9JytpZF9yZWwrJ10nKS5oaWRlKCk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdCAgaWYoJCgnLmhpc3R0b3J5W3JlbF9oPScraWRfcmVsKyddJykubGVuZ3RoKVxyXG5cdCAge1xyXG5cdFx0ICQodGhpcykuYWRkQ2xhc3MoJ3Nob3dzJyk7XHJcblx0XHQgJCgnLmhpc3R0b3J5W3JlbF9oPScraWRfcmVsKyddJykuc2hvdygpO1xyXG5cdCAgfSBlbHNlXHJcblx0ICB7XHJcblx0XHRcdCQoJy5sb2FkZXJfaGlzdG9yeVtmbz0nK2lkX3JlbCsnXScpLnNob3coKTtcclxuXHRcdCAgICAkKHRoaXMpLmFkZENsYXNzKCdzaG93cycpO1xyXG5cdFx0ICAgIFx0XHJcblx0ICAgICAgICB2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9JytpZF9yZWw7XHJcblx0ICAgICAgICBBamF4Q2xpZW50KCdwcmltZScsJ2hpc3Rvcnlfd29ya3MnLCdHRVQnLGRhdGEsJ0FmdGVySElTVCcsaWRfcmVsLDApO1xyXG5cdFx0XHQgIFxyXG5cdCAgfVxyXG5cdFxyXG5cdH1cclxufVxyXG5mdW5jdGlvbiBBZnRlckhJU1QoZGF0YSx1cGRhdGUpXHJcbntcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHR2YXIgbG9hZGVyPSQoJy5sb2FkZXJfaGlzdG9yeVtmbz0nK3VwZGF0ZSsnXScpO1xyXG5cdFx0bG9hZGVyLmhpZGUoKTtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1x0XHRcdFx0XHJcblx0XHR2YXIgbG9hZGVyPSQoJy5sb2FkZXJfaGlzdG9yeVtmbz0nK3VwZGF0ZSsnXScpO1xyXG5cdFx0bG9hZGVyLmhpZGUoKTtcclxuXHRcdGxvYWRlci5hZnRlcihkYXRhLmVjaG8pO1xyXG5cdH1cclxuXHRcclxufVxyXG5cclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0LrQvtC70LjRh9C10YHRgtCy0LAg0LzQsNGC0LXRgNC40LDQu9CwINC/0YDQuCDQvtGE0L7RgNC80LvQtdC90LjQuCDQt9Cw0Y/QstC60Lgg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHJcbmZ1bmN0aW9uIE1teUhhbmRsZXJBcHAoKVxyXG57XHJcblx0bWFza2soJCh0aGlzKSk7XHJcblx0XHJcblx0dmFyIHJlbF9pZD0kKHRoaXMpLnBhcmVudHMoJy5tYXRfenonKS5hdHRyKCdyZWxfdycpO1xyXG5cdHZhciByZWxfbWF0PSQodGhpcykucGFyZW50cygnLm1hdF96eicpLmF0dHIoJ21hdF96eicpO1xyXG5cdHZhciBsb2FkZXI9JCgnW2lkX2xvYWRlcj0nK3JlbF9tYXQrJ10nKTtcclxuXHR2YXIgbWF4PXBhcnNlRmxvYXQoJCh0aGlzKS5hdHRyKCdtYXgnKSk7XHJcblx0XHJcblx0XHJcblx0XHJcblx0dmFyIHZhbHVlPSQodGhpcykudmFsKCk7XHRcclxuXHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdyZWRhYXMnKTtcclxuXHRpZigodmFsdWUhPTApJiYodmFsdWUhPScnKSYmKCQuaXNOdW1lcmljKHZhbHVlKSkpXHJcblx0e1xyXG5cdFx0aWYocGFyc2VGbG9hdCh2YWx1ZSk+bWF4KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly/QstGL0LTQtdC70Y/QtdC8INC60YDQsNGB0L3Ri9C8INC4INC+0YLQutGA0YvQstCw0LXQvCDRgdC70YPQttC10LHQvdGD0Y4g0LfQsNC/0LjRgdC60YNcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdyZWRhYXMnKTtcclxuXHRcdFx0fSBcclxuXHRcdFx0dmFyIHByPU1hdGgucm91bmQocGFyc2VGbG9hdChsb2FkZXIuYXR0cigncmVsX3cnKSkrKCh2YWx1ZSooMTAwLXBhcnNlRmxvYXQobG9hZGVyLmF0dHIoJ3JlbF93JykpKSkvbWF4KSk7XHJcblx0XHQgICAgaWYocHI+MTAwKSB7cHI9MTAwO31cdFx0XHJcblx0XHQgICAgbG9hZGVyLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7d2lkdGg6IHByK1wiJVwifSwgMjAwMCk7XHRcdFxyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdC8v0L/QtdGA0LLQvtC90L7Rh9Cw0LvRjNC90L4g0YHQvtGB0YLQvtGP0L3QuNC1XHJcblx0XHRsb2FkZXIuc3RvcCh0cnVlKS5hbmltYXRlKHt3aWR0aDogbG9hZGVyLmF0dHIoJ3JlbF93JykrXCIlXCJ9LCAyMDAwKTtcdFxyXG5cdH1cclxuXHRcdFxyXG5cdHNlcnZfbWVzc19tX2FwcCgkKHRoaXMpKTtcclxuXHRcclxuXHQvL9C40LfQvNC10L3QtdC90LjQtSDQvNCw0LrRgdC40LzQsNC70YzQvdGL0YUg0LfQvdCw0YfQtdC90LjQuSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvNCw0YLQtdGA0LjQsNC70L7QslxyXG5cdFxyXG5cdFxyXG5cdFxyXG5cdFxyXG59XHJcblxyXG5cclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0LrQvtC70LjRh9C10YHRgtCy0LAg0Lgg0YHRgtC+0LjQvNC+0YHRgtC4INC80LDRgtC10YDQuNCw0LvQsCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbmZ1bmN0aW9uIE1teUhhbmRsZXJYWCgpXHJcbntcclxuXHR2YXIgcmVsX21hdD0kKHRoaXMpLnBhcmVudHMoJy5tYXQnKS5hdHRyKCdyZWxfbWF0Jyk7XHRcclxuXHR2YXIgY291bnQ9JCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHJcblx0dmFyIG9sZF9jb3VudD0kKCcubWF0W3JlbF9tYXQ9JytyZWxfbWF0KyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5hdHRyKCdvbGRfY291bnQnKTtcclxuXHQvL2FsZXJ0KG9sZF9jb3VudCk7XHJcblx0aWYoKGNvdW50IT0nJykmJihjb3VudCE9MCkpXHJcblx0e1xyXG5cdFx0aWYob2xkX2NvdW50IT1jb3VudClcclxuXHRcdFx0e1xyXG5cdCAgJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykuYXR0cignb2xkX2NvdW50Jyxjb3VudCk7XHRcclxuXHQgIFVwZGF0ZUNvc3RGaW5lcnkocmVsX21hdCk7XHJcblx0XHRcdH1cclxuXHR9XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdFxyXG5cdFx0XHRcdCQoJy5tYXRbcmVsX21hdD0nK3JlbF9tYXQrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnZhbCgnJykucmVtb3ZlQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdFx0XHRcdFx0aWYob2xkX2NvdW50IT1jb3VudClcclxuXHRcdFx0e1xyXG5cdCAgJCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykuYXR0cignb2xkX2NvdW50Jyxjb3VudCk7XHRcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9XHJcblx0XHJcbn1cclxuXHJcblxyXG5cclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0LrQvtC70LjRh9C10YHRgtCy0LAg0Lgg0YHRgtC+0LjQvNC+0YHRgtC4INC80LDRgtC10YDQuNCw0LvQsCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbmZ1bmN0aW9uIE1teUhhbmRsZXIoKVxyXG57XHJcblx0bWFza2soJCh0aGlzKSk7XHJcblx0XHJcblx0bWFza2tfbWF4KCQodGhpcykpO1xyXG5cclxuXHQvL2FsZXJ0KFwiIVwiKTtcclxuXHR2YXIgcmVsX2lkPSQodGhpcykucGFyZW50cygnLm1hdCcpLmF0dHIoJ3JlbF93Jyk7XHJcblx0dmFyIHJlbF9tYXQ9JCh0aGlzKS5wYXJlbnRzKCcubWF0JykuYXR0cigncmVsX21hdCcpO1xyXG5cdFxyXG5cdHZhciBtYXg9cGFyc2VGbG9hdCgkKHRoaXMpLmF0dHIoJ21heCcpKTtcclxuXHR2YXIgbXk9cGFyc2VGbG9hdCgkKHRoaXMpLmF0dHIoJ215JykpO1xyXG5cdHZhciBwcm90b2NvbF9teT0xOyAvLyDQv9C+INGD0LzQvtC70YfQsNC90LjRjiDQvdCw0LTQviDQv9GA0L7QstC10YDRj9GC0Ywg0YHQutC+0LvRjNC60L4g0YMg0L3QtdCz0L4g0Y3RgtC+0LPQviDQvNCw0YLQtdGA0LjQsNC70LBcclxuXHRpZigkKCcueWVzX3NpZ25lZGRfam9wcycpLmxlbmd0aClcclxuXHR7XHJcblx0XHRwcm90b2NvbF9teT0wO1xyXG5cdH1cclxuXHJcblxyXG5cdHZhciB2YWx1ZT0kKHRoaXMpLnZhbCgpO1x0XHJcblx0JCh0aGlzKS5yZW1vdmVDbGFzcygncmVkYWFzJyk7XHJcblx0aWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG5cdHtcclxuXHRcdC8vbXkg0L3QtSDQvdCw0LTQviDQv9GA0L7QstC10YDRj9GC0Ywg0LTQu9GPINGD0LbQtSDQv9GA0L7QstC10LTQtdC90L3Ri9GFINC90LDRgNGP0LTQvtCyINC40L3QsNGH0LUg0YXQsNC90LBcclxuXHRcdC8vaWYoKChwYXJzZUZsb2F0KHZhbHVlKSE9bWF4KSYmKCFpc05hTihtYXgpKSl8fChwYXJzZUZsb2F0KHZhbHVlKT5teSkpXHJcblx0XHRpZigoKHBhcnNlRmxvYXQodmFsdWUpIT1tYXgpJiYoIWlzTmFOKG1heCkpKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8v0LLRi9C00LXQu9GP0LXQvCDQutGA0LDRgdC90YvQvCDQuCDQvtGC0LrRgNGL0LLQsNC10Lwg0YHQu9GD0LbQtdCx0L3Rg9GOINC30LDQv9C40YHQutGDXHJcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygncmVkYWFzJyk7XHJcblx0XHRcdFx0Ly9hbGVydChcIiFcIik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRpZihwcm90b2NvbF9teT09MSlcclxuXHRcdHtcclxuXHRcdFx0aWYocGFyc2VGbG9hdCh2YWx1ZSk+bXkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdyZWRhYXMnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHRcdFxyXG5cdH0gXHJcblx0XHJcblx0XHJcblx0XHJcblx0LypcclxuXHR2YXIgcmVsX21hdD0kKHRoaXMpLnBhcmVudHMoJy5tYXQnKS5hdHRyKCdyZWxfbWF0Jyk7XHRcclxuXHR2YXIgY291bnQ9JCgnLm1hdFtyZWxfbWF0PScrcmVsX21hdCsnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHJcblx0XHJcblx0aWYoKGNvdW50IT0nJykmJihjb3VudCE9MCkpXHJcblx0e1xyXG5cdCAgVXBkYXRlQ29zdEZpbmVyeShyZWxfbWF0KTtcclxuXHR9XHRcclxuXHQqL1xyXG5cdFxyXG5cdFxyXG5cdFxyXG5cdHNlcnZfbWVzc19tKCQodGhpcykpO1xyXG5cdHN1bW1fZmluZXJ5MShyZWxfbWF0KTtcclxuXHRcclxuXHQvL9C40LfQvNC10L3QtdC90LjQtSDQvNCw0LrRgdC40LzQsNC70YzQvdGL0YUg0LfQvdCw0YfQtdC90LjQuSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvNCw0YLQtdGA0LjQsNC70L7QslxyXG5cdFxyXG5cdFxyXG5cdFxyXG5cdFxyXG59XHJcblxyXG5cclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0LrQvtC70LjRh9C10YHRgtCy0LAg0YDQsNCx0L7RgtGLINC/0YDQuCDQvtGE0L7RgNC80LvQtdC90LjQuCDQvdCw0YDRj9C00LBcclxuZnVuY3Rpb24gbXlIYW5kbGVyKClcclxue1xyXG5cdG1hc2trKCQodGhpcykpO1xyXG5cdHZhciByZWxfaWQ9JCh0aGlzKS5wYXJlbnRzKCcud29ya19fcycpLmF0dHIoJ3JlbF9pZCcpO1xyXG5cdHZhciBpZF90cnI9JCh0aGlzKS5wYXJlbnRzKCcud29ya19fcycpLmF0dHIoJ2lkX3RycicpO1xyXG5cdHZhciBsb2FkZXI9JCgnW2lkX2xvYWRlcj0nK3JlbF9pZCsnXScpO1xyXG5cdHZhciBtYXg9cGFyc2VGbG9hdCgkKHRoaXMpLmF0dHIoJ21heCcpKTtcclxuXHR2YXIgdmFsdWU9cGFyc2VGbG9hdCgkKHRoaXMpLnZhbCgpKTtcclxuXHJcblx0JCh0aGlzKS5yZW1vdmVDbGFzcygncmVkYWFzJyk7XHJcblx0aWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG5cdHtcclxuXHRcdC8vYWxlcnQodmFsdWUpO1xyXG5cdFx0XHJcblx0XHRpZihwYXJzZUZsb2F0KHZhbHVlKT5tYXgpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvL9Cy0YvQtNC10LvRj9C10Lwg0LrRgNCw0YHQvdGL0Lwg0Lgg0L7RgtC60YDRi9Cy0LDQtdC8INGB0LvRg9C20LXQsdC90YPRjiDQt9Cw0L/QuNGB0LrRg1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdFx0XHRcdC8vYWxlcnQoXCIhXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR2YXIgcHI9TWF0aC5yb3VuZChwYXJzZUZsb2F0KGxvYWRlci5hdHRyKCdyZWxfdycpKSsoKHZhbHVlKigxMDAtcGFyc2VGbG9hdChsb2FkZXIuYXR0cigncmVsX3cnKSkpKS9tYXgpKTtcclxuXHRcdGlmKHByPjEwMCkge3ByPTEwMDt9XHRcdFxyXG5cdFx0bG9hZGVyLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7d2lkdGg6IHByK1wiJVwifSwgMjAwMCk7XHRcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHQvL9C/0LXRgNCy0L7QvdC+0YfQsNC70YzQvdC+INGB0L7RgdGC0L7Rj9C90LjQtVxyXG5cdFx0bG9hZGVyLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7d2lkdGg6IGxvYWRlci5hdHRyKCdyZWxfdycpK1wiJVwifSwgMjAwMCk7XHRcclxuXHR9XHJcblx0c2Vydl9tZXNzKGlkX3Rycik7XHJcblx0c3VtbV9maW5lcnkoaWRfdHJyKTtcclxuXHRcclxuXHQvL9C40LfQvNC10L3QtdC90LjQtSDQvNCw0LrRgdC40LzQsNC70YzQvdGL0YUg0LfQvdCw0YfQtdC90LjQuSDQutC+0LvQuNGH0LXRgdGC0LLQsCDQvNCw0YLQtdGA0LjQsNC70L7QslxyXG5cdFxyXG5cdFxyXG5cdFxyXG5cdFxyXG59XHJcblxyXG4vL9C60L7QvdGC0YDQvtC70Ywg0LLQstC+0LTQsCDRgdGD0LzQvNGLINC30LAg0LXQtNC40L3QuNGG0YMg0YDQsNCx0L7RgtGLINC/0YDQuCDQvtGE0L7RgNC80LvQtdC90LjQuCDQvdCw0YDRj9C00LBcclxuZnVuY3Rpb24gbXlIYW5kbGVyMSgpXHJcbntcclxuXHQvL2FsZXJ0KCd2YXIxLScrJCh0aGlzKS52YWwoKSk7XHJcblx0bWFza2soJCh0aGlzKSk7XHJcblxyXG5cdC8vYWxlcnQoJ3ZhcjItJyskKHRoaXMpLnZhbCgpKTtcclxuXHJcblx0dmFyIHJlbF9pZD0kKHRoaXMpLnBhcmVudHMoJy53b3JrX19zJykuYXR0cigncmVsX2lkJyk7XHJcblx0dmFyIGlkX3Rycj0kKHRoaXMpLnBhcmVudHMoJy53b3JrX19zJykuYXR0cignaWRfdHJyJyk7XHJcblx0XHJcblx0dmFyIG1heD1wYXJzZUZsb2F0KCQodGhpcykuYXR0cignbWF4JykpO1xyXG5cdHZhciB2YWx1ZT0kKHRoaXMpLnZhbCgpO1xyXG5cdFxyXG5cdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdGlmKCh2YWx1ZSE9MCkmJih2YWx1ZSE9JycpJiYoJC5pc051bWVyaWModmFsdWUpKSlcclxuXHR7XHJcblx0XHQvL2FsZXJ0KHZhbHVlKTtcclxuXHRcdGlmKHBhcnNlRmxvYXQodmFsdWUpPm1heClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8v0LLRi9C00LXQu9GP0LXQvCDQutGA0LDRgdC90YvQvCDQuCDQvtGC0LrRgNGL0LLQsNC10Lwg0YHQu9GD0LbQtdCx0L3Rg9GOINC30LDQv9C40YHQutGDXHJcblx0XHRcdFx0Ly9hbGVydChtYXgpO1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdFx0XHR9XHJcblx0XHRcclxuXHR9IFxyXG5cdHNlcnZfbWVzcyhpZF90cnIpO1xyXG5cdHN1bW1fZmluZXJ5KGlkX3Rycik7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vINGC0LDQudC80LXRgCDQstGA0LXQvNC10L3QuCDQtNC70Y8g0YTQvtGA0LwgYWpheFxyXG5mdW5jdGlvbiBpbml0aWFsaXplVGltZXIoKSB7XHJcblx0XHJcblx0dmFyIGVuZERhdGUgPSBuZXcgRGF0ZSgpOyAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDRgtGDINC40YHRgtC10YfQtdC90LjRjyDRgtCw0LnQvNC10YDQsFxyXG5cdHZhciBlbmREYXRlID0oKGVuZERhdGUvMTAwMCkrMTgwMCkqMTAwMDsgLy8zMCDQvNC40L3Rg9GCXHJcblx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsgLy8g0L/QvtC70YPRh9Cw0LXQvCDRgtC10LrRg9GJ0YPRjiDQtNCw0YLRg1xyXG5cdHZhciBzZWNvbmRzID0gKGVuZERhdGUtY3VycmVudERhdGUpIC8gMTAwMDsgLy8g0L7Qv9GA0LXQtNC10LvRj9C10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHQtdC60YPQvdC0INC00L4g0LjRgdGC0LXRh9C10L3QuNGPINGC0LDQudC80LXRgNCwXHJcblx0aWYgKHNlY29uZHMgPiAwKSB7IC8vINC/0YDQvtCy0LXRgNC60LAgLSDQuNGB0YLQtdC60LvQsCDQu9C4INC00LDRgtCwINC+0LHRgNCw0YLQvdC+0LPQviDQvtGC0YHRh9C10YLQsFxyXG5cdFx0dmFyIG1pbnV0ZXMgPSBzZWNvbmRzLzYwOyAvLyDQvtC/0YDQtdC00LXQu9GP0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDQvNC40L3Rg9GCINC00L4g0LjRgdGC0LXRh9C10L3QuNGPINGC0LDQudC80LXRgNCwXHJcblx0XHR2YXIgaG91cnMgPSBtaW51dGVzLzYwOyAvLyDQvtC/0YDQtdC00LXQu9GP0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDRh9Cw0YHQvtCyINC00L4g0LjRgdGC0LXRh9C10L3QuNGPINGC0LDQudC80LXRgNCwXHJcblx0XHRtaW51dGVzID0gKGhvdXJzIC0gTWF0aC5mbG9vcihob3VycykpICogNjA7IC8vINC/0L7QtNGB0YfQuNGC0YvQstCw0LXQvCDQutC+0Lst0LLQviDQvtGB0YLQsNCy0YjQuNGF0YHRjyDQvNC40L3Rg9GCINCyINGC0LXQutGD0YnQtdC8INGH0LDRgdC1XHJcblx0XHRob3VycyA9IE1hdGguZmxvb3IoaG91cnMpOyAvLyDRhtC10LvQvtC1INC60L7Qu9C40YfQtdGB0YLQstC+INGH0LDRgdC+0LIg0LTQviDQuNGB0YLQtdGH0LXQvdC40Y8g0YLQsNC50LzQtdGA0LBcclxuXHRcdHNlY29uZHMgPSBNYXRoLmZsb29yKChtaW51dGVzIC0gTWF0aC5mbG9vcihtaW51dGVzKSkgKiA2MCk7IC8vINC/0L7QtNGB0YfQuNGC0YvQstCw0LXQvCDQutC+0Lst0LLQviDQvtGB0YLQsNCy0YjQuNGF0YHRjyDRgdC10LrRg9C90LQg0LIg0YLQtdC60YPRidC10Lkg0LzQuNC90YPRgtC1XHJcblx0XHRtaW51dGVzID0gTWF0aC5mbG9vcihtaW51dGVzKTsgLy8g0L7QutGA0YPQs9C70Y/QtdC8INC00L4g0YbQtdC70L7Qs9C+INC60L7Quy3QstC+INC+0YHRgtCw0LLRiNC40YXRgdGPINC80LjQvdGD0YIg0LIg0YLQtdC60YPRidC10Lwg0YfQsNGB0LVcclxuXHRcdFxyXG5cdFx0c2V0VGltZVBhZ2UoaG91cnMsbWludXRlcyxzZWNvbmRzKTsgLy8g0LLRi9GB0YLQsNCy0LvRj9C10Lwg0L3QsNGH0LDQu9GM0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8g0YLQsNC50LzQtdGA0LBcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gc2VjT3V0KCkge1xyXG5cdFx0ICBpZiAoc2Vjb25kcyA9PSAwKSB7IC8vINC10YHQu9C4INGB0LXQutGD0L3QtNGDINC30LDQutC+0L3Rh9C40LvQuNGB0Ywg0YLQvlxyXG5cdFx0XHQgIGlmIChtaW51dGVzID09IDApIHsgLy8g0LXRgdC70Lgg0LzQuNC90YPRgtGLINC30LDQutC+0L3Rh9C40LvQuNGB0Ywg0YLQvlxyXG5cdFx0XHRcdCAgaWYgKGhvdXJzID09IDApIHsgLy8g0LXRgdC70Lgg0YfQsNGB0Ysg0LfQsNC60L7QvdGH0LjQu9C40YHRjCDRgtC+XHJcblx0XHRcdFx0XHQgIHNob3dNZXNzYWdlKHRpbWVySWQpOyAvLyDQstGL0LLQvtC00LjQvCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtC60L7QvdGH0LDQvdC40Lgg0L7RgtGB0YfQtdGC0LBcclxuXHRcdFx0XHQgIH1cclxuXHRcdFx0XHQgIGVsc2Uge1xyXG5cdFx0XHRcdFx0ICBob3Vycy0tOyAvLyDRg9C80LXQvdGM0YjQsNC10Lwg0LrQvtC7LdCy0L4g0YfQsNGB0L7QslxyXG5cdFx0XHRcdFx0ICBtaW51dGVzID0gNTk7IC8vINC+0LHQvdC+0LLQu9GP0LXQvCDQvNC40L3Rg9GC0YsgXHJcblx0XHRcdFx0XHQgIHNlY29uZHMgPSA1OTsgLy8g0L7QsdC90L7QstC70Y/QtdC8INGB0LXQutGD0L3QtNGLXHJcblx0XHRcdFx0ICB9XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQgIGVsc2Uge1xyXG5cdFx0XHRcdCAgbWludXRlcy0tOyAvLyDRg9C80LXQvdGM0YjQsNC10Lwg0LrQvtC7LdCy0L4g0LzQuNC90YPRglxyXG5cdFx0XHRcdCAgc2Vjb25kcyA9IDU5OyAvLyDQvtCx0L3QvtCy0LvRj9C10Lwg0YHQtdC60YPQvdC00YtcclxuXHRcdFx0ICB9XHJcblx0XHQgIH1cclxuXHRcdCAgZWxzZSB7XHJcblx0XHRcdCAgc2Vjb25kcy0tOyAvLyDRg9C80LXQvdGM0YjQsNC10Lwg0LrQvtC7LdCy0L4g0YHQtdC60YPQvdC0XHJcblx0XHQgIH1cclxuXHRcdCAgc2V0VGltZVBhZ2UoaG91cnMsbWludXRlcyxzZWNvbmRzKTsgLy8g0L7QsdC90L7QstC70Y/QtdC8INC30L3QsNGH0LXQvdC40Y8g0YLQsNC50LzQtdGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcblx0XHR9XHJcblx0XHR0aW1lcklkID0gc2V0SW50ZXJ2YWwoc2VjT3V0LCAxMDAwKSAvLyDRg9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQstGL0LfQvtCyINGE0YPQvdC60YbQuNC4INGH0LXRgNC10Lcg0LrQsNC20LTRg9GOINGB0LXQutGD0L3QtNGDXHJcblx0fVxyXG5cdGVsc2Uge1xyXG5cdFx0Ly9hbGVydChcItCj0YHRgtCw0L3QvtCy0LvQtdC90L3QsNGPINC00LDRgtCwINGD0LbQtSDQv9GA0L7RiNC70LBcIik7XHJcblx0fVxyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINC40LfQvNC10L3QtdC90LjRjyDQstGA0LXQvNC10L3QuCDQsiDQvtC60L3QtVxyXG5mdW5jdGlvbiBzZXRUaW1lUGFnZShoLG0scykgeyAvLyDRhNGD0L3QutGG0LjRjyDQstGL0YHRgtCw0LLQu9C10L3QuNGPINGC0LDQudC80LXRgNCwINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG5cclxuICAgIGlmKG08MTApeyBtPScwJyttO31cclxuXHRpZihzPDEwKXsgcz0nMCcrczt9XHJcblx0XHJcbiAgICAkKCcuY2xvY2tfdGFibGUnKS5lbXB0eSgpLmFwcGVuZChtKyc6JytzKTtcclxuXHRcclxuXHRpZihtPDUpXHJcblx0e1xyXG5cdFx0JCgnLmNsb2NrX3RhYmxlJykuc2hvdygpO1xyXG5cdH1cclxufVxyXG5cclxuLy8g0YTRg9C90LrRhtC40Y8sINCy0YvQt9GL0LLQsNC10LzQsNGPINC/0L4g0LjRgdGC0LXRh9C10L3QuNGOINCy0YDQtdC80LXQvdC4XHJcbmZ1bmN0aW9uIHNob3dNZXNzYWdlKHRpbWVySWQpIHsgXHJcblx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTsgXHJcblx0JC5hcmN0aWNtb2RhbCgnY2xvc2UnKTtcdFxyXG59XHJcblxyXG4vL9Cy0YvQstC+0LQg0L7QutC90LAg0LLRhdC+0LTQsCDQsiDRgdC40YHRgtC10LzRg1xyXG5mdW5jdGlvbiBXaW5kb3dMb2dpbigpXHJcbntcclxuXHQgICQoZG9jdW1lbnQpLnVuYmluZCgnbW91c2Vtb3ZlLnRpbWUga2V5ZG93bi50aW1lIHNjcm9sbC50aW1lJyk7XHJcblx0ICAvL9C30LDQstC10YDRiNC10L3QuNC1INGB0LXRgdGB0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuXHQgIC8vJC5jb29raWUoJ3VzZXJfaWQnLCBudWxsLCB7cGF0aDonLyd9KTsgIFxyXG5cdCAgLy8kLmNvb2tpZSgnZGEnLCBudWxsLCB7cGF0aDonLyd9KTsgXHJcblxyXG5cdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0JC5hcmN0aWNtb2RhbCgnY2xvc2UnKTtcclxuXHJcblx0ICAvL9C+0YLQutGA0YvRgtC40LUg0YTQvtGA0LzRiyDQtNC70Y8g0LLRhdC+0LTQsFxyXG5cdC8qXHJcblx0ICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2xvZ2luLnBocD91cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24oZGF0YSwgZWwpIHtcclxuICAgICAgICAvL2FsZXJ0KCdhZnRlckxvYWRpbmcnKTtcclxuICAgIH0sXHJcbiAgICBhZnRlckxvYWRpbmdPblNob3c6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nT25TaG93Jyk7XHJcbiAgICB9LFxyXG5cdGFmdGVyQ2xvc2U6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdCBcclxuICAgIH1cclxuXHJcbiAgfSk7Ki9cclxuXHJcblx0JC5hcmN0aWNtb2RhbCh7XHJcblx0XHR0eXBlOiAnYWpheCcsXHJcblx0XHR1cmw6ICdmb3Jtcy9sb2dpbl9uZXcucGhwP3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcblxyXG5cclxuXHQgIFxyXG5cdCAgXHJcblx0ICBcclxuICAgICAgaWRsZVN0YXRlID0gdHJ1ZTsgXHRcclxufVxyXG5cclxuZnVuY3Rpb24gYXV0b1JlbG9hZEhhaygpe1xyXG4gIHZhciBnb2FsID0gc2VsZi5sb2NhdGlvbjtcclxuICBsb2NhdGlvbi5ocmVmID0gZ29hbDtcclxufVxyXG5mdW5jdGlvbiBUaW1lSGFrKClcclxue1xyXG5cclxuXHR2YXIgdHNsID0gJC5jb29raWUoJ3RzbCcpO1xyXG5cdC8vYWxlcnQodHNsKTtcclxuXHQvL2FsZXJ0KGNvb2tpZV9uZXcpO1xyXG5cdGlmKCh0c2whPW51bGwpJiYodHNsPT0xKSApXHJcblx0e1xyXG5cdCAgYXV0b1JlbG9hZEhhaygpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8v0YHQu9C10LTQuNGCINC30LAg0LjQt9C80LXQvdC10L3QuNC10Lwg0Lgg0YDQsNCx0L7RgtC+0Lkg0LIg0YHQuNGB0YLQtdC80LUg0LIg0LTRgNGD0LPQuNGFINC+0LrQvdCw0YVcclxuZnVuY3Rpb24gVGltZVN5c3RlbSgpXHJcbnsgXHJcbiAgLy8kKCcuZGVidWcnKS5lbXB0eSgpLmFwcGVuZCgkLmNvb2tpZShcInRzc1wiKSk7XHRcclxuXHRcclxuICBpZigoIWlzTmFOKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0c3MnKSkpKSBcclxuICB7IFxyXG5cdC8vJCgnLmRlYnVnJykuZW1wdHkoKS5hcHBlbmQoJyExJyk7XHJcblx0aWYoaWRUaW1lU3RhbXBlIT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndHNzJykpXHJcbiAgIHtcclxuXHQgICAvLyAkKCcuZGVidWcnKS5lbXB0eSgpLmFwcGVuZChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndHNzJykpO1xyXG5cdFx0aWRUaW1lU3RhbXBlPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0c3MnKTsgICBcclxuXHQgICAgY2xlYXJUaW1lb3V0KGlkbGVUaW1lcik7IC8vINC+0YLQvNC10L3Rj9C10Lwg0L/RgNC10LbQvdC40Lkg0LLRgNC10LzQtdC90L3QvtC5INC+0YLRgNC10LfQvtC6XHJcblx0ICAgIGlkbGVTdGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlkbGVUaW1lciA9IHNldFRpbWVvdXQodGltZXNzcywgaWRsZVdhaXQpO1x0ICAgXHJcblx0ICAgfVxyXG4gICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL9C+0LHRgNCw0YnQtdC90LjQtSDQt9CwINGD0LLQtdC00L7QvNC70LXQvdC40LXQvFxyXG5mdW5jdGlvbiBOb3RpZmljYXRpb25TeXN0ZW0oKVxyXG57IFxyXG4gIC8vXHJcbiAgaWYoJCgnLnVzZXJzX3J1bGUnKS5pcygnW25vdF0nKSkgXHJcbiAgeyAgXHRcdFxyXG4gICAgdmFyIGRhdGE9J3RrPScrJCgnLnVzZXJzX3J1bGUnKS5hdHRyKCdub3QnKTtcdFxyXG4gICAgbnByb2dyZXNzPTE7XHQgIFxyXG4gICAgQWpheENsaWVudCgnbm90aWZpY2F0aW9uJywnZXZlbicsJ0dFVCcsZGF0YSwnQWZ0ZXJOb2ZpJywxLDApO1x0XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIE5vdGlmU3lzdGVtKClcclxue1xyXG4vL9C90LAg0LrQsNC60LjRhSDRgtC+INGB0YLRgNCw0L3QuNGG0LDRhSDQvNC+0LbQvdC+INC90LUg0LLQutC70Y7Rh9Cw0YLRjCDQvtCx0L3QvtCy0LvQtdC90LjQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5XHRcclxuIGlmKHR5cGVvZiBOb3RpZlZhciA9PSBcInVuZGVmaW5lZFwiKVx0XHJcbiB7IFxyXG4gIC8vdGltZXJTID0gc2V0SW50ZXJ2YWwoVGltZVN5c3RlbSwgMTAwMCk7XHQgXHJcbiAgJChkb2N1bWVudCkuYmluZCgnbW91c2Vtb3ZlLm5vdGlmIGtleWRvd24ubm90aWYgc2Nyb2xsLm5vdGlmJywgZnVuY3Rpb24oKXtcclxuICAgIGNsZWFyVGltZW91dChpZGxlVGltZXJ4KTsgLy8g0L7RgtC80LXQvdGP0LXQvCDQv9GA0LXQttC90LjQuSDQstGA0LXQvNC10L3QvdC+0Lkg0L7RgtGA0LXQt9C+0LpcclxuXHQgXHJcbiAgICAgLy8gJC5jb29raWUoJ3RzcycsICQubm93KCksIHtleHBpcmVzOiAxLHBhdGg6ICcvJ30pO1xyXG5cdCAgXHJcblx0ICAvLyQoJy5kZWJ1ZycpLmVtcHR5KCkuYXBwZW5kKCQuY29va2llKCd0c3MnKSk7XHQgIFxyXG5cdCAgXHJcbiAgICBpZihpZGxlU3RhdGV4ID09IHRydWUpeyBcclxuICAgICAgLy8g0JTQtdC50YHRgtCy0LjRjyDQvdCwINCy0L7Qt9Cy0YDQsNGJ0LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgIGlkbGVXYWl0X3llcz1pZGxlV2FpdF9zdGFydDtcclxuXHQgIGNsZWFySW50ZXJ2YWwodGltZXJTeCk7XHJcblx0ICB0aW1lclN4ID0gc2V0SW50ZXJ2YWwoTm90aWZpY2F0aW9uU3lzdGVtLCBpZGxlV2FpdF95ZXMpOyBcclxuXHQgIE5vdGlmaWNhdGlvblN5c3RlbSgpO1x0XHJcbiAgICB9XHJcbiBcclxuICAgIGlkbGVTdGF0ZXggPSBmYWxzZTtcclxuXHRpZGxlV2FpdF95ZXM9aWRsZVdhaXRfc3RhcnQ7IFxyXG5cdC8vY2xlYXJJbnRlcnZhbCh0aW1lclN4KTtcclxuXHQvL3RpbWVyU3ggPSBzZXRJbnRlcnZhbChOb3RpZmljYXRpb25TeXN0ZW0sIGlkbGVXYWl0X3llcyk7ICAgXHJcblx0ICBcclxuICAgIGlkbGVUaW1lcnggPSBzZXRUaW1lb3V0KHRpbWVzc3N4LCBpZGxlV2FpdF9zdG9wKTtcclxuXHQgXHJcbiAgfSk7XHJcbiAgdGltZXJTeCA9IHNldEludGVydmFsKE5vdGlmaWNhdGlvblN5c3RlbSwgaWRsZVdhaXRfeWVzKTsgXHJcbiAgJChcImJvZHlcIikudHJpZ2dlcihcIm1vdXNlbW92ZVwiKTsgLy8g0YHQs9C10L3QtdGA0LjRgNGD0LXQvCDQu9C+0LbQvdC+0LUg0YHQvtCx0YvRgtC40LUsINC00LvRjyDQt9Cw0L/Rg9GB0LrQsCDRgdC60YDQuNC/0YLQsFx0XHJcbiB9XHJcbn1cclxuXHJcbi8v0LXRgdC70Lgg0L/RgNC+0LjQt9C+0YjQu9C+INCx0LXQt9C00LXQudGB0YLQstC40LUg0LIg0YLQtdGH0LXQvdC40LggMTAg0LzQuNC90YPRglxyXG5mdW5jdGlvbiB0aW1lc3NzeCgpIHsgXHJcblx0ICBcclxuXHQgIC8v0LXRgdC70Lgg0L/QsNGA0L7Qu9GMINC90LUg0LLQstC10LvQuCDRh9C10YDQtdC3INC80LjQvdGD0YIg0L/QtdGA0LXQt9Cw0LPRgNGD0LfQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgICAvLyDQlNC10LnRgdGC0LLQuNGPINC90LAg0L7RgtGB0YPRgtGB0YLQstC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcblx0ICAvL2FsZXJ0KCfQstGL0YXQvtC0INC40Lcg0YHQuNGB0YLQtdC80YsnKTtcclxuXHQgIC8vJChkb2N1bWVudCkudW5iaW5kKCdtb3VzZW1vdmUudGltZSBrZXlkb3duLnRpbWUgc2Nyb2xsLnRpbWUnKTtcclxuXHQgIC8v0LfQsNCy0LXRgNGI0LXQvdC40LUg0YHQtdGB0YHQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5cdCAgLy8kLmNvb2tpZSgndXNlcl9pZCcsIG51bGwsIHtwYXRoOicvJ30pOyAgXHJcblx0ICAvLyQuY29va2llKCdkYScsIG51bGwsIHtwYXRoOicvJ30pOyBcclxuXHQgIFxyXG5cdCAgLy/QvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQu9GPINCy0YXQvtC00LBcclxuXHQgIGlkbGVXYWl0X3llcz1pZGxlV2FpdF9lbmQ7XHJcbiAgICAgIGlkbGVTdGF0ZXggPSB0cnVlOyBcclxuXHQgIGNsZWFySW50ZXJ2YWwodGltZXJTeCk7XHJcblx0ICB0aW1lclN4ID0gc2V0SW50ZXJ2YWwoTm90aWZpY2F0aW9uU3lzdGVtLCBpZGxlV2FpdF95ZXMpOyBcclxuICAgIH1cclxuXHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LLQtNGA0YPQsyDQsiDQutCw0LrQvtC8INGC0L4g0L7QutC90LUg0LfQsNGI0LvQuCDQv9C+0LQg0LvQvtCz0LjQvdC+0Lwg0YLQvtCz0LTQsCDQuCDQsiDQtNGA0YPQs9C+0Lwg0L7QutC90LUg0L/QtdGA0LXQt9Cw0LPRgNGD0LfQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xyXG5mdW5jdGlvbiB1cGRhdGVsb2dpbmhhaygpXHJcbntcclxuXHR0aW1lckggPSBzZXRJbnRlcnZhbChUaW1lSGFrLCAxNTAwMCk7XHRcclxufVxyXG5cclxuLy/QstGL0YXQvtC0INC40Lcg0YHQuNGB0YLQtdC80Ysg0L/RgNC4INCx0LXQt9C00LXQudGB0YLQstC40Lgg0LLQviDQstGB0LXRhSDQvtC60L3QsNGFINGN0YLQvtC5INGB0LjRgdGC0LXQvNGLXHJcbmZ1bmN0aW9uIEV4aXRTeXN0ZW0oKVxyXG57XHJcbiBpZih0eXBlb2YgTG9naW5WYXIgPT0gXCJ1bmRlZmluZWRcIilcdFxyXG4geyBcclxuICB0aW1lclMgPSBzZXRJbnRlcnZhbChUaW1lU3lzdGVtLCAxMDAwKTtcdCBcclxuICAkKGRvY3VtZW50KS5iaW5kKCdtb3VzZW1vdmUudGltZSBrZXlkb3duLnRpbWUgc2Nyb2xsLnRpbWUnLCBmdW5jdGlvbigpe1xyXG4gICAgY2xlYXJUaW1lb3V0KGlkbGVUaW1lcik7IC8vINC+0YLQvNC10L3Rj9C10Lwg0L/RgNC10LbQvdC40Lkg0LLRgNC10LzQtdC90L3QvtC5INC+0YLRgNC10LfQvtC6XHJcblx0IFxyXG4gICAgICAvLyQuY29va2llKCd0c3MnLCAkLm5vdygpLCB7ZXhwaXJlczogMTAwLHBhdGg6ICcvJ30pO1xyXG5cdCAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RzcycsICQubm93KCkpO1xyXG5cdCAvLyAkLmNvb2tpZSgndHNzJywgJC5ub3coKSk7XHJcblx0ICAvLyQoJy5kZWJ1ZycpLmVtcHR5KCkuYXBwZW5kKCQuY29va2llKFwidHNzXCIpKTtcclxuXHQgIC8vJC5jb29raWUoJ3RzcycsICQubm93KCksIHtleHBpcmVzOiA2MCxwYXRoOiAnLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlfTtcclxuXHQgIC8vJC5jb29raWUoJ2lzcycsICdzJywge2V4cGlyZXM6IDYwLHBhdGg6ICcvJ30pO1xyXG5cdCAgXHJcblx0ICAgIFxyXG5cdCAgXHJcbiAgICBpZihpZGxlU3RhdGUgPT0gdHJ1ZSl7IFxyXG4gICAgICAvLyDQlNC10LnRgdGC0LLQuNGPINC90LAg0LLQvtC30LLRgNCw0YnQtdC90LjQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIH1cclxuIFxyXG4gICAgaWRsZVN0YXRlID0gZmFsc2U7XHJcbiAgICBpZGxlVGltZXIgPSBzZXRUaW1lb3V0KHRpbWVzc3MsIGlkbGVXYWl0KTtcclxuICB9KTtcclxuIFxyXG4gICQoXCJib2R5XCIpLnRyaWdnZXIoXCJtb3VzZW1vdmVcIik7IC8vINGB0LPQtdC90LXRgNC40YDRg9C10Lwg0LvQvtC20L3QvtC1INGB0L7QsdGL0YLQuNC1LCDQtNC70Y8g0LfQsNC/0YPRgdC60LAg0YHQutGA0LjQv9GC0LBcdFxyXG4gfVxyXG59XHJcbi8v0LLRi9C30L7QsiDRhNGD0L3QutGG0LjQuCDQstCy0L7QtNCwINC70L7Qs9C40L3QsCDQv9Cw0YDQvtC70Y9cclxuZnVuY3Rpb24gdGltZXNzcygpIHsgXHJcblx0ICBjbGVhckludGVydmFsKHRpbWVyUyk7XHJcblx0ICAvL9C10YHQu9C4INC/0LDRgNC+0LvRjCDQvdC1INCy0LLQtdC70Lgg0YfQtdGA0LXQtyDQvNC40L3Rg9GCINC/0LXRgNC10LfQsNCz0YDRg9C30LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcclxuXHQgIHNldFRpbWVvdXQgKCBmdW5jdGlvbiAoKSB7IGF1dG9SZWxvYWRIYWsoKTsgfSwgNjAwMDAgKTtcclxuICAgICAgLy8g0JTQtdC50YHRgtCy0LjRjyDQvdCwINC+0YLRgdGD0YLRgdGC0LLQuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5cdCAgLy9hbGVydCgn0LLRi9GF0L7QtCDQuNC3INGB0LjRgdGC0LXQvNGLJyk7XHJcblx0ICAkKGRvY3VtZW50KS51bmJpbmQoJ21vdXNlbW92ZS50aW1lIGtleWRvd24udGltZSBzY3JvbGwudGltZScpO1xyXG5cdCAgLy/Qt9Cw0LLQtdGA0YjQtdC90LjQtSDRgdC10YHRgdC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcblx0ICAvLyQuY29va2llKCd1c2VyX2lkJywgbnVsbCwge3BhdGg6Jy8nfSk7ICBcclxuXHQgIC8vJC5jb29raWUoJ2RhJywgbnVsbCwge3BhdGg6Jy8nfSk7IFxyXG5cdCAgJC5jb29raWUoXCJ0c2xcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cdCAgLy/QvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQu9GPINCy0YXQvtC00LBcclxuXHJcblx0LypcclxuXHQgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvbG9naW4ucGhwP3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZycpO1xyXG4gICAgfSxcclxuICAgIGFmdGVyTG9hZGluZ09uU2hvdzogZnVuY3Rpb24oZGF0YSwgZWwpIHtcclxuICAgICAgICAvL2FsZXJ0KCdhZnRlckxvYWRpbmdPblNob3cnKTtcclxuICAgIH0sXHJcblx0YWZ0ZXJDbG9zZTogZnVuY3Rpb24oZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0IFxyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHQqL1xyXG5cdCQuYXJjdGljbW9kYWwoe1xyXG5cdFx0dHlwZTogJ2FqYXgnLFxyXG5cdFx0dXJsOiAnZm9ybXMvbG9naW5fbmV3LnBocD91cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZixcclxuXHRcdGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHRcdGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0XHRpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEJvZHlTY3Jvb2woKTtcclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblx0ICBcclxuICAgICAgaWRsZVN0YXRlID0gdHJ1ZTsgXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL9C/0YDQvtGE0LXRgNC60LAg0LXRgdGC0Ywg0LvQuCDQv9C+INGN0YLQvtC80YMg0LTQvtC80YMg0LIg0LrQvtGA0LfQuNC90LUg0LfQsNGP0LLQutC4INC90LAg0LzQsNGC0LXRgNC40LDQu9GLINC4INCy0YvQstC+0LTQuNGC0Ywg0LrQvdC+0L/QutGDINC+0YTQvtGA0LzQuNGC0Ywg0LfQsNGP0LLQutGDXHJcbmZ1bmN0aW9uIEJhc2tldE1hdGVyaWFsKClcclxue1xyXG5cdHZhciBpZF9kb209JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdkb20nKTtcclxuXHRpZigkKCcuYWRkX3ZfemF5JykubGVuZ3RoKVxyXG5cdHtcclxuXHR2YXIgY29va2llID0gJC5jb29raWUod2luZG93LmJfY28rJ18nK2lkX2RvbSk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdHZhciBjb29raWUgPSAkLmNvb2tpZSh3aW5kb3cuYl9jbSsnXycraWRfZG9tKTtcdFx0XHJcblx0fVxyXG5cdC8vYWxlcnQod2luZG93LmJfY28pO1xyXG5cdC8vYWxlcnQoaWRfZG9tKTtcclxuXHRcclxuXHRpZigkKCcuYWRkX3ZfemF5JykubGVuZ3RoKVxyXG5cdHtcclxuXHQvL9C00L7QsdCw0LLQu9C10L3QuNC1INCyINGB0YPRidC10YHRgtCy0YPRjtGJ0YPRjiDQt9Cw0Y/QstC60YMg0LzQsNGC0LXRgNC40LDQu9C+0LJcclxuXHRpZihjb29raWU9PW51bGwpIHsgICQoJy5qcy1jb3VudC1tYXQtdXBkYXRlLWFwcCcpLnNsaWRlVXAoXCJzbG93XCIpOyAkKCcuanMtdXBkYXRlLW1hdC1hcHAnKS5oaWRlKCk7IH0gZWxzZVxyXG5cdHtcclxuXHRcdCQoJy5qcy11cGRhdGUtbWF0LWFwcCcpLnNob3coKTtcclxuXHRcdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdCAgICB2YXIgY291bnRzPWNjLmxlbmd0aDtcclxuXHRcdCQoJy5qcy1jb3VudC1tYXQtdXBkYXRlLWFwcCcpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblxyXG5cdFx0JCgnLmpzLWNvdW50LW1hdC11cGRhdGUtYXBwJykuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuXHJcblx0XHQvLyQoJy5uYXJ5ZF9lbmQgaScpLmNzcygndHJhbnNmb3JtJywnc2NhbGUoMiknKTtcclxuXHRcdC8vJCgnLm5hcnlkX2VuZCBpJykuc2NhbGUoMS41KTtcclxuXHRcdC8qXHJcblx0XHQkKCcuZm9udC1yYW5rLWlubmVyMTEnKS5hbmltYXRlKHtzY2FsZTogXCIxLjVcIn0sIDIwMCwgZnVuY3Rpb24oKSB7ICAkKCcuZm9udC1yYW5rLWlubmVyMTEnKS5hbmltYXRlKHtzY2FsZTogXCIxXCJ9LCAyMDApOyB9KTtcclxuKi9cclxuXHJcblx0XHQgJCgnI25wcm9ncmVzcycpLnNob3coKTtcclxuXHRcdCQoJyNucHJvZ3Jlc3MgLmJhcicpLmFuaW1hdGUoe3dpZHRoOiBcIjEwMCVcIn0sIDIwMCwgZnVuY3Rpb24oKSB7ICAkKCcjbnByb2dyZXNzJykuaGlkZSgpOyAkKCcjbnByb2dyZXNzIC5iYXInKS53aWR0aCgnMCcpOyB9KTtcclxuXHR9XHJcblx0fSBlbHNlXHJcblx0e1x0XHRcclxuXHRcclxuXHQvL9C+0YTQvtGA0LzQu9C10L3QuNC1INC90LDRgNGP0LTQsFx0XHRcclxuXHRcclxuXHRpZihjb29raWU9PW51bGwpIHsgJCgnLm1hdGVyaWFsX2VuZCcpLnJlbW92ZSgpOyAgJCgnLm1hdGVyaWFsX2ludicpLnJlbW92ZSgpO30gZWxzZVxyXG5cdHtcclxuXHRcdFxyXG5cdFx0aWYoISQoXCJkaXZcIikuaXMoXCIubWF0ZXJpYWxfZW5kXCIpKSB7XHJcblx0XHRcdCQoJy5hZGRfbW1tJykuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJtYXRlcmlhbF9lbmRcIiBkYXRhLXRvb2x0aXA9XCLQntGE0L7RgNC80LjRgtGMINC30LDRj9Cy0LrRgyDQvdCwINC80LDRgtC10YDQuNCw0LvRi1wiPjxhIGhyZWY9XCJhcHAvYWRkLycgKyBpZF9kb20gKyAnL1wiPmQ8aT48L2k+PC9hPjwvZGl2PicpO1xyXG5cdFx0fVxyXG5cdFx0aWYoISQoXCJkaXZcIikuaXMoXCIubWF0ZXJpYWxfaW52XCIpKSB7XHJcblxyXG5cdFx0XHQkKCcuYWRkX2lpaScpLmFmdGVyKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWxfaW52XCIgZGF0YS10b29sdGlwPVwi0J7RhNC+0YDQvNC40YLRjCDQvdCw0LrQu9Cw0LTQvdGD0Y5cIj48YSBocmVmPVwiaW52b2ljZXMvYWRkLycraWRfZG9tKycvXCI+SDxpPjwvaT48L2E+PC9kaXY+Jyk7XHJcblxyXG5cdFx0fVxyXG5cdFx0dmFyIGNjID0gY29va2llLnNwbGl0KCcuJyk7XHJcblx0ICAgIHZhciBjb3VudHM9Y2MubGVuZ3RoO1xyXG5cdFx0JCgnLm1hdGVyaWFsX2VuZCBpJykuZW1wdHkoKS5hcHBlbmQoY291bnRzKTtcclxuXHRcdCQoJy5tYXRlcmlhbF9pbnYgaScpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblx0XHQvLyQoJy5uYXJ5ZF9lbmQgaScpLmNzcygndHJhbnNmb3JtJywnc2NhbGUoMiknKTtcclxuXHRcdC8vJCgnLm5hcnlkX2VuZCBpJykuc2NhbGUoMS41KTtcclxuXHRcdCQoJy5tYXRlcmlhbF9lbmQgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjEuNVwifSwgMjAwLCBmdW5jdGlvbigpIHsgICQoJy5tYXRlcmlhbF9lbmQgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjFcIn0sIDIwMCk7IH0pO1xyXG5cclxuXHRcdCQoJy5tYXRlcmlhbF9pbnYgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjEuNVwifSwgMjAwLCBmdW5jdGlvbigpIHsgICQoJy5tYXRlcmlhbF9pbnYgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjFcIn0sIDIwMCk7IH0pO1xyXG5cclxuXHRcdCAkKCcjbnByb2dyZXNzJykuc2hvdygpO1xyXG5cdFx0JCgnI25wcm9ncmVzcyAuYmFyJykuYW5pbWF0ZSh7d2lkdGg6IFwiMTAwJVwifSwgMjAwLCBmdW5jdGlvbigpIHsgICQoJyNucHJvZ3Jlc3MnKS5oaWRlKCk7ICQoJyNucHJvZ3Jlc3MgLmJhcicpLndpZHRoKCcwJyk7IH0pO1xyXG5cdH1cclxuXHR9XHJcblx0XHJcblx0Ly/Qv9C+0LzQtdGH0LDQtdC8INGB0LrQvtC70YzQutC+INCyINC60LDQutC+0Lwg0YDQsNC30LTQtdC70LUg0YDQsNCx0L7RgiDQsiDQutC+0YDQt9C40L3QtVxyXG5cdC8qXHJcblx0dmFyIG51bU9wdD0kKCcuYmxvY2tfaScpO1xyXG5cdCQoJy5ibG9ja19pJykuZmluZCgnLmNvdW50X2Jhc2tldF9yYXpkZWwnKS5lbXB0eSgpO1xyXG5cdG51bU9wdC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIFxyXG5cdHsgXHJcblx0XHRcdHZhciBjYz0kKHRoaXMpLmZpbmQoJy5jaGVjaGVyJykubGVuZ3RoO1xyXG5cdFx0XHRpZihjYyE9MClcclxuXHRcdFx0e1xyXG5cdFx0XHQgICAkKHRoaXMpLmZpbmQoJy5jb3VudF9iYXNrZXRfcmF6ZGVsJykuZW1wdHkoKS5hcHBlbmQoY2MpO1x0XHJcblx0XHRcdH1cclxuXHR9KTtcclxuXHQqL1xyXG59XHJcblxyXG5cclxuXHJcbi8v0L/RgNC+0YTQtdGA0LrQsCDQtdGB0YLRjCDQu9C4INC/0L4g0Y3RgtC+0LzRgyDQtNC+0LzRgyDQsiDQutC+0YDQt9C40L3QtSDQvdCw0YDRj9C00L7QsiAtINC90LDRgNGP0LTRiyDQuCDQstGL0LLQvtC00LjRgtGMINC60L3QvtC/0LrRgyDQvtGE0L7RgNC80LjRgtGMINC4INC60L7Qu9C40YfQtdGB0YLQstC+INC10YHQu9C4INGH0YLQvlxyXG5mdW5jdGlvbiBCYXNrZXRGaW5lcnkoKVxyXG57XHJcblx0dmFyIGlkX2RvbT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2RvbScpO1xyXG5cdHZhciBjb29raWUgPSAkLmNvb2tpZSh3aW5kb3cuYl9jbysnXycraWRfZG9tKTtcclxuXHQvL2FsZXJ0KHdpbmRvdy5iX2NvKTtcclxuXHQvL2FsZXJ0KGNvb2tpZSk7XHJcblx0aWYoKCQoJy5hZGRfdl9uYXJ5YWQnKS5sZW5ndGgpfHwoJCgnLmFkZF92X3pheScpLmxlbmd0aCkpXHJcblx0e1xyXG5cdFx0Ly9hbGVydChcIiFcIik7XHJcblx0Ly/QtNC+0LHQsNCy0LvQtdC90LjQtSDQsiDRgdGD0YnQtdGB0YLQstGD0Y7RidC40Lkg0L3QsNGA0Y/QtFxyXG5cdFx0LypcclxuXHRpZihjb29raWU9PW51bGwpIHsgJCgnLmZvbnQtcmFuazExJykucmVtb3ZlKCk7ICQoJy5qcy1hZGRfbmFyJykuaGlkZSgpOyAkKCcuYWRkX3pheXknKS5oaWRlKCk7ICQoJy5qcy11cGRhdGUtbWF0LWFwcCcpLmhpZGUoKTsgICAgIH0gZWxzZVxyXG5cdHtcclxuXHRcdCQoJy5qcy1hZGRfbmFyJykuc2hvdygpO1xyXG5cdFx0JCgnLmFkZF96YXl5Jykuc2hvdygpO1xyXG5cdFx0JCgnLmpzLXVwZGF0ZS1tYXQtYXBwJykuc2hvdygpO1xyXG5cclxuXHRcdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdCAgICB2YXIgY291bnRzPWNjLmxlbmd0aDtcclxuXHRcdCQoJy5mb250LXJhbmstaW5uZXIxMScpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblx0XHQvLyQoJy5uYXJ5ZF9lbmQgaScpLmNzcygndHJhbnNmb3JtJywnc2NhbGUoMiknKTtcclxuXHRcdC8vJCgnLm5hcnlkX2VuZCBpJykuc2NhbGUoMS41KTtcclxuXHRcdCQoJy5mb250LXJhbmstaW5uZXIxMScpLmFuaW1hdGUoe3NjYWxlOiBcIjEuNVwifSwgMjAwLCBmdW5jdGlvbigpIHsgICQoJy5mb250LXJhbmstaW5uZXIxMScpLmFuaW1hdGUoe3NjYWxlOiBcIjFcIn0sIDIwMCk7IH0pO1xyXG5cdFx0ICQoJyNucHJvZ3Jlc3MnKS5zaG93KCk7XHJcblx0XHQkKCcjbnByb2dyZXNzIC5iYXInKS5hbmltYXRlKHt3aWR0aDogXCIxMDAlXCJ9LCAyMDAsIGZ1bmN0aW9uKCkgeyAgJCgnI25wcm9ncmVzcycpLmhpZGUoKTsgJCgnI25wcm9ncmVzcyAuYmFyJykud2lkdGgoJzAnKTsgfSk7XHJcblx0fVxyXG4qL1xyXG5cclxuXHRcdGlmKGNvb2tpZT09bnVsbCkgeyAgJCgnLmpzLWNvdW50LW1hdC11cGRhdGUtYXBwJykuc2xpZGVVcChcInNsb3dcIik7ICQoJy5qcy1hZGRfbmFyJykuaGlkZSgpOyB9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCgnLmpzLWFkZF9uYXInKS5zaG93KCk7XHJcblx0XHRcdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdFx0XHR2YXIgY291bnRzPWNjLmxlbmd0aDtcclxuXHRcdFx0JCgnLmpzLWNvdW50LW1hdC11cGRhdGUtYXBwJykuZW1wdHkoKS5hcHBlbmQoY291bnRzKTtcclxuXHJcblx0XHRcdCQoJy5qcy1jb3VudC1tYXQtdXBkYXRlLWFwcCcpLnNsaWRlRG93bihcInNsb3dcIik7XHJcblxyXG5cdFx0XHQvLyQoJy5uYXJ5ZF9lbmQgaScpLmNzcygndHJhbnNmb3JtJywnc2NhbGUoMiknKTtcclxuXHRcdFx0Ly8kKCcubmFyeWRfZW5kIGknKS5zY2FsZSgxLjUpO1xyXG5cdFx0XHQvKlxyXG4gICAgICAgICAgICAkKCcuZm9udC1yYW5rLWlubmVyMTEnKS5hbmltYXRlKHtzY2FsZTogXCIxLjVcIn0sIDIwMCwgZnVuY3Rpb24oKSB7ICAkKCcuZm9udC1yYW5rLWlubmVyMTEnKS5hbmltYXRlKHtzY2FsZTogXCIxXCJ9LCAyMDApOyB9KTtcclxuICAgICovXHJcblxyXG5cdFx0XHQkKCcjbnByb2dyZXNzJykuc2hvdygpO1xyXG5cdFx0XHQkKCcjbnByb2dyZXNzIC5iYXInKS5hbmltYXRlKHt3aWR0aDogXCIxMDAlXCJ9LCAyMDAsIGZ1bmN0aW9uKCkgeyAgJCgnI25wcm9ncmVzcycpLmhpZGUoKTsgJCgnI25wcm9ncmVzcyAuYmFyJykud2lkdGgoJzAnKTsgfSk7XHJcblx0XHR9XHJcblxyXG5cclxuXHR9IGVsc2VcclxuXHR7XHRcdFxyXG5cdC8v0L7RhNC+0YDQvNC70LXQvdC40LUg0L3QsNGA0Y/QtNCwXHRcdFxyXG5cdFxyXG5cdGlmKGNvb2tpZT09bnVsbCkgeyAkKCcubmFyeWRfZW5kJykucmVtb3ZlKCk7IH0gZWxzZVxyXG5cdHtcclxuXHRcdFxyXG5cdFx0aWYoISQoXCJkaXZcIikuaXMoXCIubmFyeWRfZW5kXCIpKVxyXG5cdFx0e1xyXG5cdFx0XHQkKCcuYWRkX25ubicpLmFmdGVyKCc8ZGl2IGNsYXNzPVwibmFyeWRfZW5kXCIgZGF0YS10b29sdGlwPVwi0J7RhNC+0YDQvNC40YLRjCDQvdCw0YDRj9C0XCI+PGEgaHJlZj1cIndvcmRlci9hZGQvJytpZF9kb20rJy9cIj40PGk+PC9pPjwvYT48L2Rpdj4nKTtcclxuXHRcdH1cclxuXHRcdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdCAgICB2YXIgY291bnRzPWNjLmxlbmd0aDtcclxuXHRcdCQoJy5uYXJ5ZF9lbmQgaScpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblx0XHQvLyQoJy5uYXJ5ZF9lbmQgaScpLmNzcygndHJhbnNmb3JtJywnc2NhbGUoMiknKTtcclxuXHRcdC8vJCgnLm5hcnlkX2VuZCBpJykuc2NhbGUoMS41KTtcclxuXHRcdCQoJy5uYXJ5ZF9lbmQgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjEuNVwifSwgMjAwLCBmdW5jdGlvbigpIHsgICQoJy5uYXJ5ZF9lbmQgaScpLmFuaW1hdGUoe3NjYWxlOiBcIjFcIn0sIDIwMCk7IH0pO1xyXG5cdFx0ICQoJyNucHJvZ3Jlc3MnKS5zaG93KCk7XHJcblx0XHQkKCcjbnByb2dyZXNzIC5iYXInKS5hbmltYXRlKHt3aWR0aDogXCIxMDAlXCJ9LCAyMDAsIGZ1bmN0aW9uKCkgeyAgJCgnI25wcm9ncmVzcycpLmhpZGUoKTsgJCgnI25wcm9ncmVzcyAuYmFyJykud2lkdGgoJzAnKTsgfSk7XHJcblx0fVxyXG5cdH1cclxuXHQvL9C/0L7QvNC10YfQsNC10Lwg0YHQutC+0LvRjNC60L4g0LIg0LrQsNC60L7QvCDRgNCw0LfQtNC10LvQtSDRgNCw0LHQvtGCINCyINC60L7RgNC30LjQvdC1XHJcblx0dmFyIG51bU9wdD0kKCcuYmxvY2tfaScpO1xyXG5cdCQoJy5ibG9ja19pJykuZmluZCgnLmNvdW50X2Jhc2tldF9yYXpkZWwnKS5lbXB0eSgpO1xyXG5cdG51bU9wdC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIFxyXG5cdHsgXHJcblx0XHRcdHZhciBjYz0kKHRoaXMpLmZpbmQoJy5jaGVjaGVyJykubGVuZ3RoO1xyXG5cdFx0XHRpZihjYyE9MClcclxuXHRcdFx0e1xyXG5cdFx0XHQgICAkKHRoaXMpLmZpbmQoJy5jb3VudF9iYXNrZXRfcmF6ZGVsJykuZW1wdHkoKS5hcHBlbmQoY2MpO1x0XHJcblx0XHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNvbXBhcmVOdW1iZXJzKGEsIGIpIHtcclxuICByZXR1cm4gYSAtIGI7XHJcbn1cclxuXHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0Lgg0YPQtNCw0LvQtdC90LjQtSDQuNC3INC60YPQutC60Lgg0L/QtdGA0LXQvNC10L3QvdGL0YUg0YDQsNC30LTQtdC70LXQvdC90YvRhSDQvtC/0YDQtdC00LXQu9C10L3QvdGL0YUg0YHQuNC80LLQvtC70L7QvFxyXG5mdW5jdGlvbiBDb29raWVMaXN0UyhuYW1lLGlkLGNvbW1hbmQsc29ydCxzcGxpdClcclxue1xyXG4vL2RlbCAtIGFkZFxyXG4vL2FsZXJ0KCQuY29va2llKG5hbWUpKTtcclxuXHR2YXIgY29va2llID0gJC5jb29raWUobmFtZSk7XHJcblx0Ly9hbGVydChjb29raWUpO1xyXG5cdGlmKGNvb2tpZT09bnVsbCkgeyAkLmNvb2tpZShuYW1lLCBpZCwge2V4cGlyZXM6IDYwLHBhdGg6ICcvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHRpZihjb21tYW5kPT0nZGVsJylcclxuXHRcdHtcclxuXHJcblx0XHRcdHZhciBjYyA9IGNvb2tpZS5zcGxpdChzcGxpdCk7XHJcblx0XHRcdHZhciB0ZXh0PScnO1xyXG5cdFx0XHR2YXIgbHA9MDtcclxuXHRcdFx0Zm9yICggdmFyIHQgPSAwOyB0IDwgY2MubGVuZ3RoOyB0KysgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoY2NbdF0hPWlkKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKGNjW3RdIT0nJylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYobHA9PTApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0PWNjW3RdO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHRleHQ9dGV4dCtzcGxpdCtjY1t0XTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRscCsrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZih0ZXh0PT0nJylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQuY29va2llKG5hbWUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkLmNvb2tpZShuYW1lLCB0ZXh0LCB7cGF0aDogJy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pOyAgLy82MCDQtNC90LXQuVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHRcdC8vYWxlcnQoc29ydCk7XHJcblx0XHRcdGlmIChzb3J0ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHQkLmNvb2tpZShuYW1lLCBjb29raWUrc3BsaXQraWQsIHtwYXRoOiAnLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7IC8vNjAg0LTQvdC10LlcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihzb3J0PT0nc29ydCcpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIGpvbl9jb29raWU9Y29va2llK3NwbGl0K2lkO1xyXG5cdFx0XHRcdFx0dmFyIGpvbl9jYyA9IGpvbl9jb29raWUuc3BsaXQoc3BsaXQpO1xyXG5cclxuXHRcdFx0XHRcdGpvbl9jYz0gam9uX2NjLnNvcnQoY29tcGFyZU51bWJlcnMpO1xyXG5cdFx0XHRcdFx0Ly9hbGVydChqb25fY2Muam9pbihcIi5cIikpO1xyXG5cdFx0XHRcdFx0JC5jb29raWUobmFtZSwgam9uX2NjLmpvaW4oc3BsaXQpLCB7cGF0aDogJy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pOyAvLzYwINC00L3QtdC5XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH1cclxuXHJcblxyXG5cclxuXHRcdH1cclxuXHR9XHJcblx0Ly9hbGVydChjb29raWUpO1xyXG59XHJcblxyXG5cclxuLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQuCDRg9C00LDQu9C10L3QuNC1INC40Lcg0LrRg9C60LrQuCDQv9C10YDQtdC80LXQvdC90YvRhVxyXG5mdW5jdGlvbiBDb29raWVMaXN0KG5hbWUsaWQsY29tbWFuZCxzb3J0KVxyXG57XHJcbi8vZGVsIC0gYWRkXHJcbi8vYWxlcnQoJC5jb29raWUobmFtZSkpO1xyXG52YXIgY29va2llID0gJC5jb29raWUobmFtZSk7XHJcblx0Ly9hbGVydChjb29raWUpO1xyXG5pZihjb29raWU9PW51bGwpIHsgJC5jb29raWUobmFtZSwgaWQsIHtleHBpcmVzOiA2MCxwYXRoOiAnLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcbiB9IGVsc2Vcclxue1xyXG5cdGlmKGNvbW1hbmQ9PSdkZWwnKVxyXG5cdHtcclxuXHRcdFxyXG5cdHZhciBjYyA9IGNvb2tpZS5zcGxpdCgnLicpO1xyXG5cdHZhciB0ZXh0PScnO1xyXG5cdHZhciBscD0wO1xyXG5cdGZvciAoIHZhciB0ID0gMDsgdCA8IGNjLmxlbmd0aDsgdCsrICkgXHJcblx0eyBcclxuXHQgIGlmKGNjW3RdIT1pZClcclxuXHQgIHtcclxuXHRcdCAgaWYoY2NbdF0hPScnKVxyXG5cdFx0ICB7XHQgIFxyXG5cdFx0ICAgIGlmKGxwPT0wKVxyXG5cdFx0ICAgIHtcclxuXHRcdFx0ICB0ZXh0PWNjW3RdO1xyXG5cdFx0ICAgIH0gZWxzZVxyXG5cdFx0ICAgIHtcclxuXHRcdFx0ICB0ZXh0PXRleHQrJy4nK2NjW3RdO1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgICBscCsrO1xyXG5cdFx0ICB9XHJcblx0ICB9XHJcblx0fVxyXG5cdGlmKHRleHQ9PScnKVxyXG5cdHtcclxuXHRcdCQuY29va2llKG5hbWUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0ICAgICQuY29va2llKG5hbWUsIHRleHQsIHtwYXRoOiAnLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7ICAvLzYwINC00L3QtdC5XHJcblx0fVxyXG5cdFxyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdC8vYWxlcnQoc29ydCk7XHJcblx0XHQgIGlmIChzb3J0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgJC5jb29raWUobmFtZSwgY29va2llKycuJytpZCwge3BhdGg6ICcvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTsgLy82MCDQtNC90LXQuVxyXG4gICAgICAgICAgfSBlbHNlXHJcblx0ICAgICAge1xyXG5cdFx0XHRcdCAgaWYoc29ydD09J3NvcnQnKVxyXG5cdFx0XHRcdCAge1xyXG5cdFx0XHRcdFx0XHR2YXIgam9uX2Nvb2tpZT1jb29raWUrJy4nK2lkO1xyXG5cdFx0XHRcdFx0ICAgIHZhciBqb25fY2MgPSBqb25fY29va2llLnNwbGl0KCcuJyk7IFxyXG5cdFx0XHRcdFx0ICBcclxuXHRcdFx0XHRcdCAgIGpvbl9jYz0gam9uX2NjLnNvcnQoY29tcGFyZU51bWJlcnMpO1xyXG5cdFx0XHRcdFx0ICAgLy9hbGVydChqb25fY2Muam9pbihcIi5cIikpO1xyXG5cdFx0XHRcdFx0ICAgJC5jb29raWUobmFtZSwgam9uX2NjLmpvaW4oXCIuXCIpLCB7cGF0aDogJy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pOyAvLzYwINC00L3QtdC5XHJcblx0XHRcdFx0XHQgICAgXHJcblx0XHRcdFx0ICB9XHJcblx0XHRcdFx0ICBcclxuXHRcdCAgfVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdFxyXG5cdH1cclxufVxyXG5cdC8vYWxlcnQoY29va2llKTtcclxufVxyXG5cclxuXHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINCy0YHQv9C70YvQstCw0Y7RidC40LUg0LrQvtC80LzQtdC90YLQsNGA0LjQuFxyXG5mdW5jdGlvbiBUb29sVGlwKClcclxue1xyXG5cdFxyXG4kKFwiW2RhdGEtdG9vbHRpcF1cIikubW91c2Vtb3ZlKGZ1bmN0aW9uIChldmVudE9iamVjdCkge1xyXG5cdFx0XHJcblx0XHRpZighJChcImRpdlwiKS5pcyhcIiN0b29sdGlwXCIpKVxyXG5cdFx0e1xyXG5cdFx0ICAkKFwiYm9keVwiKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0b29sdGlwXCI+PC9kaXY+Jyk7XHJcblx0XHR9XHJcblxyXG4gICAgICAgICRkYXRhX3Rvb2x0aXAgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLXRvb2x0aXBcIik7XHJcbiAgICAgJChcIiN0b29sdGlwXCIpLmh0bWwoJGRhdGFfdG9vbHRpcCk7XHJcblx0dmFyIG9mZnNldCA9ICQodGhpcykub2Zmc2V0KCk7XHJcblx0XHJcblx0ICAgIFxyXG5cdC8vJCgnLmRlYnVnJykuZW1wdHkoKS5hcHBlbmQob2Zmc2V0LmxlZnQrJy0nKyQod2luZG93KS53aWR0aCgpKyctJyskKCcjdG9vbHRpcCcpLndpZHRoKCkrJy0nK2V2ZW50T2JqZWN0LnBhZ2VYKTtcclxuXHQvL3ZhciByYXpuPW9mZnNldC5sZWZ0KyQoJyN0b29sdGlwJykud2lkdGgoKTtcclxuXHJcblx0aWYoZXZlbnRPYmplY3QucGFnZVg+PSgkKHdpbmRvdykud2lkdGgoKS8yKSlcclxuXHRcdHtcclxuICAgICAgICAkKFwiI3Rvb2x0aXBcIikuY3NzKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBcInRvcFwiIDogZXZlbnRPYmplY3QucGFnZVkgKyA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxlZnRcIiA6IGV2ZW50T2JqZWN0LnBhZ2VYIC0gJCgnI3Rvb2x0aXAnKS5vdXRlcldpZHRoKCkgLSA1XHJcblx0XHRcclxuICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcdFx0XHRcclxuXHRcdH1lbHNlXHJcblx0e1xyXG4gICAgICAgICQoXCIjdG9vbHRpcFwiKS5jc3MoeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCIgOiBldmVudE9iamVjdC5wYWdlWSArIDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiIDogZXZlbnRPYmplY3QucGFnZVggKyA1XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgIC5zaG93KCk7XHJcblx0fVxyXG4gICAgfSkubW91c2VvdXQoZnVuY3Rpb24gKCkgeyAkKFwiI3Rvb2x0aXBcIikucmVtb3ZlKCk7IH0pO1xyXG5cclxufVxyXG5cclxuLy/Qt9Cw0LrRgNGL0YLRjCDQstGB0LUg0YDQsNC30LTQtdC70Ysg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxudmFyIGNsb3NlX2FsbF9yYXpkZWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGlkX2NvbnRlbnQ9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpZF9jb250ZW50Jyk7XHRcdFxyXG5cdFx0JCgnLmJsb2NrX2kgLmlfXycpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0JC5jb29raWUoXCJsX1wiK2lkX2NvbnRlbnQsIG51bGwsIHtwYXRoOicvJ30pOyBcclxuXHRcdCQoJy5ibG9ja19pIC5pX18nKS5lbXB0eSgpLmFwcGVuZChcIitcIik7XHRcdCAgXHJcbn1cclxuXHJcbi8v0L/QvtC40YHQuiDQv9C+INGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHJcbi8v0L/QvtC40YHQuiDQv9C+INGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHJcbiB2YXIgbWlubGVuID0gMzsgLy8g0LzQuNC90LjQvNCw0LvRjNC90LDRjyDQtNC70LjQvdCwINGB0LvQvtCy0LBcclxuIHZhciBwYWRkaW5ndG9wID0gMzA7IC8vINC+0YLRgdGC0YPQvyDRgdCy0LXRgNGF0YMg0L/RgNC4INC/0YDQvtC60YDRg9GC0LrQtVxyXG4gdmFyIHNjcm9sbHNwZWVkID0gMjAwOyAvLyDQstGA0LXQvNGPINC/0YDQvtC60YDRg9GC0LrQuFxyXG4gdmFyIGtleWludCA9IDIwMDA7IC8vINC40L3RgtC10YDQstCw0Lsg0LzQtdC20LTRgyDQvdCw0LbQsNGC0LjRj9C80Lgg0LrQu9Cw0LLQuNGIXHJcbiB2YXIgdGVybSA9ICcnO1xyXG4gdmFyIG4gPSAwO1xyXG4gdmFyIHNlYXJjaF9zdGVwPTA7XHJcbiB2YXIgdGltZV9rZXl1cCA9IDA7XHJcbiB2YXIgdGltZV9zZWFyY2ggPSAwO1xyXG5cclxudmFyICBkb3NlYXJjaCA9IGZ1bmN0aW9uKCkge1xyXG5cdHdpbmRvdy5zZWFyY2hfc3RlcD0wO1xyXG4gIHRlcm0gPSAkKCcuc2VhcmNoX3NlYicpLmZpbmQoJ2lucHV0JykudmFsKCk7XHJcbiAgJCgndmFyLmhpZ2hsaWdodCcpLmVhY2goZnVuY3Rpb24oKXsgJCh0aGlzKS5hZnRlcigkKHRoaXMpLmh0bWwoKSkucmVtb3ZlKCk7IH0pO1xyXG4gIHZhciB0ID0gJyc7XHJcbiAgdmFyIG49MDtcclxuICBpZih0ZXJtIT0nJylcclxuXHQgIHtcclxuICAkKCcuc19qJykuZWFjaChmdW5jdGlvbigpeyBcclxuXHJcbiAgICAkKHRoaXMpLmh0bWwoJCh0aGlzKS5odG1sKCkucmVwbGFjZShuZXcgUmVnRXhwKHRlcm0sICdpZycpLCAnPHZhciBjbGFzcz1cImhpZ2hsaWdodFwiPiQmPC92YXI+JykpOyBcclxuXHJcbiAgIH0pOyBcclxuXHQgIH1cclxuICAgIG4gPSAkKCd2YXIuaGlnaGxpZ2h0JykubGVuZ3RoOyBcclxuXHR3aW5kb3cubl9zZWFyY2hfcHJpbWU9bjtcclxuICAgJCgnLnJlc3VsdF9zJykuc2hvdygpO1xyXG4gICAkKCcucmVzdWx0X3MnKS5maW5kKCcuc2VfcHJldicpLmhpZGUoKTtcclxuICAgaWYgKG49PTApXHJcblx0ICAge1xyXG4gICAgJCgnLnJlc3VsdF9zJykuZmluZCgnZGl2JykuZW1wdHkoKS5hcHBlbmQoJ9Cd0LDQudC00LXQvdC+OiAwJyk7XHJcblx0JCgnLnJlc3VsdF9zJykuZmluZCgnLnNlX25leHQnKS5oaWRlKCk7XHJcblx0ICAgfVxyXG4gICBlbHNlXHJcblx0ICAge1xyXG4gICAgJCgnLnJlc3VsdF9zJykuZmluZCgnZGl2JykuZW1wdHkoKS5hcHBlbmQoJ9Cd0LDQudC00LXQvdC+OiA8c3BhbiBjbGFzcz1cInNfc3NcIj4nK24rJzwvc3Bhbj4nKTsgXHJcblx0JCgnLnJlc3VsdF9zJykuZmluZCgnLnNlX25leHQnKS5zaG93KCk7XHJcblx0ICAgfVxyXG4gICBpZiAobj4xKSBcclxuICAge1xyXG4gICAgd2luZG93LmlyciA9IDE7XHJcbiAgICAkKCd2YXIuaGlnaGxpZ2h0JykuZWFjaChmdW5jdGlvbihpcnIpeyAkKHRoaXMpLmF0dHIoJ25zcycsIHdpbmRvdy5pcnIpOyB3aW5kb3cuaXJyKys7ICB9KTtcclxuICAgfSBcclxuICBcclxuIH1cclxudmFyIHNlYXJjaF9wID0gZnVuY3Rpb24oKVxyXG57XHJcblx0ZG9zZWFyY2goKTtcdFxyXG59XHJcblxyXG52YXIgZXJyb3JfYW5pbT1mdW5jdGlvbigpXHJcbntcclxuXHQvL2FsZXJ0KCQodGhpcykuYXR0cignaWQnKSk7XHJcblx0c2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHsgYWxlcnQoJCh0aGlzKS5hdHRyKCdpZCcpKTsgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTsgfSwgMjAwMCApO1x0XHJcbn1cclxuXHJcbnZhciBzZWFyY2hfcHJldiA9IGZ1bmN0aW9uKClcclxue1xyXG5cdHdpbmRvdy5zZWFyY2hfc3RlcC0tO1xyXG5cdGlmKHdpbmRvdy5zZWFyY2hfc3RlcD49MClcclxuXHR7XHRcdFx0XHRcdFxyXG5cdFx0aWYoJCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykubGVuZ3RoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoISQoJ1tuc3M9Jyt3aW5kb3cuc2VhcmNoX3N0ZXArJ10nKS5wYXJlbnRzKCcuYmxvY2tfaScpLmlzKFwiLmFjdGl2ZVwiKSlcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0JCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykuZmluZCgnLmlfXycpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHR2YXIgaWRfY29udGVudD0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2lkX2NvbnRlbnQnKTtcclxuXHRcdCAgICAgICAgICAgICAgICBDb29raWVMaXN0KFwibF9cIitpZF9jb250ZW50LCQoJ1tuc3M9Jyt3aW5kb3cuc2VhcmNoX3N0ZXArJ10nKS5wYXJlbnRzKCcuYmxvY2tfaScpLmZpbmQoJy5pX18nKS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKCdyZWwnKSwnYWRkJyk7XHJcblx0XHQgICAgICAgICAgICAgICAgJCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykuZmluZCgnLmlfXycpLmVtcHR5KCkuYXBwZW5kKFwiLVwiKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGpRdWVyeS5zY3JvbGxUbygnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScsIDEwMDAsIHtvZmZzZXQ6LTIwMH0pO1x0XHJcblx0fSBcclxuXHJcblx0aWYod2luZG93LnNlYXJjaF9zdGVwPHdpbmRvdy5uX3NlYXJjaF9wcmltZSlcclxuXHRcdHtcclxuXHRcdFx0XHJcblx0XHRcdCQoJy5yZXN1bHRfcycpLmZpbmQoJy5zZV9uZXh0Jykuc2hvdygpO1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHRcclxuXHRcclxuXHRpZih3aW5kb3cuc2VhcmNoX3N0ZXA9PTEpXHJcblx0XHR7XHJcblx0XHRcdCQoJy5yZXN1bHRfcycpLmZpbmQoJy5zZV9wcmV2JykuaGlkZSgpO1xyXG5cdFx0XHQkKCcucmVzdWx0X3MnKS5maW5kKCcuc2VfbmV4dCcpLnNob3coKTtcclxuXHRcdFx0XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8vJCgnLnJlc3VsdF9zJykuZmluZCgnLnNlX3ByZXYnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFxyXG59XHJcblxyXG52YXIgc2VhcmNoX25leHQgPSBmdW5jdGlvbigpXHJcbntcclxuXHR3aW5kb3cuc2VhcmNoX3N0ZXArKztcclxuXHRpZih3aW5kb3cuc2VhcmNoX3N0ZXA8PXdpbmRvdy5uX3NlYXJjaF9wcmltZSlcclxuXHR7XHRcdFx0XHRcdFxyXG5cdFx0aWYoJCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykubGVuZ3RoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoISQoJ1tuc3M9Jyt3aW5kb3cuc2VhcmNoX3N0ZXArJ10nKS5wYXJlbnRzKCcuYmxvY2tfaScpLmlzKFwiLmFjdGl2ZVwiKSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0JCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykuZmluZCgnLmlfXycpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHR2YXIgaWRfY29udGVudD0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2lkX2NvbnRlbnQnKTtcclxuXHRcdCAgICAgICAgICAgICAgICBDb29raWVMaXN0KFwibF9cIitpZF9jb250ZW50LCQoJ1tuc3M9Jyt3aW5kb3cuc2VhcmNoX3N0ZXArJ10nKS5wYXJlbnRzKCcuYmxvY2tfaScpLmZpbmQoJy5pX18nKS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKCdyZWwnKSwnYWRkJyk7XHJcblx0XHQgICAgICAgICAgICAgICAgJCgnW25zcz0nK3dpbmRvdy5zZWFyY2hfc3RlcCsnXScpLnBhcmVudHMoJy5ibG9ja19pJykuZmluZCgnLmlfXycpLmVtcHR5KCkuYXBwZW5kKFwiLVwiKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0alF1ZXJ5LnNjcm9sbFRvKCdbbnNzPScrd2luZG93LnNlYXJjaF9zdGVwKyddJywgMTAwMCwge29mZnNldDotMjAwfSk7XHRcclxuXHR9IFxyXG5cclxuXHRpZih3aW5kb3cuc2VhcmNoX3N0ZXA9PXdpbmRvdy5uX3NlYXJjaF9wcmltZSlcclxuXHRcdHtcclxuXHRcdFx0JCgnLnJlc3VsdF9zJykuZmluZCgnLnNlX25leHQnKS5oaWRlKCk7XHJcblx0XHR9XHJcblx0XHJcblx0aWYod2luZG93LnNlYXJjaF9zdGVwIT0wKVxyXG5cdFx0e1xyXG5cdFx0XHQkKCcucmVzdWx0X3MnKS5maW5kKCcuc2VfcHJldicpLnNob3coKTtcclxuXHRcdFx0XHJcblx0XHR9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0XHQkKCcucmVzdWx0X3MnKS5maW5kKCcuc2VfcHJldicpLmhpZGUoKTtcclxuXHRcdFx0XHRcclxuXHRcdH1cclxuXHRcclxufVxyXG5cclxudmFyIHNlYXJjaF9wcmltZSA9IGZ1bmN0aW9uKClcclxue1xyXG5cclxuXHQkKCcuaWNvbjEnKS5oaWRlKCk7XHJcblx0JCgnLnNlYXJjaF9zZWInKS5zaG93KCk7XHJcblx0JCgnLnNlYXJjaF9zZWInKS53aWR0aCgnNDAwcHgnKTtcclxuXHQkKCcuc2VhcmNoX3NlYicpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTtcclxuXHR3aW5kb3cuc2hvd19zZWFyY2g9MTtcclxuXHRpZigkKCcuc2VhcmNoX3NlYicpLmZpbmQoJ2lucHV0JykudmFsKCkhPScnKVxyXG5cdHtcclxuXHRcdFx0ZG9zZWFyY2goKTtcdFx0XHRcclxuXHR9XHJcblx0XHJcbn1cclxuLy/Qv9C+0LjRgdC6INC/0L4g0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuLy/Qv9C+0LjRgdC6INC/0L4g0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuXHJcblxyXG52YXIgc2VuZF9tZWVlPSBmdW5jdGlvbigpXHJcbntcclxuXHJcblx0dmFyIHR0PSQoJyNvdHppdl9hcmVhJykudmFsKCk7XHJcblx0XHJcblx0dmFyIGVyciA9IFswXTtcclxuXHRcdFxyXG5cdCQoXCIub3R6aXZfbWVzc1wiKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuXHQvLyQoXCIjbnVtYmVyX3JcIikucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiBcclxuICBcclxuICAgIGlmKCQoXCIjb3R6aXZfYXJlYVwiKS52YWwoKSA9PSAnJylcclxuXHR7XHJcblx0XHQkKFwiLm90eml2X21lc3NcIikuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHRlcnJbMF09MTtcdFx0XHJcblx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHJcbnZhciBmb3JfaWQ9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpZF9jb250ZW50Jyk7XHRcclxudmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScrZm9yX2lkKycmdGV4dD0nKyQoJyNvdHppdl9hcmVhJykudmFsKCk7XHRcclxuQWpheENsaWVudCgnbWVzc2FnZScsJ3NlbmRfbWVzc2FnZV9nbG9iYWwnLCdHRVQnLGRhdGEsJ0FmdGVyU2VuZE1NJyxmb3JfaWQsMCk7XHRcclxuJChcIiNvdHppdl9hcmVhXCIpLnZhbCgnJyk7XHRcdFx0XHJcblxyXG5cdFx0fVxyXG5cdFxyXG59XHJcblxyXG5cclxuLy/Qv9GA0L7QstC+0LTQuNC8INCx0LXQt9C90LDQu9C40YfQvdGL0Lkg0YDQsNGB0YfQtdGCIFxyXG52YXIgYmV6bmFsX3VwbG9hZD1mdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWQ9JCh0aGlzKS5hdHRyKCdpZF9iZXonKTtcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJpZF9iZXpcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fYmV6X2RpYWxvZy5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJpZF9iZXpcIiksXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1xyXG59XHJcbn1cclxuXHJcblxyXG5cclxuLy/QvtGC0L/RgNCw0LLQutCwINGB0L7QvtCx0YnQtdC90LjQuSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y5cclxudmFyIFNlbmRNZXNzYWdlPSBmdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWRfdXNlcj0kKHRoaXMpLmF0dHIoJ3NtJyk7XHJcblx0Ly/QvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQu9GPINGB0L7QvtCx0YnQtdC90LjRj1xyXG5cdHZhciB5b3VfaWRfdXNlcj0kKCdbaXVdJykuYXR0cignaXUnKTtcclxuXHRcclxuXHRpZih5b3VfaWRfdXNlciE9aWRfdXNlcilcclxuXHRcdHtcclxuXHQkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fbWVzc2FnZS5waHA/aWQ9JytpZF91c2VyLFxyXG5cdFx0YmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdH0sXHJcblx0XHRhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHQvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Qm9keVNjcm9vbCgpO1xyXG5cdFx0fVxyXG5cclxuICB9KTtcclxuXHRcdH1cclxufVxyXG5cclxuXHJcblxyXG4vL9C30LDQs9GA0YPQt9C60LAg0YHQutCw0L3QsCDQutCw0YHRgdC+0LLQvtCz0L4g0L7RgNC00LXRgNCwXHJcbnZhciBVcGxvYWRTY2FuID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGlkX3VwbG9hZD0kKHRoaXMpLmF0dHIoJ2lkX3VwbG9hZCcpO1xyXG5cdCQoJ1tuYW1lPW15ZmlsZScraWRfdXBsb2FkKyddJykudHJpZ2dlcignY2xpY2snKTtcclxufVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gbG9nKGh0bWwpIHtcclxuICAgICAgJCgnI2xvZycpLmVtcHR5KCkuYXBwZW5kKGh0bWwpO1xyXG4gICAgfVxyXG5cclxuZnVuY3Rpb24gdXBsb2FkKGZpbGUsaWQpIHtcclxuXHJcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LzQvtC20L3QviDQvtCx0YrQtdC00LjQvdC40YLRjCDQsiDQvtC00LjQvSxcclxuICAgICAgLy8g0LXRgdC70Lggc3RhdHVzID09IDIwMCwg0YLQviDRjdGC0L4g0YPRgdC/0LXRhSwg0LjQvdCw0YfQtSDQvtGI0LjQsdC60LBcclxuICAgICAgeGhyLm9ubG9hZCA9IHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgXHJcblx0XHQgICQoJ1tpZF91cGxvYWQ9JytpZCsnXScpLnJlbW92ZSgpO1xyXG5cdFx0ICAkKCcuc2NhcF9sb2FkXycraWQpLnJlbW92ZSgpOyBcclxuXHRcdCAgdXBkYXRlY2FzaChpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoJ1tpZF91cGxvYWQ9JytpZCsnXScpLnNob3coKTtcclxuXHRcdCAgJCgnLnNjYXBfbG9hZF8nK2lkKS5maW5kKCcuc2NhcF9sb2FkX18nKS53aWR0aCgwKTsgXHJcblx0XHQgICQoJy5zY2FwX2xvYWRfJytpZCkuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQt9Cw0LrQsNGH0LrQuFxyXG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0JCgnW2lkX3VwbG9hZD0nK2lkKyddJykuaGlkZSgpOyAgXHJcblx0XHQkKCcuc2NhcF9sb2FkXycraWQpLnNob3coKTsgIFxyXG5cdFx0dmFyIHdpZHRocz1NYXRoLnJvdW5kKChldmVudC5sb2FkZWQqMTAwKS9ldmVudC50b3RhbCk7XHJcblx0XHQkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKHdpZHRocyk7ICBcclxuICAgICAgfVxyXG5cclxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIFwiaW1wbGVtZW50ZXIvdXBsb2FkLnBocFwiLCB0cnVlKTtcclxuICAgICAgLy94aHIuc2VuZChmaWxlKTtcclxuXHRcclxuXHQgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgZm9ybURhdGEuYXBwZW5kKFwidGhlZmlsZVwiLCBmaWxlKTtcclxuXHQgZm9ybURhdGEuYXBwZW5kKFwiaWRcIixpZCk7XHJcbiAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbnZhciBVcGxvYWRTY2FuQ2hhbmdlID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGlkPSQodGhpcykucGFyZW50cygnZm9ybScpLmF0dHIoJ2lkX3NjJyk7XHJcblx0ZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcblx0ICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICB1cGxvYWQoZmlsZSxpZCk7XHJcbiAgICAgIH0gXHJcbiAgICAgIHJldHVybiBmYWxzZTtcdFxyXG59XHJcblxyXG4vL9C+0YLQutGA0YvRgtGMINGD0LLQtdC00L7QvNC70LXQvdC40Y9cclxuLypcclxudmFyIHZpZXdfbm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKVxyXG57XHJcblx0aWYoICQoJy5ub3RpX2Jsb2NrJykuaXMoJzp2aXNpYmxlJykgKSB7ICAgJCgnLm5vdGlfYmxvY2snKS5yZW1vdmUoKTsgJCgnLnZpZXdfX25vdCcpLmhpZGUoKTsgJCgnLm5vdF9saScpLmZpbmQoJ2knKS5oaWRlKCk7ICB9IGVsc2UgXHJcblx0eyBcdCBcclxuXHQgICQoJy5tZW51MScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm5vdGlfYmxvY2tcIj48ZGl2IGNsYXNzPVwidGl0bGVfbm90aVwiPjx1bCBjbGFzcz1cInRfdWxcIj48bGk+0KPQstC10LTQvtC80LvQtdC90LjRjzwvbGk+PGxpPjxpIGNsYXNzPVwibm90aV9jb1wiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPjxzcGFuIGNsYXNzPVwibm90aV9jb2NcIj48L3NwYW4+PC9pPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwic2Nyb1wiPjwvZGl2PjwvZGl2PicpO1xyXG5cdCAgLy/QvtGC0L/RgNCw0LLQu9GP0LXQvCDQt9Cw0L/RgNC+0YEg0L3QsCDQv9C+0LvRg9GH0LXQvdC40LUg0L3QvtCy0YvRhSDRg9Cy0LXQtNC+0LzQu9C10L3QuNC5XHJcblx0ICAkKCcubm90aV9ibG9jaycpLmZpbmQoJy5zY3JvJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsb2FkZXJfaW50ZXJcIj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PicpO1xyXG5cdCAgdmFyIGRhdGEgPScnO1xyXG5cclxuICAgICAgQWpheENsaWVudCgnbm90aWZpY2F0aW9uJywndmlld19ub3RpZmljYXRpb24nLCdHRVQnLGRhdGEsJ0FmdGVyVlZOJywxLDApO1x0XHJcblx0fVxyXG59XHJcbiovXHJcblxyXG4vL9GA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC40YHQv9C+0LvQvdC40YLQtdC70Y9cclxudmFyIG9wdGlvbl9pbWxlbWVudGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgdmFyIGlkPSAkKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2lkX2NvbnRlbnQnKTtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fb3B0aW9uX2ltcGxlbWVudGVyLnBocD9pZD0nK2lkLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcdFxyXG59XHJcblxyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINC40YHQv9C+0LvQvdC40YLQtdC70Y9cclxudmFyIGFkZF9pbWxlbWVudGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgLy92YXIgaWQ9ICQodGhpcykuYXR0cignZm9yJyk7XHJcblxyXG5cdC8qXHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF9pbXBsZW1lbnRlci5waHA/aWQ9MScsXHJcbiAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nJyk7XHJcbiAgICB9LFxyXG4gICAgYWZ0ZXJMb2FkaW5nT25TaG93OiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG4gICAgfSxcclxuXHRhZnRlckNsb3NlOiBmdW5jdGlvbihkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgfVxyXG5cclxuICB9KTsqL1xyXG5cdCQuYXJjdGljbW9kYWwoe1xyXG5cdFx0dHlwZTogJ2FqYXgnLFxyXG5cdFx0dXJsOiAnZm9ybXMvZm9ybV9hZGRfaW1wbGVtZW50ZXJfMjAyMi5waHA/aWQ9MScsXHJcblx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxuXHJcbn1cclxuXHJcblxyXG4vL9GA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC40YHQv9C+0LvQvdC40YLQtdC70Y9cclxudmFyIG9wdGlvbl9pbWxlbWVudGVyMSA9IGZ1bmN0aW9uKClcclxue1xyXG4gIHZhciBpZD0gJCh0aGlzKS5hdHRyKCdmb3InKTtcclxuICAvKlxyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9vcHRpb25faW1wbGVtZW50ZXIucGhwP2lkPScraWQsXHJcbiAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nJyk7XHJcbiAgICB9LFxyXG4gICAgYWZ0ZXJMb2FkaW5nT25TaG93OiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG4gICAgfSxcclxuXHRhZnRlckNsb3NlOiBmdW5jdGlvbihkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuICAqL1xyXG5cdCQuYXJjdGljbW9kYWwoe1xyXG5cdFx0dHlwZTogJ2FqYXgnLFxyXG5cdFx0dXJsOiAnZm9ybXMvZm9ybV9vcHRpb25faW1wbGVtZW50ZXIucGhwP2lkPScraWQsXHJcblx0XHRiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHQkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0fSxcclxuXHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0XHRkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHR9LFxyXG5cdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0aWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCb2R5U2Nyb29sKCk7XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxuXHJcbn1cclxuXHJcbi8v0LLRi9C00LDRgtGMINC90LDQu9C40YfQvdGL0LUg0LjRgdC/0L7Qu9C90LjRgtC10LvRjiDQsNCy0LDQvdGB0LBcclxudmFyIHBheV9pbWxlbWVudGVyX2F2YW5zID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgdmFyIGlkPSAkKHRoaXMpLmF0dHIoJ2lkX2F2YW5zJyk7XHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX3BheV9pbXBsZW1lbnRlcl9hdmFucy5waHA/aWQ9JytpZCxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59XHJcblxyXG4vL9Cy0YvQtNCw0YLRjCDQvdCw0LvQuNGH0L3Ri9C1INC40YHQv9C+0LvQvdC40YLQtdC70Y5cclxudmFyIHBheV9pbWxlbWVudGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgdmFyIGlkPSAkKHRoaXMpLmF0dHIoJ2lkX3JlbCcpO1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9wYXlfaW1wbGVtZW50ZXIucGhwP2lkPScraWQsXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1x0XHRcclxufVxyXG5cclxuXHJcbi8v0L7RgtC60YDRi9GC0Ywg0LjRgdGC0L7RgNC40Y4g0L/QviDRgNC10LDQu9C40LfQvtCy0LDQvdC90L7QuSDRgNCw0LHQvtGC0LUg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxudmFyIGhpc3RfbXVfcHJpbWUgPSBmdW5jdGlvbigpXHJcbntcclxuXHRcclxudmFyIGlkPSAkKHRoaXMpLnBhcmVudHMoJ1tyZWxfaWRdJykuYXR0cigncmVsX2lkJyk7XHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2hpc3RvcnlfcmVhbGl6X3dvcmsucGhwP2lkPScraWQsXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1x0XHJcbn1cclxuXHJcblxyXG4vL9C+0YLQutGA0YvRgtGMINC90LDRgdGC0YDQvtC50LrQuCDQv9C+INC00L7QvNGDXHJcbnZhciBob3VzZV9vcHRpb25zID0gZnVuY3Rpb24oKVxyXG57XHJcbmlmICggJCgnLmNvbnRlbnRfYmxvY2snKS5pcyhcIltkb21dXCIpIClcclxue1xyXG5cdGlmKCQuaXNOdW1lcmljKCQoJy5jb250ZW50X2Jsb2NrJykuYXR0cihcImRvbVwiKSkpXHJcblx0e1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9vYmplY3Rfb3B0aW9ucy5waHA/aWQ9JyskKCcuY29udGVudF9ibG9jaycpLmF0dHIoXCJkb21cIiksXHJcblx0ICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1xyXG59XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFxyXG59XHJcblxyXG4vL9C/0L7QutCw0LfQsNGC0Ywg0LjRgtC+0LPQvtCy0YvQtSDRgdGD0LzQvNGLINCyINC30LDQs9Cw0LvQvtCy0LrQsNGFINGA0LDQt9C00LXQu9C+0LJcclxudmFyIHN1bW1fdmlldyA9IGZ1bmN0aW9uKClcclxue1xyXG5cdFxyXG5cdGlmKCAkKCcuc3VtbV9ibG9naScpLmlzKCc6dmlzaWJsZScpICkgeyBcclxuXHQkKCcuc3VtbV9ibG9naScpLmhpZGUoKTtcclxuXHQkKCcudG9wX2JsJykuZmluZCgnaDInKS5yZW1vdmVDbGFzcygnbWFyZ2luX3N1bSAnKTtcdFxyXG5cdCQodGhpcykucmVtb3ZlQXR0cignb24nKTtcclxuXHRDb29raWVMaXN0KFwiaXRfXCIsJ29uJywnZGVsJyk7XHRcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0JCgnLnN1bW1fYmxvZ2knKS5zaG93KCk7XHJcblx0JCgnLnRvcF9ibCcpLmZpbmQoJ2gyJykuYWRkQ2xhc3MoJ21hcmdpbl9zdW0gJyk7XHJcblx0JCh0aGlzKS5hdHRyKCdvbicsJ3Nob3cnKTtcclxuXHRDb29raWVMaXN0KFwiaXRfXCIsJ29uJywnYWRkJyk7XHRcclxuXHR9XHJcblx0XHJcbn1cclxuXHJcblxyXG4vL9C/0YDQuNC90Y/RgtGMINC90LDQutC70LDQtNC90YPRjlxyXG52YXIgdGFrZV9pbnZvaWNlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICQoJyNsYWxhbGFfcG9kX2Zvcm0nKS5zdWJtaXQoKTtcdFxyXG59XHJcblxyXG5cclxuLy/Qv9C+0LTQv9C40YHQsNGC0Ywg0L3QsNGA0Y/QtFxyXG52YXIgc2lnbl9uYXJ5YWQgPSBmdW5jdGlvbigpXHJcbntcclxuXHJcblxyXG4gICAkKCcjbGFsYWxhX3BvZF9mb3JtJykuc3VibWl0KCk7XHRcclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8v0YPRgtCy0LXRgNC00LjRgtGMINC90LDRgNGP0LRcclxudmFyIHNlYWxfbmFyeWFkID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICQoJyNsYWxhbGFfc2VhbF9mb3JtJykuc3VibWl0KCk7XHRcclxufVxyXG5cclxuLy/RgNCw0YHQv9GA0L7QstC10YHRgtC4INC90LDRgNGP0LRcclxudmFyIGRpc2JhbmRfbmFyeWFkID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICQoJyNsYWxhbGFfZGlzYmFuZF9mb3JtJykuc3VibWl0KCk7XHRcclxufVxyXG5cclxuLy/RgdC90Y/RgtGMINC/0L7QtNC/0LjRgdGMXHJcbnZhciBzaG9vdF9uYXJ5YWQgPSBmdW5jdGlvbigpXHJcbntcclxuICAgJCgnI2xhbGFsYV9zaG9vdF9mb3JtJykuc3VibWl0KCk7XHRcclxufVxyXG5cclxuLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC60L3QvtC/0LrRgyDQv9C+INGA0LXRiNC10L3QuNGOINGB0LvRg9C20LXQsdC90L7QuSDQt9Cw0Y/QstC60LhcclxudmFyIGRlY2lzaW9uX21lc3NfYXBwID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGRlYz0tMTtcclxuXHRpZighJCh0aGlzKS5wYXJlbnRzKCcuZWRpdF8xMjMnKS5pcygnLnJlYWR5JykpXHJcblx0e1xyXG5cdFx0JCgnLnBvZF96YXknKS5oaWRlKCk7ICQoJy5hZGRfemF5Jykuc2hvdygpO1xyXG5cdFx0JCh0aGlzKS5wYXJlbnRzKCcuZWRpdF8xMjMnKS5maW5kKCdpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdCAgIFx0aWYoJCh0aGlzKS5pcygnLnllcycpKSB7IGRlYz0xOyB9XHJcblx0XHRpZigkKHRoaXMpLmlzKCcubm8nKSkgeyBkZWM9MDsgfVxyXG5cdFx0JCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHQvL2FsZXJ0KGRlYyk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5tZXNzYScpLmZpbmQoJy5kZWNpc2lvbl9tZXMnKS52YWwoZGVjKTtcclxuXHR9XHJcbn1cclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0L/QviDRgNC10YjQtdC90LjRjiDRgdC70YPQttC10LHQvdC+0Lkg0LfQsNC/0LjRgdC60Lgg0L3QsNGA0Y/QtNGLXHJcbnZhciBkZWNpc2lvbl9tZXNzID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGRlYz0tMTtcclxuXHRpZighJCh0aGlzKS5wYXJlbnRzKCcuZWRpdF8xMjInKS5pcygnLnJlYWR5JykpXHJcblx0e1xyXG5cdFx0JCgnLmpzLXBvZF9uYXInKS5oaWRlKCk7ICQoJy5qcy1hZGRfbmFyJykuc2hvdygpO1xyXG5cdFx0JCh0aGlzKS5wYXJlbnRzKCcuZWRpdF8xMjInKS5maW5kKCdpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdCAgIFx0aWYoJCh0aGlzKS5pcygnLnllcycpKSB7IGRlYz0xOyB9XHJcblx0XHRpZigkKHRoaXMpLmlzKCcubm8nKSkgeyBkZWM9MDsgfVxyXG5cdFx0JCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHQvL2FsZXJ0KGRlYyk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5tZXNzYScpLmZpbmQoJy5kZWNpc2lvbl9tZXMnKS52YWwoZGVjKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4vL9GB0L7RhdGA0LDQvdC40YLRjCDQt9Cw0Y/QstC60YMg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHJcbnZhciBzYXZlX3pheWF2YSA9IGZ1bmN0aW9uKClcclxue1xyXG5cdHZhciBlcnJvcj0wO1xyXG5cclxuXHQkKCcubWVzc2E6dmlzaWJsZScpLmZpbmQoJy50ZXh0X3pheXZhX21lc3NhZ2VfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblxyXG5cclxuXHJcblxyXG5cdCQoJy5tZXNzYTp2aXNpYmxlJykuZmluZCgnLnRleHRfemF5dmFfbWVzc2FnZV8nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFxyXG5cdFx0dmFyIHRleHQ9JCh0aGlzKS52YWwoKTtcclxuXHRcdGlmKHRleHQ9PScnKVxyXG5cdCAgICB7XHJcblx0XHRcdGVycm9yPTE7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHR9XHJcbiAgICB9KTtcclxuXHJcblxyXG5cdCQoJy5tYXRfenonKS5maW5kKCcuY291bnRfYXBwX21hdGVyXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cdCQoJy5tYXRfenonKS5maW5kKCcuY2FsZW5kYXJfemF5JykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHJcblx0JCgnLm1lc3NhOnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdCAgICB2YXIgaWRfd29yaz0kKHRoaXMpLmF0dHIoJ2lkX21lcycpO1xyXG5cdFx0Ly/Qv9GA0L7QstC10YDQuNC8INGH0YLQviDQstGB0LUg0L/QvtC70Y8g0LTQu9GPINC60LDQttC00L7QuSDRgdC70YPQttC10LHQvdC+0Lkg0LfQsNC/0LjRgdC60Lgg0LfQsNC/0L7Qu9C90LXQvdGLXHJcblx0XHRcclxuXHRcdFxyXG5cdFx0XHJcblx0XHR2YXIgY291bnQ9JCgnLm1hdF96elttYXRfeno9JytpZF93b3JrKyddJykuZmluZCgnLmNvdW50X2FwcF9tYXRlcl8nKS52YWwoKTtcclxuXHRcdC8vdmFyIHByaWNlPSQoJy5tYXRfenpbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfJykudmFsKCk7XHJcblx0XHRcclxuXHRcdCQoJy5tYXRfenpbbWF0X3p6PScraWRfd29yaysnXScpLmZpbmQoJy5jb3VudF9hcHBfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHQvLyQoJy5tYXRfenpbbWF0X3p6PScraWRfd29yaysnXScpLmZpbmQoJy5kYXRlX3JfYmFzZScpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cdFx0XHJcblx0XHRpZigoY291bnQ9PTApfHwoY291bnQ9PScnKXx8KCEkLmlzTnVtZXJpYyhjb3VudCkpKVxyXG5cdCAgICB7XHJcblx0XHRcdCQoJy5tYXRfenpbbWF0X3p6PScraWRfd29yaysnXScpLmZpbmQoJy5jb3VudF9hcHBfbWF0ZXJfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHRcdGVycm9yPTE7XHJcblx0XHR9XHJcblxyXG5cdFx0XHJcblx0XHQvKlxyXG5cdFx0JCgnLm1hdFtyZWxfdz0nK2lkX3dvcmsrJ10nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0dmFyIGNvdW50PSQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcclxuXHRcdHZhciBwcmljZT0kKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHJcblx0XHQkKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHQkKHRoaXMpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHRcclxuXHRcdGlmKChjb3VudD09MCl8fChjb3VudD09JycpfHwoISQuaXNOdW1lcmljKGNvdW50KSkpXHJcblx0ICAgIHtcclxuXHRcdFx0JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cdFx0XHRlcnJvcj0xO1xyXG5cdFx0fVxyXG5cdFx0aWYoKHByaWNlPT0wKXx8KHByaWNlPT0nJyl8fCghJC5pc051bWVyaWMocHJpY2UpKSlcclxuXHQgICAge1xyXG5cdFx0XHQkKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHRcdGVycm9yPTE7XHJcblx0XHR9XHJcblx0XHR9KTtcclxuXHRcdCovXHJcblx0XHRcclxuICAgIH0pO1xyXG5cdCQoJy5qcy1hZGQtYXBwLW1hdGVyaWFsIC5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRpZigkKHRoaXMpLnZhbCgpID09ICcnKSAgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuXHRcdFx0JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuXHRcdFx0ZXJyb3IrKztcclxuXHRcdFx0Ly9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcblx0XHR9IGVsc2UgeyQodGhpcykucGFyZW50cygnLmlucHV0XzIwMTgnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpOyQodGhpcykucGFyZW50cygnLmxpc3RfMjAxOCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7fVxyXG5cdH0pO1xyXG5cclxuXHJcblxyXG5cdGlmKGVycm9yIT0wKVxyXG5cdFx0e1xyXG5cdFx0XHRhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiyDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y8nKTtcclxuXHRcdFx0Ly8kKCcuZXJyb3JfdGV4dF9hZGQnKS5lbXB0eSgpLmFwcGVuZCgn0J3QtSDQstGB0LUg0L/QvtC70Y8g0LfQsNC/0L7Qu9C90LXQvdGLINC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjycpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9zZXRUaW1lb3V0ICggZnVuY3Rpb24gKCkgeyAkKCcuZXJyb3JfdGV4dF9hZGQnKS5lbXB0eSgpOyB9LCA3MDAwICk7XHJcblxyXG5cdFx0XHRcclxuXHRcdH0gZWxzZVxyXG5cdFx0e1x0XHJcblx0XHQgICAgJCgnI2xhbGFsYV9hZGRfZm9ybScpLnN1Ym1pdCgpO1x0XHRcclxuXHRcdH1cclxuXHRcclxuXHRcclxuXHRcdFxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQvNCw0YLQtdGA0LjQsNC7INC6INGA0LDQsdC+0YLQtSDQsiDRgNCw0LfQtNC10LvQtSDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG52YXIgZWRpdF9tX2J1dHRvbl9jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5pZiAoICQodGhpcykuaXMoXCJbZm9yXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZWRpdF9tYXRlcmlhbF8yMDIxLnBocD9pZD0nKyQodGhpcykuYXR0cihcImZvclwiKSxcclxuICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0Ly/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcblx0XHQkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0fSxcclxuXHQgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG5cdFx0ICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdCAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdCAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBCb2R5U2Nyb29sKCk7XHJcblx0ICB9XHJcblxyXG4gIH0pO1xyXG59XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcclxuXHRcclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDQvNCw0YLQtdGA0LjQsNC7INC6INGA0LDQsdC+0YLQtSDQsiDRgNCw0LfQtNC10LvQtSDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG52YXIgZGVsX21fYnV0dG9uX2NsaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcbmlmICggJCh0aGlzKS5pcyhcIltmb3JdXCIpIClcclxue1xyXG5cdGlmKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImZvclwiKSkpXHJcblx0e1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX21hdGVyaWFsLnBocD9pZD0nKyQodGhpcykuYXR0cihcImZvclwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcblxyXG59XHJcblxyXG4vL9C00L7QsdCw0LLQuNGC0Ywg0LzQsNGC0LXRgNC40LDQuyDQuiDRgNCw0LHQvtGC0LUg0LIg0YDQsNC30LTQtdC70LUg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxudmFyIGFkZF9tX2J1dHRvbl9jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5pZiAoICQodGhpcykuaXMoXCJbZm9yXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX21hdGVyaWFsXzIwMjEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcclxufVxyXG59XHJcbiAgXHJcbnJldHVybiBmYWxzZTtcclxuXHRcclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDRg9Cy0LXQtNC+0LzQu9C10L3QuNC1XHJcbnZhciBEZWxsTm90aWYgPSBmdW5jdGlvbigpIHtcclxuaWYgKCAkKHRoaXMpLmlzKFwiW2lkX3JlbF1cIikgKVxyXG57XHJcblx0aWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKSlcclxuXHR7XHJcbiAgICAgICB2YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9JyskKHRoaXMpLmF0dHIoXCJpZF9yZWxcIik7XHJcbiAgICAgICBBamF4Q2xpZW50KCdub3RpZmljYXRpb24nLCdkZWxfbm90aWYnLCdHRVQnLGRhdGEsJ0FmdGVyRGVsbE5vdCcsJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpLDApO1xyXG5cdCAgICQoJ1tyZWxfbm90aT0nKyQodGhpcykuaXMoXCJbaWRfcmVsXVwiKSsnXScpLmhpZGUoKTtcdFxyXG59XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG5cdFxyXG59XHJcblxyXG5cclxuLy/RgNCw0YHQv9GA0L7QstC10YHRgtC4INC+0L/QtdGA0LDRhtC40Y4g0L/QviDQvtC/0LvQsNGC0LVcclxudmFyIERlbGxQYXkgPSBmdW5jdGlvbigpIHtcclxuaWYgKCAkKHRoaXMpLmlzKFwiW2lkX3JlbF1cIikgKVxyXG57XHJcblx0aWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiaWRfcmVsXCIpKSlcclxuXHR7XHJcbiAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICB0eXBlOiAnYWpheCcsXHJcbiAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfcGF5LnBocD9pZD0nKyQodGhpcykuYXR0cihcImlkX3JlbFwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcblx0XHJcbn1cclxuXHJcbi8v0YDQsNGB0L/RgNC+0LLQtdGB0YLQuCDQvtC/0LXRgNCw0YbQuNGOINC/0L4g0L7Qv9C70LDRgtC1XHJcbnZhciBEZWxsQ2FzaCA9IGZ1bmN0aW9uKCkge1xyXG5pZiAoICQodGhpcykuaXMoXCJbaWRfcmVsXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJpZF9yZWxcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGlzYmFuZF9jYXNoLnBocD9pZD0nKyQodGhpcykuYXR0cihcImlkX3JlbFwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcblx0XHJcbn1cclxuXHJcblxyXG4vL9GD0LTQsNC70LjRgtGMINGA0LDQsdC+0YLRgyDQsiDRgNCw0LfQtNC10LvQtSDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG52YXIgZGVsX2J1dHRvbl9jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5pZiAoICQodGhpcykuaXMoXCJbZm9yXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF93b3JrLnBocD9pZD0nKyQodGhpcykuYXR0cihcImZvclwiKSxcclxuXHQgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0ICB9LFxyXG5cdCAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuXHRcdCAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHQgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdFx0ICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0ICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cdFx0ICB9XHJcblx0XHQgIEJvZHlTY3Jvb2woKTtcclxuXHQgIH1cclxuXHJcbiAgfSk7XHJcbn1cclxufVxyXG4gIFxyXG5yZXR1cm4gZmFsc2U7XHJcblx0XHJcbn1cclxuXHJcbi8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0YDQsNCx0L7RgtGDINCyINGA0LDQt9C00LXQu9C1INCyINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHJcbnZhciBlZGl0X2J1dHRvbl9jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5pZiAoICQodGhpcykuaXMoXCJbZm9yXVwiKSApXHJcbntcclxuXHRpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG5cdHtcclxuICAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fZWRpdF93b3JrXzIwMjEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcclxufVxyXG59XHJcbiAgXHJcbnJldHVybiBmYWxzZTtcclxuXHJcblx0XHJcblx0fTtcclxuXHJcbi8v0YDQsNGB0LrRgNGL0YLQuNC1INGA0LDQt9C00LXQu9CwINCyINGB0LXQsdC10YHRgtC+0LjRgdGC0LhcclxudmFyIGJsb2NrX2lfaSA9IGZ1bmN0aW9uKCkge1x0XHJcblxyXG52YXIgaWRfY29udGVudD0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2lkX2NvbnRlbnQnKTtcclxuXHQgIFxyXG5cdCAgIGlmKCQodGhpcykucGFyZW50KCkucGFyZW50KCkuaXMoXCIuYWN0aXZlXCIpKSBcclxuXHQgIHtcclxuXHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdCAgQ29va2llTGlzdChcImxfXCIraWRfY29udGVudCwkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ3JlbCcpLCdkZWwnKTtcclxuXHRcdCAgJCh0aGlzKS5lbXB0eSgpLmFwcGVuZChcIitcIik7XHJcblx0ICB9IGVsc2VcclxuXHQgIHtcclxuXHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdCAgQ29va2llTGlzdChcImxfXCIraWRfY29udGVudCwkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ3JlbCcpLCdhZGQnKTtcclxuXHRcdCAgJCh0aGlzKS5lbXB0eSgpLmFwcGVuZChcIi1cIik7XHJcblx0ICB9XHRcclxuXHQgIFxyXG5cdFxyXG59O1xyXG5cclxuXHJcbi8v0L/RgNC+0LLQtdGA0LrQsCDQstGL0LTQtdC70LXQvdC90YvRhSDQvNCw0YLQtdGA0LjQsNC70L7QsiDRgyDRgNCw0LHQvtGC0YtcclxudmFyIE1hdGVyaWFsU2VsZWN0QWxsID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0ICAkKCdbcmVsX2lkXScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRcdCAgXHJcblx0ICAgICAgICB2YXIgbGVuZ3RoX2FsbF9tYXRfMT0kKHRoaXMpLm5leHRVbnRpbChcIi5sb2FkZXJfdHJcIikubGVuZ3RoO1xyXG5cdFx0XHR2YXIgY291bnRfYWxsX21ubW5tXzE9MDsgIFxyXG5cdFx0XHQkKHRoaXMpLm5leHRVbnRpbChcIi5sb2FkZXJfdHJcIikuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHRcdFx0XHQgIFxyXG5cdFx0XHRcdCBcdCBpZigkKHRoaXMpLmlzKFwiLmNoZWNoZXJzXCIpKSBcclxuXHQgICAgICAgICAgICAgICAgIHsgXHJcblx0ICAgICAgICAgICAgICAgICAgICBjb3VudF9hbGxfbW5tbm1fMSsrO1xyXG5cdFx0XHRcdFx0IH1cclxuICAgICAgICAgICAgICB9KTsgIFxyXG5cdFx0XHRpZihjb3VudF9hbGxfbW5tbm1fMT09bGVuZ3RoX2FsbF9tYXRfMSlcclxuXHRcdCAgICB7IFxyXG5cdFx0XHQgICQodGhpcykuZmluZCgnLmFkZGRfaWNvbl9tYXRlbycpLmFkZENsYXNzKFwiYWN0aXZfbWF0dFwiKTtcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0ICAkKHRoaXMpLmZpbmQoJy5hZGRkX2ljb25fbWF0ZW8nKS5yZW1vdmVDbGFzcyhcImFjdGl2X21hdHRcIik7XHJcblx0XHRcdH1cclxuICAgICAgICAgIH0pO1x0XHJcblxyXG59XHJcblx0XHJcbi8v0YTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDRh9GC0L4g0LLRgdC1INC80LDRgtC10YDQuNCw0LvRiyDRgyDRjdGC0L7QuSDRgNCw0LHQvtGC0LUg0LIg0LrQvtGA0LfQuNC90LUg0LTQu9GPINC30LDRj9Cy0L7QulxyXG52YXIgYmFza2V0X2FsbF9tYXRlcmlhbCA9IGZ1bmN0aW9uKHRoaXNzcykge1xyXG4gXHJcblx0dmFyIGxlbmd0aF9hbGxfbWF0PXRoaXNzcy5wYXJlbnRzKCcubWF0ZXJpYWwnKS5wcmV2QWxsKCdbcmVsX2lkXTpmaXJzdCcpLm5leHRVbnRpbChcIi5sb2FkZXJfdHJcIikubGVuZ3RoO1xyXG5cdHZhciBjb3VudF9hbGxfbW5tbm09MDtcclxuXHR0aGlzc3MucGFyZW50cygnLm1hdGVyaWFsJykucHJldkFsbCgnW3JlbF9pZF06Zmlyc3QnKS5uZXh0VW50aWwoXCIubG9hZGVyX3RyXCIpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRcdFx0ICBcclxuXHRcdFx0XHQgXHQgaWYoJCh0aGlzKS5pcyhcIi5jaGVjaGVyc1wiKSkgXHJcblx0ICAgICAgICAgICAgICAgICB7IFxyXG5cdCAgICAgICAgICAgICAgICAgICAgY291bnRfYWxsX21ubW5tKys7XHJcblx0XHRcdFx0XHQgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG5cdC8vYWxlcnQobGVuZ3RoX2FsbF9tYXQpO1xyXG5cdGlmKGNvdW50X2FsbF9tbm1ubT09bGVuZ3RoX2FsbF9tYXQpXHJcblx0XHR7XHJcblx0XHRcdHRoaXNzcy5wYXJlbnRzKCcubWF0ZXJpYWwnKS5wcmV2QWxsKCdbcmVsX2lkXTpmaXJzdCcpLmZpbmQoJy5hZGRkX2ljb25fbWF0ZW8nKS5hZGRDbGFzcyhcImFjdGl2X21hdHRcIik7XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXNzcy5wYXJlbnRzKCcubWF0ZXJpYWwnKS5wcmV2QWxsKCdbcmVsX2lkXTpmaXJzdCcpLmZpbmQoJy5hZGRkX2ljb25fbWF0ZW8nKS5yZW1vdmVDbGFzcyhcImFjdGl2X21hdHRcIik7XHJcblx0XHRcdH1cclxuXHRcclxufVxyXG5cclxuLy/QvdCw0LbQsNGC0Ywg0L3QsCDQutC90L7Qv9C60YMg0LLRi9C00LXQu9C40YLRjCDQstGB0LUg0LzQsNGC0LXRgNC40LDQu9GLINC/0L4g0YDQsNCx0L7RgtC1XHJcbnZhciBhZGRfbWF0ZXJpYWxfY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHQgIGlmKCQodGhpcykuaXMoXCIuYWN0aXZfbWF0dFwiKSkgXHJcblx0ICB7XHJcblx0XHQgIC8v0LfQvdCw0YfQuNGCINCy0YvQtNC10LvQtdC90Ysg0LLRgdC1INC80LDRgtC10YDQuNCw0LvRiyDQv9C+INGN0YLQvtC5INGA0LDQsdC+0YLQtVxyXG5cdFx0ICAvLyQodGhpcykucGFyZW50cygnW3JlbF9pZF0nKS5uZXh0VW50aWwoXCIubG9hZGVyX3RyXCIpLnJlbW92ZSgpO1xyXG5cdFx0ICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZfbWF0dFwiKTtcclxuXHRcdCAgXHJcblx0XHQgICQodGhpcykucGFyZW50cygnW3JlbF9pZF0nKS5uZXh0VW50aWwoXCIubG9hZGVyX3RyXCIpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblx0XHRcdCAgXHJcblx0ICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5ubV9ubScpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgICAgICAgIH0pO1xyXG5cdFx0ICBcclxuXHQgIH0gZWxzZVxyXG5cdFx0ICB7XHJcblx0XHRcdCAgLy/QvdC1INCy0YHQtSDQvNCw0YLQtdGA0LjQsNC70Ysg0LLRi9C00LXQu9C10L3Riy4g0L3QviDQvNC+0LbQtdGCINC60LDQutC40LUg0YLQviDQuCDQstGL0LTQtdC70LXQvdGLXHJcblx0XHRcdCAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2X21hdHRcIik7XHJcblx0XHRcdCAgXHJcblx0XHRcdCAgXHJcblx0XHQgIFx0ICAkKHRoaXMpLnBhcmVudHMoJ1tyZWxfaWRdJykubmV4dFVudGlsKFwiLmxvYWRlcl90clwiKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG5cdFx0XHRcdCAgXHJcblx0XHRcdFx0IFx0IGlmKCEkKHRoaXMpLmlzKFwiLmNoZWNoZXJzXCIpKSBcclxuXHQgICAgICAgICAgICAgICAgIHsgXHJcblx0ICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5ubV9ubScpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHRcdFx0XHRcdCB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcblx0XHQgICQodGhpcykuYWRkQ2xhc3MoXCJhY3Rpdl9tYXR0XCIpO1x0XHRcdCAgXHJcblx0XHQgIH1cclxuXHRcclxufVxyXG5cclxuXHJcbi8v0L3QsNC20LDRgtGMINC90LAg0LzQsNGC0LXRgNC40LDQuyDQsiDRgNCw0LfQtNC10LvQtSAtINC00L7QsdCw0LLQuNGC0Ywg0LIg0LrQvtGA0LfQuNC90YMg0LfQsNGP0LLQvtC6XHJcbnZhciBubV9kaXYgPSBmdW5jdGlvbigpIHtcclxuXHRcclxuXHR2YXIgaWRfZG9tPSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignZG9tJyk7XHJcblx0aWYoISQoJy5hZGRfdl96YXknKS5sZW5ndGgpXHJcblx0e1xyXG5cdCAgaWYoJCh0aGlzKS5wYXJlbnRzKCdbcmVsX21hXScpLmlzKFwiLmNoZWNoZXJzXCIpKSBcclxuXHQgIHtcclxuXHRcdCAgLy/Rg9Cx0YDQsNC70Lgg0LLRi9C00LXQu9C10L3QuNC1XHJcblx0XHQgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJjaGVjaGVyc1wiKTtcclxuXHJcblx0XHQgIENvb2tpZUxpc3Qod2luZG93LmJfY20rXCJfXCIraWRfZG9tLCQodGhpcykucGFyZW50cygnW3JlbF9tYV0nKS5hdHRyKCdyZWxfbWEnKSwnZGVsJywnc29ydCcpO1x0XHJcblx0XHQgLy8gYWxlcnQoJCh0aGlzKS5wYXJlbnRzKCdbcmVsX2lkXScpLmF0dHIoJ3JlbF9pZCcpKTtcclxuXHRcdCAgQmFza2V0TWF0ZXJpYWwoKTsgXHJcblx0XHQgIGJhc2tldF9hbGxfbWF0ZXJpYWwoJCh0aGlzKSk7XHJcblx0XHQgIFRvb2xUaXAoKTtcclxuXHQgIH0gZWxzZVxyXG5cdCAge1xyXG5cdFx0ICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKFwiY2hlY2hlcnNcIik7XHJcblx0XHQgIENvb2tpZUxpc3Qod2luZG93LmJfY20rXCJfXCIraWRfZG9tLCQodGhpcykucGFyZW50cygnW3JlbF9tYV0nKS5hdHRyKCdyZWxfbWEnKSwnYWRkJywnc29ydCcpO1xyXG5cdFx0ICBCYXNrZXRNYXRlcmlhbCgpO1x0XHJcblx0XHQgIGJhc2tldF9hbGxfbWF0ZXJpYWwoJCh0aGlzKSk7XHJcblx0XHQgIFRvb2xUaXAoKTtcdCAgXHJcblx0ICB9XHRcclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHRpZigkKHRoaXMpLnBhcmVudHMoJ1tyZWxfbWFdJykuaXMoXCIuY2hlY2hlcnNcIikpIFxyXG5cdCAge1xyXG5cdFx0ICAvL9GD0LHRgNCw0LvQuCDQstGL0LTQtdC70LXQvdC40LVcclxuXHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG5cdFx0ICBDb29raWVMaXN0KHdpbmRvdy5iX2NvK1wiX1wiK2lkX2RvbSwkKHRoaXMpLnBhcmVudHMoJ1tyZWxfbWFdJykuYXR0cigncmVsX21hJyksJ2RlbCcsJ3NvcnQnKTtcdFxyXG5cdFx0IC8vIGFsZXJ0KCQodGhpcykucGFyZW50cygnW3JlbF9pZF0nKS5hdHRyKCdyZWxfaWQnKSk7XHJcblx0XHQgIEJhc2tldE1hdGVyaWFsKCk7IFxyXG5cdFx0ICBiYXNrZXRfYWxsX21hdGVyaWFsKCQodGhpcykpO1xyXG5cdFx0ICBUb29sVGlwKCk7XHJcblx0ICB9IGVsc2VcclxuXHQgIHtcclxuXHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG5cdFx0ICBDb29raWVMaXN0KHdpbmRvdy5iX2NvK1wiX1wiK2lkX2RvbSwkKHRoaXMpLnBhcmVudHMoJ1tyZWxfbWFdJykuYXR0cigncmVsX21hJyksJ2FkZCcsJ3NvcnQnKTtcclxuXHRcdCAgQmFza2V0TWF0ZXJpYWwoKTtcdFxyXG5cdFx0ICBiYXNrZXRfYWxsX21hdGVyaWFsKCQodGhpcykpO1xyXG5cdFx0ICBUb29sVGlwKCk7XHQgIFxyXG5cdCAgfVx0XHRcclxuXHR9XHJcblx0XHJcbn1cclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDRgdGC0YDQtdC70LrRgyDQstC10YDQvdGD0YLRjCDQuiDQstGL0LHQvtGA0YMg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0Lgg0LIg0L7QsdGJ0LXQuSDRgtCw0LHQu9C40YbQtVxyXG52YXIgY2xvc2VfcHJpbWVfZG9tID0gZnVuY3Rpb24oKSB7XHJcbiAgIC8vQ29va2llTGlzdCh3aW5kb3cuYl9jbytcIl9cIitpZF9kb20sJCh0aGlzKS5wYXJlbnRzKCdbcmVsX2lkXScpLmF0dHIoJ3JlbF9pZCcpLCdkZWwnKTtcclxuICAgdmFyIGlkX2RvbT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2RvbScpOyBcclxuICAgJC5jb29raWUoXCJwcl9cIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cdC8vYWxlcnQoXCIhXCIpO1xyXG4gICAkKCcuY2xvc2VfcHJpbWVfZG9tX2EnKVswXS5jbGljaygpOyA7XHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuLy/QvdCw0LbQsNGC0Ywg0L3QsCDRgNCw0LHQvtGC0YMg0LIg0YDQsNC30LTQtdC70LUgLSDQtNC+0LHQsNCy0LjRgtGMINCyINC60L7RgNC30LjQvdGDXHJcbnZhciBzdF9kaXYgPSBmdW5jdGlvbigpIHtcclxuXHRcclxuXHR2YXIgaWRfZG9tPSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignZG9tJyk7XHJcblx0XHJcblx0ICBpZigkKHRoaXMpLnBhcmVudHMoJ1tyZWxfaWRdJykuaXMoXCIuY2hlY2hlclwiKSkgXHJcblx0ICB7XHJcblx0XHQgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJjaGVjaGVyXCIpO1xyXG5cdFx0ICBDb29raWVMaXN0KHdpbmRvdy5iX2NvK1wiX1wiK2lkX2RvbSwkKHRoaXMpLnBhcmVudHMoJ1tyZWxfaWRdJykuYXR0cigncmVsX2lkJyksJ2RlbCcpO1x0XHJcblx0XHQgLy8gYWxlcnQoJCh0aGlzKS5wYXJlbnRzKCdbcmVsX2lkXScpLmF0dHIoJ3JlbF9pZCcpKTtcclxuXHRcdCAgQmFza2V0RmluZXJ5KCk7ICBcclxuXHRcdCAgVG9vbFRpcCgpO1xyXG5cdCAgfSBlbHNlXHJcblx0ICB7XHJcblx0XHQgICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoXCJjaGVjaGVyXCIpO1xyXG5cdFx0ICBDb29raWVMaXN0KHdpbmRvdy5iX2NvK1wiX1wiK2lkX2RvbSwkKHRoaXMpLnBhcmVudHMoJ1tyZWxfaWRdJykuYXR0cigncmVsX2lkJyksJ2FkZCcpO1xyXG5cdFx0ICBCYXNrZXRGaW5lcnkoKTtcdFxyXG5cdFx0ICBUb29sVGlwKCk7XHQgIFxyXG5cdCAgfVx0XHJcblx0XHJcbn1cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0LLRgdGOINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtGMINC/0L4g0LTQvtC80YNcclxudmFyIGRlbF9zZWJlID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcblxyXG5cclxuXHJcbmlmICggJCgnLmNvbnRlbnRfYmxvY2snKS5pcyhcIltkb21dXCIpIClcclxue1xyXG5cdGlmKCQuaXNOdW1lcmljKCQoJy5jb250ZW50X2Jsb2NrJykuYXR0cihcImRvbVwiKSkpXHJcblx0e1xyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX3NlYmUucGhwP2lkPScrJCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKFwiZG9tXCIpLFxyXG5cdCAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHQgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0ICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdCAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHQgIH0sXHJcblx0ICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0ICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdCAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHQgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0ICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdCAgfSxcclxuXHQgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHQgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHQgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHQgIH1cclxuXHRcdCAgQm9keVNjcm9vbCgpO1xyXG5cdCAgfVxyXG5cclxuICB9KTtcclxufVxyXG59XHJcbiAgXHJcbnJldHVybiBmYWxzZTtcclxuXHRcclxuXHR9O1xyXG5cclxuXHJcbi8v0L7QsdC90L7QstC70LXQvdC40LUg0YDQtdCw0LrRhtC40Lkg0L/QviDQvdCw0LbQsNGC0LjRjiDQsiDQsdC70L7QutC1LiDQvtGC0LrRgNGL0YLQuNC1LCDQuNC60L7QvdC60LgsINC00L7QsdCw0LLQu9C10L3QuNC1INCyINC60L7RgNC30LjQvdGDLCDRg9C00LDQu9C10L3QuNC1INGA0LDQsdC+0YLRiywg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDRgNCw0LHQvtGC0YssINC00L7QsdCw0LLQu9C10L3QuNC1INGA0LDQsdC+0YLRiyDQuCDRgi7QtC5cclxuLy/QstGL0L/QvtC70L3Rj9GC0Ywg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0LPQviDQsdC70L7QutCwLCDRgNCw0LHQvtGC0YssINC80LDRgtC10YDQuNCw0LvQsFxyXG52YXIgdXBkYXRlX2Jsb2NrID0gZnVuY3Rpb24oKSB7XHJcblx0Ly/QvtGC0LrRgNGL0YLQuNC1INC/0LvRjtGBINC80LjQvdGD0YFcclxuXHQkKFwiLmJsb2NrX2kgLmlfX1wiKS51bmJpbmQoJ2NsaWNrJyk7XHJcblx0JChcIi5ibG9ja19pIC5pX19cIikuYmluZCgnY2xpY2snLCBibG9ja19pX2kpO1xyXG5cdC8v0LjQutC+0L3QutC4INCx0LvQvtC60LAg0YPQtNCw0LvQuNGC0Ywg0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LTQvtCx0LDQstC40YLRjCDRgNCw0LHQvtGC0YNcclxuXHQkKFwiLmVkaXRfaWNvbl9ibG9ja1wiKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAkKFwiLmVkaXRfaWNvbl9ibG9ja1wiKS5iaW5kKCdjbGljaycsIGVkaXRfYnV0dG9uX2Jsb2NrKTtcclxuXHQkKFwiLmRlbF9pY29uX2Jsb2NrXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICQoXCIuZGVsX2ljb25fYmxvY2tcIikuYmluZCgnY2xpY2snLCBkZWxfYnV0dG9uX2Jsb2NrKTtcclxuXHQkKFwiLmFkZF9pY29uX2Jsb2NrXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICQoXCIuYWRkX2ljb25fYmxvY2tcIikuYmluZCgnY2xpY2snLCBhZGRfYnV0dG9uX3JhYm90YSk7XHRcclxuXHQvL9C60L7RgNC30LjQvdCwINC90LDRgNGP0LTQvtCyINCy0YvQtNC10LvQtdC90LjQtSDRgNCw0LHQvtGCINCyINCx0LvQvtC60LhcclxuXHQkKCcuc3RfZGl2JykudW5iaW5kKCBcImNsaWNrXCIpO1xyXG5cdCQoJy5zdF9kaXYnKS5iaW5kKCBcImNsaWNrXCIsIHN0X2Rpdik7XHJcblx0XHJcblx0Ly/QutC+0YDQt9C40L3QsCDQt9Cw0Y/QstC+0Log0L3QsCDQvNCw0YLQtdGA0LjQsNC7INCy0YvQtNC10LvQtdC90LjQtSDQvNCw0YLQtdGA0LjQsNC70L7QsiDQsiDQsdC70L7QutC4XHJcblx0JCgnLm5tX25tJykudW5iaW5kKCBcImNsaWNrXCIpO1xyXG5cdCQoJy5ubV9ubScpLmJpbmQoIFwiY2xpY2tcIiwgbm1fZGl2KTtcclxuXHRcclxuXHQvL9C40LrQvtC90LrQuCDRgNCw0LHQvtGCINCyINCx0LvQvtC60LUg0YPQtNCw0LvQuNGC0Ywg0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YxcclxuXHQkKFwiLmVkaXRfaWNvblwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcblx0JChcIi5lZGl0X2ljb25cIikuYmluZCgnY2xpY2snLCBlZGl0X2J1dHRvbl9jbGljayk7XHJcblx0XHJcblx0XHJcblx0JChcIi5VR1JBRkVcIikudW5iaW5kKCdjbGljaycpO1xyXG5cdCQoXCIuVUdSQUZFXCIpLmJpbmQoJ2NsaWNrJywgZWRpdF9ncmFmaWtfY2xpY2spO1xyXG5cdFxyXG5cdFxyXG5cdCQoXCIuZGVsX2ljb25cIikudW5iaW5kKCdjbGljaycpO1xyXG5cdCQoXCIuZGVsX2ljb25cIikuYmluZCgnY2xpY2snLCBkZWxfYnV0dG9uX2NsaWNrKTtcdFxyXG5cdCQoXCIuYWRkZF9pY29uXCIpLnVuYmluZCgnY2xpY2snKTtcclxuXHQkKFwiLmFkZGRfaWNvblwiKS5iaW5kKCdjbGljaycsIGFkZF9tX2J1dHRvbl9jbGljayk7XHRcclxuXHRcclxuXHQvL2FkZGRfaWNvbl9tYXRlb1xyXG5cdCQoXCIuYWRkZF9pY29uX21hdGVvXCIpLnVuYmluZCgnY2xpY2snKTtcclxuXHQkKFwiLmFkZGRfaWNvbl9tYXRlb1wiKS5iaW5kKCdjbGljaycsIGFkZF9tYXRlcmlhbF9jbGljayk7XHRcclxuXHRcclxuXHRcclxuXHQvL9C40LrQvtC90LrQuCDRgNCw0LHQvtGC0Ysg0YEg0LzQsNGC0LXRgNC40LDQu9Cw0LzQuFxyXG5cdCQoXCIuZWRpdF9pY29uX21cIikudW5iaW5kKCdjbGljaycpO1xyXG5cdCQoXCIuZWRpdF9pY29uX21cIikuYmluZCgnY2xpY2snLCBlZGl0X21fYnV0dG9uX2NsaWNrKTtcclxuXHQkKFwiLmRlbF9pY29uX21cIikudW5iaW5kKCdjbGljaycpO1xyXG5cdCQoXCIuZGVsX2ljb25fbVwiKS5iaW5kKCdjbGljaycsIGRlbF9tX2J1dHRvbl9jbGljayk7XHRcdFxyXG59XHJcblxyXG52YXIgc2F2ZWRlZmF1bHQgPSBmdW5jdGlvbiAodGhpc3MpXHJcbntcclxuXHRpZigkKCcjc2F2ZScpLmxlbmd0aClcclxuXHR7XHJcblx0dmFyIHdkZWZhdWx0PXRoaXNzLmF0dHIoJ2RlZmF1bHR2Jyk7XHJcblx0aWYodGhpc3MudmFsKCkhPXdkZWZhdWx0KVxyXG5cdHtcclxuXHQgICAkKCcjc2F2ZScpLmF0dHIoJ3NhdmUnLCcxJyk7XHJcbiAgICB9IFxyXG5cdFxyXG5cdHZhciBhdHJyPSQoJyNzYXZlJykuYXR0cignc2F2ZScpO1xyXG5cdGlmKGF0cnI9PTEpXHJcblx0XHR7XHJcblx0XHRcdCQoJy5qcy1hZGRfbmFyJykuc2hvdygpO1xyXG5cdFx0XHQkKCcuanMtcG9kX25hcicpLmhpZGUoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbi8v0L7RgtC60YDRi9GC0LjQtSDQvNC+0LHQsNC50Lsg0LzQtdC90Y5cclxuLy8gIHxcclxuLy8gXFwvXHJcblxyXG53aW5kb3cuU2xpY2VNTSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciB0cl9zPSQoJy5idXJnZXJfb2snKTtcclxuXHR2YXIgbW9iaWxlPSQoJy5tb2JpbGUtbmF2Jyk7XHJcblx0aWYodHJfcy5pcyhcIi5hY3RpdmVcIikpXHJcblx0e1xyXG5cdFx0dHJfcy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdG1vYmlsZS5yZW1vdmVDbGFzcyhcImFjdFwiKTtcclxuXHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcyhcIm1lbnUtb3BlblwiKTtcclxuXHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0dHJfcy5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdG1vYmlsZS5hZGRDbGFzcyhcImFjdFwiKTtcclxuXHRcdCQoJ2JvZHknKS5hZGRDbGFzcyhcIm1lbnUtb3BlblwiKTtcclxuXHR9XHJcblxyXG5cclxufVxyXG5cclxudmFyIHNhdmVkZWZhdWx0X3pheSA9IGZ1bmN0aW9uICh0aGlzcylcclxue1xyXG5cdC8vbGVydChcIiFcIik7XHJcblx0aWYoJCgnI3NhdmUnKS5sZW5ndGgpXHJcblx0e1xyXG5cdHZhciB3ZGVmYXVsdD10aGlzcy5hdHRyKCdkZWZhdWx0dicpO1xyXG5cdGlmKHRoaXNzLnZhbCgpIT13ZGVmYXVsdClcclxuXHR7XHJcblx0ICAgJCgnI3NhdmUnKS5hdHRyKCdzYXZlJywnMScpO1xyXG4gICAgfSBcclxuXHRcclxuXHR2YXIgYXRycj0kKCcjc2F2ZScpLmF0dHIoJ3NhdmUnKTtcclxuXHRpZihhdHJyPT0xKVxyXG5cdFx0e1xyXG5cdFx0XHQkKCcuYWRkX3pheScpLnNob3coKTtcclxuXHRcdFx0JCgnLnBvZF96YXknKS5oaWRlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKXtcclxuXHRhbmltYXRpb25fdGVwcygpO1xyXG4kKHdpbmRvdykub24oJ3Jlc2l6ZScsd2luZG93U2l6ZSk7XHRcclxuXHJcbiQoJy5sb2FkZXJfYWRhJykucmVtb3ZlKCk7XHJcbiQoJy5sb2FkZXJfYWRhMScpLnJlbW92ZSgpO1xyXG5cdFx0XHJcblx0XHJcbkJhc2tldEZpbmVyeSgpOyAvL9C/0YDQvtCy0LXRgNC60LAg0LrQvtGA0LfQuNC90Ysg0L3QsNGA0Y/QtNC+0LJcdFxyXG5CYXNrZXRNYXRlcmlhbCgpOyAvL9C/0YDQvtCy0LXRgNC60LAg0LrQvtGA0LfQuNC90Ysg0LzQsNGC0LXRgNC40LDQu9C+0LJcclxuTWF0ZXJpYWxTZWxlY3RBbGwoKTsgLy/QstGL0LTQtdC70LXQvdC40LUg0LrQvdC+0L/QvtC6INCy0YvQtNC10LvQuNGC0Ywg0LLRgdC1INC80LDRgtC10YDQuNCw0LvRiyDQv9C+INGA0LDQsdC+0YLQtVxyXG5cdFxyXG5qUXVlcnkoJy5zY3JvbGxiYXItaW5uZXInKS5zY3JvbGxiYXIoKTsgLy/RgdC60YDRg9C70Lsg0LzQtdC90Y4g0L/RgNC4INC80LDQu9C+0Lkg0LLRi9GB0L7RgtC1XHJcblRvb2xUaXAoKTsgIC8v0L/QvtC00YHQutCw0LfQutC4INC/0YDQuCDQvdCw0LLQtdC00LXQvdC40Lhcclxuc2xfbWVzc2FnZV93aWR0aCgpO1xyXG4kKCcubGFiZWxfcycpLmJpbmQoXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwgbGFiZWxfc2hvdyk7XHJcblxyXG4vL9GE0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40LUg0YLRg9GA0LAgLSDQstGL0LHQvtGAINC/0LDRgdC/0L7RgNGCINC60LDQutC+0LlcclxuXHQkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXBhc3N3b3JkLWJ1dHQnLHBhc3N3b3JkX2J1dHQpO1xyXG5cdC8v0L3QsNC20LDRgtC40LUg0L3QsCDQvtGC0LTQtdC70YzQvdGL0LUgY2h0Y2tib3gg0LfQsNC70LrQuCDQsiDQvtC/0YDQtdC00LXQu9C10L3QvdC+0Lkg0LPRgNGD0L/Qv9C1XHJcblx0JCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1jaGVja2JveC1ncm91cCcsQ2hlY2tib3hHcm91cCk7XHJcblxyXG5cclxuXHQkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXR5cGUtc29mdC12aWV3MScsTWVtb0J1dFR5cGUpO1xyXG5cclxuJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy50YWJzXzAwNVUnLHtrZXk6IFwiMDA1VVwifSx0YWJzX2FwcCk7XHJcblxyXG5cdCQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtc2lnbi1hJyxTaW5nRm8pO1xyXG5cclxuXHJcblx0JCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1yZWplY3QtYXBwJyxSZWplY3RGbyk7XHJcblx0JCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1mb3J3YXJkLWFwcCcsRm9yd2FyZEZvKTtcclxuXHJcbi8v0LTQtdC70LDQtdC8INC/0L7Qu9GPINGBINC60LvQsNGB0YHQvtC8INGC0L7Qu9GM0LrQviDQtNGA0L7QsdC90YvQvNC4INC4INGG0LXQu9GL0LzQuCDRh9C40YHQu9Cw0LzQuFx0XHRcclxuLy8kKCcuc21ldGExJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmNvdW50X21hc2snLGZ1bmN0aW9uKCl7ICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgvW15cXGQuXSovZywgJycpLnJlcGxhY2UoLyhbLl0pWy5dKy9nLCAnJDEnKS5yZXBsYWNlKC9eW15cXGRdKihcXGQrKFsuXVxcZHswLDV9KT8pLiokL2csICckMScpKTsgIH0pO1xyXG5cdCQoJ2JvZHknKS5vbihcImNsaWNrXCIsJy5idXJnZXJfb2snLFNsaWNlTU0pO1xyXG5cdCQoJy5tZW51X3gnKS5jbG9uZSgpLmFwcGVuZFRvKFwiLm1vYmlsZS1uYXYgc3BhblwiKTtcclxuLy9cclxuJCgnYm9keScpLm9uKFwia2V5dXBcIiwnLmxvbGxfc29wbHknLHNlYXJjaF9wb3N0YSk7XHRcclxuJCgnYm9keScpLm9uKFwiY2xpY2tcIiwnLmxvbGxfc29wbHknLHNlYXJjaF9wb3N0YTEpO1x0XHJcbiQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcubG9sbF9kcm9wIGxpJyxzZWFyY2hfcG9zdGFfbGkpO1xyXG4kKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmxhYmVsX2V4aXR0JyxzZWFyY2hfcG9zdGFfbGkyKTtcclxuXHRcclxuXHJcbiQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcubG9sbF9wbHVzJyxwbHVzX3Bvc3R0KVx0XHJcblxyXG4kKCcuc3VwcHBfdHInKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcueW9vcF9jbGljaycseW9vcF9jbGljaylcdFxyXG5cclxuXHRcclxuJCgnLnNhdmVfYnV0dG9uMicpLmJpbmQoXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwgc2VuZF9tZWVlKTtcclxuXHRcclxuJCgnLmNvbnRlbnQnKS5vbihcImNsaWNrXCIsJy5zZW5kX21lc3MnLFNlbmRNZXNzYWdlKTtcdFxyXG4kKCcuaGVscF91c2VyJykub24oXCJjbGlja1wiLCcuc2VuZF9tZXNzJyxTZW5kTWVzc2FnZSk7XHJcblxyXG4vLyQoJy5tZW51X2pqcycpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5tZW51X2NsaWNrJyxtZW51Y2xpY2spO1xyXG5cclxuJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5tZW51X2NsaWNrJyxtZW51Y2xpY2spO1xyXG5cclxuLy8kKCcubWVudV9jbGljaycpLmJpbmQoXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwgbWVudWNsaWNrKTtcclxuXHRcclxuJCgnLmpzLWNsb3NlX3ByaW1lX2RvbVx0Jykub24oJ2NsaWNrJywgY2xvc2VfcHJpbWVfZG9tKTtcclxuXHRcclxuJCgnLnBheV9pbXAnKS5vbihcImNsaWNrXCIsJy5iZXpuYWxfdXBsb2FkJyxiZXpuYWxfdXBsb2FkKTtcdFx0XHJcblx0XHJcblxyXG4kKCcuZGl2X2RpYWxvZycpLm9uKFwiY2xpY2tcIiwnLmRpYWxvZ19hJyxmdW5jdGlvbihlKSB7ICBpZigkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLmRlbF9kaWFsb2dcIikubGVuZ3RoPT0wKVxyXG4gIHtcclxuXHR2YXIgZGlhbG9nX2lkPSQodGhpcykuYXR0cigncmVsX2RpYWdvbCcpO1xyXG5cdCQodGhpcykuYXR0cignaHJlZicsJy9tZXNzYWdlL2RpYWxvZy8nK2RpYWxvZ19pZCsnLycpO1xyXG5cdCQodGhpcykudHJpZ2dlcignQ2xpY2snKTtcclxuXHJcbiAgfSB9KTtcclxuXHJcblxyXG5cdFxyXG52YXIgVXBsb2FkU2NhblMgPSBmdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWRfdXBsb2FkPSQodGhpcykuYXR0cignaWRfdXBsb2FkJyk7XHJcblx0JCgnW25hbWU9bXlmaWxlJytpZF91cGxvYWQrJ10nKS50cmlnZ2VyKCdjbGljaycpO1xyXG59XHJcblxyXG5cclxudmFyIFVwbG9hZEludm9pY2VBa3QgPSBmdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWRfdXBsb2FkX2E9JCh0aGlzKS5hdHRyKCdpZF91cGxvYWRfYScpO1xyXG5cdCQoJ1tuYW1lPW15ZmlsZWFrdCcraWRfdXBsb2FkX2ErJ10nKS50cmlnZ2VyKCdjbGljaycpO1xyXG59XHJcbnZhciBVcGxvYWRJbnZvaWNlUGhvdG8gPSBmdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWRfdXBsb2FkX2ExPSQodGhpcykuYXR0cignaWRfdXBsb2FkX2ExJyk7XHJcblx0JCgnW25hbWU9bXlmaWxlcGhvdG8nK2lkX3VwbG9hZF9hMSsnXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbn1cclxuXHJcblx0XHJcbnZhciBVcGxvYWRJbnZvaWNlID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGlkX3VwbG9hZD0kKHRoaXMpLmF0dHIoJ2lkX3VwbG9hZCcpO1xyXG5cdCQoJ1tuYW1lPW15ZmlsZScraWRfdXBsb2FkKyddJykudHJpZ2dlcignY2xpY2snKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHVwbG9hZFMoZmlsZSxpZCkge1xyXG5cclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvNC+0LbQvdC+INC+0LHRitC10LTQuNC90LjRgtGMINCyINC+0LTQuNC9LFxyXG4gICAgICAvLyDQtdGB0LvQuCBzdGF0dXMgPT0gMjAwLCDRgtC+INGN0YLQviDRg9GB0L/QtdGFLCDQuNC90LDRh9C1INC+0YjQuNCx0LrQsFxyXG4gICAgICB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICBcclxuXHRcdCAgJCgnW2lkX3VwbG9hZD0nK2lkKyddJykuc2hvdygpOyAvL9C60L3QvtC/0LrQsFxyXG5cdFx0ICAkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKDApOyBcclxuXHRcdCAgJCgnLnNjYXBfbG9hZF8nK2lkKS5oaWRlKCk7XHJcblx0XHQgIFVwZGF0ZUltYWdlU3VwcGx5KGlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCgnW2lkX3VwbG9hZD0nK2lkKyddJykuc2hvdygpO1xyXG5cdFx0ICAkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKDApOyBcclxuXHRcdCAgJCgnLnNjYXBfbG9hZF8nK2lkKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC30LDQutCw0YfQutC4XHJcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHQkKCdbaWRfdXBsb2FkPScraWQrJ10nKS5oaWRlKCk7ICBcclxuXHRcdCQoJy5zY2FwX2xvYWRfJytpZCkuc2hvdygpOyAgXHJcblx0XHR2YXIgd2lkdGhzPU1hdGgucm91bmQoKGV2ZW50LmxvYWRlZCoxMDApL2V2ZW50LnRvdGFsKTtcclxuXHRcdCQoJy5zY2FwX2xvYWRfJytpZCkuZmluZCgnLnNjYXBfbG9hZF9fJykud2lkdGgod2lkdGhzKTsgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJzdXBwbHkvdXBsb2FkLnBocFwiLCB0cnVlKTtcclxuICAgICAgLy94aHIuc2VuZChmaWxlKTtcclxuXHRcclxuXHQgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgZm9ybURhdGEuYXBwZW5kKFwidGhlZmlsZVwiLCBmaWxlKTtcclxuXHQgZm9ybURhdGEuYXBwZW5kKFwiaWRcIixpZCk7XHJcbiAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxuICAgIH1cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINCw0LrRgtC+0LIg0L3QsCDQvtGC0LHRgNCw0LrQvtCy0LrRg1xyXG5mdW5jdGlvbiB1cGxvYWRJQShmaWxlLGlkKSB7XHJcblxyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC80L7QttC90L4g0L7QsdGK0LXQtNC40L3QuNGC0Ywg0LIg0L7QtNC40L0sXHJcbiAgICAgIC8vINC10YHQu9C4IHN0YXR1cyA9PSAyMDAsINGC0L4g0Y3RgtC+INGD0YHQv9C10YUsINC40L3QsNGH0LUg0L7RiNC40LHQutCwXHJcbiAgICAgIHhoci5vbmxvYWQgPSB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgIFxyXG5cdFx0JCgnW2lkX3VwbG9hZF9hPScraWQrJ10nKS5uZXh0KCkuZmluZCgnLmJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbCcpLmhpZGUoKTtcclxuXHRcdFx0JCgnW2lkX3VwbG9hZF9hPScraWQrJ10nKS5zaG93KCk7ICBcclxuXHRcdFx0XHJcblx0XHQgIFVwZGF0ZUltYWdlSW52b2ljZUFrdChpZCwwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG5cdFx0JCgnW2lkX3VwbG9hZF9hPScraWQrJ10nKS5uZXh0KCkuZmluZCgnLmJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbCcpLmhpZGUoKTtcclxuXHRcdFx0JCgnW2lkX3VwbG9hZF9hPScraWQrJ10nKS5zaG93KCk7ICBcclxuXHRcdFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQt9Cw0LrQsNGH0LrQuFxyXG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0IC8v0YHQutGA0YvRgtGMINC60L3QvtC/0LrRgyDQv9C+0LrQsNC30LDRgtGMINC30LDQs9GA0YPQt9GH0LjQuiBcclxuXHRcdCQoJ1tpZF91cGxvYWRfYT0nK2lkKyddJykuaGlkZSgpOyAgXHJcblx0XHQkKCdbaWRfdXBsb2FkX2E9JytpZCsnXScpLm5leHQoKS5maW5kKCcuYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsJykuc2hvdygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJpbnZvaWNlcy91cGxvYWRfYWt0LnBocFwiLCB0cnVlKTtcclxuICAgICAgLy94aHIuc2VuZChmaWxlKTtcclxuXHRcclxuXHQgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgZm9ybURhdGEuYXBwZW5kKFwidGhlZmlsZVwiLCBmaWxlKTtcclxuXHQgZm9ybURhdGEuYXBwZW5kKFwiaWRcIixpZCk7XHJcbiAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxuICAgIH1cclxuXHJcbi8v0LfQsNCz0YDRg9C30LrQsCDRhNC+0YLQviDQsdGA0LDQutCwXHRcclxuZnVuY3Rpb24gdXBsb2FkSVAoZmlsZSxpZCkge1xyXG5cclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvNC+0LbQvdC+INC+0LHRitC10LTQuNC90LjRgtGMINCyINC+0LTQuNC9LFxyXG4gICAgICAvLyDQtdGB0LvQuCBzdGF0dXMgPT0gMjAwLCDRgtC+INGN0YLQviDRg9GB0L/QtdGFLCDQuNC90LDRh9C1INC+0YjQuNCx0LrQsFxyXG4gICAgICB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICBcclxuXHRcdCQoJ1tpZF91cGxvYWRfYTE9JytpZCsnXScpLm5leHQoKS5maW5kKCcuYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsJykuaGlkZSgpO1xyXG5cdFx0XHQkKCdbaWRfdXBsb2FkX2ExPScraWQrJ10nKS5zaG93KCk7ICBcclxuXHRcdCAgVXBkYXRlSW1hZ2VJbnZvaWNlQWt0KGlkLDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblx0XHQkKCdbaWRfdXBsb2FkX2ExPScraWQrJ10nKS5uZXh0KCkuZmluZCgnLmJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbCcpLmhpZGUoKTtcclxuXHRcdFx0JCgnW2lkX3VwbG9hZF9hMT0nK2lkKyddJykuc2hvdygpOyAgXHJcblx0XHRcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LfQsNC60LDRh9C60LhcclxuICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCAvL9GB0LrRgNGL0YLRjCDQutC90L7Qv9C60YMg0L/QvtC60LDQt9Cw0YLRjCDQt9Cw0LPRgNGD0LfRh9C40LogXHJcblx0XHQkKCdbaWRfdXBsb2FkX2ExPScraWQrJ10nKS5oaWRlKCk7ICBcclxuXHRcdCQoJ1tpZF91cGxvYWRfYTE9JytpZCsnXScpLm5leHQoKS5maW5kKCcuYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsJykuc2hvdygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJpbnZvaWNlcy91cGxvYWRfcGhvdG8ucGhwXCIsIHRydWUpO1xyXG4gICAgICAvL3hoci5zZW5kKGZpbGUpO1xyXG5cdFxyXG5cdCB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICBmb3JtRGF0YS5hcHBlbmQoXCJ0aGVmaWxlXCIsIGZpbGUpO1xyXG5cdCBmb3JtRGF0YS5hcHBlbmQoXCJpZFwiLGlkKTtcclxuICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XHJcblxyXG4gICAgfVx0XHJcblx0XHJcbmZ1bmN0aW9uIHVwbG9hZEkoZmlsZSxpZCkge1xyXG5cclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvNC+0LbQvdC+INC+0LHRitC10LTQuNC90LjRgtGMINCyINC+0LTQuNC9LFxyXG4gICAgICAvLyDQtdGB0LvQuCBzdGF0dXMgPT0gMjAwLCDRgtC+INGN0YLQviDRg9GB0L/QtdGFLCDQuNC90LDRh9C1INC+0YjQuNCx0LrQsFxyXG4gICAgICB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICBcclxuXHRcdCAgJCgnW2lkX3VwbG9hZD0nK2lkKyddJykuc2hvdygpOyAvL9C60L3QvtC/0LrQsFxyXG5cdFx0ICAkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKDApOyBcclxuXHRcdCAgJCgnLnNjYXBfbG9hZF8nK2lkKS5oaWRlKCk7XHJcblx0XHQgIFVwZGF0ZUltYWdlSW52b2ljZShpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoJ1tpZF91cGxvYWQ9JytpZCsnXScpLnNob3coKTtcclxuXHRcdCAgJCgnLnNjYXBfbG9hZF8nK2lkKS5maW5kKCcuc2NhcF9sb2FkX18nKS53aWR0aCgwKTsgXHJcblx0XHQgICQoJy5zY2FwX2xvYWRfJytpZCkuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQt9Cw0LrQsNGH0LrQuFxyXG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0JCgnW2lkX3VwbG9hZD0nK2lkKyddJykuaGlkZSgpOyAgXHJcblx0XHQkKCcuc2NhcF9sb2FkXycraWQpLnNob3coKTsgIFxyXG5cdFx0dmFyIHdpZHRocz1NYXRoLnJvdW5kKChldmVudC5sb2FkZWQqMTAwKS9ldmVudC50b3RhbCk7XHJcblx0XHQkKCcuc2NhcF9sb2FkXycraWQpLmZpbmQoJy5zY2FwX2xvYWRfXycpLndpZHRoKHdpZHRocyk7ICBcclxuICAgICAgfVxyXG5cclxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIFwiaW52b2ljZXMvdXBsb2FkLnBocFwiLCB0cnVlKTtcclxuICAgICAgLy94aHIuc2VuZChmaWxlKTtcclxuXHRcclxuXHQgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgZm9ybURhdGEuYXBwZW5kKFwidGhlZmlsZVwiLCBmaWxlKTtcclxuXHQgZm9ybURhdGEuYXBwZW5kKFwiaWRcIixpZCk7XHJcbiAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxuICAgIH1cclxuXHJcblx0XHJcbnZhciBVcGxvYWRJbnZvaWNlUGhvdG9DaGFuZ2UgPSBmdW5jdGlvbigpXHJcbntcclxuXHR2YXIgaWQ9JCh0aGlzKS5wYXJlbnRzKCdmb3JtJykuYXR0cignaWRfYScpO1xyXG5cdGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG5cdCAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgdXBsb2FkSVAoZmlsZSxpZCk7XHJcbiAgICAgIH0gXHJcbiAgICAgIHJldHVybiBmYWxzZTtcdFxyXG59XHRcdFxyXG5cclxudmFyIFVwbG9hZEludm9pY2VBa3RDaGFuZ2UgPSBmdW5jdGlvbigpXHJcbntcclxuXHRcclxuXHR2YXIgaWQ9JCh0aGlzKS5wYXJlbnRzKCdmb3JtJykuYXR0cignaWRfYScpO1xyXG5cdGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG5cdCAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgdXBsb2FkSUEoZmlsZSxpZCk7XHJcbiAgICAgIH0gXHJcbiAgICAgIHJldHVybiBmYWxzZTtcdFxyXG59XHRcclxuXHRcclxuXHJcbnZhciBVcGxvYWRJbnZvaWNlQ2hhbmdlID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGlkPSQodGhpcykucGFyZW50cygnZm9ybScpLmF0dHIoJ2lkX3NjJyk7XHJcblx0ZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcblx0ICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICB1cGxvYWRJKGZpbGUsaWQpO1xyXG4gICAgICB9IFxyXG4gICAgICByZXR1cm4gZmFsc2U7XHRcclxufVxyXG5cclxudmFyIFVwbG9hZFNjYW5TQ2hhbmdlID0gZnVuY3Rpb24oKVxyXG57XHJcblx0dmFyIGlkPSQodGhpcykucGFyZW50cygnZm9ybScpLmF0dHIoJ2lkX3NjJyk7XHJcblx0ZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcblx0ICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICB1cGxvYWRTKGZpbGUsaWQpO1xyXG4gICAgICB9IFxyXG4gICAgICByZXR1cm4gZmFsc2U7XHRcclxufVxyXG5cclxuXHQvL9C00LXQu9Cw0LXQvCDQv9C+0LvRjyDRgSDQutC70LDRgdGB0L7QvCDRgtC+0LvRjNC60L4g0LTRgNC+0LHQvdGL0LzQuCDQuCDRhtC10LvRi9C80Lgg0YfQuNGB0LvQsNC80LhcdFxyXG4vLyQoJy5jb3VudF9tYXNrJykuYmluZChcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCB2YWxpZGF0ZTExKTtcclxuXHJcblx0JCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5jb3VudF9tYXNrJyx2YWxpZGF0ZTExKVxyXG5cclxuXHQkKCcuYmxvY2tfaW52b2ljZV8yMDE4OCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsXCIuZGVsX2ludm9pY2VcIiwgZGVsbF9pbnZvaWNlKTtcclxuXHJcbi8vXHQkKCcuaW52b2ljZV9ibG9jaycpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsXCIuZGVsX2ludm9pY2VfbWF0ZXJpYWxcIiwgZGVsbF9pbnZvaWNlX21hdGVyaWFsKTtcclxuLy9cdCQoJy5pbnZvaWNlX2Jsb2NrJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIixcIi5tYXRlcmlhbF9kZWZlY3RcIiwgbWF0ZXJpYWxfZGVmZWN0KTtcclxuXHRcclxuLy9cdCQoJy5pbnZvaWNlX2Jsb2NrJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIixcIi5kZWxfaW52b2ljZV9ha3RcIiwgbWF0ZXJpYWxfZGVmZWN0X2RlbGwpO1xyXG5cdFxyXG5cdFxyXG5cdCQoJy5tZXNzYV9mb3JtX2EnKS5vbihcImNoYW5nZVwiLCcuaW52b2ljZV9maWxlX3Bob3RvJyxVcGxvYWRJbnZvaWNlUGhvdG9DaGFuZ2UpO1xyXG5cdCQoJy5tZXNzYV9mb3JtX2EnKS5vbihcImNoYW5nZVwiLCcuaW52b2ljZV9maWxlX2FrdCcsVXBsb2FkSW52b2ljZUFrdENoYW5nZSk7XHRcclxuXHRcclxuXHQkKCcuaW52b2ljZV9ibG9jaycpLm9uKFwiY2xpY2tcIixcIi5hZGRfYWt0X2RlZmVjdFwiLCBVcGxvYWRJbnZvaWNlQWt0KTtcdFxyXG5cdCQoJy5pbnZvaWNlX2Jsb2NrJykub24oXCJjbGlja1wiLFwiLmFkZF9ha3RfZGVmZWN0MVwiLCBVcGxvYWRJbnZvaWNlUGhvdG8pO1xyXG5cdFxyXG5cdCQoJy5pbnZvaWNlX2Jsb2NrJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIixcIi5jb3VudF9kZWZlY3RfaW5fLC50ZXh0X3pheXZhX21lc3NhZ2VfLC5kZWxfaW52b2ljZV9ha3RcIixmdW5jdGlvbigpeyAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlc19tZXNzYV0nKS5maW5kKCcucHJpbnRfaW52b2ljZV9ha3QnKS5oaWRlKCk7IH0pO1xyXG5cclxuLy/Qv9C+0LrQsNC30LDRgtGMINGB0LrRgNGL0YLRjCDQv9Cw0YDQvtC70Ywg0LPQu9Cw0LfQuNC6XHJcblx0JCgnYm9keScpLm9uKFwiY2xpY2tcIiwnLmFpcycsRXllKTtcclxuXHJcblx0JCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsXCIuanMtc2F2ZS1zZXR0aW5nXCIsIHNhdmVfc2V0dGluZyk7XHJcblx0XHJcblx0JCgnLmludm9pY2VfYmxvY2snKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLFwiLmNvdW50X2RlZmVjdF9pbl8sLmNvdW50X2luX1wiLCBCcmFrRXJyb3IpO1xyXG5cdFxyXG5cdFx0JCgnLmludm9pY2VfYmxvY2snKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLFwiLmNvdW50X2luX1wiLCBFcnJvck1heCk7XHJcblx0XHJcblxyXG5cclxuXHRcclxuXHRcclxuJCgnLmludm9pY2VfYmxvY2snKS5vbihcImNoYW5nZVwiLCcjaXNwb2xfaW52b2ljZScsVXBkYXRlQ29udHJhY3Rvckludm9pY2UpO1xyXG4vLyQoJy5pbnZvaWNlX2Jsb2NrJykub24oXCJjaGFuZ2VcIiwnI2lzcG9sX3R5cGVfaW52b2ljZScsbmRzX2ludm9pY2UpO1xyXG5cdFxyXG5cclxuXHJcbiQoJy5pbWdfaW52b2ljZV9kaXYnKS5vbihcImNsaWNrXCIsJy5kZWxfaW1hZ2VfaW52b2ljZScsRGVsbEltYWdlSW52b2ljZSk7XHRcclxuXHJcbiQoJy5pbWdfaW52b2ljZV9kaXYnKS5vbihcImNsaWNrXCIsJy5pbnZvaWNlX3VwbG9hZCcsVXBsb2FkSW52b2ljZSk7XHJcbiQoJy5pbWdfaW52b2ljZV9kaXYnKS5vbihcImNoYW5nZVwiLCcuc2Nfc2NfbG9vMTInLFVwbG9hZEludm9pY2VDaGFuZ2UpO1xyXG5cclxuXHJcbi8v0LfQsNCz0YDRg9C30LjRgtGMINGE0L7RgtC+INCyINC90LDRgdGC0YDQvtC50LrQsNGFXHJcblx0JCgnLmxfcGhvdG8nKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuaW52b2ljZV91cGxvYWQnLFVwbG9hZEludm9pY2Vfb2xkKTtcclxuXHQkKCcuY29udGVudCcpLm9uKFwiY2hhbmdlXCIsJy5zY19zY19sb29zMicsVXBsb2FkUmVwb3J0c0NoYW5nZV9vbGQpO1xyXG5cclxuJCgnYm9keScpLm9uKFwiY2xpY2tcIiwnLnNvcGx5X3VwbG9hZCcsVXBsb2FkU2NhblMpO1xyXG4kKCdib2R5Jykub24oXCJjaGFuZ2VcIiwnLnNjX3NjX2xvbzExJyxVcGxvYWRTY2FuU0NoYW5nZSk7XHJcblxyXG5cclxuXHQkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWRvcC1hZGRfc3Z2JyxBZGREb3BTVyk7XHJcblxyXG4kKCcuYmlsbF90YWJsZScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy54dmdfYmlsbF9zY29yZScseHZnX2JpbGwpO1x0XHJcblxyXG4kKCcuYmlsbF90YWJsZScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy54dmdfbm8nLHh2Z19ubyk7XHJcbiQoJy5iaWxsX3RhYmxlJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnh2Z195ZXMnLHh2Z195ZXMpO1xyXG5cdFxyXG4kKCcuc3RvY2tfdGFibGVfbGlzdCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy54dmdfbm8xJyx4dmdfbm8xKTtcdFxyXG4kKCcuc3RvY2tfdGFibGVfbGlzdCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy54dmdfeWVzMScseHZnX3llczEpO1x0XHRcclxuXHJcbiQoJy5ib29rZXJfdGFibGUnKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuYm9va2VyX3llcycsYm9va2VyX3llcyk7XHRcclxuXHRcclxuJCgnLnBheV9pbXAnKS5vbihcImNsaWNrXCIsJy5uYXJ5ZF91cGxvYWQnLFVwbG9hZFNjYW4pO1xyXG4kKCcucGF5X2ltcCcpLm9uKFwiY2hhbmdlXCIsJy5zY19zY19sb28nLFVwbG9hZFNjYW5DaGFuZ2UpO1xyXG4kKCcucGF5X2ltcCcpLm9uKFwiY2xpY2tcIiwnLnJhc3BfcGF5JyxEZWxsQ2FzaCk7XHJcbiQoJy5wYXlfaW1wJykub24oXCJjbGlja1wiLCcuZGVsX3BheScsRGVsbFBheSk7XHJcblxyXG5cclxualF1ZXJ5KGRvY3VtZW50KS5vbihcImZvY3VzIGNsaWNrXCIsJy5pbnB1dF9uZXdfMjAxOCcsSW5wdXRGb2N1c05ldyk7XHRcclxualF1ZXJ5KGRvY3VtZW50KS5vbihcImJsdXJcIiwnLmlucHV0X25ld18yMDE4JyxJbnB1dEJsdXJOZXcpO1xyXG5cdGpRdWVyeShkb2N1bWVudCkub24oXCJrZXl1cFwiLCcuaW5wdXRfbmV3XzIwMTgnLEtleVVwSW5wdXQpO1xyXG5cclxuXHRqUXVlcnkoZG9jdW1lbnQpLm9uKFwiZm9jdXMgY2xpY2tcIiwnLmlucHV0X25ld18yMDIxJyxJbnB1dEZvY3VzTmV3MjAyMSk7XHJcblx0alF1ZXJ5KGRvY3VtZW50KS5vbihcImJsdXJcIiwnLmlucHV0X25ld18yMDIxJyxJbnB1dEJsdXJOZXcyMDIxKTtcclxuXHJcblxyXG5cclxuXHQvL2pRdWVyeShkb2N1bWVudCkub24oXCJmb2N1cyBjbGlja1wiLCcuaW5wdXRfbmV3XzIwMjEnLElucHV0Rm9jdXNOZXcyMDIxKTtcclxuXHQvL2pRdWVyeShkb2N1bWVudCkub24oXCJibHVyXCIsJy5pbnB1dF9uZXdfMjAyMScsSW5wdXRCbHVyTmV3MjAyMSk7XHJcblx0alF1ZXJ5KGRvY3VtZW50KS5vbihcImtleXVwXCIsJy5pbnB1dF9uZXdfMjAyMScsS2V5VXBJbnB1dDIwMjEpO1xyXG5cclxuXHJcblx0Ly9qUXVlcnkoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwnLnByaW50X3N0b2NrXycsUHJpbnRTdG9ja18pO1xyXG5cdFxyXG4kKCcuc3VwcHBfdHInKS5vbihcImNsaWNrXCIsJy5zdXBwbHlfdHJfbycsQ2hhbmdlU3VwcGx5KTtcclxuXHJcblxyXG4kKCcubm90aWZfaW1wJykub24oXCJjbGlja1wiLCcuZGVsX25vdGlmJyxEZWxsTm90aWYpO1xyXG5cdCQoJy5ub3RpZl9kaXZfMjAxOCcpLm9uKFwiY2xpY2tcIiwnLmRlbF9ub3RpZicsRGVsbE5vdGlmKTtcclxuXHJcblxyXG5cclxuJCgnLm1hdF96eicpLm9uKFwiY2xpY2tcIiwnLmRlbF9tYXRlcmlhbF96YXl2YScsRGVsbFpheXZhTWF0ZXJpYWwpO1x0XHRcclxuJCgnLm1hdF96eicpLm9uKFwiY2xpY2tcIiwnLmRlbF9tYXRlcmlhbF96YXl2YTEnLERlbGxaYXl2YU1hdGVyaWFsMSk7XHRcclxuJCgnLndvcmtfX3MnKS5vbihcImNsaWNrXCIsJy5kZWxfbmFyeWRfd29yaycsRGVsbE5hcnlkV29yayk7XHRcclxuJCgnLndvcmtfX3MnKS5vbihcImNsaWNrXCIsJy5kZWxfbmFyeWRfd29yazEnLERlbGxOYXJ5ZFdvcmsxKTtcclxuJCgnLnNtZXRhMicpLm9uKFwiY2xpY2tcIiwnLmRlbF9uYXJ5ZCcsRGVsbE5hcnlkKTtcclxuJCgnLnNtZXRhMicpLm9uKFwiY2xpY2tcIiwnLmRlbF96YXlfemF5JyxEZWxsWmF5WmF5KTtcdFxyXG5cclxuXHJcbi8v0LrQu9C40Log0L/QviDQuNC60L7QvdC60Lgg0L/QvtC60LDQt9Cw0YLRjCDQuNGB0YLQvtGA0LjRjiDQvdCw0YDRj9C00L7QsiDQv9C+INGA0LDQsdC+0YLQtVxyXG4kKCcud29ya19fcycpLm9uKFwiY2xpY2tcIiwnLmhpc3RvcnlfaWNvbicsSGlzdG9yeU4pO1xyXG5cdCQoJy5tYXR0eCwuanMtbW9yZS1hY2MtdmlldycpLm9uKFwiY2xpY2tcIiwnLmhpc3RvcnlfaWNvbicsSGlzdG9yeU4xKTtcclxuXHJcbi8v0LrQvtC90YLRgNC+0LvRjCDQstCy0L7QtNCwINC60L7Qu9C40YfQtdGB0YLQstCwINC80LDRgtC10YDQuNCw0LvQsCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0LfQsNGP0LLQutC4INC90LAg0LzQsNGC0LXRgNC40LDQu1xyXG4kKCcubWF0X3p6Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmNvdW50X2FwcF9tYXRlcl8nLE1teUhhbmRsZXJBcHApO1x0XHRcclxuXHRcclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0YHRgtC+0LjQvNC+0YHRgtC4INC80LDRgtC10YDQuNCw0LvQsCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbi8vJCgnLm1hdCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5wcmljZV9maW5lcnlfbWF0ZXJfJyxNbXlIYW5kbGVyKTtcdFxyXG4kKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnMtai1kb3AnLGRvcF9zbWV0YV9zY3JvbGwpO1xyXG5cclxuXHQkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnVrcicsZG9wX3NtZXRhX3Njcm9sbF8xKTtcclxuXHJcblx0XHJcbi8v0LrQvtC90YLRgNC+0LvRjCDQstCy0L7QtNCwINC60L7Qu9C40YfQtdGB0YLQstCwINC80LDRgtC10YDQuNCw0LvQsCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbiQoJy5tYXQnKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuY291bnRfZmluZXJ5X21hdGVyXycsTW15SGFuZGxlcik7XHRcclxuJCgnLm1hdCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5jb3VudF9maW5lcnlfbWF0ZXJfJyxNbXlIYW5kbGVyWFgpO1x0XHRcclxuLy/QutC+0L3RgtGA0L7Qu9GMINCy0LLQvtC00LAg0LrQvtC70LjRh9C10YHRgtCy0LAg0L/RgNC4INC+0YTQvtGA0LzQu9C10L3QuNC4INC90LDRgNGP0LTQsFxyXG4kKCcud29ya19fcycpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5jb3VudF9maW5lcnlfJyxteUhhbmRsZXIpO1x0XHJcbi8v0LrQvtC90YLRgNC+0LvRjCDQstCy0L7QtNCwINGB0YLQvtC40LzQvtGB0YLQuCDQv9GA0Lgg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwXHJcbiQoJy53b3JrX19zJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnByaWNlX2ZpbmVyeV8nLG15SGFuZGxlcjEpO1xyXG4vL9Cy0YvQstC+0LTQuNGC0Ywg0L/QviDQtNCy0L7QudC90L7QvNGDINGJ0LXQu9GH0LrRgyDQv9C+INC/0L7Qu9GOINC10LPQviDQvNCw0LrRgSDQstC+0LfQvNC+0LbQvdC+0LUg0LfQvdCw0YfQtdC90LjQtVxyXG4kKCcud29ya19fcycpLm9uKFwiZGJsY2xpY2tcIiwnLmNvdW50X2ZpbmVyeV8sLnByaWNlX2ZpbmVyeV8nLE15ZGJsY2xpY2spO1x0XHJcbiQoJy5tYXQnKS5vbihcImRibGNsaWNrXCIsJy5jb3VudF9maW5lcnlfbWF0ZXJfJyxNeWRibGNsaWNrKTtcdFxyXG5cdFxyXG5zZXRUaW1lb3V0ICggZnVuY3Rpb24gKCkgeyBcclxuXHRcclxuXHQvL9C10YHQu9C4INGH0YLQvi3RgtC+INC80LXQvdGP0LXRiNGMINCyINGA0LDQsdC+0YLQtSAg0YLQviDRg9C00LDQu9GP0LXQvCDQstGB0LUg0YDQtdGI0LXQvdC40Y8g0L/QviDRgdC70YPQti7Qt9Cw0L/QuNGB0LrQsNC8INCy0LrQu9GO0YfQsNGPINC80LDRgtC10YDQuNCw0LtcclxuXHQkKCcud29ya3gnKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuY291bnRfZmluZXJ5XywucHJpY2VfZmluZXJ5XywudGV4dF9maW5lcnlfbWVzc2FnZV8nLGZ1bmN0aW9uKCl7IGlmKCQodGhpcykuYXR0cigncmVhZG9ubHknKT09dW5kZWZpbmVkKSB7ICB2YXIgdGhpc3MgPSAkKHRoaXMpOyAgIHZhciBpZF9zPXRoaXNzLnBhcmVudHMoJ1t3b3JrXScpLmF0dHIoJ3dvcmsnKTsgJCgnW3dvcms9JytpZF9zKyddJykuZmluZCgnLmVkaXRfMTInKS5yZW1vdmUoKTsgICQoJ1t3b3JrPScraWRfcysnXScpLmZpbmQoJy5lZGl0XzEyMicpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7ICQoJ1t3b3JrPScraWRfcysnXScpLmZpbmQoJy5kZWNpc2lvbl9tZXMnKS52YWwoXCItMVwiKTsgICB9ICB9KTtcdFxyXG5cclxuXHQvL9C10YHQu9C4INGH0YLQvi3RgtC+INC80LXQvdGP0LXRiNGMINCyINC80LDRgtC10YDQuNCw0LvQtSAg0YLQviDRg9C00LDQu9GP0LXQvCDQstGB0LUg0YDQtdGI0LXQvdC40Y8g0L/QviDRgdC70YPQti7Qt9Cw0L/QuNGB0LrQtSDRjdGC0L7Qs9C+INC80LDRgtC10YDQuNCw0LvQsFxyXG5cdCQoJy5tYXR0eCcpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5jb3VudF9maW5lcnlfbWF0ZXJfLC5wcmljZV9maW5lcnlfbWF0ZXJfLC50ZXh0X2ZpbmVyeV9tZXNzYWdlXycsZnVuY3Rpb24oKXsgaWYoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpIHsgIHZhciB0aGlzcyA9ICQodGhpcyk7IHZhciB3b3JrPXRoaXNzLnBhcmVudHMoJ1t3b3JrXScpLmF0dHIoJ3dvcmsnKTsgICB2YXIgaWRfcz10aGlzcy5wYXJlbnRzKCdbcmVsX21hdHhdJykuYXR0cigncmVsX21hdHgnKTsgJCgnW2lkX21lcz0nK3dvcmsrJ18nK2lkX3MrJ10nKS5maW5kKCcuZWRpdF8xMicpLnJlbW92ZSgpOyAkKCdbaWRfbWVzPScrd29yaysnXycraWRfcysnXScpLmZpbmQoJy5lZGl0XzEyMicpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7ICQoJ1tpZF9tZXM9Jyt3b3JrKydfJytpZF9zKyddJykuZmluZCgnLmRlY2lzaW9uX21lcycpLnZhbChcIi0xXCIpOyAgICAgfSAgfSk7XHRcclxuXHJcblx0XHJcblx0XHQvL9C10YHQu9C4INC/0LXRgNC10YXQvtC0INCyINC70Y7QsdC+0LUg0YDQtdC00LDQutGC0LjRgNGD0LXQvNC+0LUg0L/QvtC70LUg0L3QsNGA0Y/QtNCwINGC0L4g0YHQsdGA0LDRgdGL0LLQsNGC0Ywg0LrQvdC+0L/QutGDINC/0L7QtNC/0LjRgdCw0YLRjCDQuCDQv9C+0LrQsNC30YvQstCw0YLRjCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMXHJcblx0JCgnLm15X24nKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGljay5uYXJ5ZFwiLCcuY291bnRfZmluZXJ5X21hdGVyXywucHJpY2VfZmluZXJ5X21hdGVyXywudGV4dF9maW5lcnlfbWVzc2FnZV8sLmNvdW50X2ZpbmVyeV8sLnByaWNlX2ZpbmVyeV8sLnNsY3RfYm94LCNkYXRlX3RhYmxlLCNkYXRlX3RhYmxlMScsZnVuY3Rpb24oKXsgJCgnLmpzLXBvZF9uYXInKS5oaWRlKCk7ICQoJy5qcy1hZGRfbmFyJykuc2hvdygpOyAgfSk7XHJcblx0XHJcblx0XHJcblx0XHJcblx0Ly/QtdGB0LvQuCDRh9GC0L4t0YLQviDQvNC10L3Rj9C10YjRjCDQsiDQvNCw0YLQtdGA0LjQsNC70LUgINGC0L4g0YPQtNCw0LvRj9C10Lwg0LLRgdC1INGA0LXRiNC10L3QuNGPINC/0L4g0YHQu9GD0LYu0LfQsNC/0LjRgdC60LUg0Y3RgtC+0LPQviDQvNCw0YLQtdGA0LjQsNC70LAg0LIg0LfQsNGP0LLQutCw0YUg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHJcblx0JCgnLm15X25uJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmNvdW50X2FwcF9tYXRlcl8sLmNhbGVuZGFyX3pheSwudGV4dF96YXl2YV9tZXNzYWdlXycsZnVuY3Rpb24oKXtpZigoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpfHwoKCQodGhpcykuYXR0cignZGlzYWJsZWQnKT09dW5kZWZpbmVkKSYmKCQodGhpcykuaXMoJy5jYWxlbmRhcl96YXknKSkpKSB7ICB2YXIgdGhpc3MgPSAkKHRoaXMpOyB2YXIgd29yaz10aGlzcy5wYXJlbnRzKCdbbWF0X3p6XScpLmF0dHIoJ21hdF96eicpOyAkKCdbbWF0X3p6PScrd29yaysnXScpLmZpbmQoJy5lZGl0XzEyJykucmVtb3ZlKCk7ICQoJ1ttYXRfeno9Jyt3b3JrKyddJykuZmluZCgnLmVkaXRfMTIzJykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsgJCgnW21hdF96ej0nK3dvcmsrJ10nKS5maW5kKCcuZGVjaXNpb25fbWVzJykudmFsKFwiLTFcIik7ICAgICB9ICB9KTtcdFxyXG5cdC8v0LXRgdC70Lgg0L/QtdGA0LXRhdC+0LQg0LIg0LvRjtCx0L7QtSDRgNC10LTQsNC60YLQuNGA0YPQtdC80L7QtSDQv9C+0LvQtSDRgdC70YPQttC10LHQvdC+0Lkg0LfQsNC/0LjRgdC60Lgg0YLQviDRgdCx0YDQsNGB0YvQstCw0YLRjCDQutC90L7Qv9C60YMg0LfQsNC60LDQt9Cw0YLRjCDQvdCwINGB0L7RhdGA0LDQvdC40YLRjFxyXG5cdCQoJy5teV9ubicpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5jb3VudF9hcHBfbWF0ZXJfLC5jYWxlbmRhcl96YXksLnRleHRfemF5dmFfbWVzc2FnZV8sLmpzLXphbWUtdG91cnMnLGZ1bmN0aW9uKCl7ICBpZigoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpfHwoKCQodGhpcykuYXR0cignZGlzYWJsZWQnKT09dW5kZWZpbmVkKSYmKCQodGhpcykuaXMoJy5jYWxlbmRhcl96YXknKSkpKSB7ICAkKCcucG9kX3pheScpLmhpZGUoKTsgJCgnLmFkZF96YXknKS5zaG93KCk7IH0gICB9KTtcclxuXHJcblx0JCgnLmpzLWFjYy12aWV3Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmNvdW50X3h2Z18sLnByaWNlX3h2Z18sLmRlbGl2ZXJ5X3h2Z18nLGZ1bmN0aW9uKCl7ICBpZigoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpfHwoKCQodGhpcykuYXR0cignZGlzYWJsZWQnKT09dW5kZWZpbmVkKSYmKCQodGhpcykuaXMoJy5jYWxlbmRhcl96YXknKSkpKSB7ICAkKCcucG9kX3pheScpLmhpZGUoKTsgJCgnLmFkZF96YXknKS5zaG93KCk7IH0gICB9KTtcclxuXHJcblx0XHJcblx0JCgnLnpheV8yMDIwJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmRlbF9tYXRlcmlhbF96YXl2YTEsLnpheXZhX2RlbF9uYWYnLGZ1bmN0aW9uKCl7IGlmKCgkKHRoaXMpLmF0dHIoJ3JlYWRvbmx5Jyk9PXVuZGVmaW5lZCl8fCgoJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcpPT11bmRlZmluZWQpJiYoJCh0aGlzKS5pcygnLmNhbGVuZGFyX3pheScpKSkpIHsgICQoJy5wb2RfemF5JykuaGlkZSgpOyAkKCcuYWRkX3pheScpLnNob3coKTsgfSB9KTtcclxuXHRcclxuXHRcclxuXHR9LCAyMDAwICk7XHJcblx0XHJcblxyXG5cclxuLy/QstGL0LLQvtC00LjRgtGMINC/0L4g0LTQstC+0LnQvdC+0LzRgyDRidC10LvRh9C60YMg0L/QviDQv9C+0LvRjiDQtdCz0L4g0LzQsNC60YEg0LLQvtC30LzQvtC20L3QvtC1INC30L3QsNGH0LXQvdC40LUgLSDQt9Cw0Y/QstC60LAg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHRcclxuJCgnLm1hdF96eicpLm9uKFwiZGJsY2xpY2tcIiwnLmNvdW50X2FwcF9tYXRlcl8nLE15ZGJsY2xpY2spO1xyXG5cdFxyXG4vL9Cy0YvRhdC+0LQg0LjQtyDRgdC40YHRgtC10LzRiyDQv9GA0Lgg0LHQtdC30LTQtdC50YHRgtCy0LjQuFxyXG5pZGxlVGltZXIgPSBudWxsO1xyXG50aW1lclMgPSBudWxsO1x0XHJcbnRpbWVySD1udWxsO1x0XHJcbmlkbGVTdGF0ZSA9IGZhbHNlOyAvLyDRgdC+0YHRgtC+0Y/QvdC40LUg0L7RgtGB0YPRgtGB0YLQstC40Y9cclxuaWRsZVdhaXQgPSAzMCo2MCoxMDAwOyAvLyDQstGA0LXQvNGPINC+0LbQuNC00LDQvdC40Y8g0LIg0LzRgS4gKDEvMTAwMCDRgdC10LrRg9C90LTRiykgLSAzMCDQvNC40L3Rg9GCXHJcbmlkVGltZVN0YW1wZT0wO1x0XHJcbkV4aXRTeXN0ZW0oKTtcclxuLy/QstGL0YXQvtC0INC40Lcg0YHQuNGB0YLQtdC80Ysg0L/RgNC4INCx0LXQt9C00LXQudGB0YLQstC40LhcclxuXHRcclxuXHJcbi8vd2luZG93LmlzX3Nlc3Npb249J2VpY28uYXRzdW4ucnUnO1xyXG5cdFxyXG5cclxuLy/Rg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC90LDRgdGC0YDQvtC50LrQuFx0XHJcbmlkbGVUaW1lcnggPSBudWxsO1xyXG50aW1lclN4ID0gbnVsbDtcdFxyXG5pZGxlU3RhdGV4ID0gZmFsc2U7IC8vINGB0L7RgdGC0L7Rj9C90LjQtSDQvtGC0YHRg9GC0YHRgtCy0LjRj1xyXG5pZGxlV2FpdF9zdGFydCA9IDMwKjEwMDA7IC8vINCy0YDQtdC80Y8g0L7QsdC90L7QstC70LXQvdC40Y8gbm90aWZpY2F0aW9uIC0g0LrQsNC20LTRi9C1IDMwINGB0LXQutGD0L3QtCBcclxuaWRsZVdhaXRfc3RvcCA9IDUqNjAqMTAwMDsgLy8g0LLRgNC10LzRjyDQv9GA0L7RgdGC0L7RjyDQv9C+0YHQu9C1INC60L7RgtC+0YDQvtCz0L4g0YHQutGA0LjQv9GCINC90LDRh9C40L3QsNC10YIg0L7QsdGA0LDRidCw0YLRjNGB0Y8g0YDQtdC20LUg0Log0L7QsdC90L7QstC70LXQvdC40Y/QvCAtIDUg0LzQuNC90YPRglx0XHJcbmlkbGVXYWl0X2VuZCA9IDIqNjAqMTAwMDsgLy8g0LLRgNC10LzRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyBub3RpZmljYXRpb24g0L/QvtGB0LvQtSDQv9GA0L7RgdGC0L7RjyDRgdC40YHRgtC10LzRiyDQsiDRgtC10YfQtdC90LjQuCA1INC80LjQvdGD0YIgLSDQutCw0LbQtNGL0LUgMiDQvNC40L3Rg9GC0YtcclxuaWRsZVdhaXRfeWVzPWlkbGVXYWl0X3N0YXJ0O1x0XHJcbmlkVGltZVN0YW1wZXg9MDtcdFxyXG5Ob3RpZlN5c3RlbSgpO1xyXG4kKCc8YXVkaW8gaWQ9XCJjaGF0QXVkaW9cIj48c291cmNlIHNyYz1cIm5vdGlmeS5vZ2dcIiB0eXBlPVwiYXVkaW8vb2dnXCI+PHNvdXJjZSBzcmM9XCJub3RpZnkubXAzXCIgdHlwZT1cImF1ZGlvL21wZWdcIj48c291cmNlIHNyYz1cIm5vdGlmeS53YXZcIiB0eXBlPVwiYXVkaW8vd2F2XCI+PC9hdWRpbz4nKS5hcHBlbmRUbygnYm9keScpO1x0XHJcbi8v0YPQstC10LTQvtC80LvQtdC90LjRjyDQvdCw0YHRgtGA0L7QudC60LhcdFxyXG5cdFxyXG5ucHJvZ3Jlc3M9MDsgLy/Qv9C+0LrQsNC30YvQstCw0YLRjCDQt9Cw0LPRgNGD0LfRh9C40Log0LvQuNC90LjRjiDQv9GA0LggYWpheCDQt9Cw0L/RgNC+0YHQsNGFXHRcclxuXHJcbi8vMTAwMCDQvC7RgdC10LpcclxuXHRzZXRJbnRlcnZhbChmdW5jdGlvbigpeyAkdGhpcz1pbldpbmRvdyhcIi5FZmZlY3RiYm9cIik7ICBpZihpbldpbmRvdyhcIi5FZmZlY3RiYm9cIikubGVuZ3RoIT0wKSB7ICAgc2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHsgICR0aGlzLnJlbW92ZUNsYXNzKCd5ZXNfYmJzMScpOyB9LCA1MDAwICk7ICB9ICB9LCAxMDAwKTsgLy8gMTAwMCDQvC7RgdC10LpcclxuXHJcblxyXG5cclxuXHJcbnVwZGF0ZV9ibG9jaygpO1xyXG4kKCcubWVudTEnKS5vbihcImNsaWNrXCIsJy5jb3VudF9udW1iX3Njb3JlJyxzYXZlX3NvcGx5KTtcclxuXHJcblx0XHJcblx0XHJcblxyXG4vLyQoJy5ta3JfLC5zbWV0YTInKS5vbihcImNoYW5nZVwiLCcub3B0aW9uX21hdCcsb3B0aW9uX21hdCk7XHRcclxuXHJcbiQoJy5ta3JfJykub24oXCJjaGFuZ2VcIiwnLm9wdGlvbl9tYXQnLG9wdGlvbl9tYXQpO1x0XHRcclxuXHRcclxuJCgnLmJ1dHRvbl9hZGFfd2FsbCcpLm9uKFwiY2hhbmdlXCIsJy5vcHRpb25fbWF0MScsb3B0aW9uX21hdDEpO1x0XHJcblx0XHJcbi8vJCgnLnNjb3BlX3Njb3BlJykub24oXCJjaGFuZ2VcIiwnLm9wdGlvbl9zY29yZTEnLG9wdGlvbl9zY29yZTEpO1xyXG4kKCcuc3RhdHVzaXMnKS5vbihcImNoYW5nZVwiLCcudmFsbF9zdXBwbHknLCB2YWxsX3N1cHBseSk7XHRcclxuLy8kKFwiLmRyb3BzXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaXMpO1xyXG5cdFxyXG4kKCcubWVudV90b3AsLnNtZXRhMicpLm9uKFwiY2xpY2tcIiwnLmRyb3BzIGxpJyxkcm9wbGlzKTtcdFxyXG4vL9Cw0L3QuNC80LDRhtC40Y8g0LvQuNC90LXQtdC6XHJcblxyXG5cclxuXHJcbiQoJy5za2xhZGRfbmVpJykuYmluZCgnY2xpY2snLCBzbGlkZV9za2trKTtcdFx0XHJcblx0XHJcblx0XHJcbi8v0LLRi9C00LDRgtGMINC90LDQu9C40YfQvdGL0LUg0LjRgdC/0L7Qu9C90LjRgtC10LvRjiDQt9CwINGA0LDQsdC+0YLRg1xyXG4kKFwiLnBheV9iYWtzLC5qcy1wYXlfYmFrc190b3BcIikuYmluZCgnY2xpY2snLCBwYXlfaW1sZW1lbnRlcik7XHJcblxyXG4vL9Cy0YvQtNCw0YfQsCDQsNCy0LDQvdGB0LBcclxuJChcIi5wYXlfYXZhbnMsLmpzLXBheV9hdmFuc190b3BcIikuYmluZCgnY2xpY2snLCBwYXlfaW1sZW1lbnRlcl9hdmFucyk7XHJcblx0XHJcbi8v0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LTQsNC90L3Ri9C1INC/0L4g0LjRgdC/0L7Qu9C90LjRgtC10LvRjlx0XHJcbiQoXCIuaW1wX29wdGlvblwiKS5iaW5kKCdjbGljaycsIG9wdGlvbl9pbWxlbWVudGVyKTtcdFxyXG5cdFxyXG4vL9CY0LfQvNC10L3QuNGC0Ywg0LjRgdC/0L7Qu9C90LjRgtC10LvRjlx0XHJcbiQoXCIuZWRpdF9pbXBsZW1cIikuYmluZCgnY2xpY2snLCBvcHRpb25faW1sZW1lbnRlcjEpO1xyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINC40YHQv9C+0LvQvdC40YLQtdC70Y5cdFxyXG4kKFwiLmFkZF9faXNwb2xuXCIpLmJpbmQoJ2NsaWNrJywgYWRkX2ltbGVtZW50ZXIpO1x0XHJcblxyXG4vL9GD0LTQsNC70LjRgtGMINC00LjQsNC70L7Qs1xyXG4kKFwiLmRlbF9kaWFsb2dcIikuYmluZCgnY2xpY2snLCBkZWxfZGlhbG9nKTtcdFxyXG5cdFxyXG4vL9C+0YLQutGA0YvRgtGMINGD0LLQtdC00L7QvNC70LXQvdC40Y9cclxuLy8kKFwiLnZpZXdfX25vdFwiKS5iaW5kKCdjbGljaycsIHZpZXdfbm90aWZpY2F0aW9uKTtcclxuXHRcclxuLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC60L3QvtC/0LrRgyDQtNCwINC40LvQuCDQvdC10YIg0L/QviDRgNC10YjQtdC90LjRjiDRgdC70YPQttC10LHQvdC+0Lkg0LfQsNC/0LjRgdC60LhcclxuJChcIi5lZGl0XzEyMlwiKS5maW5kKCdpJykuYmluZCgnY2xpY2snLCBkZWNpc2lvbl9tZXNzKTtcdFx0XHJcblxyXG4vL9C90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINC00LAg0LjQu9C4INC90LXRgiDQv9C+INGA0LXRiNC10L3QuNGOINGB0LvRg9C20LXQsdC90L7QuSDQt9Cw0L/QuNGB0LrQuFxyXG4kKFwiLmVkaXRfMTIzXCIpLmZpbmQoJ2knKS5iaW5kKCdjbGljaycsIGRlY2lzaW9uX21lc3NfYXBwKTtcdFx0XHJcblx0XHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMINC90LDRgNGP0LRcclxuLy8kKFwiLmFkZF9uYXJcIikuYmluZCgnY2xpY2snLCBzYXZlX25hcnlhZCk7XHJcblxyXG5cclxuXHRcclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC40YLRjCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0L3QsCDRgdC60LvQsNC0XHJcbi8vJChcIi5hZGRfaW52b2ljZTFcIikuYmluZCgnY2xpY2snLCBhZGRfaW52b2ljZTEpO1xyXG5cdFxyXG5cdFxyXG5cdFxyXG5cclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMINC90LDQutC70LDQtNC90YPRjlxyXG4vLyQoXCIuYWRkX2ludm9pY2VzczFcIikuYmluZCgnY2xpY2snLCBzYXZlX2ludm9pY2VzczEpO1xyXG5cclxuLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC60L3QvtC/0LrRgyDRgdC+0YXRgNCw0L3QuNGC0Ywg0LfQsNGP0LLQutGDINC90LAg0LzQsNGC0LXRgNC40LDQu1xyXG4kKFwiLmpzLWFkZC1hcHBcIikuYmluZCgnY2xpY2snLCBzYXZlX3pheWF2YSk7XHJcblx0XHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0L/QvtC00L/QuNGB0LDRgtGMINC90LDRgNGP0LRcclxuJChcIi5qcy1wb2RfcHJvXCIpLmJpbmQoJ2NsaWNrJywgc2lnbl9uYXJ5YWQpO1xyXG5cclxuLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC60L3QvtC/0LrRgyDQv9C+0LTQv9C40YHQsNGC0Ywg0L3QsNGA0Y/QtFxyXG4kKFwiLnRyYW5zZmVyX2ludm9pY2Vzc1wiKS5iaW5kKCdjbGljaycsIHRha2VfaW52b2ljZSk7XHRcdFxyXG5cdFxyXG4vL9C90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINGB0L7Qs9C70LDRgdC+0LLQsNGC0Ywg0L3QsNGA0Y/QtFxyXG4kKFwiLnNvZ2xfcHJvXCIpLmJpbmQoJ2NsaWNrJywgc2lnbl9uYXJ5YWQpO1x0XHJcblx0XHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0YPRgtCy0LXRgNC00LjRgtGMINC90LDRgNGP0LRcclxuJChcIi5qcy11dF9uYXJcIikuYmluZCgnY2xpY2snLCBzZWFsX25hcnlhZCk7XHJcblxyXG4vL9C90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINGA0LDRgdC/0YDQvtCy0LXRgdGC0Lgg0L3QsNGA0Y/QtFxyXG4kKFwiLmpzLXJhc3BfbmFyXCIpLmJpbmQoJ2NsaWNrJywgZGlzYmFuZF9uYXJ5YWQpO1xyXG5cdFxyXG4vL9GB0L3Rj9GC0Ywg0L/QvtC00L/QuNGB0YxcclxuJChcIi5zaG9vdFwiKS5iaW5kKCdjbGljaycsIHNob290X25hcnlhZCk7XHRcclxuXHRcclxuJCgnI2xhbGFsYV9hZGRfZm9ybScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5lcnJvcl9mb3JtaScsIGZ1bmN0aW9uKCl7ICR0aGlzID0gJCh0aGlzKTsgc2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHskdGhpcy5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTsgIH0sIDIwMDAgKTsgfSk7XHRcclxuXHRcclxuLy/Rg9C00LDQu9C40YLRjCDQstGB0Y4g0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0Ywg0L/QviDQtNC+0LzRg1xyXG4kKFwiLmRlbF9fc2ViXCIpLmJpbmQoJ2NsaWNrJywgZGVsX3NlYmUpO1xyXG5cclxuLy/Qv9C+0LrQsNC30LDRgtGMINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtGMINGBINGB0YPQvNC80LDQvNC4XHJcbiQoXCIuaWNvbjE3XCIpLmJpbmQoJ2NsaWNrJywgc3VtbV92aWV3KTtcdFxyXG5cclxuXHJcbi8v0L/QvtC40YHQuiDQv9C+INGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHRcclxuJCgnLmljb24zJykuYmluZCgnY2xpY2snLCBzZWFyY2hfcHJpbWUpO1xyXG5cclxuLy/Qt9Cw0LrRgNGL0YLQuNC1INC/0L7QuNGB0LrQsCDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuCDQv9GA0Lgg0LrQu9C40LrQtSDQstC90LUg0LXQs9C+XHRcclxud2luZG93LnNob3dfc2VhcmNoPTA7XHRcclxuJChcImJvZHlcIikuY2xpY2soZnVuY3Rpb24oZSkge1xyXG5cdFxyXG4gICAgaWYoKCQoZS50YXJnZXQpLmNsb3Nlc3QoXCIuc2VhcmNoX3NlYlwiKS5sZW5ndGg9PTApJiYoJChlLnRhcmdldCkuY2xvc2VzdChcIi5pY29uM1wiKS5sZW5ndGg9PTApICl7XHJcblx0XHQvL2FsZXJ0KHdpbmRvdy5zaG93X3NlYXJjaCk7XHJcblx0XHQvL9C10YHQu9C4INCy0L3QtSDQv9C+0LjRgdC60LAg0Lgg0LrQvdC+0L/QutC4INC/0L7QuNGB0Log0YLQviDQtdGB0LvQuCDQvtGC0LrRgNGL0YIg0L/QvtC40YHQuiDQt9Cw0LrRgNGL0YLRjFxyXG5cdFx0aWYod2luZG93LnNob3dfc2VhcmNoPT0xKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly9hbGVydChcIiFcIik7XHJcblx0XHRcdFx0Ly8kKCcuZGVidWcnKS5lbXB0eSgpLmFwcGVuZCgkKGUudGFyZ2V0KS5hdHRyKFwiY2xhc3NcIikpO1xyXG5cdCQoJy5pY29uMS14eHgnKS5zaG93KCk7XHJcblx0JCgnLnNlYXJjaF9zZWInKS5oaWRlKCk7XHJcblx0JCgnLnNlYXJjaF9zZWInKS53aWR0aCgnNjBweCcpO1xyXG5cdFx0XHRcdHdpbmRvdy5zaG93X3NlYXJjaD0wO1xyXG5cdFx0XHRcdCAkKCd2YXIuaGlnaGxpZ2h0JykuZWFjaChmdW5jdGlvbigpeyAkKHRoaXMpLmFmdGVyKCQodGhpcykuaHRtbCgpKS5yZW1vdmUoKTsgfSk7XHJcblx0XHRcdH1cclxuXHR9XHJcblx0XHJcblx0LypcclxuXHRpZigoJChlLnRhcmdldCkuY2xvc2VzdChcIi5sb2xsX2Ryb3BcIikubGVuZ3RoPT0wKSAgKXtcclxuXHQgICAgICAgJCgnLmxvbGxfZHJvcCcpLmhpZGUoKTtcdFx0XHJcblx0fVx0XHJcblx0Ki9cclxuXHRcclxuXHRpZigoJChlLnRhcmdldCkuY2xvc2VzdChcIi5ub3RpX2Jsb2NrXCIpLmxlbmd0aD09MCkmJigkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLnZpZXdfX25vdFwiKS5sZW5ndGg9PTApICApe1xyXG5cdFx0aWYoICQoJy5ub3RpX2Jsb2NrJykuaXMoJzp2aXNpYmxlJykgKSB7XHJcblx0ICAgICAgICQoJy5ub3RpX2Jsb2NrJykucmVtb3ZlKCk7XHJcblx0ICAgICAgICQoJy52aWV3X19ub3QnKS5oaWRlKCk7ICQoJy5ub3RfbGknKS5maW5kKCdpJykuaGlkZSgpO1x0XHJcblx0XHR9XHJcblx0XHR9XHJcblxyXG5cdGlmKCgkKGUudGFyZ2V0KS5jbG9zZXN0KFwiLmhpc3RvcnlfYWN0X21hdFwiKS5sZW5ndGg9PTApJiYoJChlLnRhcmdldCkuY2xvc2VzdChcIi5lZGl0X3BhbmVsMTFfbWF0XCIpLmxlbmd0aD09MCkgICl7XHJcblx0XHRpZiggJCgnLmhpc3RvcnlfYWN0X21hdCcpLmlzKCc6dmlzaWJsZScpICkge1xyXG5cclxuXHRcdFx0JCgnLmhpc3RvcnlfYWN0X21hdCcpLmhpZGUoKTtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Ly9hbGVydChcIjFcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcblx0XHJcbn0pO1xyXG5cclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQutC4INC00LvRjyDQu9C40YHRgtCw0L3QuNGPINC/0L4g0L3QsNC50LTQtdC90L3Ri9C8INC80LXRgdGC0LDQvCDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFx0XHJcbiQoJy5yZXN1bHRfcycpLmZpbmQoJy5zZV9uZXh0JykuYmluZCgnY2xpY2snLCBzZWFyY2hfbmV4dCk7XHJcbiQoJy5yZXN1bHRfcycpLmZpbmQoJy5zZV9wcmV2JykuYmluZCgnY2xpY2snLCBzZWFyY2hfcHJldik7XHJcblx0XHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LjRgdC60LDRgtGMINC/0YDQuCDQstCy0L7QtNC1INGC0LXQutGB0YLQsCDQsiDQv9C+0LjRgdC60LVcdFxyXG4kKCcuc2VhcmNoX3NlYicpLmZpbmQoJ2knKS5iaW5kKCdjbGljaycsIHNlYXJjaF9wKTtcclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCBlbnRlciDQv9GA0Lgg0LLQstC+0LTQtVxyXG4kKFwiI3NlYXJjaF90ZXh0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGUpe1xyXG5cdCAgICAgXHQgICBpZihlLmtleUNvZGU9PTEzKXtcclxuXHQgICAgIFx0ICAgZG9zZWFyY2goKTtcclxuXHQgICAgIFx0ICAgfVxyXG5cdCAgICAgXHQgfSk7XHJcblx0XHJcblxyXG4kKFwiI290eml2X2FyZWFcIikua2V5cHJlc3MoZnVuY3Rpb24oZSl7XHJcblx0ICAgICBcdCAgIGlmKGUua2V5Q29kZT09MTMpe1xyXG5cdCAgICAgXHQgICBzZW5kX21lZWUoKTtcclxuXHQgICAgIFx0ICAgfVxyXG5cdCAgICAgXHQgfSk7XHRcclxuXHRcclxuXHJcbi8v0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60L7QtSDRgdGA0LDQsdCw0YLRi9Cy0LDQvdC40LUg0L/QvtC40YHQutCwINC/0YDQuCDQt9Cw0LTQtdGA0LbQutC4INCy0LLQvtC00LAgXHRcclxuJCgnI3NlYXJjaF90ZXh0Jykua2V5dXAoZnVuY3Rpb24oKXtcclxuICB2YXIgZDEgPSBuZXcgRGF0ZSgpO1xyXG4gIHRpbWVfa2V5dXAgPSBkMS5nZXRUaW1lKCk7XHJcbiAgaWYgKCQoJyNzZWFyY2hfdGV4dCcpLnZhbCgpIT10ZXJtKSAvLyDQv9GA0L7QstC10YDRj9C10LwsINC40LfQvNC10L3QuNC70LDRgdGMINC70Lgg0YHRgtGA0L7QutCwXHJcbiAgIGlmICgkKCcjc2VhcmNoX3RleHQnKS52YWwoKS5sZW5ndGg+PW1pbmxlbikgeyAvLyDQv9GA0L7QstC10YDRj9C10Lwg0LTQu9C40L3RgyDRgdGC0YDQvtC60LhcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgLy8g0LbQtNC10Lwg0YHQu9C10LTRg9GO0YnQtdCz0L4g0L3QsNC20LDRgtC40Y9cclxuICAgICB2YXIgZDIgPSBuZXcgRGF0ZSgpO1xyXG4gICAgIHRpbWVfc2VhcmNoID0gZDIuZ2V0VGltZSgpO1xyXG4gICAgIGlmICh0aW1lX3NlYXJjaC10aW1lX2tleXVwPj1rZXlpbnQpIC8vINC/0YDQvtCy0LXRgNGP0LXQvCDQuNC90YLQtdGA0LLQsNC7INC80LXQttC00YMg0L3QsNC20LDRgtC40Y/QvNC4XHJcbiAgICAgIGRvc2VhcmNoKCk7IC8vINC10YHQu9C4INCy0YHQtSDQsiDQv9C+0YDRj9C00LrQtSwg0L/RgNC40YHRgtGD0L/QsNC10Lwg0Log0L/QvtC40YHQutGDXHJcbiAgICB9LCBrZXlpbnQpOyBcclxuICAgfVxyXG4gICBlbHNlXHJcbiAgICAkKCcucmVzdWx0X3MnKS5oaWRlKCk7IC8vINC10YHQu9C4INGB0YLRgNC+0LrQsCDQutC+0YDQvtGC0LrQsNGPLCDRg9Cx0LjRgNCw0LXQvCDRgtC10LrRgdGCINC40LcgRElW0LAg0YEg0YDQtdC30YPQu9GM0YLQsNGC0L7QvCBcclxuIH0pO1x0XHRcclxuXHJcbi8v0L/QtdGA0LXRhdC+0LQg0L3QsCDRgdGC0LDRgNC40L3RgyDQvtGE0L7RgNC80LvQtdC90LjRjyDQvdCw0YDRj9C00Ysg0L/RgNC4INC60LvQuNC60LUg0L/QviDQuNC60L7QvdC60LVcdFxyXG4kKCcubWVudTEnKS5vbihcImNsaWNrXCIsJy5uYXJ5ZF9lbmQgaScsIGZ1bmN0aW9uKCl7ICQodGhpcykucHJldignYScpWzBdLmNsaWNrKCk7IH0pO1xyXG5cdFxyXG4kKCcubWVudTEnKS5vbihcImNsaWNrXCIsJy5tYXRlcmlhbF9lbmQgaScsIGZ1bmN0aW9uKCl7ICQodGhpcykucHJldignYScpWzBdLmNsaWNrKCk7IH0pO1x0XHRcclxuXHJcbiQoJy50ZXh0X2ZpbmVyeV9tZXNzYWdlXycpLmJpbmQoJ2NoYW5nZSBrZXl1cCBpbnB1dCBjbGljaycsIGZ1bmN0aW9uKCl7ICBzYXZlZGVmYXVsdCgkKHRoaXMpKTsgfSk7XHJcblxyXG4kKCcudGV4dF96YXl2YV9tZXNzYWdlXycpLmJpbmQoJ2NoYW5nZSBrZXl1cCBpbnB1dCBjbGljaycsIGZ1bmN0aW9uKCl7ICBzYXZlZGVmYXVsdF96YXkoJCh0aGlzKSk7IH0pO1x0XHJcblx0XHJcbi8v0L3QsNGB0YLRgNC+0LnQutC4INC00L7QvNCwIFx0XHJcbiQoXCIuaWNvbjJcIikuYmluZCgnY2xpY2snLCBob3VzZV9vcHRpb25zKTtcdFxyXG5cdFxyXG4vL9C90LDQttCw0YLRjCDQvdCwINC60L7Qu9C40YfQtdGB0YLQstC+INGA0LXQsNC70LjQt9Cw0YbQuNC4INGA0LDQsdC+0YLRiyDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG4kKFwiLmhpc3RfbXVcIikuYmluZCgnY2xpY2snLCBoaXN0X211X3ByaW1lKTtcdFxyXG5cdFxyXG5cclxuXHRcclxuXHQvL9C30LDQutGA0YvRgtGMINCy0YHQtSDRgNCw0LfQtNC10LvRi1xyXG4kKFwiLmNsb3NlX2FsbF9yXCIpLmJpbmQoJ2NsaWNrJywgY2xvc2VfYWxsX3JhemRlbCk7XHJcblxyXG5cdC8v0L7RgtC60YDRi9GC0LjQtSDQutCw0LvQtdC90LTQsNGA0Y8g0LIg0L7RhNC+0YDQvNC70LXQvdC40Lgg0L3QsNGA0Y/QtNCwINC/0L4g0LjQutC+0L3QutC1XHJcbiQoXCIuY2FsXzIyM1wiKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAgJCh0aGlzKS5wcmV2KCcuY2FsZW5kYXJfdCcpLnRyaWdnZXIoJ2ZvY3VzJyk7fSk7XHRcclxuXHRcclxuLy/QsNCy0YLQvtGA0LjQt9Cw0YbQuNGPXHJcbi8v0LDQstGC0L7RgNC40LfQsNGG0LjRj1xyXG4vL9Cw0LLRgtC+0YDQuNC30LDRhtC40Y9cclxuJChcIiNlbWFpbF9mb3JtaVwiKS5rZXl1cChmdW5jdGlvbigpe1xyXG5cclxuXHR2YXIgZW1haWwgPSAkKFwiI2VtYWlsX2Zvcm1pXCIpLnZhbCgpO1xyXG5cclxuICAgIGlmKGVtYWlsICE9ICcnKVxyXG4gICAge1xyXG5cclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHQkKFwiI2VtYWlsX2Zvcm1pXCIpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cdFxyXG5cdH1cdFxyXG5cdFxyXG5cdFxyXG59KTtcclxuXHJcbiQoXCIjcGFzc3dvcmRfZm9ybWksI2VtYWlsX2Zvcm1pXCIpLmtleXByZXNzKGZ1bmN0aW9uKGUpe1xyXG5cdCAgICAgXHQgICBpZihlLmtleUNvZGU9PTEzKXtcclxuXHRcdFx0XHQgICAkKCcjeWVzMScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblx0XHRcdCAgIH1cclxufSk7XHJcblx0XHJcbiQoXCIjcGFzc3dvcmRfZm9ybWlcIikua2V5dXAoZnVuY3Rpb24oKXtcclxuXHJcblx0aWYoKCQoXCIjcGFzc3dvcmRfZm9ybWlcIikudmFsKCk9PScnKXx8KCQoXCIjcGFzc3dvcmRfZm9ybWlcIikudmFsKCk9PTApKVxyXG5cdHtcclxuXHRcdCQoXCIjcGFzc3dvcmRfZm9ybWlcIikuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblxyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdCQoXCIjcGFzc3dvcmRfZm9ybWlcIikucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0fVxyXG5cdFxyXG59KTtcclxuXHJcbiQoJyN5ZXMxJykub24oIFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuICAvL9GB0LzQvtGC0YDQuNC8INC30LDQv9C+0LvQvdC10L3RiyDQu9C4INC+0LHRj9C30LDRgtC10LvRjNC90YvQtSDQv9C+0LvRj1xyXG4gICB2YXIgZW1haWwgPSAkKFwiI2VtYWlsX2Zvcm1pXCIpLnZhbCgpO1xyXG4gICB2YXIgZXJyID0gWzAsMF07XHJcbiAgXHJcbiAgICQoXCIjZW1haWxfZm9ybWlcIikucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICQoXCIjcGFzc3dvcmRfZm9ybWlcIikucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgXHJcbiAgICBpZihlbWFpbCAhPSAnJylcclxuICAgIHtcclxuXHRcdC8qXHJcbiAgICBpZihpc1ZhbGlkRW1haWxBZGRyZXNzKGVtYWlsKSlcclxuICAgIHsgIFxyXG5cdFxyXG5cdFxyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHRcdCQoXCIjZW1haWxfZm9ybWlcIikuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcblx0XHRlcnJbMF09MTtcclxuXHR9XHJcblx0Ki9cclxuXHR9IGVsc2VcclxuXHR7XHJcblx0XHQkKFwiI2VtYWlsX2Zvcm1pXCIpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cdFx0ZXJyWzBdPTE7XHRcdFxyXG5cdH1cclxuXHRpZigoJChcIiNwYXNzd29yZF9mb3JtaVwiKS52YWwoKT09JycpfHwoJChcIiNwYXNzd29yZF9mb3JtaVwiKS52YWwoKT09MCkpXHJcblx0e1xyXG5cdFx0JChcIiNwYXNzd29yZF9mb3JtaVwiKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuXHRcdGVyclsxXT0xO1xyXG5cdH1cclxuXHRcclxuXHRpZigoZXJyWzBdPT0wKSYmKGVyclsxXT09MCkpXHJcblx0e1xyXG5cdCAgICQoJyNwb2RfZm9ybScpLnN1Ym1pdCgpO1x0XHJcblx0fVxyXG5cdFxyXG5cclxuXHRcclxufSk7XHJcbi8v0LDQstGC0L7RgNC40LfQsNGG0LjRj1xyXG4vL9Cw0LLRgtC+0YDQuNC30LDRhtC40Y9cclxuLy/QsNCy0YLQvtGA0LjQt9Cw0YbQuNGPXHJcblxyXG5cdC8v0L/QtdGA0LXQudGC0Lgg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0Ywg0L/QviDQvtCx0YrQtdC60YLRgyDQv9C+INC60LvQuNC60YMg0LzQtdC90Y4g0YHQstC10YDRhdGDINGBINCy0YvQsdGA0LDQvdC90YvQvCDQvtCx0YrQtdC60YLQvtC8XHJcbiQoJy5tZW51MScpLm9uKCdjbGljaycsJy5tZW51M19wcmltZSBsaScsICBmdW5jdGlvbigpeyAkKHRoaXMpLmNoaWxkcmVuKCdhJylbMF0uY2xpY2soKTsgfSk7XHJcblx0XHJcbi8v0YHQstC10YDQvdGD0YLRjCDRgNCw0LfQstC10YDQvdGD0YLRjCDQu9C10LLQvtC1INC+0YHQvdC+0LLQvdC+0LUg0LzQtdC90Y5cclxuXHQvKlxyXG4kKCcuaGlkZV9sZWZ0LC5tb2JpbGUnKS5vbiggXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHR2YXIgZXN0PTA7XHJcblx0aWYoJChcIi5pc3NcIikuaXMoXCIuYmlnLC5zbWFsbFwiKSkgXHJcblx0e1xyXG5cdCAgIGVzdD0xO1x0XHJcblx0fVxyXG5cdGlmKGVzdD09MClcclxuXHR7XHJcblx0XHRpZiggJCgnLmxlZnRfbWVudScpLmlzKCc6dmlzaWJsZScpICkgXHJcblx0XHR7XHJcblx0XHRcdCQoXCIuaXNzXCIpLmFkZENsYXNzKCdzbWFsbCcpO1xyXG5cdFx0XHQkLmNvb2tpZSgnaXNzJywgJ3MnLCB7ZXhwaXJlczogNjAscGF0aDogJy8nfSk7XHJcblx0XHRcdFxyXG5cdFx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHRcdCQoXCIuaXNzXCIpLmFkZENsYXNzKCdiaWcnKTtcclxuXHRcdFx0JC5jb29raWUoJ2lzcycsICdiJywge2V4cGlyZXM6IDYwLHBhdGg6ICcvJ30pO1xyXG5cdFx0fVxyXG5cdFx0XHRcdFxyXG5cdH0gZWxzZVxyXG5cdHtcclxuXHQgIGlmKCQoXCIuaXNzXCIpLmlzKFwiLmJpZ1wiKSkgXHJcblx0ICB7XHJcblx0XHQgJChcIi5pc3NcIikucmVtb3ZlQ2xhc3MoJ2JpZycpO1xyXG5cdFx0ICQoXCIuaXNzXCIpLmFkZENsYXNzKCdzbWFsbCcpO1xyXG5cdFx0ICQuY29va2llKCdpc3MnLCAncycsIHtleHBpcmVzOiA2MCxwYXRoOiAnLyd9KTtcclxuXHQgIH0gZWxzZVxyXG5cdCAge1xyXG5cdFx0ICQoXCIuaXNzXCIpLnJlbW92ZUNsYXNzKCdzbWFsbCcpO1xyXG5cdFx0ICQoXCIuaXNzXCIpLmFkZENsYXNzKCdiaWcnKTsgIFxyXG5cdFx0ICQuY29va2llKCdpc3MnLCAnYicsIHtleHBpcmVzOiA2MCxwYXRoOiAnLyd9KTtcclxuXHQgIH1cclxuXHQgIFxyXG5cdH1cclxuXHJcbnNsX21lc3NhZ2Vfd2lkdGgoKTtcclxufSk7XHJcbiovXHJcbi8v0YHQstC10YDQvdGD0YLRjCDRgNCw0LfQstC10YDQvdGD0YLRjCDQu9C10LLQvtC1INC+0YHQvdC+0LLQvdC+0LUg0LzQtdC90Y5cclxuXHQkKCcuaGlkZV9sZWZ0LC5tb2JpbGUnKS5vbiggXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlc3Q9MDtcclxuXHRcdGlmKCQoXCIuaXNzXCIpLmlzKFwiLmJpZywuc21hbGxcIikpXHJcblx0XHR7XHJcblx0XHRcdGVzdD0xO1xyXG5cdFx0fVxyXG5cdFx0aWYoZXN0PT0wKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiggJCgnLmxlZnRfbWVudScpLmlzKCc6dmlzaWJsZScpIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoXCIuaXNzXCIpLmFkZENsYXNzKCdzbWFsbCcpO1xyXG5cdFx0XHRcdCQuY29va2llKCdpc3MnLCAncycsIHtleHBpcmVzOiA2MCxwYXRoOiAnLyd9KTtcclxuXHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly8kKFwiLmlzc1wiKS5yZW1vdmVDbGFzcygnc21hbGwnKTtcclxuXHRcdFx0XHQkKFwiLmlzc1wiKS5hZGRDbGFzcygnYmlnJyk7XHJcblx0XHRcdFx0JC5jb29raWUoJ2lzcycsICdiJywge2V4cGlyZXM6IDYwLHBhdGg6ICcvJ30pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHRcdGlmKCQoXCIuaXNzXCIpLmlzKFwiLmJpZ1wiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoXCIuaXNzXCIpLnJlbW92ZUNsYXNzKCdiaWcnKTtcclxuXHRcdFx0XHQkKFwiLmlzc1wiKS5hZGRDbGFzcygnc21hbGwnKTtcclxuXHRcdFx0XHQkLmNvb2tpZSgnaXNzJywgJ3MnLCB7ZXhwaXJlczogNjAscGF0aDogJy8nfSk7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JChcIi5pc3NcIikucmVtb3ZlQ2xhc3MoJ3NtYWxsJyk7XHJcblx0XHRcdFx0JChcIi5pc3NcIikuYWRkQ2xhc3MoJ2JpZycpO1xyXG5cdFx0XHRcdCQuY29va2llKCdpc3MnLCAnYicsIHtleHBpcmVzOiA2MCxwYXRoOiAnLyd9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH1cclxuXHJcblx0XHRzbF9tZXNzYWdlX3dpZHRoKCk7XHJcblx0fSk7XHJcblx0XHJcblx0XHJcbi8q0LrQu9C40Log0L3QsCDRgNCw0YHQutGA0YvQstCw0Y7RidC10LUg0LzQtdC90Y4g0LjRgdC/0L7Qu9C90LjRgtC10LvRjCovXHJcbiQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciBjb250YWluZXIgPSAkKFwiLnNlbGVjdF9ib3hcIik7XHJcbiAgICBpZiAoY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAvL9C60LvQuNC6INCy0L3QtSDQsdC70L7QutCwINC4INCy0LrQu9GO0YfQsNGO0YnQuNGFINCyINC90LXQs9C+INGN0LvQtdC80LXQvdGC0L7QslxyXG5cdCAgICAvLyQoXCIuZHJvcF9ib3hcIikuaGlkZSgpO1xyXG5cdFx0JChcIi5kcm9wX2JveFwiKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0XHQkKFwiLnNsY3RfYm94XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cdFxyXG5cdFxyXG5cdHZhciBjb250YWluZXIxID0gJChcIi5tZW51X3N1cHBseVwiKTtcclxuICAgIGlmIChjb250YWluZXIuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApe1xyXG4gICAgICAgIC8v0LrQu9C40Log0LLQvdC1INCx0LvQvtC60LAg0Lgg0LLQutC70Y7Rh9Cw0Y7RidC40YUg0LIg0L3QtdCz0L4g0Y3Qu9C10LzQtdC90YLQvtCyXHJcblx0ICAgXHRjb250YWluZXIxLmZpbmQoXCIuZHJvcHNcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cdFx0Y29udGFpbmVyMS5maW5kKFwiLmRyb3BzXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmVfbWVudV9zJyk7XHJcbiAgICB9XHJcblxyXG5cdHZhciBjb250YWluZXIyMiA9ICQoXCIubG9sbF9kcm9wXCIpO1xyXG4gICAgaWYgKGNvbnRhaW5lcjIyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAvL9C60LvQuNC6INCy0L3QtSDQsdC70L7QutCwINC4INCy0LrQu9GO0YfQsNGO0YnQuNGFINCyINC90LXQs9C+INGN0LvQtdC80LXQvdGC0L7QslxyXG5cdCAgIFx0Y29udGFpbmVyMjIuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cdFx0XHJcblx0XHRpZigkKCcucG9zdF9wJykudmFsKCk9PScnKVxyXG5cdFx0e1xyXG5cdFx0ICAgJCgnLmxvbGxfZGl2JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuXHRcdCAgICQoJy5iLWxvYWRpbmctbWVzc2FnZScpLmVtcHR5KCkuYXBwZW5kKCfQvdC10YIg0YHQstGP0LfQuCDRgSDQv9C+0YHRgtCw0LLRidC40LrQvtC8Jykuc2hvdygpO1xyXG5cdFx0fSBlbHNlXHJcblx0XHR7XHJcblx0XHQgICQoJ1tuYW1lPW51bWJlcl9zb3BseV0nKS52YWwoJCgnW25hbWU9bnVtYmVyX3NvcGx5XScpLmF0dHIoJ3ZhbF9vbGQnKSk7XHJcblx0XHRcdCQoXCIubG9sbF9kcm9wXCIpLmVtcHR5KCk7XHJcblx0XHRcdCQoJy5iLWxvYWRpbmctbWVzc2FnZScpLmhpZGUoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0XHJcbiAgICB9XHJcblxyXG5cclxuXHR2YXIgdG9fayA9ICQoXCIuZm9ybS1yYXRlLW9rMVwiKTtcclxuXHRpZiAodG9fay5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCl7XHJcblx0XHQvL9C60LvQuNC6INCy0L3QtSDQsdC70L7QutCwINC4INCy0LrQu9GO0YfQsNGO0YnQuNGFINCyINC90LXQs9C+INGN0LvQtdC80LXQvdGC0L7QslxyXG5cdFx0Ly90b19rLmZpbmQoXCIuZHJvcHNcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cdFx0dG9fay5yZW1vdmVDbGFzcygnc2hvdy1mb3JtLXJhdGUxJyk7XHJcblx0fVxyXG5cdFxyXG5cdFxyXG59KTtcclxud2luZG93LnNsY3RjbGlja19ib3gxID0gZnVuY3Rpb24oKSB7IFxyXG5cclxuXHJcbmlmKCQodGhpcykucGFyZW50cygnLnNlbGVjdF9ib3gnKS5maW5kKCdpbnB1dCcpLmF0dHIoJ3JlYWRvbmx5Jyk9PXVuZGVmaW5lZCkgeyAgXHJcblx0XHJcblx0ICBpZigkKHRoaXMpLmlzKFwiLmFjdGl2ZVwiKSkgXHJcblx0ICB7XHJcblx0XHQgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHQgLy8gJCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG5cdFx0ICAkKHRoaXMpLm5leHQoKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0ICB9IGVsc2VcclxuXHQgIHtcclxuXHRcdCAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdCAvLyAkKHRoaXMpLm5leHQoKS5zaG93KCk7XHJcblx0XHQgICQodGhpcykubmV4dCgpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgxKVwiKTtcclxuXHQgIH1cclxuXHJcblxyXG5cclxuXHJcbnZhciBlbGVtc3NfYm94PSQodGhpcykuYXR0cignZGF0YV9zcmMnKTtcdFxyXG5cclxuXHJcbiQoJy5zbGN0X2JveCcpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSBcclxue1xyXG4gICAgdmFyIGF0dD0kKHRoaXMpLmF0dHIoJ2RhdGFfc3JjJyk7XHJcblx0aWYgKCQodGhpcykuYXR0cignZGF0YV9zcmMnKSE9ZWxlbXNzX2JveCkgeyAgXHRcclxuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0Ly8kKHRoaXMpLm5leHQoKS5oaWRlKCk7XHJcblx0XHQkKHRoaXMpLm5leHQoKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0fSBcclxufSk7XHRcclxuXHRcclxufVxyXG5cdCBcclxuXHRcdCAgXHJcbi8vcmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5cclxuJCgnYm9keScpLm9uKFwiY2xpY2tcIiwnLnNsY3RfYm94JyxzbGN0Y2xpY2tfYm94MSk7XHJcbi8vJChcIi5zbGN0X2JveFwiKS5iaW5kKCdjbGljaycsIHNsY3RjbGlja19ib3gpO1xyXG5cclxuLy8kKFwiLnNsY3RfYm94XCIpLmJpbmQoJ2NsaWNrJywgc2xjdGNsaWNrX2JveDEpO1xyXG5cclxuXHJcbndpbmRvdy5kcm9wbGlfYm94MSA9IGZ1bmN0aW9uKCkgeyBcclxuXHJcbnZhciBhY3RpdmVfb2xkPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5zbGN0X2JveFwiKS5hdHRyKFwiZGF0YV9zcmNcIik7XHJcbnZhciBhY3RpdmVfbmV3PSQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuXHJcblx0XHRcdCAgdmFyIGY9JCh0aGlzKS5maW5kKFwiYVwiKS50ZXh0KCk7XHJcblx0XHRcdCAgdmFyIGU9JCh0aGlzKS5maW5kKFwiYVwiKS5hdHRyKFwicmVsXCIpO1xyXG5cdFx0XHQgIFxyXG5cdFx0XHQgIGlmKGFjdGl2ZV9vbGQhPWFjdGl2ZV9uZXcpXHJcblx0XHRcdCAge1xyXG5cdFx0XHQgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJzZWxfYWN0aXZlXCIpO1xyXG5cdFx0XHQgICAgJCh0aGlzKS5hZGRDbGFzcyhcInNlbF9hY3RpdmVcIik7XHJcblx0XHRcdCAgXHJcblx0XHRcdFxyXG5cdFx0XHQgIFxyXG5cdFx0XHQgLy8gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikuaHRtbChmKTtcclxuXHRcdFx0ICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RfYm94XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmVtcHR5KCkuYXBwZW5kKGYpO1xyXG5cdFx0XHQgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdF9ib3hcIikuYXR0cihcImRhdGFfc3JjXCIsZSk7XHJcblx0XHRcdCAgXHJcblx0XHRcdCAgLy8gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BfYm94XCIpLmhpZGUoKTtcclxuXHRcdFx0ICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BfYm94XCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTsgXHJcblx0XHRcdFx0ICBcclxuXHRcdFx0ICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiaW5wdXRcIikudmFsKGUpLmNoYW5nZSgpO1xyXG5cdFx0XHQgICBzYXZlZGVmYXVsdCgkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCJpbnB1dFwiKSk7XHQgIFxyXG5cdFx0XHQgIH0gZWxzZVxyXG5cdFx0XHQgIHtcclxuXHRcdFx0XHQgLy8kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuZHJvcF9ib3hcIikuaGlkZSgpO1xyXG5cdFx0XHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BfYm94XCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdFx0XHQgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RfYm94XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpOyBcclxuXHRcdFx0ICB9XHJcblx0XHQgIFxyXG5cclxufVxyXG5cclxuJCgnYm9keScpLm9uKFwiY2xpY2tcIiwnLmRyb3BfYm94IGxpJyxkcm9wbGlfYm94MSk7XHJcbi8vJChcIi5kcm9wX2JveFwiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGlfYm94KTtcclxuXHJcbi8vJChcIi5kcm9wX2JveFwiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGlfYm94MSk7XHJcblx0XHRcclxuXHRcclxuXHJcbi8v0LzQtdC90Y4g0LLRi9Cx0L7RgNCwINCz0L7RgNC+0LTQsC3QutCy0LDRgNGC0LDQu9CwINC4INC00L7QvNCwINCyINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHRcclxuLy/QvNC10L3RjiDQstGL0LHQvtGA0LAg0LPQvtGA0L7QtNCwLdC60LLQsNGA0YLQsNC70LAg0Lgg0LTQvtC80LAg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuLy/QvNC10L3RjiDQstGL0LHQvtGA0LAg0LPQvtGA0L7QtNCwLdC60LLQsNGA0YLQsNC70LAg0Lgg0LTQvtC80LAg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcdFxyXG5cclxuXHRcclxuXHRcclxuLyrQutC70LjQuiDQvdCwINGA0LDRgdC60YDRi9Cy0LDRjtGJ0LXQtSDQvNC10L3RjiDQutCy0LDRgNGC0LDQuyovXHJcblx0LypcclxuJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9ICQoXCIuc2VsZWN0XCIpO1xyXG4gICAgaWYgKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgLy/QutC70LjQuiDQstC90LUg0LHQu9C+0LrQsCDQuCDQstC60LvRjtGH0LDRjtGJ0LjRhSDQsiDQvdC10LPQviDRjdC70LXQvNC10L3RgtC+0LJcclxuXHQgICAgLy8kKFwiLmRyb3BcIikuaGlkZSgpO1xyXG5cdFx0JChcIi5kcm9wXCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdCQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIH1cclxufSk7XHJcbiovXHJcblx0JChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xyXG5cdFx0dmFyIGNvbnRhaW5lciA9ICQoXCIuc2VsZWN0XCIpO1xyXG5cdFx0dmFyIG9wZW5fY29udF9saXN0ID0gJChcIi5qcy1kcm9wLXNlYXJjaFwiKTtcclxuXHRcdHZhciBvcGVuX2NvbnRfbGlzdDEgPSAkKFwiLmpzLW9wZW4tc2VhcmNoXCIpO1xyXG5cdFx0LypcclxuICAgICAgICBpZiAoKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkmJighb3Blbl9jb250X2xpc3QuaXMoZS50YXJnZXQpKSYmKCFvcGVuX2NvbnRfbGlzdDEuaXMoZS50YXJnZXQpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0LrQu9C40Log0LLQvdC1INCx0LvQvtC60LAg0Lgg0LLQutC70Y7Rh9Cw0Y7RidC40YUg0LIg0L3QtdCz0L4g0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgICAgICAgICAgIC8vJChcIi5kcm9wXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgICAgICAgICAgICQoXCIuZHJvcFwiKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLnBhcmVudHMoJy5pbnB1dC1zZWFyY2gtbGlzdCcpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnb3Blbi1zZWFyY2gtYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICovXHJcblx0XHQvL2FsZXJ0KGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCk7XHJcblx0XHRpZiAoKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkmJighb3Blbl9jb250X2xpc3QuaXMoZS50YXJnZXQpKSYmKCFvcGVuX2NvbnRfbGlzdDEuaXMoZS50YXJnZXQpKSlcclxuXHRcdHtcclxuXHRcdFx0Ly/QutC70LjQuiDQstC90LUg0LHQu9C+0LrQsCDQuCDQstC60LvRjtGH0LDRjtGJ0LjRhSDQsiDQvdC10LPQviDRjdC70LXQvNC10L3RgtC+0LJcclxuXHRcdFx0Ly8kKFwiLmRyb3BcIikuaGlkZSgpO1xyXG5cdFx0XHQvL2FsZXJ0KFwiIVwiKTtcclxuXHRcdFx0JChcIi5kcm9wXCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdFx0JChcIi5kcm9wLXJhZGlvXCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdFx0JChcIi5zbGN0XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHQkKFwiLmRyb3BcIikucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuXHRcdFx0JChcIi5kcm9wLXJhZGlvXCIpLnBhcmVudHMoJy5pbnB1dC1zZWFyY2gtbGlzdCcpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnb3Blbi1zZWFyY2gtYWN0aXZlJyk7XHJcblx0XHR9XHJcblxyXG5cclxuXHR9KTtcclxuXHJcblxyXG53aW5kb3cuc2xjdGNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdGlmKCQodGhpcykucGFyZW50cygnLnNlbGVjdCcpLmZpbmQoJ2lucHV0JykuYXR0cigncmVhZG9ubHknKT09dW5kZWZpbmVkKSB7XHJcblxyXG5cdFx0aWYoJCh0aGlzKS5pcyhcIi5hY3RpdmVcIikpXHJcblx0XHR7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdC8vJCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG5cdFx0XHQkKHRoaXMpLm5leHQoKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLnJlbW92ZUNsYXNzKCdhY3RpdmUxX2luXzIwMTh4Jyk7XHJcblx0XHR9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0Ly8kKHRoaXMpLm5leHQoKS5zaG93KCk7XHJcblx0XHRcdCQodGhpcykubmV4dCgpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgxKVwiKTtcclxuXHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLmFkZENsYXNzKCdhY3RpdmUxX2luXzIwMTh4Jyk7XHJcblx0XHR9XHJcblxyXG5cclxuXHJcblxyXG5cdFx0dmFyIGVsZW1zcz0kKHRoaXMpLmF0dHIoJ2xpc3RfbnVtYmVyJyk7XHJcbi8vdmFyIGVsZW1zczE9JCh0aGlzKTtcclxuXHJcblx0XHQkKCcuc2xjdCcpLm5vdCh0aGlzKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIGF0dD0kKHRoaXMpLmF0dHIoJ2RhdGFfc3JjJyk7XHJcblx0XHRcdC8v0LfQsNC60YDRi9GC0Ywg0LLRgdC1INC60YDQvtC80LUg0YHQtdCx0Y9cclxuXHRcdFx0Ly9pZigkKHRoaXMpLm5vdChlbGVtc3MxKSlcclxuXHRcdFx0Ly9cdHtcclxuXHJcblx0XHRcdC8vaWYgKCQodGhpcykuYXR0cignbGlzdF9udW1iZXInKSE9ZWxlbXNzKSB7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdC8vJCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG5cdFx0XHQkKHRoaXMpLm5leHQoKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLnJlbW92ZUNsYXNzKCdhY3RpdmUxX2luXzIwMTh4Jyk7XHJcblx0XHRcdC8vfVxyXG5cdFx0fSk7XHJcblxyXG4vL9GB0LrRgNGL0LLQsNC10Lwg0LLRgdC1INGB0L/QuNGB0LrQuCDQv9C+INC/0L7QuNGB0LrRg1xyXG5cdFx0JCgnLmRyb3Atc2VhcmNoJykuZWFjaChmdW5jdGlvbihpLGVsZW0pXHJcblx0XHR7XHJcblx0XHRcdCQodGhpcykucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuXHRcdFx0JCh0aGlzKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuLypcclxuXHQgIGlmKCQodGhpcykuaXMoXCIuYWN0aXZlXCIpKSBcclxuXHQgIHtcclxuXHRcdCAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdCAgLy8kKHRoaXMpLm5leHQoKS5oaWRlKCk7XHJcblx0XHQgICQodGhpcykubmV4dCgpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHQgIH0gZWxzZVxyXG5cdCAge1xyXG5cdFx0ICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0ICAvLyQodGhpcykubmV4dCgpLnNob3coKTtcclxuXHRcdCAgJCh0aGlzKS5uZXh0KCkuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDEpXCIpO1xyXG5cdCAgfVxyXG5cclxuXHJcblxyXG5cclxudmFyIGVsZW1zcz0kKHRoaXMpLmF0dHIoJ2xpc3RfbnVtYmVyJyk7XHRcclxuXHJcblxyXG4kKCcuc2xjdCcpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSBcclxue1xyXG4gICAgdmFyIGF0dD0kKHRoaXMpLmF0dHIoJ2RhdGFfc3JjJyk7XHJcblx0Ly/Qt9Cw0LrRgNGL0YLRjCDQstGB0LUg0LrRgNC+0LzQtSDRgdC10LHRj1xyXG5cdGlmICgkKHRoaXMpLmF0dHIoJ2xpc3RfbnVtYmVyJykhPWVsZW1zcykgeyAgXHRcclxuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0Ly8kKHRoaXMpLm5leHQoKS5oaWRlKCk7XHJcblx0XHQkKHRoaXMpLm5leHQoKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcblx0fSBcclxufSk7XHRcclxuXHRcclxuXHRcclxuXHQgXHJcblx0XHQgIFxyXG5yZXR1cm4gZmFsc2U7XHJcbiovXHJcbn1cclxuXHJcbiQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGRyb3BsaXMoKSB7IFxyXG4vL2FsZXJ0KFwiIVwiKTtcclxudmFyIGFjdGl2ZV9vbGQ9JCh0aGlzKS5wYXJlbnQoKS5hdHRyKFwiZGF0YV9zcmNcIik7XHJcbnZhciBhY3RpdmVfbmV3PSQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuXHRcdFxyXG5cclxuXHRcdFx0IC8vIHZhciBmPSQodGhpcykuZmluZChcImFcIikudGV4dCgpO1xyXG5cdFx0XHQgdmFyIGU9JCh0aGlzKS5maW5kKFwiYVwiKS5hdHRyKFwicmVsXCIpO1xyXG5cdFx0XHQgIFxyXG5cdGlmKCEkKHRoaXMpLnBhcmVudCgpLmlzKFwiLm5vX2FjdGl2ZVwiKSlcclxuXHRcdHtcclxuXHRcclxuXHRcclxuXHRcdFx0ICBpZihhY3RpdmVfb2xkIT1hY3RpdmVfbmV3KVxyXG5cdFx0XHQgIHtcclxuXHRcdFx0ICAgICQodGhpcykucGFyZW50KCkuZmluZChcImxpXCIpLnJlbW92ZUNsYXNzKFwic2VsX2FjdGl2ZV9zc3NcIik7XHJcblx0XHRcdCAgICAkKHRoaXMpLmFkZENsYXNzKFwic2VsX2FjdGl2ZV9zc3NcIik7XHJcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5hdHRyKFwiZGF0YV9zcmNcIixlKTsgIFxyXG5cdFx0XHQgIFxyXG5cdFx0XHRcclxuXHRcdFx0ICBcclxuXHRcdFx0ICAgLy8gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikuaHRtbChmKTtcclxuXHRcdFx0ICAgLy8kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5lbXB0eSgpLmFwcGVuZChmKTtcclxuXHRcdFx0ICAgLy8gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RcIikuYXR0cihcImRhdGFfc3JjXCIsZSk7XHJcblx0XHRcdCAgXHJcblx0XHRcdCAgIC8vJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuaGlkZSgpO1xyXG5cdFx0XHQgICAvLyQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5kcm9wXCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdFx0ICBcclxuXHRcdFx0ICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiaW5wdXRcIikudmFsKGUpLmNoYW5nZSgpO1xyXG5cdFx0XHQgIH0gZWxzZVxyXG5cdFx0XHQgIHtcclxuXHRcdFx0XHQgLy8kKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuZHJvcFwiKS5oaWRlKCk7XHJcblx0XHRcdFx0IC8vJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cdFx0XHRcdCAgXHJcblx0XHRcdFx0IC8vJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7IFxyXG5cdFx0XHQgIH1cclxuXHRcdH0gZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiaW5wdXRcIikudmFsKGUpLmNoYW5nZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblxyXG59XHRcclxuXHRcclxud2luZG93LmRyb3BsaSA9IGZ1bmN0aW9uKCkgeyBcclxuXHJcbnZhciBhY3RpdmVfb2xkPSQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5zbGN0XCIpLmF0dHIoXCJkYXRhX3NyY1wiKTtcclxudmFyIGFjdGl2ZV9uZXc9JCh0aGlzKS5maW5kKFwiYVwiKS5hdHRyKFwicmVsXCIpO1xyXG5cclxuXHRcdFx0ICB2YXIgZj0kKHRoaXMpLmZpbmQoXCJhXCIpLnRleHQoKTtcclxuXHRcdFx0ICB2YXIgZT0kKHRoaXMpLmZpbmQoXCJhXCIpLmF0dHIoXCJyZWxcIik7XHJcblx0XHRcdCAgXHJcblx0XHRcdCAgaWYoYWN0aXZlX29sZCE9YWN0aXZlX25ldylcclxuXHRcdFx0ICB7XHJcblx0XHRcdCAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInNlbF9hY3RpdmVcIik7XHJcblx0XHRcdCAgICAkKHRoaXMpLmFkZENsYXNzKFwic2VsX2FjdGl2ZVwiKTtcclxuXHRcdFx0ICBcclxuXHRcdFx0XHJcblx0XHRcdCAgXHJcblx0XHRcdCAvLyAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5odG1sKGYpO1xyXG5cdFx0XHQgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5lbXB0eSgpLmFwcGVuZChmKTtcclxuXHRcdFx0ICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLnNsY3RcIikuYXR0cihcImRhdGFfc3JjXCIsZSk7XHJcblx0XHRcdFx0ICAkKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5hZGRDbGFzcygnYWN0aXZlX2luXzIwMTh4Jyk7XHJcblx0XHRcdCAgIC8vJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuaGlkZSgpO1xyXG5cdFx0XHRcdCAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiLmRyb3BcIikuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG5cdFx0XHQgIFxyXG5cdFx0XHQgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoZSkuY2hhbmdlKCk7XHJcblx0XHRcdCAgfSBlbHNlXHJcblx0XHRcdCAge1xyXG5cdFx0XHRcdCAvLyQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5kcm9wXCIpLmhpZGUoKTtcclxuXHRcdFx0XHQgICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5kcm9wXCIpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuXHRcdFx0XHQgIFxyXG5cdFx0XHRcdCAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIuc2xjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTsgXHJcblx0XHRcdCAgfVxyXG5cdFx0ICBcclxuXHJcbn1cclxuJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcblxyXG5cclxuXHJcblx0XHJcbi8vJCgnI3NhdmUnKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXZlKTtcdFxyXG5cclxudmFyIGxpc3RfbnVtYmVyXHQ9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBhY3RpdmVfbmV3PSQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuXHRpZihhY3RpdmVfbmV3PT0yKVxyXG5cdFx0e1xyXG5cdFx0XHQkKFwiI2RhdGVfdGFibGVcIikuc2hvdygpOyBcclxuXHRcdH1cclxufVxyXG5cclxuXHJcblxyXG5cdC8q0LrQu9C40Log0L3QsCDRgNCw0YHQutGA0YvQstCw0Y7RidC10LUg0LzQtdC90Y4g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQvdCw0LHQttC10L3QuNC1Ki9cclxuXHR2YXIgY2hhbmdlc29ydDJ3ID0gZnVuY3Rpb24oKSB7XHJcblx0XHQkLmNvb2tpZShcInN1XzJ3XCIsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHRcdENvb2tpZUxpc3QoXCJzdV8yd1wiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdFx0JCgnLmpzLXJlbG9hZC10b3AnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXInKTtcclxuXHRcdCQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblxyXG5cclxuXHRcdGlmKCQodGhpcykudmFsKCk9PTIpXHJcblx0XHR7XHJcblx0XHRcdC8v0L7RgtC60YDRi9Cy0LDQtdC8INC+0LrQvdC+INGBINC60LDQu9C10L3QtNCw0YDQtdC8XHJcblx0XHRcdC8qXHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fY2FsZW5kYXIucGhwJyxcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZ09uU2hvdzogZnVuY3Rpb24oZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckNsb3NlOiBmdW5jdGlvbihkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgKi9cclxuXHRcdFx0JChcIiNkYXRlX3RhYmxlXCIpLnNob3coKTtcclxuXHRcdFx0Ly8kKFwiI2RhdGVfdGFibGVcIikuZm9jdXMoKTtcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHQkKCcjc29ydDJ3JykuYmluZCgnY2hhbmdlJywgY2hhbmdlc29ydDJ3KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8q0LrQu9C40Log0L3QsCDRgNCw0YHQutGA0YvQstCw0Y7RidC10LUg0LzQtdC90Y4g0YHQvtGA0YLQuNGA0L7QstC60LAg0YHQvdCw0LHQttC10L3QuNC1Ki9cclxudmFyIGNoYW5nZXNvcnQyID0gZnVuY3Rpb24oKSB7ICBcclxuJC5jb29raWUoXCJzdV8yXCIsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuQ29va2llTGlzdChcInN1XzJcIiwkKHRoaXMpLnZhbCgpLCdhZGQnKTtcclxuXHQkKCcuanMtcmVsb2FkLXRvcCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUtcicpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblxyXG5cclxuaWYoJCh0aGlzKS52YWwoKT09Milcclxue1xyXG5cdC8v0L7RgtC60YDRi9Cy0LDQtdC8INC+0LrQvdC+INGBINC60LDQu9C10L3QtNCw0YDQtdC8XHJcblx0LypcclxuXHQkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fY2FsZW5kYXIucGhwJyxcclxuICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24oZGF0YSwgZWwpIHtcclxuICAgICAgICAvL2FsZXJ0KCdhZnRlckxvYWRpbmcnKTtcclxuICAgIH0sXHJcbiAgICBhZnRlckxvYWRpbmdPblNob3c6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nT25TaG93Jyk7XHJcbiAgICB9LFxyXG5cdGFmdGVyQ2xvc2U6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG5cdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG4gICovXHJcblx0JChcIiNkYXRlX3RhYmxlXCIpLnNob3coKTsgXHJcblx0Ly8kKFwiI2RhdGVfdGFibGVcIikuZm9jdXMoKTtcclxufVxyXG5cclxufTtcclxuJCgnI3NvcnQyJykuYmluZCgnY2hhbmdlJywgY2hhbmdlc29ydDIpO1x0XHJcblx0XHJcblx0XHJcbiQoJ1tsaXN0X251bWJlcj10Ml0nKS5uZXh0KCkuZmluZCgnbGknKS5iaW5kKCdjbGljaycsIGxpc3RfbnVtYmVyKTtcdFx0XHJcblxyXG52YXIgY2hhbmdlc29ydDEgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcInN1XzFcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwic3VfMVwiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCgnLmpzLXJlbG9hZC10b3AnKS5hZGRDbGFzcygnYWN0aXZlLXInKTtcclxuXHJcblxyXG59O1xyXG4kKCcjc29ydDEnKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2Vzb3J0MSk7XHRcclxuXHJcblxyXG5cdFxyXG52YXIgY2hhbmdlc29ydF9zdG9jazMgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcInN1X3N0XzNcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwic3Vfc3RfM1wiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCgnLmpzLXJlbG9hZC10b3AnKS5hZGRDbGFzcygnYWN0aXZlLXInKTtcclxuXHJcbn07XHJcbiQoJyNzb3J0X3N0b2NrMycpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNvcnRfc3RvY2szKTtcdFx0XHJcblx0XHJcblxyXG52YXIgY2hhbmdlc29ydF9zdG9jazEgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcInN1X3N0XzFcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwic3Vfc3RfMVwiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCgnLmpzLXJlbG9hZC10b3AnKS5hZGRDbGFzcygnYWN0aXZlLXInKTtcclxuXHJcbn07XHJcbiQoJyNzb3J0X3N0b2NrMScpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNvcnRfc3RvY2sxKTtcdFxyXG5cdFxyXG52YXIgY2hhbmdlc29ydF9zdG9jazJfXz0gZnVuY3Rpb24oKSB7ICBcclxuXHQkLmNvb2tpZShcInN1X3N0XzJcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cdCQodGhpcykucHJldigpLnZhbCgnJyk7XHJcblxyXG5cdCQoJy5qcy0tc29ydCcpLnJlbW92ZUNsYXNzKCdncmVlaV9pbnB1dCcpO1xyXG5cdCQoJy5qcy0tc29ydCcpLmZpbmQoJ2lucHV0JykucmVtb3ZlQXR0cigncmVhZG9ubHknKTtcclxuXHJcblxyXG5cclxuXHQkKCcuanMtcmVsb2FkLXRvcCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUtcicpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCh0aGlzKS5oaWRlKCk7XHRcclxufVxyXG5cdHZhciBjaGFuZ2Vzb3J0X3N0b2NrMnc9IGZ1bmN0aW9uKCkge1xyXG5cdFx0JC5jb29raWUoXCJzdV9zdF8yd1wiLCBudWxsLCB7cGF0aDonLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcblx0XHRDb29raWVMaXN0KFwic3Vfc3RfMndcIiwkKHRoaXMpLnZhbCgpLCdhZGQnKTtcclxuXHRcdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0XHQkKCcuanMtcmVsb2FkLXRvcCcpLmFkZENsYXNzKCdhY3RpdmUtcicpO1xyXG5cdFx0aWYoJCh0aGlzKS52YWwoKSE9JycpXHJcblx0XHR7XHJcblx0XHRcdCQodGhpcykubmV4dCgpLnNob3coKTtcclxuXHRcdFx0Ly/RgdC60YDRi9GC0Ywg0LTRgNGD0LPQuNC1INGN0LvQtdC80LXQvdGC0Ysg0L/QvtC40YHQutCwXHJcblx0XHRcdC8vJCgnLmpzLS1zb3J0JykuYWRkQ2xhc3MoJ2dyZWVpX2lucHV0Jyk7XHJcblx0XHRcdC8vJCgnLmpzLS1zb3J0JykuZmluZCgnaW5wdXQnKS5wcm9wKCdyZWFkb25seScsdHJ1ZSk7XHJcblxyXG5cdFx0fWVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG5cdFx0XHQvL9C/0L7QutCw0LfQsNGC0Ywg0LTRgNGD0LPQuNC1INGN0LvQtdC80LXQvdGC0Ysg0L/QvtC40YHQutCwXHJcblx0XHRcdC8vJCgnLmpzLS1zb3J0JykucmVtb3ZlQ2xhc3MoJ2dyZWVpX2lucHV0Jyk7XHJcblx0XHRcdC8vJCgnLmpzLS1zb3J0JykuZmluZCgnaW5wdXQnKS5yZW1vdmVBdHRyKCdyZWFkb25seScpO1xyXG5cclxuXHRcdH1cclxuXHJcblxyXG5cdH07XHJcbnZhciBjaGFuZ2Vzb3J0X3N0b2NrMj0gZnVuY3Rpb24oKSB7ICBcclxuJC5jb29raWUoXCJzdV9zdF8yXCIsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuQ29va2llTGlzdChcInN1X3N0XzJcIiwkKHRoaXMpLnZhbCgpLCdhZGQnKTtcclxuXHQkKCcuanMtcmVsb2FkLXRvcCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUtcicpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0aWYoJCh0aGlzKS52YWwoKSE9JycpXHJcblx0e1xyXG5cdFx0JCh0aGlzKS5uZXh0KCkuc2hvdygpO1xyXG5cdFx0Ly/RgdC60YDRi9GC0Ywg0LTRgNGD0LPQuNC1INGN0LvQtdC80LXQvdGC0Ysg0L/QvtC40YHQutCwXHJcblx0XHQkKCcuanMtLXNvcnQnKS5hZGRDbGFzcygnZ3JlZWlfaW5wdXQnKTtcclxuXHRcdCQoJy5qcy0tc29ydCcpLmZpbmQoJ2lucHV0JykucHJvcCgncmVhZG9ubHknLHRydWUpO1xyXG5cclxuXHR9ZWxzZVxyXG5cdHtcclxuXHRcdCQodGhpcykubmV4dCgpLmhpZGUoKTtcclxuXHRcdC8v0L/QvtC60LDQt9Cw0YLRjCDQtNGA0YPQs9C40LUg0Y3Qu9C10LzQtdC90YLRiyDQv9C+0LjRgdC60LBcclxuXHRcdCQoJy5qcy0tc29ydCcpLnJlbW92ZUNsYXNzKCdncmVlaV9pbnB1dCcpO1xyXG5cdFx0JCgnLmpzLS1zb3J0JykuZmluZCgnaW5wdXQnKS5yZW1vdmVBdHRyKCdyZWFkb25seScpO1xyXG5cclxuXHR9XHJcblxyXG5cclxufTtcclxuJCgnLm5hbWVfc3RvY2tfc2VhcmNoX2lucHV0JykuYmluZCgnY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrJywgY2hhbmdlc29ydF9zdG9jazIpO1xyXG5cclxuXHQkKCcubmFtZV9zdG9ja19zZWFyY2hfaW5wdXR3JykuYmluZCgnY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrJywgY2hhbmdlc29ydF9zdG9jazJ3KTtcclxuXHJcblx0JCgnLmRlbGxfc3RvY2tfc2VhcmNoJykuYmluZCgnY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrJywgY2hhbmdlc29ydF9zdG9jazJfXyk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLypcclxudmFyIHZhbGxfYmFza2V0MiA9IGZ1bmN0aW9uKCkgeyAgXHJcblx0dmFyIGVsX3Y9JCh0aGlzKS52YWwoKTtcclxuXHQvL2FsZXJ0KGVsX3YpO1xyXG5cdGlmKGVsX3Y9PTEpXHJcblx0e1x0XHJcblx0XHQvL9GB0L7RhdGA0LDQvdC40YLRjCDRgtC10LrRg9GJ0LjQuVxyXG5cdFx0c2F2ZV9zb3BseSgpO1xyXG5cdH1cclxuXHRpZihlbF92PT0yKVxyXG5cdHtcclxuXHRcdC8v0LfQsNC60YDRi9GC0Ywg0YLQtdC60YPRidC40LlcclxuXHRcdHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHRcdFxyXG5cdFx0JC5jb29raWUoXCJjdXJyZW50X3N1cHBseV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cdFx0JC5jb29raWUoXCJiYXNrZXRfc2NvcmVfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHRcdCQuY29va2llKFwiYmFza2V0X3N1cHBseV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cdFx0XHJcblx0XHQkKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5udW1iZXJfc2NvcmUnKS5lbXB0eSgpO1xyXG5cdFx0JCgnLmN1cnJlbnRfc2NvcmUnKS5maW5kKCcuY291bnRfbnVtYl9zY29yZScpLmVtcHR5KCk7XHJcblx0XHQkKCcuY3VycmVudF9zY29yZScpLmhpZGUoKTtcclxuXHRcdCQoJy5tb3JlX3N1cHBseTInKS5oaWRlKCk7XHJcblx0XHRcclxuXHRcdCQoJy5jaGVjaGVyX3N1cHBseScpLnJlbW92ZUNsYXNzKCdjaGVjaGVyX3N1cHBseScpO1xyXG5cdFx0JCgnLnNjb3JlX2FjdGl2ZScpLnJlbW92ZUNsYXNzKCdzY29yZV9hY3RpdmUnKTtcclxuXHR9XHRcclxuXHRpZihlbF92PT0zKVxyXG5cdHtcclxuXHQgIC8v0L7RgtC60YDRi9GC0YxcclxuXHRcdHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHRcclxuXHRcdHZhciBjb29raWVfZmxhZ19jdXJyZW50ID0gJC5jb29raWUoJ2N1cnJlbnRfc3VwcGx5XycraXUpO1xyXG5cdC8vYWxlcnQoY29va2llX25ldyk7XHJcblx0aWYoY29va2llX2ZsYWdfY3VycmVudCE9bnVsbCkgXHJcblx0e1x0XHJcblx0XHRpZF9zb3BseT1jb29raWVfZmxhZ19jdXJyZW50O1xyXG5cdFxyXG5cdFx0XHJcblx0XHRcclxuXHRcdCAkLmFyY3RpY21vZGFsKHtcclxuICAgIHR5cGU6ICdhamF4JyxcclxuICAgIHVybDogJ2Zvcm1zL2Zvcm1fdXBkYXRlX3NvcGx5LnBocD9pZD0nK2lkX3NvcGx5LFxyXG5cdFx0XHQgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdFx0IC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHRcdCAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuXHRcdFx0XHQgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdFx0IH0sXHJcblx0XHRcdCBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdCAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuXHRcdFx0XHQgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdFx0ICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG5cdFx0XHRcdCAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG5cdFx0XHQgfSxcclxuXHRcdFx0IGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcblx0XHRcdFx0IGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdFx0IGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdFx0IH1cclxuXHRcdFx0XHQgQm9keVNjcm9vbCgpO1xyXG5cdFx0XHQgfVxyXG5cclxuICB9KTtcdFxyXG5cdH1cclxuXHR9XHJcbn07XHRcclxuKi9cclxuXHRcclxuXHQvKlxyXG52YXIgdmFsbF9iYXNrZXQgPSBmdW5jdGlvbigpIHsgIFxyXG5cdHZhciBlbF92PSQodGhpcykudmFsKCk7XHJcblx0Ly9hbGVydChlbF92KTtcclxuXHRpZihlbF92PT0xKVxyXG5cdHtcclxuXHQgICAgLy/QtNC+0LHQsNCy0LjRgtGMINC90L7QstGL0Lkg0YHRh9C10YJcclxuXHRcdGFkZF9zb3BseSgpO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdGlmKGVsX3Y9PTIpXHJcblx0e1xyXG5cdFx0Ly/QntGH0LjRgdGC0LjRgtGMINC60L7RgNC30LjQvdGDXHJcblx0XHRlcmFzZV9iYXNrZXQoKTtcclxuXHR9XHJcblx0XHJcblx0XHJcblx0Ly8kKCdbcmVsX3N0YXR1cz0nKyQodGhpcykuYXR0cigncmVsJykrJ10nKS5oaWRlKCk7XHJcblx0Ly92YXIgZGF0YSA9J3VybD0nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycmaWQ9JyskKHRoaXMpLmF0dHIoJ3JlbCcpKycmdmFsPScrZWxfdjtcclxuXHQvL0FqYXhDbGllbnQoJ3N1cHBseScsJ3N0YXR1c193b3JrJywnR0VUJyxkYXRhLCdBZnRlcnZhbGxfc3VwcGx5JywkKHRoaXMpLmF0dHIoJ3JlbCcpLDApO1x0XHRcdFxyXG59O1x0XHJcbiovXHJcbi8vJCgnLnZhbGxfYmFza2V0JykuYmluZCgnY2hhbmdlJywgdmFsbF9iYXNrZXQpO1xyXG4vLyQoJy52YWxsX2Jhc2tldDInKS5iaW5kKCdjaGFuZ2UnLCB2YWxsX2Jhc2tldDIpO1xyXG5cclxuLy8kKCcub3B0aW9uX3Njb3JlMScpLmJpbmQoJ2NoYW5nZScsIG9wdGlvbl9zY29yZTEpO1x0XHRcclxuXHJcbnZhciBjaGFuZ2Vzb3J0YmlsbDQgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcImJpXzRcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwiYmlfNFwiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG4kKCcuc2hvd19zb3J0X3N1cHBseScpLnJlbW92ZUNsYXNzKCdhY3RpdmVfc3VwcGx5Jyk7XHJcbiQoJy5zaG93X3NvcnRfc3VwcGx5JykuYWRkQ2xhc3MoJ2FjdGl2ZV9zdXBwbHknKTtcdFxyXG5cclxufTtcclxuJCgnI3NvcnRiNCcpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNvcnRiaWxsNCk7XHRcdFxyXG5cclxudmFyIGNoYW5nZXNvcnRiaWxsMyA9IGZ1bmN0aW9uKCkgeyAgXHJcbiQuY29va2llKFwiYmlfM1wiLCBudWxsLCB7cGF0aDonLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcbkNvb2tpZUxpc3QoXCJiaV8zXCIsJCh0aGlzKS52YWwoKSwnYWRkJyk7XHJcbiQoJy5zaG93X3NvcnRfc3VwcGx5JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV9zdXBwbHknKTtcclxuJCgnLnNob3dfc29ydF9zdXBwbHknKS5hZGRDbGFzcygnYWN0aXZlX3N1cHBseScpO1x0XHJcblxyXG59O1xyXG4kKCcjc29ydGIzJykuYmluZCgnY2hhbmdlJywgY2hhbmdlc29ydGJpbGwzKTtcdFxyXG5cdFxyXG52YXIgY2hhbmdlc29ydDMgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcInN1XzNcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwic3VfM1wiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCgnLmpzLXJlbG9hZC10b3AnKS5hZGRDbGFzcygnYWN0aXZlLXInKTtcclxuXHJcblxyXG59O1xyXG4kKCcjc29ydDMnKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2Vzb3J0Myk7XHRcclxuXHRcclxuXHRcclxudmFyIGNoYW5nZXNvcnQ0ID0gZnVuY3Rpb24oKSB7ICBcclxuJC5jb29raWUoXCJzdV80XCIsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuQ29va2llTGlzdChcInN1XzRcIiwkKHRoaXMpLnZhbCgpLCdhZGQnKTtcclxuXHQkKCcuanMtcmVsb2FkLXRvcCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUtcicpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblxyXG5cclxufTtcclxuJCgnI3NvcnQ0JykuYmluZCgnY2hhbmdlJywgY2hhbmdlc29ydDQpO1x0XHJcblx0XHJcblx0XHJcblxyXG52YXIgY2hhbmdlc29ydF9zdG9jazQgPSBmdW5jdGlvbigpIHsgIFxyXG4kLmNvb2tpZShcInN1X3N0XzRcIiwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5Db29raWVMaXN0KFwic3Vfc3RfNFwiLCQodGhpcykudmFsKCksJ2FkZCcpO1xyXG5cdCQoJy5qcy1yZWxvYWQtdG9wJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblx0JCgnLmpzLXJlbG9hZC10b3AnKS5hZGRDbGFzcygnYWN0aXZlLXInKTtcclxuXHJcbn07XHJcbiQoJyNzb3J0X3N0b2NrNCcpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNvcnRfc3RvY2s0KTtcdFxyXG5cdFxyXG5cclxuLyrQutC70LjQuiDQvdCwINGA0LDRgdC60YDRi9Cy0LDRjtGJ0LXQtSDQvNC10L3RjiDQutCy0LDRgNGC0LDQuyovXHJcbnZhciBjaGFuZ2VjaXR5ID0gZnVuY3Rpb24oKSB7ICBcclxuXHJcbiAvL9GD0LTQsNC70Y/RjtGC0YHRjyDRgdGC0LDRgNGL0LUg0LzQtdC90Y5cclxudmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScrJCh0aGlzKS52YWwoKTtcclxuJCgnLm1lbnUyX3ByaW1lJykuaGlkZSgpO1xyXG4kKCcubWVudTNfcHJpbWUnKS5oaWRlKCk7XHJcbkFqYXhDbGllbnQoJ21lbnVfcHJpbWUnLCdjaXR5JywnR0VUJyxkYXRhLCdBZnRlckNoYW5nZUNpdHknLCcxJywwKTtcdFxyXG5cclxufTtcclxuJCgnI2NpdHknKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VjaXR5KTtcclxuXHRcclxuXHRcclxuXHJcbndpbmRvdy5jaGFuZ2VrdmFydGFsID0gZnVuY3Rpb24oKSB7ICBcclxuXHJcbiAvL9GD0LTQsNC70Y/RjtGC0YHRjyDRgdGC0LDRgNGL0LUg0LzQtdC90Y5cclxudmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScrJCh0aGlzKS52YWwoKTtcclxuJCgnLm1lbnUzX3ByaW1lJykuaGlkZSgpO1xyXG5BamF4Q2xpZW50KCdtZW51X3ByaW1lJywna3ZhcnRhbCcsJ0dFVCcsZGF0YSwnQWZ0ZXJDaGFuZ2VLdmFydGFsJywnMScsMCk7XHRcclxuXHJcbn07XHJcbiQoJyNrdmFydGFsJykuYmluZCgnY2hhbmdlJywgY2hhbmdla3ZhcnRhbCk7XHJcblxyXG59KTtcclxuIFxyXG5cclxuZnVuY3Rpb24gQWZ0ZXJVcGRhdGVDb3N0RmluZXJ5KGRhdGEsdXBkYXRlKVxyXG57XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcblx0XHQkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnZhbChkYXRhLmNvc3QpO1xyXG5cdFx0XHJcblx0XHRcclxuXHR2YXIgcmVsX2lkPSQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucGFyZW50cygnLm1hdCcpLmF0dHIoJ3JlbF93Jyk7XHJcblx0dmFyIHJlbF9tYXQ9JCgnLm1hdFtyZWxfbWF0PScrdXBkYXRlKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5wYXJlbnRzKCcubWF0JykuYXR0cigncmVsX21hdCcpO1xyXG5cdFxyXG5cdHZhciBtYXg9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmF0dHIoJ21heCcpKTtcclxuXHR2YXIgbXk9cGFyc2VGbG9hdCgkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmF0dHIoJ215JykpO1xyXG5cdC8vYWxlcnQobWF4KTtcclxuXHR2YXIgdmFsdWU9JCgnLm1hdFtyZWxfbWF0PScrdXBkYXRlKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoKTtcdFxyXG5cdCQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ3JlZGFhcycpO1xyXG5cdGlmKCh2YWx1ZSE9MCkmJih2YWx1ZSE9JycpJiYoJC5pc051bWVyaWModmFsdWUpKSlcclxuXHR7XHJcblx0XHRpZigoKHBhcnNlRmxvYXQodmFsdWUpPm1heCkmJighaXNOYU4obWF4KSkpfHwocGFyc2VGbG9hdCh2YWx1ZSk+bXkpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly/QstGL0LTQtdC70Y/QtdC8INC60YDQsNGB0L3Ri9C8INC4INC+0YLQutGA0YvQstCw0LXQvCDRgdC70YPQttC10LHQvdGD0Y4g0LfQsNC/0LjRgdC60YNcclxuXHRcdFx0XHQkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLmFkZENsYXNzKCdyZWRhYXMnKTtcclxuXHRcdFx0fSBcdFx0XHRcdFxyXG5cdH0gXHJcblx0XHRcclxuXHRcdFxyXG5cdCAgICBzZXJ2X21lc3NfbSgkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpKTtcclxuXHQgICAgc3VtbV9maW5lcnkxKHVwZGF0ZSk7XHJcblx0fVxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdlcnJvcicgKVxyXG4gICAge1xyXG5cdFx0JCgnLm1hdFtyZWxfbWF0PScrdXBkYXRlKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS52YWwoJycpO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdFx0XHRcdHZhciByZWxfaWQ9JCgnLm1hdFtyZWxfbWF0PScrdXBkYXRlKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5wYXJlbnRzKCcubWF0JykuYXR0cigncmVsX3cnKTtcclxuXHR2YXIgcmVsX21hdD0kKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnBhcmVudHMoJy5tYXQnKS5hdHRyKCdyZWxfbWF0Jyk7XHJcblx0XHJcblx0dmFyIG1heD1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYXR0cignbWF4JykpO1xyXG5cdHZhciBteT1wYXJzZUZsb2F0KCQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYXR0cignbXknKSk7XHJcblx0XHJcblx0dmFyIHZhbHVlPSQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHRcclxuXHQkKCcubWF0W3JlbF9tYXQ9Jyt1cGRhdGUrJ10nKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnJlbW92ZUNsYXNzKCdyZWRhYXMnKTtcclxuXHRpZigodmFsdWUhPTApJiYodmFsdWUhPScnKSYmKCQuaXNOdW1lcmljKHZhbHVlKSkpXHJcblx0e1xyXG5cdFx0aWYoKChwYXJzZUZsb2F0KHZhbHVlKSE9bWF4KSYmKCFpc05hTihtYXgpKSl8fChwYXJzZUZsb2F0KHZhbHVlKT5teSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvL9Cy0YvQtNC10LvRj9C10Lwg0LrRgNCw0YHQvdGL0Lwg0Lgg0L7RgtC60YDRi9Cy0LDQtdC8INGB0LvRg9C20LXQsdC90YPRjiDQt9Cw0L/QuNGB0LrRg1xyXG5cdFx0XHRcdCQoJy5tYXRbcmVsX21hdD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYWRkQ2xhc3MoJ3JlZGFhcycpO1x0XHJcblx0XHRcdH0gXHJcblx0XHRcdFx0XHJcblx0fSBcdFx0XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0c2Vydl9tZXNzX20oJCgnLm1hdFtyZWxfbWF0PScrdXBkYXRlKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKSk7XHJcblx0ICAgIHN1bW1fZmluZXJ5MSh1cGRhdGUpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRj1xyXG5mdW5jdGlvbiBBZnRlclNlbmRNTShkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0Ly/QtNC+0LHQsNCy0LvRj9C10Lwg0YHQvtC+0LHRidC10L3QuNC1INCyINC/0LDQvdC10LvRjFxyXG5cdFx0aWYoJCgnLnNlZ29fbWVzcycpLmxlbmd0aD09MClcclxuXHRcdHtcclxuXHRcdFx0JCgnLnBhZGRpbmdfbWVzcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImRpYWxvZ19jbGVhclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJtZXNzYWdlX2RhdGVcIj48ZGl2PjxzcGFuIGNsYXNzPVwic2Vnb19tZXNzXCI+0YHQtdCz0L7QtNC90Y88L3NwYW4+PC9kaXY+PC9kaXY+Jyk7XHRcclxuXHRcdH1cclxuXHRcdCQoJy5wYWRkaW5nX21lc3MnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkaWFsb2dfY2xlYXJcIj48L2Rpdj4nK2RhdGEuZWNobyk7XHJcblx0XHRzY3JvbGxfdG9fYm90dG9tKDIwMDApO1xyXG5cdFx0JCgnI290eml2X2FyZWEnKS52YWwoJycpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0L7QsdC90L7QstC70LXQvdC40LUg0LDQutGC0L7QsiDQvdCwINC+0YLQsdGA0LDQutC+0LLQutGDINC4INGE0L7RgtC+0Log0LHRgNCw0LrQsFxyXG5mdW5jdGlvbiBBZnRlclVwZGF0ZUFrdChkYXRhLHVwZGF0ZSlcclxue1xyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0XHJcblx0XHRpZih1cGRhdGU9PTApXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKCdbaW52b2ljZXNfbWVzc2E9JytkYXRhLmlkKyddJykuZmluZCgnLmltZ19ha3QgdWwnKS5lbXB0eSgpLmFwcGVuZChkYXRhLmVjaG8pO1xyXG5cdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKCdbaW52b2ljZXNfbWVzc2E9JytkYXRhLmlkKyddJykuZmluZCgnLmltZ19ha3QxIHVsJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5lY2hvKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQvtCx0L3QvtCy0LvQtdC90LjQtSDRgdGC0LDRgtGD0YHQvtCyXHJcbmZ1bmN0aW9uIEFmdGVydXBkYXRlX3N0YXR1cyhkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0Ly9hbGVydCh1cGRhdGUpO1xyXG5cdCAgICB2YXIgY2MgPSB1cGRhdGUuc3BsaXQoJy4nKTtcclxuXHQgICAgZm9yICggdmFyIHQgPSAwOyB0IDwgY2MubGVuZ3RoOyB0KysgKSBcclxuXHQgICAgeyBcdFxyXG5cdFx0ICAgICAkKCdbc3VwcGx5X2lkPScrY2NbdF0rJ10nKS5maW5kKCcuc3RhdHVzaXMnKS5lbXB0eSgpLmFwcGVuZChkYXRhLmJhc2tldFt0XSk7XHJcblx0XHRcdCQoJ1tzdXBwbHlfaWQ9JytjY1t0XSsnXScpLmZpbmQoJy5ta3JfJykuZW1wdHkoKTtcclxuXHRcdFx0XHJcblx0ICAgIH1cclxuXHRcdFxyXG5cdFx0XHJcblx0XHRcclxuXHR9XHJcblx0XHJcblx0XHJcblx0XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBBZnRlcnZhbGxfc3VwcGx5KGRhdGEsdXBkYXRlKVxyXG57XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcblx0XHQvL2FsZXJ0KHVwZGF0ZSk7XHJcblx0XHQkKCdbcmVsX3N0YXR1cz0nK3VwZGF0ZSsnXScpLmFmdGVyKGRhdGEuc3RhdHVzX2VjaG8pLnJlbW92ZSgpO1xyXG5cdFx0XHJcblx0XHR2YXIgc2k9ICQoJ1tyZWxfc3RhdHVzPScrdXBkYXRlKyddJykucGFyZW50cygnW3N1cHBseV9zdG9ja10nKS5hdHRyKCdzdXBwbHlfc3RvY2snKTtcclxuXHRcdFxyXG5cdFx0dmFyIHNpMT1zaS5zcGxpdCgnXycpO1xyXG5cdFx0VXBkYXRlU3RhdHVzQURBKHNpMVswXSk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0XHJcblx0fVxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdlcnJvcicgKVxyXG4gICAge1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdFxyXG5cdH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIEFmdGVyQ2hhbmdlQ2l0eShkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLm1lbnUyX3ByaW1lJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCgnLm1lbnUzX3ByaW1lJykucmVtb3ZlKCk7XHJcblx0XHQkKCcubWVudTFfcHJpbWUnKS5hZnRlcihkYXRhLmVjaG8pO1xyXG5cdFx0JChcIi5zbGN0XCIpLnVuYmluZCgnY2xpY2suc3lzJyk7XHJcblx0XHQkKFwiLnNsY3RcIikuYmluZCgnY2xpY2suc3lzJywgc2xjdGNsaWNrKTtcclxuXHRcdCQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikudW5iaW5kKCdjbGljaycpO1xyXG5cdFx0JChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcblx0XHQkKCcja3ZhcnRhbCcpLnVuYmluZCgnY2hhbmdlJyk7XHJcblx0XHQkKCcja3ZhcnRhbCcpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZWt2YXJ0YWwpO1xyXG5cdFx0XHJcblx0fSBcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nZXJyb3InIClcclxuICAgIHtcdFx0XHJcblx0XHQkKCcubWVudTJfcHJpbWUnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLm1lbnUzX3ByaW1lJykuc2hvdygpO1x0XHJcblx0fVxyXG5cdC8vYWxlcnQoZGF0YS5lY2hvKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQWZ0ZXJOb2ZpKGRhdGEsdXBkYXRlKVxyXG57XHJcblx0bnByb2dyZXNzPTA7XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J3VwZGF0ZScgKVxyXG4gICAge1xyXG5cdFx0Ly/Rg9C30L3QsNC10Lwg0YfRgtC+INC30LAg0L3QvtCy0YvQtSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINGDINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuCDQstGL0LLQvtC00LjQvCDQuNGFXHJcblx0XHR2YXIgZGlhbG9nPTA7XHJcblx0XHR2YXIgZGF0ZT0nJztcclxuXHRcdGlmKCQoJy5tZXNzYWdlX2Jsb2NrJykubGVuZ3RoIT0wKVxyXG5cdFx0e1xyXG5cdFx0ICAgZGlhbG9nID0gJCgnLm1lc3NhZ2VfYmxvY2snKS5hdHRyKCdpZF9jb250ZW50Jyk7XHJcblx0XHQgICBkYXRlPSQoJ1tkbWVzX2VdOmxhc3QnKS5hdHRyKCdkbWVzX2UnKTtcdFxyXG5cdFx0fVxyXG5cdFx0XHRcclxuXHRcdFxyXG5cdFx0XHJcblx0XHR2YXIgZGF0YSA9J3RrPScrZGF0YS50b2tlbisnJmlkX2RpYWxvZz0nK2RpYWxvZysnJmRhdGU9JytkYXRlO1xyXG5cdFx0QWpheENsaWVudCgnbm90aWZpY2F0aW9uJywnbm90aWZpY2F0aW9uJywnR0VUJyxkYXRhLCdBZnRlck5vdGlmaWNhdGlvbicsJzEnLDApO1xyXG5cdH1cclxufVxyXG5cclxuLy/Qv9C+0YHRgtGE0YPQvdC60YbQuNGPINGD0LTQsNC70LXQvdC40Y8g0LzQsNGC0LXRgNC40LDQu9CwINC40Lcg0L3QsNC60LvQsNC00L3QvtC5XHJcbmZ1bmN0aW9uIEFmdGVyRGVsbE1hdGVyaWFsSW52b2ljZShkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fSBcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuXHRcdCQoJ1tpbnZvaWNlX21hdGVyaWFsPScrdXBkYXRlKyddJykucmVtb3ZlKCk7XHJcblx0XHQkKCdbaW52b2ljZXNfbWVzc2E9Jyt1cGRhdGUrJ10nKS5uZXh0KCkucmVtb3ZlKCk7XHJcblx0XHQkKCdbaW52b2ljZXNfbWVzc2E9Jyt1cGRhdGUrJ10nKS5yZW1vdmUoKTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHRpdG9nX2ludm9pY2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNC1INGE0LDQudC70LAg0L3QsNC60LvQsNC00L3QvtC5IChqcGcpXHJcbmZ1bmN0aW9uIEFmdGVyRGVsbEltYWdlSW52b2ljZShkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fSBcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuXHRcdCQoJy5pbWdfaW52b2ljZScpLmZpbmQoJ1tzb3A9Jyt1cGRhdGUrJ10nKS5yZW1vdmUoKTtcclxuXHRcdC8v0LXRgdC70Lgg0LrQvtC70LjRh9C10YHRgtCy0L4gbGkgMCDRgtC+INC/0YDRj9GH0LXQvCDQstC10YHRjCDQsdC70L7QsyDRgSDRhNCw0LnQu9Cw0LzQuFxyXG5cdFx0aWYoJCgnLmltZ19pbnZvaWNlJykuZmluZCgnbGknKS5sZW5ndGg9PTApXHJcblx0XHR7XHJcblx0XHRcdFx0JCgnLmltZ19pbnZvaWNlJykuaGlkZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNC1INGE0LDQudC70LAg0YHRh9C10YLQsCAoanBnKSDQsiDRgdGH0LXRgtC1XHJcbmZ1bmN0aW9uIEFmdGVyRGVsbEltYWdlU3VwcGx5KGRhdGEsdXBkYXRlKVxyXG57XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9IFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLmltZ19zc29wbHknKS5maW5kKCdbc29wPScrdXBkYXRlKyddJykucmVtb3ZlKCk7XHJcblx0XHQvL9C10YHQu9C4INC60L7Qu9C40YfQtdGB0YLQstC+IGxpIDAg0YLQviDQv9GA0Y/Rh9C10Lwg0LLQtdGB0Ywg0LHQu9C+0LMg0YEg0YTQsNC50LvQsNC80LhcclxuXHRcdGlmKCQoJy5pbWdfc3NvcGx5JykuZmluZCgnbGknKS5sZW5ndGg9PTApXHJcblx0XHR7XHJcblx0XHRcdFx0JCgnLmltZ19zc29wbHknKS5oaWRlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuLy/Qv9C+0YHRgtGE0YPQvdC60YbQuNGPINC+0LHQvdC+0LLQu9C10L3QuNC1INGE0L7RgtC+0Log0L/QviDQvdCw0LrQu9Cw0LTQvdC+0LlcclxuZnVuY3Rpb24gQWZ0ZXJVcGRhdGVJbWFnZUludm9pY2UoZGF0YSx1cGRhdGUpXHJcbntcclxuXHRucHJvZ3Jlc3M9MDtcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHRXaW5kb3dMb2dpbigpO1xyXG5cdH0gZWxzZVxyXG5cdFx0e1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLmltZ19pbnZvaWNlJykuZmluZCgndWwnKS5lbXB0eSgpLmFwcGVuZChkYXRhLmVjaG8pO1xyXG5cdFx0JCgnLmltZ19pbnZvaWNlJykuc2hvdygpO1xyXG5cdFx0VG9vbFRpcCgpO1xyXG5cdH1cclxuXHRcdH1cclxufVxyXG5cclxuLy/Qv9C+0YHRgtGE0YPQvdC60YbQuNGPINC+0LHQvdC+0LLQu9C10L3QuNC1INGE0L7RgtC+0Log0L/QviDRgdGH0LXRgtGDXHJcbmZ1bmN0aW9uIEFmdGVyVXBkYXRlSW1hZ2VTdXBwbHkoZGF0YSx1cGRhdGUpXHJcbntcclxuXHRucHJvZ3Jlc3M9MDtcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHRXaW5kb3dMb2dpbigpO1xyXG5cdH0gZWxzZVxyXG5cdFx0e1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLmltZ19zc29wbHknKS5maW5kKCd1bCcpLmVtcHR5KCkuYXBwZW5kKGRhdGEuZWNobyk7XHJcblx0XHQkKCcuaW1nX3Nzb3BseScpLnNob3coKTtcclxuXHRcdFRvb2xUaXAoKTtcclxuXHR9XHJcblx0XHR9XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNC1INGD0LLQtdC00L7QvNC70LXQvdC40Y9cclxuZnVuY3Rpb24gQWZ0ZXJEZWxsTm90KGRhdGEsdXBkYXRlKVxyXG57XHJcblx0bnByb2dyZXNzPTA7XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG5cdHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fSBlbHNlXHJcblx0e1xyXG5cdFx0aWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcblx0XHR7XHJcblx0XHRcdC8v0YPQt9C90LDQtdC8INGH0YLQviDQt9CwINC90L7QstGL0LUg0YPQstC10LTQvtC80LvQtdC90LjRjyDRgyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LLRi9Cy0L7QtNC40LxcclxuXHRcdFx0JCgnW3JlbF9ub3RpPScrdXBkYXRlKyddJykucmVtb3ZlKCk7XHJcblx0XHRcdGlmKCAkKCcubm90aV9ibG9jaycpLmlzKCc6dmlzaWJsZScpICkge1xyXG5cdFx0XHRcdHZhciB0aXBzPXBhcnNlSW50KHRyaW1fbnVtYmVyKCQoJy5ub3RpX2Jsb2NrJykuZmluZCgnLm5vdGlfY29jJykudGV4dCgpKSk7XHJcblx0XHRcdFx0aWYgKCh0aXBzIT0nJykmJih0aXBzIT0wKSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0aXBzPXRpcHMtMTtcclxuXHRcdFx0XHRcdGlmKHRpcHM9PTApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdCQoJy5ub3RpX2Jsb2NrJykucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdCQoJy52aWV3X19ub3QnKS5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdCQoJy5ub3RfbGknKS5maW5kKCdpJykuaGlkZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHQkKCcubm90aV9ibG9jaycpLmZpbmQoJy5ub3RpX2NvYycpLmVtcHR5KCkuYXBwZW5kKHRpcHMpO1xyXG5cdFx0XHRcdFx0XHQkKCcubm90X2xpJykuZmluZCgnaScpLmVtcHR5KCkuYXBwZW5kKHRpcHMpO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHR9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCgnW3JlbF9ub3RpPScrdXBkYXRlKyddJykuc2hvdygpO1xyXG5cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQstC60LvQsNC00LrQuCDQsiDQvtCx0YDQsNGJ0LXQvdC40Y/RhVxyXG5mdW5jdGlvbiBBZnRlclRhYnNJbmZvQXBwKGRhdGEsdXBkYXRlKVxyXG57XHJcblx0aWYodXBkYXRlIT1udWxsKXsgaWYgKHR5cGVvZih1cGRhdGUpID09IFwic3RyaW5nXCIpIHsgdXBkYXRlID0gdXBkYXRlLnNwbGl0KCcsJyk7IH0gZWxzZSB7IHVwZGF0ZVswXT11cGRhdGU7IH0gfVxyXG5cclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcblx0e1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9XHJcblxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG5cdHtcclxuXHRcdCQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsW2lkX3ByZT0nK3VwZGF0ZVsxXSsnXScpLmZpbmQoJy5weF9iZ190cmlwcycpLmVtcHR5KCkuYXBwZW5kKGRhdGEucXVlcnkpO1xyXG5cdFx0Ly8kKCcuZm9ybScrdXBkYXRlWzFdKycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcblxyXG5cdFx0Ly8kKCcuY2hhXzEnKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcud2FsbGV0X2NoZWNrYm94Jyx3YWxsZXRfY2hlY2tib3gpO1xyXG5cclxuXHRcdC8vJCgnLmZvcm0nK3VwZGF0ZVsxXSsnIC5qcy10YWJzX2RvY2MnKS5oaWRlKCk7XHJcblx0XHQvLyQoJy5mb3JtJyt1cGRhdGVbMV0rJyAuanMtdGFic18nK3VwZGF0ZVswXSkuc2hvdygpO1xyXG5cclxuXHRcdE51bWJlckJsb2NrRmlsZSgpO1xyXG5cdFx0VG9vbFRpcCgpO1xyXG5cdFx0aWYoKHVwZGF0ZVswXT09Myl8fCh1cGRhdGVbMF09PTQpKVxyXG5cdFx0e1xyXG5cdFx0XHQkKFwiLnNsY3RcIikudW5iaW5kKCdjbGljay5zeXMnKTtcclxuXHRcdFx0JChcIi5zbGN0XCIpLmJpbmQoJ2NsaWNrLnN5cycsIHNsY3RjbGljayk7XHJcblx0XHRcdCQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikudW5iaW5kKCdjbGljaycpO1xyXG5cdFx0XHQkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLmJpbmQoJ2NsaWNrJywgZHJvcGxpKTtcclxuXHRcdFx0Ly8kKCcjdHlwZXNheScpLnVuYmluZCgnY2hhbmdlJywgY2hhbmdlc2F5KTtcclxuXHRcdFx0Ly8kKCcjdHlwZXNheScpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNheSk7XHJcblx0XHRcdC8vYWxlcnQoXCIhXCIpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcbn1cclxuXHJcbi8v0L/QvtC70YPRh9C10L3QuNC1INC90L7QstGL0YUg0YPQstC10LTQvtC80LvQtdC90LjQuVxyXG5mdW5jdGlvbiBBZnRlclZWTihkYXRhLHVwZGF0ZSlcclxue1xyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuXHRcdFdpbmRvd0xvZ2luKCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG5cdFx0JCgnLm5vdGlfYmxvY2snKS5maW5kKCcuc2NybycpLmVtcHR5KCkuYXBwZW5kKGRhdGEuZWNobyk7XHJcblx0XHQkKCcubm90aV9ibG9jaycpLmZpbmQoJy5ub3RpX2NvYycpLmVtcHR5KCkuYXBwZW5kKGRhdGEubm90KTtcclxuXHRcdCQoJy5ub3RpX2Jsb2NrJykuZmluZCgnLm5vdGlfY28nKS5zaG93KCk7XHJcblx0XHQkKCcubm90aV9ibG9jaycpLm9uKFwiY2xpY2tcIiwnLmRlbF9ub3RpZicsRGVsbE5vdGlmKTtcdFxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gQWZ0ZXJOb3RpZmljYXRpb24oZGF0YSx1cGRhdGUpXHJcbntcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHRXaW5kb3dMb2dpbigpO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuXHRcdCQoJy51c2Vyc19ydWxlJykuYXR0cignbm90JyxkYXRhLnRrKTtcclxuXHRcdGlmKGRhdGEubm90PT0wKVxyXG5cdFx0e1xyXG5cdFx0XHQvL9GB0LrRgNGL0LLQsNC10Lwg0YPQstC10LTQvtC80LvQtdC90LjRjyDQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0LDQstC40LwgMFx0XHJcblx0XHRcdCQoJy5ub3RfbGknKS5maW5kKCdpJykuZW1wdHkoKTtcclxuXHRcdFx0JCgnLm5vdF9saScpLmZpbmQoJ2knKS5oaWRlKCk7XHJcblx0XHRcdCQoJy52aWV3X19ub3QnKS5oaWRlKCk7XHJcblx0XHR9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCgnLm5vdF9saScpLmZpbmQoJ2knKS5lbXB0eSgpLmFwcGVuZChkYXRhLm5vdCk7XHJcblx0XHRcdCQoJy5ub3RfbGknKS5maW5kKCdpJykuc2hvdygpO1xyXG5cdFx0XHQkKCcudmlld19fbm90Jykuc2hvdygpO1xyXG5cdFx0XHQkKCcjY2hhdEF1ZGlvJylbMF0ucGxheSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly/QtdGB0LvQuCDQtdGB0YLRjCDQutC+0LvQvtC60L7Qu9GM0YfQuNC6INGC0L4g0LLRi9Cy0L7QtNC40Lwg0L3QsCDQv9Cw0YDRgyDRgdC10LrRg9C90LQg0YPQstC10LTQvtC80LvQtdC90LjQtSDQuNC3LdC30LAg0LrQvtGC0L7RgNC+0LPQviDQstGB0LUg0L7QsdC90L7QstC40LvQvtGB0YxcclxuXHRcdFx0aWYoJCgnLnZpZXdfX25vdCcpLmxlbmd0aClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKCAkKCcubm90aV9ibG9jaycpLmlzKCc6dmlzaWJsZScpICkge1x0XHJcblx0XHRcdFx0XHQvL9C+0LHQvdC+0LLQuNGC0YwgXHJcblx0XHRcdFx0XHQkKCcubm90aV9ibG9jaycpLmZpbmQoJy5zY3JvJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsb2FkZXJfaW50ZXJcIj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PicpO1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgZGF0YSA9Jyc7XHJcbiAgICAgICAgICAgICAgICAgICAgQWpheENsaWVudCgnbm90aWZpY2F0aW9uJywndmlld19ub3RpZmljYXRpb24nLCdHRVQnLGRhdGEsJ0FmdGVyVlZOJywxLDApO1x0XHJcblx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ly/QvtGC0LrRgNGL0YLRjCDQvdCwINC/0LDRgNGDINGB0LXQutGD0L3QtFx0XHJcblx0XHRcdFx0XHQkKCcubWVudTEnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJub3RpX2Jsb2NrXCI+PGRpdiBjbGFzcz1cInRpdGxlX25vdGlcIj48dWwgY2xhc3M9XCJ0X3VsXCI+PGxpPtCd0L7QstC+0LUg0YPQstC10LTQvtC80LvQtdC90LjQtTwvbGk+PGxpPjxpIGNsYXNzPVwibm90aV9jb1wiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPjxzcGFuIGNsYXNzPVwibm90aV9jb2NcIj48L3NwYW4+PC9pPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwic2Nyb1wiPicrZGF0YS5lY2hvKyc8L2Rpdj48L2Rpdj4nKTtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQgKCBmdW5jdGlvbiAoKSB7ICQoICcubm90aV9ibG9jaycgKS5yZW1vdmUgKCk7IH0sIDUwMDAgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0XHQvL9GB0L7QvtCx0YnQtdC90LjRj1xyXG5cdFx0aWYoZGF0YS5lY2hvX209PTApXHJcblx0XHR7XHJcblx0XHRcdC8v0YHQutGA0YvQstCw0LXQvCDRg9Cy0LXQtNC+0LzQu9C10L3QuNGPINC4INC60L7Qu9C40YfQtdGB0YLQstC+INGB0YLQsNCy0LjQvCAwXHRcclxuXHRcdFx0JCgnLm1lc3NfbGknKS5maW5kKCdpJykuZW1wdHkoKTtcclxuXHRcdFx0JCgnLm1lc3NfbGknKS5oaWRlKCk7XHJcblx0XHRcdC8vJCgnLnZpZXdfX25vdCcpLmhpZGUoKTsgLy/QutC+0LvQvtC60L7Qu9GM0YfQuNC6XHJcblx0XHR9IGVsc2VcclxuXHRcdHtcclxuXHRcdFx0JCgnLm1lc3NfbGknKS5maW5kKCdpJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5lY2hvX20pO1xyXG5cdFx0XHQkKCcubWVzc19saScpLmZpbmQoJ2knKS5zaG93KCk7XHJcblx0XHRcdC8vJCgnLnZpZXdfX25vdCcpLnNob3coKTsgLy/QutC+0LvQvtC60L7Qu9GM0YfQuNC6XHJcblx0XHRcdCQoJyNjaGF0QXVkaW8nKVswXS5wbGF5KCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0aWYoJCgnLm1lc3NhZ2VfYmxvY2snKS5sZW5ndGghPTApXHJcblx0XHQgICAge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmKCQoJy5zZWdvX21lc3MnKS5sZW5ndGg9PTApXHJcblx0XHQgICAgICAgIHtcclxuXHRcdFx0ICAgICAgICQoJy5wYWRkaW5nX21lc3MnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkaWFsb2dfY2xlYXJcIj48L2Rpdj48ZGl2IGNsYXNzPVwibWVzc2FnZV9kYXRlXCI+PGRpdj48c3BhbiBjbGFzcz1cInNlZ29fbWVzc1wiPtGB0LXQs9C+0LTQvdGPPC9zcGFuPjwvZGl2PjwvZGl2PicpO1x0XHJcblx0XHQgICAgICAgIH1cclxuXHRcdFx0XHRcclxuXHRcdCAgICAgICAgJCgnLnBhZGRpbmdfbWVzcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImRpYWxvZ19jbGVhclwiPjwvZGl2PicrZGF0YS5lY2hvX2RpYWxvZyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2Nyb2xsX3RvX2JvdHRvbSgyMDAwKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblx0XHJcblx0XHJcbmZ1bmN0aW9uIEFmdGVyTUVTUyhkYXRhLHVwZGF0ZSlcclxue1xyXG5cdFx0aWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcblx0XHQkKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ24nLGRhdGEubl9zdCk7XHJcblx0XHQkKCcuaGlzdG9yeV9tZXNzYWdlJykuYXR0cignc19tJyxkYXRhLnBvbyk7XHJcblx0XHR2YXIgQiA9IGRvY3VtZW50LmJvZHk7XHJcblx0XHR2YXIgc2M9Qi5zY3JvbGxIZWlnaHQ7XHJcblx0XHRcclxuXHRcdCQoJy5wYWRkaW5nX21lc3MnKS5wcmVwZW5kKGRhdGEuZWNobyk7XHJcblx0XHJcblx0XHRcclxuXHRcdHdpbmRvdy5zY3JvbGxUbygwLChCLnNjcm9sbEhlaWdodCAtIHNjICArIEIuc2Nyb2xsVG9wKSk7XHJcblx0XHRpZiggZGF0YS5lc2hlPT0xIClcclxuXHRcdFx0e1xyXG5cdFx0JCgnLnBhZGRpbmdfbWVzcycpLnByZXBlbmQoJCgnLmhpc3RvcnlfbWVzc2FnZScpKTtcclxuXHRcdCQoJy5oaXN0b3J5X21lc3NhZ2UnKS5zaG93KCk7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdCQoJy5oaXN0b3J5X21lc3NhZ2UnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0fVxyXG5cdFx0aWYgKCBkYXRhLnN0YXR1cz09J2Vycm9yJyApXHJcbiAgICB7XHJcblx0XHQkKCcuaGlzdG9yeV9tZXNzYWdlJykucmVtb3ZlKCk7XHJcblx0fVxyXG5cdFxyXG59XHJcblxyXG5mdW5jdGlvbiBBZnRlclVDQVNIKGRhdGEsdXBkYXRlKVxyXG57XHJcblx0JCgnW2NsX3BheT0nK3VwZGF0ZSsnXScpLmVtcHR5KCkuYXBwZW5kKGRhdGEuZWNobyk7XHJcblx0JCgnW29yX3BheT0nK3VwZGF0ZSsnXScpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9udC1yYW5rIHJhc3BfcGF5XCIgZGF0YS10b29sdGlwPVwi0KDQsNGB0L/RgNC+0LLQtdGB0YLQuFwiIGlkX3JlbD1cIicrdXBkYXRlKydcIj48c3BhbiBjbGFzcz1cImZvbnQtcmFuay1pbm5lclwiPng8L3NwYW4+PC9kaXY+Jyk7XHJcblx0XHRcdCQoJy5wYXlfc3VtbTInKS5yZW1vdmUoKTtcclxuXHRcdCQoJy5wYXlfc3VtbTMnKS5yZW1vdmUoKTtcclxuXHRcdCQoJy5wYXlfc3VtbTQnKS5yZW1vdmUoKTtcclxuXHRcdCQoJy5qX2Nhc2gnKS5hZnRlcihkYXRhLmVjaG8yKTtcclxuXHRUb29sVGlwKCk7XHJcblxyXG5cclxuXHROdW1iZXJCbG9ja0ZpbGUoKTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0L7QsdC90L7QstC70LXQvdC40LUg0YHRgtCw0YLRg9GB0LAg0L/QvtGB0LvQtSDQuiDQvtC/0LvQsNGC0LUg0YHRh9C10YJcclxuZnVuY3Rpb24gQWZ0ZXJXYWxsZXRTVHgoZGF0YSx1cGRhdGUpXHJcbntcclxuXHQvL2FsZXJ0KHVwZGF0ZSk7XHJcblx0JCgnLmJpbGxsW3JlbF9pZD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5sb2FkZXJfaW50ZXInKS5yZW1vdmUoKTtcclxuXHRcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHQkKCcuYi1sb2FkaW5nJykuaGlkZSgpO1xyXG5cdFx0V2luZG93TG9naW4oKTtcclxuXHR9XHJcblx0XHJcblx0XHJcblx0aWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcblx0XHQkKCcuYmlsbGxbcmVsX2lkPScrdXBkYXRlKyddJykuZmluZCgnLnN0YXR1c193YWxsZXRfYWRhJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5lY2hvKTtcclxuXHQgICAgJCgnLmJpbGxsW3JlbF9pZD0nK3VwZGF0ZSsnXScpLmZpbmQoJy5idXR0b25fYWRhX3dhbGwnKS5lbXB0eSgpLmFwcGVuZChkYXRhLmJ1dHRvbik7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBBZnRlckNoYW5nZUt2YXJ0YWwoZGF0YSx1cGRhdGUpXHJcbntcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcblx0XHRXaW5kb3dMb2dpbigpO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuICAgICAgICAkKCcubWVudTNfcHJpbWUnKS5yZW1vdmUoKTtcclxuXHRcdCQoJy5tZW51Ml9wcmltZScpLmFmdGVyKGRhdGEuZWNobyk7XHJcblx0XHQkKFwiLnNsY3RcIikudW5iaW5kKCdjbGljay5zeXMnKTtcclxuXHRcdCQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG5cdFx0JChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcblx0XHQkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLmJpbmQoJ2NsaWNrJywgZHJvcGxpKTtcclxuXHRcdFxyXG5cdFx0XHJcblx0fSBcclxuXHRpZiAoIGRhdGEuc3RhdHVzPT0nZXJyb3InIClcclxuICAgIHtcdFx0XHJcbiAgICAgICAgJCgnLm1lbnUzX3ByaW1lJykuc2hvdygpO1x0XHJcblx0fVxyXG5cdC8vYWxlcnQoZGF0YS5lY2hvKTtcclxufVxyXG5cclxuLy/QvNC10L3RjiDQstGL0LHQvtGA0LAg0LPQvtGA0L7QtNCwLdC60LLQsNGA0YLQsNC70LAg0Lgg0LTQvtC80LAg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuLy/QvNC10L3RjiDQstGL0LHQvtGA0LAg0LPQvtGA0L7QtNCwLdC60LLQsNGA0YLQsNC70LAg0Lgg0LTQvtC80LAg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuLy/QvNC10L3RjiDQstGL0LHQvtGA0LAg0LPQvtGA0L7QtNCwLdC60LLQsNGA0YLQsNC70LAg0Lgg0LTQvtC80LAg0LIg0YHQtdCx0LXRgdGC0L7QuNC80L7RgdGC0LhcclxuXHJcblxyXG4vKiBNb2Rlcm5penIgMi41LjMgKEN1c3RvbSBCdWlsZCkgfCBNSVQgJiBCU0RcclxuICogQnVpbGQ6IGh0dHA6Ly9tb2Rlcm5penIuY29tL2Rvd25sb2FkLyMtY3NzdHJhbnNmb3JtczNkLWNzc3RyYW5zaXRpb25zLXNoaXYtY3NzY2xhc3Nlcy10ZXN0c3R5bGVzLXRlc3Rwcm9wLXRlc3RhbGxwcm9wcy1wcmVmaXhlcy1kb21wcmVmaXhlcy1sb2FkXHJcbiAqL1xyXG47d2luZG93Lk1vZGVybml6cj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24geihhKXtqLmNzc1RleHQ9YX1mdW5jdGlvbiBBKGEsYil7cmV0dXJuIHoobS5qb2luKGErXCI7XCIpKyhifHxcIlwiKSl9ZnVuY3Rpb24gQihhLGIpe3JldHVybiB0eXBlb2YgYT09PWJ9ZnVuY3Rpb24gQyhhLGIpe3JldHVybiEhfihcIlwiK2EpLmluZGV4T2YoYil9ZnVuY3Rpb24gRChhLGIpe2Zvcih2YXIgZCBpbiBhKWlmKGpbYVtkXV0hPT1jKXJldHVybiBiPT1cInBmeFwiP2FbZF06ITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIsZCl7Zm9yKHZhciBlIGluIGEpe3ZhciBmPWJbYVtlXV07aWYoZiE9PWMpcmV0dXJuIGQ9PT0hMT9hW2VdOkIoZixcImZ1bmN0aW9uXCIpP2YuYmluZChkfHxiKTpmfXJldHVybiExfWZ1bmN0aW9uIEYoYSxiLGMpe3ZhciBkPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSksZT0oYStcIiBcIitvLmpvaW4oZCtcIiBcIikrZCkuc3BsaXQoXCIgXCIpO3JldHVybiBCKGIsXCJzdHJpbmdcIil8fEIoYixcInVuZGVmaW5lZFwiKT9EKGUsYik6KGU9KGErXCIgXCIrcC5qb2luKGQrXCIgXCIpK2QpLnNwbGl0KFwiIFwiKSxFKGUsYixjKSl9dmFyIGQ9XCIyLjUuM1wiLGU9e30sZj0hMCxnPWIuZG9jdW1lbnRFbGVtZW50LGg9XCJtb2Rlcm5penJcIixpPWIuY3JlYXRlRWxlbWVudChoKSxqPWkuc3R5bGUsayxsPXt9LnRvU3RyaW5nLG09XCIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gXCIuc3BsaXQoXCIgXCIpLG49XCJXZWJraXQgTW96IE8gbXNcIixvPW4uc3BsaXQoXCIgXCIpLHA9bi50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKSxxPXt9LHI9e30scz17fSx0PVtdLHU9dC5zbGljZSx2LHc9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsaSxqLGs9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGw9Yi5ib2R5LG09bD9sOmIuY3JlYXRlRWxlbWVudChcImJvZHlcIik7aWYocGFyc2VJbnQoZCwxMCkpd2hpbGUoZC0tKWo9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGouaWQ9ZT9lW2RdOmgrKGQrMSksay5hcHBlbmRDaGlsZChqKTtyZXR1cm4gZj1bXCLCrVwiLFwiPHN0eWxlPlwiLGEsXCI8L3N0eWxlPlwiXS5qb2luKFwiXCIpLGsuaWQ9aCwobD9rOm0pLmlubmVySFRNTCs9ZixtLmFwcGVuZENoaWxkKGspLGx8fChtLnN0eWxlLmJhY2tncm91bmQ9XCJcIixnLmFwcGVuZENoaWxkKG0pKSxpPWMoayxhKSxsP2sucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChrKTptLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobSksISFpfSx4PXt9Lmhhc093blByb3BlcnR5LHk7IUIoeCxcInVuZGVmaW5lZFwiKSYmIUIoeC5jYWxsLFwidW5kZWZpbmVkXCIpP3k9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geC5jYWxsKGEsYil9Onk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiBpbiBhJiZCKGEuY29uc3RydWN0b3IucHJvdG90eXBlW2JdLFwidW5kZWZpbmVkXCIpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7aWYodHlwZW9mIGMhPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBkPXUuY2FsbChhcmd1bWVudHMsMSksZT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXt2YXIgYT1mdW5jdGlvbigpe307YS5wcm90b3R5cGU9Yy5wcm90b3R5cGU7dmFyIGY9bmV3IGEsZz1jLmFwcGx5KGYsZC5jb25jYXQodS5jYWxsKGFyZ3VtZW50cykpKTtyZXR1cm4gT2JqZWN0KGcpPT09Zz9nOmZ9cmV0dXJuIGMuYXBwbHkoYixkLmNvbmNhdCh1LmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gZX0pO3ZhciBHPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5qb2luKFwiXCIpLGY9Yy5sZW5ndGg7dyhkLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yi5zdHlsZVNoZWV0c1tiLnN0eWxlU2hlZXRzLmxlbmd0aC0xXSxnPWQ/ZC5jc3NSdWxlcyYmZC5jc3NSdWxlc1swXT9kLmNzc1J1bGVzWzBdLmNzc1RleHQ6ZC5jc3NUZXh0fHxcIlwiOlwiXCIsaD1hLmNoaWxkTm9kZXMsaT17fTt3aGlsZShmLS0paVtoW2ZdLmlkXT1oW2ZdO2UuY3NzdHJhbnNmb3JtczNkPShpLmNzc3RyYW5zZm9ybXMzZCYmaS5jc3N0cmFuc2Zvcm1zM2Qub2Zmc2V0TGVmdCk9PT05JiZpLmNzc3RyYW5zZm9ybXMzZC5vZmZzZXRIZWlnaHQ9PT0zfSxmLGMpfShbLFtcIkBtZWRpYSAoXCIsbS5qb2luKFwidHJhbnNmb3JtLTNkKSwoXCIpLGgsXCIpXCIsXCJ7I2Nzc3RyYW5zZm9ybXMzZHtsZWZ0OjlweDtwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6M3B4O319XCJdLmpvaW4oXCJcIildLFssXCJjc3N0cmFuc2Zvcm1zM2RcIl0pO3EuY3NzdHJhbnNmb3JtczNkPWZ1bmN0aW9uKCl7dmFyIGE9ISFGKFwicGVyc3BlY3RpdmVcIik7cmV0dXJuIGEmJlwid2Via2l0UGVyc3BlY3RpdmVcImluIGcuc3R5bGUmJihhPWUuY3NzdHJhbnNmb3JtczNkKSxhfSxxLmNzc3RyYW5zaXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIEYoXCJ0cmFuc2l0aW9uXCIpfTtmb3IodmFyIEggaW4gcSl5KHEsSCkmJih2PUgudG9Mb3dlckNhc2UoKSxlW3ZdPXFbSF0oKSx0LnB1c2goKGVbdl0/XCJcIjpcIm5vLVwiKSt2KSk7cmV0dXJuIHooXCJcIiksaT1rPW51bGwsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBnKGEsYil7dmFyIGM9YS5jcmVhdGVFbGVtZW50KFwicFwiKSxkPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdfHxhLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYy5pbm5lckhUTUw9XCJ4PHN0eWxlPlwiK2IrXCI8L3N0eWxlPlwiLGQuaW5zZXJ0QmVmb3JlKGMubGFzdENoaWxkLGQuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gaCgpe3ZhciBhPWsuZWxlbWVudHM7cmV0dXJuIHR5cGVvZiBhPT1cInN0cmluZ1wiP2Euc3BsaXQoXCIgXCIpOmF9ZnVuY3Rpb24gaShhKXt2YXIgYj17fSxjPWEuY3JlYXRlRWxlbWVudCxlPWEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCxmPWUoKTthLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGU9KGJbYV18fChiW2FdPWMoYSkpKS5jbG9uZU5vZGUoKTtyZXR1cm4gay5zaGl2TWV0aG9kcyYmZS5jYW5IYXZlQ2hpbGRyZW4mJiFkLnRlc3QoYSk/Zi5hcHBlbmRDaGlsZChlKTplfSxhLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ9RnVuY3Rpb24oXCJoLGZcIixcInJldHVybiBmdW5jdGlvbigpe3ZhciBuPWYuY2xvbmVOb2RlKCksYz1uLmNyZWF0ZUVsZW1lbnQ7aC5zaGl2TWV0aG9kcyYmKFwiK2goKS5qb2luKCkucmVwbGFjZSgvXFx3Ky9nLGZ1bmN0aW9uKGEpe3JldHVybiBiW2FdPWMoYSksZi5jcmVhdGVFbGVtZW50KGEpLCdjKFwiJythKydcIiknfSkrXCIpO3JldHVybiBufVwiKShrLGYpfWZ1bmN0aW9uIGooYSl7dmFyIGI7cmV0dXJuIGEuZG9jdW1lbnRTaGl2ZWQ/YTooay5zaGl2Q1NTJiYhZSYmKGI9ISFnKGEsXCJhcnRpY2xlLGFzaWRlLGRldGFpbHMsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGhlYWRlcixoZ3JvdXAsbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja31hdWRpb3tkaXNwbGF5Om5vbmV9Y2FudmFzLHZpZGVve2Rpc3BsYXk6aW5saW5lLWJsb2NrOypkaXNwbGF5OmlubGluZTsqem9vbToxfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1hdWRpb1tjb250cm9sc117ZGlzcGxheTppbmxpbmUtYmxvY2s7KmRpc3BsYXk6aW5saW5lOyp6b29tOjF9bWFya3tiYWNrZ3JvdW5kOiNGRjA7Y29sb3I6IzAwMH1cIikpLGZ8fChiPSFpKGEpKSxiJiYoYS5kb2N1bWVudFNoaXZlZD1iKSxhKX12YXIgYz1hLmh0bWw1fHx7fSxkPS9ePHxeKD86YnV0dG9ufGZvcm18bWFwfHNlbGVjdHx0ZXh0YXJlYSkkL2ksZSxmOyhmdW5jdGlvbigpe3ZhciBhPWIuY3JlYXRlRWxlbWVudChcImFcIik7YS5pbm5lckhUTUw9XCI8eHl6PjwveHl6PlwiLGU9XCJoaWRkZW5cImluIGEsZj1hLmNoaWxkTm9kZXMubGVuZ3RoPT0xfHxmdW5jdGlvbigpe3RyeXtiLmNyZWF0ZUVsZW1lbnQoXCJhXCIpfWNhdGNoKGEpe3JldHVybiEwfXZhciBjPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3JldHVybiB0eXBlb2YgYy5jbG9uZU5vZGU9PVwidW5kZWZpbmVkXCJ8fHR5cGVvZiBjLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ9PVwidW5kZWZpbmVkXCJ8fHR5cGVvZiBjLmNyZWF0ZUVsZW1lbnQ9PVwidW5kZWZpbmVkXCJ9KCl9KSgpO3ZhciBrPXtlbGVtZW50czpjLmVsZW1lbnRzfHxcImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgaGVhZGVyIGhncm91cCBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRpbWUgdmlkZW9cIixzaGl2Q1NTOmMuc2hpdkNTUyE9PSExLHNoaXZNZXRob2RzOmMuc2hpdk1ldGhvZHMhPT0hMSx0eXBlOlwiZGVmYXVsdFwiLHNoaXZEb2N1bWVudDpqfTthLmh0bWw1PWssaihiKX0odGhpcyxiKSxlLl92ZXJzaW9uPWQsZS5fcHJlZml4ZXM9bSxlLl9kb21QcmVmaXhlcz1wLGUuX2Nzc29tUHJlZml4ZXM9byxlLnRlc3RQcm9wPWZ1bmN0aW9uKGEpe3JldHVybiBEKFthXSl9LGUudGVzdEFsbFByb3BzPUYsZS50ZXN0U3R5bGVzPXcsZy5jbGFzc05hbWU9Zy5jbGFzc05hbWUucmVwbGFjZSgvKF58XFxzKW5vLWpzKFxcc3wkKS8sXCIkMSQyXCIpKyhmP1wiIGpzIFwiK3Quam9pbihcIiBcIik6XCJcIiksZX0odGhpcyx0aGlzLmRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gby5jYWxsKGEpPT1cIltvYmplY3QgRnVuY3Rpb25dXCJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4gdHlwZW9mIGE9PVwic3RyaW5nXCJ9ZnVuY3Rpb24gZigpe31mdW5jdGlvbiBnKGEpe3JldHVybiFhfHxhPT1cImxvYWRlZFwifHxhPT1cImNvbXBsZXRlXCJ8fGE9PVwidW5pbml0aWFsaXplZFwifWZ1bmN0aW9uIGgoKXt2YXIgYT1wLnNoaWZ0KCk7cT0xLGE/YS50P20oZnVuY3Rpb24oKXsoYS50PT1cImNcIj9CLmluamVjdENzczpCLmluamVjdEpzKShhLnMsMCxhLmEsYS54LGEuZSwxKX0sMCk6KGEoKSxoKCkpOnE9MH1mdW5jdGlvbiBpKGEsYyxkLGUsZixpLGope2Z1bmN0aW9uIGsoYil7aWYoIW8mJmcobC5yZWFkeVN0YXRlKSYmKHUucj1vPTEsIXEmJmgoKSxsLm9ubG9hZD1sLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIpKXthIT1cImltZ1wiJiZtKGZ1bmN0aW9uKCl7dC5yZW1vdmVDaGlsZChsKX0sNTApO2Zvcih2YXIgZCBpbiB5W2NdKXlbY10uaGFzT3duUHJvcGVydHkoZCkmJnlbY11bZF0ub25sb2FkKCl9fXZhciBqPWp8fEIuZXJyb3JUaW1lb3V0LGw9e30sbz0wLHI9MCx1PXt0OmQsczpjLGU6ZixhOmkseDpqfTt5W2NdPT09MSYmKHI9MSx5W2NdPVtdLGw9Yi5jcmVhdGVFbGVtZW50KGEpKSxhPT1cIm9iamVjdFwiP2wuZGF0YT1jOihsLnNyYz1jLGwudHlwZT1hKSxsLndpZHRoPWwuaGVpZ2h0PVwiMFwiLGwub25lcnJvcj1sLm9ubG9hZD1sLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2suY2FsbCh0aGlzLHIpfSxwLnNwbGljZShlLDAsdSksYSE9XCJpbWdcIiYmKHJ8fHlbY109PT0yPyh0Lmluc2VydEJlZm9yZShsLHM/bnVsbDpuKSxtKGssaikpOnlbY10ucHVzaChsKSl9ZnVuY3Rpb24gaihhLGIsYyxkLGYpe3JldHVybiBxPTAsYj1ifHxcImpcIixlKGEpP2koYj09XCJjXCI/djp1LGEsYix0aGlzLmkrKyxjLGQsZik6KHAuc3BsaWNlKHRoaXMuaSsrLDAsYSkscC5sZW5ndGg9PTEmJmgoKSksdGhpc31mdW5jdGlvbiBrKCl7dmFyIGE9QjtyZXR1cm4gYS5sb2FkZXI9e2xvYWQ6aixpOjB9LGF9dmFyIGw9Yi5kb2N1bWVudEVsZW1lbnQsbT1hLnNldFRpbWVvdXQsbj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdLG89e30udG9TdHJpbmcscD1bXSxxPTAscj1cIk1vekFwcGVhcmFuY2VcImluIGwuc3R5bGUscz1yJiYhIWIuY3JlYXRlUmFuZ2UoKS5jb21wYXJlTm9kZSx0PXM/bDpuLnBhcmVudE5vZGUsbD1hLm9wZXJhJiZvLmNhbGwoYS5vcGVyYSk9PVwiW29iamVjdCBPcGVyYV1cIixsPSEhYi5hdHRhY2hFdmVudCYmIWwsdT1yP1wib2JqZWN0XCI6bD9cInNjcmlwdFwiOlwiaW1nXCIsdj1sP1wic2NyaXB0XCI6dSx3PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVybiBvLmNhbGwoYSk9PVwiW29iamVjdCBBcnJheV1cIn0seD1bXSx5PXt9LHo9e3RpbWVvdXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5sZW5ndGgmJihhLnRpbWVvdXQ9YlswXSksYX19LEEsQjtCPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGE9YS5zcGxpdChcIiFcIiksYj14Lmxlbmd0aCxjPWEucG9wKCksZD1hLmxlbmd0aCxjPXt1cmw6YyxvcmlnVXJsOmMscHJlZml4ZXM6YX0sZSxmLGc7Zm9yKGY9MDtmPGQ7ZisrKWc9YVtmXS5zcGxpdChcIj1cIiksKGU9eltnLnNoaWZ0KCldKSYmKGM9ZShjLGcpKTtmb3IoZj0wO2Y8YjtmKyspYz14W2ZdKGMpO3JldHVybiBjfWZ1bmN0aW9uIGcoYSxlLGYsZyxpKXt2YXIgaj1iKGEpLGw9ai5hdXRvQ2FsbGJhY2s7ai51cmwuc3BsaXQoXCIuXCIpLnBvcCgpLnNwbGl0KFwiP1wiKS5zaGlmdCgpLGouYnlwYXNzfHwoZSYmKGU9ZChlKT9lOmVbYV18fGVbZ118fGVbYS5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCI/XCIpWzBdXXx8aCksai5pbnN0ZWFkP2ouaW5zdGVhZChhLGUsZixnLGkpOih5W2oudXJsXT9qLm5vZXhlYz0hMDp5W2oudXJsXT0xLGYubG9hZChqLnVybCxqLmZvcmNlQ1NTfHwhai5mb3JjZUpTJiZcImNzc1wiPT1qLnVybC5zcGxpdChcIi5cIikucG9wKCkuc3BsaXQoXCI/XCIpLnNoaWZ0KCk/XCJjXCI6YyxqLm5vZXhlYyxqLmF0dHJzLGoudGltZW91dCksKGQoZSl8fGQobCkpJiZmLmxvYWQoZnVuY3Rpb24oKXtrKCksZSYmZShqLm9yaWdVcmwsaSxnKSxsJiZsKGoub3JpZ1VybCxpLGcpLHlbai51cmxdPTJ9KSkpfWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGEsYyl7aWYoYSl7aWYoZShhKSljfHwoaj1mdW5jdGlvbigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtrLmFwcGx5KHRoaXMsYSksbCgpfSksZyhhLGosYiwwLGgpO2Vsc2UgaWYoT2JqZWN0KGEpPT09YSlmb3IobiBpbiBtPWZ1bmN0aW9uKCl7dmFyIGI9MCxjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmYisrO3JldHVybiBifSgpLGEpYS5oYXNPd25Qcm9wZXJ0eShuKSYmKCFjJiYhLS1tJiYoZChqKT9qPWZ1bmN0aW9uKCl7dmFyIGE9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpO2suYXBwbHkodGhpcyxhKSxsKCl9Ompbbl09ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpO2EmJmEuYXBwbHkodGhpcyxiKSxsKCl9fShrW25dKSksZyhhW25dLGosYixuLGgpKX1lbHNlIWMmJmwoKX12YXIgaD0hIWEudGVzdCxpPWEubG9hZHx8YS5ib3RoLGo9YS5jYWxsYmFja3x8ZixrPWosbD1hLmNvbXBsZXRlfHxmLG0sbjtjKGg/YS55ZXA6YS5ub3BlLCEhaSksaSYmYyhpKX12YXIgaixsLG09dGhpcy55ZXBub3BlLmxvYWRlcjtpZihlKGEpKWcoYSwwLG0sMCk7ZWxzZSBpZih3KGEpKWZvcihqPTA7ajxhLmxlbmd0aDtqKyspbD1hW2pdLGUobCk/ZyhsLDAsbSwwKTp3KGwpP0IobCk6T2JqZWN0KGwpPT09bCYmaShsLG0pO2Vsc2UgT2JqZWN0KGEpPT09YSYmaShhLG0pfSxCLmFkZFByZWZpeD1mdW5jdGlvbihhLGIpe3pbYV09Yn0sQi5hZGRGaWx0ZXI9ZnVuY3Rpb24oYSl7eC5wdXNoKGEpfSxCLmVycm9yVGltZW91dD0xZTQsYi5yZWFkeVN0YXRlPT1udWxsJiZiLmFkZEV2ZW50TGlzdGVuZXImJihiLnJlYWR5U3RhdGU9XCJsb2FkaW5nXCIsYi5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEE9ZnVuY3Rpb24oKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsQSwwKSxiLnJlYWR5U3RhdGU9XCJjb21wbGV0ZVwifSwwKSksYS55ZXBub3BlPWsoKSxhLnllcG5vcGUuZXhlY3V0ZVN0YWNrPWgsYS55ZXBub3BlLmluamVjdEpzPWZ1bmN0aW9uKGEsYyxkLGUsaSxqKXt2YXIgaz1iLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksbCxvLGU9ZXx8Qi5lcnJvclRpbWVvdXQ7ay5zcmM9YTtmb3IobyBpbiBkKWsuc2V0QXR0cmlidXRlKG8sZFtvXSk7Yz1qP2g6Y3x8ZixrLm9ucmVhZHlzdGF0ZWNoYW5nZT1rLm9ubG9hZD1mdW5jdGlvbigpeyFsJiZnKGsucmVhZHlTdGF0ZSkmJihsPTEsYygpLGsub25sb2FkPWsub25yZWFkeXN0YXRlY2hhbmdlPW51bGwpfSxtKGZ1bmN0aW9uKCl7bHx8KGw9MSxjKDEpKX0sZSksaT9rLm9ubG9hZCgpOm4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoayxuKX0sYS55ZXBub3BlLmluamVjdENzcz1mdW5jdGlvbihhLGMsZCxlLGcsaSl7dmFyIGU9Yi5jcmVhdGVFbGVtZW50KFwibGlua1wiKSxqLGM9aT9oOmN8fGY7ZS5ocmVmPWEsZS5yZWw9XCJzdHlsZXNoZWV0XCIsZS50eXBlPVwidGV4dC9jc3NcIjtmb3IoaiBpbiBkKWUuc2V0QXR0cmlidXRlKGosZFtqXSk7Z3x8KG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSxuKSxtKGMsMCkpfX0odGhpcyxkb2N1bWVudCksTW9kZXJuaXpyLmxvYWQ9ZnVuY3Rpb24oKXt5ZXBub3BlLmFwcGx5KHdpbmRvdyxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSl9O1xyXG5cclxuXHJcblxyXG48IS0tXHJcbi8vdjEuN1xyXG4vLyBGbGFzaCBQbGF5ZXIgVmVyc2lvbiBEZXRlY3Rpb25cclxuLy8gRGV0ZWN0IENsaWVudCBCcm93c2VyIHR5cGVcclxuLy8gQ29weXJpZ2h0IDIwMDUtMjAwOCBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZC4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbnZhciBpc0lFICA9IChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRVwiKSAhPSAtMSkgPyB0cnVlIDogZmFsc2U7XHJcbnZhciBpc1dpbiA9IChuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3aW5cIikgIT0gLTEpID8gdHJ1ZSA6IGZhbHNlO1xyXG52YXIgaXNPcGVyYSA9IChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJPcGVyYVwiKSAhPSAtMSkgPyB0cnVlIDogZmFsc2U7XHJcbmZ1bmN0aW9uIENvbnRyb2xWZXJzaW9uKClcclxue1xyXG5cdHZhciB2ZXJzaW9uO1xyXG5cdHZhciBheG87XHJcblx0dmFyIGU7XHJcblx0Ly8gTk9URSA6IG5ldyBBY3RpdmVYT2JqZWN0KHN0ckZvbykgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiBzdHJGb28gaXNuJ3QgaW4gdGhlIHJlZ2lzdHJ5XHJcblx0dHJ5IHtcclxuXHRcdC8vIHZlcnNpb24gd2lsbCBiZSBzZXQgZm9yIDcuWCBvciBncmVhdGVyIHBsYXllcnNcclxuXHRcdGF4byA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2guN1wiKTtcclxuXHRcdHZlcnNpb24gPSBheG8uR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0fVxyXG5cdGlmICghdmVyc2lvbilcclxuXHR7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyB2ZXJzaW9uIHdpbGwgYmUgc2V0IGZvciA2LlggcGxheWVycyBvbmx5XHJcblx0XHRcdGF4byA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2guNlwiKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGluc3RhbGxlZCBwbGF5ZXIgaXMgc29tZSByZXZpc2lvbiBvZiA2LjBcclxuXHRcdFx0Ly8gR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKSBjcmFzaGVzIGZvciB2ZXJzaW9ucyA2LjAuMjIgdGhyb3VnaCA2LjAuMjksXHJcblx0XHRcdC8vIHNvIHdlIGhhdmUgdG8gYmUgY2FyZWZ1bC4gXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBkZWZhdWx0IHRvIHRoZSBmaXJzdCBwdWJsaWMgdmVyc2lvblxyXG5cdFx0XHR2ZXJzaW9uID0gXCJXSU4gNiwwLDIxLDBcIjtcclxuXHRcdFx0Ly8gdGhyb3dzIGlmIEFsbG93U2NyaXBBY2Nlc3MgZG9lcyBub3QgZXhpc3QgKGludHJvZHVjZWQgaW4gNi4wcjQ3KVx0XHRcclxuXHRcdFx0YXhvLkFsbG93U2NyaXB0QWNjZXNzID0gXCJhbHdheXNcIjtcclxuXHRcdFx0Ly8gc2FmZSB0byBjYWxsIGZvciA2LjByNDcgb3IgZ3JlYXRlclxyXG5cdFx0XHR2ZXJzaW9uID0gYXhvLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmICghdmVyc2lvbilcclxuXHR7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyB2ZXJzaW9uIHdpbGwgYmUgc2V0IGZvciA0Llggb3IgNS5YIHBsYXllclxyXG5cdFx0XHRheG8gPSBuZXcgQWN0aXZlWE9iamVjdChcIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoLjNcIik7XHJcblx0XHRcdHZlcnNpb24gPSBheG8uR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCF2ZXJzaW9uKVxyXG5cdHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIHZlcnNpb24gd2lsbCBiZSBzZXQgZm9yIDMuWCBwbGF5ZXJcclxuXHRcdFx0YXhvID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaC4zXCIpO1xyXG5cdFx0XHR2ZXJzaW9uID0gXCJXSU4gMywwLDE4LDBcIjtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCF2ZXJzaW9uKVxyXG5cdHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIHZlcnNpb24gd2lsbCBiZSBzZXQgZm9yIDIuWCBwbGF5ZXJcclxuXHRcdFx0YXhvID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiKTtcclxuXHRcdFx0dmVyc2lvbiA9IFwiV0lOIDIsMCwwLDExXCI7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdHZlcnNpb24gPSAtMTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHZlcnNpb247XHJcbn1cclxuLy8gSmF2YVNjcmlwdCBoZWxwZXIgcmVxdWlyZWQgdG8gZGV0ZWN0IEZsYXNoIFBsYXllciBQbHVnSW4gdmVyc2lvbiBpbmZvcm1hdGlvblxyXG5mdW5jdGlvbiBHZXRTd2ZWZXIoKXtcclxuXHQvLyBOUy9PcGVyYSB2ZXJzaW9uID49IDMgY2hlY2sgZm9yIEZsYXNoIHBsdWdpbiBpbiBwbHVnaW4gYXJyYXlcclxuXHR2YXIgZmxhc2hWZXIgPSAtMTtcclxuXHRcclxuXHRpZiAobmF2aWdhdG9yLnBsdWdpbnMgIT0gbnVsbCAmJiBuYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGggPiAwKSB7XHJcblx0XHRpZiAobmF2aWdhdG9yLnBsdWdpbnNbXCJTaG9ja3dhdmUgRmxhc2ggMi4wXCJdIHx8IG5hdmlnYXRvci5wbHVnaW5zW1wiU2hvY2t3YXZlIEZsYXNoXCJdKSB7XHJcblx0XHRcdHZhciBzd1ZlcjIgPSBuYXZpZ2F0b3IucGx1Z2luc1tcIlNob2Nrd2F2ZSBGbGFzaCAyLjBcIl0gPyBcIiAyLjBcIiA6IFwiXCI7XHJcblx0XHRcdHZhciBmbGFzaERlc2NyaXB0aW9uID0gbmF2aWdhdG9yLnBsdWdpbnNbXCJTaG9ja3dhdmUgRmxhc2hcIiArIHN3VmVyMl0uZGVzY3JpcHRpb247XHJcblx0XHRcdHZhciBkZXNjQXJyYXkgPSBmbGFzaERlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKTtcclxuXHRcdFx0dmFyIHRlbXBBcnJheU1ham9yID0gZGVzY0FycmF5WzJdLnNwbGl0KFwiLlwiKTtcdFx0XHRcclxuXHRcdFx0dmFyIHZlcnNpb25NYWpvciA9IHRlbXBBcnJheU1ham9yWzBdO1xyXG5cdFx0XHR2YXIgdmVyc2lvbk1pbm9yID0gdGVtcEFycmF5TWFqb3JbMV07XHJcblx0XHRcdHZhciB2ZXJzaW9uUmV2aXNpb24gPSBkZXNjQXJyYXlbM107XHJcblx0XHRcdGlmICh2ZXJzaW9uUmV2aXNpb24gPT0gXCJcIikge1xyXG5cdFx0XHRcdHZlcnNpb25SZXZpc2lvbiA9IGRlc2NBcnJheVs0XTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodmVyc2lvblJldmlzaW9uWzBdID09IFwiZFwiKSB7XHJcblx0XHRcdFx0dmVyc2lvblJldmlzaW9uID0gdmVyc2lvblJldmlzaW9uLnN1YnN0cmluZygxKTtcclxuXHRcdFx0fSBlbHNlIGlmICh2ZXJzaW9uUmV2aXNpb25bMF0gPT0gXCJyXCIpIHtcclxuXHRcdFx0XHR2ZXJzaW9uUmV2aXNpb24gPSB2ZXJzaW9uUmV2aXNpb24uc3Vic3RyaW5nKDEpO1xyXG5cdFx0XHRcdGlmICh2ZXJzaW9uUmV2aXNpb24uaW5kZXhPZihcImRcIikgPiAwKSB7XHJcblx0XHRcdFx0XHR2ZXJzaW9uUmV2aXNpb24gPSB2ZXJzaW9uUmV2aXNpb24uc3Vic3RyaW5nKDAsIHZlcnNpb25SZXZpc2lvbi5pbmRleE9mKFwiZFwiKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBmbGFzaFZlciA9IHZlcnNpb25NYWpvciArIFwiLlwiICsgdmVyc2lvbk1pbm9yICsgXCIuXCIgKyB2ZXJzaW9uUmV2aXNpb247XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIE1TTi9XZWJUViAyLjYgc3VwcG9ydHMgRmxhc2ggNFxyXG5cdGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2VidHYvMi42XCIpICE9IC0xKSBmbGFzaFZlciA9IDQ7XHJcblx0Ly8gV2ViVFYgMi41IHN1cHBvcnRzIEZsYXNoIDNcclxuXHRlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYnR2LzIuNVwiKSAhPSAtMSkgZmxhc2hWZXIgPSAzO1xyXG5cdC8vIG9sZGVyIFdlYlRWIHN1cHBvcnRzIEZsYXNoIDJcclxuXHRlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYnR2XCIpICE9IC0xKSBmbGFzaFZlciA9IDI7XHJcblx0ZWxzZSBpZiAoIGlzSUUgJiYgaXNXaW4gJiYgIWlzT3BlcmEgKSB7XHJcblx0XHRmbGFzaFZlciA9IENvbnRyb2xWZXJzaW9uKCk7XHJcblx0fVx0XHJcblx0cmV0dXJuIGZsYXNoVmVyO1xyXG59XHJcbi8vIFdoZW4gY2FsbGVkIHdpdGggcmVxTWFqb3JWZXIsIHJlcU1pbm9yVmVyLCByZXFSZXZpc2lvbiByZXR1cm5zIHRydWUgaWYgdGhhdCB2ZXJzaW9uIG9yIGdyZWF0ZXIgaXMgYXZhaWxhYmxlXHJcbmZ1bmN0aW9uIERldGVjdEZsYXNoVmVyKHJlcU1ham9yVmVyLCByZXFNaW5vclZlciwgcmVxUmV2aXNpb24pXHJcbntcclxuXHR2ZXJzaW9uU3RyID0gR2V0U3dmVmVyKCk7XHJcblx0aWYgKHZlcnNpb25TdHIgPT0gLTEgKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSBlbHNlIGlmICh2ZXJzaW9uU3RyICE9IDApIHtcclxuXHRcdGlmKGlzSUUgJiYgaXNXaW4gJiYgIWlzT3BlcmEpIHtcclxuXHRcdFx0Ly8gR2l2ZW4gXCJXSU4gMiwwLDAsMTFcIlxyXG5cdFx0XHR0ZW1wQXJyYXkgICAgICAgICA9IHZlcnNpb25TdHIuc3BsaXQoXCIgXCIpOyBcdC8vIFtcIldJTlwiLCBcIjIsMCwwLDExXCJdXHJcblx0XHRcdHRlbXBTdHJpbmcgICAgICAgID0gdGVtcEFycmF5WzFdO1x0XHRcdC8vIFwiMiwwLDAsMTFcIlxyXG5cdFx0XHR2ZXJzaW9uQXJyYXkgICAgICA9IHRlbXBTdHJpbmcuc3BsaXQoXCIsXCIpO1x0Ly8gWycyJywgJzAnLCAnMCcsICcxMSddXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2ZXJzaW9uQXJyYXkgICAgICA9IHZlcnNpb25TdHIuc3BsaXQoXCIuXCIpO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHZlcnNpb25NYWpvciAgICAgID0gdmVyc2lvbkFycmF5WzBdO1xyXG5cdFx0dmFyIHZlcnNpb25NaW5vciAgICAgID0gdmVyc2lvbkFycmF5WzFdO1xyXG5cdFx0dmFyIHZlcnNpb25SZXZpc2lvbiAgID0gdmVyc2lvbkFycmF5WzJdO1xyXG4gICAgICAgIFx0Ly8gaXMgdGhlIG1ham9yLnJldmlzaW9uID49IHJlcXVlc3RlZCBtYWpvci5yZXZpc2lvbiBBTkQgdGhlIG1pbm9yIHZlcnNpb24gPj0gcmVxdWVzdGVkIG1pbm9yXHJcblx0XHRpZiAodmVyc2lvbk1ham9yID4gcGFyc2VGbG9hdChyZXFNYWpvclZlcikpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKHZlcnNpb25NYWpvciA9PSBwYXJzZUZsb2F0KHJlcU1ham9yVmVyKSkge1xyXG5cdFx0XHRpZiAodmVyc2lvbk1pbm9yID4gcGFyc2VGbG9hdChyZXFNaW5vclZlcikpXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdGVsc2UgaWYgKHZlcnNpb25NaW5vciA9PSBwYXJzZUZsb2F0KHJlcU1pbm9yVmVyKSkge1xyXG5cdFx0XHRcdGlmICh2ZXJzaW9uUmV2aXNpb24gPj0gcGFyc2VGbG9hdChyZXFSZXZpc2lvbikpXHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxufVxyXG5mdW5jdGlvbiBBQ19BZGRFeHRlbnNpb24oc3JjLCBleHQpXHJcbntcclxuICBpZiAoc3JjLmluZGV4T2YoJz8nKSAhPSAtMSlcclxuICAgIHJldHVybiBzcmMucmVwbGFjZSgvXFw/LywgZXh0Kyc/Jyk7IFxyXG4gIGVsc2VcclxuICAgIHJldHVybiBzcmMgKyBleHQ7XHJcbn1cclxuZnVuY3Rpb24gQUNfR2VuZXJhdGVvYmoob2JqQXR0cnMsIHBhcmFtcywgZW1iZWRBdHRycykgXHJcbnsgXHJcbiAgdmFyIHN0ciA9ICcnO1xyXG4gIGlmIChpc0lFICYmIGlzV2luICYmICFpc09wZXJhKVxyXG4gIHtcclxuICAgIHN0ciArPSAnPG9iamVjdCAnO1xyXG4gICAgZm9yICh2YXIgaSBpbiBvYmpBdHRycylcclxuICAgIHtcclxuICAgICAgc3RyICs9IGkgKyAnPVwiJyArIG9iakF0dHJzW2ldICsgJ1wiICc7XHJcbiAgICB9XHJcbiAgICBzdHIgKz0gJz4nO1xyXG4gICAgZm9yICh2YXIgaSBpbiBwYXJhbXMpXHJcbiAgICB7XHJcbiAgICAgIHN0ciArPSAnPHBhcmFtIG5hbWU9XCInICsgaSArICdcIiB2YWx1ZT1cIicgKyBwYXJhbXNbaV0gKyAnXCIgLz4gJztcclxuICAgIH1cclxuICAgIHN0ciArPSAnPC9vYmplY3Q+JztcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHN0ciArPSAnPGVtYmVkICc7XHJcbiAgICBmb3IgKHZhciBpIGluIGVtYmVkQXR0cnMpXHJcbiAgICB7XHJcbiAgICAgIHN0ciArPSBpICsgJz1cIicgKyBlbWJlZEF0dHJzW2ldICsgJ1wiICc7XHJcbiAgICB9XHJcbiAgICBzdHIgKz0gJz4gPC9lbWJlZD4nO1xyXG4gIH1cclxuICBkb2N1bWVudC53cml0ZShzdHIpO1xyXG59XHJcbmZ1bmN0aW9uIEFDX0ZMX1J1bkNvbnRlbnQoKXtcclxuICB2YXIgcmV0ID0gXHJcbiAgICBBQ19HZXRBcmdzXHJcbiAgICAoICBhcmd1bWVudHMsIFwiLnN3ZlwiLCBcIm1vdmllXCIsIFwiY2xzaWQ6ZDI3Y2RiNmUtYWU2ZC0xMWNmLTk2YjgtNDQ0NTUzNTQwMDAwXCJcclxuICAgICAsIFwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIlxyXG4gICAgKTtcclxuICBBQ19HZW5lcmF0ZW9iaihyZXQub2JqQXR0cnMsIHJldC5wYXJhbXMsIHJldC5lbWJlZEF0dHJzKTtcclxufVxyXG5mdW5jdGlvbiBBQ19TV19SdW5Db250ZW50KCl7XHJcbiAgdmFyIHJldCA9IFxyXG4gICAgQUNfR2V0QXJnc1xyXG4gICAgKCAgYXJndW1lbnRzLCBcIi5kY3JcIiwgXCJzcmNcIiwgXCJjbHNpZDoxNjZCMUJDQS0zRjlDLTExQ0YtODA3NS00NDQ1NTM1NDAwMDBcIlxyXG4gICAgICwgbnVsbFxyXG4gICAgKTtcclxuICBBQ19HZW5lcmF0ZW9iaihyZXQub2JqQXR0cnMsIHJldC5wYXJhbXMsIHJldC5lbWJlZEF0dHJzKTtcclxufVxyXG5mdW5jdGlvbiBBQ19HZXRBcmdzKGFyZ3MsIGV4dCwgc3JjUGFyYW1OYW1lLCBjbGFzc2lkLCBtaW1lVHlwZSl7XHJcbiAgdmFyIHJldCA9IG5ldyBPYmplY3QoKTtcclxuICByZXQuZW1iZWRBdHRycyA9IG5ldyBPYmplY3QoKTtcclxuICByZXQucGFyYW1zID0gbmV3IE9iamVjdCgpO1xyXG4gIHJldC5vYmpBdHRycyA9IG5ldyBPYmplY3QoKTtcclxuICBmb3IgKHZhciBpPTA7IGkgPCBhcmdzLmxlbmd0aDsgaT1pKzIpe1xyXG4gICAgdmFyIGN1cnJBcmcgPSBhcmdzW2ldLnRvTG93ZXJDYXNlKCk7ICAgIFxyXG4gICAgc3dpdGNoIChjdXJyQXJnKXtcdFxyXG4gICAgICBjYXNlIFwiY2xhc3NpZFwiOlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicGx1Z2luc3BhZ2VcIjpcclxuICAgICAgICByZXQuZW1iZWRBdHRyc1thcmdzW2ldXSA9IGFyZ3NbaSsxXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInNyY1wiOlxyXG4gICAgICBjYXNlIFwibW92aWVcIjpcdFxyXG4gICAgICAgIGFyZ3NbaSsxXSA9IEFDX0FkZEV4dGVuc2lvbihhcmdzW2krMV0sIGV4dCk7XHJcbiAgICAgICAgcmV0LmVtYmVkQXR0cnNbXCJzcmNcIl0gPSBhcmdzW2krMV07XHJcbiAgICAgICAgcmV0LnBhcmFtc1tzcmNQYXJhbU5hbWVdID0gYXJnc1tpKzFdO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwib25hZnRlcnVwZGF0ZVwiOlxyXG4gICAgICBjYXNlIFwib25iZWZvcmV1cGRhdGVcIjpcclxuICAgICAgY2FzZSBcIm9uYmx1clwiOlxyXG4gICAgICBjYXNlIFwib25jZWxsY2hhbmdlXCI6XHJcbiAgICAgIGNhc2UgXCJvbmNsaWNrXCI6XHJcbiAgICAgIGNhc2UgXCJvbmRibGNsaWNrXCI6XHJcbiAgICAgIGNhc2UgXCJvbmRyYWdcIjpcclxuICAgICAgY2FzZSBcIm9uZHJhZ2VuZFwiOlxyXG4gICAgICBjYXNlIFwib25kcmFnZW50ZXJcIjpcclxuICAgICAgY2FzZSBcIm9uZHJhZ2xlYXZlXCI6XHJcbiAgICAgIGNhc2UgXCJvbmRyYWdvdmVyXCI6XHJcbiAgICAgIGNhc2UgXCJvbmRyb3BcIjpcclxuICAgICAgY2FzZSBcIm9uZmluaXNoXCI6XHJcbiAgICAgIGNhc2UgXCJvbmZvY3VzXCI6XHJcbiAgICAgIGNhc2UgXCJvbmhlbHBcIjpcclxuICAgICAgY2FzZSBcIm9ubW91c2Vkb3duXCI6XHJcbiAgICAgIGNhc2UgXCJvbm1vdXNldXBcIjpcclxuICAgICAgY2FzZSBcIm9ubW91c2VvdmVyXCI6XHJcbiAgICAgIGNhc2UgXCJvbm1vdXNlbW92ZVwiOlxyXG4gICAgICBjYXNlIFwib25tb3VzZW91dFwiOlxyXG4gICAgICBjYXNlIFwib25rZXlwcmVzc1wiOlxyXG4gICAgICBjYXNlIFwib25rZXlkb3duXCI6XHJcbiAgICAgIGNhc2UgXCJvbmtleXVwXCI6XHJcbiAgICAgIGNhc2UgXCJvbmxvYWRcIjpcclxuICAgICAgY2FzZSBcIm9ubG9zZWNhcHR1cmVcIjpcclxuICAgICAgY2FzZSBcIm9ucHJvcGVydHljaGFuZ2VcIjpcclxuICAgICAgY2FzZSBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiOlxyXG4gICAgICBjYXNlIFwib25yb3dzZGVsZXRlXCI6XHJcbiAgICAgIGNhc2UgXCJvbnJvd2VudGVyXCI6XHJcbiAgICAgIGNhc2UgXCJvbnJvd2V4aXRcIjpcclxuICAgICAgY2FzZSBcIm9ucm93c2luc2VydGVkXCI6XHJcbiAgICAgIGNhc2UgXCJvbnN0YXJ0XCI6XHJcbiAgICAgIGNhc2UgXCJvbnNjcm9sbFwiOlxyXG4gICAgICBjYXNlIFwib25iZWZvcmVlZGl0Zm9jdXNcIjpcclxuICAgICAgY2FzZSBcIm9uYWN0aXZhdGVcIjpcclxuICAgICAgY2FzZSBcIm9uYmVmb3JlZGVhY3RpdmF0ZVwiOlxyXG4gICAgICBjYXNlIFwib25kZWFjdGl2YXRlXCI6XHJcbiAgICAgIGNhc2UgXCJ0eXBlXCI6XHJcbiAgICAgIGNhc2UgXCJjb2RlYmFzZVwiOlxyXG4gICAgICBjYXNlIFwiaWRcIjpcclxuICAgICAgICByZXQub2JqQXR0cnNbYXJnc1tpXV0gPSBhcmdzW2krMV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ3aWR0aFwiOlxyXG4gICAgICBjYXNlIFwiaGVpZ2h0XCI6XHJcbiAgICAgIGNhc2UgXCJhbGlnblwiOlxyXG4gICAgICBjYXNlIFwidnNwYWNlXCI6IFxyXG4gICAgICBjYXNlIFwiaHNwYWNlXCI6XHJcbiAgICAgIGNhc2UgXCJjbGFzc1wiOlxyXG4gICAgICBjYXNlIFwidGl0bGVcIjpcclxuICAgICAgY2FzZSBcImFjY2Vzc2tleVwiOlxyXG4gICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICBjYXNlIFwidGFiaW5kZXhcIjpcclxuICAgICAgICByZXQuZW1iZWRBdHRyc1thcmdzW2ldXSA9IHJldC5vYmpBdHRyc1thcmdzW2ldXSA9IGFyZ3NbaSsxXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXQuZW1iZWRBdHRyc1thcmdzW2ldXSA9IHJldC5wYXJhbXNbYXJnc1tpXV0gPSBhcmdzW2krMV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldC5vYmpBdHRyc1tcImNsYXNzaWRcIl0gPSBjbGFzc2lkO1xyXG4gIGlmIChtaW1lVHlwZSkgcmV0LmVtYmVkQXR0cnNbXCJ0eXBlXCJdID0gbWltZVR5cGU7XHJcbiAgcmV0dXJuIHJldDtcclxufVxyXG5cclxuXHJcbihmdW5jdGlvbigkKSB7XHJcblxyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIERBVEEgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cclxuLy8gQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCAvL1xyXG5cclxuXHR2YXIgRGF0YSA9IHtcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBkZWZhdWx0c1xyXG5cclxuXHRcdC8vZGVmYXVsdCBzZXR0aW5ncyB2YWx1ZXNcclxuXHRcdGRlZmF1bHRzOiB7XHJcblx0XHRcdC8vc3R5bGVcclxuXHRcdFx0d2lkdGg6ICcxMDAlJywgXHJcblx0XHRcdHNpemU6ICdtZWRpdW0nLCBcclxuXHRcdFx0dGhlbWVzOiBbXSwgXHJcblx0XHRcdC8vdGV4dHNcclxuXHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgYW4gaXRlbScsIFxyXG5cdFx0XHQvL2NvbnRyb2xzXHJcblx0XHRcdHJlbW92YWJsZTogZmFsc2UsIFxyXG5cdFx0XHRlbXB0eTogZmFsc2UsIFxyXG5cdFx0XHRzZWFyY2g6IGZhbHNlLCBcclxuXHRcdFx0Ly9hamF4XHJcblx0XHRcdGFqYXg6IGZhbHNlLCBcclxuXHRcdFx0ZGF0YToge30sIFxyXG5cdFx0XHQvL3Bvc2l0aW9ubmluZ1xyXG5cdFx0XHRzY3JvbGxDb250YWluZXI6IG51bGwsIFxyXG5cdFx0XHR6SW5kZXg6IG51bGxcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IHNldERlZmF1bHRzXHJcblxyXG5cdFx0Ly9zZXQgZGVmYXVsdCBzZXR0aW5ncyB2YWx1ZXNcclxuXHRcdHNldHVwOiBmdW5jdGlvbihvcHRzKSB7XHJcblx0XHRcdC8vY29udHJvbHMgcHJvdmlkZWQgc2V0dGluZ3Mga2V5c1xyXG5cdFx0XHR2YXIgZGVmS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdHMpO1xyXG5cdFx0XHR2YXIgb3B0S2V5cyA9IE9iamVjdC5rZXlzKG9wdHMpO1xyXG5cdFx0XHR2YXIgaXNPayA9IHRydWU7XHJcblx0XHRcdG9wdEtleXMuZm9yRWFjaChmdW5jdGlvbihrKSB7XHJcblx0XHRcdFx0aWYoJC5pbkFycmF5KGssIGRlZktleXMpID09PSAtMSkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignc2VsZWN0TWFuaWEgfCB3cm9uZyBzZXR1cCBzZXR0aW5ncycpO1xyXG5cdFx0XHRcdFx0aXNPayA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vaWYgcHJvdmlkZWQgc2V0dGluZ3MgYXJlIG9rXHJcblx0XHRcdGlmKGlzT2spIHtcclxuXHRcdFx0XHR0aGlzLmRlZmF1bHRzID0gJC5leHRlbmQodHJ1ZSwge30sIERhdGEuZGVmYXVsdHMsIG9wdHMpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5HSU5FIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cclxuLy8gQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCAvL1xyXG5cclxuXHR2YXIgRW5naW5lID0ge1xyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGludGVybmFsU2V0dGluZ3NcclxuXHJcblx0XHQvL2luc2VydCBpbnRlcm5hbCBkYXRhIGludG8gc2V0dGluZ3Mgb2JqZWN0XHJcblx0XHRpbnRlcm5hbFNldHRpbmdzOiBmdW5jdGlvbigkb3JpZ2luYWxTZWxlY3QsIHNldHRpbmdzKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0Ly9pbml0aWFsaXplIGludGVyYWwgZGF0YVxyXG5cdFx0XHRzZXR0aW5ncy5tdWx0aXBsZSA9IGZhbHNlO1xyXG5cdFx0XHRzZXR0aW5ncy52YWx1ZXMgPSBbXTtcclxuXHRcdFx0Ly9pZiBzZWxlY3QgaXMgbXVsdGlwbGVcclxuXHRcdFx0c2V0dGluZ3MubXVsdGlwbGUgPSAkb3JpZ2luYWxTZWxlY3QuaXMoJ1ttdWx0aXBsZV0nKTtcclxuXHRcdFx0Ly9pZiBzZWxlY3QgaXMgZGlzYWJsZWRcclxuXHRcdFx0c2V0dGluZ3MuZGlzYWJsZWQgPSAkb3JpZ2luYWxTZWxlY3QuaXMoJ1tkaXNhYmxlZF0nKTtcclxuXHRcdFx0Ly9sb29wIHRocm91Z2ggc2VsZWN0ZWQgb3B0aW9uc1xyXG5cdFx0XHQkb3JpZ2luYWxTZWxlY3QuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvL2luc2VydCBzZWxlY3RlZCB2YWx1ZSBkYXRhXHJcblx0XHRcdFx0c2V0dGluZ3MudmFsdWVzLnB1c2goe1xyXG5cdFx0XHRcdFx0dmFsdWU6IHRoaXMudmFsdWUsIFxyXG5cdFx0XHRcdFx0dGV4dDogdGhpcy50ZXh0XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL3NlbmQgYmFjayBzZXR0aW5nc1xyXG5cdFx0XHRyZXR1cm4gc2V0dGluZ3M7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBnZXRBdHRyU2V0dGluZ3NcclxuXHJcblx0XHQvL2dldCBzZWxlY3RNYW5pYSBzZXR0aW5ncyBzdG9yZWQgYXMgYXR0cmlidXRlc1xyXG5cdFx0Z2V0QXR0clNldHRpbmdzOiBmdW5jdGlvbigkb3JpZ2luYWxTZWxlY3QpIHtcclxuXHRcdFx0dmFyIGF0dHJEYXRhID0ge307XHJcblx0XHRcdC8vYXZhaWxhYmxlIGF0dHJpYnV0ZXNcclxuXHRcdFx0dmFyIGF0dHJzID0gWyd3aWR0aCcsJ3NpemUnLCdwbGFjZWhvbGRlcicsJ3JlbW92YWJsZScsJ2VtcHR5Jywnc2VhcmNoJywnc2Nyb2xsQ29udGFpbmVyJywnekluZGV4J107XHJcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGF0dHJpYnV0ZXNcclxuXHRcdFx0YXR0cnMuZm9yRWFjaChmdW5jdGlvbihhdHRyKSB7XHJcblx0XHRcdFx0Ly9pZiBhdHRyaWJ1dGUgaXMgc2V0IG9uIHNlbGVjdFxyXG5cdFx0XHRcdGlmKCRvcmlnaW5hbFNlbGVjdC5pcygnW2RhdGEtJythdHRyKyddJykpIHtcclxuXHRcdFx0XHRcdC8vaW5zZXJ0IGRhdGFcclxuXHRcdFx0XHRcdHZhciBlbEF0dHIgPSAkb3JpZ2luYWxTZWxlY3QuYXR0cignZGF0YS0nK2F0dHIpO1xyXG5cdFx0XHRcdFx0aWYoZWxBdHRyID09PSAndHJ1ZScgfHwgZWxBdHRyID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0XHRcdGVsQXR0ciA9IGVsQXR0ciA9PT0gJ3RydWUnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YXR0ckRhdGFbYXR0cl0gPSBlbEF0dHI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9zZW5kIGJhY2sgc2VsZWN0IGF0dHJpYnV0ZXMgZGF0YVxyXG5cdFx0XHRyZXR1cm4gYXR0ckRhdGE7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBpbml0aWFsaXplXHJcblxyXG5cdFx0Ly9pbml0aWFsaXplIHNlbGVjdE1hbmlhIG9uIG9yaWdpbmFsIHNlbGVjdFxyXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oJG9yaWdpbmFsU2VsZWN0LCB1c2VyU2V0dGluZ3MpIHtcclxuXHRcdFx0dmFyIHRoaXNFbmdpbmUgPSB0aGlzO1xyXG5cdFx0XHQvL2Nsb25lIHNldHRpbmdzIGJlZm9yZSBzdGFydGluZyB3b3JrXHJcblx0XHRcdHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCB1c2VyU2V0dGluZ3MpO1xyXG5cdFx0XHQvL2dldCBzZWxlY3Qgc2V0dGluZ3Mgc3RvcmVkIGFzIGF0dHJpYnV0ZXNcclxuXHRcdFx0dmFyIGF0dHJTZXR0aW5ncyA9IHRoaXNFbmdpbmUuZ2V0QXR0clNldHRpbmdzKCRvcmlnaW5hbFNlbGVjdCk7XHJcblx0XHRcdC8vbWVyZ2Ugc2V0dGluZ3Mgd2l0aCBhdHRyaWJ1dGVzXHJcblx0XHRcdHNldHRpbmdzID0gJC5leHRlbmQoc2V0dGluZ3MsIGF0dHJTZXR0aW5ncyk7XHJcblx0XHRcdC8vc2V0IHNlbGVjdGVkIHZhbHVlIGFzIGVtcHR5IGlmIGV4cGxpY2l0bHkgYXNrZWRcclxuXHRcdFx0aWYoc2V0dGluZ3MuZW1wdHkpIHtcclxuXHRcdFx0XHQkb3JpZ2luYWxTZWxlY3QudmFsKCcnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2luc2VydCBpbnRlcm5hbCBkYXRhIGludG8gc2V0dGluZ3NcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzRW5naW5lLmludGVybmFsU2V0dGluZ3MoJG9yaWdpbmFsU2VsZWN0LCBzZXR0aW5ncyk7XHJcblx0XHRcdC8vY29udHJvbCBhamF4IGZ1bmN0aW9uIHR5cGUgYW5kIHNpemVcclxuXHRcdFx0aWYodGhpc0VuZ2luZS5jb250cm9sU2V0dGluZ3MoJG9yaWdpbmFsU2VsZWN0LCBzZXR0aW5ncykpIHtcclxuXHRcdFx0XHQvL2J1aWxkIHNlbGVjdE1hbmlhIGVsZW1lbnRzXHJcblx0XHRcdFx0dmFyICRidWlsdFNlbGVjdCA9IEJ1aWxkLmJ1aWxkKCRvcmlnaW5hbFNlbGVjdCwgc2V0dGluZ3MpO1xyXG5cdFx0XHRcdC8vYXR0YWNoIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50IHRvIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0XHQkYnVpbHRTZWxlY3QuZGF0YSgnc2VsZWN0TWFuaWEtb3JpZ2luYWxTZWxlY3QnLCAkb3JpZ2luYWxTZWxlY3QpO1xyXG5cdFx0XHRcdC8vYXR0YWNoIHNlbGVjdE1hbmlhIGVsZW1lbnQgdG8gb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnRcclxuXHRcdFx0XHQkb3JpZ2luYWxTZWxlY3QuZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcsICRidWlsdFNlbGVjdCk7XHJcblx0XHRcdFx0Ly9pZiBhamF4IGlzIGFjdGl2YXRlZFxyXG5cdFx0XHRcdGlmKHNldHRpbmdzLmFqYXggIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHQvL2luaXRpYWxpemUgYWpheCBkYXRhXHJcblx0XHRcdFx0XHR0aGlzRW5naW5lLmluaXRBamF4KCRidWlsdFNlbGVjdCwgc2V0dGluZ3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL3VwZGF0ZSBjbGVhbiB2YWx1ZXMgaWNvbiBkaXNwbGF5XHJcblx0XHRcdFx0dGhpc0VuZ2luZS51cGRhdGVDbGVhbigkYnVpbHRTZWxlY3QpO1xyXG5cdFx0XHRcdC8vYWRkIHdpdG5lc3MgLyBoZGluZyBjbGFzcyBvcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHRcdCRvcmlnaW5hbFNlbGVjdC5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLW9yaWdpbmFsJyk7XHJcblx0XHRcdFx0Ly9pbnNlcnQgc2VsZWN0TWFuaWEgZWxlbWVudCBiZWZvcmUgb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRcdFx0JGJ1aWx0U2VsZWN0Lmluc2VydEJlZm9yZSgkb3JpZ2luYWxTZWxlY3QpO1xyXG5cdFx0XHRcdC8vbW92ZSBvcmlnaW5hbCBzZWxlY3QgaW50byBzZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0LmFwcGVuZFRvKCRidWlsdFNlbGVjdCk7XHJcblx0XHRcdFx0Ly9iaW5kIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0XHRCaW5kcy5iaW5kKCRidWlsdFNlbGVjdCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IHVwZGF0ZVxyXG5cclxuXHRcdC8vdXBkYXRlIHNlbGVjdE1hbmlhIGVsZW1lbnQgYWNjb3JkaW5nIHRvIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHR1cGRhdGU6IGZ1bmN0aW9uKCRvcmlnaW5hbFNlbGVjdCkge1xyXG5cdFx0XHR2YXIgdGhpc0VuZ2luZSA9IHRoaXM7XHJcblx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudHNcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJG9yaWdpbmFsU2VsZWN0LmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0dmFyICR2YWx1ZUxpc3QgPSAkc2VsZWN0TWFuaWFFbC5maW5kKCcuc2VsZWN0LW1hbmlhLXZhbHVlcycpLmZpcnN0KCk7XHJcblx0XHRcdHZhciAkZHJvcGRvd24gPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1kcm9wZG93bicpO1xyXG5cdFx0XHR2YXIgJGl0ZW1MaXN0ID0gJGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKS5maXJzdCgpO1xyXG5cdFx0XHQvL3VwZGF0ZSBkaXNhYmxlZCBzdGF0dXNcclxuXHRcdFx0aWYoJG9yaWdpbmFsU2VsZWN0LmlzKCdbZGlzYWJsZWRdJykpIHtcclxuXHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwucmVtb3ZlQ2xhc3MoJ3NlbGVjdC1tYW5pYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vcmVtb3ZlIHNlbGVjdE1hbmlhIHZhbHVlcyBhbmQgaXRlbXNcclxuXHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZScpLnJlbW92ZSgpO1xyXG5cdFx0XHQkaXRlbUxpc3QuZW1wdHkoKTtcclxuXHRcdFx0Ly9idWlsZCBhbmQgaW5zZXJ0IHNlbGVjdGVkIHZhbHVlc1xyXG5cdFx0XHQkb3JpZ2luYWxTZWxlY3QuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZigkKHRoaXMpLmlzKCc6c2VsZWN0ZWQnKSkge1xyXG5cdFx0XHRcdFx0JHZhbHVlTGlzdC5hcHBlbmQoQnVpbGQuYnVpbGRWYWx1ZSh7XHJcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLnZhbHVlLCBcclxuXHRcdFx0XHRcdFx0dGV4dDogdGhpcy50ZXh0XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9idWlsZCBhbmQgaW5zZXJ0IGl0ZW1zXHJcblx0XHRcdCRpdGVtTGlzdC5hcHBlbmQoQnVpbGQuYnVpbGRJdGVtTGlzdCgkb3JpZ2luYWxTZWxlY3QuY2hpbGRyZW4oKSkpO1xyXG5cdFx0XHQvL3VwZGF0ZSBjbGVhbiB2YWx1ZXMgaWNvbiBkaXNwbGF5XHJcblx0XHRcdHRoaXNFbmdpbmUudXBkYXRlQ2xlYW4oJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0XHQvL3JlYmluZCBzZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdEJpbmRzLmJpbmQoJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gZGVzdHJveVxyXG5cclxuXHRcdC8vZGVzdHJveSBzZWxlY3RNYW5pYSBvbiB0YXJnZXRlZCBvcmlnaW5hbCBzZWxlY3RcclxuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCRvcmlnaW5hbFNlbGVjdCkge1xyXG5cdFx0XHQvL3NlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJG9yaWdpbmFsU2VsZWN0LmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0Ly9tb3ZlIG9yaWdpbmFsIHNlbGVjdCBvdXQgb2YgdGhlIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0JG9yaWdpbmFsU2VsZWN0Lmluc2VydEFmdGVyKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0Ly9yZW1vdmUgc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHQkc2VsZWN0TWFuaWFFbC5yZW1vdmUoKTtcclxuXHRcdFx0Ly9yZW1vdmUgY2xhc3MgZnJvbSBvcmlnaW5hbCBzZWxlY3RcclxuXHRcdFx0JG9yaWdpbmFsU2VsZWN0LnJlbW92ZUNsYXNzKCdzZWxlY3QtbWFuaWEtb3JpZ2luYWwnKTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IG9wZW5Ecm9wZG93biAvIGNsb3NlRHJvcGRvd25cclxuXHJcblx0XHQvL29wZW4gaXRlbXMgZHJvcGRvd25cclxuXHRcdG9wZW5Ecm9wZG93bjogZnVuY3Rpb24oJGRyb3Bkb3duKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0Ly9zZWxlY3QtbWFuaWEgZWxlbWVudFxyXG5cdFx0XHR2YXIgJHNlbGVjdE1hbmlhRWwgPSAkZHJvcGRvd24uY2xvc2VzdCgnLnNlbGVjdC1tYW5pYScpO1xyXG5cdFx0XHQvL2lmIHNjcm9sbCBjb250YWluZXIgb3B0aW9uIGlzIHNldFxyXG5cdFx0XHRpZigkc2VsZWN0TWFuaWFFbC5pcygnW2RhdGEtc2VsZWN0TWFuaWEtc2Nyb2xsQ29udGFpbmVyXScpKSB7XHJcblx0XHRcdFx0Ly9zY3JvbGwgY29udGFpbmVyIGVsZW1lbnRcclxuXHRcdFx0XHR2YXIgJHNjcm9sbENvbnRhaW5lciA9ICQoJHNlbGVjdE1hbmlhRWwuYXR0cignZGF0YS1zZWxlY3RNYW5pYS1zY3JvbGxDb250YWluZXInKSk7XHJcblx0XHRcdFx0Ly9wb3NpdGlvbiBhYnNvbHV0ZSBkcm9wZG93blxyXG5cdFx0XHRcdEVuZ2luZS5wb3NpdGlvbkRyb3Bkb3duKCRkcm9wZG93bik7XHJcblx0XHRcdFx0Ly9hcHBseSBwb3NpdGlvbm5pbmcgY2xhc3NcclxuXHRcdFx0XHQkZHJvcGRvd24uYWRkQ2xhc3MoJ3NlbGVjdC1tYW5pYS1hYnNvbHV0ZScpO1xyXG5cdFx0XHRcdC8vYmluZCBzY3JvbGwgY29udGFpbmVyIHRvIGNsb3NlIGRyb3Bkb3duIG9uIHNjcm9sbFxyXG5cdFx0XHRcdCRzY3JvbGxDb250YWluZXIub2ZmKCdzY3JvbGwuc2VsZWN0TWFuaWEnKS5vbignc2Nyb2xsLnNlbGVjdE1hbmlhJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQvL3VuYmluZCBjbG9zZSBkcm9wZG93biBvbiBzY3JvbGxpbmdcclxuXHRcdFx0XHRcdCRzY3JvbGxDb250YWluZXIub2ZmKCdzY3JvbGwuc2VsZWN0TWFuaWEnKTtcclxuXHRcdFx0XHRcdC8vY2xvc2Ugb3BlbiBkcm9wZG93blxyXG5cdFx0XHRcdFx0RW5naW5lLmNsb3NlRHJvcGRvd24oJCgnLnNlbGVjdC1tYW5pYS1kcm9wZG93bi5vcGVuJykpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vcmVwb3NpdGlvbiBkcm9wZG93biB3aGVuIHdpbmRvdyBpcyByZXNpemVkXHJcblx0XHRcdFx0JCh3aW5kb3cpLm9mZigncmVzaXplLnNlbGVjdE1hbmlhJykub24oJ3Jlc2l6ZS5zZWxlY3RNYW5pYScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0Ly9wb3NpdGlvbiBhYnNvbHV0ZSBkcm9wZG93blxyXG5cdFx0XHRcdFx0RW5naW5lLnBvc2l0aW9uRHJvcGRvd24oJGRyb3Bkb3duKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL29wZW4gZHJvcGRvd25cclxuXHRcdFx0JGRyb3Bkb3duLnN0b3AoKS5hZGRDbGFzcygnb3BlbicpLnNsaWRlRG93bigxMDApO1xyXG5cdFx0XHQvL3Njcm9sbCBkcm9wZG93biB0byB0b3BcclxuXHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKS5zY3JvbGxUb3AoMCk7XHJcblx0XHRcdC8vZm9jdXMgc2VhcmNoIGlucHV0XHJcblx0XHRcdHRoaXNFbmdpbmUuZm9jdXNTZWFyY2goJGRyb3Bkb3duKTtcclxuXHRcdFx0Ly9iaW5kIGtleWJvYXJkIGNvbnRyb2xcclxuXHRcdFx0JChkb2N1bWVudCkub2ZmKCdrZXlkb3duLnNlbGVjdE1hbmlhJykub24oJ2tleWRvd24uc2VsZWN0TWFuaWEnLCBCaW5kcy5rZXlib2FyZENvbnRyb2wpO1xyXG5cdFx0fSwgXHJcblxyXG5cdFx0Ly9jbG9zZSBpdGVtcyBkcm9wZG93blxyXG5cdFx0Y2xvc2VEcm9wZG93bjogZnVuY3Rpb24oJGRyb3Bkb3duKSB7XHJcblx0XHRcdHZhciAkc2VsZWN0TWFuaWFFbCA9ICRkcm9wZG93bi5kYXRhKCdzZWxlY3RNYW5pYS1lbGVtZW50Jyk7XHJcblx0XHRcdC8vdW5iaW5kIGtleWJvYXJkIGNvbnRyb2xcclxuXHRcdFx0JChkb2N1bWVudCkub2ZmKCdrZXlkb3duLnNlbGVjdE1hbmlhJyk7XHJcblx0XHRcdC8vcmVtb3ZlIGV2ZXJ5IGhvdmVyIGNsYXNzIGZyb20gaXRlbXNcclxuXHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbScpLnJlbW92ZUNsYXNzKCdzZWxlY3QtbWFuaWEtaG92ZXInKTtcclxuXHRcdFx0Ly9pZiBkcm9wZG93biBoYXMgYWJvc2x1dGUgcG9zaXRpb25uaW5nXHJcblx0XHRcdGlmKCRkcm9wZG93bi5oYXNDbGFzcygnc2VsZWN0LW1hbmlhLWFic29sdXRlJykpIHtcclxuXHRcdFx0XHQvL3NlbGVjdC1tYW5pYSBpbm5lciBlbGVtZW50XHJcblx0XHRcdFx0dmFyICRzZWxlY3RNYW5pYUlubmVyID0gJGRyb3Bkb3duXHJcblx0XHRcdFx0XHQuZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcpXHJcblx0XHRcdFx0XHQuZmluZCgnLnNlbGVjdC1tYW5pYS1pbm5lcicpXHJcblx0XHRcdFx0XHQuZmlyc3QoKTtcclxuXHRcdFx0XHQvL21vdmUgYmFjayB0aGUgZHJvcGRvd24gaW5zaWRlIHNlbGVjdC1tYW5pYSBlbGVtZW50XHJcblx0XHRcdFx0JGRyb3Bkb3duXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ29wZW4nKVxyXG5cdFx0XHRcdFx0LmhpZGUoKVxyXG5cdFx0XHRcdFx0Lmluc2VydEFmdGVyKFxyXG5cdFx0XHRcdFx0XHQkc2VsZWN0TWFuaWFJbm5lclxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHQvL3VuYmluZCByZXBvc2l0aW9uaW5nIG9uIHJlc2l6ZVxyXG5cdFx0XHRcdCQod2luZG93KS5vZmYoJ3Jlc2l6ZS5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vdW5iaW5kIGNsb3NlIGRyb3Bkb3duIG9uIHNjcm9sbGluZ1xyXG5cdFx0XHRcdHZhciAkc2Nyb2xsQ29udGFpbmVyID0gJCgkc2VsZWN0TWFuaWFFbC5hdHRyKCdkYXRhLXNlbGVjdE1hbmlhLXNjcm9sbENvbnRhaW5lcicpKTtcclxuXHRcdFx0XHRpZigkc2Nyb2xsQ29udGFpbmVyLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdCRzY3JvbGxDb250YWluZXIub2ZmKCdzY3JvbGwuc2VsZWN0TWFuaWEnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9pZiBkcm9wZG93biBoYXMgc3RhbmRhcmQgcG9zaXRpb25uaW5nXHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vY2xvc2UgZHJvcGRvd25cclxuXHRcdFx0XHQkZHJvcGRvd24uc3RvcCgpLnJlbW92ZUNsYXNzKCdvcGVuJykuc2xpZGVVcCgxMDApO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBwb3NpdGlvbkRyb3Bkb3duXHJcblxyXG5cdFx0Ly9wb3NpdGlvbiBkcm9wZG93biByZWxhdGl2ZSB0byBpdHMgc2VsZWN0LW1hbmlhIGVsZW1lbnRcclxuXHRcdHBvc2l0aW9uRHJvcGRvd246IGZ1bmN0aW9uKCRkcm9wZG93bikge1xyXG5cdFx0XHR2YXIgJHNlbGVjdE1hbmlhRWwgPSAkZHJvcGRvd24uZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcpO1xyXG5cdFx0XHQvL2l0ZW0gbGlzdCBzY3JvbGwgZGF0YVxyXG5cdFx0XHR2YXIgJGl0ZW1MaXN0ID0gJGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKTtcclxuXHRcdFx0dmFyIGl0ZW1MaXN0U2Nyb2xsID0gJGl0ZW1MaXN0LnNjcm9sbFRvcCgpO1xyXG5cdFx0XHQvL2RhdGEgZm9yIGNhbGN1bGF0aW5nIGRyb3Bkb3duIGFic29sdXRlIHBvc2l0aW9uXHJcblx0XHRcdHZhciBzZWxlY3RNYW5pYUVsUG9zID0gJHNlbGVjdE1hbmlhRWwub2Zmc2V0KCk7XHJcblx0XHRcdHZhciBzZWxlY3RNYW5pYUVsV2lkdGggPSAkc2VsZWN0TWFuaWFFbC5vdXRlcldpZHRoKCk7XHJcblx0XHRcdHZhciBzZWxlY3RNYW5pYUVsSGVpZ2h0ID0gJHNlbGVjdE1hbmlhRWwub3V0ZXJIZWlnaHQoKTtcclxuXHRcdFx0Ly9hcHBlbmQgZHJvcGRvd24gdG8gYm9keSBpbiBhYnNvbHV0ZSBwb3NpdGlvblxyXG5cdFx0XHQkZHJvcGRvd24uYXBwZW5kVG8oJ2JvZHknKS5jc3Moe1xyXG5cdFx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBcclxuXHRcdFx0XHR0b3A6IHNlbGVjdE1hbmlhRWxQb3MudG9wICsgc2VsZWN0TWFuaWFFbEhlaWdodCwgXHJcblx0XHRcdFx0bGVmdDogc2VsZWN0TWFuaWFFbFBvcy5sZWZ0LCBcclxuXHRcdFx0XHR3aWR0aDogc2VsZWN0TWFuaWFFbFdpZHRoXHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2ZvcmNlIGl0ZW0gbGlzdCBzY3JvbGwgdG8gaXRzIGluaXRpYWwgc3RhdGVcclxuXHRcdFx0JGl0ZW1MaXN0LnNjcm9sbFRvcChpdGVtTGlzdFNjcm9sbCk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBzZWxlY3RJdGVtXHJcblxyXG5cdFx0Ly9wZXJmb3JtIGl0ZW0gc2VsZWN0aW9uIGluIGRyb3Bkb3duXHJcblx0XHRzZWxlY3RJdGVtOiBmdW5jdGlvbigkaXRlbSkge1xyXG5cdFx0XHQvL2Ryb3Bkb3duIGVsZW1lbnRcclxuXHRcdFx0dmFyICRkcm9wZG93biA9ICRpdGVtLmNsb3Nlc3QoJy5zZWxlY3QtbWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9zZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdHZhciAkc2VsZWN0TWFuaWFFbCA9ICRkcm9wZG93bi5kYXRhKCdzZWxlY3RNYW5pYS1lbGVtZW50Jyk7XHJcblx0XHRcdC8vc2VsZWN0IG9yaWdpbmFsIGVsZW1lbnRcclxuXHRcdFx0dmFyICRvcmlnaW5hbFNlbGVjdCA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLW9yaWdpbmFsU2VsZWN0Jyk7XHJcblx0XHRcdC8vaWYgaXRlbSBub3QgYWxyZWFkeSBzZWxlY3RlZFxyXG5cdFx0XHRpZighJGl0ZW0uaXMoJy5zZWxlY3QtbWFuaWEtc2VsZWN0ZWQnKSkge1xyXG5cdFx0XHRcdC8vY2xpY2tlZCBpdGVtIHZhbHVlXHJcblx0XHRcdFx0dmFyIGl0ZW1WYWwgPSAkaXRlbS5hdHRyKCdkYXRhLXZhbHVlJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly9idWlsZCB2YWx1ZSBlbGVtZW50XHJcblx0XHRcdFx0dmFyICR2YWx1ZSA9IEJ1aWxkLmJ1aWxkVmFsdWUoe1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YWx1ZTogaXRlbVZhbCwgXHJcblx0XHRcdFx0XHR0ZXh0OiAkaXRlbS50ZXh0KClcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvL2lmIHNlbGVjdCBtdWx0aXBsZVxyXG5cdFx0XHRcdGlmKCRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLW11bHRpcGxlJykpIHtcclxuXHRcdFx0XHRcdC8vaW5zZXJ0IHZhbHVlIGVsZW1lbnQgaW4gc2VsZWN0TWFuaWEgdmFsdWVzXHJcblx0XHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5maW5kKCcuc2VsZWN0LW1hbmlhLXZhbHVlcycpLmFwcGVuZCgkdmFsdWUpO1xyXG5cdFx0XHRcdFx0Ly9hZGQgdmFsdWUgaW4gb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnRcclxuXHRcdFx0XHRcdEVuZ2luZS5hZGRNdWx0aXBsZVZhbCgkb3JpZ2luYWxTZWxlY3QsIGl0ZW1WYWwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2lmIHNlbGVjdCBub3QgbXVsdGlwbGVcclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdC8vdW5zZWxlY3QgZXZlcnkgb3RoZXIgaXRlbXNcclxuXHRcdFx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW0nKS5yZW1vdmVDbGFzcygnc2VsZWN0LW1hbmlhLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0XHQvL2luc2VydCB2YWx1ZSBlbGVtZW50IGluIHNlbGVjdE1hbmlhIHZhbHVlc1xyXG5cdFx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZXMgLnNlbGVjdC1tYW5pYS12YWx1ZScpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZXMnKS5hcHBlbmQoJHZhbHVlKTtcclxuXHRcdFx0XHRcdC8vY2hhbmdlIHZhbHVlIGluIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHRcdFx0XHQkb3JpZ2luYWxTZWxlY3QudmFsKGl0ZW1WYWwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL3NldCBjbGlja2VkIGl0ZW0gYXMgc2VsZWN0ZWRcclxuXHRcdFx0XHQkaXRlbS5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0Ly90cmlnZ2VyIG9yaWdpbmFsIHNlbGVjdCBjaGFuZ2UgZXZlbnRcclxuXHRcdFx0XHQkb3JpZ2luYWxTZWxlY3QudHJpZ2dlcignY2hhbmdlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9pZiBhYnNvbHV0ZSBwb3NpdGlvbiBkcm9wZG93blxyXG5cdFx0XHRpZigkZHJvcGRvd24uaXMoJy5zZWxlY3QtbWFuaWEtYWJzb2x1dGUnKSkge1xyXG5cdFx0XHRcdC8vcG9zaXRpb24gYWJzb2x1dGUgZHJvcGRvd25cclxuXHRcdFx0XHRFbmdpbmUucG9zaXRpb25Ecm9wZG93bigkZHJvcGRvd24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgc2VsZWN0IG5vdCBtdWx0aXBsZVxyXG5cdFx0XHRpZighJHNlbGVjdE1hbmlhRWwuaXMoJy5zZWxlY3QtbWFuaWEtbXVsdGlwbGUnKSkge1xyXG5cdFx0XHRcdC8vY2xvc2UgZHJvcGRvd25cclxuXHRcdFx0XHRFbmdpbmUuY2xvc2VEcm9wZG93bigkZHJvcGRvd24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vdXBkYXRlIGNsZWFyIHZhbHVlcyBpY29uIGRpc3BsYXlcclxuXHRcdFx0RW5naW5lLnVwZGF0ZUNsZWFuKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0Ly9yZWJpbmQgc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHRCaW5kcy5iaW5kKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGZvY3VzU2VhcmNoXHJcblxyXG5cdFx0Ly9mb2N1cyBzZWFyY2ggaW5wdXQgaW4gZHJvcGRvd25cclxuXHRcdGZvY3VzU2VhcmNoOiBmdW5jdGlvbigkZHJvcGRvd24pIHtcclxuXHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtc2VhcmNoLWlucHV0JykuZm9jdXMoKTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGFkZE11bHRpcGxlVmFsXHJcblxyXG5cdFx0Ly9hZGQgdmFsdWUgdG8gbXVsdGlwbGUgb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRhZGRNdWx0aXBsZVZhbDogZnVuY3Rpb24oJG9yaWdpbmFsU2VsZWN0LCB2YWwpIHtcclxuXHRcdFx0dmFyIG9yaWdpbmFsVmFscyA9ICRvcmlnaW5hbFNlbGVjdC52YWwoKTtcclxuXHRcdFx0aWYoIShvcmlnaW5hbFZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuXHRcdFx0XHRvcmlnaW5hbFZhbHMgPSBbXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRvcmlnaW5hbFZhbHMucHVzaCh2YWwpO1xyXG5cdFx0XHQkb3JpZ2luYWxTZWxlY3QudmFsKG9yaWdpbmFsVmFscyk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiByZW1vdmVNdWx0aXBsZVZhbFxyXG5cclxuXHRcdC8vcmVtb3ZlIHZhbHVlIGZyb20gbXVsdGlwbGUgb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRyZW1vdmVNdWx0aXBsZVZhbDogZnVuY3Rpb24oJG9yaWdpbmFsU2VsZWN0LCB2YWwpIHtcclxuXHRcdFx0dmFyIG9yaWdpbmFsVmFscyA9ICRvcmlnaW5hbFNlbGVjdC52YWwoKTtcclxuXHRcdFx0aWYoIShvcmlnaW5hbFZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuXHRcdFx0XHRvcmlnaW5hbFZhbHMgPSBbXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRvcmlnaW5hbFZhbHMuc3BsaWNlKCQuaW5BcnJheSh2YWwsIG9yaWdpbmFsVmFscyksIDEpO1xyXG5cdFx0XHQkb3JpZ2luYWxTZWxlY3QudmFsKG9yaWdpbmFsVmFscyk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiB1cGRhdGVDbGVhblxyXG5cclxuXHRcdC8vZGlzcGxheSAvIGhpZGUgY2xlYW4gdmFsdWVzIGljb24gYWNjb3JkaW5nIHRvIGN1cnJlbnQgdmFsdWVzXHJcblx0XHR1cGRhdGVDbGVhbjogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwpIHtcclxuXHRcdFx0Ly9vcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHR2YXIgJG9yaWdpbmFsU2VsZWN0ID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtb3JpZ2luYWxTZWxlY3QnKTtcclxuXHRcdFx0Ly9pZiB2YWx1ZSBpcyBub3QgZW1wdHlcclxuXHRcdFx0aWYoJG9yaWdpbmFsU2VsZWN0LnZhbCgpICE9PSBudWxsICYmICRvcmlnaW5hbFNlbGVjdC52YWwoKS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Ly9kaXNwbGF5IGNsZWFuIHZhbHVlcyBpY29uXHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS1jbGVhci1pY29uJykuc2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgZW1wdHkgdmFsdWVcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly9oaWRlIGNsZWFuIHZhbHVlcyBpY29uXHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS1jbGVhci1pY29uJykuaGlkZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBkb1NlYXJjaFxyXG5cclxuXHRcdC8vZG8gc2VhcmNoIGluIGl0ZW1zIGRyb3Bkb3duXHJcblx0XHRkb1NlYXJjaDogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwpIHtcclxuXHRcdFx0Ly9kcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9zZWFyY2ggdmFsdWVcclxuXHRcdFx0dmFyIHNlYXJjaFZhbCA9ICRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLXNlYXJjaC1pbnB1dCcpLmZpcnN0KCkudmFsKCkudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcblx0XHRcdC8vaWYgZW1wdHkgc2VhcmNoIHZhbHVlXHJcblx0XHRcdGlmKHNlYXJjaFZhbCA9PT0gJycpIHtcclxuXHRcdFx0XHQvL2Rpc3BsYXkgYWxsIGl0ZW1zXHJcblx0XHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtZ3JvdXAsIC5zZWxlY3QtbWFuaWEtaXRlbScpLnJlbW92ZUNsYXNzKCdzZWxlY3QtbWFuaWEtaGlkZGVuJyk7XHJcblx0XHRcdFx0Ly9zdG9wIGZ1bmN0aW9uXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGRyb3Bkb3duIGl0ZW1zXHJcblx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vaWYgaXRlbSB0ZXh0IG1hdGNoZXMgc2VhcmNoIHZhbHVlXHJcblx0XHRcdFx0aWYoJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFZhbCkgIT09IC0xKSB7XHJcblx0XHRcdFx0XHQvL2Rpc3BsYXkgaXRlbVxyXG5cdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnc2VsZWN0LW1hbmlhLWhpZGRlbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2lmIGl0ZW0gdGV4dCBkb24ndCBtYXRjaCBzZWFyY2ggdmFsdWVcclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdC8vaGlkZSBpdGVtXHJcblx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtaGlkZGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9zaG93IC8gaGlkZSBvcHRncm91cHMgaWYgY29udGFpbiByZXN1bHRzIC8gZW1wdHlcclxuXHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtZ3JvdXAnKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmKCQodGhpcykuZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtOm5vdCguc2VsZWN0LW1hbmlhLWhpZGRlbiknKS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdzZWxlY3QtbWFuaWEtaGlkZGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLWhpZGRlbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBkb1NlYXJjaEFqYXhcclxuXHJcblx0XHQvL2RvIGFqYXggc2VhcmNoIGluIGl0ZW1zIGRyb3Bkb3duXHJcblx0XHRkb1NlYXJjaEFqYXg6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYUVsKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0Ly9kcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9zZWFyY2ggdmFsdWVcclxuXHRcdFx0dmFyIHRoaXNTZWFyY2ggPSAkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1zZWFyY2gtaW5wdXQnKS5maXJzdCgpLnZhbCgpO1xyXG5cdFx0XHQvL3BhdXNlIGFqYXggc2Nyb2xsXHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhSZWFkeScsIGZhbHNlKTtcclxuXHRcdFx0Ly9yZXNldCBjdXJyZW50IHBhZ2UgbnVtYmVyXHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhQYWdlJywgMSk7XHJcblx0XHRcdC8vbG9hZGluZyBpY29uXHJcblx0XHRcdHRoaXNFbmdpbmUuZHJvcGRvd25Mb2FkaW5nKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0Ly9jYWxsIGFqYXggZnVuY3Rpb25cclxuXHRcdFx0dmFyIHRoaXNBamF4RnVuY3Rpb24gPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4RnVuY3Rpb24nKTtcclxuXHRcdFx0dmFyIHRoaXNBamF4RGF0YSA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhEYXRhJyk7XHJcblx0XHRcdHRoaXNBamF4RnVuY3Rpb24odGhpc1NlYXJjaCwgMSwgdGhpc0FqYXhEYXRhLCBmdW5jdGlvbihvcHRIVE1MKSB7XHJcblx0XHRcdFx0Ly9yZW1vdmUgbG9hZGluZyBpY29uXHJcblx0XHRcdFx0dGhpc0VuZ2luZS5kcm9wZG93bkxvYWRpbmcoJHNlbGVjdE1hbmlhRWwsIHRydWUpO1xyXG5cdFx0XHRcdC8vcmVwbGFjZSBjdXJyZW50IGl0ZW1zIHdpdGggc2VudCBvcHRpb25zXHJcblx0XHRcdFx0RW5naW5lLnJlcGxhY2VJdGVtcygkc2VsZWN0TWFuaWFFbCwgb3B0SFRNTCk7XHJcblx0XHRcdFx0Ly9yZWJpbmQgc2VsZWN0XHJcblx0XHRcdFx0QmluZHMuYmluZCgkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdFx0Ly9yZXNldCBhamF4IHNjcm9sbCBkYXRhXHJcblx0XHRcdFx0dGhpc0VuZ2luZS5pbml0QWpheCgkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gYWRkSXRlbXMgLyByZXBsYWNlSXRlbXNcclxuXHJcblx0XHQvL2FkZCBpdGVtcyB0byBkcm9wZG93blxyXG5cdFx0YWRkSXRlbXM6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYUVsLCBvcHRpb25zSFRNTCkge1xyXG5cdFx0XHR2YXIgdGhpc0VuZ2luZSA9IHRoaXM7XHJcblx0XHRcdHRoaXNFbmdpbmUuYWRkT3JSZXBsYWNlSXRlbXMoJHNlbGVjdE1hbmlhRWwsIG9wdGlvbnNIVE1MLCBmYWxzZSk7XHJcblx0XHR9LCBcclxuXHJcblx0XHQvL3JlcGxhY2UgZHJvcGRvd24gaXRlbXNcclxuXHRcdHJlcGxhY2VJdGVtczogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwsIG9wdGlvbnNIVE1MKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0dGhpc0VuZ2luZS5hZGRPclJlcGxhY2VJdGVtcygkc2VsZWN0TWFuaWFFbCwgb3B0aW9uc0hUTUwsIHRydWUpO1xyXG5cdFx0fSwgXHJcblxyXG5cdFx0Ly9hZGQgLyByZXBsYWNlIGRyb3Bkb3duIGl0ZW1zXHJcblx0XHRhZGRPclJlcGxhY2VJdGVtczogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwsIG9wdGlvbnNIVE1MLCByZXBsYWNlKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0Ly9kcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9vcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHR2YXIgJG9yaWdpbmFsU2VsZWN0ID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtb3JpZ2luYWxTZWxlY3QnKTtcclxuXHRcdFx0Ly9pdGVtcyBkcm9wZG93blxyXG5cdFx0XHR2YXIgJGl0ZW1zQ29udGFpbmVyID0gJGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKTtcclxuXHRcdFx0Ly9vcHRpb25zIGpxdWVyeSBwYXJzaW5nXHJcblx0XHRcdHZhciAkb3B0aW9ucyA9ICQob3B0aW9uc0hUTUwpO1xyXG5cdFx0XHQvL2dldCBzZWxlY3RNYW5pYSBlbGVtZW50IHZhbHVlc1xyXG5cdFx0XHR2YXIgc2VsZWN0ZWRWYWxzID0gdGhpc0VuZ2luZS5nZXRWYWwoJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0XHQvL2xvb3AgdGhyb3VnaCBzZWxlY3RlZCB2YWx1ZXNcclxuXHRcdFx0c2VsZWN0ZWRWYWxzLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XHJcblx0XHRcdFx0JG9wdGlvbnNcclxuXHRcdFx0XHRcdC8vc2VhcmNoIGZvciBvcHRpb25zIG1hdGNoaW5nIHNlbGVjdGVkIHZhbHVlXHJcblx0XHRcdFx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gJCh0aGlzKS5hdHRyKCd2YWx1ZScpID09PSB2YWwudmFsdWUgJiYgJCh0aGlzKS50ZXh0KCkgPT09IHZhbC50ZXh0O1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC8vc2V0IG1hdGNoaW5nIG9wdGlvbnMgYXMgc2VsZWN0ZWRcclxuXHRcdFx0XHRcdC5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9idWlsZCBpdGVtcyBsaXN0XHJcblx0XHRcdCRidWlsdEl0ZW1zID0gQnVpbGQuYnVpbGRJdGVtTGlzdCgkb3B0aW9ucyk7XHJcblx0XHRcdC8vaWYgaXRlbXMgYXJlIG1lYW50IHRvIGJlIHJlcGxhY2VkXHJcblx0XHRcdGlmKHJlcGxhY2UgPT09IHRydWUpIHtcclxuXHRcdFx0XHQvL2VtcHR5IG9sZCBvcHRpb25zIGV4Y2VwdCBzZWxlY3RlZCBvbmVzXHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0LmZpbmQoJ29wdGlvbicpLnJlbW92ZSgnOm5vdCg6Y2hlY2tlZCknKTtcclxuXHRcdFx0XHQvL2VtcHR5IGl0ZW1zIGRyb3Bkb3duXHJcblx0XHRcdFx0JGl0ZW1zQ29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9hZGQgaXRlbXMgdG8gc2VsZWN0TWFuaWEgZHJvcGRvd25cclxuXHRcdFx0JGl0ZW1zQ29udGFpbmVyLmFwcGVuZCgkYnVpbHRJdGVtcyk7XHJcblx0XHRcdC8vYWRkIG9wdGlvbnMgdG8gb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnRcclxuXHRcdFx0JG9yaWdpbmFsU2VsZWN0LmFwcGVuZCgkb3B0aW9ucyk7XHJcblx0XHRcdC8vcmViaW5kIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0QmluZHMuYmluZCgkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBpbml0QWpheFxyXG5cclxuXHRcdC8vcmVzZXQgc2VsZWN0TWFuaWEgZWxlbWVudCBhamF4IGRhdGEgYW5kIGF0dGFjaCBhamF4IGZ1bmN0aW9uXHJcblx0XHRpbml0QWpheDogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwsIHNldHRpbmdzKSB7XHJcblx0XHRcdC8vaWYgYWpheCBzZXR0aW5ncyBhcmUgcHJvdmlkZWQgdG8gYmUgYXR0YWNoZWRcclxuXHRcdFx0aWYodHlwZW9mIHNldHRpbmdzID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdC8vYXR0YWNoIGFqYXggZnVuY3Rpb25cclxuXHRcdFx0XHRpZihzZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eSgnYWpheCcpICYmIHR5cGVvZiBzZXR0aW5ncy5hamF4ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4RnVuY3Rpb24nLCBzZXR0aW5ncy5hamF4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly9hdHRhY2ggYWpheCBkYXRhXHJcblx0XHRcdFx0aWYoc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSAmJiB0eXBlb2Ygc2V0dGluZ3MuZGF0YSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhEYXRhJywgc2V0dGluZ3MuZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vcmVzZXQgYWpheCBkYXRhXHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhQYWdlJywgMSk7XHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhSZWFkeScsIHRydWUpO1xyXG5cdFx0XHQkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4U2Nyb2xsRG9uZScsIGZhbHNlKTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGRyb3Bkb3duTG9hZGluZ1xyXG5cclxuXHRcdC8vZGlzcGxheSAvIGhpZGUgbG9hZGluZyBpY29uIGluc2lkZSBpdGVtcyBkcm9wZG93blxyXG5cdFx0ZHJvcGRvd25Mb2FkaW5nOiBmdW5jdGlvbigkc2VsZWN0TWFuaWFFbCwgaGlkZSkge1xyXG5cdFx0XHQvL2lmIGhpZGUgaWNvbiByZXF1ZXN0ZWRcclxuXHRcdFx0dmFyIGlzSGlkZSA9IGZhbHNlO1xyXG5cdFx0XHRpZih0eXBlb2YgaGlkZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaGlkZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdGlzSGlkZSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9kcm9wZG93biBpbm5lciBsaXN0IGVsZW1lbnRcclxuXHRcdFx0dmFyICRkcm9wZG93bkNvbnRhaW5lciA9ICRzZWxlY3RNYW5pYUVsLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMtY29udGFpbmVyJykuZmlyc3QoKTtcclxuXHRcdFx0Ly9yZW1vdmUgbG9hZGluZyBpY29uIGlmIGV4aXN0c1xyXG5cdFx0XHQkZHJvcGRvd25Db250YWluZXIuZmluZCgnLmljb24tbG9hZGluZy1jb250YWluZXInKS5yZW1vdmUoKTtcclxuXHRcdFx0Ly9pZiBzaG93IGljb24gcmVxdWVzdGVkXHJcblx0XHRcdGlmKGlzSGlkZSAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdC8vYnVpbGQgbG9hZGluZyBpY29uXHJcblx0XHRcdFx0dmFyICRsb2FkaW5nSWNvbiA9ICQoJzxkaXYgY2xhc3M9XCJpY29uLWxvYWRpbmctY29udGFpbmVyXCI+PC9kaXY+Jyk7XHJcblx0XHRcdFx0JGxvYWRpbmdJY29uLmFwcGVuZCgnPGkgY2xhc3M9XCJpY29uLWxvYWRpbmdcIj48L2k+Jyk7XHJcblx0XHRcdFx0Ly9pbnNlcnQgbG9hZGluZyBpY29uXHJcblx0XHRcdFx0JGRyb3Bkb3duQ29udGFpbmVyLmFwcGVuZCgkbG9hZGluZ0ljb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBnZXRWYWxcclxuXHJcblx0XHQvL2dldCBwYXJzZWQgc2VsZWN0ZWQgdmFsdWVzXHJcblx0XHRnZXRWYWw6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYUVsKSB7XHJcblx0XHRcdHZhciB2YWxPYmpzID0gW107XHJcblx0XHRcdC8vbG9vcCB0aG91Z2ggdmFsdWVzIGVsZW1lbnRzXHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmZpbmQoJy5zZWxlY3QtbWFuaWEtdmFsdWUnKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vc2VsZWN0ZWQgdmFsdWUgdGV4dFxyXG5cdFx0XHRcdHZhciB0aGlzVGV4dCA9ICQodGhpcykuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZS10ZXh0JykuZmlyc3QoKS50ZXh0KCk7XHJcblx0XHRcdFx0Ly9pbnNlcnQgc2VsZWN0ZWQgdmFsdWUgb2JqZWN0XHJcblx0XHRcdFx0dmFsT2Jqcy5wdXNoKHtcclxuXHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdHZhbHVlOiAkKHRoaXMpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgXHJcblx0XHRcdFx0XHR0ZXh0OiB0aGlzVGV4dFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9zZW5kIGJhY2sgcGFyc2VkIHNlbGVjdGVkIHZhbHVlc1xyXG5cdFx0XHRyZXR1cm4gdmFsT2JqcztcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGNsZWFyXHJcblxyXG5cdFx0Ly9jbGVhciBzZWxlY3QgdmFsdWVzXHJcblx0XHRjbGVhcjogZnVuY3Rpb24oJHNlbGVjdE1hbmlhRWwpIHtcclxuXHRcdFx0Ly9kcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9lbXB0eSBzZWxlY3RNYW5pYSB2YWx1ZXNcclxuXHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZScpLnJlbW92ZSgpO1xyXG5cdFx0XHQvL3Vuc2VsZWN0IGl0ZW1zIGluIGRyb3Bkb3duXHJcblx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW0nKS5yZW1vdmVDbGFzcygnc2VsZWN0LW1hbmlhLXNlbGVjdGVkJyk7XHJcblx0XHRcdC8vZW1wdHkgdmFsdWVzIGluIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1vcmlnaW5hbFNlbGVjdCcpO1xyXG5cdFx0XHRpZigkc2VsZWN0TWFuaWFFbC5pcygnLnNlbGVjdC1tYW5pYS1tdWx0aXBsZScpKSB7XHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0LnZhbChbXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0LnZhbCgnJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IHNldFZhbFxyXG5cclxuXHRcdC8vc2V0IHBhcnNlZCB2YWx1ZXMgYXMgc2VsZWN0ZWQgdmFsdWVzXHJcblx0XHRzZXRWYWw6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYUVsLCB2YWxPYmpzKSB7XHJcblx0XHRcdHZhciB0aGlzRW5naW5lID0gdGhpcztcclxuXHRcdFx0Ly9vcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHR2YXIgJG9yaWdpbmFsU2VsZWN0ID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtb3JpZ2luYWxTZWxlY3QnKTtcclxuXHRcdFx0Ly9jbGVhciBzZWxlY3QgdmFsdWVzIGJlZm9yZSBzZXR0aW5nIHByb3ZpZGVkIHZhbHVlc1xyXG5cdFx0XHR0aGlzRW5naW5lLmNsZWFyKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0Ly9pZiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgdmFsdWUgaW4gdGhlIHZhbHVlcyBhbmQgc2VsZWN0IGlzIG5vdCBtdWx0aXBsZVxyXG5cdFx0XHRpZih2YWxPYmpzLmxlbmd0aCA+IDEgJiYgISRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLW11bHRpcGxlJykpIHtcclxuXHRcdFx0XHQvL2tlZXAgb25seSBmaXJzdCB2YWx1ZVxyXG5cdFx0XHRcdHZhbE9ianMgPSB2YWxPYmpzLnNsaWNlKDAsIDEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vbG9vcCB0aHJvdWdoIHZhbHVlc1xyXG5cdFx0XHR2YWxPYmpzLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XHJcblx0XHRcdFx0Ly9wYXJzZSB2YWx1ZSBvYmplY3RcclxuXHRcdFx0XHR2YXIgdmFsT2JqID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdFx0dmFsdWU6ICcnLCBcclxuXHRcdFx0XHRcdHRleHQ6ICcnLCBcclxuXHRcdFx0XHRcdHNlbGVjdGVkOiB0cnVlXHJcblx0XHRcdFx0fSwgdmFsKTtcclxuXHRcdFx0XHQvL3NldCB2YWx1ZSBpbiBzZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdFx0dGhpc0VuZ2luZS5zZXRPbmVWYWxTZWxlY3RNYW5pYSgkc2VsZWN0TWFuaWFFbCwgdmFsT2JqKTtcclxuXHRcdFx0XHQvL3NldCB2YWx1ZSBpbiBvcmlnaW5hbCBzZWxlY3RcclxuXHRcdFx0XHR0aGlzRW5naW5lLnNldE9uZVZhbE9yaWdpbmFsKCRvcmlnaW5hbFNlbGVjdCwgdmFsT2JqKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vdXBkYXRlIGNsZWFuIHZhbHVlcyBpY29uIGRpc3BsYXlcclxuXHRcdFx0dGhpc0VuZ2luZS51cGRhdGVDbGVhbigkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdC8vcmViaW5kIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0QmluZHMuYmluZCgkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHR9LCBcclxuXHJcblx0XHQvL3NldCBvbmUgdmFsdWUgb24gc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0c2V0T25lVmFsU2VsZWN0TWFuaWE6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYSwgdmFsT2JqKSB7XHJcblx0XHRcdC8vYnVpbGQgdmFsdWUgZWxlbWVudCBmb3Igc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHR2YXIgJHZhbHVlID0gQnVpbGQuYnVpbGRWYWx1ZSh2YWxPYmopO1xyXG5cdFx0XHQvL2luc2VydCBidWlsdCB2YWx1ZSBlbGVtZW50IGluIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0JHNlbGVjdE1hbmlhLmZpbmQoJy5zZWxlY3QtbWFuaWEtdmFsdWVzJykuYXBwZW5kKCR2YWx1ZSk7XHJcblx0XHRcdC8vY2hlY2sgaWYgY29ycmVzcG9uZGluZyBpdGVtIGV4aXN0cyBpbiBkcm9wZG93blxyXG5cdFx0XHR2YXIgJHNlYXJjaEl0ZW0gPSAkc2VsZWN0TWFuaWEuZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtW2RhdGEtdmFsdWU9XCInK3ZhbE9iai52YWx1ZSsnXCJdJykuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gdmFsT2JqLnRleHQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2lmIGl0ZW0gZXhpc3RzIGluIGRyb3Bkb3duXHJcblx0XHRcdGlmKCRzZWFyY2hJdGVtLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHQvL3NldCBpdGVtIGFzIHNlbGVjdGVkXHJcblx0XHRcdFx0JHNlYXJjaEl0ZW0uZmlyc3QoKS5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLXNlbGVjdGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sIFxyXG5cclxuXHRcdC8vc2V0IG9uZSB2YWx1ZSBvbiBvcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0c2V0T25lVmFsT3JpZ2luYWw6IGZ1bmN0aW9uKCRvcmlnaW5hbFNlbGVjdCwgdmFsT2JqKSB7XHJcblx0XHRcdC8vY2hlY2sgaWYgY29ycmVzcG9uZGluZyBvcHRpb24gZXhpc3RzIGluIG9yaWdpbmFsIHNlbGVjdFxyXG5cdFx0XHR2YXIgJHNlYXJjaE9wdCA9ICRvcmlnaW5hbFNlbGVjdC5maW5kKCdvcHRpb25bdmFsdWU9XCInK3ZhbE9iai52YWx1ZSsnXCJdJykuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gdmFsT2JqLnRleHQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2lmIG9wdGlvbiBkb2Vzbid0IGV4aXN0IGluIG9yaWdpbmFsIHNlbGVjdFxyXG5cdFx0XHRpZigkc2VhcmNoT3B0Lmxlbmd0aCA8IDEpIHtcclxuXHRcdFx0XHQvL2J1aWxkIG9wdGlvbiBmb3Igb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRcdFx0dmFyICRvcHRpb24gPSBCdWlsZC5idWlsZE9wdGlvbih2YWxPYmopO1xyXG5cdFx0XHRcdC8vaW5zZXJ0IGJ1aWx0IG9wdGlvbiBpbiBvcmlnaW5hbCBzZWxlY3RcclxuXHRcdFx0XHQkb3JpZ2luYWxTZWxlY3QuYXBwZW5kKCRvcHRpb24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgb3B0aW9uIGFscmVhZHkgZXhpc3RzIGluIG9yaWdpbmFsIHNlbGVjdFxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL2ZvbmQgb3B0aW9uIGVsZW1lbnRcclxuXHRcdFx0XHR2YXIgJGZvdW5kT3B0aW9uID0gJHNlYXJjaE9wdC5maXJzdCgpO1xyXG5cdFx0XHRcdC8vc2V0IG9wdGlvbiBhcyBzZWxlY3RlZFxyXG5cdFx0XHRcdCRmb3VuZE9wdGlvblswXS5zZWxlY3RlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGNvbnRyb2xzXHJcblxyXG5cdFx0Ly9jb250cm9sIHRhcmdldCBlbGVtZW50XHJcblx0XHRjb250cm9sVGFyZ2V0OiBmdW5jdGlvbigkdGFyZ2V0LCBjb250cm9scykge1xyXG5cdFx0XHQvL2Vycm9yIGlmIGVsZW1lbnQgaXMgbm90IGEgc2VsZWN0XHJcblx0XHRcdGlmKCQuaW5BcnJheSgnaXNTZWxlY3QnLCBjb250cm9scykgIT09IC0xICYmICEkdGFyZ2V0LmlzKCdzZWxlY3QnKSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ3NlbGVjdE1hbmlhIHwgaW52YWxpZCBzZWxlY3QgZWxlbWVudCcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCR0YXJnZXRbMF0pO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2Vycm9yIGlmIHBsdWdpbiBub3QgaW5pdGlhbGl6ZWRcclxuXHRcdFx0aWYoJC5pbkFycmF5KCdpc0luaXRpYWxpemVkJywgY29udHJvbHMpICE9PSAtMSAmJiAhJHRhcmdldC5oYXNDbGFzcygnc2VsZWN0LW1hbmlhLW9yaWdpbmFsJykpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdzZWxlY3RNYW5pYSB8IHNlbGVjdCBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygkdGFyZ2V0WzBdKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9lcnJvciBpZiBwbHVnaW4gYWxyZWFkeSBpbml0aWFsaXplZFxyXG5cdFx0XHRpZigkLmluQXJyYXkoJ25vdEluaXRpYWxpemVkJywgY29udHJvbHMpICE9PSAtMSAmJiAkdGFyZ2V0Lmhhc0NsYXNzKCdzZWxlY3QtbWFuaWEtb3JpZ2luYWwnKSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ3NlbGVjdE1hbmlhIHwgaWdub3JlIGJlY2F1c2UgYWxyZWFkeSBpbml0aWFsaXplZCcpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCR0YXJnZXRbMF0pO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2NvbnRyb2wgbWV0aG9kIHdhcyBjYWxsZWQgb24gc2luZ2xlIGVsZW1lbnRcclxuXHRcdFx0aWYoJC5pbkFycmF5KCdpc1NpbmdsZScsIGNvbnRyb2xzKSAhPT0gLTEgJiYgJHRhcmdldC5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignc2VsZWN0TWFuaWEgfCBjaGVjayBtZXRob2QgY2FuIGJlIGNhbGxlZCBvbiBzaW5nbGUgZWxlbWVudCBvbmx5Jyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJHRhcmdldFswXSk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgY29udHJvbCBva1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0sIFxyXG5cclxuXHRcdC8vY29udHJvbCBzZWxlY3RNYW5pYSBzZXR0aW5nc1xyXG5cdFx0Y29udHJvbFNldHRpbmdzOiBmdW5jdGlvbigkdGFyZ2V0LCBzZXR0aW5ncykge1xyXG5cdFx0XHQvL2NvbnRyb2wgYWpheCBmdW5jdGlvbiB0eXBlXHJcblx0XHRcdGlmKHNldHRpbmdzLmFqYXggIT09IGZhbHNlICYmIHR5cGVvZiBzZXR0aW5ncy5hamF4ICE9PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0c2V0dGluZ3MuYWpheCA9IGZhbHNlO1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ3NlbGVjdE1hbmlhIHwgaW52YWxpZCBhamF4IGZ1bmN0aW9uJyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJHRhcmdldFswXSk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coc2V0dGluZ3MpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2Vycm9yIGlmIGludmFsaWQgc2l6ZSBwcm92aWRlZFxyXG5cdFx0XHRpZigkLmluQXJyYXkoc2V0dGluZ3Muc2l6ZSwgWyd0aW55Jywnc21hbGwnLCdtZWRpdW0nLCdsYXJnZSddKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5zaXplID0gJ21lZGl1bSc7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignc2VsZWN0TWFuaWEgfCBpbnZhbGlkIHNpemUnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygkdGFyZ2V0WzBdKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhzZXR0aW5ncyk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vZXJyb3IgaWYgaW52YWxpZCBzcm9sbCBjb250YWluZXIgcHJvdmlkZWRcclxuXHRcdFx0aWYoc2V0dGluZ3Muc2Nyb2xsQ29udGFpbmVyICE9PSBudWxsICYmICQoc2V0dGluZ3Muc2Nyb2xsQ29udGFpbmVyKS5sZW5ndGggPCAxKSB7XHJcblx0XHRcdFx0c2V0dGluZ3Muc2Nyb2xsQ29udGFpbmVyID0gbnVsbDtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdzZWxlY3RNYW5pYSB8IGludmFsaWQgc2Nyb2xsIGNvbnRhaW5lcicpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCR0YXJnZXRbMF0pO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHNldHRpbmdzKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9lcnJvciBpZiBpbnZhbGlkIHNyb2xsIGNvbnRhaW5lciBwcm92aWRlZFxyXG5cdFx0XHRpZihzZXR0aW5ncy56SW5kZXggIT09IG51bGwgJiYgKGlzTmFOKHBhcnNlSW50KHNldHRpbmdzLnpJbmRleCkpIHx8ICFpc0Zpbml0ZShzZXR0aW5ncy56SW5kZXgpKSkge1xyXG5cdFx0XHRcdHNldHRpbmdzLnpJbmRleCA9IG51bGw7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignc2VsZWN0TWFuaWEgfCBpbnZhbGlkIHotaW5kZXgnKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygkdGFyZ2V0WzBdKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhzZXR0aW5ncyk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgY29udHJvbCBva1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0sIFxyXG5cclxuXHRcdC8vY29udHJvbCBzZWxlY3RNYW5pYSB2YWx1ZXNcclxuXHRcdGNvbnRyb2xWYWx1ZXM6IGZ1bmN0aW9uKCR0YXJnZXQsIHZhbHVlcykge1xyXG5cdFx0XHQvL2Vycm9yIGlmIHZhbHVlcyBpcyBub3QgYW4gYXJyYXlcclxuXHRcdFx0aWYoISh2YWx1ZXMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdzZWxlY3RNYW5pYSB8IHZhbHVlcyBwYXJhbWV0ZXIgaXMgbm90IGEgdmFsaWQgYXJyYXknKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygkdGFyZ2V0WzBdKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZXMpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2lmIGNvbnRyb2wgb2tcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBuYXZpZ2F0ZUl0ZW1cclxuXHJcblx0XHQvL25hdmlnYXRlIGhvdmVyIHRvIG5leHQgb3IgcHJldmlvdXMgaXRlbSBpbiBkcm9wZG93blxyXG5cdFx0bmF2aWdhdGVJdGVtOiBmdW5jdGlvbigkZHJvcGRvd24sIG5leHRPclByZXZpb3VzKSB7XHJcblx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHR2YXIgJHNlbGVjdE1hbmlhRWwgPSAkZHJvcGRvd24uY2xvc2VzdCgnLnNlbGVjdC1tYW5pYScpO1xyXG5cdFx0XHQvL2l0ZW0gc2Nyb2xsYWJsZSBsaXN0XHJcblx0XHRcdHZhciAkaXRlbUxpc3QgPSAkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtcycpO1xyXG5cdFx0XHQvL2FjdGl2ZSBlbmFibGVkIGl0ZW1zXHJcblx0XHRcdHZhciB2YWxpZEl0ZW1TZWxlY3RvciA9ICcuc2VsZWN0LW1hbmlhLWl0ZW06bm90KC5zZWxlY3QtbWFuaWEtZGlzYWJsZWQpOm5vdCguc2VsZWN0LW1hbmlhLWhpZGRlbiknO1xyXG5cdFx0XHRpZigkc2VsZWN0TWFuaWFFbC5oYXNDbGFzcygnc2VsZWN0LW1hbmlhLW11bHRpcGxlJykpIHtcclxuXHRcdFx0XHR2YWxpZEl0ZW1TZWxlY3RvciArPSAnOm5vdCguc2VsZWN0LW1hbmlhLXNlbGVjdGVkKSc7XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyICR2YWxpZEl0ZW1zID0gJGRyb3Bkb3duLmZpbmQodmFsaWRJdGVtU2VsZWN0b3IpO1xyXG5cdFx0XHQvL2N1cnJlbnQgaG92ZXJlZCBpdGVtXHJcblx0XHRcdHZhciAkaG92ZXJlZEl0ZW0gPSAkZHJvcGRvd24uZmluZCh2YWxpZEl0ZW1TZWxlY3RvcisnLnNlbGVjdC1tYW5pYS1ob3ZlcicpO1xyXG5cdFx0XHQvL2l0ZW0gdG8gdGFyZ2V0XHJcblx0XHRcdHZhciAkdGFyZ2V0SXRlbSA9ICQoKTtcclxuXHRcdFx0Ly9pZiB0aGVyZSBpcyBjdXJyZW50bHkgYSBob3ZlcmVkIGl0ZW1cclxuXHRcdFx0aWYoJGhvdmVyZWRJdGVtLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHQvL2lmIGFycm93IHVwIGdldCBwcmV2aW91cyBpdGVtXHJcblx0XHRcdFx0aWYobmV4dE9yUHJldmlvdXMgPT09ICduZXh0Jykge1xyXG5cdFx0XHRcdFx0JHRhcmdldEl0ZW0gPSAkdmFsaWRJdGVtcy5zbGljZSgkdmFsaWRJdGVtcy5pbmRleCgkaG92ZXJlZEl0ZW0pICsgMSkuZmlyc3QoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly9pZiBhcnJvdyBkb3duIGdldCBuZXh0IGl0ZW1cclxuXHRcdFx0XHRlbHNlIGlmKG5leHRPclByZXZpb3VzID09PSAncHJldmlvdXMnKSB7XHJcblx0XHRcdFx0XHQkdGFyZ2V0SXRlbSA9ICR2YWxpZEl0ZW1zLnNsaWNlKDAsICR2YWxpZEl0ZW1zLmluZGV4KCRob3ZlcmVkSXRlbSkpLmxhc3QoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9ubyBjdXJyZW50IGhvdmVyZWQgaXRlbVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL2hvdmVycyBmaXJzdCBpdGVtXHJcblx0XHRcdFx0JHRhcmdldEl0ZW0gPSAkdmFsaWRJdGVtcy5maXJzdCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgdGFyZ2V0IGl0ZW0gZXhpc3RzIGhvdmVyIHRoaXMgaXRlbVxyXG5cdFx0XHRpZigkdGFyZ2V0SXRlbS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Ly9yZW1vdmUgaG92ZXIgZnJvbSBldmVyeSBpdGVtXHJcblx0XHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbScpLnJlbW92ZUNsYXNzKCdzZWxlY3QtbWFuaWEtaG92ZXInKTtcclxuXHRcdFx0XHQvL2FkZCBob3ZlciBjbGFzcyB0byB0YXJnZXQgaXRlbVxyXG5cdFx0XHRcdCR0YXJnZXRJdGVtLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtaG92ZXInKTtcclxuXHRcdFx0XHQvL2RhdGEgZm9yIGl0ZW0gdmlzaWJpbGl0eSBjYWxjdWxhdGlvblxyXG5cdFx0XHRcdHZhciAkdGFyZ2V0SXRlbVBvc2l0aW9uID0gJHRhcmdldEl0ZW0ucG9zaXRpb24oKTtcclxuXHRcdFx0XHR2YXIgJHRhcmdldEl0ZW1IZWlnaHQgPSAkdGFyZ2V0SXRlbS5vdXRlckhlaWdodCh0cnVlKTtcclxuXHRcdFx0XHR2YXIgJGl0ZW1MaXN0SGVpZ2h0ID0gJGl0ZW1MaXN0LmhlaWdodCgpO1xyXG5cdFx0XHRcdHZhciAkaXRlbUxpc3RTY3JvbGxUb3AgPSAkaXRlbUxpc3Quc2Nyb2xsVG9wKCk7XHJcblx0XHRcdFx0Ly9pZiB0YXJnZXQgaXRlbSBub3QgdmlzaWJsZSBpbiBpdGVtIGxpc3QgKGFib3ZlKVxyXG5cdFx0XHRcdGlmKCR0YXJnZXRJdGVtUG9zaXRpb24udG9wIDwgMCkge1xyXG5cdFx0XHRcdFx0Ly9zY3JvbGwgdG8gc2VlIGl0ZW1cclxuXHRcdFx0XHRcdCRpdGVtTGlzdC5zY3JvbGxUb3AoJGl0ZW1MaXN0U2Nyb2xsVG9wICsgJHRhcmdldEl0ZW1Qb3NpdGlvbi50b3ApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2lmIHRhcmdldCBpdGVtIG5vdCB2aXNpYmxlIGluIGl0ZW0gbGlzdCAoYmVsb3cpXHJcblx0XHRcdFx0ZWxzZSBpZigkdGFyZ2V0SXRlbVBvc2l0aW9uLnRvcCArICR0YXJnZXRJdGVtSGVpZ2h0ID4gJGl0ZW1MaXN0SGVpZ2h0KSB7XHJcblx0XHRcdFx0XHQvL3Njcm9sbCB0byBzZWUgaXRlbVxyXG5cdFx0XHRcdFx0JGl0ZW1MaXN0LnNjcm9sbFRvcCgkaXRlbUxpc3RTY3JvbGxUb3AgKyAkdGFyZ2V0SXRlbVBvc2l0aW9uLnRvcCArICR0YXJnZXRJdGVtSGVpZ2h0IC0gJGl0ZW1MaXN0SGVpZ2h0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcbi8vIEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAgLy9cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBCVUlMRCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcblxyXG52YXIgQnVpbGQgPSB7XHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gYnVpbGRcclxuXHJcblx0XHQvL2J1aWxkIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdGJ1aWxkOiBmdW5jdGlvbigkb3JpZ2luYWxTZWxlY3QsIHNldHRpbmdzKSB7XHJcblx0XHRcdHZhciB0aGlzQnVpbGQgPSB0aGlzO1xyXG5cdFx0XHQvL2NsYXNzIGZvciBzZWxlY3RNYW5pYSBzaXplXHJcblx0XHRcdHZhciBzaXplQ2xhc3MgPSAnc2VsZWN0LW1hbmlhLScrc2V0dGluZ3Muc2l6ZTtcclxuXHRcdFx0Ly9leHBsaWNpdCBzZWxlY3RNYW5pYSB3aWR0aCBzdHlsZVxyXG5cdFx0XHR2YXIgd2lkdGhTdHlsZSA9ICdzdHlsZT1cIndpZHRoOicrc2V0dGluZ3Mud2lkdGgrJztcIic7XHJcblx0XHRcdC8vZ2VuZXJhbCBzZWxlY3RNYW5pYSBkaXZcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYSAnK3NpemVDbGFzcysnXCIgJyt3aWR0aFN0eWxlKyc+PC9kaXY+Jyk7XHJcblx0XHRcdC8vY2xhc3MgZm9yIG11bHRpcGxlXHJcblx0XHRcdGlmKHNldHRpbmdzLm11bHRpcGxlKSB7XHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuYWRkQ2xhc3MoJ3NlbGVjdC1tYW5pYS1tdWx0aXBsZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY2xhc3MgZm9yIGRpc2FibGVkXHJcblx0XHRcdGlmKHNldHRpbmdzLmRpc2FibGVkKSB7XHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuYWRkQ2xhc3MoJ3NlbGVjdC1tYW5pYS1kaXNhYmxlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY2xhc3NlcyBmb3IgdGhlbWVzXHJcblx0XHRcdGlmKHNldHRpbmdzLnRoZW1lcyBpbnN0YW5jZW9mIEFycmF5ICYmIHNldHRpbmdzLnRoZW1lcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Ly9sb29wIHRocm91Z2ggdGhlbWVzXHJcblx0XHRcdFx0c2V0dGluZ3MudGhlbWVzLmZvckVhY2goZnVuY3Rpb24odGhlbWUpIHtcclxuXHRcdFx0XHRcdC8vYXBwbGllcyB0aGVtZSBjbGFzc1xyXG5cdFx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuYWRkQ2xhc3MoJ3NlbGVjdC1tYW5pYS10aGVtZS0nK3RoZW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2NsYXNzIGZvciBhY3RpdmF0ZWQgYWpheFxyXG5cdFx0XHRpZihzZXR0aW5ncy5hamF4ICE9PSBmYWxzZSkge1xyXG5cdFx0XHRcdCRzZWxlY3RNYW5pYUVsLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtYWpheCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vYXR0cmlidXRlIGZvciBzY3JvbGwgY29udGFpbmVyXHJcblx0XHRcdGlmKHNldHRpbmdzLnNjcm9sbENvbnRhaW5lciAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdCRzZWxlY3RNYW5pYUVsLmF0dHIoJ2RhdGEtc2VsZWN0TWFuaWEtc2Nyb2xsQ29udGFpbmVyJywgc2V0dGluZ3Muc2Nyb2xsQ29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2J1aWxkIGlubmVyIGVsZW1lbnRzXHJcblx0XHRcdHZhciAkaW5uZXJFbGVtZW50cyA9IHRoaXNCdWlsZC5idWlsZElubmVyKHNldHRpbmdzKTtcclxuXHRcdFx0Ly9idWlsZCBkcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gdGhpc0J1aWxkLmJ1aWxkRHJvcGRvd24oJG9yaWdpbmFsU2VsZWN0LCBzZXR0aW5ncyk7XHJcblx0XHRcdC8vaW5zZXJ0IGVsZW1lbnRzXHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmFwcGVuZCgkaW5uZXJFbGVtZW50cykuYXBwZW5kKCRkcm9wZG93bik7XHJcblx0XHRcdC8vYXR0YWNoIGRyb3Bkb3duIHRvIHNlbGVjdC1tYW5pYSBlbGVtZW50XHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWRyb3Bkb3duJywgJGRyb3Bkb3duKTtcclxuXHRcdFx0Ly9hdHRhY2ggc2VsZWN0LW1hbmlhIGVsZW1lbnQgdG8gZHJvcGRvd25cclxuXHRcdFx0JGRyb3Bkb3duLmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnLCAkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdC8vc2VuZCBiYWNrIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0cmV0dXJuICRzZWxlY3RNYW5pYUVsO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gYnVpbGRJbm5lclxyXG5cclxuXHRcdC8vYnVpbGQgaW5uZXIgZWxlbWVudHNcclxuXHRcdGJ1aWxkSW5uZXI6IGZ1bmN0aW9uKHNldHRpbmdzKSB7XHJcblx0XHRcdHZhciB0aGlzQnVpbGQgPSB0aGlzO1xyXG5cdFx0XHQvL2lubmVyIGRpdlxyXG5cdFx0XHR2YXIgJGlubmVyID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1pbm5lclwiPjwvZGl2PicpO1xyXG5cdFx0XHQvL3ZhbHVlcyBkaXZcclxuXHRcdFx0dmFyICR2YWx1ZXMgPSAkKCc8ZGl2IGNsYXNzPVwic2VsZWN0LW1hbmlhLXZhbHVlc1wiPjwvZGl2PicpO1xyXG5cdFx0XHQvL2luc2VydCBwbGFjZWhvbGRlclxyXG5cdFx0XHR2YXIgJHBsYWNlaG9sZGVyID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1wbGFjZWhvbGRlclwiPicrc2V0dGluZ3MucGxhY2Vob2xkZXIrJzwvZGl2PicpO1xyXG5cdFx0XHQkdmFsdWVzLmFwcGVuZCgkcGxhY2Vob2xkZXIpO1xyXG5cdFx0XHQvL2luc2VydCBzZWxlY3RlZCB2YWx1ZXNcclxuXHRcdFx0c2V0dGluZ3MudmFsdWVzLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XHJcblx0XHRcdFx0JHZhbHVlcy5hcHBlbmQodGhpc0J1aWxkLmJ1aWxkVmFsdWUodmFsKSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQkaW5uZXIuYXBwZW5kKCR2YWx1ZXMpO1xyXG5cdFx0XHQvL2luc2VydCBjbGVhbiB2YWx1ZXMgaWNvblxyXG5cdFx0XHR2YXIgJGNsZWFuID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1jbGVhclwiPjwvZGl2PicpO1xyXG5cdFx0XHRpZihzZXR0aW5ncy5yZW1vdmFibGUgfHwgc2V0dGluZ3MubXVsdGlwbGUpIHtcclxuXHRcdFx0XHQkY2xlYW4uYXBwZW5kKCc8aSBjbGFzcz1cInNlbGVjdC1tYW5pYS1jbGVhci1pY29uIGljb24tY3Jvc3NcIj4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkaW5uZXIuYXBwZW5kKCRjbGVhbik7XHJcblx0XHRcdCRpbm5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtYWRkXCI+PGkgY2xhc3M9XCJzZWxlY3QtbWFuaWEtYWRkLWljb24gaWNvbi1hZGRcIj48L2Rpdj4nKTtcclxuXHRcdFx0Ly9pbnNlcnQgZHJvcGRvd24gYXJyb3cgaWNvblxyXG5cdFx0XHQkaW5uZXIuYXBwZW5kKCQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtYXJyb3dcIj48aSBjbGFzcz1cInNlbGVjdC1tYW5pYS1hcnJvdy1pY29uIGljb24tYXJyb3ctZG93blwiPjwvaT48L2Rpdj4nKSk7XHJcblx0XHRcdC8vc2VuZCBiYWNrIGlubmVyIGVsZW1lbnRzXHJcblx0XHRcdHJldHVybiAkaW5uZXI7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBidWlsZFZhbHVlXHJcblxyXG5cdFx0Ly9idWlsZCBzZWxlY3RlZCB2YWx1ZVxyXG5cdFx0YnVpbGRWYWx1ZTogZnVuY3Rpb24odmFsT2JqKSB7XHJcblx0XHRcdC8vc2VsZWN0ZWQgdmFsdWUgZWxlbWVudCBodG1sXHJcblx0XHRcdHZhciB2YWxIdG1sID0gJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtdmFsdWVcIiAgZGF0YS12YWx1ZT1cIicrdmFsT2JqLnZhbHVlKydcIj4nK1xyXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwic2VsZWN0LW1hbmlhLXZhbHVlLXRleHRcIj4nK3ZhbE9iai50ZXh0Kyc8L2Rpdj4nK1xyXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwic2VsZWN0LW1hbmlhLXZhbHVlLWNsZWFyXCI+JytcclxuXHRcdFx0XHRcdCc8aSBjbGFzcz1cInNlbGVjdC1tYW5pYS12YWx1ZS1jbGVhci1pY29uIGljb24tY3Jvc3NcIj48L2k+JytcclxuXHRcdFx0XHQnPC9kaXY+JytcclxuXHRcdFx0JzwvZGl2Pic7XHJcblx0XHRcdC8vc2VuZCBiYWNrIHNlbGVjdGVkIHZhbHVlIGVsZW1lbnRcclxuXHRcdFx0cmV0dXJuICQodmFsSHRtbCk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBidWlsZE9wdGlvblxyXG5cclxuXHRcdC8vYnVpbGQgb3B0aW9uIGZvciBvcmlnaW5hbCBzZWxlY3RcclxuXHRcdGJ1aWxkT3B0aW9uOiBmdW5jdGlvbih2YWxPYmopIHtcclxuXHRcdFx0Ly9idWlsZCBvcHRpb25cclxuXHRcdFx0dmFyICRvcHQgPSAkKCc8b3B0aW9uIHZhbHVlPVwiJyt2YWxPYmoudmFsdWUrJ1wiPicrdmFsT2JqLnRleHQrJzwvb3B0aW9uPicpO1xyXG5cdFx0XHQvL3NldCBvcHRpb24gc2VsZWN0ZWQgc3RhdHVzXHJcblx0XHRcdCRvcHRbMF0uc2VsZWN0ZWQgPSB2YWxPYmouc2VsZWN0ZWQ7XHJcblx0XHRcdC8vc2VuZCBiYWNrIG9wdGlvbiBlbGVtZW50XHJcblx0XHRcdHJldHVybiAkb3B0O1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gYnVpbGREcm9wZG93blxyXG5cclxuXHRcdC8vYnVpbGQgaXRlbXMgZHJvcGRvd25cclxuXHRcdGJ1aWxkRHJvcGRvd246IGZ1bmN0aW9uKCRvcmlnaW5hbFNlbGVjdCwgc2V0dGluZ3MpIHtcclxuXHRcdFx0dmFyIHRoaXNCdWlsZCA9IHRoaXM7XHJcblx0XHRcdC8vY2xhc3MgZm9yIHNpemluZ1xyXG5cdFx0XHR2YXIgc2l6ZUNsYXNzID0gJ3NlbGVjdC1tYW5pYS0nK3NldHRpbmdzLnNpemU7XHJcblx0XHRcdC8vZHJvcGRvd24gZWxlbWVudFxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1kcm9wZG93biAnK3NpemVDbGFzcysnXCI+PC9kaXY+Jyk7XHJcblx0XHRcdC8vY2xhc3NlIHNpIHNlbGVjdCBtdWx0aXBsZVxyXG5cdFx0XHRpZihzZXR0aW5ncy5tdWx0aXBsZSkge1xyXG5cdFx0XHRcdCRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLW11bHRpcGxlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9pbnNlcnQgc2VhcmNoIGlucHV0IGluIGRyb3Bkb3duIGlmIGFjdGl2YXRlZFxyXG5cdFx0XHRpZihzZXR0aW5ncy5zZWFyY2gpIHtcclxuXHRcdFx0XHR2YXIgJGRyb3Bkb3duU2VhcmNoID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1kcm9wZG93bi1zZWFyY2hcIj48L2Rpdj4nKTtcclxuXHRcdFx0XHQkZHJvcGRvd25TZWFyY2guYXBwZW5kKCc8aW5wdXQgY2xhc3M9XCJzZWxlY3QtbWFuaWEtc2VhcmNoLWlucHV0XCIgLz4nKTtcclxuXHRcdFx0XHQkZHJvcGRvd24uYXBwZW5kKCRkcm9wZG93blNlYXJjaCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9idWlsZCBpdGVtcyBjb250YWluZXJcclxuXHRcdFx0dmFyICRpdGVtTGlzdENvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtaXRlbXMtY29udGFpbmVyXCI+PC9kaXY+Jyk7XHJcblx0XHRcdHZhciAkaXRlbUxpc3QgPSAkKCc8ZGl2IGNsYXNzPVwic2VsZWN0LW1hbmlhLWl0ZW1zXCI+PC9kaXY+Jyk7XHJcblx0XHRcdC8vYnVpbGQgYW5kIGluc2VydCBpdGVtcyBsaXN0XHJcblx0XHRcdCRpdGVtTGlzdC5hcHBlbmQodGhpc0J1aWxkLmJ1aWxkSXRlbUxpc3QoJG9yaWdpbmFsU2VsZWN0LmNoaWxkcmVuKCkpKTtcclxuXHRcdFx0Ly9pbnNlcnQgaXRlbXMgbGlzdCBpbnRvIGRyb3Bkb3duXHJcblx0XHRcdCRpdGVtTGlzdENvbnRhaW5lci5hcHBlbmQoJGl0ZW1MaXN0KTtcclxuXHRcdFx0JGRyb3Bkb3duLmFwcGVuZCgkaXRlbUxpc3RDb250YWluZXIpO1xyXG5cdFx0XHQvL2NsYXNzZXMgZm9yIHRoZW1lc1xyXG5cdFx0XHRpZihzZXR0aW5ncy50aGVtZXMgaW5zdGFuY2VvZiBBcnJheSAmJiBzZXR0aW5ncy50aGVtZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdC8vbG9vcCB0aHJvdWdoIHRoZW1lc1xyXG5cdFx0XHRcdHNldHRpbmdzLnRoZW1lcy5mb3JFYWNoKGZ1bmN0aW9uKHRoZW1lKSB7XHJcblx0XHRcdFx0XHQvL2FwcGxpZXMgdGhlbWUgY2xhc3NcclxuXHRcdFx0XHRcdCRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLXRoZW1lLScrdGhlbWUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgekluZGV4IHNldHRpbmcgaXMgc2V0XHJcblx0XHRcdGlmKHNldHRpbmdzLnpJbmRleCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdCRkcm9wZG93bi5jc3MoJ3otaW5kZXgnLCBzZXR0aW5ncy56SW5kZXgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vc2VuZCBiYWNrIGl0ZW1zIGRyb3Bkb3duXHJcblx0XHRcdHJldHVybiAkZHJvcGRvd247XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBidWlsZEl0ZW1Hcm91cFxyXG5cclxuXHRcdC8vYnVpbGQgaXRlbXMgbGlzdFxyXG5cdFx0YnVpbGRJdGVtTGlzdDogZnVuY3Rpb24oJG9wdExpc3QpIHtcclxuXHRcdFx0dmFyIHRoaXNCdWlsZCA9IHRoaXM7XHJcblx0XHRcdC8vZW1wdHkgaXRlbSBsaXN0XHJcblx0XHRcdHZhciAkaXRlbUxpc3QgPSAkKCk7XHJcblx0XHRcdC8vbG9vcCB0aHJvdWdoIG9yaWdpbmFsIHNlbGVjdCBjaGlsZHJlblxyXG5cdFx0XHQkb3B0TGlzdC5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vaWYgb3B0Z3JvdXBcclxuXHRcdFx0XHRpZigkKHRoaXMpLmlzKCdvcHRncm91cCcpKSB7XHJcblx0XHRcdFx0XHQvL2J1aWxkIGFuZCBpbnNlcnQgaXRlbSBncm91cFxyXG5cdFx0XHRcdFx0JGl0ZW1MaXN0ID0gJGl0ZW1MaXN0LmFkZCh0aGlzQnVpbGQuYnVpbGRJdGVtR3JvdXAoJCh0aGlzKSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2lmIG9wdGlvblxyXG5cdFx0XHRcdGVsc2UgaWYoJCh0aGlzKS5pcygnb3B0aW9uJykpIHtcclxuXHRcdFx0XHRcdC8vYnVpbGQgYW5kIGluc2VydCBpdGVtXHJcblx0XHRcdFx0XHQkaXRlbUxpc3QgPSAkaXRlbUxpc3QuYWRkKHRoaXNCdWlsZC5idWlsZEl0ZW0oJCh0aGlzKSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vc2VuZCBiYWNrIGJ1aWxkIGl0ZW1zIGxpc3RcclxuXHRcdFx0cmV0dXJuICRpdGVtTGlzdDtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGJ1aWxkSXRlbUdyb3VwXHJcblxyXG5cdFx0Ly9idWlsZCBkcm9wZG93biBpdGVtcyBncm91cFxyXG5cdFx0YnVpbGRJdGVtR3JvdXA6IGZ1bmN0aW9uKCRvcHRncm91cEVsKSB7XHJcblx0XHRcdHZhciB0aGlzQnVpbGQgPSB0aGlzO1xyXG5cdFx0XHQvL2J1aWxkIGdyb3VwIGVsZW1lbnRcclxuXHRcdFx0dmFyICRncm91cCA9ICQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtZ3JvdXBcIj48L2Rpdj4nKTtcclxuXHRcdFx0dmFyICRncm91cElubmVyID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1ncm91cC1pbm5lclwiPjwvZGl2PicpO1xyXG5cdFx0XHQvL2J1aWxkIGdyb3VwIHRpdGxlIGVsZW1lbnRcclxuXHRcdFx0dmFyICRncm91cFRpdGxlID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1ncm91cC10aXRsZVwiPjwvZGl2PicpO1xyXG5cdFx0XHQvL2lmIGdyb3VwIGljb24gaXMgc2V0XHJcblx0XHRcdGlmKCRvcHRncm91cEVsLmlzKCdbZGF0YS1pY29uXScpKSB7XHJcblx0XHRcdFx0Ly9pbnNlcnQgZ3JvdXAgdGl0bGUgaWNvblxyXG5cdFx0XHRcdCRncm91cFRpdGxlLmFwcGVuZCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1ncm91cC1pY29uXCI+PGkgY2xhc3M9XCInKyRvcHRncm91cEVsLmF0dHIoJ2RhdGEtaWNvbicpKydcIj48L2k+PC9kaXY+Jyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9pbnNlcnQgZ3JvdXAgdGl0bGUgdGV4dFxyXG5cdFx0XHQkZ3JvdXBUaXRsZS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtZ3JvdXAtdGV4dFwiPicrJG9wdGdyb3VwRWwuYXR0cignbGFiZWwnKSsnPC9kaXY+Jyk7XHJcblx0XHRcdC8vaW5zZXJ0IGdyb3VwIHRpdGxlIGluIGdyb3VwIGVsZW1lbnRcclxuXHRcdFx0JGdyb3VwLmFwcGVuZCgkZ3JvdXBUaXRsZSk7XHJcblx0XHRcdC8vaWYgZ3JvdXAgaXMgZGlzYWJsZWQgc2V0IGNsYXNzXHJcblx0XHRcdHZhciBncm91cElzRGlzYWJsZWQgPSAkb3B0Z3JvdXBFbC5pcygnOmRpc2FibGVkJyk7XHJcblx0XHRcdGlmKGdyb3VwSXNEaXNhYmxlZCkge1xyXG5cdFx0XHRcdCRncm91cC5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLWRpc2FibGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9idWlsZCBhbmQgaW5zZXJ0IGl0ZW1zXHJcblx0XHRcdCRvcHRncm91cEVsLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JGdyb3VwSW5uZXIuYXBwZW5kKHRoaXNCdWlsZC5idWlsZEl0ZW0oJCh0aGlzKSwgZ3JvdXBJc0Rpc2FibGVkKSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQkZ3JvdXAuYXBwZW5kKCRncm91cElubmVyKTtcclxuXHRcdFx0Ly9zZW5kIGJhY2sgaXRlbXMgZ3JvdXBcclxuXHRcdFx0cmV0dXJuICRncm91cDtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGJ1aWxkSXRlbVxyXG5cclxuXHRcdC8vYnVpbGQgZHJvcGRvd24gaXRlbVxyXG5cdFx0YnVpbGRJdGVtOiBmdW5jdGlvbigkb3B0aW9uRWwsIGZvcmNlRGlzYWJsZWQpIHtcclxuXHRcdFx0dmFyIG9wdGlvbkVsID0gJG9wdGlvbkVsWzBdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9idWlsZCBpdGVtIGh0bWxcclxuXHRcdFx0dmFyICRpdGVtID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC1tYW5pYS1pdGVtXCIgZGF0YS12YWx1ZT1cIicrb3B0aW9uRWwudmFsdWUrJ1wiPjwvZGl2PicpO1xyXG5cdFx0XHQvL2lmIG9wdGlvbiBpY29uIGlzIHNldFxyXG5cdFx0XHRcclxuXHRcdFx0aWYoJG9wdGlvbkVsLmlzKCdbY2xhc3NdJykpIHtcclxuXHRcdFx0XHQvL2luc2VydCBpdGVtIGljb25cclxuXHRcdFx0XHQkaXRlbS5hZGRDbGFzcygkb3B0aW9uRWwuYXR0cignY2xhc3MnKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHRpZigkb3B0aW9uRWwuaXMoJ1tkYXRhLWljb25dJykpIHtcclxuXHRcdFx0XHQvL2luc2VydCBpdGVtIGljb25cclxuXHRcdFx0XHQkaXRlbS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtaXRlbS1pY29uXCI+PGkgY2xhc3M9XCInKyRvcHRpb25FbC5hdHRyKCdkYXRhLWljb24nKSsnXCI+PC9pPjwvZGl2PicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vaW5zZXJ0IGl0ZW0gdGV4dFxyXG5cdFx0XHQkaXRlbS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzZWxlY3QtbWFuaWEtaXRlbS10ZXh0XCI+JytvcHRpb25FbC50ZXh0Kyc8L2Rpdj4nKTtcclxuXHRcdFx0Ly9pZiBpdGVtIGlzIGRpc2FibGVkIHNldCBjbGFzc1xyXG5cdFx0XHRpZigkb3B0aW9uRWwuaXMoJzpkaXNhYmxlZCcpIHx8IFRvb2xzLmRlZihmb3JjZURpc2FibGVkKSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdCRpdGVtLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtZGlzYWJsZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2lmIGl0ZW0gaXMgc2VsZWN0ZWQgYWRkIGNsYXNzXHJcblx0XHRcdGlmKCRvcHRpb25FbC5pcygnOnNlbGVjdGVkJykpIHtcclxuXHRcdFx0XHQkaXRlbS5hZGRDbGFzcygnc2VsZWN0LW1hbmlhLXNlbGVjdGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9zZW5kIGJhY2sgaXRlbVxyXG5cdFx0XHRyZXR1cm4gJGl0ZW07XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQklORFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cclxuLy8gQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCAvL1xyXG5cclxuXHR2YXIgQmluZHMgPSB7XHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gYmluZFxyXG5cclxuXHRcdC8vYmluZCBhbGwgc2VsZWN0TWFuaWEgY29udHJvbHNcclxuXHRcdGJpbmQ6IGZ1bmN0aW9uKCRzZWxlY3RNYW5pYUVsKSB7XHJcblx0XHRcdHZhciB0aGlzQmluZHMgPSB0aGlzO1xyXG5cdFx0XHQvL29yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1vcmlnaW5hbFNlbGVjdCcpO1xyXG5cdFx0XHQvL2Ryb3Bkb3duXHJcblx0XHRcdHZhciAkZHJvcGRvd24gPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1kcm9wZG93bicpO1xyXG5cdFx0XHQvL2lmIHNlbGVjdCBpcyBub3QgZGlzYWJsZWRcclxuXHRcdFx0aWYoISRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLWRpc2FibGVkJykpIHtcclxuXHRcdFx0XHQvL2NsaWNrIG91dHNpZGUgc2VsZWN0XHJcblx0XHRcdFx0JChkb2N1bWVudCkub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpLm9uKCdjbGljay5zZWxlY3RNYW5pYScsIHRoaXNCaW5kcy5kb2N1bWVudENsaWNrKTtcclxuXHRcdFx0XHQvL2ZvY3VzIC8gYmx1ciBvcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHRcdCRvcmlnaW5hbFNlbGVjdC5vZmYoJ2ZvY3VzLnNlbGVjdE1hbmlhJykub24oJ2ZvY3VzLnNlbGVjdE1hbmlhJywgdGhpc0JpbmRzLmZvY3VzKTtcclxuXHRcdFx0XHQkb3JpZ2luYWxTZWxlY3Qub2ZmKCdibHVyLnNlbGVjdE1hbmlhJykub24oJ2JsdXIuc2VsZWN0TWFuaWEnLCB0aGlzQmluZHMuYmx1cik7XHJcblx0XHRcdFx0Ly9jbGVhciB2YWx1ZXNcclxuXHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5maW5kKCcuc2VsZWN0LW1hbmlhLWNsZWFyLWljb24nKS5vZmYoJ2NsaWNrLnNlbGVjdE1hbmlhJykub24oJ2NsaWNrLnNlbGVjdE1hbmlhJywgdGhpc0JpbmRzLmNsZWFyVmFsdWVzKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL9C00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQuVxyXG5cdFx0XHRcdC8vJHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS1hZGQtaWNvbicpLm9mZignY2xpY2suc2VsZWN0TWFuaWEnKS5vbignY2xpY2suc2VsZWN0TWFuaWEnLCB0aGlzQmluZHMuYWRkX21hbmlhKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL2NsZWFyIHNlbGVjdCBtdWx0aXBsZSBpbmRpdmlkdWFsIHZhbHVlXHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS12YWx1ZS1jbGVhci1pY29uJykub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpLm9uKCdjbGljay5zZWxlY3RNYW5pYScsIHRoaXNCaW5kcy5jbGVhclZhbHVlKTtcclxuXHRcdFx0XHQvL29wZW4gLyBjbG9zZSBkcm9wZG93blxyXG5cdFx0XHRcdCRzZWxlY3RNYW5pYUVsLmZpbmQoJy5zZWxlY3QtbWFuaWEtaW5uZXInKS5vZmYoJ2NsaWNrLnNlbGVjdE1hbmlhJykub24oJ2NsaWNrLnNlbGVjdE1hbmlhJywgdGhpc0JpbmRzLmRyb3Bkb3duVG9nZ2xlKTtcclxuXHRcdFx0XHQvL2l0ZW0gaG92ZXIgaW4gZHJvcGRvd25cclxuXHRcdFx0XHQkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtOm5vdCguc2VsZWN0LW1hbmlhLWRpc2FibGVkKScpLm9mZignbW91c2VlbnRlci5zZWxlY3RNYW5pYScpLm9uKCdtb3VzZWVudGVyLnNlbGVjdE1hbmlhJywgdGhpc0JpbmRzLmhvdmVySXRlbSk7XHJcblx0XHRcdFx0Ly9pdGVtIHNlbGVjdGlvbiBpbiBkcm9wZG93blxyXG5cdFx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW06bm90KC5zZWxlY3QtbWFuaWEtZGlzYWJsZWQpJykub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpLm9uKCdjbGljay5zZWxlY3RNYW5pYScsIHRoaXNCaW5kcy5pdGVtU2VsZWN0aW9uKTtcclxuXHRcdFx0XHQvL3NlYXJjaCBpbnB1dCBpbiBkcm9wZG93blxyXG5cdFx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLXNlYXJjaC1pbnB1dCcpLm9mZignaW5wdXQuc2VsZWN0TWFuaWEnKS5vbignaW5wdXQuc2VsZWN0TWFuaWEnLCB0aGlzQmluZHMuaW5wdXRTZWFyY2gpO1xyXG5cdFx0XHRcdC8vcHJldmVudHMgYm9keSBzY3JvbGwgd2hlbiByZWFjaGVkIGRyb3Bkb3duIHRvcCBvciBib3R0b21cclxuXHRcdFx0XHQkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtcycpLm9mZignd2hlZWwuc2VsZWN0TWFuaWEnKS5vbignd2hlZWwuc2VsZWN0TWFuaWEnLCB0aGlzQmluZHMuc2Nyb2xsQ29udHJvbCk7XHJcblx0XHRcdFx0Ly9hamF4IHNjcm9sbFxyXG5cdFx0XHRcdGlmKCRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLWFqYXgnKSkge1xyXG5cdFx0XHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKS5vZmYoJ3Njcm9sbC5zZWxlY3RNYW5pYScpLm9uKCdzY3JvbGwuc2VsZWN0TWFuaWEnLCB0aGlzQmluZHMuc2Nyb2xsQWpheCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vaWYgc2VsZWN0IGlzIGRpc2FibGVkIHVuYmluZCBjb250cm9sc1xyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL2ZvY3VzIC8gYmx1ciBvcmlnaW5hbCBzZWxlY3QgZWxlbWVudFxyXG5cdFx0XHRcdCRvcmlnaW5hbFNlbGVjdC5vZmYoJ2ZvY3VzLnNlbGVjdE1hbmlhJyk7XHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0Lm9mZignYmx1ci5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vY2xlYXIgdmFsdWVzXHJcblx0XHRcdFx0JHNlbGVjdE1hbmlhRWwuZmluZCgnLnNlbGVjdC1tYW5pYS1jbGVhci1pY29uJykub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vY2xlYXIgc2VsZWN0IG11bHRpcGxlIGluZGl2aWR1YWwgdmFsdWVcclxuXHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5maW5kKCcuc2VsZWN0LW1hbmlhLXZhbHVlLWNsZWFyLWljb24nKS5vZmYoJ2NsaWNrLnNlbGVjdE1hbmlhJyk7XHJcblx0XHRcdFx0Ly9vcGVuIC8gY2xvc2UgZHJvcGRvd25cclxuXHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5maW5kKCcuc2VsZWN0LW1hbmlhLWlubmVyJykub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vaXRlbSBob3ZlciBpbiBkcm9wZG93blxyXG5cdFx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW06bm90KC5zZWxlY3QtbWFuaWEtZGlzYWJsZWQpJykub2ZmKCdtb3VzZWVudGVyLnNlbGVjdE1hbmlhJyk7XHJcblx0XHRcdFx0Ly9pdGVtIHNlbGVjdGlvbiBpbiBkcm9wZG93blxyXG5cdFx0XHRcdCRkcm9wZG93bi5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW06bm90KC5zZWxlY3QtbWFuaWEtZGlzYWJsZWQpJykub2ZmKCdjbGljay5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vc2VhcmNoIGlucHV0IGluIGRyb3Bkb3duXHJcblx0XHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtc2VhcmNoLWlucHV0Jykub2ZmKCdpbnB1dC5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHRcdC8vcHJldmVudHMgYm9keSBzY3JvbGwgd2hlbiByZWFjaGVkIGRyb3Bkb3duIHRvcCBvciBib3R0b21cclxuXHRcdFx0XHQkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtcycpLm9mZignd2hlZWwuc2VsZWN0TWFuaWEnKTtcclxuXHRcdFx0XHQvL2FqYXggc2Nyb2xsXHJcblx0XHRcdFx0JGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QtbWFuaWEtaXRlbXMnKS5vZmYoJ3Njcm9sbC5zZWxlY3RNYW5pYScpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBkcm9wZG93blRvZ2dsZVxyXG5cclxuXHRcdC8vQklORCBPTkxZIC0gb3BlbiAvIGNsb3NlIGRyb3Bkb3duXHJcblx0XHRkcm9wZG93blRvZ2dsZTogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHQvL3NlbGVjdC1tYW5pYSBlbGVtZW50XHJcblx0XHRcdHZhciAkc2VsZWN0TWFuaWFFbCA9ICQodGhpcykuY2xvc2VzdCgnLnNlbGVjdC1tYW5pYScpO1xyXG5cdFx0XHQvL2Ryb3Bkb3duIGVsZW1lbnRcclxuXHRcdFx0dmFyICRkcm9wZG93biA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWRyb3Bkb3duJyk7XHJcblx0XHRcdC8vaWYgZHJvcGRvd24gb3BlblxyXG5cdFx0XHRpZigkZHJvcGRvd24uaXMoJy5vcGVuJykpIHtcclxuXHRcdFx0XHQvL2Nsb3NlIGRyb3Bkb3duXHJcblx0XHRcdFx0RW5naW5lLmNsb3NlRHJvcGRvd24oJGRyb3Bkb3duKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2lmIGRyb3Bkb3duIGNsb3NlZFxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL2Nsb3NlIGV2ZXJ5IG9wZW4gZHJvcGRvd25cclxuXHRcdFx0XHRFbmdpbmUuY2xvc2VEcm9wZG93bigkKCcuc2VsZWN0LW1hbmlhLWRyb3Bkb3duLm9wZW4nKSk7XHJcblx0XHRcdFx0Ly9vcGVuIHRhcmdldCBkcm9wZG93blxyXG5cdFx0XHRcdEVuZ2luZS5vcGVuRHJvcGRvd24oJGRyb3Bkb3duKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gZG9jdW1lbnRDbGlja1xyXG5cclxuXHRcdC8vQklORCBPTkxZIC0gY2xpY2sgb3V0c2lkZSBzZWxlY3RcclxuXHRcdGRvY3VtZW50Q2xpY2s6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0Ly9pZiBjbGljayBub3QgaW4gb3BlbiBkcm9wZG93blxyXG5cdFx0XHRpZigkKGUudGFyZ2V0KS5jbG9zZXN0KCcuc2VsZWN0LW1hbmlhLWRyb3Bkb3duJykubGVuZ3RoIDwgMSkge1xyXG5cdFx0XHRcdC8vY2xvc2UgZXZlcnkgb3BlbiBkcm9wZG93blxyXG5cdFx0XHRcdEVuZ2luZS5jbG9zZURyb3Bkb3duKCQoJy5zZWxlY3QtbWFuaWEtZHJvcGRvd24ub3BlbicpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gY2xlYXJWYWx1ZXNcclxuXHJcblx0XHQvL0JJTkQgT05MWSAtIGNsZWFyIHZhbHVlc1xyXG5cdFx0Y2xlYXJWYWx1ZXM6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Ly9zZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdHZhciAkc2VsZWN0TWFuaWFFbCA9ICQodGhpcykuY2xvc2VzdCgnLnNlbGVjdC1tYW5pYScpO1xyXG5cdFx0XHQvL2Ryb3Bkb3duXHJcblx0XHRcdHZhciAkZHJvcGRvd24gPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1kcm9wZG93bicpO1xyXG5cdFx0XHQvL29yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1vcmlnaW5hbFNlbGVjdCcpO1xyXG5cdFx0XHQvL2NsZWFyIHZhbHVlc1xyXG5cdFx0XHRFbmdpbmUuY2xlYXIoJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0XHQvL2lmIGFic29sdXRlIHBvc2l0aW9uIGRyb3Bkb3duXHJcblx0XHRcdGlmKCRkcm9wZG93bi5pcygnLnNlbGVjdC1tYW5pYS1hYnNvbHV0ZScpKSB7XHJcblx0XHRcdFx0Ly9wb3NpdGlvbiBhYnNvbHV0ZSBkcm9wZG93blxyXG5cdFx0XHRcdEVuZ2luZS5wb3NpdGlvbkRyb3Bkb3duKCRkcm9wZG93bik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly90cmlnZ2VyIG9yaWdpbmFsIHNlbGVjdCBjaGFuZ2UgZXZlbnRcclxuXHRcdFx0JG9yaWdpbmFsU2VsZWN0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG5cdFx0XHQvL3VwZGF0ZSBjbGVhciB2YWx1ZXMgaWNvbiBkaXNwbGF5XHJcblx0XHRcdEVuZ2luZS51cGRhdGVDbGVhbigkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBjbGVhclZhbHVlXHJcbiAgICAgLypcclxuXHRcdGFkZF9tYW5pYTogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHQkKCcuc2VsZWN0LW1hbmlhJykuaGlkZSgpO1x0XHJcblx0XHRcdCQoJy5hZGRfc2tsYWRfcGwnKS5zaG93KCk7XHJcblx0XHRcdCQoJy5uZXdfc2tsYWRfbmFtZScpLnZhbCgxKTtcclxuXHRcdH0sXHJcblx0Ki9cdFxyXG5cdFx0Ly9CSU5EIE9OTFkgLSBjbGVhciBzZWxlY3QgbXVsdGlwbGUgaW5kaXZpZHVhbCB2YWx1ZVxyXG5cdFx0Y2xlYXJWYWx1ZTogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHQvL3NlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJCh0aGlzKS5jbG9zZXN0KCcuc2VsZWN0LW1hbmlhJyk7XHJcblx0XHRcdC8vZHJvcGRvd25cclxuXHRcdFx0dmFyICRkcm9wZG93biA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWRyb3Bkb3duJyk7XHJcblx0XHRcdC8vdmFsdWUgdG8gZGVsZXRlXHJcblx0XHRcdHZhciAkdmFsdWUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zZWxlY3QtbWFuaWEtdmFsdWUnKTtcclxuXHRcdFx0Ly91bnNlbGVjdCBpdGVtIGluIGRyb3Bkb3duXHJcblx0XHRcdCRkcm9wZG93blxyXG5cdFx0XHRcdC5maW5kKCcuc2VsZWN0LW1hbmlhLWl0ZW1bZGF0YS12YWx1ZT1cIicrJHZhbHVlLmF0dHIoJ2RhdGEtdmFsdWUnKSsnXCJdJylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3NlbGVjdC1tYW5pYS1zZWxlY3RlZCcpO1xyXG5cdFx0XHQvL3JlbW92ZSB2YWx1ZSBmcm9tIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0JHZhbHVlLnJlbW92ZSgpO1xyXG5cdFx0XHQvL3JlbW92ZSB2YWx1ZSBmcm9tIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50XHJcblx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1vcmlnaW5hbFNlbGVjdCcpO1xyXG5cdFx0XHRFbmdpbmUucmVtb3ZlTXVsdGlwbGVWYWwoJG9yaWdpbmFsU2VsZWN0LCAkdmFsdWUuYXR0cignZGF0YS12YWx1ZScpKTtcclxuXHRcdFx0Ly9pZiBhYnNvbHV0ZSBwb3NpdGlvbiBkcm9wZG93blxyXG5cdFx0XHRpZigkZHJvcGRvd24uaXMoJy5zZWxlY3QtbWFuaWEtYWJzb2x1dGUnKSkge1xyXG5cdFx0XHRcdC8vcG9zaXRpb24gYWJzb2x1dGUgZHJvcGRvd25cclxuXHRcdFx0XHRFbmdpbmUucG9zaXRpb25Ecm9wZG93bigkZHJvcGRvd24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vdHJpZ2dlciBvcmlnaW5hbCBzZWxlY3QgY2hhbmdlIGV2ZW50XHJcblx0XHRcdCRvcmlnaW5hbFNlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdFx0Ly91cGRhdGUgY2xlYXIgdmFsdWVzIGljb24gZGlzcGxheVxyXG5cdFx0XHRFbmdpbmUudXBkYXRlQ2xlYW4oJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gaXRlbVNlbGVjdGlvblxyXG5cclxuXHRcdC8vQklORCBPTkxZIC0gaXRlbSBzZWxlY3Rpb24gaW4gZHJvcGRvd25cclxuXHRcdGl0ZW1TZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHNlbGVjdGVkSXRlbSA9ICQodGhpcyk7XHJcblx0XHRcdC8vc2VsZWN0IGl0ZW0gaW4gZHJvcGRvd25cclxuXHRcdFx0RW5naW5lLnNlbGVjdEl0ZW0oJHNlbGVjdGVkSXRlbSk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBpbnB1dFNlYXJjaFxyXG5cclxuXHRcdC8vQklORCBPTkxZIC0gZHJvcGRvd24gc2VhcmNoIGlucHV0XHJcblx0XHRpbnB1dFNlYXJjaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkaW5wdXQgPSAkKHRoaXMpO1xyXG5cdFx0XHQvL3NlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0JHNlbGVjdE1hbmlhRWwgPSAkaW5wdXQuY2xvc2VzdCgnLnNlbGVjdC1tYW5pYS1kcm9wZG93bicpLmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0Ly90aW1lciBkdXJhdGlvbiBhY2NvcmRpbmcgdG8gc2VsZWN0IG11bHRpcGxlIG9yIG5vdFxyXG5cdFx0XHR2YXIgdGhpc1RpbWUgPSAyMDA7XHJcblx0XHRcdGlmKCRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLWFqYXgnKSkge1xyXG5cdFx0XHRcdHRoaXNUaW1lID0gNDAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY2xlYXIgdGltZW91dFxyXG5cdFx0XHRjbGVhclRpbWVvdXQoJGlucHV0LmRhdGEoJ3NlbGVjdE1hbmlhLXNlYXJjaFRpbWVyJykpO1xyXG5cdFx0XHQvL3NlYXJjaCBpbnB1dCB0aW1lb3V0XHJcblx0XHRcdCRpbnB1dC5kYXRhKCdzZWxlY3RNYW5pYS1zZWFyY2hUaW1lcicsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly9hamF4IHNlYXJjaFxyXG5cdFx0XHRcdGlmKCRzZWxlY3RNYW5pYUVsLmlzKCcuc2VsZWN0LW1hbmlhLWFqYXgnKSkge1xyXG5cdFx0XHRcdFx0RW5naW5lLmRvU2VhcmNoQWpheCgkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vbm9ybWFsIHNlYXJjaFxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0RW5naW5lLmRvU2VhcmNoKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXNUaW1lKSk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBzY3JvbGxBamF4XHJcblxyXG5cdFx0Ly9CSU5EIE9OTFkgLSBkcm9wZG93biBhamF4IHNjcm9sbFxyXG5cdFx0c2Nyb2xsQWpheDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgJGl0ZW1MaXN0ID0gJCh0aGlzKTtcclxuXHRcdFx0Ly9kcm9wZG93biBlbGVtZW50XHJcblx0XHRcdHZhciAkZHJvcGRvd24gPSAkaXRlbUxpc3QuY2xvc2VzdCgnLnNlbGVjdC1tYW5pYS1kcm9wZG93bicpO1xyXG5cdFx0XHQvL3NlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJGRyb3Bkb3duLmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0Ly9pZiBhamF4IHNjcm9sbCBpcyBub3Qgb3ZlclxyXG5cdFx0XHRpZigkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4U2Nyb2xsRG9uZScpICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Ly9pZiBzY3JvbGwgcmVhY2hlZCBib3R0b20gd2l0aCAxMnB4IHRvbGVyYW5jZVxyXG5cdFx0XHRcdGlmKCRpdGVtTGlzdC5zY3JvbGxUb3AoKSA+PSAkaXRlbUxpc3RbMF0uc2Nyb2xsSGVpZ2h0IC0gJGl0ZW1MaXN0Lm91dGVySGVpZ2h0KCkgLSAxMikge1xyXG5cdFx0XHRcdFx0Ly9pZiBhamF4IHNjcm9sbCBpcyByZWFkeVxyXG5cdFx0XHRcdFx0aWYoJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtYWpheFJlYWR5JykgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdFx0Ly9wYWdlIG51bWJlciB0byBjYWxsXHJcblx0XHRcdFx0XHRcdHZhciB0aGlzUGFnZSA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhQYWdlJykgKyAxO1xyXG5cdFx0XHRcdFx0XHQvL3NlYXJjaCB2YWx1ZVxyXG5cdFx0XHRcdFx0XHR2YXIgdGhpc1NlYXJjaCA9ICRzZWxlY3RNYW5pYUVsLmZpbmQoJy5zZWxlY3QtbWFuaWEtc2VhcmNoLWlucHV0JykuZmlyc3QoKS52YWwoKTtcclxuXHRcdFx0XHRcdFx0Ly9wYXVzZSBhamF4IHNjcm9sbFxyXG5cdFx0XHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4UmVhZHknLCBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdC8vZW5yZWdpc3RyZSBub3V2ZWxsZSBwYWdlIGVuIGNvdXJzXHJcblx0XHRcdFx0XHRcdCRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhQYWdlJywgdGhpc1BhZ2UpO1xyXG5cdFx0XHRcdFx0XHQvL2xvYWRpbmcgaWNvblxyXG5cdFx0XHRcdFx0XHRFbmdpbmUuZHJvcGRvd25Mb2FkaW5nKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0XHRcdFx0Ly9jYWxsIGFqYXggZnVuY3Rpb25cclxuXHRcdFx0XHRcdFx0dmFyIHRoaXNBamF4RnVuY3Rpb24gPSAkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4RnVuY3Rpb24nKTtcclxuXHRcdFx0XHRcdFx0dmFyIHRoaXNBamF4RGF0YSA9ICRzZWxlY3RNYW5pYUVsLmRhdGEoJ3NlbGVjdE1hbmlhLWFqYXhEYXRhJyk7XHJcblx0XHRcdFx0XHRcdHRoaXNBamF4RnVuY3Rpb24odGhpc1NlYXJjaCwgdGhpc1BhZ2UsIHRoaXNBamF4RGF0YSwgZnVuY3Rpb24ob3B0SFRNTCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vcmVtb3ZlIGxvYWRpbmcgaWNvblxyXG5cdFx0XHRcdFx0XHRcdEVuZ2luZS5kcm9wZG93bkxvYWRpbmcoJHNlbGVjdE1hbmlhRWwsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdC8vaWYgb3B0aW9ucyByZXR1cm5lZFxyXG5cdFx0XHRcdFx0XHRcdGlmKG9wdEhUTUwudHJpbSgpICE9PSAnJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly9hZGQgaXRlbXMgdG8gZHJvcGRvd24gZnJvbSBzZW50IG9wdGlvbnNcclxuXHRcdFx0XHRcdFx0XHRcdEVuZ2luZS5hZGRJdGVtcygkc2VsZWN0TWFuaWFFbCwgb3B0SFRNTCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvL3JlYmluZCBzZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdFx0XHRcdFx0XHRCaW5kcy5iaW5kKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vc2V0IGFqYXggc2Nyb2xsIGFzIHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4UmVhZHknLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0Ly9pZiBubyBvcHRpb25zIHNlbnQgYmFja1xyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly9hamF4IHNjcm9sbCBpcyBvdmVyXHJcblx0XHRcdFx0XHRcdFx0XHQkc2VsZWN0TWFuaWFFbC5kYXRhKCdzZWxlY3RNYW5pYS1hamF4U2Nyb2xsRG9uZScsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBzY3JvbGxDb250cm9sXHJcblxyXG5cdFx0Ly9CSU5EIE9OTFkgLSBwcmV2ZW50cyBib2R5IHNjcm9sbCB3aGVuIHJlYWNoZWQgZHJvcGRvd24gdG9wIG9yIGJvdHRvbVxyXG5cdFx0c2Nyb2xsQ29udHJvbDogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgJHRoaXNEcm9wZG93biA9ICQodGhpcyk7XHJcblx0XHRcdGlmKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPCAwKSB7XHJcblx0XHRcdFx0cmV0dXJuICgkdGhpc0Ryb3Bkb3duLnNjcm9sbFRvcCgpID4gMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuKCR0aGlzRHJvcGRvd24uc2Nyb2xsVG9wKCkgKyAkdGhpc0Ryb3Bkb3duLmlubmVySGVpZ2h0KCkgPCAkdGhpc0Ryb3Bkb3duWzBdLnNjcm9sbEhlaWdodCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGZvY3VzIC8gYmx1clxyXG5cclxuXHRcdC8vQklORCBPTkxZIC0gZm9jdXMgc2VsZWN0TWFuaWEgd2hlbiBvcmlnaW5hbCBzZWxlY3QgaXMgZm9jdXNlZFxyXG5cdFx0Zm9jdXM6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0dmFyICRvcmlnaW5hbFNlbGVjdCA9ICQodGhpcyk7XHJcblx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHR2YXIgJHNlbGVjdE1hbmlhRWwgPSAkb3JpZ2luYWxTZWxlY3QuZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcpO1xyXG5cdFx0XHQvL2FkZCBmb2N1cyBjbGFzcyB0byBzZWxlY3RNYW5pYSBlbGVtZW50XHJcblx0XHRcdCRzZWxlY3RNYW5pYUVsLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtZm9jdXNlZCcpO1xyXG5cdFx0XHQvL2JpbmQga2V5Ym9hcmQgZHJvcGRvd24gb3BlbmluZ1xyXG5cdFx0XHQkb3JpZ2luYWxTZWxlY3Qub2ZmKCdrZXlkb3duLnNlbGVjdE1hbmlhJykub24oJ2tleWRvd24uc2VsZWN0TWFuaWEnLCBCaW5kcy5rZXlib2FyZE9wZW5pbmcpO1xyXG5cdFx0fSwgXHJcblxyXG5cdFx0Ly9CSU5EIE9OTFkgLSB1bmZvY3VzIHNlbGVjdE1hbmlhIHdoZW4gb3JpZ2luYWwgc2VsZWN0IGlzIGZvY3VzZWRcclxuXHRcdGJsdXI6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0dmFyICRvcmlnaW5hbFNlbGVjdCA9ICQodGhpcyk7XHJcblx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHR2YXIgJHNlbGVjdE1hbmlhRWwgPSAkb3JpZ2luYWxTZWxlY3QuZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcpO1xyXG5cdFx0XHQvL3JlbW92ZSBmb2N1cyBjbGFzcyBmcm9tIHNlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0JHNlbGVjdE1hbmlhRWwucmVtb3ZlQ2xhc3MoJ3NlbGVjdC1tYW5pYS1mb2N1c2VkJyk7XHJcblx0XHRcdC8vdW5iaW5kIGtleWJvYXJkIGRyb3Bkb3duIG9wZW5pbmdcclxuXHRcdFx0JG9yaWdpbmFsU2VsZWN0Lm9mZigna2V5ZG93bi5zZWxlY3RNYW5pYScpO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gaG92ZXJJdGVtXHJcblxyXG5cdFx0Ly9CSU5EIE9OTFkgLSBob3ZlciBzdGF0dXMgb24gZHJvcGRvd24gaXRlbXNcclxuXHRcdGhvdmVySXRlbTogZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgJGl0ZW0gPSAkKHRoaXMpO1xyXG5cdFx0XHQvL2Ryb3Bkb3duXHJcblx0XHRcdHZhciAkZHJvcGRvd24gPSAkaXRlbS5jbG9zZXN0KCcuc2VsZWN0LW1hbmlhLWRyb3Bkb3duJyk7XHJcblx0XHRcdC8vcmVtb3ZlIGhvdmVyIGZyb20gZXZlcnkgaXRlbVxyXG5cdFx0XHQkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdC1tYW5pYS1ob3ZlcicpO1xyXG5cdFx0XHQvL2FwcGx5IGhvdmVyIGNsYXNzXHJcblx0XHRcdCRpdGVtLmFkZENsYXNzKCdzZWxlY3QtbWFuaWEtaG92ZXInKTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGtleWJvYXJkT3BlbmluZyAvIGtleWJvYXJkQ29udHJvbFxyXG5cclxuXHRcdC8vQklORCBPTkxZIC0ga2V5Ym9hcmQgZHJvcGRvd24gb3BlbmluZ1xyXG5cdFx0a2V5Ym9hcmRPcGVuaW5nOiBmdW5jdGlvbihlKSB7XHJcblx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkKHRoaXMpO1xyXG5cdFx0XHQvL3NlbGVjdE1hbmlhIGVsZW1lbnRcclxuXHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJG9yaWdpbmFsU2VsZWN0LmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0Ly9kcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJHNlbGVjdE1hbmlhRWwuZGF0YSgnc2VsZWN0TWFuaWEtZHJvcGRvd24nKTtcclxuXHRcdFx0Ly9saXN0IG9mIGtleSBjb2RlcyB0cmlnZ2VyaW5nIG9wZW5pbmcgYmVzaWRlIGNoYXJhY3RlcnMgKGVudGVyLCBzcGFjZWJhciwgYXJyb3cga2V5cylcclxuXHRcdFx0dmFyIG9wZW5pbmdLZXlzID0gWzEzLDMyLDM3LDM4LDM5LDQwXTtcclxuXHRcdFx0Ly9pZiBkcm9wZG93biBpcyBjbG9zZWQgYW5kIHRyaWdnZXJpbmcga2V5IHByZXNzZWRcclxuXHRcdFx0aWYoISRkcm9wZG93bi5oYXNDbGFzcygnb3BlbicpICYmICQuaW5BcnJheShlLmtleUNvZGUsIG9wZW5pbmdLZXlzKSAhPT0gLTEpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHQvL3VuZm9jdXMgb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRcdFx0JG9yaWdpbmFsU2VsZWN0LmJsdXIoKTtcclxuXHRcdFx0XHQvL29wZW5zIGRyb3Bkb3duXHJcblx0XHRcdFx0RW5naW5lLm9wZW5Ecm9wZG93bigkZHJvcGRvd24pO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBcclxuXHJcblx0XHQvL0JJTkQgT05MWSAtIGtleWJvYXJkIGNvbnRyb2wgd2l0aGluIGRyb3Bkb3duXHJcblx0XHRrZXlib2FyZENvbnRyb2w6IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0Ly9jdXJyZW50bHkgb3BlbiBkcm9wZG93blxyXG5cdFx0XHR2YXIgJGRyb3Bkb3duID0gJCgnLnNlbGVjdC1tYW5pYS1kcm9wZG93bi5vcGVuJykuZmlyc3QoKTtcclxuXHRcdFx0Ly9saXN0IG9mIGNvbnRyb2wga2V5cyAodGFiLCBlbnRlciwgZXNjYXBlLCBhcnJvdyB1cCwgYXJyb3cgZG93bilcclxuXHRcdFx0dmFyIGNvbnRyb2xLZXlzID0gWzksMTMsMjcsMzgsNDBdO1xyXG5cdFx0XHQvL2lmIGEgc2VsZWN0TWFuaWEgZHJvcGRvd24gaXMgb3BlbiBhbmQga2V5IHByZXNzZWQgaXMgYSBjb250cm9sIGtleVxyXG5cdFx0XHRpZigkZHJvcGRvd24ubGVuZ3RoID4gMCAmJiAkLmluQXJyYXkoZS5rZXlDb2RlLCBjb250cm9sS2V5cykgIT09IC0xKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0Ly9zd2l0Y2gga2V5IHByZXNzZWRcclxuXHRcdFx0XHRzd2l0Y2goZS5rZXlDb2RlKSB7XHJcblx0XHRcdFx0XHQvL2VudGVyXHJcblx0XHRcdFx0XHRjYXNlIDEzOlxyXG5cdFx0XHRcdFx0XHQvL2N1cnJlbnRseSBob3ZlcmVkIGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0dmFyICRob3Zlckl0ZW0gPSAkZHJvcGRvd24uZmluZCgnLnNlbGVjdC1tYW5pYS1pdGVtOm5vdCguc2VsZWN0LW1hbmlhLWRpc2FibGVkKTpub3QoLnNlbGVjdC1tYW5pYS1oaWRkZW4pLnNlbGVjdC1tYW5pYS1ob3ZlcicpLmZpcnN0KCk7XHJcblx0XHRcdFx0XHRcdC8vaWYgaG92ZXJlZCBlbGVtZW50IGV4aXN0c1xyXG5cdFx0XHRcdFx0XHRpZigkaG92ZXJJdGVtLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHQvL3NlbGVjdCBpdGVtIGluIGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdFx0RW5naW5lLnNlbGVjdEl0ZW0oJGhvdmVySXRlbSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHQvL3RhYlxyXG5cdFx0XHRcdFx0Y2FzZSA5OlxyXG5cdFx0XHRcdFx0Ly9lc2NhcGVcclxuXHRcdFx0XHRcdGNhc2UgMjc6XHJcblx0XHRcdFx0XHRcdC8vY2xvc2UgZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0RW5naW5lLmNsb3NlRHJvcGRvd24oJGRyb3Bkb3duKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHQvL2Fycm93IHVwXHJcblx0XHRcdFx0XHRjYXNlIDM4OlxyXG5cdFx0XHRcdFx0XHQvL2hvdmVyIHByZXZpb3VzIGl0ZW0gaW4gZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0RW5naW5lLm5hdmlnYXRlSXRlbSgkZHJvcGRvd24sICdwcmV2aW91cycpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdC8vYXJyb3cgZG93blxyXG5cdFx0XHRcdFx0Y2FzZSA0MDpcclxuXHRcdFx0XHRcdFx0Ly9ob3ZlciBuZXh0IGl0ZW0gaW4gZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0RW5naW5lLm5hdmlnYXRlSXRlbSgkZHJvcGRvd24sICduZXh0Jyk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9O1xyXG5cclxuLy8gQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQCAvL1xyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFRPT0xTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXHJcbi8vIEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAgLy9cclxuXHJcblx0dmFyIFRvb2xzID0ge1xyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGRlZlxyXG5cclxuXHRcdC8vZm9yY2UgbnVsbCBpZiB2YXIgaXMgdW5kZWZpbmVkXHJcblx0XHRkZWY6IGZ1bmN0aW9uKHYpIHtcclxuXHRcdFx0aWYodHlwZW9mIHYgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHY7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBNRVRIT0RTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcblxyXG5cdHZhciBNZXRob2RzID0ge1xyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGluaXRcclxuXHJcblx0XHQvL2luaXRpYWxpemUgc2VsZWN0TWFuaWFcclxuXHRcdGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcclxuXHRcdFx0Ly9zZXR0aW5ncyBwcm92aWRlZCBieSB1c2VyXHJcblx0XHRcdHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBEYXRhLmRlZmF1bHRzLCBvcHRzKTtcclxuXHRcdFx0Ly9sb29wIHRocm91Z2ggdGFyZ2V0ZWQgZWxlbWVudHNcclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvL2N1cnJlbnQgc2VsZWN0IHRvIGluaXRpYWxpemVcclxuXHRcdFx0XHR2YXIgJG9yaWdpbmFsU2VsZWN0ID0gJCh0aGlzKTtcclxuXHRcdFx0XHQvL2NvbnRyb2xzIGlmIGVsZW1lbnQgaXMgYSBzZWxlY3QgYW5kIHBsdWdpbiBpcyBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxyXG5cdFx0XHRcdGlmKEVuZ2luZS5jb250cm9sVGFyZ2V0KCRvcmlnaW5hbFNlbGVjdCwgWydpc1NlbGVjdCcsJ25vdEluaXRpYWxpemVkJ10pKSB7XHJcblx0XHRcdFx0XHQvL2luaXRpYWxpemUgc2VsZWN0TWFuaWEgb24gb3JpZ2luYWwgc2VsZWN0XHJcblx0XHRcdFx0XHRFbmdpbmUuaW5pdGlhbGl6ZSgkb3JpZ2luYWxTZWxlY3QsIHNldHRpbmdzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gdXBkYXRlXHJcblxyXG5cdFx0Ly91cGRhdGUgc2VsZWN0TWFuaWEgaXRlbXMgYW5kIHZhbHVlc1xyXG5cdFx0dXBkYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly9sb29wIHRocm91Z2ggdGFyZ2V0ZWQgZWxlbWVudHNcclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvL2N1cnJlbnQgc2VsZWN0IHRvIGRlc3Ryb3lcclxuXHRcdFx0XHR2YXIgJG9yaWdpbmFsU2VsZWN0ID0gJCh0aGlzKTtcclxuXHRcdFx0XHQvL2NvbnRyb2xzIGlmIHNlbGVjdE1hbmlhIGluaXRpYWxpemVkXHJcblx0XHRcdFx0aWYoRW5naW5lLmNvbnRyb2xUYXJnZXQoJG9yaWdpbmFsU2VsZWN0LCBbJ2lzSW5pdGlhbGl6ZWQnXSkpIHtcclxuXHRcdFx0XHRcdC8vdXBkYXRlIHNlbGVjdE1hbmlhXHJcblx0XHRcdFx0XHRFbmdpbmUudXBkYXRlKCRvcmlnaW5hbFNlbGVjdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IGRlc3Ryb3lcclxuXHJcblx0XHQvL2Rlc3Ryb3kgc2VsZWN0TWFuaWFcclxuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvL2xvb3AgdGhyb3VnaCB0YXJnZXRlZCBlbGVtZW50c1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vY3VycmVudCBzZWxlY3QgdG8gZGVzdHJveVxyXG5cdFx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkKHRoaXMpO1xyXG5cdFx0XHRcdC8vY29udHJvbHMgaWYgc2VsZWN0TWFuaWEgaW5pdGlhbGl6ZWRcclxuXHRcdFx0XHRpZihFbmdpbmUuY29udHJvbFRhcmdldCgkb3JpZ2luYWxTZWxlY3QsIFsnaXNJbml0aWFsaXplZCddKSkge1xyXG5cdFx0XHRcdFx0Ly9kZXN0cm95IHNlbGVjdE1hbmlhXHJcblx0XHRcdFx0XHRFbmdpbmUuZGVzdHJveSgkb3JpZ2luYWxTZWxlY3QpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LCBcclxuXHJcbi8vIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBjaGVja1xyXG5cclxuXHRcdC8vY2hlY2sgaWYgc2VsZWN0TWFuaWEgaW5pdGlhbGl6ZWRcclxuXHRcdGNoZWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly9jb250cm9scyBtZXRob2Qgd2FzIGNhbGxlZCBvbiBzaW5nbGUgZWxlbWVudFxyXG5cdFx0XHRpZihFbmdpbmUuY29udHJvbFRhcmdldCh0aGlzLCBbJ2lzU2luZ2xlJ10pKSB7XHJcblx0XHRcdFx0Ly9zZW5kIGJhY2sgaWYgcGx1Z2luIGluaXRpYWxpemVkIG9yIG5vdFxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmhhc0NsYXNzKCdzZWxlY3QtbWFuaWEtb3JpZ2luYWwnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gZ2V0XHJcblxyXG5cdFx0Ly9yZXR1cm5zIHBhcnNlZCBzZWxlY3RlZCB2YWx1ZXNcclxuXHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vY29udHJvbHMgaWYgc2luZ2xlIGVsZW1lbnQgYW5kIHBsdWdpbiBpbml0aWFsaXplZFxyXG5cdFx0XHRpZihFbmdpbmUuY29udHJvbFRhcmdldCh0aGlzLCBbJ2lzU2luZ2xlJywnaXNJbml0aWFsaXplZCddKSkge1xyXG5cdFx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHRcdHZhciAkc2VsZWN0TWFuaWFFbCA9IHRoaXMuZGF0YSgnc2VsZWN0TWFuaWEtZWxlbWVudCcpO1xyXG5cdFx0XHRcdC8vZ2V0IGFuZCByZXR1cm4gcGFyc2VkIHNlbGVjdGVkIHZhbHVlc1xyXG5cdFx0XHRcdHJldHVybiBFbmdpbmUuZ2V0VmFsKCRzZWxlY3RNYW5pYUVsKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gc2V0XHJcblxyXG5cdFx0Ly9zZXQgcGFyc2VkIHZhbHVlcyBhcyBzZWxlY3RlZCB2YWx1ZXNcclxuXHRcdHNldDogZnVuY3Rpb24odmFsdWVzKSB7XHJcblx0XHRcdC8vY29udHJvbHMgaWYgc2luZ2xlIGVsZW1lbnQgYW5kIHBsdWdpbiBpbml0aWFsaXplZFxyXG5cdFx0XHRpZihFbmdpbmUuY29udHJvbFRhcmdldCh0aGlzLCBbJ2lzU2luZ2xlJywnaXNJbml0aWFsaXplZCddKSkge1xyXG5cdFx0XHRcdC8vY29udHJvbHMgdmFsdWVzIGFyZSB2YWxpZFxyXG5cdFx0XHRcdGlmKEVuZ2luZS5jb250cm9sVmFsdWVzKHRoaXMsIHZhbHVlcykpIHtcclxuXHRcdFx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gdGhpcy5kYXRhKCdzZWxlY3RNYW5pYS1lbGVtZW50Jyk7XHJcblx0XHRcdFx0XHQvL2dldCBhbmQgcmV0dXJuIHBhcnNlZCBzZWxlY3RlZCB2YWx1ZXNcclxuXHRcdFx0XHRcdEVuZ2luZS5zZXRWYWwoJHNlbGVjdE1hbmlhRWwsIHZhbHVlcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHRcdFx0XHRcdFxyXG5cdFx0fSwgXHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gY2xlYXJcclxuXHJcblx0XHQvL2NsZWFyIHZhbHVlc1xyXG5cdFx0Y2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvL2xvb3AgdGhyb3VnaCB0YXJnZXRlZCBlbGVtZW50c1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vY3VycmVudCBzZWxlY3QgdG8gZGVzdHJveVxyXG5cdFx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkKHRoaXMpO1xyXG5cdFx0XHRcdC8vY29udHJvbHMgaWYgcGx1Z2luIGluaXRpYWxpemVkXHJcblx0XHRcdFx0aWYoRW5naW5lLmNvbnRyb2xUYXJnZXQoJG9yaWdpbmFsU2VsZWN0LCBbJ2lzSW5pdGlhbGl6ZWQnXSkpIHtcclxuXHRcdFx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJG9yaWdpbmFsU2VsZWN0LmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0XHRcdC8vY2xlYXIgdmFsdWVzXHJcblx0XHRcdFx0XHRFbmdpbmUuY2xlYXIoJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0XHRcdFx0Ly90cmlnZ2VyIG9yaWdpbmFsIHNlbGVjdCBjaGFuZ2UgZXZlbnRcclxuXHRcdFx0XHRcdCRvcmlnaW5hbFNlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdFx0XHRcdC8vdXBkYXRlIGNsZWFyIHZhbHVlcyBpY29uIGRpc3BsYXlcclxuXHRcdFx0XHRcdEVuZ2luZS51cGRhdGVDbGVhbigkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sIFxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IHNldHVwXHJcblxyXG5cdFx0Ly9zZXR1cCBkZWZhdWx0IHNldHRpbmdzIHZhbHVlc1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvL2xvb3AgdGhyb3VnaCB0YXJnZXRlZCBlbGVtZW50c1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vY3VycmVudCBzZWxlY3QgdG8gZGVzdHJveVxyXG5cdFx0XHRcdHZhciAkb3JpZ2luYWxTZWxlY3QgPSAkKHRoaXMpO1xyXG5cdFx0XHRcdC8vY29udHJvbHMgaWYgcGx1Z2luIGluaXRpYWxpemVkXHJcblx0XHRcdFx0aWYoRW5naW5lLmNvbnRyb2xUYXJnZXQoJG9yaWdpbmFsU2VsZWN0LCBbJ2lzSW5pdGlhbGl6ZWQnXSkpIHtcclxuXHRcdFx0XHRcdC8vc2VsZWN0TWFuaWEgZWxlbWVudFxyXG5cdFx0XHRcdFx0dmFyICRzZWxlY3RNYW5pYUVsID0gJG9yaWdpbmFsU2VsZWN0LmRhdGEoJ3NlbGVjdE1hbmlhLWVsZW1lbnQnKTtcclxuXHRcdFx0XHRcdC8vY2xlYXIgdmFsdWVzXHJcblx0XHRcdFx0XHRFbmdpbmUuY2xlYXIoJHNlbGVjdE1hbmlhRWwpO1xyXG5cdFx0XHRcdFx0Ly90cmlnZ2VyIG9yaWdpbmFsIHNlbGVjdCBjaGFuZ2UgZXZlbnRcclxuXHRcdFx0XHRcdCRvcmlnaW5hbFNlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHRcdFx0XHRcdC8vdXBkYXRlIGNsZWFyIHZhbHVlcyBpY29uIGRpc3BsYXlcclxuXHRcdFx0XHRcdEVuZ2luZS51cGRhdGVDbGVhbigkc2VsZWN0TWFuaWFFbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcbi8vIEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAgLy9cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhBTkRMRVIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xyXG4vLyBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAIC8vXHJcblxyXG5cdC8vcGx1Z2luIG1ldGhvZHMgaGFuZGxlclxyXG5cdCQuZm4uc2VsZWN0TWFuaWEgPSBmdW5jdGlvbihtZXRob2RPck9wdHMpIHtcclxuXHRcdC8vc3RvcCByaWdodCBhd2F5IGlmIHRhcmdldGVkIGVsZW1lbnQgZW1wdHlcclxuXHRcdGlmKHRoaXMubGVuZ3RoIDwgMSkgeyByZXR1cm47IH1cclxuXHRcdC8vY2FsbCBtZXRob2RcclxuXHRcdGlmKE1ldGhvZHNbbWV0aG9kT3JPcHRzXSkge1xyXG5cdFx0XHQvL3JlbW92ZSBtZXRob2QgbmFtZSBmcm9tIGNhbGwgYXJndW1lbnRzXHJcblx0XHRcdHZhciBzbGljZWRBcmd1bWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cdFx0XHQvL2NhbGwgdGFyZ2V0ZWQgbWF0aG9kIHdpdGggYXJndW1lbnRzXHJcblx0XHRcdHJldHVybiBNZXRob2RzW21ldGhvZE9yT3B0c10uYXBwbHkodGhpcywgc2xpY2VkQXJndW1lbnRzKTtcclxuXHRcdH1cclxuXHRcdC8vY2FsbCBpbml0XHJcblx0XHRlbHNlIGlmKHR5cGVvZiBtZXRob2RPck9wdHMgPT09ICdvYmplY3QnIHx8ICFtZXRob2RPck9wdHMpIHtcclxuXHRcdFx0Ly9jYWxsIGluaXQgd2l0aCBhcmd1bWVudHNcclxuXHRcdFx0cmV0dXJuIE1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0fVxyXG5cdFx0Ly9lcnJvclxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ3NlbGVjdE1hbmlhIHwgd3JvbmcgbWV0aG9kIGNhbGxlZCcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvL3BsdWdpbiBzZXR1cCBoYW5kbGVyXHJcblx0JC5leHRlbmQoe1xyXG5cdFx0c2VsZWN0TWFuaWFTZXR1cDogZnVuY3Rpb24ob3B0cykge1xyXG5cdFx0XHQvL3NldCBkZWZhdWx0IHNldHRpbmdzIHZhbHVlc1xyXG5cdFx0XHREYXRhLnNldHVwKG9wdHMpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcblxyXG5cclxuXHJcbihmdW5jdGlvbihhKXthLmZuLmNpcmNsaWZ1bD1mdW5jdGlvbihiLGQpe3ZhciBjPWEuZXh0ZW5kKHtmZ2NvbG9yOlwiIzU1NmIyZlwiLGJnY29sb3I6XCIjZWVlXCIsZmlsbDpmYWxzZSx3aWR0aDoxNSxkaW1lbnNpb246MjAwLGZvbnRzaXplOjE1LHBlcmNlbnQ6NTAsYW5pbWF0aW9uc3RlcDoxLGljb25zaXplOlwiMjBweFwiLGljb25jb2xvcjpcIiM5OTlcIixib3JkZXI6XCJkZWZhdWx0XCIsY29tcGxldGU6bnVsbH0sYik7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB3PVtcImZnY29sb3JcIixcImJnY29sb3JcIixcImZpbGxcIixcIndpZHRoXCIsXCJkaW1lbnNpb25cIixcImZvbnRzaXplXCIsXCJhbmltYXRpb25zdGVwXCIsXCJlbmRQZXJjZW50XCIsXCJpY29uXCIsXCJpY29uY29sb3JcIixcImljb25zaXplXCIsXCJib3JkZXJcIl07dmFyIGY9e307dmFyIEY9XCJcIjt2YXIgbj0wO3ZhciB0PWEodGhpcyk7dmFyIEE9ZmFsc2U7dmFyIHYsRzt0LmFkZENsYXNzKFwiY2lyY2xpZnVsXCIpO2UodCk7aWYodC5kYXRhKFwidGV4dFwiKSE9dW5kZWZpbmVkKXt2PXQuZGF0YShcInRleHRcIik7aWYodC5kYXRhKFwiaWNvblwiKSE9dW5kZWZpbmVkKXtGPWEoXCI8aT48L2k+XCIpLmFkZENsYXNzKFwiZmEgXCIrYSh0aGlzKS5kYXRhKFwiaWNvblwiKSkuY3NzKHtjb2xvcjpmLmljb25jb2xvcixcImZvbnQtc2l6ZVwiOmYuaWNvbnNpemV9KX1pZih0LmRhdGEoXCJ0eXBlXCIpIT11bmRlZmluZWQpe2o9YSh0aGlzKS5kYXRhKFwidHlwZVwiKTtpZihqPT1cImhhbGZcIil7cyh0LFwiY2lyY2xlLXRleHQtaGFsZlwiLChmLmRpbWVuc2lvbi8xLjQ1KSl9ZWxzZXtzKHQsXCJjaXJjbGUtdGV4dFwiLGYuZGltZW5zaW9uKX19ZWxzZXtzKHQsXCJjaXJjbGUtdGV4dFwiLGYuZGltZW5zaW9uKX19aWYoYSh0aGlzKS5kYXRhKFwidG90YWxcIikhPXVuZGVmaW5lZCYmYSh0aGlzKS5kYXRhKFwicGFydFwiKSE9dW5kZWZpbmVkKXt2YXIgST1hKHRoaXMpLmRhdGEoXCJ0b3RhbFwiKS8xMDA7cGVyY2VudD0oKGEodGhpcykuZGF0YShcInBhcnRcIikvSSkvMTAwKS50b0ZpeGVkKDMpO249KGEodGhpcykuZGF0YShcInBhcnRcIikvSSkudG9GaXhlZCgzKX1lbHNle2lmKGEodGhpcykuZGF0YShcInBlcmNlbnRcIikhPXVuZGVmaW5lZCl7cGVyY2VudD1hKHRoaXMpLmRhdGEoXCJwZXJjZW50XCIpLzEwMDtuPWEodGhpcykuZGF0YShcInBlcmNlbnRcIil9ZWxzZXtwZXJjZW50PWMucGVyY2VudC8xMDB9fWlmKGEodGhpcykuZGF0YShcImluZm9cIikhPXVuZGVmaW5lZCl7Rz1hKHRoaXMpLmRhdGEoXCJpbmZvXCIpO2lmKGEodGhpcykuZGF0YShcInR5cGVcIikhPXVuZGVmaW5lZCl7aj1hKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO2lmKGo9PVwiaGFsZlwiKXtEKHQsMC45KX1lbHNle0QodCwxLjI1KX19ZWxzZXtEKHQsMS4yNSl9fWEodGhpcykud2lkdGgoZi5kaW1lbnNpb24rXCJweFwiKTt2YXIgaT1hKFwiPGNhbnZhcz48L2NhbnZhcz5cIikuYXR0cih7d2lkdGg6Zi5kaW1lbnNpb24saGVpZ2h0OmYuZGltZW5zaW9ufSkuYXBwZW5kVG8oYSh0aGlzKSkuZ2V0KDApO3ZhciBnPWkuZ2V0Q29udGV4dChcIjJkXCIpO3ZhciByPWkud2lkdGgvMjt2YXIgcT1pLmhlaWdodC8yO3ZhciBDPWYucGVyY2VudCozNjA7dmFyIEg9QyooTWF0aC5QSS8xODApO3ZhciBsPWkud2lkdGgvMi41O3ZhciBCPTIuMypNYXRoLlBJO3ZhciB6PTA7dmFyIEU9ZmFsc2U7dmFyIG89Zi5hbmltYXRpb25zdGVwPT09MD9uOjA7dmFyIHA9TWF0aC5tYXgoZi5hbmltYXRpb25zdGVwLDApO3ZhciB1PU1hdGguUEkqMjt2YXIgaD1NYXRoLlBJLzI7dmFyIGo9XCJcIjt2YXIgaz10cnVlO2lmKGEodGhpcykuZGF0YShcInR5cGVcIikhPXVuZGVmaW5lZCl7aj1hKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO2lmKGo9PVwiaGFsZlwiKXtCPTIqTWF0aC5QSTt6PTMuMTM7dT1NYXRoLlBJKjE7aD1NYXRoLlBJLzAuOTk2fX1mdW5jdGlvbiBzKEoseCx5KXthKFwiPHNwYW4+PC9zcGFuPlwiKS5hcHBlbmRUbyhKKS5hZGRDbGFzcyh4KS50ZXh0KHYpLnByZXBlbmQoRikuY3NzKHtcImxpbmUtaGVpZ2h0XCI6eStcInB4XCIsXCJmb250LXNpemVcIjpmLmZvbnRzaXplK1wicHhcIn0pfWZ1bmN0aW9uIEQoeSx4KXthKFwiPHNwYW4+PC9zcGFuPlwiKS5hcHBlbmRUbyh5KS5hZGRDbGFzcyhcImNpcmNsZS1pbmZvLWhhbGZcIikuY3NzKFwibGluZS1oZWlnaHRcIiwoZi5kaW1lbnNpb24qeCkrXCJweFwiKX1mdW5jdGlvbiBlKHgpe2EuZWFjaCh3LGZ1bmN0aW9uKHksSil7aWYoeC5kYXRhKEopIT11bmRlZmluZWQpe2ZbSl09eC5kYXRhKEopfWVsc2V7ZltKXT1hKGMpLmF0dHIoSil9aWYoSj09XCJmaWxsXCImJnguZGF0YShcImZpbGxcIikhPXVuZGVmaW5lZCl7QT10cnVlfX0pfWZ1bmN0aW9uIG0oeCl7Zy5jbGVhclJlY3QoMCwwLGkud2lkdGgsaS5oZWlnaHQpO2cuYmVnaW5QYXRoKCk7Zy5hcmMocixxLGwseixCLGZhbHNlKTtnLmxpbmVXaWR0aD1mLndpZHRoKzE7Zy5zdHJva2VTdHlsZT1mLmJnY29sb3I7Zy5zdHJva2UoKTtpZihBKXtnLmZpbGxTdHlsZT1mLmZpbGw7Zy5maWxsKCl9Zy5iZWdpblBhdGgoKTtnLmFyYyhyLHEsbCwtKGgpLCgodSkqeCktaCxmYWxzZSk7aWYoZi5ib3JkZXI9PVwib3V0bGluZVwiKXtnLmxpbmVXaWR0aD1mLndpZHRoKzEzfWVsc2V7aWYoZi5ib3JkZXI9PVwiaW5saW5lXCIpe2cubGluZVdpZHRoPWYud2lkdGgtMTN9fWcuc3Ryb2tlU3R5bGU9Zi5mZ2NvbG9yO2cuc3Ryb2tlKCk7aWYobzxuKXtvKz1wO3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe20oTWF0aC5taW4obyxuKS8xMDApfSx0KX1pZihvPT1uJiZrJiZ0eXBlb2YoYikhPVwidW5kZWZpbmVkXCIpe2lmKGEuaXNGdW5jdGlvbihiLmNvbXBsZXRlKSl7Yi5jb21wbGV0ZSgpO2s9ZmFsc2V9fX1tKG8vMTAwKX0pfX0oalF1ZXJ5KSk7XHJcblxyXG5cclxuXHJcbiFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7aWYodGhpcy5jcmVhdGVUZXh0UmFuZ2Upe3ZhciBhPXRoaXMuY3JlYXRlVGV4dFJhbmdlKCk7YS5jb2xsYXBzZSghMCksYS5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIixlKSxhLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIix0LWUpLGEuc2VsZWN0KCl9ZWxzZSB0aGlzLnNldFNlbGVjdGlvblJhbmdlJiYodGhpcy5mb2N1cygpLHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoZSx0KSl9ZnVuY3Rpb24gYShlKXt2YXIgdD10aGlzLnZhbHVlLmxlbmd0aDtpZihlPVwic3RhcnRcIj09ZS50b0xvd2VyQ2FzZSgpP1wiU3RhcnRcIjpcIkVuZFwiLGRvY3VtZW50LnNlbGVjdGlvbil7dmFyIGEsaSxuLGw9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7cmV0dXJuIGE9bC5kdXBsaWNhdGUoKSxhLmV4cGFuZChcInRleHRlZGl0XCIpLGEuc2V0RW5kUG9pbnQoXCJFbmRUb0VuZFwiLGwpLGk9YS50ZXh0Lmxlbmd0aC1sLnRleHQubGVuZ3RoLG49aStsLnRleHQubGVuZ3RoLFwiU3RhcnRcIj09ZT9pOm59cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXNbXCJzZWxlY3Rpb25cIitlXSYmKHQ9dGhpc1tcInNlbGVjdGlvblwiK2VdKSx0fXZhciBpPXtjb2Rlczp7NDY6MTI3LDE4ODo0NCwxMDk6NDUsMTkwOjQ2LDE5MTo0NywxOTI6OTYsMjIwOjkyLDIyMjozOSwyMjE6OTMsMjE5OjkxLDE3Mzo0NSwxODc6NjEsMTg2OjU5LDE4OTo0NSwxMTA6NDZ9LHNoaWZ0czp7OTY6XCJ+XCIsNDk6XCIhXCIsNTA6XCJAXCIsNTE6XCIjXCIsNTI6XCIkXCIsNTM6XCIlXCIsNTQ6XCJeXCIsNTU6XCImXCIsNTY6XCIqXCIsNTc6XCIoXCIsNDg6XCIpXCIsNDU6XCJfXCIsNjE6XCIrXCIsOTE6XCJ7XCIsOTM6XCJ9XCIsOTI6XCJ8XCIsNTk6XCI6XCIsMzk6J1wiJyw0NDpcIjxcIiw0NjpcIj5cIiw0NzpcIj9cIn19O2UuZm4ubnVtYmVyPWZ1bmN0aW9uKG4sbCxzLHIpe3I9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHI/XCIsXCI6cixzPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBzP1wiLlwiOnMsbD1cInVuZGVmaW5lZFwiPT10eXBlb2YgbD8wOmw7dmFyIHU9XCJcXFxcdVwiKyhcIjAwMDBcIitzLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCksaD1uZXcgUmVnRXhwKFwiW15cIit1K1wiMC05XVwiLFwiZ1wiKSxvPW5ldyBSZWdFeHAodSxcImdcIik7cmV0dXJuIG49PT0hMD90aGlzLmlzKFwiaW5wdXQ6dGV4dFwiKT90aGlzLm9uKHtcImtleWRvd24uZm9ybWF0XCI6ZnVuY3Rpb24obil7dmFyIHU9ZSh0aGlzKSxoPXUuZGF0YShcIm51bUZvcm1hdFwiKSxvPW4ua2V5Q29kZT9uLmtleUNvZGU6bi53aGljaCxjPVwiXCIsdj1hLmFwcGx5KHRoaXMsW1wic3RhcnRcIl0pLGQ9YS5hcHBseSh0aGlzLFtcImVuZFwiXSkscD1cIlwiLGY9ITE7aWYoaS5jb2Rlcy5oYXNPd25Qcm9wZXJ0eShvKSYmKG89aS5jb2Rlc1tvXSksIW4uc2hpZnRLZXkmJm8+PTY1JiY5MD49bz9vKz0zMjohbi5zaGlmdEtleSYmbz49NjkmJjEwNT49bz9vLT00ODpuLnNoaWZ0S2V5JiZpLnNoaWZ0cy5oYXNPd25Qcm9wZXJ0eShvKSYmKGM9aS5zaGlmdHNbb10pLFwiXCI9PWMmJihjPVN0cmluZy5mcm9tQ2hhckNvZGUobykpLDghPW8mJjQ1IT1vJiYxMjchPW8mJmMhPXMmJiFjLm1hdGNoKC9bMC05XS8pKXt2YXIgZz1uLmtleUNvZGU/bi5rZXlDb2RlOm4ud2hpY2g7aWYoNDY9PWd8fDg9PWd8fDEyNz09Z3x8OT09Z3x8Mjc9PWd8fDEzPT1nfHwoNjU9PWd8fDgyPT1nfHw4MD09Z3x8ODM9PWd8fDcwPT1nfHw3Mj09Z3x8NjY9PWd8fDc0PT1nfHw4ND09Z3x8OTA9PWd8fDYxPT1nfHwxNzM9PWd8fDQ4PT1nKSYmKG4uY3RybEtleXx8bi5tZXRhS2V5KT09PSEwfHwoODY9PWd8fDY3PT1nfHw4OD09ZykmJihuLmN0cmxLZXl8fG4ubWV0YUtleSk9PT0hMHx8Zz49MzUmJjM5Pj1nfHxnPj0xMTImJjEyMz49ZylyZXR1cm47cmV0dXJuIG4ucHJldmVudERlZmF1bHQoKSwhMX1pZigwPT12JiZkPT10aGlzLnZhbHVlLmxlbmd0aD84PT1vPyh2PWQ9MSx0aGlzLnZhbHVlPVwiXCIsaC5pbml0PWw+MD8tMTowLGguYz1sPjA/LShsKzEpOjAsdC5hcHBseSh0aGlzLFswLDBdKSk6Yz09cz8odj1kPTEsdGhpcy52YWx1ZT1cIjBcIitzK25ldyBBcnJheShsKzEpLmpvaW4oXCIwXCIpLGguaW5pdD1sPjA/MTowLGguYz1sPjA/LShsKzEpOjApOjQ1PT1vPyh2PWQ9Mix0aGlzLnZhbHVlPVwiLTBcIitzK25ldyBBcnJheShsKzEpLmpvaW4oXCIwXCIpLGguaW5pdD1sPjA/MTowLGguYz1sPjA/LShsKzEpOjAsdC5hcHBseSh0aGlzLFsyLDJdKSk6KGguaW5pdD1sPjA/LTE6MCxoLmM9bD4wPy1sOjApOmguYz1kLXRoaXMudmFsdWUubGVuZ3RoLGguaXNQYXJ0aWFsU2VsZWN0aW9uPXY9PWQ/ITE6ITAsbD4wJiZjPT1zJiZ2PT10aGlzLnZhbHVlLmxlbmd0aC1sLTEpaC5jKyssaC5pbml0PU1hdGgubWF4KDAsaC5pbml0KSxuLnByZXZlbnREZWZhdWx0KCksZj10aGlzLnZhbHVlLmxlbmd0aCtoLmM7ZWxzZSBpZig0NSE9b3x8MD09diYmMCE9dGhpcy52YWx1ZS5pbmRleE9mKFwiLVwiKSlpZihjPT1zKWguaW5pdD1NYXRoLm1heCgwLGguaW5pdCksbi5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYobD4wJiYxMjc9PW8mJnY9PXRoaXMudmFsdWUubGVuZ3RoLWwtMSluLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihsPjAmJjg9PW8mJnY9PXRoaXMudmFsdWUubGVuZ3RoLWwpbi5wcmV2ZW50RGVmYXVsdCgpLGguYy0tLGY9dGhpcy52YWx1ZS5sZW5ndGgraC5jO2Vsc2UgaWYobD4wJiYxMjc9PW8mJnY+dGhpcy52YWx1ZS5sZW5ndGgtbC0xKXtpZihcIlwiPT09dGhpcy52YWx1ZSlyZXR1cm47XCIwXCIhPXRoaXMudmFsdWUuc2xpY2Uodix2KzEpJiYocD10aGlzLnZhbHVlLnNsaWNlKDAsdikrXCIwXCIrdGhpcy52YWx1ZS5zbGljZSh2KzEpLHUudmFsKHApKSxuLnByZXZlbnREZWZhdWx0KCksZj10aGlzLnZhbHVlLmxlbmd0aCtoLmN9ZWxzZSBpZihsPjAmJjg9PW8mJnY+dGhpcy52YWx1ZS5sZW5ndGgtbCl7aWYoXCJcIj09PXRoaXMudmFsdWUpcmV0dXJuO1wiMFwiIT10aGlzLnZhbHVlLnNsaWNlKHYtMSx2KSYmKHA9dGhpcy52YWx1ZS5zbGljZSgwLHYtMSkrXCIwXCIrdGhpcy52YWx1ZS5zbGljZSh2KSx1LnZhbChwKSksbi5wcmV2ZW50RGVmYXVsdCgpLGguYy0tLGY9dGhpcy52YWx1ZS5sZW5ndGgraC5jfWVsc2UgMTI3PT1vJiZ0aGlzLnZhbHVlLnNsaWNlKHYsdisxKT09cj9uLnByZXZlbnREZWZhdWx0KCk6OD09byYmdGhpcy52YWx1ZS5zbGljZSh2LTEsdik9PXI/KG4ucHJldmVudERlZmF1bHQoKSxoLmMtLSxmPXRoaXMudmFsdWUubGVuZ3RoK2guYyk6bD4wJiZ2PT1kJiZ0aGlzLnZhbHVlLmxlbmd0aD5sKzEmJnY+dGhpcy52YWx1ZS5sZW5ndGgtbC0xJiZpc0Zpbml0ZSgrYykmJiFuLm1ldGFLZXkmJiFuLmN0cmxLZXkmJiFuLmFsdEtleSYmMT09PWMubGVuZ3RoJiYocD1kPT09dGhpcy52YWx1ZS5sZW5ndGg/dGhpcy52YWx1ZS5zbGljZSgwLHYtMSk6dGhpcy52YWx1ZS5zbGljZSgwLHYpK3RoaXMudmFsdWUuc2xpY2UodisxKSx0aGlzLnZhbHVlPXAsZj12KTtlbHNlIG4ucHJldmVudERlZmF1bHQoKTtmIT09ITEmJnQuYXBwbHkodGhpcyxbZixmXSksdS5kYXRhKFwibnVtRm9ybWF0XCIsaCl9LFwia2V5dXAuZm9ybWF0XCI6ZnVuY3Rpb24oaSl7dmFyIG4scz1lKHRoaXMpLHI9cy5kYXRhKFwibnVtRm9ybWF0XCIpLHU9aS5rZXlDb2RlP2kua2V5Q29kZTppLndoaWNoLGg9YS5hcHBseSh0aGlzLFtcInN0YXJ0XCJdKSxvPWEuYXBwbHkodGhpcyxbXCJlbmRcIl0pOzAhPT1ofHwwIT09b3x8MTg5IT09dSYmMTA5IT09dXx8KHMudmFsKFwiLVwiK3MudmFsKCkpLGg9MSxyLmM9MS10aGlzLnZhbHVlLmxlbmd0aCxyLmluaXQ9MSxzLmRhdGEoXCJudW1Gb3JtYXRcIixyKSxuPXRoaXMudmFsdWUubGVuZ3RoK3IuYyx0LmFwcGx5KHRoaXMsW24sbl0pKSxcIlwiPT09dGhpcy52YWx1ZXx8KDQ4PnV8fHU+NTcpJiYoOTY+dXx8dT4xMDUpJiY4IT09dSYmNDYhPT11JiYxMTAhPT11fHwocy52YWwocy52YWwoKSksbD4wJiYoci5pbml0PDE/KGg9dGhpcy52YWx1ZS5sZW5ndGgtbC0oci5pbml0PDA/MTowKSxyLmM9aC10aGlzLnZhbHVlLmxlbmd0aCxyLmluaXQ9MSxzLmRhdGEoXCJudW1Gb3JtYXRcIixyKSk6aD50aGlzLnZhbHVlLmxlbmd0aC1sJiY4IT11JiYoci5jKysscy5kYXRhKFwibnVtRm9ybWF0XCIscikpKSw0NiE9dXx8ci5pc1BhcnRpYWxTZWxlY3Rpb258fChyLmMrKyxzLmRhdGEoXCJudW1Gb3JtYXRcIixyKSksbj10aGlzLnZhbHVlLmxlbmd0aCtyLmMsdC5hcHBseSh0aGlzLFtuLG5dKSl9LFwicGFzdGUuZm9ybWF0XCI6ZnVuY3Rpb24odCl7dmFyIGE9ZSh0aGlzKSxpPXQub3JpZ2luYWxFdmVudCxuPW51bGw7cmV0dXJuIHdpbmRvdy5jbGlwYm9hcmREYXRhJiZ3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhP249d2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIik6aS5jbGlwYm9hcmREYXRhJiZpLmNsaXBib2FyZERhdGEuZ2V0RGF0YSYmKG49aS5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKSxhLnZhbChuKSx0LnByZXZlbnREZWZhdWx0KCksITF9fSkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcIm51bUZvcm1hdFwiLHtjOi0obCsxKSxkZWNpbWFsczpsLHRob3VzYW5kc19zZXA6cixkZWNfcG9pbnQ6cyxyZWdleF9kZWNfbnVtOmgscmVnZXhfZGVjOm8saW5pdDp0aGlzLnZhbHVlLmluZGV4T2YoXCIuXCIpPyEwOiExfSk7XCJcIiE9PXRoaXMudmFsdWUmJnQudmFsKHQudmFsKCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxhPSt0LnRleHQoKS5yZXBsYWNlKGgsXCJcIikucmVwbGFjZShvLFwiLlwiKTt0Lm51bWJlcihpc0Zpbml0ZShhKT8rYTowLGwscyxyKX0pOnRoaXMudGV4dChlLm51bWJlci5hcHBseSh3aW5kb3csYXJndW1lbnRzKSl9O3ZhciBuPW51bGwsbD1udWxsO2UuaXNQbGFpbk9iamVjdChlLnZhbEhvb2tzLnRleHQpPyhlLmlzRnVuY3Rpb24oZS52YWxIb29rcy50ZXh0LmdldCkmJihuPWUudmFsSG9va3MudGV4dC5nZXQpLGUuaXNGdW5jdGlvbihlLnZhbEhvb2tzLnRleHQuc2V0KSYmKGw9ZS52YWxIb29rcy50ZXh0LnNldCkpOmUudmFsSG9va3MudGV4dD17fSxlLnZhbEhvb2tzLnRleHQuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBhLGk9ZSh0KSxsPWkuZGF0YShcIm51bUZvcm1hdFwiKTtyZXR1cm4gbD9cIlwiPT09dC52YWx1ZT9cIlwiOihhPSt0LnZhbHVlLnJlcGxhY2UobC5yZWdleF9kZWNfbnVtLFwiXCIpLnJlcGxhY2UobC5yZWdleF9kZWMsXCIuXCIpLCgwPT09dC52YWx1ZS5pbmRleE9mKFwiLVwiKT9cIi1cIjpcIlwiKSsoaXNGaW5pdGUoYSk/YTowKSk6ZS5pc0Z1bmN0aW9uKG4pP24odCk6dm9pZCAwfSxlLnZhbEhvb2tzLnRleHQuc2V0PWZ1bmN0aW9uKHQsYSl7dmFyIGk9ZSh0KSxuPWkuZGF0YShcIm51bUZvcm1hdFwiKTtpZihuKXt2YXIgcz1lLm51bWJlcihhLG4uZGVjaW1hbHMsbi5kZWNfcG9pbnQsbi50aG91c2FuZHNfc2VwKTtyZXR1cm4gZS5pc0Z1bmN0aW9uKGwpP2wodCxzKTp0LnZhbHVlPXN9cmV0dXJuIGUuaXNGdW5jdGlvbihsKT9sKHQsYSk6dm9pZCAwfSxlLm51bWJlcj1mdW5jdGlvbihlLHQsYSxpKXtpPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBpP1wiMTAwMFwiIT09bmV3IE51bWJlcigxZTMpLnRvTG9jYWxlU3RyaW5nKCk/bmV3IE51bWJlcigxZTMpLnRvTG9jYWxlU3RyaW5nKCkuY2hhckF0KDEpOlwiXCI6aSxhPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBhP25ldyBOdW1iZXIoLjEpLnRvTG9jYWxlU3RyaW5nKCkuY2hhckF0KDEpOmEsdD1pc0Zpbml0ZSgrdCk/TWF0aC5hYnModCk6MDt2YXIgbj1cIlxcXFx1XCIrKFwiMDAwMFwiK2EuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KSxsPVwiXFxcXHVcIisoXCIwMDAwXCIraS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO2U9KGUrXCJcIikucmVwbGFjZShcIi5cIixhKS5yZXBsYWNlKG5ldyBSZWdFeHAobCxcImdcIiksXCJcIikucmVwbGFjZShuZXcgUmVnRXhwKG4sXCJnXCIpLFwiLlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJbXjAtOSstRWUuXVwiLFwiZ1wiKSxcIlwiKTt2YXIgcz1pc0Zpbml0ZSgrZSk/K2U6MCxyPVwiXCIsdT1mdW5jdGlvbihlLHQpe3JldHVyblwiXCIrICsoTWF0aC5yb3VuZCgoXCJcIitlKS5pbmRleE9mKFwiZVwiKT4wP2U6ZStcImUrXCIrdCkrXCJlLVwiK3QpfTtyZXR1cm4gcj0odD91KHMsdCk6XCJcIitNYXRoLnJvdW5kKHMpKS5zcGxpdChcIi5cIiksclswXS5sZW5ndGg+MyYmKHJbMF09clswXS5yZXBsYWNlKC9cXEIoPz0oPzpcXGR7M30pKyg/IVxcZCkpL2csaSkpLChyWzFdfHxcIlwiKS5sZW5ndGg8dCYmKHJbMV09clsxXXx8XCJcIixyWzFdKz1uZXcgQXJyYXkodC1yWzFdLmxlbmd0aCsxKS5qb2luKFwiMFwiKSksci5qb2luKGEpfX0oalF1ZXJ5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm51bWJlci5taW4uanMubWFwIiwiLy/QuNC30LzQtdC90LXQvdC40Y8g0LIgaW5kZXguanNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8v0YTRg9C90LrRhtC40Y8gdXBkYXRlX2Jsb2NrINC40LfQvNC10L3QuNC70LDRgdGMXHJcblxyXG5cclxuXHJcblxyXG52YXIgZGF0ZV9ncmFmID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0XHJcblx0aWYoJCgnI2RhdGVfaGlkZGVuX3RhYmxlX2dyMScpLnZhbCgpPiQoJyNkYXRlX2hpZGRlbl90YWJsZV9ncjInKS52YWwoKSlcclxuXHRcdHtcclxuXHRcdFx0XHJcblx0XHRcdCQoJyNkYXRlX2hpZGRlbl90YWJsZV9ncjInKS52YWwoJycpO1xyXG5cdFx0XHQkKCcjZGF0ZV90YWJsZV9ncjInKS52YWwoJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0XHJcblx0XHJcbn1cclxuXHJcblxyXG4vL9GA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINGA0LDQsdC+0YLRgyDQsiDRgNCw0LfQtNC10LvQtSDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG52YXIgZWRpdF9ncmFmaWtfY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHRcclxuaWYgKCAkKHRoaXMpLmlzKFwiW2Zvcl1cIikgKVxyXG57XHJcblx0aWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiZm9yXCIpKSlcclxuXHR7XHJcblx0XHQvKlxyXG4gICQuYXJjdGljbW9kYWwoe1xyXG4gICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgdXJsOiAnZm9ybXMvZm9ybV9lZGl0X2dyYWZpYy5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJmb3JcIiksXHJcbiAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nJyk7XHJcbiAgICB9LFxyXG4gICAgYWZ0ZXJMb2FkaW5nT25TaG93OiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG4gICAgfSxcclxuXHRhZnRlckNsb3NlOiBmdW5jdGlvbihkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuKi9cclxuXHJcblxyXG5cdFx0JC5hcmN0aWNtb2RhbCh7XHJcblx0XHRcdHR5cGU6ICdhamF4JyxcclxuXHRcdFx0dXJsOiAnZm9ybXMvZm9ybV9lZGl0X2dyYWZpYy5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJmb3JcIiksXHJcblx0XHRcdGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG5cdFx0XHRcdC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG5cdFx0XHRcdCQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcblx0XHRcdFx0Ly/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcblx0XHRcdFx0ZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcblx0XHRcdFx0JCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcblx0XHRcdFx0JCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0YmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuXHRcdFx0XHRpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdEJvZHlTY3Jvb2woKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG59XHJcblx0XHJcbn1cclxuICBcclxucmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcclxuXHR9OyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICB3aWR0aF9hdXRvX2lucHV0KCk7XHJcblxyXG5cclxuICAgIHZhciAkaW5wdXQgPSAkKCcuanMtaW5wdXQtd2lkdGgtYXV0bycpLFxyXG4gICAgICAgICRidWZmZXIgPSAkKCcuaW5wdXQtYnVmZmVyJyk7XHJcblxyXG4gICAgJGlucHV0Lm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkYnVmZmVyLnRleHQoJGlucHV0LnZhbCgpKTtcclxuICAgICAgICAkaW5wdXQud2lkdGgoJGJ1ZmZlci53aWR0aCgpKTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiB3aWR0aF9hdXRvX2lucHV0KClcclxue1xyXG4gICAgJCgnLmpzLWlucHV0LXdpZHRoLWF1dG8nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSlcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLmFmdGVyKCc8ZGl2IGNsYXNzPVwiaW5wdXQtYnVmZmVyXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgfSk7XHJcbn0iLCIkKGZ1bmN0aW9uICgpe1xyXG5cclxuICAgIC8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC40YLRjCDQvdCw0LrQu9Cw0LTQvdGD0Y5cclxuICAgIC8vJChcIi5hZGRfaW52b2ljZXNzXCIpLmJpbmQoJ2NsaWNrJywgc2F2ZV9pbnZvaWNlc3MpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5hZGRfaW52b2ljZXNzJyxzYXZlX2ludm9pY2Vzcyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5hZGRfbWF0ZXJpYWxfaW52b2ljZScsQWRkSW52b2ljZU1hdGVyaWFsKTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXR5cGUtc3RvY2stdmlldycsdmlld19zdG9jayk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5kZWxfaW52b2ljZV9tYXRlcmlhbCcsIGRlbGxfaW52b2ljZV9tYXRlcmlhbCk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmRlbF9pbnZvaWNlX21hdGVyaWFsX3ByaW1lJywgZGVsbF9pbnZvaWNlX21hdGVyaWFsX3ByaW1lKTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWlzcG9sX3R5cGVfaW52b2ljZScsbmRzX2ludm9pY2UpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLnByaWNlX25kc19pbl8sLnByaWNlX2luXywuY291bnRfaW5fLC5jb3VudF9kZWZlY3RfaW5fLC5kZWxfaW52b2ljZV9ha3QsLm1hdGVyaWFsX2RlZmVjdCcsIGl0b2dfaW52b2ljZSk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmNoZWNrYm94X2Nvc3RfaW52JywgY2hhbmdlX29wdGlvbl9pbnZvaWNlKTtcclxuXHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5tYXRlcmlhbF9kZWZlY3QnLCBtYXRlcmlhbF9kZWZlY3QpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuZGVsX2ludm9pY2VfYWt0JywgbWF0ZXJpYWxfZGVmZWN0X2RlbGwpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjbGlja1wiLCcubWlsZF9taWxkJywgbWlsZF9kaXYpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNsaWNrXCIsJy5taWxkX21pbGRfZGF2JywgbWlsZF9kaXZfZGF2KTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjbGlja1wiLCcubWlsZF9taWxkX3RyYScsIG1pbGRfdHJhKTtcclxuXHJcbiAgICAvL9C90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINGB0L7RhdGA0LDQvdC40YLRjCDQvdCw0LrQu9Cw0LTQvdGD0Y5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuYWRkX2ludm9pY2VzczEnLCBzYXZlX2ludm9pY2VzczEpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcucHJpY2VfbmRzX2luXywucHJpY2VfaW5fLC5jb3VudF9pbl8sLnNsY3RfYm94LCNkYXRlX3RhYmxlLFtuYW1lPW51bWJlcl9pbnZvaWNlc10sW25hbWU9aXNwb2xfd29ya10sLmpzLWlzcG9sX3R5cGVfaW52b2ljZSwudXBsb2FkLWJ1dC0yMDIyLC51cGxvYWQtYnV0LTIwMjEsLmpzLWRlbGwtaW1hZ2UsLmRlbF9pbWFnZV9pbnZvaWNlLC5kZWxfaW52b2ljZV9tYXRlcmlhbCwuYWRkX21hdGVyaWFsX2ludm9pY2UsLmNvdW50X2RlZmVjdF9pbl8sLnRleHRfemF5dmFfbWVzc2FnZV8sLm1hdGVyaWFsX2RlZmVjdCwuZGVsX2ludm9pY2VfYWt0LC5jaGVja2JveF9jb3N0X2ludiwubWlsZF9taWxkLC5taWxkX21pbGRfZGF2LC5taWxkX21pbGRfbmRzJyxmdW5jdGlvbigpeyAgJCgnLnRyYW5zZmVyX2ludm9pY2VzcycpLmhpZGUoKTsgJCgnLmFkZF9pbnZvaWNlc3MxJykuc2hvdygpOyAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjbGlja1wiLCcubWlsZF9taWxkX25kcycsbWlsZF9uZHMpO1xyXG5cclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gbWlsZF9uZHMoKVxyXG57XHJcbiAgICBpZigkKHRoaXMpLnBhcmVudHMoJy5taWxkLW5kcycpLmlzKFwiLmNoZWNoZXJzXCIpKSB7XHJcbiAgICAgICAgJCgnLm1pbGQtbmRzJykucmVtb3ZlQ2xhc3MoXCJjaGVjaGVyc1wiKTtcclxuICAgICAgICAkKCcuY29zdC1ib3R0b20tanMteCcpLnJlbW92ZUNsYXNzKCd5ZXMtbmRzJyk7XHJcbiAgICAgICAgJCgnLmpzLW5kcy1jb3N0LW1hdGVyaWFsJykudmFsKDEpO1xyXG5cclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5taWxkLW5kcycpLmFkZENsYXNzKFwiY2hlY2hlcnNcIik7XHJcbiAgICAgICAgJCgnLmNvc3QtYm90dG9tLWpzLXgnKS5hZGRDbGFzcygneWVzLW5kcycpO1xyXG4gICAgICAgICQoJy5qcy1uZHMtY29zdC1tYXRlcmlhbCcpLnZhbCgwKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGl0b2dfaW52b2ljZSgpO1xyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG1pbGRfZGl2KClcclxue1xyXG4gICAgaWYoJCh0aGlzKS5wYXJlbnRzKCcubWlsZCcpLmlzKFwiLmNoZWNoZXJzXCIpKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWlsZCcpLnJlbW92ZUNsYXNzKFwiY2hlY2hlcnNcIik7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbaW52b2ljZV9tYXRlcmlhbF0nKS5maW5kKCcubWlsZF9pbnAnKS52YWwoMCk7XHJcblxyXG4gICAgICAgdmFyIG5kcz0kKCcuanMtaXNwb2xfdHlwZV9pbnZvaWNlJykudmFsKCk7XHJcbiAgICAgICAgaWYobmRzIT0xKSB7XHJcbiAgICAgICAgIC8vICAgJCgnLmNvc3QtYm90dG9tLWpzLXgnKS5yZW1vdmVDbGFzcygnbm9uby1jaGVja2VyJyk7XHJcbiAgICAgICAgIC8vICAgJCgnLmNvc3QtYm90dG9tLWpzLXgnKS5maW5kKCcubWlsZC1uZHMnKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighJCgnLmpzLW51bWJlci1pbnZvaWNlLXgnKS5pcygnW3JlYWRvbmx5XScpKSB7XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5wcmljZV9pbl8nKS5wcm9wKCdyZWFkb25seScsIGZhbHNlKS5yZW1vdmVDbGFzcygnZ3JleV9lZGl0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1pbGQnKS5hZGRDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLm1pbGRfaW5wJykudmFsKDEpO1xyXG5cclxuICAgICAgLy8gICQoJy5jb3N0LWJvdHRvbS1qcy14JykuYWRkQ2xhc3MoJ25vbm8tY2hlY2tlcicpO1xyXG4gICAgICAvLyAgJCgnLmNvc3QtYm90dG9tLWpzLXgnKS5maW5kKCcubWlsZC1uZHMnKS5oaWRlKCk7XHJcblxyXG5cclxuICAgICAgIC8vICQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLnByaWNlX25kc19pbl8nKS5yZW1vdmVBdHRyKCdyZWFkb25seScpLnJlbW92ZUNsYXNzKCdncmV5X2VkaXQnKTtcclxuICAgICAgIC8vICQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLnByaWNlX25kc19pbl8nKS5wcm9wKCdyZWFkb25seScsdHJ1ZSkuYWRkQ2xhc3MoJ2dyZXlfZWRpdCcpO1xyXG4gICAgICAgLy8gJCh0aGlzKS5wYXJlbnRzKCdbaW52b2ljZV9tYXRlcmlhbF0nKS5maW5kKCcucHJpY2VfbmRzX2luXycpLnZhbCgwKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5wcmljZV9pbl8nKS52YWwoMCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbaW52b2ljZV9tYXRlcmlhbF0nKS5maW5kKCcucHJpY2VfaW5fJykucHJvcCgncmVhZG9ubHknLHRydWUpLmFkZENsYXNzKCdncmV5X2VkaXQnKTtcclxuXHJcblxyXG4gICAgfVxyXG4gICAgaXRvZ19pbnZvaWNlKCk7XHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gbWlsZF90cmEoKVxyXG57XHJcbiAgICB2YXIgaWRfZG9tPSQoJy51c2Vyc19ydWxlJykuYXR0cigndWknKTtcclxuICAgIC8vYWxlcnQoaWRfZG9tKTtcclxuXHJcblxyXG4gICAgLy/QtdGB0LvQuCDRjdGC0L4g0L/QtdGA0LLQvtC1INC90LDQttCw0YLQuNC1INGH0YLQvtCx0Ysg0L3QtSDQv9GD0YLQsNGC0Ywg0L7Rh9C40YHRgtC40YLRjCDQutC+0YDQt9C40L3RgyDQstC00YDRg9CzINGC0YPQtNCwINCx0YvQu9C+INGH0YLQvi3RgtC+INC00L7QsdCw0LLQu9C10L3QvlxyXG4gICAgaWYoJCgnLnRyYW5zZmVyX2NoZWNrX3ZhbCcpLnZhbCgpPT0wKVxyXG4gICAge1xyXG5cclxuICAgICAgICAkLmNvb2tpZShcIm1hdGVyaWFsXCIraWRfZG9tK1wiX1wiK2lkX2RvbSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZX0pO1xyXG4gICAgICAgICQoJy50cmFuc2Zlcl9jaGVja192YWwnKS52YWwoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCh0aGlzKS5wYXJlbnRzKCcubWlsZF90cmEnKS5pcyhcIi5jaGVjaGVyc1wiKSkge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHN0b2NrX2hqPSQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLnN0b2NrX2lucCcpLnZhbCgpO1xyXG4gICAgICAgICQoJy5zdG9ja19pbnBbdmFsdWU9JytzdG9ja19oaisnXScpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5taWxkX21pbGRfdHJhJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWlsZF90cmEnKS5yZW1vdmVDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50cmFuc2Zlcl9jaGVjaycpLnJlbW92ZUNsYXNzKFwiY2hlY2hlcnN4XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy/Rg9C00LDQu9C40YLRjCDQuNC3INC60L7RgNC30LjQvdGLXHJcbiAgICAgICAgQ29va2llTGlzdFMoXCJtYXRlcmlhbFwiK2lkX2RvbStcIl9cIitpZF9kb20sJCh0aGlzKS5wYXJlbnRzKCdbaW52b2ljZV9tYXRlcmlhbF0nKS5maW5kKCcuc3RvY2tfaW5wX21hdGVyJykudmFsKCksJ2RlbCcsJ3NvcnQnLCcsJyk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAvLyQodGhpcykucGFyZW50cygnLm1pbGRfdHJhJykuYWRkQ2xhc3MoXCJjaGVjaGVyc1wiKTtcclxuXHJcbiAgICAgICAgdmFyIHN0b2NrX2hqPSQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLnN0b2NrX2lucCcpLnZhbCgpO1xyXG4gICAgICAgICQoJy5zdG9ja19pbnBbdmFsdWU9JytzdG9ja19oaisnXScpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5taWxkX21pbGRfdHJhJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWlsZF90cmEnKS5hZGRDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50cmFuc2Zlcl9jaGVjaycpLmFkZENsYXNzKFwiY2hlY2hlcnN4XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8v0LTQvtCx0LDQstC40YLRjCDQsiDQutC+0YDQt9C40L3Rg1xyXG4gICAgICAgIENvb2tpZUxpc3RTKFwibWF0ZXJpYWxcIitpZF9kb20rXCJfXCIraWRfZG9tLCQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLnN0b2NrX2lucF9tYXRlcicpLnZhbCgpLCdhZGQnLCdzb3J0JywnLCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0LLQtNGA0YPQsyDQsiDQvdCw0LrQu9Cw0LTQvdC+0Lkg0L3QtdGB0LrQvtC70YzQutC+INC+0LTQuNC90LDQutC+0LLRi9GFINC80LDRgtC10YDQuNCw0LvQvtCyINGBINC+0LTQvdC40LwgaWRfc3RvY2sg0YLQvtCz0LTQsCDQuNGFINCy0YHQtSDQstGL0LTQtdC70LjRgtGMINC40LvQuCDRg9Cx0YDQsNGC0Ywg0LLRi9C00LXQu9C10L3QuNC1INGB0L4g0LLRgdC10YVcclxuXHJcblxyXG5cclxuICAgIC8v0LXRgdC70Lgg0LIg0LrQvtGA0LfQuNC90LUg0LXRidC1INGH0YLQvi3RgtC+INC10YHRgtGMINC/0L7QutCw0LfQsNGC0Ywg0LrQvtGA0LfQuNC90YNcclxuXHJcbiAgICB2YXIgY29va2lleCA9ICQuY29va2llKFwibWF0ZXJpYWxcIitpZF9kb20rXCJfXCIraWRfZG9tKTtcclxuICAgIC8vYWxlcnQod2luZG93LmJfY28pO1xyXG4gICAgaWYoY29va2lleCE9bnVsbClcclxuICAgIHtcclxuICAgICAgICB2YXIgY2MgPSBjb29raWV4LnNwbGl0KCcuJyk7XHJcbiAgICAgICAgdmFyIGNvdW50cyA9IGNjLmxlbmd0aDtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb3VudHMpO1xyXG4gICAgICAgIGlmIChjb3VudHMgIT0gMCkge1xyXG4gICAgICAgICAgICAkKCcudHJhbnNmZXJfaW52b2ljZXNzXzIwMjInKS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnRyYW5zZmVyX2ludm9pY2Vzc18yMDIyJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy50cmFuc2Zlcl9pbnZvaWNlc3NfMjAyMicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBtaWxkX2Rpdl9kYXYoKVxyXG57XHJcbiAgICBpZigkKHRoaXMpLnBhcmVudHMoJy5taWxkX2RhdicpLmlzKFwiLmNoZWNoZXJzXCIpKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWlsZF9kYXYnKS5yZW1vdmVDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLmFsaWVuX2lucCcpLnZhbCgwKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5uYW1lX2ludm9pY2VfZGF2YScpLnJlbW92ZUNsYXNzKFwiZGF2YVwiKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5jaGF0X2trJykucmVtb3ZlKCk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWlsZF9kYXYnKS5hZGRDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnW2ludm9pY2VfbWF0ZXJpYWxdJykuZmluZCgnLmFsaWVuX2lucCcpLnZhbCgxKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5uYW1lX2ludm9pY2VfZGF2YScpLmFkZENsYXNzKFwiZGF2YVwiKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmZpbmQoJy5uYW1lX2ludm9pY2VfZGF2YScpLmFmdGVyKCc8ZGl2IGNsYXNzPVwiY2hhdF9ra1wiIGRhdGEtdG9vbHRpcD1cItC00LDQstCw0LvRjNGH0LXRgdC60LjQuSDQvNCw0YLQtdGA0LjQsNC7XCI+PC9kaXY+Jyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzYXZlX2ludm9pY2VzczEoKVxyXG57XHJcbiAgICB2YXIgZXJyb3I9MDtcclxuXHJcbiAgICAkKCcuc2F2ZV9fcycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgJCgnLmFrdF9zcycpLnJlbW92ZUNsYXNzKCdyZWRhYXNfaW52Y29pY2UnKTtcclxuXHJcbiAgICBpZigkKCcjaXNwb2wnKS52YWwoKT09MClcclxuICAgIHtcclxuICAgICAgICAkKCcjaXNwb2wnKS5wcmV2KCkucHJldigpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgIGVycm9yPTE7XHJcbiAgICB9XHJcbiAgICBpZigkKCcjZGF0ZV9oaWRkZW5fdGFibGUnKS52YWwoKT09JycpXHJcbiAgICB7XHJcbiAgICAgICAgJCgnI2RhdGVfaGlkZGVuX3RhYmxlJykubmV4dCgnLnNhdmVfX3MnKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICBlcnJvcj0xO1xyXG4gICAgfVxyXG4gICAgaWYoJCgnI251bWJlcl9pbnZvaWNlJykudmFsKCk9PScnKVxyXG4gICAge1xyXG4gICAgICAgICQoJyNudW1iZXJfaW52b2ljZScpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgIGVycm9yPTE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgICQoJy5tZXNzYV9pbnZvaWNlOnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgIHZhciBpZD0kKHRoaXMpLmF0dHIoJ2ludm9pY2VzX21lc3NhJyk7XHJcblxyXG5cclxuICAgICAgICB2YXIgY291bnQ9cGFyc2VGbG9hdCgkKCdbaW52b2ljZV9tYXRlcmlhbD0nK2lkKyddJykuZmluZCgnLmNvdW50X2luXycpLnZhbCgpKTtcclxuICAgICAgICB2YXIgY291bnRfYWt0PXBhcnNlRmxvYXQoJCgnW2ludm9pY2VzX21lc3NhPScraWQrJ10nKS5maW5kKCcuY291bnRfZGVmZWN0X2luXycpLnZhbCgpKTtcclxuICAgICAgICB2YXIgY29tbWVudD0kKCdbaW52b2ljZXNfbWVzc2E9JytpZCsnXScpLmZpbmQoJy50ZXh0X3pheXZhX21lc3NhZ2VfJykudmFsKCk7XHJcbiAgICAgICAgLy9hbGVydChpZCk7XHJcblxyXG4gICAgICAgIGlmKChjb3VudF9ha3Q9PScnKXx8KGNvdW50X2FrdD5jb3VudCl8fChjb3VudF9ha3Q9PTApKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQl9Cw0L/QvtC70L3QuNGC0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LHRgNCw0LrQsCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFrdF9waG90bz0kKCdbaW52b2ljZXNfbWVzc2E9JytpZCsnXScpLmZpbmQoJy5waG90by1ha3QtaW52b2ljZSAubGktaW1hZ2UnKS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmKGFrdF9waG90bz09MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgICAgIGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0J/QvtC00LPRgNGD0LfQuNGC0Lgg0YTQsNC50Lsg0LDQutGC0LAg0L3QsCDQvtGC0LHRgNCw0LrQvtCy0LrRgycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoKGNvbW1lbnQ9PScnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgICAgIGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0JfQsNC/0L7Qu9C90LjRgtC1INC60L7QvNC80LXQvdGC0LDRgNC40Lkg0L/QviDQsdGA0LDQutGDJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBpZihlcnJvcj09MSlcclxuICAgIHtcclxuLypcclxuICAgICAgICAkKCcuZXJyb3JfdGV4dF9hZGQnKS5lbXB0eSgpLmFwcGVuZCgn0J3QtSDQstGB0LUg0L/QvtC70Y8g0LfQsNC/0L7Qu9C90LXQvdGLINC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjycpLnNob3coKTtcclxuICAgICAgICBzZXRUaW1lb3V0ICggZnVuY3Rpb24gKCkgeyAkKCcuZXJyb3JfdGV4dF9hZGQnKS5oaWRlKCk7IH0sIDcwMDAgKTtcclxuKi9cclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgJCgnI2xhbGFsYV9hZGRfZm9ybScpLnN1Ym1pdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59XHJcblxyXG4vL9GD0LHRgNCw0YLRjCDQsNC60YIg0L3QsCDQsdGA0LDQulxyXG5mdW5jdGlvbiBtYXRlcmlhbF9kZWZlY3RfZGVsbCgpXHJcbntcclxuICAgIHZhciBhdHRyPSQodGhpcykuYXR0cignaWRfcmVsJyk7XHJcbiAgICAkKCdbaW52b2ljZV9tYXRlcmlhbD0nK2F0dHIrJ10nKS5maW5kKCcuZGVmZWN0X2lucCcpLnZhbCgnMCcpO1xyXG4gICAgJCgnW2ludm9pY2VfbWF0ZXJpYWw9JythdHRyKyddJykubmV4dCgpLmhpZGUoKTtcclxuICAgICQoJ1tpbnZvaWNlc19tZXNzYT0nK2F0dHIrJ10nKS5maW5kKCcuY291bnRfZGVmZWN0X2luXycpLnZhbCgnJyk7XHJcbiAgICAkKCdbaW52b2ljZXNfbWVzc2E9JythdHRyKyddJykuZmluZCgnLnRleHRfemF5dmFfbWVzc2FnZV8nKS52YWwoJycpO1xyXG59XHJcblxyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMIC0g0YPQsdGA0LDRgtGMINCw0LrRgiDQvdCwINCx0YDQsNC6XHJcbmZ1bmN0aW9uIG1hdGVyaWFsX2RlZmVjdCgpXHJcbntcclxuICAgIHZhciBhdHRyPSQodGhpcykuYXR0cignaWRfcmVsJyk7XHJcbiAgICB2YXIgZGVmZWN0PSQoJ1tpbnZvaWNlX21hdGVyaWFsPScrYXR0cisnXScpLmZpbmQoJy5kZWZlY3RfaW5wJykudmFsKCk7XHJcblxyXG4gICAgaWYoZGVmZWN0PT0wKVxyXG4gICAge1xyXG4gICAgICAgICQoJ1tpbnZvaWNlX21hdGVyaWFsPScrYXR0cisnXScpLmZpbmQoJy5kZWZlY3RfaW5wJykudmFsKCcxJyk7XHJcbiAgICAgICAgJCgnW2ludm9pY2VfbWF0ZXJpYWw9JythdHRyKyddJykubmV4dCgpLnNob3coKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJ1tpbnZvaWNlX21hdGVyaWFsPScrYXR0cisnXScpLmZpbmQoJy5kZWZlY3RfaW5wJykudmFsKCcwJyk7XHJcbiAgICAgICAgJCgnW2ludm9pY2VfbWF0ZXJpYWw9JythdHRyKyddJykubmV4dCgpLmhpZGUoKTtcclxuICAgICAgICAkKCdbaW52b2ljZXNfbWVzc2E9JythdHRyKyddJykuZmluZCgnLmNvdW50X2RlZmVjdF9pbl8nKS52YWwoJycpO1xyXG4gICAgICAgICQoJ1tpbnZvaWNlc19tZXNzYT0nK2F0dHIrJ10nKS5maW5kKCcudGV4dF96YXl2YV9tZXNzYWdlXycpLnZhbCgnJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZV9vcHRpb25faW52b2ljZSgpXHJcbntcclxuICAgIHZhciBuZHNfeD0kKCdbbmFtZT1uZHNfZmZdJykudmFsKCk7XHJcbiAgICAkKCcucHJpY2VfaW5fLC5wcmljZV9uZHNfaW5fJykudmFsKDApO1xyXG5cclxuICAgIHZhciBuZHM9JCgnLmpzLWlzcG9sX3R5cGVfaW52b2ljZScpLnZhbCgpO1xyXG4gICAgdmFyIG5kc19idWRldD0wO1xyXG4gICAgaWYobmRzPT0wKVxyXG4gICAge1xyXG4gICAgICAgIG5kc19idWRldD0xO1xyXG4gICAgfVxyXG4gICAgJCgnLmpzLWlzcG9sX3R5cGVfaW52b2ljZScpLnByZXYoJ3VsJykuZmluZCgnYVtyZWw9JytuZHNfYnVkZXQrJ10nKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cclxuXHJcblxyXG4gICAgaWYobmRzX3g9PTApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnW25hbWU9bmRzX2ZmXScpLnZhbCgnMScpO1xyXG4gICAgICAgICQoJy55ZXNfbmRzJykucGFyZW50cygndGgnKS5yZW1vdmVDbGFzcygnYWN0aXZlX25fYWMnKTtcclxuICAgICAgICAkKCcubm9fbmRzJykucGFyZW50cygndGgnKS5hZGRDbGFzcygnYWN0aXZlX25fYWMnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJ1tuYW1lPW5kc19mZl0nKS52YWwoJzAnKTtcclxuICAgICAgICAkKCcubm9fbmRzJykucGFyZW50cygndGgnKS5yZW1vdmVDbGFzcygnYWN0aXZlX25fYWMnKTtcclxuICAgICAgICAkKCcueWVzX25kcycpLnBhcmVudHMoJ3RoJykuYWRkQ2xhc3MoJ2FjdGl2ZV9uX2FjJyk7XHJcbiAgICB9XHJcbiAgICBuZHNfaW52b2ljZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb3N0X21pbGQoKVxyXG57XHJcbiAgICAvL9C/0YDQvtCx0LXQttCw0YLRjNGB0Y8g0L/QviDQstGB0LXQvCDQvNCw0YLQtdGA0LjQsNC70L7QvCDQvdCw0LrQu9Cw0LTQvdC+0Lkg0Lgg0LXRgdC70Lgg0L7QvdCwINC80Y/Qs9C60LDRjyDQt9Cw0LzQvtGA0L7Qt9C40YLRjCDQstGB0LUg0YbQtdC90YtcclxuICAgICQoJ1tpbnZvaWNlX21hdGVyaWFsXScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiB2YXIgbWlsZCA9JCh0aGlzKS5maW5kKCcubWlsZF9pbnAnKS52YWwoKTtcclxuaWYobWlsZD09MSlcclxue1xyXG4gICAgJCh0aGlzKS5maW5kKCcucHJpY2VfbmRzX2luXycpLnByb3AoJ3JlYWRvbmx5Jyx0cnVlKS5hZGRDbGFzcygnZ3JleV9lZGl0Jyk7XHJcbiAgICAkKHRoaXMpLmZpbmQoJy5wcmljZV9uZHNfaW5fJykudmFsKDApO1xyXG4gICAgJCh0aGlzKS5maW5kKCcucHJpY2VfaW5fJykudmFsKDApO1xyXG4gICAgJCh0aGlzKS5maW5kKCcucHJpY2VfaW5fJykucHJvcCgncmVhZG9ubHknLHRydWUpLmFkZENsYXNzKCdncmV5X2VkaXQnKTtcclxufVxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBuZHNfaW52b2ljZSgpXHJcbntcclxuICAgIHZhciBuZHM9JCgnLmpzLWlzcG9sX3R5cGVfaW52b2ljZScpLnZhbCgpO1xyXG4gICAgdmFyIG5kc19tYXRlcmlhbD0kKCcuanMtbmRzLWNvc3QtbWF0ZXJpYWwnKS52YWwoKTtcclxuXHJcbiAgICBpZigkKCcuanMtbnVtYmVyLWludm9pY2UteCcpLmlzKCdbcmVhZG9ubHldJykpXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLnByaWNlX2luXywucHJpY2VfbmRzX2luXycpLmF0dHIoJ3JlYWRvbmx5JywndHJ1ZScpLmFkZENsYXNzKCdncmV5X2VkaXQnKTtcclxuICAgIH1cclxuICAgICQoJ1tuYW1lPW5kc19mZl0nKS52YWwobmRzKTtcclxuXHJcblxyXG4gICAgaWYobmRzX21hdGVyaWFsPT0wKVxyXG4gICAge1xyXG4gICAgICAgIC8v0LLRi9C00LXQu9GP0LXQvCDRhtC10L3RgyDQutCw0Log0LHRi9C70L4g0YPQutCw0LfQsNC90L5cclxuICAgICAgICAkKCcubWlsZC1uZHMnKS5hZGRDbGFzcyhcImNoZWNoZXJzXCIpO1xyXG4gICAgICAgICQoJy5taWxkLW5kcycpLnBhcmVudHMoJy5jb3N0LWJvdHRvbS1qcy14JykuYWRkQ2xhc3MoJ3llcy1uZHMnKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGlmKG5kcz09MSlcclxuICAgIHtcclxuICAgICAgICAvL9Cx0LXQtyDQvdC00YFcclxuICAgICAgICAvLy0+0L3QtdC00L7RgdGC0YPQv9C90L4g0LPQsNC70LrQsCDQstGL0LHQvtGA0LAg0LrQsNC60LDRjyDRhtC10L3QsCDRg9C60LDQt9Cw0L3QsFxyXG4gICAgICAgIC8vJCgnLnByaWNlX25kc19pbl8nKS5wcm9wKCdyZWFkb25seScsdHJ1ZSkuYWRkQ2xhc3MoJ2dyZXlfZWRpdCcpO1xyXG4gICAgICAgIC8vJCgnLmNvc3lfdGl0bGUnKS5lbXB0eSgpLmFwcGVuZCgn0KbQtdC90LAnKTtcclxuICAgICAgICAkKCcuY29zdC1ib3R0b20tanMteCcpLmZpbmQoJy5taWxkLW5kcycpLmhpZGUoKTtcclxuICAgICAgICAkKCcuY29zdC1ib3R0b20tanMteCcpLmFkZENsYXNzKCdub25vLWNoZWNrZXInKTtcclxuXHJcbiAgICAgICAgLy8kKCcucHJpY2VfaW5fJykucHJldignbGFiZWwnKS5lbXB0eSgpLmFwcGVuZCgn0KbQldCd0JAnKTtcclxuICAgICAgICAvLyQoJy5wcmljZV9uZHNfaW5fJykudmFsKDApO1xyXG4gICAgICAgIC8vJCgnLnRpdGxlX2l0b2dfaW52b2ljZScpLmVtcHR5KCkuYXBwZW5kKCfQmNGC0L7Qs9C+INGB0YPQvNC80LAnKTtcclxuXHJcbiAgICAgICAgLy8kKCcuY2hlY2tib3hfY29zdF9pbnYnKS5oaWRlKCk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcblxyXG4gICAgICAgIC8vaWYoISQoJy5taWxkJykuaXMoXCIuY2hlY2hlcnNcIikpIHtcclxuICAgICAgICAgICAgLy/RgSDQvdC00YFcclxuICAgICAgICAgICAgJCgnLmNvc3QtYm90dG9tLWpzLXgnKS5maW5kKCcubWlsZC1uZHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5jb3N0LWJvdHRvbS1qcy14JykucmVtb3ZlQ2xhc3MoJ25vbm8tY2hlY2tlcicpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuLypcclxuICAgICAgICAkKCcuY2hlY2tib3hfY29zdF9pbnYnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmNvc3lfdGl0bGUnKS5lbXB0eSgpLmFwcGVuZCgn0KbQtdC90LAg0LHQtdC3INCd0LTRgTxkaXYgY2xhc3M9XCJjaGVja2JveF9jb3N0X2ludiBub19uZHNcIj48aT48L2k+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIGlmKCQoJy55ZXNfbmRzJykubGVuZ3RoPT0wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCgnLmNoZWNrYm94X2Nvc3RfaW52JykucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcucHJpY2VfaW5fJykucHJldignbGFiZWwnKS5lbXB0eSgpLmFwcGVuZCgn0KbQldCd0JAg0JHQldCXINCd0JTQoScpO1xyXG5cclxuICAgICAgICB2YXIgbmRzX3g9JCgnW25hbWU9bmRzX2ZmXScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBtb2pubz0gJCgnLmpzLW51bWJlci1pbnZvaWNlLXgnKS5pcygnLmdyZXlfZWRpdCcpO1xyXG4gICAgICAgIGlmKCEkKCcuanMtbnVtYmVyLWludm9pY2UteCcpLmlzKCcuZ3JleV9lZGl0JykpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYoKG5kc194PT0wKSlcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5wcmljZV9uZHNfaW5fJykucmVtb3ZlQXR0cigncmVhZG9ubHknKS5yZW1vdmVDbGFzcygnZ3JleV9lZGl0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJpY2VfaW5fJykudmFsKDApO1xyXG4gICAgICAgICAgICAgICAgJCgnLnByaWNlX2luXycpLnByb3AoJ3JlYWRvbmx5Jyx0cnVlKS5hZGRDbGFzcygnZ3JleV9lZGl0Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJpY2VfaW5fJykucmVtb3ZlQXR0cigncmVhZG9ubHknKS5yZW1vdmVDbGFzcygnZ3JleV9lZGl0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJpY2VfbmRzX2luXycpLnZhbCgwKTtcclxuICAgICAgICAgICAgICAgICQoJy5wcmljZV9uZHNfaW5fJykucHJvcCgncmVhZG9ubHknLHRydWUpLmFkZENsYXNzKCdncmV5X2VkaXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcudGl0bGVfaXRvZ19pbnZvaWNlJykuZW1wdHkoKS5hcHBlbmQoJ9CY0YLQvtCz0L4g0YHRg9C80LzQsCDRgSDQvdC00YEnKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBuZHNfeD0kKCdbbmFtZT1uZHNfZmZdJykudmFsKCk7XHJcbiAgICAgICAgJCgnLnllc19uZHMsLm5vX25kcycpLnBhcmVudHMoJ3RoJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV9uX2FjJyk7XHJcbiAgICAgICAgaWYobmRzX3g9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcueWVzX25kcycpLnBhcmVudHMoJ3RoJykuYWRkQ2xhc3MoJ2FjdGl2ZV9uX2FjJyk7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcubm9fbmRzJykucGFyZW50cygndGgnKS5hZGRDbGFzcygnYWN0aXZlX25fYWMnKTtcclxuICAgICAgICB9XHJcbiovXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy/Qv9C10YDQtdGB0YfQuNGC0LDRgtGMINGB0YPQvNC80YMg0L3QsNC60LvQsNC00L3QvtC5XHJcbiAgICBpdG9nX2ludm9pY2UoKTtcclxuICAgIC8vY29zeV90aXRsZVxyXG59XHJcblxyXG4vL9Cy0YvQstC+0LQg0LjRgtC+0LPQvtCy0YvRhSDRgdGC0YDQvtGH0LXQulxyXG5mdW5jdGlvbiBpdG9nX2ludm9pY2UoKVxyXG57XHJcbiAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgIHZhciBuZHM9JCgnLmpzLWlzcG9sX3R5cGVfaW52b2ljZScpLnZhbCgpOyAgLy/QtdGB0YLRjCDQu9C4INC90LTRgSDQsiDRgdGH0LXRgtC1XHJcbiAgICB2YXIgbmRzX21hdGVyaWFsPSQoJy5qcy1uZHMtY29zdC1tYXRlcmlhbCcpLnZhbCgpOyAvL9C60LDQuiDRg9C60LDQt9Cw0L3QsCDRhtC10L3QsFxyXG5cclxuICAgIC8vYWxlcnQobmRzKTtcclxuICAgIHZhciB4dmc9JCgnW2ludm9pY2VfbWF0ZXJpYWxdJyk7XHJcbiAgICB2YXIgc3VtbV94dmc9MDtcclxuICAgIHZhciBzdW1tX2RlZmVjdD0wO1xyXG4gICAgeHZnLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblxyXG5cclxuICAgICAgICB2YXIgY291bnQ9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuY291bnRfaW5fJykudmFsKCkpO1xyXG4gICAgICAgIHZhciBwcmljZT0gcGFyc2VGbG9hdCgkKHRoaXMpLmZpbmQoJy5wcmljZV9pbl8nKS52YWwoKSk7XHJcbiAgICAgIC8vICB2YXIgcHJpY2VfbmRzPSBwYXJzZUZsb2F0KCQodGhpcykuZmluZCgnLnByaWNlX25kc19pbl8nKS52YWwoKSk7XHJcbiAgICAgICAgdmFyIGRlZmVjdF9pbj1wYXJzZUZsb2F0KCQodGhpcykuZmluZCgnLmRlZmVjdF9pbnAnKS52YWwoKSk7XHJcbi8qXHJcbiAgICAgICAgaWYobmRzPT0wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy/RgSDQvdC00YEg0LIg0YHRh9C10YLQtVxyXG5cclxuICAgICAgICAgICAgLy/QtdGB0LvQuCDRg9C60LDQt9Cw0L3QsCDRhtC10L3QsCDRgSDQvdC00YEg0YLQviDQv9GA0L7RgdGC0L4g0YPQvNC90L7QttCw0LXQvCDQvdCwINC60L7Qu9C40YfQtdGB0YLQstC+XHJcblxyXG4gICAgICAgICAgICB2YXIgbmRzX3g9JCgnW25hbWU9bmRzX2ZmXScpLnZhbCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vYWxlcnQocHJpY2VfbmRzKTtcclxuICAgICAgICAgICAgaWYoKHByaWNlX25kcyE9MCkmJihwcmljZV9uZHMhPScnKSYmKCQuaXNOdW1lcmljKHByaWNlX25kcykpJiYobmRzX3g9PTApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU9KGNvdW50KnByaWNlX25kcykudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnByaWNlX2luXycpLnZhbCgoKHByaWNlX25kcyoxMDApLzExOCkudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgICAgICAgICBpZihwcmljZV9uZHM9PTApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKHRoaXMpLnZhbCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZGVmZWN0X2luIT0wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudF9kZWZmZj0kKHRoaXMpLm5leHQoKS5maW5kKCcuY291bnRfZGVmZWN0X2luXycpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCgkLmlzTnVtZXJpYyhjb3VudF9kZWZmZikpJiYoY291bnRfZGVmZmYhPScnKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1fZGVmZWN0PShzdW1tX2RlZmVjdCsoY291bnRfZGVmZmYqcHJpY2VfbmRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8v0LXRgdC70Lgg0YbQtdC90LAg0YEg0L3QtNGBINC/0YPRgdGC0L4g0YLQviDQvtCx0YvRh9C90YPRjiDRhtC10L3RgyArMTglINC90LTRgVxyXG4gICAgICAgICAgICAgICAgaWYoKG5kc194PT0xKSYmKCQuaXNOdW1lcmljKHByaWNlKSkmJihwcmljZSE9JycpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZT0oY291bnQqKHByaWNlKjEuMTgpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnByaWNlX25kc19pbl8nKS52YWwoKHByaWNlKjEuMTgpLnRvRml4ZWQoMikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZihkZWZlY3RfaW4hPTApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50X2RlZmZmPSQodGhpcykubmV4dCgpLmZpbmQoJy5jb3VudF9kZWZlY3RfaW5fJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKCQuaXNOdW1lcmljKGNvdW50X2RlZmZmKSkmJihjb3VudF9kZWZmZiE9JycpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtbV9kZWZlY3Q9KHN1bW1fZGVmZWN0Kyhjb3VudF9kZWZmZioocHJpY2UqMS4xOCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgIHsqL1xyXG4gICAgICAgICAgICAvL9Cx0LXQtyDQvdC00YFcclxuXHJcbiAgICAgICAgICAgIC8v0L/RgNC+0YHRgtC+INGD0LzQvdC+0LbQsNC10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0L3QsCDRgdGC0L7QuNC80L7RgdGC0YxcclxuICAgICAgICAgICAgdmFyIHZhbHVlPShjb3VudCpwcmljZSkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGRlZmVjdF9pbiE9MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50X2RlZmZmPSQodGhpcykubmV4dCgpLmZpbmQoJy5jb3VudF9kZWZlY3RfaW5fJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZigoJC5pc051bWVyaWMoY291bnRfZGVmZmYpKSYmKGNvdW50X2RlZmZmIT0nJykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtbV9kZWZlY3Q9KHN1bW1fZGVmZWN0Kyhjb3VudF9kZWZmZipwcmljZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgLy8gfVxyXG5cclxuXHJcbiAgICAgICAgaWYoKHZhbHVlIT0wKSYmKHZhbHVlIT0nJykmJigkLmlzTnVtZXJpYyh2YWx1ZSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc3VtbWFfaWknKS5lbXB0eSgpLmFwcGVuZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHN1bW1feHZnPShwYXJzZUZsb2F0KHN1bW1feHZnKStwYXJzZUZsb2F0KHZhbHVlKSkudG9GaXhlZCgyKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnN1bW1hX2lpJykuZW1wdHkoKS5hcHBlbmQoJzAnKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9Cy0YvQstC+0LQg0L/QviDQtNC10YTQtdC60YLQsNC8XHJcbiAgICBpZigoc3VtbV9kZWZlY3QhPTApJiYoc3VtbV9kZWZlY3QhPScnKSYmKCQuaXNOdW1lcmljKHN1bW1fZGVmZWN0KSkpXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLml0b2dzc19kZWZlY3QnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLml0b2dfaW52b2ljZV9kZWZlY3QnKS5lbXB0eSgpLmFwcGVuZChzdW1tX2RlZmVjdC50b0ZpeGVkKDIpKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKCcuaXRvZ3NzX2RlZmVjdCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcuaXRvZ19pbnZvaWNlX2RlZmVjdCcpLmVtcHR5KCkuYXBwZW5kKCcwJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgJCgnLmpzLWl0b2ctYWxsLXRleHQnKS5lbXB0eSgpLmFwcGVuZChzdW1tX3h2Zyk7XHJcblxyXG5cclxuICAgICQoJy5qcy1pdG9nLW5kcy1hbGwnKS5oaWRlKCk7XHJcbiAgICAkKCcuanMtaXRvZy12bmRzLWFsbCcpLmhpZGUoKTtcclxuICAgICQoJy5qcy1pdG9nLXNuZHMtYWxsJykuaGlkZSgpO1xyXG5cclxuICAgIGlmKHN1bW1feHZnIT0wKVxyXG4gICAge1xyXG4gICAgICAgIGlmKG5kcz09MSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0LHQtdC3INC90LTRgSDQsiDRgdGH0LXRgtC1XHJcblxyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy/RgSDQvdC00YEg0LIg0YHRh9C10YLQtVxyXG4gICAgICAgICAgICBpZihuZHNfbWF0ZXJpYWw9PTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8v0YbQtdC90LAg0LfQsCDQvNCw0YLQtdGA0LjQsNC7INGD0LrQsNC30LDQvdCwINCx0LXQtyDQvdC00YEg0LIg0YHRh9C10YLQtVxyXG4gICAgICAgICAgICAgICAgdmFyIHN1bW1feHZnX25kcz0oc3VtbV94dmcqMC4yKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmpzLWl0b2ctbmRzLXRleHQnKS5lbXB0eSgpLmFwcGVuZChzdW1tX3h2Z19uZHMpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmpzLWl0b2ctbmRzLWFsbCcpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWxsX3NzZD0ocGFyc2VGbG9hdChzdW1tX3h2Z19uZHMpK3BhcnNlRmxvYXQoc3VtbV94dmcpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmpzLWl0b2ctc25kcy10ZXh0JykuZW1wdHkoKS5hcHBlbmQoYWxsX3NzZCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuanMtaXRvZy1zbmRzLWFsbCcpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL9GG0LXQvdCwINC30LAg0LzQsNGC0LXRgNC40LDQuyDRg9C60LDQt9Cw0L3QsCDRgSDQvdC00YEg0LIg0YHRh9C10YLQtVxyXG4gICAgICAgICAgICAgICAgdmFyIHN1bW1feHZnX25kcz0oKHN1bW1feHZnKjAuMikvMS4yKS50b0ZpeGVkKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5qcy1pdG9nLXZuZHMtdGV4dCcpLmVtcHR5KCkuYXBwZW5kKHN1bW1feHZnX25kcyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuanMtaXRvZy12bmRzLWFsbCcpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuLypcclxuICAgIGlmKChzdW1tX3h2ZyE9MCkmJihuZHM9PTApKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBzdW1tX3h2Z19uZHM9KHN1bW1feHZnLzEuMTgqMC4xOCkudG9GaXhlZCgyKTtcclxuICAgICAgICAkKCcuaXRvZ19pbnZvaWNlX25kcycpLmVtcHR5KCkuYXBwZW5kKHN1bW1feHZnX25kcyk7XHJcbiAgICAgICAgJCgnLml0b2dzc19uZHMnKS5zaG93KCk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKCcuaXRvZ19pbnZvaWNlX25kcycpLmVtcHR5KCk7XHJcbiAgICAgICAgJCgnLml0b2dzc19uZHMnKS5oaWRlKCk7XHJcbiAgICB9XHJcbiovXHJcblxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkZWxsX2ludm9pY2VfbWF0ZXJpYWxfcHJpbWUoKVxyXG57XHJcbiAgICB2YXIgYXR0cj0kKHRoaXMpLmF0dHIoJ2lkX3JlbCcpO1xyXG5cclxuXHJcbiAgICB2YXIgaWRfZG9tPSQoJ1tuYW1lPWRvbV0nKS52YWwoKTtcclxuXHJcbiAgICBDb29raWVMaXN0KHdpbmRvdy5iX2NtK1wiX1wiK2lkX2RvbSxhdHRyLCdkZWwnLCdzb3J0Jyk7XHJcbmFsZXJ0KHdpbmRvdy5iX2NtK1wiX1wiK2lkX2RvbSk7XHJcblxyXG4gICAgJCgnW2ludm9pY2VfbWF0ZXJpYWw9JythdHRyKyddJykucmVtb3ZlKCk7XHJcbiAgICAkKCdbaW52b2ljZXNfbWVzc2E9JythdHRyKyddJykubmV4dCgpLnJlbW92ZSgpO1xyXG4gICAgJCgnW2ludm9pY2VzX21lc3NhPScrYXR0cisnXScpLnJlbW92ZSgpO1xyXG5cclxuXHJcbiAgICBpdG9nX2ludm9pY2UoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGxfaW52b2ljZV9tYXRlcmlhbCgpXHJcbntcclxuICAgIHZhciBhdHRyPSQodGhpcykuYXR0cignaWRfcmVsJyk7XHJcbiAgICAkKCdbaW52b2ljZV9tYXRlcmlhbD0nK2F0dHIrJ10nKS5oaWRlKCk7XHJcbiAgICAkKCdbaW52b2ljZXNfbWVzc2E9JythdHRyKyddJykuaGlkZSgpO1xyXG5cclxuICAgIHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2F0dHI7XHJcbiAgICBBamF4Q2xpZW50KCdpbnZvaWNlcycsJ2RlbGxfbWF0ZXJpYWwnLCdHRVQnLGRhdGEsJ0FmdGVyRGVsbE1hdGVyaWFsSW52b2ljZScsYXR0ciwwKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpZXdfc3RvY2soKVxyXG57XHJcbi8vYWxlcnQoXCIhXCIpO1xyXG4gICAgdmFyIHRfc29mdD0kKCcuanMtdHlwZS1zdG9jay12aWV3MScpLnZhbCgpO1xyXG4gICAgaWYodF9zb2Z0PT0xKVxyXG4gICAge1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLWludm9pY2UtMScpLnNsaWRlRG93bihcInNsb3dcIik7IC8v0L/QvtC60LDQt9Cw0YLRjFxyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLWludm9pY2UtMCcpLnNsaWRlVXAoXCJzbG93XCIpOyAvL9GB0LrRgNGL0YLRjFxyXG4gICAgICAgICQoJy5ub19iaWxsX21hdGVyaWFsJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5zZWFyY2hfYmlsbCcpLmhpZGUoKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1pbnZvaWNlLTAnKS5zbGlkZURvd24oXCJzbG93XCIpO1xyXG4gICAgICAgICQoJy5qcy1vcHRpb25zLWludm9pY2UtMScpLnNsaWRlVXAoXCJzbG93XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL9C00L7QsdCw0LLQuNGC0Ywg0LzQsNGC0LXRgNC40LDQuyDQsiDQvdCw0LrQu9Cw0LTQvdC+0LlcclxuZnVuY3Rpb24gQWRkSW52b2ljZU1hdGVyaWFsKClcclxue1xyXG4gICAgaWYgKCAkKHRoaXMpLmlzKFwiW2Zvcl1cIikgKVxyXG4gICAge1xyXG4gICAgICAgIGlmKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImZvclwiKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX21hdGVyaWFsX2ludm9pY2VfMjAyMS5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJmb3JcIikrJyZjb2w9JyskKHRoaXMpLmF0dHIoXCJjb2xcIiksXHJcbiAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vL9GB0L7RhdGA0LDQvdC40YLRjCDQvdCw0LrQu9Cw0LTQvdGD0Y4g0L/QtdGA0LLRi9C5INGN0YLQsNC/XHJcbmZ1bmN0aW9uIHNhdmVfaW52b2ljZXNzKClcclxue1xyXG4gICAgLy9hbGVydChcIiFcIik7XHJcbiAgICB2YXIgZXJyID0gMDtcclxuICAgICQoJy5qcy1zYXZlLWZvcm0taW52b2ljZXMnKS5maW5kKCcuZ2xvYWInKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgIGlmKCgkKHRoaXMpLnZhbCgpID09ICcnKXx8KCQodGhpcykudmFsKCkgPT0gJzAnKSkgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuICAgICAgICAgICAgZXJyKys7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgIH0gZWxzZSB7JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTt9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgbmV3X2Zpcm1fZm5zPSQoJy5qcy1zYXZlLWZvcm0taW52b2ljZXMnKS5maW5kKCcuanMtdHlwZS1zb2Z0LXZpZXcxJykudmFsKCk7XHJcbiAgICBpZihuZXdfZmlybV9mbnM9PTApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLmpzLXNhdmUtZm9ybS1pbnZvaWNlcycpLmZpbmQoJy5nbG9hYjInKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgICAgICBpZigoJCh0aGlzKS52YWwoKSA9PSAnJyl8fCgkKHRoaXMpLnZhbCgpID09ICcwJykpIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICAgICAgZXJyKys7XHJcbiAgICAgICAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuYXR0cignbmFtZScpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO31cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy5qcy1zYXZlLWZvcm0taW52b2ljZXMnKS5maW5kKCcuZ2xvYWIxJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICAgICAgaWYoKCQodGhpcykudmFsKCkgPT0gJycpfHwoJCh0aGlzKS52YWwoKSA9PSAnMCcpKSB7ICQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuICAgICAgICAgICAgICAgIGVycisrO1xyXG4gICAgICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTt9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZXJyPT0wKSB7XHJcblxyXG4gICAgICAgICQoJy5qcy1zYXZlLWZvcm0taW52b2ljZXMnKS5zdWJtaXQoKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9Cd0LUg0LLRgdC1INC/0L7Qu9GPINC30LDQv9C+0LvQvdC10L3RiycpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59IiwiJChmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXN0YXR1cy0xYy1tYXQnLFN0YXR1c01DKTtcclxuXHJcbiAgIC8vICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcubWlsZC0xYycsQ2xpY2tQb3NhKTtcclxuICAgLy8gJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5taWxkLTFjJyxDaGVja2JveEdyb3VwKTtcclxuICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1tYXRpYy1rbycsbWlsZF9tYXRpYyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1hY2Mta28nLGFjY19tYXRpYyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy0xYy1tYXRpYycsdmlld19tYXRpYyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1yb3V0LXVuaXQnLHJvdXRfbWF0aWMpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWxvYWQtY2xpY2stMWMnLGFjY18xY19tYXRpYyk7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtaS1yZW1vdmUtbWV0YScscmVtb3ZlX21ldGEpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtYWRkX2ludm9pY2VzczExMicsYWRkX21ldGFfbW0pO1xyXG5cclxuXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gYWRkX21ldGFfbW0oKVxyXG57XHJcbiAgICAkKCcjbGFsYWxhX2FkZF9mb3JtJykuc3VibWl0KCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiByZW1vdmVfbWV0YSgpXHJcbntcclxuICAgIHZhciBib3ggPSAkKCcuYm94LW1vZGFsOmxhc3QnKTtcclxuXHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5tZXRhX3VuaXRzXzFjJykucmVtb3ZlKCk7XHJcbiAgICBib3guZmluZCgnLmpzLWZvcm0yJykuYXR0cignY29yJywnJyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBsb2FkX2Jhc2tldF8xYyhrZXl5KVxyXG57XHJcbiAgICB2YXIgYm94ID0gJCgnLmJveC1tb2RhbDpsYXN0Jyk7XHJcblxyXG4gICAgdmFyIGxpbmVfbWF0aT0kKCcubWF0ZXJpYWwtMWNbaWRfa2V5PScra2V5eSsnXScpO1xyXG5cclxuXHJcbnZhciBvZG5pPTA7XHJcblxyXG5cclxuICAgIGlmKGxpbmVfbWF0aS5maW5kKCdbbmFtZT1cIm1hdFtjb3JfdW5pdF1bXVwiXScpLnZhbCgpIT0nJykge1xyXG4gICAgICAgIHZhciBzc289Jyc7XHJcbiAgICAgICAgdmFyIG1hc3Nfc3NvPWxpbmVfbWF0aS5maW5kKCdbbmFtZT1cIm1hdFtjb3JfdW5pdF1bXVwiXScpLnZhbCgpLnNwbGl0KFwiO1wiKTtcclxuICAgICAgICB2YXIgc3NvPScxICcrbWFzc19zc29bMF0rJyA9ICcrbWFzc19zc29bMl0rJyAnK21hc3Nfc3NvWzFdO1xyXG4gICAgICAgIC8v0LLRi9Cy0L7QtNC40Lwg0Lgg0YHQvtC+0YLQvdC+0YjQtdC90LjQtSDQtdC00LjQvdC40YYg0LrQvtGC0L7RgNGL0LUg0L7QvSDQstCx0LjQu1xyXG4gICAgICAgIGJveC5maW5kKCcudnNlZ28tMWMtemVybyBpJykuZW1wdHkoKS5hcHBlbmQoc3NvKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICBib3guZmluZCgnLnZzZWdvLTFjLXplcm8nKS5oaWRlKCk7XHJcbiAgICAgICAgb2RuaT0xO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjb3VudF9tbT1wYXJzZUZsb2F0KCQudHJpbShsaW5lX21hdGkuZmluZCgnLmpzLWNvbC0xYycpLnRleHQoKSkpO1xyXG4gICAgdmFyIGFsbF9tbT1jb3VudF9tbTtcclxuICAgIGNvdW50X21tPSQubnVtYmVyKGNvdW50X21tLnRvRml4ZWQoMyksIDMsICcuJywgJyAnKTtcclxuICAgIGNvdW50X21tID0gY291bnRfbW0ucmVwbGFjZSgvKFxcZCspKFsuLF0wKykvLCBcIiQxXCIpO1xyXG4gICAgYm94LmZpbmQoJy52c2Vnby0xYy1vbmUgaScpLmVtcHR5KCkuYXBwZW5kKGNvdW50X21tKTtcclxuICAgIGJveC5maW5kKCcudnNlZ28tMWMtb25lIHNwYW4nKS5lbXB0eSgpLmFwcGVuZCgnICcrbGluZV9tYXRpLmZpbmQoJy5qcy1lZC0xYycpLnRleHQoKSk7XHJcblxyXG4gICAgaWYob2RuaT09MSlcclxuICAgIHtcclxuICAgICAgICBib3guZmluZCgnLnZzZWdvLTFjLXR3byBpJykuZW1wdHkoKS5hcHBlbmQoY291bnRfbW0pO1xyXG4gICAgICAgIGJveC5maW5kKCcudnNlZ28tMWMtdHdvJykuYXR0cignYWxsJyxhbGxfbW0pO1xyXG5cclxuICAgICAgICBib3guZmluZCgnLnZzZWdvLTFjLXR3byBzcGFuJykuZW1wdHkoKS5hcHBlbmQoJyAnK2xpbmVfbWF0aS5maW5kKCcuanMtZWQtMWMnKS50ZXh0KCkpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy/Qv9C10YDQtdGB0YfQtdGCINGB0LrQvtC70YzQutC+INC90LXQvtCx0YXQvtC00LjQvNC+INCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgdC+0L7RgtCy0LXRgtGB0YLQstC40Y8g0LXQtNC40L3QuNGGXHJcbiAgICAgICAgaWYobWFzc19zc29bMF0udG9Mb3dlckNhc2UoKT09bGluZV9tYXRpLmZpbmQoJy5qcy1lZC0xYycpLnRleHQoKS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50X3R5cGU9KHBhcnNlRmxvYXQoJC50cmltKG1hc3Nfc3NvWzJdKSkqY291bnRfbW0pO1xyXG4gICAgICAgICAgICB2YXIgYWxsX21tPWNvdW50X3R5cGU7XHJcbiAgICAgICAgICAgIGNvdW50X3R5cGU9JC5udW1iZXIoY291bnRfdHlwZS50b0ZpeGVkKDMpLCAzLCAnLicsICcgJyk7XHJcbiAgICAgICAgICAgIGNvdW50X3R5cGUgPSBjb3VudF90eXBlLnJlcGxhY2UoL1ssLl0/MCskLywgJycpO1xyXG4gICAgICAgICAgICBib3guZmluZCgnLnZzZWdvLTFjLXR3byBpJykuZW1wdHkoKS5hcHBlbmQoY291bnRfdHlwZSk7XHJcbiAgICAgICAgICAgIGJveC5maW5kKCcudnNlZ28tMWMtdHdvJykuYXR0cignYWxsJyxhbGxfbW0pO1xyXG4gICAgICAgICAgICBib3guZmluZCgnLnZzZWdvLTFjLXR3byBzcGFuJykuZW1wdHkoKS5hcHBlbmQoJyAnK21hc3Nfc3NvWzFdKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291bnRfdHlwZT0oY291bnRfbW0vcGFyc2VGbG9hdCgkLnRyaW0obWFzc19zc29bMl0pKSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY291bnRfdHlwZSk7XHJcbiAgICAgICAgICAgIHZhciBhbGxfbW09Y291bnRfdHlwZTtcclxuICAgICAgICAgICAgY291bnRfdHlwZT0kLm51bWJlcihjb3VudF90eXBlLnRvRml4ZWQoNCksIDQsICcuJywgJyAnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjb3VudF90eXBlKTtcclxuICAgICAgICAgICAgY291bnRfdHlwZSA9IGNvdW50X3R5cGUucmVwbGFjZSgvWywuXT8wKyQvLCAnJyk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY291bnRfdHlwZSk7XHJcbiAgICAgICAgICAgIGJveC5maW5kKCcudnNlZ28tMWMtdHdvIGknKS5lbXB0eSgpLmFwcGVuZChjb3VudF90eXBlKTtcclxuICAgICAgICAgICAgYm94LmZpbmQoJy52c2Vnby0xYy10d28nKS5hdHRyKCdhbGwnLGFsbF9tbSk7XHJcbiAgICAgICAgICAgIGJveC5maW5kKCcudnNlZ28tMWMtdHdvIHNwYW4nKS5lbXB0eSgpLmFwcGVuZCgnICcrbWFzc19zc29bMF0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8v0LLQtNGA0YPQsyDQtNC+INGN0YLQvtCz0L4g0L7QvSDRh9GC0L4g0YLQviDRg9C20LUg0LLRi9Cx0LjRgNCw0LtcclxuICAgIC8v0YHQtNC10LvQsNC10Lwg0Y3QvNGD0LvRj9GG0LjRjiDQvdCw0LbQsNGC0LjQuSDQtdCz0L4g0LTQvlxyXG4gICAgdmFyIHVvcD1saW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbYWNjXVtdXCJdJykudmFsKCk7XHJcblxyXG4gICAgaWYodW9wIT0nJykge1xyXG5cclxuICAgICAgICB2YXIgY29yX21hc3MgPSB1b3Auc3BsaXQoJywnKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBjb3JfbWFzcy5sZW5ndGg7IHQrKykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKClcclxuICAgICAgICAgICAgJCgnLm1hdGVyaWFsLTFjLXZpYm9yW2lkX2tleT0nK2Nvcl9tYXNzW3RdKyddJykuZmluZCgnLmpzLWFjYy1rbycpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYW5pbWF0aW9uX3RlcHNfMWMoKVxyXG57XHJcbiAgICAkKCcudGVwc18xYycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgJCh0aGlzKS5hbmltYXRlKHt3aWR0aDogJCh0aGlzKS5hdHRyKCdyZWxfdycpK1wiJVwifSwgMTAwMCwgZnVuY3Rpb24oKSB7ICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY2NfMWNfbWF0aWMoKVxyXG57XHJcbiAgICB2YXIgaWRfc3RvY2s9JCh0aGlzKS5wYXJlbnRzKCcubWF0ZXJpYWwtMWMnKS5maW5kKCdbbmFtZT1cIm1hdFtpZF9zdG9ja11bXVwiXScpLnZhbCgpO1xyXG4gICAgdmFyIGNvbnQ9JCgnLmNhLTFjJykudmFsKCk7XHJcbiAgICB2YXIga2V5eT0kKHRoaXMpLnBhcmVudHMoJy5tYXRlcmlhbC0xYycpLmF0dHIoJ2lkX2tleScpO1xyXG5cclxuICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FjY19pbnZvaWNlXzFjLnBocD9pZF9zdG9jaz0nK2lkX3N0b2NrKycmY29udD0nK2NvbnQrJyZrZXk9JytrZXl5LFxyXG4gICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJvdXRfbWF0aWMoKVxyXG57XHJcbiAgICB2YXIgYm94ID0gJCgnLmJveC1tb2RhbDpsYXN0Jyk7XHJcbiAgICB2YXIgbGFiZWw9Ym94LmZpbmQoJy5zZWFyY2hfYmlsbF9lZF8zNCBsYWJlbCBpJyk7XHJcbnZhciBwb2xsPWxhYmVsLmZpcnN0KCkudGV4dCgpO1xyXG4gICAgbGFiZWwuZmlyc3QoKS5lbXB0eSgpLmFwcGVuZChsYWJlbC5sYXN0KCkudGV4dCgpKTtcclxuICAgIGxhYmVsLmxhc3QoKS5lbXB0eSgpLmFwcGVuZChwb2xsKTtcclxufVxyXG5cclxuXHJcbi8v0YHQvtGF0YDQsNC90LjRgtGMINGH0YLQviDQstGL0LHRgNCw0LvQuFxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24ganNfZWRpdF9tYXRpY19tYXRfc3RvY2soKVxyXG57XHJcblxyXG4gICAgdmFyIGJveCA9ICQoJy5ib3gtbW9kYWw6bGFzdCcpO1xyXG4gICAgdmFyIGJveF9hY3RpdmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5ib3gtbW9kYWwnKTtcclxuICAgIHZhciBlcnIgPSAwO1xyXG5cclxudmFyIGlkX3N0b2NrPTA7XHJcbnZhciBuZXdfc3RvY2s9MDtcclxudmFyIHVuaXRfc3RvY2s9Jyc7XHJcbnZhciB1c2Q9W107XHJcbiAgICB1c2RbJ25ldyddPTA7XHJcbiAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1lZGl0LW1hdGljLWJsb2NrLXgnKS5oaWRlKCkuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyB3aWR0aDogNDBweDtwYWRkaW5nLXRvcDogMTdweDt0b3A6IGF1dG87cmlnaHQ6IGF1dG87bGVmdDogYXV0bzsgZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG5cclxuICAgIGlmKGJveF9hY3RpdmUuZmluZCgnLm1hdGljLW9wJykudmFsKCk9PTEpXHJcbiAgICB7XHJcblxyXG4gICAgICAgIC8v0L3QvtCy0YvQuS4g0YLQvtCz0LTQsCDQv9GA0L7RgdGC0L4g0L3QuNGH0LXQs9C+INCx0L7Qu9GM0YjQtSDQvdC1INC00LXQu9Cw0LXQvFxyXG4gICAgICAgIG5ld19zdG9jaz0xO1xyXG4gICAgICAgIHVzZFsnbmV3J109MTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIC8v0LjRidC10Lwg0LrQsNC60L7QuSBpZF9zdG9jayDQvtC9INCy0YvQsdGA0LDQuyDQuCDQstGL0LHRgNCw0Lsg0LvQuCDQstC+0L7QsdGI0LVcclxuICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1tYXRpYy1rbycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICBpZigkKHRoaXMpLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgpPT0xKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWRfc3RvY2s9JCh0aGlzKS5maW5kKCdpbnB1dCcpLmZpcnN0KCkudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB1bml0X3N0b2NrPSQodGhpcykuZmluZCgnaW5wdXQnKS5lcSgxKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHVzZFsnaWRfc3RvY2snXT1pZF9zdG9jaztcclxuICAgICAgICAgICAgICAgIHVzZFsndW5pdHMnXT11bml0X3N0b2NrO1xyXG4gICAgICAgICAgICAgICAgdXNkWyduYW1lJ109JCh0aGlzKS5wYXJlbnRzKCcubWF0ZXJpYWwtMWMtdmlib3InKS5maW5kKCcubm0nKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB1c2RbJ2NvciddPWJveF9hY3RpdmUuZmluZCgnLmpzLWZvcm0tc2F2ZS0xYycpLmF0dHIoJ2NvcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKG5ld19zdG9jaz09MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0YHQvNC+0YLRgNC40Lwg0LLRi9Cx0YDQsNC7INC70Lgg0L7QvSDQstC+0L7QsdGJ0LVcclxuICAgICAgICAgICAgaWYoYm94X2FjdGl2ZS5maW5kKCcuanMtaGlkZGVuLXNlYXJjaCcpLnZhbCgpIT0nJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWRfc3RvY2s9Ym94X2FjdGl2ZS5maW5kKCcuanMtaGlkZGVuLXNlYXJjaCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdW5pdF9zdG9jaz1ib3hfYWN0aXZlLmZpbmQoJy5qcy1oaWRkZW4tdW5pdCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdXNkWydpZF9zdG9jayddPWlkX3N0b2NrO1xyXG4gICAgICAgICAgICAgICAgdXNkWyd1bml0cyddPXVuaXRfc3RvY2s7XHJcbiAgICAgICAgICAgICAgICB1c2RbJ2NvciddPWJveF9hY3RpdmUuZmluZCgnLmpzLWZvcm0tc2F2ZS0xYycpLmF0dHIoJ2NvcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIHVzZFsnbmFtZSddPWJveF9hY3RpdmUuZmluZCgnLmpzLWhpZGRlbi1uYW1lLW0nKS52YWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKChuZXdfc3RvY2s9PTApJiYoaWRfc3RvY2s9PTApKVxyXG4gICAge1xyXG4gICAgICAgIGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0JLRi9Cx0LXRgNC40YLQtSDRgdC+0L7RgtCy0LXRgtGB0YLQstC40LUg0LjQu9C4INC+0YLQvNC10YLRjNGC0LUg0LrQsNC6INC90L7QstGL0LknKTtcclxuICAgICAgICBib3guZmluZCgnLmpzLWVkaXQtbWF0aWMtYmxvY2steCcpLnNob3coKTtcclxuICAgICAgICBib3guZmluZCgnLmJfbG9hZGluZ19zbWFsbCcpLnJlbW92ZSgpO1xyXG5cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIC8v0YHQvNC+0YLRgNC40Lwg0YHQvtC+0YLQstC10YLRgdGC0LLQuNC1INGC0LjQv9C+0LIg0LXRgdC70Lgg0L3QtSDQvdC+0LLRi9C5INC40LvQuCDQv9GA0L7RgdGC0L4g0LfQsNC60YDRi9Cy0LDQtdC8INC+0LrQvdC+INGBINGB0L7RhdGA0LDQvdC10L3QuNC10Lwg0YfRgtC+INCy0YvQsdGA0LDQu1xyXG4gICAgICAgIGlmKG5ld19zdG9jaz09MClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICB1bml0X3N0b2NrPXVuaXRfc3RvY2sudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgdW5pdF9pbnZvaWNlPSQoJy51bml0LW9wYScpLnRleHQoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvcnI9Ym94X2FjdGl2ZS5maW5kKCcuanMtZm9ybS1zYXZlLTFjJykuYXR0cignY29yJyk7XHJcblxyXG4gICAgICAgICAgICBpZigodW5pdF9zdG9jaz09dW5pdF9pbnZvaWNlKXx8KGNvcnIhPScnKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy/RgtC40L/RiyDQvtC00LjQvdCw0LrQvtCy0YvQtSDQv9GA0L7RgdGC0L4g0YHQvtGF0YDQsNC90Y/QtdC8INGH0YLQviDQstGL0LHRgNCw0Lsg0Lgg0LLRgdC1XHJcbiAgICAgICAgICAgICAgICBhbGVydF9tZXNzYWdlKCdvaycsJ9Ch0L7RhdGA0LDQvdC10L3QvicpO1xyXG4gICAgICAgICAgICAgICAgdXNkWydjb3InXT1ib3hfYWN0aXZlLmZpbmQoJy5qcy1mb3JtLXNhdmUtMWMnKS5hdHRyKCdjb3InKTtcclxuICAgICAgICAgICAgICAgIHNhdmVTdG9jazFjKCQodGhpcyksdXNkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgYm94LmZpbmQoJy5hcmN0aWNtb2RhbC1jbG9zZScpLmNsaWNrKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJveC5maW5kKCcuanMtZWRpdC1tYXRpYy1ibG9jay14Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgYm94LmZpbmQoJy5iX2xvYWRpbmdfc21hbGwnKS5yZW1vdmUoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHVuaXQxID0gdW5pdF9zdG9jaztcclxuICAgICAgICAgICAgICAgIHZhciB1bml0Mj11bml0X2ludm9pY2U7XHJcbiAgICAgICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV91bml0c19pbnZvaWNlLnBocD91PScrdW5pdDErJyZ1MT0nK3VuaXQyLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIC8v0YLQuNC/0Ysg0L7QtNC40L3QsNC60L7QstGL0LUg0L/RgNC+0YHRgtC+INGB0L7RhdGA0LDQvdGP0LXQvCDRh9GC0L4g0LLRi9Cx0YDQsNC7INC4INCy0YHQtVxyXG4gICAgICAgICAgICBhbGVydF9tZXNzYWdlKCdvaycsJ9Ch0L7RhdGA0LDQvdC10L3QvicpO1xyXG4gICAgICAgICAgICBzYXZlU3RvY2sxYygkKHRoaXMpLHVzZCk7XHJcblxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICBib3guZmluZCgnLmFyY3RpY21vZGFsLWNsb3NlJykuY2xpY2soKTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24ganNfZWRpdF9tYXRpY19tYXRfc3RvY2tfYWNjKClcclxue1xyXG5cclxuICAgIHZhciBib3ggPSAkKCcuYm94LW1vZGFsOmxhc3QnKTtcclxuICAgIHZhciBib3hfYWN0aXZlID0gJCh0aGlzKS5jbG9zZXN0KCcuYm94LW1vZGFsJyk7XHJcbiAgICB2YXIgZXJyID0gMDtcclxuXHJcbiAgICB2YXIgYWNjPWJveF9hY3RpdmUuZmluZCgnLmpzLWZvcm0yJykuYXR0cignYWNjJyk7XHJcbiAgICB2YXIgaWRfa2V5PWJveF9hY3RpdmUuZmluZCgnLmpzLWZvcm0yJykuYXR0cigna2V5c3MnKTtcclxuICAgIC8vaWYoYWNjIT0nJylcclxuICAgLy8ge1xyXG5cclxuICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1lZGl0LW1hdGljLWJsb2NrLXh4eCcpLmhpZGUoKS5hZnRlcignPGRpdiBjbGFzcz1cImJfbG9hZGluZ19zbWFsbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IHdpZHRoOiA0MHB4O3BhZGRpbmctdG9wOiAxN3B4O3RvcDogYXV0bztyaWdodDogYXV0bztsZWZ0OiBhdXRvOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbCBiX2xvYWRpbmdfY2lyY2xlX2RlbGF5ZWRfc21hbGxcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnb2snLCfQodC+0YXRgNCw0L3QtdC90L4nKTtcclxuICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgIGJveC5maW5kKCcuYXJjdGljbW9kYWwtY2xvc2UnKS5jbGljaygpO1xyXG5cclxuICAgICAgICAkKCcubWF0ZXJpYWwtMWNbaWRfa2V5PScraWRfa2V5KyddJykuZmluZCgnW25hbWU9XCJtYXRbYWNjXVtdXCJdJykudmFsKGFjYyk7XHJcblxyXG4gICAgICAgIGlmKGFjYyE9JycpIHtcclxuXHJcbiAgICAgICAgICAgICQoJy5tYXRlcmlhbC0xY1tpZF9rZXk9JyArIGlkX2tleSArICddJykuZmluZCgnLmpzLWxvYWQtY2xpY2stMWMnKS5hZGRDbGFzcygnZ3JlZW5fMWMnKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoJy5tYXRlcmlhbC0xY1tpZF9rZXk9JyArIGlkX2tleSArICddJykuZmluZCgnLmpzLWxvYWQtY2xpY2stMWMnKS5yZW1vdmVDbGFzcygnZ3JlZW5fMWMnKTtcclxuICAgICAgICB9XHJcbi8qXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICBhbGVydF9tZXNzYWdlKCdlcnJvcicsJ9CS0YvQsdC10YDQuNGC0LUg0L3QtdC+0LHRhdC+0LTQuNC80YvQtSDQv9C+0LfQuNGG0LjQuCDQsiDRgdGH0LXRgtCw0YUnKTtcclxuICAgICAgICBib3guZmluZCgnLmpzLWVkaXQtbWF0aWMtYmxvY2steHh4Jykuc2hvdygpO1xyXG4gICAgICAgIGJveC5maW5kKCcuYl9sb2FkaW5nX3NtYWxsJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiovXHJcblxyXG5cclxuXHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24ganNfZWRpdF9tYXRpY19tYXRfc3RvY2tfZWQoKVxyXG57XHJcblxyXG4gICAgdmFyIGJveCA9ICQoJy5ib3gtbW9kYWw6bGFzdCcpO1xyXG4gICAgdmFyIGJveF9hY3RpdmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5ib3gtbW9kYWwnKTtcclxuICAgIHZhciBlcnJvciA9IDA7XHJcblxyXG5cclxuXHJcbiAgICBib3guZmluZCgnLmdsb2FiJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICBpZigkKHRoaXMpLnZhbCgpID09ICcnKSAgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuICAgICAgICAgICAgZXJyb3IrKztcclxuICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMTgnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpO31cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBpZihlcnJvciE9MClcclxuICAgIHtcclxuXHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQndC1INCy0YHQtSDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90YsnKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICB2YXIgbGFiZWw9Ym94LmZpbmQoJy5zZWFyY2hfYmlsbF9lZF8zNCBsYWJlbCBpJyk7XHJcbiAgICAgICAgdmFyIGNvcl9uZXc9Jyc7XHJcblxyXG4gICAgICAgIGJveC5maW5kKCcuaW5wdXRfMjAyMScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbmlmKGNvcl9uZXc9PScnKVxyXG57XHJcbiAgICBjb3JfbmV3PScnKyQodGhpcykuZmluZCgnbGFiZWwgaScpLnRleHQoKTtcclxufSBlbHNlXHJcbntcclxuICAgIGNvcl9uZXc9Y29yX25ldysnOycrJCh0aGlzKS5maW5kKCdsYWJlbCBpJykudGV4dCgpKyc7JyskKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbn1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9hbGVydChjb3JfbmV3KTtcclxuXHJcblxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgYm94LmZpbmQoJy5hcmN0aWNtb2RhbC1jbG9zZScpLmNsaWNrKCk7XHJcbiAgICAgICAgdmFyIGJveCA9ICQoJy5ib3gtbW9kYWw6bGFzdCcpO1xyXG5cclxuICAgICAgICBib3guZmluZCgnLmpzLWZvcm0tc2F2ZS0xYycpLmF0dHIoJ2NvcicsY29yX25ldyk7XHJcbiAgICAgICAgYm94LmZpbmQoJy5qcy1lZGl0LW1hdGljLWJsb2NrLXgnKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cclxuICAgICAgICAvL9C30LDQutGA0YvQstCw0LXQvCDRhNC+0YDQvNGDXHJcbiAgICAgICAgLy/Qt9Cw0LrRgNGL0LLQsNC10Lwg0Lgg0LLRgtC+0YDRg9GOINGE0L7RgNC80YMg0L3QviDRgdC+0YXRgNCw0L3Rj9C10Lwg0YHQvtC+0YLQvdC+0YjQtdC90LjQtVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQuNGC0Ywg0LjQt9C80LXQvdC10L3QuNGPINC/0L4g0Y3RgtC+0LzRgyDQvNCw0YLQtdGA0LjQsNC70YMg0LrQvtGC0L7RgNGL0LUg0LHRi9C70Lgg0LLRi9Cx0YDQsNC90Ysg0LTQviDRjdGC0L7Qs9C+XHJcbmZ1bmN0aW9uIExvYWRTYXZlMWMoa2V5eSlcclxue1xyXG4gICAgLy9hbGVydChrZXl5KTtcclxuICAgIHZhciBib3hfYWN0aXZlID0gJCgnLmJveC1tb2RhbDpsYXN0Jyk7XHJcbiAgICB2YXIgbGluZV9tYXRpPSQoJy5tYXRlcmlhbC0xY1tpZF9rZXk9JytrZXl5KyddJyk7XHJcbiAgICB2YXIgZGFsPTA7XHJcbiAgICBpZihsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbZWRpdF1bXVwiXScpLnZhbCgpPT0xKVxyXG4gICAge1xyXG4gICAgICAgIC8v0LHRi9C70Lgg0LrQsNC60LjQtSDRgtC+INC30LDQv9C+0LvQvdC10L3QuNGPXHJcbiAgICAgICAgLy/QsNCy0YLQvtC30LDQv9C+0LvQvdGP0LXQvCDQuNGFXHJcblxyXG4gICAgICAgIGlmKCQoJy5qcy1tYXRpYy1rbycpLmxlbmd0aCE9MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0LLQvtC30LzQvtC20L3QviDRh9GC0L4t0YLQviDQstGL0LHRgNCw0L3QviDQuNC3INC/0YDQtdC00LvQvtC20LXQvdC90YvRhVxyXG4gICAgICAgICAgICAkKCcuanMtbWF0aWMta28nKS5maW5kKCdpbnB1dFtuYW1lPVwicHJvW3R5cGVdW11cIl0nKS52YWwoKVxyXG4gICAgICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1tYXRpYy1rbycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPVwicHJvW3R5cGVdW11cIl0nKS52YWwoKT09bGluZV9tYXRpLmZpbmQoJ1tuYW1lPVwibWF0W2lkX3N0b2NrXVtdXCJdJykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICBkYWw9MTtcclxuXHJcbmlmKGxpbmVfbWF0aS5maW5kKCdbbmFtZT1cIm1hdFtjb3JfdW5pdF1bXVwiXScpLnZhbCgpIT0nJykge1xyXG4gICAgdmFyIHNzbz0nJztcclxuICAgIHZhciBtYXNzX3Nzbz1saW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbY29yX3VuaXRdW11cIl0nKS52YWwoKS5zcGxpdChcIjtcIik7XHJcbiAgICB2YXIgc3NvPScxICcrbWFzc19zc29bMF0rJyA9ICcrbWFzc19zc29bMl0rJyAnK21hc3Nfc3NvWzFdO1xyXG4gICAgLy/QstGL0LLQvtC00LjQvCDQuCDRgdC+0L7RgtC90L7RiNC10L3QuNC1INC10LTQuNC90LjRhiDQutC+0YLQvtGA0YvQtSDQvtC9INCy0LHQuNC7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5tYXRlcmlhbC0xYy12aWJvcicpLmZpbmQoJy5ubScpLmFmdGVyKCc8c3BhbiBjbGFzcz1cIm1ldGFfdW5pdHNfMWNcIj4nICsgc3NvICsgJzxpIGNsYXNzPVwianMtaS1yZW1vdmUtbWV0YSBjbG9zYS1tZXRhXCI+PC9pPjwvc3Bhbj4nKTtcclxuXHJcblxyXG4gICAgYm94X2FjdGl2ZS5maW5kKCcuanMtZm9ybS1zYXZlLTFjJykuYXR0cignY29yJyxsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbY29yX3VuaXRdW11cIl0nKS52YWwoKSk7XHJcbn1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYWw9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbbmV3XVtdXCJdJykudmFsKCk9PTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8v0L7RgtC80LXRh9Cw0LXQvCDQutCw0Log0L3QvtCy0YvQuVxyXG4gICAgICAgICAgICAgICAgYm94X2FjdGl2ZS5maW5kKCcuanMtMWMtbWF0aWNbaWQ9MV0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy/QsdGL0LvQviDRh9GC0L4t0YLQviDQstGL0LHRgNCw0L3QviDQsiDQv9C+0LjRgdC60LUg0LzQsNGC0LXRgNC40LDQu9C+0LIg0L3QsCDRgdC60LvQsNC00LVcclxuICAgICAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLTFjLW1hdGljW2lkPTBdJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLW1hdC1pbnYtcG9zdGExMCcpLnZhbChsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbaWRfc3RvY2tdW11cIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1oaWRkZW4tdW5pdCcpLnZhbChsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbdW5pdF1bXVwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLWhpZGRlbi1uYW1lLW0nKS52YWwobGluZV9tYXRpLmZpbmQoJy5zdG9ja19uYW1lX21hdCcpLnRleHQoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYm94X2FjdGl2ZS5maW5kKCcuanMta2V5dXAtc2VhcmNoJykudmFsKGxpbmVfbWF0aS5maW5kKCcuc3RvY2tfbmFtZV9tYXQnKS50ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgLy/QstC+0LfQvNC+0LbQvdC+INC/0L7QutCw0LfRi9Cy0LDRgtGMINC10YnQtSDRgdC+0L7RgtC90L7RiNC10L3QuNGPINC10LTQuNC90LjRhiDQtdGB0LvQuCDQvtC90Lgg0YDQsNC30L3Ri9C1XHJcbiAgICAgICAgICAgICAgICBpZihsaW5lX21hdGkuZmluZCgnW25hbWU9XCJtYXRbY29yX3VuaXRdW11cIl0nKS52YWwoKSE9MClcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzYXZlU3RvY2sxYyh0aGlzcyx1c2QpXHJcbntcclxuICAgIHZhciBrZXlzcz0kKCcuanMtZm9ybS1zYXZlLTFjJykuYXR0cigna2V5c3MnKTtcclxuICAgIHZhciBsaW5lX21hdF9jPSQoJy5tYXRlcmlhbC0xY1tpZF9rZXk9JytrZXlzcysnXScpO1xyXG5cclxuICAgIGxpbmVfbWF0X2MuZmluZCgnW25hbWU9XCJtYXRbZWRpdF1bXVwiXScpLnZhbCgxKTtcclxuICAgIGxpbmVfbWF0X2MuZmluZCgnW25hbWU9XCJtYXRbbmV3XVtdXCJdJykudmFsKHVzZFtcIm5ld1wiXSk7XHJcbiAgICBsaW5lX21hdF9jLmZpbmQoJ1tuYW1lPVwibWF0W2lkX3N0b2NrXVtdXCJdJykudmFsKHVzZFtcImlkX3N0b2NrXCJdKTtcclxuICAgIGxpbmVfbWF0X2MuZmluZCgnW25hbWU9XCJtYXRbdW5pdF1bXVwiXScpLnZhbCh1c2RbXCJ1bml0c1wiXSk7XHJcbiAgICBsaW5lX21hdF9jLmZpbmQoJ1tuYW1lPVwibWF0W2Nvcl91bml0XVtdXCJdJykudmFsKHVzZFtcImNvclwiXSk7XHJcblxyXG4gICAgLy/RgdC+0L7RgtC90L7RiNC10L3QuNC1INC10LTQuNC90LjRhiDQtdGB0LvQuCDRgNCw0LfQvdGL0LUg0LjQu9C4INGA0LDQstC90L4gMFxyXG4gICAgLy9saW5lX21hdF9jLmZpbmQoJ1tuYW1lPVwibWF0W2Nvcl91bml0XVwiXScpLnZhbCgwKTtcclxuaWYodXNkW1wibmV3XCJdPT0xKVxyXG57XHJcbiAgICBsaW5lX21hdF9jLmZpbmQoJy5qcy1zdGF0dXMtMWMtbWF0JykuYWZ0ZXIoJzxzcGFuIGlkX3N0YXR1cz1cIicgKyBrZXlzcyArICdcIiBkYXRhLXRvb2x0aXA9XCLQndC+0LLQsNGPINC/0L7Qt9C40YbQuNGPINC90LAg0YHQutC70LDQtNC1XCIgY2xhc3M9XCJzdG9ja19uYW1lX21hdCBqcy1zdGF0dXMtMWMtbWF0XCI+0J3QvtCy0LDRjyDQv9C+0LfQuNGG0LjRjyDQvdCwINGB0LrQu9Cw0LTQtTwvc3Bhbj4nKS5yZW1vdmUoKTtcclxufSBlbHNlIHtcclxuICAgIGxpbmVfbWF0X2MuZmluZCgnLmpzLXN0YXR1cy0xYy1tYXQnKS5hZnRlcignPHNwYW4gaWRfc3RhdHVzPVwiJyArIGtleXNzICsgJ1wiIGRhdGEtdG9vbHRpcD1cItC90LDQt9Cy0LDQvdC40LUg0YLQvtCy0LDRgNCwINC90LAg0YHQutC70LDQtNC1XCIgY2xhc3M9XCJzdG9ja19uYW1lX21hdCBqcy1zdGF0dXMtMWMtbWF0XCI+JyArIHVzZFtcIm5hbWVcIl0gKyAnPC9zcGFuPicpLnJlbW92ZSgpO1xyXG59XHJcblxyXG4gIC8v0L/QvtC40YHQuiDRgdGH0LXRgtC+0LIg0L/QviDQsdCw0LfQtVxyXG4gICAgU2VhcmNoQmlsbDFjKCBrZXlzcyx1c2QpO1xyXG5cclxuICAgIFRvb2xUaXAoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU2VhcmNoQmlsbDFjKCBrZXlzcyx1c2QpXHJcbntcclxuICAgIHZhciBpZF9maWxlPSQoJy5pZC1maWxlJykudmFsKCk7XHJcbiAgICAkKCcubWF0ZXJpYWwtMWNbaWRfa2V5PScra2V5c3MrJ10nKS5maW5kKCcuanMtbG9hZC1jbGljay0xYycpLmhpZGUoKTtcclxuXHJcbiAgICB2YXIgZGF0YSA9ICd1cmw9JyArIHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgJyZpZF9zdG9jaz0nICsgdXNkW1wiaWRfc3RvY2tcIl0gK1xyXG4gICAgICAgICcmZmlsZT0nICsgaWRfZmlsZSsnJmtleT0nKyBrZXlzcztcclxuICAgIC8vYWxlcnQoZGF0YSk7XHJcbiAgICBBamF4Q2xpZW50KCdpbnZvaWNlcycsJ3NlYXJjaF9iaWxsXzFjJywnR0VUJyxkYXRhLCdBZnRlclNlYXJjaEJpbGwxYycsa2V5c3MsMCwxKTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuLy/Qv9C+0YHRgtGE0YPQvdC60YbQuNGPINCy0LrQu9Cw0LTQutC4INCyINC+0LHRgNCw0YnQtdC90LjRj9GFXHJcbmZ1bmN0aW9uIEFmdGVyU2VhcmNoQmlsbDFjKGRhdGEsdXBkYXRlKSB7XHJcblxyXG4gICAgaWYgKGRhdGEuc3RhdHVzID09ICdyZWcnKSB7XHJcbiAgICAgICAgV2luZG93TG9naW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5zdGF0dXMgPT0gJ29rJykge1xyXG5cclxuICAgICAgICAkKCcubWF0ZXJpYWwtMWNbaWRfa2V5PScrdXBkYXRlKyddJykuZmluZCgnLmpzLWxvYWQtY2xpY2stMWMnKS5zaG93KCk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYgKGRhdGEuc3RhdHVzID09ICdubycpIHtcclxuXHJcbiAgICAgICAgJCgnLm1hdGVyaWFsLTFjW2lkX2tleT0nK3VwZGF0ZSsnXScpLmZpbmQoJy5qcy1sb2FkLWNsaWNrLTFjJykuaGlkZSgpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWNjX21hdGljKCkge1xyXG5cclxuICAgIGlmKCEkKHRoaXMpLmlzKCcubm9fYWN0aXZlX2NoZWNrJykpIHtcclxuICAgICAgICB2YXIgcGVyX2FjYyA9ICcnO1xyXG5cclxuICAgICAgICB2YXIgYm94X2FjdGl2ZSA9ICQoJy5ib3gtbW9kYWw6bGFzdCcpO1xyXG4gICAgICAgIHZhciBjb3JfYWNjID0gYm94X2FjdGl2ZS5maW5kKCcuanMtZm9ybTInKS5hdHRyKCdhY2MnKTtcclxuXHJcbiAgICAgICAgdmFyIGFsbF9tYXQgPSBib3hfYWN0aXZlLmZpbmQoJy52c2Vnby0xYy10d28nKS5hdHRyKCdhbGwnKTtcclxuICAgICAgICB2YXIgb3N0X21hdCA9IHBhcnNlRmxvYXQoYWxsX21hdCk7XHJcblxyXG4gICAgICAgIGlmIChjb3JfYWNjICE9ICcnKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3JfbWFzcyA9IGNvcl9hY2Muc3BsaXQoJywnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY29yX21hc3MgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoJCgnLmpzLWFjYy1rbycpLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgIC8v0LLQvtC30LzQvtC20L3QviDRh9GC0L4t0YLQviDQstGL0LHRgNCw0L3QviDQuNC3INC/0YDQtdC00LvQvtC20LXQvdC90YvRhVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBhY3RpdmUgPSAkKHRoaXMpLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgaWRfYWN0aXZlID0gJCh0aGlzKS5maW5kKCdpbnB1dCcpLmZpcnN0KCkudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAvL9GD0LHRgNCw0YLRjCDQuNC3INCy0YvQsdGA0LDQvdC90L7Qs9C+XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUgPT0gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGkgPSBjb3JfbWFzcy5pbmRleE9mKGlkX2FjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29yX21hc3Muc3BsaWNlKGksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL9GD0LTQsNC70Y/QtdC8INCy0YHQtSDQvdC10LDQutGC0LjQstC90YvQtSBjaGVrYyDRh9GC0L7QsdGLINC/0LXRgNC10YHRh9C40YLQsNGC0Ywg0LfQsNC90L7QstC+INCy0YHQtVxyXG4gICAgICAgICAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLWFjYy1rbycpLnJlbW92ZUNsYXNzKCdub19hY3RpdmVfY2hlY2snKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvcl9tYXNzLnB1c2goaWRfYWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKGNvcl9tYXNzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdfY29yX2FjYyA9IGNvcl9tYXNzLmpvaW4oJywnKTtcclxuXHJcbiAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLWZvcm0yJykuYXR0cignYWNjJywgbmV3X2Nvcl9hY2MpO1xyXG5cclxuLy9hbGVydChuZXdfY29yX2FjYyk7XHJcblxyXG4gICAgICAgICAgICAvLyAgY29uc29sZS5sb2cobmV3X2Nvcl9hY2MpO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgYm94X2FjdGl2ZS5maW5kKCcuanMtYWNjLWtvJykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudF90aGlzID0gJCh0aGlzKS5maW5kKCdpbnB1dCcpLmVxKDEpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiovXHJcbiAgICAgICAgICAgIC8v0LLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC60LDQuiDQsdGD0LTRgtC+INCy0YHQtSDQvdC1INCy0YvQsdGA0LDQvdC+XHJcbiAgICAgICAgICAgIC8vYm94X2FjdGl2ZS5maW5kKCcudGVwc18xYycpLmF0dHIoJ3JlbF93JywgYm94X2FjdGl2ZS5maW5kKCcudGVwc18xYycpLmF0dHIoJ3JlbF9hbGwnKSk7XHJcblxyXG4gICAgICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy50ZXBzXzFjJykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdyZWxfdycsICQodGhpcykuYXR0cigncmVsX2FsbCcpKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8v0LjQtNC10Lwg0L/QviDQvNCw0YHRgdC40LLRgyDQuCDQuNC30LzQtdC90Y/QtdC8INCy0YvQsdGA0LDQvdC90L7QtSDQuCDRgdC80L7RgtGA0LjQvCDRgdC60L7Qu9GM0LrQviDQvtGB0YLQsNC70L7RgdGMXHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGNvcl9tYXNzLmxlbmd0aDsgdCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVfbWkgPSAkKCcubWF0ZXJpYWwtMWMtdmlib3JbaWRfa2V5PVwiJyArIGNvcl9tYXNzW3RdICsgJ1wiXScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gcGFyc2VGbG9hdChsaW5lX21pLmZpbmQoJy5qcy1hY2Mta28gaW5wdXQnKS5lcSgxKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0LrQvtC70LjRh9C10YHRgtCy0L4g0LrQvtGC0L7RgNC+0LUg0L3QsNC00L4tJytjb3VudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPD0gb3N0X21hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVfbWkuZmluZCgnLnRlcHNfMWMnKS5hdHRyKCdyZWxfdycsICcxMDAnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/Qt9C90LDRh9C40YIg0Y3RgtC+0YIg0LzQsNGC0LXRgNC40LDQuyDQvdC1INC/0L7Qu9C90L7RgdGC0YzRjiDQv9GA0LjQtNC10YIg0L/QviDRjdGC0L7QuSDQvdCw0LrQu9Cw0LTQvdC+0LlcclxuICAgICAgICAgICAgICAgICAgICAvL9C90LDQtNC+INC/0L7QtNGB0YfQuNGC0LDRgtGMINGB0LrQvtC70YzQutC+INC/0YDQvtGG0LXQvdGC0L7QsiDQv9GA0LjQtNC10YJcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHkxID0gcGFyc2VGbG9hdChsaW5lX21pLmZpbmQoJy50ZXBzXzFjJykuYXR0cignYWxsX2FjYycpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHkyID0gcGFyc2VGbG9hdChsaW5lX21pLmZpbmQoJy50ZXBzXzFjJykuYXR0cignYWxsX2ludicpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVwZXIgPSB0eTIgKyBvc3RfbWF0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3X3ByID0gdGVwZXIgKiAxMDAgLyB0eTE7XHJcbi8vY29uc29sZS5sb2coJ3RlcGVyPScrdGVwZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3X3ByKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lX21pLmZpbmQoJy50ZXBzXzFjJykuYXR0cigncmVsX3cnLCBNYXRoLmZsb29yKG5ld19wcikpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9zdF9tYXQgPSBvc3RfbWF0IC0gY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnb3N0X21hdCcrb3N0X21hdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3N0X21hdCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG9zdF9tYXQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL9C40LfQvNC10L3Rj9C10Lwg0LfQvdCw0YfQtdC90LjQtSDRgdC60L7Qu9GM0LrQviDQvtGB0YLQsNC70L7RgdGMXHJcbiAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLnZzZWdvLTFjLXR3byBpJykuZW1wdHkoKS5hcHBlbmQob3N0X21hdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3N0X21hdCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cx0L7Qu9GM0YjQtSDQvdC40YfQtdCz0L4g0L3QtdC70YzQt9GPINCy0YvQsdC40YDQsNGC0Ywg0LTQtdC70LDQtdC8INC+0YHRgtCw0LvRjNC90YvQtSDQuNC90L/Rg9GC0Ysg0LfQsNC70LrQuCDQutC+0YLQvtGA0YvQtSDQvdC1INCy0YvQsdGA0LDQvdGLINC90LXQstC40LfQuNC80YvQvNC4XHJcbiAgICAgICAgICAgICAgICAvLy5ub19hY3RpdmVfY2hlY2tcclxuICAgICAgICAgICAgICAgIGJveF9hY3RpdmUuZmluZCgnLm1hdGVyaWFsLTFjLXZpYm9yJykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL9C/0L7QuNGB0Log0LIg0LzQsNGB0YHQuNCy0LVcclxuICAgICAgICAgICAgICAgICAgICBpID0gY29yX21hc3MuaW5kZXhPZigkKHRoaXMpLmF0dHIoJ2lkX2tleScpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSB7fSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5qcy1hY2Mta28nKS5hZGRDbGFzcygnbm9fYWN0aXZlX2NoZWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/Qv9C10YDQtdGB0YfQuNGC0LDRgtGMINGH0YLQviDQuNC30LzQtdC90LjQu9C+0YHRjFxyXG4gICAgICAgIC8v0LjQt9C80LXQvdC40YLRjCB0cmVwXHJcbiAgICAgICAgLy/QsNC90LjQvNCw0YbQuNGPINC30LDQv9C+0LvQvdC10L3QuNGPXHJcbiAgICAgICAgLy/RgdC00LXQu9Cw0YLRjCDQvdC10LDQutGC0LjQstC90YvQvNC4INCz0LDQu9C60Lgg0LrQvtGC0L7RgNGL0LUg0L3QtdC70YzQt9GPINCy0YvQsdGA0LDRgtGMXHJcbiAgICAgICAgYW5pbWF0aW9uX3RlcHNfMWMoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWlsZF9tYXRpYygpXHJcbntcclxuXHJcbiAgICAvL9GD0LHRgNCw0YLRjCDQsNC60YLQuNCy0L3Ri9C5INC/0L7QuNGB0Log0LjQu9C4INC90L7QstGL0LlcclxuICAgIHZhciBhY3RpdmVfbW09JCgnLmpzLW1hdGljLWNjJykuZmluZCgnLmFjdGl2ZV90YXNrX2NiJykucGFyZW50cygnLmpzLTFjLW1hdGljJyk7XHJcblxyXG4vL2FsZXJ0KGFjdGl2ZV9tbS5sZW5ndGgpO1xyXG4gICAgYWN0aXZlX21tLmZpbmQoJ2knKS5yZW1vdmVDbGFzcyhcImFjdGl2ZV90YXNrX2NiXCIpO1xyXG4gICAgYWN0aXZlX21tLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgnJyk7XHJcbiQoJy5tYXRpYy1vcCcpLnZhbCgnJyk7XHJcblxyXG4gICAgdmFyIGJveCA9ICQoJy5ib3gtbW9kYWw6bGFzdCcpO1xyXG5cclxuICAgIGJveC5maW5kKCcuanMtZm9ybS1zYXZlLTFjJykuYXR0cignY29yJywnJyk7XHJcbmJveC5maW5kKCcubWV0YV91bml0c18xYycpLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHZpZXdfbWF0aWMoKVxyXG57XHJcbi8vYWxlcnQoXCIhXCIpO1xyXG4gICAgdmFyIHRfc29mdD0kKCcuanMtdHlwZS1zdG9jay1wcmltZTEnKS52YWwoKTtcclxuXHJcbiAgICAvL9Ch0LrRgNGL0YLRjCDQsNC60YLQuNCy0L3QvtGB0YLQuCDQsiDQv9GA0LXQtNC70L7QttC10L3QvdGL0YUg0LLQsNGA0LjQsNC90YLQsNGFXHJcbiAgICB2YXIgYWN0X21hdGljPSQoJy5qcy1ncm91cC1jJykuZmluZCgnLmFjdGl2ZV90YXNrX2NiJykucGFyZW50cygnLmpzLWNoZWNrYm94LWdyb3VwJyk7XHJcbiAgICAvL2FsZXJ0KGFjdF9tYXRpYy5sZW5ndGgpO1xyXG4gICAgaWYoYWN0X21hdGljLmxlbmd0aCE9MCkge1xyXG5cclxuICAgICAgICBhY3RfbWF0aWMuZmluZCgnaScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlX3Rhc2tfY2JcIik7XHJcbiAgICAgICAgYWN0X21hdGljLmZpbmQoJ2lucHV0JykubGFzdCgpLnZhbCgwKTtcclxuXHJcbiAgICB9XHJcbiAgICB2YXIgYm94ID0gJCgnLmJveC1tb2RhbDpsYXN0Jyk7XHJcblxyXG4gICAgYm94LmZpbmQoJy5qcy1mb3JtLXNhdmUtMWMnKS5hdHRyKCdjb3InLCcnKTtcclxuICAgIGJveC5maW5kKCcubWV0YV91bml0c18xYycpLnJlbW92ZSgpO1xyXG5cclxuICAgIGlmKHRfc29mdD09MSlcclxuICAgIHtcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1pbnZvaWNlLTEnKS5zbGlkZURvd24oXCJzbG93XCIpOyAvL9C/0L7QutCw0LfQsNGC0YxcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1pbnZvaWNlLTAnKS5zbGlkZVVwKFwic2xvd1wiKTsgLy/RgdC60YDRi9GC0YxcclxuICAgICAgICAkKCcuc2VhcmNoX2JpbGxfZWQnKS5oaWRlKCk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLmpzLW9wdGlvbnMtaW52b2ljZS0wJykuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuICAgICAgICAkKCcuanMtb3B0aW9ucy1pbnZvaWNlLTEnKS5zbGlkZVVwKFwic2xvd1wiKTtcclxuXHJcbiAgICAgICAgaWYoJCgnLmpzLW1hdC1pbnYtcG9zdGExMCcpLnZhbCgpIT0nJykge1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoX2JpbGxfZWQnKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIFN0YXR1c01DKClcclxue1xyXG4gICAgICAgICAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDQvtC60L3QviDQtNC70Y8g0LLQv9C40YHQsNC90LjQtSDQt9Cw0LzQtdGH0LDQvdC40Y9cclxuICAgICAgICAgICAgICAgIHZhciBwcmUgPSAkKHRoaXMpLmF0dHIoJ2lkX3N0YXR1cycpO1xyXG52YXIgaWRfZmlsZT0kKCcuaWQtZmlsZScpLnZhbCgpO1xyXG5cclxuXHJcbnZhciBrZXk9JCh0aGlzKS5wYXJlbnRzKCcubWF0ZXJpYWwtMWMnKS5hdHRyKCdpZF9rZXknKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fMWNfbWF0ZXJpYWxfc3RvY2sucGhwP251bWJlcj0nICsgcHJlKycmaWQ9JytpZF9maWxlKycma2V5PScra2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNlYWxXbygpXHJcbntcclxuICAgIC8v0J7RgtC/0YDQsNCy0LjRgtGMINC/0YDRj9C80YPRjiDRhNC+0YDQvNGDINC90LAg0YHQvtCz0LvQsNGB0L7QstCw0L3QuNC1XHJcbiAgICAkKCcjbGFsYWxhX3NlYWxfZm9ybScpLnN1Ym1pdCgpO1xyXG59XHJcblxyXG5cclxuLy/Qv9C10YDQtdGB0LvQsNGC0Ywg0LfQsNGP0LLQutGDXHJcbmZ1bmN0aW9uIEZvcndhcmRXbygpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIHByZSA9ICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyk7XHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfd29yZGVyX2ZvcndhcmQucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFJlamVjdFdvKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF93b3JkZXJfcmVqZWN0LnBocD9pZD0nICsgcHJlLFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy/RgdC+0YXRgNCw0L3QuNGC0Ywg0LfQsNGP0LLQutGDINC90LAg0LzQsNGC0LXRgNC40LDQu1xyXG52YXIgc2F2ZV93b3JkZXIgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIHZhciBlcnJvcj0wO1xyXG5cclxuICAgICQoJy5tZXNzYTp2aXNpYmxlJykuZmluZCgnLnRleHRfZmluZXJ5X21lc3NhZ2VfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAkKCcubWVzc2E6dmlzaWJsZScpLmZpbmQoJy50ZXh0X2ZpbmVyeV9tZXNzYWdlXycpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcblxyXG4gICAgICAgIHZhciB0ZXh0PSQodGhpcykudmFsKCk7XHJcbiAgICAgICAgaWYodGV4dD09JycpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlcnJvcj0xO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLndvcmtfX3MnKS5maW5kKCcucHJpY2VfZmluZXJ5XycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgJCgnLndvcmtfX3MnKS5maW5kKCcuY291bnRfZmluZXJ5XycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgJCgnLm1hdCcpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAkKCcubWF0JykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuXHJcbiAgICAkKCcubWVzc2E6dmlzaWJsZScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgdmFyIGlkX3dvcms9JCh0aGlzKS5hdHRyKCdpZF9tZXMnKTtcclxuICAgICAgICAvL9C/0YDQvtCy0LXRgNC40Lwg0YfRgtC+INCy0YHQtSDQv9C+0LvRjyDQtNC70Y8g0LrQsNC20LTQvtC5INGB0LvRg9C20LXQsdC90L7QuSDQt9Cw0L/QuNGB0LrQuCDQt9Cw0L/QvtC70L3QtdC90YtcclxuXHJcblxyXG4gICAgICAgIC8v0L7Qv9GA0LXQtNC10LvQuNC8INC+0YLQvdC+0YHRgtC40LzRgdGPINC30LDQv9C40YHQutCwINC6INGA0LDQsdC+0YLQtSDQuNC70Lgg0LzQsNGC0LXRgNC40LDQu9GDXHJcbiAgICAgICAgdmFyIGFhID0gaWRfd29yay5zcGxpdCgnXycpO1xyXG4gICAgICAgIGlmKGFhLmxlbmd0aD09MSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v0Y3RgtC+INGA0LDQsdC+0YLQsFxyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy/QvNCw0YLQtdGA0LjQsNC7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlkX3dvcms9YWFbMF07XHJcblxyXG4gICAgICAgIHZhciBjb3VudD0kKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV8nKS52YWwoKTtcclxuICAgICAgICB2YXIgcHJpY2U9JCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfJykudmFsKCk7XHJcbiAgICAgICAgJCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgJCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgaWYoKGNvdW50PT0wKXx8KGNvdW50PT0nJyl8fCghJC5pc051bWVyaWMoY291bnQpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcuY291bnRfZmluZXJ5XycpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICBlcnJvcj0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZigocHJpY2U9PTApfHwocHJpY2U9PScnKXx8KCEkLmlzTnVtZXJpYyhwcmljZSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5wcmljZV9maW5lcnlfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgJCgnLm1hdFtyZWxfdz0nK2lkX3dvcmsrJ10nKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgICAgICB2YXIgY291bnQ9JCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcHJpY2U9JCh0aGlzKS5maW5kKCcucHJpY2VfZmluZXJ5X21hdGVyXycpLnZhbCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNvdW50X2ZpbmVyeV9tYXRlcl8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgLy9pZigoY291bnQ9PTApfHwoY291bnQ9PScnKXx8KCEkLmlzTnVtZXJpYyhjb3VudCkpKVxyXG5cclxuICAgICAgICAgICAgaWYoKGNvdW50PT0nJyl8fCghJC5pc051bWVyaWMoY291bnQpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLmFkZENsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBpZigocHJpY2U9PTApfHwocHJpY2U9PScnKXx8KCEkLmlzTnVtZXJpYyhwcmljZSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgICAgICBlcnJvcj0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9KTtcclxuICAgICQoJy5qcy1hZGQtd29yZGVyLW1hdGVyaWFsIC5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYoJCh0aGlzKS52YWwoKSA9PSAnJykgIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAxOCcpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxpc3RfMjAxOCcpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7XHJcbiAgICAgICAgICAgIGVycm9yKys7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgIH0gZWxzZSB7JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAxOCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDE4Jyk7JCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDE4JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTt9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgaWYoZXJyb3IhPTApXHJcbiAgICB7XHJcblxyXG4gICAgICAgIGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0J3QtSDQstGB0LUg0L/QvtC70Y8g0LfQsNC/0L7Qu9C90LXQvdGLJyk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgJCgnI2xhbGFsYV9hZGRfZm9ybScpLnN1Ym1pdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNhbGNfb3Blbl8yMDIxX3JhbmcoKSB7XHJcbiAgICAvL2FsZXJ0X21lc3NhZ2UoJ29rJywn0L7RgtC60YDRi9GC0YwnKTtcclxuICAgICQoXCIjZGF0ZV90YWJsZTFcIikuc2hvdygpO1xyXG4vLyQoXCIjZGF0ZV90YWJsZVwiKS5mb2N1cygpO1xyXG4gICAgJCgnLmJvb2tpbmdCb3gxJykuY3NzKHtcclxuICAgICAgICBkaXNwbGF5OiAnYmxvY2snXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8v0YLQsNCx0YHRiyDQsiDQvtCx0YDQsNGJ0LXQvdC40Y/RhVxyXG52YXIgdGFic193b3JkZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgLy9ldmVudC5kYXRhLmtleVxyXG5cclxuICAgIHZhciB1b289JCh0aGlzKS5hdHRyKFwiaWRcIik7XHJcblxyXG5cclxuICAgIGlmKHVvbyE9MCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykuYWRkQ2xhc3MoJ2FjdGl2ZS10cmlwcy1tZW51Jyk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICQodGhpcykuaXMoXCIuYWN0aXZlXCIpIClcclxuICAgIHtcclxuICAgICAgICAvL9GD0LbQtSDQsNC60YLQuNCy0L3QsNGPINCy0LrQu9Cw0LTQutCwXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIC8vYWxlcnQoZXZlbnQuZGF0YS5rZXkpO1xyXG4gICAgICAgIGlmKHVvbyE9MCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJfbG9hZGluZ19zbWFsbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IGxlZnQ6IGNhbGMoNTAlIC0gMzBweCk7IFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLnNsaWRlRG93bihcInNsb3dcIik7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mb3JtJytldmVudC5kYXRhLmtleSsnIC5weF9iZycpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX3NtYWxsXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsIGJfbG9hZGluZ19jaXJjbGVfZGVsYXllZF9zbWFsbFwiPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuanMtdGFicy1tZW51JykuZmluZCgnLnRhYnNfJyArIGV2ZW50LmRhdGEua2V5ICsgJ1tpZD0nICsgdW9vICsgJ10nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAvL3ZhciBrZXlfPScwMDJVJztcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gJ3VybD0nICsgd2luZG93LmxvY2F0aW9uLmhyZWYgKyAnJmlkX3RhYnM9JyArICQodGhpcykuYXR0cihcImlkXCIpICtcclxuICAgICAgICAgICAgICAgICcmaWQ9JyArICQodGhpcykucGFyZW50cygnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAgICAgLy9hbGVydChkYXRhKTtcclxuICAgICAgICAgICAgQWpheENsaWVudCgnd29yZGVyJywndGFic19pbmZvJywnR0VUJyxkYXRhLCdBZnRlclRhYnNJbmZvV29yZGVyJywkKHRoaXMpLmF0dHIoXCJpZFwiKSsnLCcrJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpLDAsMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0LLQutC70LDQtNC60Lgg0LIg0L7QsdGA0LDRidC10L3QuNGP0YVcclxuZnVuY3Rpb24gQWZ0ZXJUYWJzSW5mb1dvcmRlcihkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYodXBkYXRlIT1udWxsKXsgaWYgKHR5cGVvZih1cGRhdGUpID09IFwic3RyaW5nXCIpIHsgdXBkYXRlID0gdXBkYXRlLnNwbGl0KCcsJyk7IH0gZWxzZSB7IHVwZGF0ZVswXT11cGRhdGU7IH0gfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuICAgICAgICBXaW5kb3dMb2dpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG4gICAgICAgICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsW2lkX3ByZT0nK3VwZGF0ZVsxXSsnXScpLmZpbmQoJy5weF9iZ190cmlwcycpLmVtcHR5KCkuYXBwZW5kKGRhdGEucXVlcnkpO1xyXG4gICAgICAgIC8vJCgnLmZvcm0nK3VwZGF0ZVsxXSsnIC5weF9iZycpLmVtcHR5KCkuYXBwZW5kKGRhdGEucXVlcnkpO1xyXG5cclxuICAgICAgICAvLyQoJy5jaGFfMScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy53YWxsZXRfY2hlY2tib3gnLHdhbGxldF9jaGVja2JveCk7XHJcblxyXG4gICAgICAgIC8vJCgnLmZvcm0nK3VwZGF0ZVsxXSsnIC5qcy10YWJzX2RvY2MnKS5oaWRlKCk7XHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLmpzLXRhYnNfJyt1cGRhdGVbMF0pLnNob3coKTtcclxuXHJcbiAgICAgICAgTnVtYmVyQmxvY2tGaWxlKCk7XHJcbiAgICAgICAgVG9vbFRpcCgpO1xyXG4gICAgICAgIGlmKCh1cGRhdGVbMF09PTMpfHwodXBkYXRlWzBdPT00KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS51bmJpbmQoJ2NsaWNrLnN5cycpO1xyXG4gICAgICAgICAgICAkKFwiLnNsY3RcIikuYmluZCgnY2xpY2suc3lzJywgc2xjdGNsaWNrKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGkpO1xyXG4gICAgICAgICAgICAvLyQoJyN0eXBlc2F5JykudW5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXkpO1xyXG4gICAgICAgICAgICAvLyQoJyN0eXBlc2F5JykuYmluZCgnY2hhbmdlJywgY2hhbmdlc2F5KTtcclxuICAgICAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcbndpbmRvdy5zZWFyY2hfbWluMiA9IDA7ICAvL9C80LjQvSDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdC40LzQstC+0LvQvtCyINC00LvRjyDQsdGL0YHRgtGA0L7Qs9C+INC/0L7QuNGB0LrQsFxyXG53aW5kb3cuc2VhcmNoX2RlbGV5Mj01MDA7XHQvL9C30LDQtNC10YDQttC60LAg0LzQtdC20LTRgyDQstCy0L7QtNCw0LzQuCDRgdC40LzQstC+0LvQvtCyIC0g0L3QsNGH0LDQu9C+INC/0L7QuNGB0LrQsFxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGRlbGF5cyA9IChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciB0aW1lciA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrLCBtcyl7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCAodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxuLy/Qv9C+0LjRgdC6INC40L3Qv9GD0YIgLSDQstCy0L7QtCDRgtC10LrRgdGC0LBcclxuICAgICQoJ2JvZHknKS5vbihcImtleXVwXCIsXCIuanMta2V5dXAtc2VhcmNoXCIsS2V5VXBTKTtcclxuICAgICQoJ2JvZHknKS5vbihcImNsaWNrXCIsXCIuanMta2V5dXAtc2VhcmNoXCIsQ2xpY2tVcFMpO1xyXG4gICAvL9C/0L7QuNGB0Log0LjQvdC/0YPRglxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1kcm9wLXNlYXJjaCBsaScsZHJvcF9zZWFyY2gpOyAgLy/QvdCw0LbQsNGC0LjQtSDQvdCwINC90LDQudC00LXQvdC90L7QtVxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1vcGVuLXNlYXJjaCcsb3Blbl9zZWFyY2gpOyAgLy/QvtGC0LrRgNGL0YLQuNC1INGB0L/QuNGB0LrQsCDQv9C+0LjRgdC60LBcclxufSk7XHJcbmZ1bmN0aW9uIENsaWNrVXBTKCkge1xyXG4gICAgdmFyIHlpb289JCh0aGlzKS5hdHRyKCdvbmVsaScpO1xyXG4gIGlmKCQodGhpcykudmFsKCk9PXlpb28pXHJcbiAge1xyXG4gICAgICAkKHRoaXMpLnZhbCgnJyk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gS2V5VXBTKCkge1xyXG4gICAgLy/QvtCx0L3Rg9C70Y/QtdC8INCy0YvQsdC+0YBcclxuICAgIHZhciBzZWFyY2hfaW5wdXQyPSQodGhpcyk7XHJcbiAgICB2YXIgc29wZW49JCh0aGlzKS5hdHRyKCdzb3BlbicpO1xyXG4gICAgdmFyIG9wdGlvbnM9MDtcclxuICAgIGlmKCQodGhpcykuaXMoJ1tmbnNdJykpXHJcbiAgICB7XHJcbiAgICAgICAgb3B0aW9ucz0kKHRoaXMpLmF0dHIoJ2ZucycpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBscz1zZWFyY2hfaW5wdXQyLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuYXR0cignbGlzdF9udW1iZXInKTtcclxuXHJcbiAgICBzZWFyY2hfaW5wdXQyLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuZmluZCgnLmpzLWhpZGRlbi1zZWFyY2gnKS52YWwoMCk7XHJcblxyXG4gICAgaWYoalF1ZXJ5LnRyaW0oc2VhcmNoX2lucHV0Mi52YWwoKS5sZW5ndGgpID49IDEpXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLmZveF9kZWxsMScpLnNob3coKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy5mb3hfZGVsbDEnKS5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBkZWxheXMoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYoalF1ZXJ5LnRyaW0oc2VhcmNoX2lucHV0Mi52YWwoKS5sZW5ndGgpID49IHNlYXJjaF9taW4yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZitcclxuICAgICAgICAgICAgICAgICcmc2VhcmNoPScrZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaF9pbnB1dDIudmFsKCkpKycmb3B0aW9uPScrb3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIHNlYXJjaF9pbnB1dDIucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuYl9sb2FkaW5nX3NtYWxsJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+Jykuc2hvdygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIEFqYXhDbGllbnQoJ3NlYXJjaCcsc29wZW4sJ0dFVCcsZGF0YSwnQWZ0ZXJTZWFyY2hUdXJvcGVyJyxscysnLCcrc29wZW4sMCwxKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSwgc2VhcmNoX2RlbGV5Mik7XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQv9C+0LjRgdC60LAg0LrQu9C40LXQvdGC0LAg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INGC0YPRgNCwINCyINCz0LvQsNCy0L3QvtC5INGE0L7RgNC80LVcclxuZnVuY3Rpb24gQWZ0ZXJTZWFyY2hUdXJvcGVyKGQsYyl7XHJcblxyXG4gICAgaWYoYyE9bnVsbCl7IGlmICh0eXBlb2YoYykgPT0gXCJzdHJpbmdcIikgeyBjID0gYy5zcGxpdCgnLCcpOyB9IGVsc2UgeyBjWzBdPWM7IH0gfVxyXG5cclxuLy8kKCcuYl9sb2FkaW5nX3NtYWxsJykucmVtb3ZlKCk7XHJcbi8vJCgnLmZveF9kZWxsMScpLnNob3coKTtcclxuICAgIC8vYWxlcnQoYyk7XHJcbiAgICB2YXIgaW5wdXRfc2VhcmNoX2FmdGVyPSQoJy5pbnB1dC1zZWFyY2gtbGlzdFtsaXN0X251bWJlcj0nK2NbMF0rJ10nKS5maW5kKCcuanMta2V5dXAtc2VhcmNoW3NvcGVuPScrY1sxXSsnXScpO1xyXG5cclxuXHJcbiAgICBpZihkLnN0YXR1cz09XCJva1wiKVxyXG4gICAge1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBpbnB1dF9zZWFyY2hfYWZ0ZXIucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuanMtZHJvcC1zZWFyY2gnKS5lbXB0eSgpLmFwcGVuZChkLnF1ZXJ5KTtcclxuXHJcbiAgICAgICAgaW5wdXRfc2VhcmNoX2FmdGVyLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuZmluZCgnLmpzLWRyb3Atc2VhcmNoJykuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDEpXCIpO1xyXG5cclxuICAgICAgICBpbnB1dF9zZWFyY2hfYWZ0ZXIucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnaScpLmFkZENsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuXHJcbiAgICB9ZWxzZXsgICBpbnB1dF9zZWFyY2hfYWZ0ZXIucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuanMtZHJvcC1zZWFyY2gnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7ICB9XHJcblxyXG4gICAgLy8kKCcjc29ydDVjJykudW5iaW5kKCdjaGFuZ2UnKTtcclxuICAgIC8vJCgnI3NvcnQ1YycpLmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNvcnQ1Yyk7XHJcblxyXG4gICAgdmFyIHVpaWk9aW5wdXRfc2VhcmNoX2FmdGVyLmF0dHIoJ29uZWxpJyk7XHJcblxyXG4gICAgaWYodWlpaSE9JycpIHtcclxuICAgICAgICBpbnB1dF9zZWFyY2hfYWZ0ZXIucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuanMtZHJvcC1zZWFyY2gnKS5wcmVwZW5kKCc8bGk+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiByZWw9XCIwXCI+JyArIHVpaWkgKyAnPC9hPjwvbGk+Jyk7XHJcbiAgICB9XHJcbiAgICBpbnB1dF9zZWFyY2hfYWZ0ZXIucGFyZW50cygnLmlucHV0XzIwMjEnKS5maW5kKCcuYl9sb2FkaW5nX3NtYWxsJykuaGlkZSgpO1xyXG59XHJcblxyXG5cclxuLy/QvtGC0LrRgNGL0YLQuNGPINC/0L7QtNCx0L7RgNCwINC/0L7QuNGB0LrQsCDQsiBpbnB1dFxyXG5mdW5jdGlvbiBvcGVuX3NlYXJjaCgpXHJcbntcclxuICAgIHZhciBpX29wZW4gPSAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dC1zZWFyY2gtbGlzdCcpLmZpbmQoJ2knKTtcclxuICAgIC8vYWxlcnQoXCIxMVwiKTtcclxuICAgIGlmKGlfb3Blbi5pcyhcIi5vcGVuLXNlYXJjaC1hY3RpdmVcIikpXHJcbiAgICB7XHJcbiAgICAgICAgaV9vcGVuLnJlbW92ZUNsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dC1zZWFyY2gtbGlzdCcpLmZpbmQoJy5qcy1kcm9wLXNlYXJjaCcpLmNzcyhcInRyYW5zZm9ybVwiLCBcInNjYWxlWSgwKVwiKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG5cclxuICAgICAgICBpX29wZW4uYWRkQ2xhc3MoJ29wZW4tc2VhcmNoLWFjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnLmpzLWRyb3Atc2VhcmNoJykuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDEpXCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL9GB0LrRgNGL0LLQsNC10Lwg0LLRgdC1INGB0L/QuNGB0LrQuCDQutGA0L7QvNC1INGC0L7Qs9C+INC90LAg0LrQvtGC0L7RgNGL0Lkg0L3QsNC20LDQu9C4XHJcbiAgICAkKCcuc2xjdCcpLmVhY2goZnVuY3Rpb24oaSxlbGVtKVxyXG4gICAge1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0KCkuY3NzKFwidHJhbnNmb3JtXCIsIFwic2NhbGVZKDApXCIpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGVsZW1zcz0kKHRoaXMpLnBhcmVudHMoJy5pbnB1dC1zZWFyY2gtbGlzdCcpLmF0dHIoJ2xpc3RfbnVtYmVyJyk7XHJcbiAgICAvL9GB0LrRgNGL0YLRjCDQstGB0LUg0YHQv9C40YHQutC4INC/0L7QuNGB0LrQsCDQutGA0L7QvNC1INGC0L7Qs9C+INC90LAg0LrQvtGC0L7RgNGL0Lkg0L3QsNC20LDQu9C4XHJcbiAgICAkKCcuZHJvcC1zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSlcclxuICAgIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmF0dHIoJ2xpc3RfbnVtYmVyJykhPWVsZW1zcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXQtc2VhcmNoLWxpc3QnKS5maW5kKCcuanMtZHJvcC1zZWFyY2gnKS5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJzY2FsZVkoMClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn1cclxuXHJcbi8v0LLRi9Cx0L7RgCDQuNC3INC/0L7QuNGB0LrQsCDQsiBpbnB1dFxyXG5mdW5jdGlvbiBkcm9wX3NlYXJjaCgpXHJcbntcclxuICAgIHZhciBmMT0kKHRoaXMpLmZpbmQoXCJhXCIpLmh0bWwoKTtcclxuICAgIHZhciBvYmogPSAkKFwiPGRpdj5cIiArIGYxICsgXCI8L2Rpdj5cIik7XHJcbiAgICBvYmouZmluZChcIi5ncmVlbi1iYXNlXCIpLnJlbW92ZSgpO1xyXG4gICAgdmFyIGY9b2JqLnRleHQoKTtcclxuICAgIC8vdmFyIGY9JCh0aGlzKS5maW5kKFwiYVwiKS50ZXh0KCk7XHJcblxyXG5cclxuICAgIHZhciBlPSQodGhpcykuZmluZChcImFcIikuYXR0cihcInJlbFwiKTtcclxuXHJcbiAgICB2YXIgaW5wdXRfcHI9JCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpO1xyXG5cclxuICAgIGlucHV0X3ByLmZpbmQoJy5jbGljay1zZWFyY2gtbmFtZScpLmVtcHR5KCkuYXBwZW5kKGYpLnNsaWRlRG93bihcInNsb3dcIik7XHJcbiAgICBpbnB1dF9wci5maW5kKCcuY2xpY2stc2VhcmNoLWljb24nKS5zbGlkZURvd24oXCJzbG93XCIpO1xyXG5cclxuICAgIGlucHV0X3ByLmZpbmQoJy5qcy1oaWRkZW4tc2VhcmNoJykudmFsKGUpLmNoYW5nZSgpO1xyXG5cclxuICAgIGlucHV0X3ByLmZpbmQoJy5qcy1rZXl1cC1zZWFyY2gnKS52YWwoZik7XHJcblxyXG4gICAgaW5wdXRfcHIucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuICAgICQodGhpcykucGFyZW50cygnLmlucHV0LXNlYXJjaC1saXN0JykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdvcGVuLXNlYXJjaC1hY3RpdmUnKTtcclxuXHJcbiAgICBpbnB1dF8yMDIxKCk7XHJcblxyXG4gICAgLy/QtdGB0LvQuCDQvdGD0LbQvdC+INC10YnQtSDRgtC40L8g0LrRg9C00LAg0YLQviDQstGL0YLQsNGB0LrQuNCy0LDRgtGMXHJcbiAgICBpZigkKHRoaXMpLnBhcmVudHMoJy5qcy1zdG9jay0xYycpLmxlbmd0aCE9MClcclxuICAgIHtcclxuICAgICAgICBpbnB1dF9wci5maW5kKCcuanMtaGlkZGVuLXVuaXQnKS52YWwoJCh0aGlzKS5maW5kKFwiLnNlYXJjaF91bml0c19zdG9ja1wiKS50ZXh0KCkpO1xyXG5cclxuICAgICAgICBpbnB1dF9wci5maW5kKCcuanMtaGlkZGVuLW5hbWUtbScpLnZhbCgkKHRoaXMpLmZpbmQoJ2EnKS50ZXh0KCkpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8qXHJcblxyXG7QnNGL0YjQutCwIGxvZ2l0ZWNoIDQwMVxyXG7Qn9Cw0LzRj9GC0YwgUmFkaW9uIDIwMDEwXHJcbtCc0L7QvdC40YLQvtGAIFNhbXN1bmcgbDMwMDAgLSDQttC40LTQulxyXG4uLi5cclxufFxyXG5WXHJcbtCg0LDRgdC60YDRi9GC0Ywg0LLRgdC1INGB0LrRgNGL0YLRjCDQtdGB0LvQuCDQuNGFINCx0L7Qu9GM0YjQtSDQutCw0LrQvtCz0L4g0YLQviDQutC+0LvQuNGH0LXRgdGC0LLQsFxyXG5cclxuKi9cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QslxyXG4gICAgJCgnYm9keScpLm9uKFwiY2xpY2tcIiwgJy5qcy1tb3JlJywgSnNNb3JlQik7XHJcbi8v0L/QvtGB0LvQtSDQstGL0LHQvtGA0LAg0YTQsNC50LvQsCDQuCDQvdCw0LbQsNGC0LjQtSDQutC90L7Qv9C60Lgg0L7QulxyXG5cclxufSk7XHJcblxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QsiAtXHTRg9C00LDQu9C40YLRjCDQt9Cw0LPRgNGD0LbQtdC90L3Ri9C5INGE0LDQudC7INC60YDQtdGB0YLQuNC6XHJcbi8vICB8XHJcbi8vIFxcL1xyXG5mdW5jdGlvbiBKc01vcmVCKClcclxue1xyXG5cclxuICAgIHZhciBtbW9yPSQodGhpcykucGFyZW50cygnLmpzLW1vcmUtYmxvY2snKTtcclxuXHJcbiAgICBpZihtbW9yLmlzKCcuc2hvdy1tb3JlLWFsbCcpKVxyXG4gICAge1xyXG4gICAgICAgIG1tb3IucmVtb3ZlQ2xhc3MoJ3Nob3ctbW9yZS1hbGwnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIG1tb3IuYWRkQ2xhc3MoJ3Nob3ctbW9yZS1hbGwnKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbn1cclxuIiwiJChmdW5jdGlvbiAoKXtcclxuXHJcblxyXG59KTsiLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWVkaXQtZG9wLXNtJyxEb3BTbWV0YUVkaXQpO1xyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1kZWwtZG9wLXNtJyxEb3BEZWxTbWUpO1xyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINGA0LDQt9C00LXQu1xyXG4gICAgJChcIi5hZGRfX3JhemRlbFwiKS5iaW5kKCdjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2snLCBhZGRfYnV0dG9uX2Jsb2NrKTtcclxuXHJcbiAgICAkKCcubWF0ZXJpYWwtcHJpbWUtdjInKS5vbihcImNsaWNrXCIsJy5oaXN0b3J5X2ljb24nLEhpc3RvcnlOMSk7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNsaWNrXCIsJy5qcy1zb3J0LXByaW1lLW1hdGVyaWFsJyxTb3J0TWF0UHJpbWUpO1xyXG5cclxufSlcclxuXHJcbmZ1bmN0aW9uIERvcERlbFNtZSgpXHJcbntcclxuICAgIGlmICggJCh0aGlzKS5pcyhcIltmb3JdXCIpIClcclxuICAgIHtcclxuICAgICAgICBpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2RlbGxfZG9wXzIwMjEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gRG9wU21ldGFFZGl0KClcclxue1xyXG5cclxuICAgIGlmICggJCh0aGlzKS5pcyhcIltmb3JdXCIpIClcclxuICAgIHtcclxuICAgICAgICBpZigkLmlzTnVtZXJpYygkKHRoaXMpLmF0dHIoXCJmb3JcIikpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2VkaXRfZG9wXzIwMjEucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBTb3J0TWF0UHJpbWUoKVxyXG57XHJcbnZhciBpZF9ob3VzZT0kKHRoaXMpLmF0dHIoJ2ZvcicpO1xyXG5cclxudmFyIHNvcnQ9JCh0aGlzKS5hdHRyKCdzb3J0Jyk7XHJcbiAgICB2YXIgdHIgPSAkKCd0clt3b3JrX2hvdXNlPScraWRfaG91c2UrJ10nKTtcclxuICAgIC8vYWxlcnQodHIubGVuZ3RoKTtcclxuXHJcbiAgICBpZihzb3J0PT0wKSB7XHJcbiAgICAgICAgdmFyIGFscGhhYmV0aWNhbGx5T3JkZXJlZFRyID0gdHIuZ2V0KCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gJChhKS5maW5kKFwiLnNfal9uYW1lX3NvcnRcIikudGV4dCgpLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZSgkKGIpLmZpbmQoXCIuc19qX25hbWVfc29ydFwiKS50ZXh0KCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdzb3J0JywxKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhbHBoYWJldGljYWxseU9yZGVyZWRUciA9IHRyLmdldCgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQoYSkuYXR0cihcInJlbF9tYVwiKS5sb2NhbGVDb21wYXJlKCQoYikuYXR0cihcInJlbF9tYVwiKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdzb3J0JywwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyQoXCIjY29udGFpbmVyXCIpLmFwcGVuZChhbHBoYWJldGljYWxseU9yZGVyZWRUcik7XHJcbiAgICAvL2NvbnNvbGUubG9nKGFscGhhYmV0aWNhbGx5T3JkZXJlZFRyKTtcclxuXHJcbiAgICAvL9C10YHQu9C4INC10YHRgtGMINC/0L7RgdC70LUg0L3QtdCz0L4g0LTQvtC/LiDRgdC80LXRgtGLINGB0YHRi9C70LrQuCDRgtC+INC/0YDQvtC/0YPRgdGC0LjRgtGMINC40YUg0LAg0L/QvtGC0L7QvCDQstGB0YLQsNCy0LjRgtGMINC+0YHRgtCw0LvRjNC90L7QtVxyXG4gICAgaWYoJCgndHJbcmVsX2lkPScraWRfaG91c2UrJ10nKS5uZXh0KCkuaXMoXCJbZG9wX2hvdXNlXVwiKSlcclxuICAgIHtcclxuICAgICAgICAkKCdbcmVsX2lkX2RvcF94PScraWRfaG91c2UrJ10nKS5sYXN0KCkuYWZ0ZXIoYWxwaGFiZXRpY2FsbHlPcmRlcmVkVHIpO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcblxyXG4gICAgICAgICQoJ3RyW3JlbF9pZD0nICsgaWRfaG91c2UgKyAnXScpLmFmdGVyKGFscGhhYmV0aWNhbGx5T3JkZXJlZFRyKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8v0YPQtNCw0LvQuNGC0Ywg0YDQsNC30LTQtdC7INCyINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHJcbmZ1bmN0aW9uIGRlbF9idXR0b25fYmxvY2soKSAge1xyXG5cclxuXHJcblxyXG4gICAgaWYgKCAkKHRoaXMpLmlzKFwiW2Zvcl1cIikgKVxyXG4gICAge1xyXG4gICAgICAgIGlmKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImZvclwiKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fZGVsbF9ibG9jay5waHA/aWQ9JyskKHRoaXMpLmF0dHIoXCJmb3JcIiksXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nT25TaG93OiBmdW5jdGlvbihkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFmdGVyQ2xvc2U6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX2Jsb2NrX25ldy5waHA/aWQ9JyArICQodGhpcykuYXR0cihcImZvclwiKSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcbi8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0YDQsNC30LTQtdC7INCyINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4XHJcbmZ1bmN0aW9uIGVkaXRfYnV0dG9uX2Jsb2NrKClcclxue1xyXG5cclxuXHJcbiAgICBpZiAoJCh0aGlzKS5pcyhcIltmb3JdXCIpKSB7XHJcbiAgICAgICAgaWYgKCQuaXNOdW1lcmljKCQodGhpcykuYXR0cihcImZvclwiKSkpIHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2VkaXRfYmxvY2sucGhwP2lkPScgKyAkKHRoaXMpLmF0dHIoXCJmb3JcIiksXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ2FmdGVyTG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFmdGVyTG9hZGluZ09uU2hvdzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nT25TaG93Jyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuKi9cclxuXHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9lZGl0X2Jsb2NrX25ldy5waHA/aWQ9JyArICQodGhpcykuYXR0cihcImZvclwiKSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINGA0LDQsdC+0YLRgyDQtNC70Y8g0LHQu9C+0LrQsCDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG5mdW5jdGlvbiBhZGRfYnV0dG9uX3JhYm90YSgpIHtcclxuXHJcbiAgICBpZigkKHRoaXMpLmlzKFwiW2Zvcl1cIikpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoJC5pc051bWVyaWMoJCh0aGlzKS5hdHRyKFwiZm9yXCIpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfcmFib3RhLnBocD9pZD0nKyQodGhpcykuYXR0cihcImZvclwiKSsnJmZyZWV6PScrJCgnI2ZyZXplenonKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24oZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCdhZnRlckxvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmdPblNob3c6IGZ1bmN0aW9uKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgnYWZ0ZXJMb2FkaW5nT25TaG93Jyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJDbG9zZTogZnVuY3Rpb24oZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4qL1xyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX3JhYm90YV9uZXcucGhwP2lkPScrJCh0aGlzKS5hdHRyKFwiZm9yXCIpKycmZnJlZXo9JyskKCcjZnJlemV6eicpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINGA0LDQt9C00LXQuyDQsiDRgdC10LHQtdGB0YLQvtC40LzQvtGB0YLQuFxyXG5mdW5jdGlvbiBhZGRfYnV0dG9uX2Jsb2NrKCkge1xyXG5cclxuXHJcblxyXG4gICAgaWYgKCAkKCcuY29udGVudF9ibG9jaycpLmlzKFwiW2RvbV1cIikgKVxyXG4gICAge1xyXG5cclxuICAgICAgICBpZigkLmlzTnVtZXJpYygkKCcuY29udGVudF9ibG9jaycpLmF0dHIoXCJkb21cIikpKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfYmxvY2sucGhwP2lkPScrJCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKFwiZG9tXCIpLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHJcbn0iLCIvL9C00L7QsdCw0LLQu9C10L3QuNC1INCy0YHQv9C70YvQstCw0Y7RidC40YUg0L/QvtC00YHQutCw0LfQvtC6INC6INC00LXQudGB0YLQstC40Y/QvFxyXG4vL3N0eWxlIC0gb2sgZXJyb3Igd2FyXHJcbi8vYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQndC1INCy0YHQtSDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90YsnKTtcclxuZnVuY3Rpb24gYWxlcnRfbWVzc2FnZShzdHlsZSx0ZXh0KVxyXG57XHJcblx0XHJcblx0dmFyIG1heFZhbHVlID0gMTtcclxuJChcIi5hbGVydF93cmFwcGVyIC5kaXYtYm94XCIpLmZpbmQoJy5hbGVydC1tZXNzYWdlJykuZWFjaChmdW5jdGlvbigpIHsgXHJcbiAgICAgIHZhbHVlID0gJCh0aGlzKS5hdHRyKFwiYWxlcnQtaWRcIik7XHJcbiAgaWYodmFsdWUgPiBtYXhWYWx1ZSkge1xyXG4gICAgbWF4VmFsdWUgPSB2YWx1ZTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHRcclxuXHQkKCcuYWxlcnRfd3JhcHBlciAuZGl2LWJveCcpLnByZXBlbmQoZnVuY3Rpb24gKCkgeyAkKHRoaXMpLmZpbmQoJy5hbGVydC1tZXNzYWdlICcpLmFkZENsYXNzKCdzaG93LWFsZXJ0Jyk7IH0sJzxkaXYgYWxlcnQtaWQ9XCInKyhtYXhWYWx1ZSsxKSsnXCIgY2xhc3M9XCIgIGFsZXJ0LW1lc3NhZ2UgJytzdHlsZSsnLWFcIj48ZGl2IGNsYXNzPVwiYWxlcnQtaWNvblwiPjwvZGl2PjxkaXYgY2xhc3M9XCJhbGVydC1jb250ZW50XCI+Jyt0ZXh0Kyc8L2Rpdj48ZGl2IGNsYXNzPVwiYWxlcnQtY2xvc2UganMtYWxlcnQtY2xvc2VcIj48L2Rpdj48L2Rpdj4nKTtcclxuXHJcblx0c2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHsgICQoJy5hbGVydC1tZXNzYWdlW2FsZXJ0LWlkPScrKG1heFZhbHVlKzEpKyddJykuYWRkQ2xhc3MoJ3Nob3ctYWxlcnQnKTsgfSwgNTAwICk7XHRcclxuXHRcclxuXHQvLyQoJy5hbGVydF93cmFwcGVyIC5kaXYtYm94JykuZmluZCgnLmFsZXJ0LW1lc3NhZ2UnKS5maXJzdCgpLmFkZENsYXNzKCdzaG93LWFsZXJ0Jyk7XHJcblx0XHJcblx0c2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHsgICQoJy5hbGVydC1tZXNzYWdlW2FsZXJ0LWlkPScrKG1heFZhbHVlKzEpKyddJykuYWRkQ2xhc3MoJ2hpZGUtYWxlcnQnKTsgXHJcblx0XHRcdFx0XHRcdFx0IFxyXG5cclxuXHRcdFx0XHRzZXRUaW1lb3V0ICggZnVuY3Rpb24gKCkgeyAgJCgnLmFsZXJ0LW1lc3NhZ2VbYWxlcnQtaWQ9JysobWF4VmFsdWUrMSkrJ10nKS5yZW1vdmUoKTsgXHJcblx0XHRcdFx0XHRcdFx0IFxyXG5cdFx0XHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdFx0XHQgXHJcblx0XHRcdFx0XHRcdFx0IFxyXG5cdFx0XHRcdFx0XHRcdCB9LCA1MDAgKTtcclxuXHRcdFx0XHRcdFx0XHQgXHJcblx0XHRcdFx0XHRcdFx0IH0sIDUwMDAgKTtcclxufSIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbi8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC40YLRjCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0L3QsCDRgdC60LvQsNC0XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWFkZC1zdG9jaycsIGFkZF9pbnZvaWNlMSk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXByaW50LXN0b2NrJyxQcmludFN0b2NrXyk7XHJcbn0pO1xyXG5cclxuLy/QtNC+0LHQsNCy0LjRgtGMINC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDQvdCwINGB0LrQu9Cw0LRcclxuZnVuY3Rpb24gYWRkX2ludm9pY2UxKClcclxue1xyXG5cclxuXHJcbiAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfc3RvY2sucGhwJyxcclxuICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbi8v0L7RgtC60YDRi9GC0Ywg0YTQvtGA0LzRgyDRgdGE0L7RgNC80LjRgNC+0LLQsNGC0Ywg0L7RgtGH0LXRglxyXG5mdW5jdGlvbiBQcmludFN0b2NrXygpXHJcbntcclxuICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX3ByaW50X3N0b2NrLnBocD9pZD0nKyQoJyNzb3J0X3N0b2NrNCcpLnZhbCgpLFxyXG4gICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcbiIsIiQoZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgJCgnLm1hdGVyaWFsLXByaW1lLXYyMicpLm9uKFwiY2xpY2tcIiwnLmhpc3RvcnlfaWNvbicsSGlzdG9yeU4xKTtcclxuXHJcblxyXG4gICAgLy/QutC70LjQutC90YPRgtGMINC90LAg0YfRgtC+INGC0L4g0LIg0YDQsNGB0LrRgNGL0LLQsNGO0YnQtdC8INC80LXQvdGOINC60L7RgNC30LjQvdGLXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLm1lbnVfampzIC5qcy1tZW51LWpqcy1iYXNrZXQnLG1lbnVfc3VwcGx5X2Jhc2tldF8yMSk7XHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLm1lbnVfampzIC5qcy1tZW51LWpqcy1iYXNrZXQtYWNjJyxtZW51X3N1cHBseV9iYXNrZXRfYWNjXzIxKTtcclxuICAgICQoJy5zY29wZV9zY29wZScpLm9uKFwiY2hhbmdlXCIsJy5vcHRpb25fc2NvcmUxJyxvcHRpb25fc2NvcmUxKTtcclxuXHJcbiAgICAkKCcudHJfZG9wX3N1cHBseScpLm9uKFwiY2xpY2tcIiwnLnN0X2Rpdl9zdXBwbHknLHN0X2Rpdl9zdXBwbHkpO1xyXG4gICAgLy8kKCcubWVudTEnKS5vbihcImNsaWNrXCIsJy5zY29yZV9wbHVzLC5zY29yZV8nLGFkZF9zb3BseSk7XHJcbiAgICAvL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60L7RgNC30LjQvdGLINC60L7QvNC/0L7QvdC10L3RgtC+0LIg0YHQstC10YDRhdGDXHJcbiAgICBiYXNrZXRfc3VwcGx5KCk7XHJcblxyXG4gICAgJCgnLmpzLWNhbGwtbm8tdicpLmZpbmQoJy5kcm9wJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIixcImxpXCIsbGlzdF9udW1iZXIpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtZGF2YS1jbGljaycsZGF2YV9zdXBwbHkpO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLXNob3d4LWNsaWNrJyxzaG93eF90YWtlKTtcclxuXHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy13YXZlcy1hcHAnLHdhdmVzKTtcclxuXHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHdhdmVzKClcclxue1xyXG4gICAgdmFyIGlkX3BvbGU9JCh0aGlzKS5wYXJlbnRzKCcudHJfZG9wX3N1cHBseScpLmF0dHIoJ3N1cHBseV9pZCcpO1xyXG4gICAgLy9hbGVydChjb29raWVfbmV3KTtcclxuXHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV93YXZlc19hcHAucGhwP2lkPScgKyBpZF9wb2xlLFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuLy/QuNC30LzQtdC90LXQvdC40LUg0LzQsNGC0LXRgNC40LDQu9CwINCyINGB0LXQsdC10YHRgtC+0LjQvNC+0YHRgtC4INC60LvQuNC6INC/0L4g0LrQvdC+0L/QutC1INCyINGE0L7RgNC80LUg0LTQvtCx0LDQstC40YLRjFxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24ganNfZWRpdF9zdXBwbHlfbWF0X3N0b2NrKClcclxue1xyXG4gICAgdmFyIGJveF9hY3RpdmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5ib3gtbW9kYWwnKTtcclxuICAgIHZhciBlcnIgPSAwO1xyXG4vL2FsZXJ0KCQoJy5qcy1mb3JtLXJlZ2lzdGVyIC5nbG9hYicpLmxlbmd0aCk7XHJcbi8vIGFsZXJ0KFwiISFcIik7XHJcbiAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1mb3JtLXN1cHBseS1tYXRzIC5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYoJCh0aGlzKS52YWwoKSA9PSAnJykgIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgIGVycisrO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuYXR0cignbmFtZScpKTtcclxuICAgICAgICB9IGVsc2UgeyQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpOyQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7fVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHZhciBjb250cmFjdG9yX25ldz1ib3hfYWN0aXZlLmZpbmQoJy5qcy10eXBlLXN0b2NrLXByaW1lMScpLnZhbCgpO1xyXG5cclxuXHJcbiAgICBpZihjb250cmFjdG9yX25ldz09MClcclxuICAgIHtcclxuICAgICAgICBib3hfYWN0aXZlLmZpbmQoJy5qcy1mb3JtLXN1cHBseS1tYXRzIC5nbG9hYjInKS5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpID09ICcnKSAgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICAgICBlcnIrKztcclxuICAgICAgICAgICAgICAgIC8vYWxlcnQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpOyQodGhpcykucGFyZW50cygnLmxpc3RfMjAyMScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7fVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgYm94X2FjdGl2ZS5maW5kKCcuanMtZm9ybS1zdXBwbHktbWF0cyAuZ2xvYWIxJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICAgICAgaWYoJCh0aGlzKS52YWwoKSA9PSAnJykgIHsgJCh0aGlzKS5wYXJlbnRzKCcuaW5wdXRfMjAyMScpLmFkZENsYXNzKCdyZXF1aXJlZF9pbl8yMDIxJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICAgICAgZXJyKys7XHJcbiAgICAgICAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuYXR0cignbmFtZScpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO31cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8ganMtdHlwZS1zb2Z0LXZpZXcxIDAgMVxyXG4gICAgLypcclxuICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICB2YXIgY29va2llX2ZsYWdfY3VycmVudCA9ICQuY29va2llKCdjdXJyZW50X3N1cHBseV8nK2l1KTtcclxuICAgIC8vYWxlcnQoY29va2llX25ldyk7XHJcbiAgICBpZihjb29raWVfZmxhZ19jdXJyZW50PT1udWxsKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBzc3VwPSdiYXNrZXRfc3VwcGx5Xyc7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICB2YXIgc3N1cD0nYmFza2V0X3Njb3JlXyc7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJhc2tldF9zY29yZV8gPSAkLmNvb2tpZShzc3VwK2l1KTtcclxuICAgIHZhciBjYyA9IGJhc2tldF9zY29yZV8uc3BsaXQoJy4nKTtcclxuICAgIHZhciB4dmc9Jyc7XHJcblxyXG5cclxuXHJcbiAgICBpZihjYy5sZW5ndGg9PTApXHJcbiAgICB7XHJcbiAgICAgICAgZXJyKys7XHJcbiAgICB9XHJcblxyXG4qL1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICBpZihlcnI9PTApXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZvcl9pZD1ib3hfYWN0aXZlLmZpbmQoJy5nbG9hYi1jYycpLmF0dHIoJ2ZvcicpO1xyXG5cclxuXHJcbiAgICAgICAgQWpheENsaWVudCgnc3VwcGx5Jywnc3Z5el9za2xhZCcsJ1BPU1QnLDAsJ0FmdGVyU1ZTJyxmb3JfaWQsJ2Zvcm1fc3VwcGx5X2VkaXRfbWF0X3N0b2NrJyk7XHJcblxyXG4gICAgICAgIGJveF9hY3RpdmUuZmluZCgnLmpzLWVkaXQtc3VwcGx5LWJsb2NrLXgnKS5oaWRlKCkuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyB3aWR0aDogNDBweDtwYWRkaW5nLXRvcDogMTdweDt0b3A6IGF1dG87cmlnaHQ6IGF1dG87bGVmdDogYXV0bzsgZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy/QvdCw0LnQtNC10Lwg0YHQsNC80YvQuSDQstC10YDRhdC90Y7RjiDQvtGI0LjQsdC60YMg0Lgg0L/RgNC+0LvQtdGB0YLQvdC10Lwg0Log0L3QtdC5XHJcbiAgICAgICAgLy9qUXVlcnkuc2Nyb2xsVG8oJy5yZXF1aXJlZF9pbl8yMDE4OmZpcnN0JywgMTAwMCwge29mZnNldDotNzB9KTtcclxuICAgICAgICAvL0Vycm9yQnV0KCcuanMtZm9ybS10ZW5kZXItbmV3IC5qcy1hZGQtdGVuZGVyLWZvcm0nLCfQntGI0LjQsdC60LAg0LfQsNC/0L7Qu9C90LXQvdC40Y8hJyk7XHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQndC1INCy0YHQtSDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90YsnKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGxpc3RfbnVtYmVyKCkge1xyXG4gICAgLy9hbGVydChcIiFcIik7XHJcbi8vLm5leHQoKS5maW5kKCdsaScpXHJcbiAgICB2YXIgYWN0aXZlX25ldz0kKHRoaXMpLmZpbmQoJ2EnKS5hdHRyKFwicmVsXCIpO1xyXG4gICAgLy9hbGVydChhY3RpdmVfbmV3KTtcclxuICAgIGlmKGFjdGl2ZV9uZXc9PTIpXHJcbiAgICB7XHJcbiAgICAgICAgJChcIiNkYXRlX3RhYmxlXCIpLnNob3coKTtcclxuICAgICAgICAvLyQoXCIjZGF0ZV90YWJsZVwiKS5mb2N1cygpO1xyXG4gICAgICAgICQoJy5ib29raW5nQm94X3JhbmdlJykuY3NzKHtcclxuICAgICAgICAgICAgZGlzcGxheTonYmxvY2snXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3d4X3Rha2UoKVxyXG57XHJcbiAgICB2YXIgYWN0aXZlX25ldz0kKHRoaXMpLmZpbmQoJy5jaG9pY2UtcmFkaW8gaScpO1xyXG4gICAgdmFyIGl1PSQoJy51c2Vyc19ydWxlJykuYXR0cigndWknKTtcclxuXHJcbiAgICB2YXIgZnB4PTE7XHJcbiAgICBpZighYWN0aXZlX25ldy5pcygnLmFjdGl2ZV90YXNrX2NiJykpIHtcclxuICAgICAgICB2YXIgZnB4ID0gMDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5jb29raWUoXCJzaG93eF9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG4gICAgQ29va2llTGlzdChcInNob3d4X1wiK2l1LGZweCwnYWRkJyk7XHJcblxyXG4gYXV0b1JlbG9hZEhhaygpO1xyXG4gICAgLypcclxuICAgIGlmKGZweD09MSlcclxuICAgIHtcclxuJCgnLmpzLWRhdmEtaGlkZScpLmhpZGUoKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy5qcy1kYXZhLWhpZGUnKS5zaG93KCk7XHJcbiAgICB9XHJcbiAgICAqL1xyXG5cclxuICAgIC8v0YHQutGA0YvRgtGMINC90LXQuNGB0L/QvtC70YzQt9GD0LXQvNGL0LUg0L/QvtC40YHQutC4INC/0YDQuCDRjdGC0L4g0YDQtdC20LjQvNC1XHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZGF2YV9zdXBwbHkoKVxyXG57XHJcbiAgICB2YXIgYWN0aXZlX25ldz0kKHRoaXMpLmZpbmQoJy5jaG9pY2UtcmFkaW8gaScpO1xyXG4gICAgdmFyIGl1PSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignaXUnKTtcclxuXHJcbiAgICB2YXIgZnB4PTE7XHJcbiAgICBpZighYWN0aXZlX25ldy5pcygnLmFjdGl2ZV90YXNrX2NiJykpIHtcclxuICAgICAgICB2YXIgZnB4ID0gMDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5jb29raWUoXCJkYXZhX1wiK2l1LCBudWxsLCB7cGF0aDonLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcbiAgICBDb29raWVMaXN0KFwiZGF2YV9cIitpdSxmcHgsJ2FkZCcpO1xyXG4gICAgJCgnLmpzLXJlbG9hZC10b3AnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXInKTtcclxuICAgICQoJy5qcy1yZWxvYWQtdG9wJykuYWRkQ2xhc3MoJ2FjdGl2ZS1yJyk7XHJcblxyXG4gICAgLypcclxuICAgIGlmKGZweD09MSlcclxuICAgIHtcclxuJCgnLmpzLWRhdmEtaGlkZScpLmhpZGUoKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgICQoJy5qcy1kYXZhLWhpZGUnKS5zaG93KCk7XHJcbiAgICB9XHJcbiAgICAqL1xyXG5cclxuICAgIC8v0YHQutGA0YvRgtGMINC90LXQuNGB0L/QvtC70YzQt9GD0LXQvNGL0LUg0L/QvtC40YHQutC4INC/0YDQuCDRjdGC0L4g0YDQtdC20LjQvNC1XHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8v0L7Rh9C40YHRgtC40YLRjCDQutC+0YDQt9C40L3RgyDRgdGH0LXRgtC+0LJcclxuZnVuY3Rpb24gZXJhc2VfYmFza2V0KClcclxue1xyXG4gICAgdmFyIHVfa2V5PSQoJy51c2Vyc19ydWxlJykuYXR0cignaXUnKTtcclxuICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICAkLmNvb2tpZShcImJhc2tldF9zdXBwbHlfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHJcbiAgICAkKCcuY2hlY2hlcl9zdXBwbHknKS5yZW1vdmVDbGFzcygnY2hlY2hlcl9zdXBwbHknKTtcclxuICAgIGJhc2tldF9zdXBwbHkoKTtcclxufVxyXG5cclxuLy/QutC70LjQutC90YPRgtGMINC90LAg0YfRgtC+INGC0L4g0LIg0YDQsNGB0LrRgNGL0LLQsNGO0YnQtdC8INC80LXQvdGOINC60L7RgNC30LjQvdGLXHJcbmZ1bmN0aW9uIG1lbnVfc3VwcGx5X2Jhc2tldF8yMShldmVudClcclxue1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgdmFyIHJlbD0kKHRoaXMpLmZpbmQoJ2EnKS5hdHRyKCdyZWwnKTtcclxuLy9hbGVydChyZWwpO1xyXG4gICAgaWYocmVsPT0yKVxyXG4gICAge1xyXG4gICAgICAgIC8v0L7Rh9C40YHRgtC40YLRjCDQutC+0YDQt9C40L3Rg1xyXG4gICAgICAgIGVyYXNlX2Jhc2tldCgpO1xyXG5cclxuICAgIH1cclxuICAgIGlmKHJlbD09MSlcclxuICAgIHtcclxuICAgICAgICAvL9C00L7QsdCw0LLQuNGC0Ywg0Log0YPRgdGC0YDQvtC50YHRgtCy0YNcclxuICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT0gJ3VuZGVmaW5lZCcpIHtcclxuXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoJ2Nsb3NlJyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgYWRkX3NvcGx5KCk7XHJcbi8qXHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvaXRlbXMvZm9ybV9iYXNrZXQucGhwJyxcclxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4qL1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbi8v0LrQu9C40LrQvdGD0YLRjCDQvdCwINGH0YLQviDRgtC+INCyINGA0LDRgdC60YDRi9Cy0LDRjtGJ0LXQvCDQvNC10L3RjiDQutC+0YDQt9C40L3Ri1xyXG5mdW5jdGlvbiBtZW51X3N1cHBseV9iYXNrZXRfYWNjXzIxKGV2ZW50KVxyXG57XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICB2YXIgcmVsPSQodGhpcykuZmluZCgnYScpLmF0dHIoJ3JlbCcpO1xyXG4vL2FsZXJ0KHJlbCk7XHJcbiAgICBpZihyZWw9PTEpXHJcbiAgICB7XHJcbiAgICAgICAgLy/RgdC+0YXRgNCw0L3QuNGC0YxcclxuICAgICAgICBzYXZlX3NvcGx5KCk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYocmVsPT0yKVxyXG4gICAge1xyXG4gICAgICAgIC8v0LfQsNC60YDRi9GC0Ywg0YLQtdC60YPRidC40LlcclxuICAgICAgICB2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG4gICAgICAgICQuY29va2llKFwiY3VycmVudF9zdXBwbHlfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuICAgICAgICAkLmNvb2tpZShcImJhc2tldF9zY29yZV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG4gICAgICAgICQuY29va2llKFwiYmFza2V0X3N1cHBseV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG5cclxuXHJcbiAgICAgICAgLy/RgdC60YDRi9GC0Ywg0YLQtdC60YPRidC40Lkg0YHQstC10YDRhdGDXHJcbiAgICAgICAgLypcclxuICAgICAgICAkKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5udW1iZXJfc2NvcmUnKS5lbXB0eSgpO1xyXG4gICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuZmluZCgnLmNvdW50X251bWJfc2NvcmUnKS5lbXB0eSgpO1xyXG4gICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5tb3JlX3N1cHBseTInKS5oaWRlKCk7XHJcbiovXHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5LWFjYycpLnJlbW92ZUNsYXNzKCdtb3JlLWFjdGl2ZS1zJyk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykucmVtb3ZlQ2xhc3MoJ21vcmUtYWN0aXZlLXMxJyk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjIC5tb3JlX3N1cHBseTEnKS5maW5kKCdpJykuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgLy/Rg9Cx0YDQsNGC0Ywg0LLRi9C00LXQu9C10L3QuNGPINC90LAg0LzQsNGC0LXQu9C40LDQu9Cw0YVcclxuICAgICAgICAkKCcuY2hlY2hlcl9zdXBwbHknKS5yZW1vdmVDbGFzcygnY2hlY2hlcl9zdXBwbHknKTtcclxuXHJcbiAgICAgICAgLy/Rg9Cx0YDQsNGC0Ywg0LDQutGC0LjQstC90L7RgdGC0Ywg0YHQviDRgdGH0LXRgtCwXHJcbiAgICAgICAgJCgnLnNjb3JlX2FjdGl2ZScpLnJlbW92ZUNsYXNzKCdzY29yZV9hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnb2snLCfQotC10LrRg9GJ0LjQuSDRgdGH0LXRgiDQt9Cw0LrRgNGL0YInKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihyZWw9PTMpXHJcbiAgICB7XHJcblxyXG4gICAgICAgIC8vdmFyIGlkX2FjY19zPSAkKHRoaXMpLnBhcmVudHMoJy5tZW51X3N1cHBseScpLnByZXYoKS5hdHRyKCdyZWxfc2NvcmUnKTtcclxuICAgICAgICB2YXIgY29va2llX2ZsYWdfY3VycmVudCA9ICQuY29va2llKCdjdXJyZW50X3N1cHBseV8nK2l1KTtcclxuICAgICAgICAvL2FsZXJ0KGNvb2tpZV9uZXcpO1xyXG4gICAgICAgIGlmKGNvb2tpZV9mbGFnX2N1cnJlbnQhPW51bGwpIHtcclxuICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX3NpZ25fYWNjLnBocD9pZD0nICsgY29va2llX2ZsYWdfY3VycmVudCxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAvL9C+0YLQutGA0YvRgtGMXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9ICd1bmRlZmluZWQnKSB7XHJcblxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKCdjbG9zZScpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuXHJcbiAgICAgICAgLy/QvtGC0LrRgNGL0YLRjFxyXG4gICAgICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICAgICAgdmFyIGNvb2tpZV9mbGFnX2N1cnJlbnQgPSAkLmNvb2tpZSgnY3VycmVudF9zdXBwbHlfJytpdSk7XHJcbiAgICAgICAgLy9hbGVydChjb29raWVfbmV3KTtcclxuICAgICAgICBpZihjb29raWVfZmxhZ19jdXJyZW50IT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWRfc29wbHk9Y29va2llX2ZsYWdfY3VycmVudDtcclxuXHJcblxyXG4gICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fdXBkYXRlX3NvcGx5LnBocD9pZD0nK2lkX3NvcGx5LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4qL1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvaXRlbXMvZm9ybV9iYXNrZXQucGhwJyxcclxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICovXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuLy/QutC+0YDQt9C40L3QsCDRgdGH0LXRgtC+0LIg0L3QvtCy0YvQuS/RgtC10LrRg9GJ0LjQuSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvtCx0L3QvtCy0LvQtdC90LjQtVxyXG5mdW5jdGlvbiBiYXNrZXRfc3VwcGx5KClcclxue1xyXG5cclxuICAgIHZhciB1X2tleT0kKCcudXNlcnNfcnVsZScpLmF0dHIoJ2l1Jyk7XHJcbiAgICB2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG4gICAgdmFyIGNvb2tpZV9uZXcgPSAkLmNvb2tpZSgnYmFza2V0X3N1cHBseV8nK2l1KTtcclxuICAgIHZhciBjb29raWVfc2NvcmUgPSAkLmNvb2tpZSgnYmFza2V0X3Njb3JlXycraXUpO1xyXG4gICAgdmFyIGNvb2tpZV9mbGFnX2N1cnJlbnQgPSAkLmNvb2tpZSgnY3VycmVudF9zdXBwbHlfJytpdSk7XHJcbiAgICAvL2FsZXJ0KGNvb2tpZV9uZXcpO1xyXG4gICAgaWYoY29va2llX2ZsYWdfY3VycmVudD09bnVsbClcclxuICAgIHtcclxuICAgICAgICAvL9C30L3QsNGH0LjRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0L/QviDQvdC+0LLQvtC80YMg0YHRh9C10YLRgyDQstGL0LLQvtC00LjRgtGMXHJcbiAgICAgICAgaWYoY29va2llX25ldz09bnVsbCkge1xyXG5cclxuICAgICAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5JykucmVtb3ZlQ2xhc3MoJ21vcmUtYWN0aXZlLXMnKTtcclxuXHJcbiAgICAgICAgICAgIC8vJCgnLmFkZF9zY29yZScpLnJlbW92ZSgpOyAkKCcubW9yZV9zdXBwbHknKS5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseScpLmFkZENsYXNzKCdtb3JlLWFjdGl2ZS1zJyk7XHJcbiAgICAgICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5Jykuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmFkZF9uYXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5hZGRfemF5eScpLnNob3coKTtcclxuICAgICAgICAgICAgaWYoISQoXCIuYWRkX3Njb3JlXCIpLmxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuYWRkX3NzcycpLmFmdGVyKCc8YSBkYXRhLXRvb2x0aXA9XCLQtNC+0LHQsNCy0LjRgtGMINGB0YfQtdGCXCIgY2xhc3M9XCJhZGRfc2NvcmVcIj48aSBjbGFzcz1cInNjb3JlX3BsdXNcIj48L2k+PGkgY2xhc3M9XCJzY29yZV9cIj48L2k+PC9hPicpO1xyXG4gICAgICAgICAgICAgICAgLy8kKCcubW9yZV9zdXBwbHknKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgVG9vbFRpcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjYyA9IGNvb2tpZV9uZXcuc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgdmFyIGNvdW50cz1jYy5sZW5ndGg7XHJcbiAgICAgICAgICAgICQoJy5hZGRfc2NvcmUgLnNjb3JlXycpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcblxyXG4gICAgICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseSAubW9yZV9zdXBwbHkxJykuZmluZCgnaScpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcbiAgICAgICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5JykuYWRkQ2xhc3MoJ21vcmUtYWN0aXZlLXMnKTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZF9zY29yZSAuc2NvcmVfJykuYW5pbWF0ZSh7c2NhbGU6IFwiMS41XCJ9LCAyMDAsIGZ1bmN0aW9uKCkgeyAgJCgnLmFkZF9zY29yZSAuc2NvcmVfJykuYW5pbWF0ZSh7c2NhbGU6IFwiMVwifSwgMjAwKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI25wcm9ncmVzcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjbnByb2dyZXNzIC5iYXInKS5hbmltYXRlKHt3aWR0aDogXCIxMDAlXCJ9LCAyMDAsIGZ1bmN0aW9uKCkgeyAgJCgnI25wcm9ncmVzcycpLmhpZGUoKTsgJCgnI25wcm9ncmVzcyAuYmFyJykud2lkdGgoJzAnKTsgfSk7Ki9cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuXHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHknKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHknKS5yZW1vdmVDbGFzcygnbW9yZS1hY3RpdmUtcycpO1xyXG5cclxuICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykucmVtb3ZlQ2xhc3MoJ21vcmUtYWN0aXZlLXMxJyk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykuYWRkQ2xhc3MoJ21vcmUtYWN0aXZlLXMnKTtcclxuICAgICAgICAvL9C30L3QsNGH0LjRgiDQsNC60YLQuNCy0LXQvSDRgtC10LrRg9GJ0LjQuSDRgdGH0LXRglxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgJCgnLmFkZF9zY29yZScpLnJlbW92ZSgpOyAkKCcubW9yZV9zdXBwbHknKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmN1cnJlbnRfc2NvcmUnKS5zaG93KCk7ICAkKCcubW9yZV9zdXBwbHkyJykuc2hvdygpO1xyXG5cclxuICAgICAgICAkKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5jb3VudF9zY2lyZScpLnNob3coKTtcclxuICAgICAgICAkKCcubWVudV9zdXBwbHknKS5maW5kKCdbcmVsPTFdJykucGFyZW50cygnbGknKS5zaG93KCk7XHJcbiovXHJcbiAgICAgICAgLy8kKCcuanMtYmFza2V0LXN1cHBseS1hY2MgLm1lbnVfc3VwcGx5JykuZmluZCgnW3JlbD0xXScpLnBhcmVudHMoJ2xpJykuc2hvdygpO1xyXG4gICAgICAgIC8vJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjIC5tb3JlX3N1cHBseTEnKS5maW5kKCdpJykuZW1wdHkoKS5hcHBlbmQoY291bnRzKTtcclxuXHJcblxyXG4gICAgICAgIGlmKGNvb2tpZV9zY29yZSE9bnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IGNvb2tpZV9zY29yZS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICB2YXIgY291bnRzPWNjLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvdW50cz0nJztcclxuICAgICAgICAgICAgLy8kKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5jb3VudF9zY2lyZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8kKCcubWVudV9zdXBwbHknKS5maW5kKCdbcmVsPTFdJykucGFyZW50cygnbGknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5LWFjYycpLmFkZENsYXNzKCdtb3JlLWFjdGl2ZS1zMScpO1xyXG4gICAgICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5yZW1vdmVDbGFzcygnbW9yZS1hY3RpdmUtcycpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vJCgnLmFkZF9zY29yZSAuc2NvcmVfJykuZW1wdHkoKS5hcHBlbmQoY291bnRzKTtcclxuICAgICAgICAvLyQoJy5jdXJyZW50X3Njb3JlJykuZmluZCgnLmNvdW50X251bWJfc2NvcmUnKS5lbXB0eSgpLmFwcGVuZChjb3VudHMpO1xyXG4gICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5LWFjYyAubW9yZV9zdXBwbHkxJykuZmluZCgnaScpLmVtcHR5KCkuYXBwZW5kKGNvdW50cyk7XHJcbiAgICAgICAgLy8kKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5jb3VudF9zY2lyZScpLmhpZGUoKTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vL9C00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQuSDRgdGH0LXRglxyXG5mdW5jdGlvbiBhZGRfc29wbHkoKVxyXG57XHJcbiAgICB2YXIgdV9rZXk9JCgnLnVzZXJzX3J1bGUnKS5hdHRyKCdpdScpO1xyXG4gICAgdmFyIGl1PSQoJy5jb250ZW50X2Jsb2NrJykuYXR0cignaXUnKTtcclxuICAgIHZhciBjb29raWVfbmV3ID0gJC5jb29raWUoJ2Jhc2tldF9zdXBwbHlfJytpdSk7XHJcbiAgICBpZihjb29raWVfbmV3IT1udWxsKVxyXG4gICAge1xyXG5cclxuXHJcblxyXG4gICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX3NvcGx5XzIwMjEucGhwJyxcclxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy/QvdCw0LbQsNGC0Ywg0L3QsCDQvNCw0YLQtdGA0LjQsNC7INCyINGB0L3QsNCx0LbQtdC90LjQuCAtINC00L7QsdCw0LLQuNGC0Ywv0YPQsdGA0LDRgtGMINC40Lcg0LrQvtGA0LfQuNC90Ysg0YHRh9C10YLQvtCyXHJcbmZ1bmN0aW9uIHN0X2Rpdl9zdXBwbHkoKSB7XHJcblxyXG4gICAgdmFyIHVfa2V5PSQoJy51c2Vyc19ydWxlJykuYXR0cignaXUnKTtcclxuICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICB2YXIgdHI9JCh0aGlzKS5wYXJlbnRzKCcudHJfZG9wX3N1cHBseScpO1xyXG5cclxuICAgIC8vdmFyIGNvb2tpZV9uZXcgPSAkLmNvb2tpZSgnYmFza2V0X3N1cHBseV8nK2l1KTtcclxuICAgIHZhciBjb29raWVfZmxhZ19jdXJyZW50ID0gJC5jb29raWUoJ2N1cnJlbnRfc3VwcGx5XycraXUpO1xyXG4gICAgLy9hbGVydChjb29raWVfbmV3KTtcclxuICAgIGlmKGNvb2tpZV9mbGFnX2N1cnJlbnQ9PW51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHNzdXA9J2Jhc2tldF9zdXBwbHlfJztcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHZhciBzc3VwPSdiYXNrZXRfc2NvcmVfJztcclxuICAgIH1cclxuXHJcbiAgICAvL2FsZXJ0KHNzdXApO1xyXG4gICAgaWYodHIuaXMoXCIuY2hlY2hlcl9zdXBwbHlcIikpXHJcbiAgICB7XHJcbiAgICAgICAgdHIucmVtb3ZlQ2xhc3MoXCJjaGVjaGVyX3N1cHBseVwiKTtcclxuICAgICAgICBDb29raWVMaXN0KHNzdXAraXUsdHIuYXR0cignc3VwcGx5X2lkJyksJ2RlbCcpO1xyXG4gICAgICAgIC8vIGFsZXJ0KCQodGhpcykucGFyZW50cygnW3JlbF9pZF0nKS5hdHRyKCdyZWxfaWQnKSk7XHJcbiAgICAgICAgYmFza2V0X3N1cHBseSgpO1xyXG4gICAgICAgIFRvb2xUaXAoKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHRyLmFkZENsYXNzKFwiY2hlY2hlcl9zdXBwbHlcIik7XHJcbiAgICAgICAgQ29va2llTGlzdChzc3VwK2l1LHRyLmF0dHIoJ3N1cHBseV9pZCcpLCdhZGQnKTtcclxuICAgICAgICBiYXNrZXRfc3VwcGx5KCk7XHJcbiAgICAgICAgVG9vbFRpcCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbi8v0YHQvtGF0YDQsNC90LjRgtGMINGC0LXQutGD0YnQuNC5INGB0YfQtdGCXHJcbmZ1bmN0aW9uIHNhdmVfc29wbHkoKSB7XHJcbiAgICB2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG4gICAgdmFyIGNvb2tpZV9mbGFnX2N1cnJlbnQgPSAkLmNvb2tpZSgnY3VycmVudF9zdXBwbHlfJytpdSk7XHJcbiAgICAvL2FsZXJ0KGNvb2tpZV9uZXcpO1xyXG4gICAgaWYoY29va2llX2ZsYWdfY3VycmVudCE9bnVsbClcclxuICAgIHtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICBBamF4Q2xpZW50KCdzdXBwbHknLCd1cGRhdGVfc29wbHknLCdHRVQnLGRhdGEsJ0FmdGVydXBkYXRlX3NvcGx5JywxLDApO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDRgdC+0YXRgNCw0L3QuNGC0Ywg0YLQtdC60YPRidC40Lkg0YHRh9C10YJcclxuZnVuY3Rpb24gQWZ0ZXJ1cGRhdGVfc29wbHkoZGF0YSx1cGRhdGUpXHJcbntcclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuICAgICAgICBXaW5kb3dMb2dpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcblxyXG4gICAgICAgIHZhciBiYXNrZXRfc2NvcmVfID0gJC5jb29raWUoJ2Jhc2tldF9zY29yZV8nK2l1KTtcclxuICAgICAgICB2YXIgY29va2llX2ZsYWdfY3VycmVudCA9ICQuY29va2llKCdjdXJyZW50X3N1cHBseV8nK2l1KTtcclxuICAgICAgICB2YXIgY2MgPSBiYXNrZXRfc2NvcmVfLnNwbGl0KCcuJyk7XHJcblxyXG5cclxuICAgICAgICAvL9GD0LTQsNC70Y/QtdC8INCy0YHQtSDRgdGC0LDRgNGL0LUg0LjQutC+0L3QutC4INGB0YfQtdGC0L7QsiDQuCDQvtCx0L3QvtCy0LvRj9C10Lwg0L3QsCDQvdC+0LLRi9C1XHJcblxyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jytjb29raWVfZmxhZ19jdXJyZW50KyddJykubmV4dCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jytjb29raWVfZmxhZ19jdXJyZW50KyddJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGZvciAoIHZhciB0ID0gMDsgdCA8IGNjLmxlbmd0aDsgdCsrIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0cj0kKCdbc3VwcGx5X2lkPScrY2NbdF0rJ10nKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdHIuZmluZCgnLnNjb3BlX3Njb3BlJykuYXBwZW5kKCc8ZGl2IHJlbF9zY29yZT1cIicrY29va2llX2ZsYWdfY3VycmVudCsnXCIgZGF0YS10b29sdGlwPVwi0YHRh9C10YIg4oSWJytkYXRhLm51bWJlcisnICgnK2RhdGEuZGF0ZXMrJylcIiBjbGFzcz1cIm1lbnVfY2xpY2sgc2NvcmVfYVwiPjxzcGFuPuKElicrZGF0YS5udW1iZXIrJyAoJytkYXRhLmRhdGUrJyk8L3NwYW4+PHN0cm9uZz48bGFiZWw+JyskLm51bWJlcihwYXJzZUZsb2F0KGRhdGEuc3VtKS50b0ZpeGVkKDIpLCAyLCAnLicsICcgJykrJzwvbGFiZWw+PC9zdHJvbmc+PGk+JytjYy5sZW5ndGgrJzwvaT48Zm9ybSBjbGFzcz1cIm5vbmVcIiB0YXJnZXQgPSBcIl9ibGFua1wiICBhY3Rpb249XCJhY2MvJytjb29raWVfZmxhZ19jdXJyZW50KycvXCIgc3R5bGU9XCIgcGFkZGluZzowOyBtYXJnaW46MDtcIiBtZXRob2Q9XCJwb3N0XCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj48aW5wdXQgbmFtZT1cImFcIiB2YWx1ZT1cIm9wZW5cIiB0eXBlPVwiaGlkZGVuXCI+PC9mb3JtPjwvZGl2PjxkaXYgY2xhc3M9XCJtZW51X3N1cHBseSBtZW51X3N1MTIyXCI+PHVsIGNsYXNzPVwiZHJvcHMgbm9fYWN0aXZlXCIgZGF0YV9zcmM9XCIwXCIgc3R5bGU9XCJsZWZ0OiAtNTBweDsgdG9wOiA1cHg7IHRyYW5zZm9ybTogc2NhbGVZKDApO1wiPjxsaT48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIHJlbD1cIjFcIj7QntGC0LrRgNGL0YLRjDwvYT48L2xpPjxsaT48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIHJlbD1cIjJcIj7QodC00LXQu9Cw0YLRjCDRgtC10LrRg9GJ0LjQvDwvYT48L2xpPjxsaT48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIHJlbD1cIjNcIj7QodC+0LPQu9Cw0YHQvtCy0LDRgtGMPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgcmVsPVwiNFwiPtCj0LTQsNC70LjRgtGMPC9hPjwvbGk+PC91bD48aW5wdXQgcmVsPVwieFwiIG5hbWU9XCJ2YWxsXCIgY2xhc3M9XCJvcHRpb25fc2NvcmUxXCIgdmFsdWU9XCIwXCIgdHlwZT1cImhpZGRlblwiPjwvZGl2PicpO1xyXG5cclxuXHJcbi8qXHJcbiAgICAgICAgICAgIHRyLmZpbmQoJy5zY29wZV9zY29wZScpLmFwcGVuZCgnPGRpdiByZWxfc2NvcmU9XCInK2Nvb2tpZV9mbGFnX2N1cnJlbnQrJ1wiIGNsYXNzPVwibWVudV9jbGljayBzY29yZV9hICBcIj48aT4nK2NjLmxlbmd0aCsnPC9pPjxzcGFuPuKElicrZGF0YS5udW1iZXIrJzwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwibWVudV9zdXBwbHkgbWVudV9zdTEyMlwiPjx1bCBjbGFzcz1cImRyb3BzIG5vX2FjdGl2ZVwiIGRhdGFfc3JjPVwiMFwiIHN0eWxlPVwibGVmdDogLTUwcHg7IHRvcDogNXB4OyB0cmFuc2Zvcm06IHNjYWxlWSgwKTtcIj48bGk+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiByZWw9XCIxXCI+0J7RgtC60YDRi9GC0Yw8L2E+PC9saT48bGk+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiByZWw9XCIyXCI+0KHQtNC10LvQsNGC0Ywg0YLQtdC60YPRidC40Lw8L2E+PC9saT48bGk+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiByZWw9XCIzXCI+0KHQvtCz0LvQsNGB0L7QstCw0YLRjDwvYT48L2xpPjxsaT48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIHJlbD1cIjRcIj7Qo9C00LDQu9C40YLRjDwvYT48L2xpPjwvdWw+PGlucHV0IHJlbD1cInhcIiBuYW1lPVwidmFsbFwiIGNsYXNzPVwib3B0aW9uX3Njb3JlMVwiIHZhbHVlPVwiMFwiIHR5cGU9XCJoaWRkZW5cIj48L2Rpdj4nKTtcclxuKi9cclxuICAgICAgICB9XHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnb2snLCfQotC10LrRg9GJ0LjQuSDRgdGH0LXRgiDRgdC+0YXRgNCw0L3QtdC9Jyk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAkLmNvb2tpZShcImN1cnJlbnRfc3VwcGx5X1wiK2l1LCBudWxsLCB7cGF0aDonLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcbiAgICAgICAgJC5jb29raWUoXCJiYXNrZXRfc2NvcmVfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuICAgICAgICAkLmNvb2tpZShcImJhc2tldF9zdXBwbHlfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAkKCcuY3VycmVudF9zY29yZScpLmZpbmQoJy5udW1iZXJfc2NvcmUnKS5lbXB0eSgpO1xyXG4gICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuZmluZCgnLmNvdW50X251bWJfc2NvcmUnKS5lbXB0eSgpO1xyXG4gICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5tb3JlX3N1cHBseTInKS5oaWRlKCk7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5LWFjYycpLnJlbW92ZUNsYXNzKCdtb3JlLWFjdGl2ZS1zJyk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjJykucmVtb3ZlQ2xhc3MoJ21vcmUtYWN0aXZlLXMxJyk7XHJcbiAgICAgICAgJCgnLmpzLWJhc2tldC1zdXBwbHktYWNjIC5tb3JlX3N1cHBseTEnKS5maW5kKCdpJykuZW1wdHkoKTtcclxuICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MgLm1vcmVfc3VwcGx5MScpLmZpbmQoJy5kb3AtMjEnKS5lbXB0eSgpO1xyXG5cclxuICAgICAgICAkKCcuY2hlY2hlcl9zdXBwbHknKS5yZW1vdmVDbGFzcygnY2hlY2hlcl9zdXBwbHknKTtcclxuICAgICAgICAkKCcuc2NvcmVfYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3Njb3JlX2FjdGl2ZScpO1xyXG5cclxuICAgIH1cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdlcnJvcicgKVxyXG4gICAge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG9wdGlvbl9zY29yZTEoKSB7XHJcbiAgICB2YXIgZWxfdj0kKHRoaXMpLnZhbCgpO1xyXG4gICAgdmFyIHNvcGx5PSQodGhpcykucGFyZW50cygnLm1lbnVfc3VwcGx5JykucHJldigpO1xyXG4gICAgdmFyIGlkX3NvcGx5PXNvcGx5LmF0dHIoJ3JlbF9zY29yZScpO1xyXG4gICAgaWYoZWxfdj09MilcclxuICAgIHtcclxuICAgICAgICAvL9GB0LTQtdC70LDRgtGMINGC0LXQutGD0YnQuNC8XHJcblxyXG4gICAgICAgICQoJy5jaGVjaGVyX3N1cHBseScpLnJlbW92ZUNsYXNzKCdjaGVjaGVyX3N1cHBseScpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICAgICAgJC5jb29raWUoXCJjdXJyZW50X3N1cHBseV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG4gICAgICAgIENvb2tpZUxpc3QoXCJjdXJyZW50X3N1cHBseV9cIitpdSxpZF9zb3BseSwnYWRkJyk7XHJcblxyXG4gICAgICAgICQoJy5zY29yZV9hY3RpdmUnKS5yZW1vdmVDbGFzcygnc2NvcmVfYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnW3JlbF9zY29yZT0nK2lkX3NvcGx5KyddJykuYWRkQ2xhc3MoJ3Njb3JlX2FjdGl2ZScpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWRfc29wbHk7XHJcbiAgICAgICAgQWpheENsaWVudCgnc3VwcGx5JywnY3VycmVudF9zb3BseScsJ0dFVCcsZGF0YSwnQWZ0ZXJjdXJyZW50X3NvcGx5JyxpZF9zb3BseSwwKTtcclxuICAgIH1cclxuICAgIGlmKGVsX3Y9PTMpXHJcbiAgICB7XHJcblxyXG4gICAgICAgIC8v0YHQvtCz0LvQsNGB0L7QstCw0YLRjCDRgdGH0LXRglxyXG4gICAgICAgIHZhciBpZF9hY2Nfcz0gJCh0aGlzKS5wYXJlbnRzKCcubWVudV9zdXBwbHknKS5wcmV2KCkuYXR0cigncmVsX3Njb3JlJyk7XHJcbiAgICAgICAgLy9hbGVydChpZF9hY2Nfcyk7XHJcbiAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9zaWduX2FjYy5waHA/aWQ9JyArIGlkX2FjY19zLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH1cclxuICAgIGlmKGVsX3Y9PTEpXHJcbiAgICB7XHJcblxyXG4gICAgICAgIC8v0L7RgtC60YDRi9GC0Ywg0YHRh9C10YJcclxuICAgICAgICAkKCdbcmVsX3Njb3JlPScraWRfc29wbHkrJ106Zmlyc3QnKS5maW5kKCdmb3JtJykuc3VibWl0KCk7XHJcblxyXG4vKlxyXG4gICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fdXBkYXRlX3NvcGx5LnBocD9pZD0nK2lkX3NvcGx5LFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgKi9cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICBpZihlbF92PT00KVxyXG4gICAge1xyXG4gICAgICAgIC8v0YPQtNCw0LvQuNGC0Ywg0YHRh9C10YJcclxuXHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9kZWxsX3NvcGx5LnBocD9pZD0nK2lkX3NvcGx5LFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWRfc29wbHk7XHJcbiAgICAgICAgLy9BamF4Q2xpZW50KCdzdXBwbHknLCdkZWxsX3NvcGx5JywnR0VUJyxkYXRhLCdBZnRlcmRlbGxfc29wbHknLGlkX3NvcGx5LDApO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0YHQvtCz0LvQsNGB0L7QstCw0YLRjCDRgdGH0LXRglxyXG4vKlxyXG5mdW5jdGlvbiBBZnRlcmFwcF9zb3BseShkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnW3JlbF9zY29yZT0nK3VwZGF0ZSsnXScpLmFkZENsYXNzKCdzY29yZV9hcHAnKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBoZj0kKCdbcmVsX3Njb3JlPScrdXBkYXRlKyddJykucGFyZW50cygnW3N1cHBseV9zdG9ja10nKTtcclxuICAgICAgICBoZi5lYWNoKGZ1bmN0aW9uKGksZWxlbSkge1xyXG4gICAgICAgICAgICB2YXIgcnR0dD0kKHRoaXMpLmF0dHIoJ3N1cHBseV9zdG9jaycpO1xyXG4gICAgICAgICAgICB2YXIgaGYxPSBbXTtcclxuICAgICAgICAgICAgaGYxPXJ0dHQuc3BsaXQoJ18nKTtcclxuICAgICAgICAgICAgLy9hbGVydChoZjFbMF0pO1xyXG4gICAgICAgICAgICBVcGRhdGVTdGF0dXNBREEoaGYxWzBdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9hbGVydChoZi5sZW5ndGgpO1xyXG5cclxuICAgICAgICAvL3ZhciBoZjE9aGYuc3BsaXQoJ18nKTtcclxuICAgICAgICAvL2FsZXJ0KGhmMVswXSk7XHJcbiAgICAgICAgLy9VcGRhdGVTdGF0dXNBREEoaGYxWzBdKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcblxyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jyt1cGRhdGUrJ10nKS5uZXh0KCkuZmluZCgnW3JlbD0yXScpLnBhcmVudHMoJ2xpJykuaGlkZSgpO1xyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jyt1cGRhdGUrJ10nKS5uZXh0KCkuZmluZCgnW3JlbD0zXScpLnBhcmVudHMoJ2xpJykuaGlkZSgpO1xyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jyt1cGRhdGUrJ10nKS5uZXh0KCkuZmluZCgnW3JlbD00XScpLnBhcmVudHMoJ2xpJykuaGlkZSgpO1xyXG5cclxuICAgICAgICB2YXIgY29va2llX2ZsYWdfY3VycmVudCA9ICQuY29va2llKCdjdXJyZW50X3N1cHBseV8nK2l1KTtcclxuICAgICAgICBpZigoY29va2llX2ZsYWdfY3VycmVudCE9bnVsbCkmJihjb29raWVfZmxhZ19jdXJyZW50PT11cGRhdGUpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJC5jb29raWUoXCJjdXJyZW50X3N1cHBseV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG4gICAgICAgICAgICAkLmNvb2tpZShcImJhc2tldF9zY29yZV9cIitpdSwgbnVsbCwge3BhdGg6Jy8nLGRvbWFpbjogd2luZG93LmlzX3Nlc3Npb24sc2VjdXJlOiBmYWxzZSxzYW1lc2l0ZTonbGF4J30pO1xyXG4gICAgICAgICAgICAkLmNvb2tpZShcImJhc2tldF9zdXBwbHlfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHJcbiAgICAgICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuZmluZCgnLm51bWJlcl9zY29yZScpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICQoJy5jdXJyZW50X3Njb3JlJykuZmluZCgnLmNvdW50X251bWJfc2NvcmUnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAkKCcuY3VycmVudF9zY29yZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLm1vcmVfc3VwcGx5MicpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICQoJy5jaGVjaGVyX3N1cHBseScpLnJlbW92ZUNsYXNzKCdjaGVjaGVyX3N1cHBseScpO1xyXG4gICAgICAgICAgICAkKCcuc2NvcmVfYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3Njb3JlX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlkX21hdGVvPScnO1xyXG4gICAgICAgICQoJ1tyZWxfc2NvcmU9Jyt1cGRhdGUrJ10nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYoaW5kZXg9PTApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkX21hdGVvPWlkX21hdGVvKyQodGhpcykucGFyZW50cygnW3N1cHBseV9pZF0nKS5hdHRyKCdzdXBwbHlfaWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkX21hdGVvPWlkX21hdGVvKycuJyskKHRoaXMpLnBhcmVudHMoJ1tzdXBwbHlfaWRdJykuYXR0cignc3VwcGx5X2lkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSd1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJmlkPScraWRfbWF0ZW87XHJcbiAgICAgICAgQWpheENsaWVudCgnc3VwcGx5JywndXBkYXRlX3N0YXR1cycsJ0dFVCcsZGF0YSwnQWZ0ZXJ1cGRhdGVfc3RhdHVzJyxpZF9tYXRlbywwKTtcclxuXHJcbiAgICB9XHJcbiAgICBpZiAoIGRhdGEuc3RhdHVzPT0nZXJyb3InIClcclxuICAgIHtcclxuXHJcbiAgICB9XHJcbn1cclxuKi9cclxuLy/QvtCx0L3QvtCy0LjRgtGMINGB0LrQvtC70YzQutC+INC+0YHRgtCw0LvQvtGB0Ywg0YHQutC+0LvRjNC60L4g0L3QsCDRgdC60LvQsNC00LUg0Lgg0YLQsNC6INC00LDQu9C10LVcclxuZnVuY3Rpb24gVXBkYXRlU3RhdHVzQURBKGlkKVxyXG57XHJcbiAgICBpZihpZCE9MClcclxuICAgIHtcclxuICAgICAgICAkKCdbaWRfYWRhPScraWQrJ10nKS5oaWRlKCkuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJsb2FkZXJfaW50ZXJcIj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgIHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2lkO1xyXG4gICAgICAgIEFqYXhDbGllbnQoJ3N1cHBseScsJ3VwZGF0ZV9hZGEnLCdHRVQnLGRhdGEsJ0FmdGVyVXBkYXRlU3RhdHVzQURBJyxpZCwwKTtcclxuICAgIH1cclxufVxyXG5cclxuLy/QvtCx0L3QvtCy0LvQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/QviDRgdC60LvQsNC00YMg0Lgg0L/QviDQt9Cw0Y/QstC60LDQvFxyXG5mdW5jdGlvbiBBZnRlclVwZGF0ZVN0YXR1c0FEQShkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J2Vycm9yJyApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLmxvYWRlcl9pbnRlcicpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuICAgICAgICAkKCdbaWRfYWRhPScrdXBkYXRlKyddJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5lY2hvKTtcclxuICAgICAgICBUb29sVGlwKCk7XHJcbiAgICAgICAgJCgnLmxvYWRlcl9pbnRlcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICQoJ1tpZF9hZGE9Jyt1cGRhdGUrJ10nKS5zaG93KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0YHQtNC10LvQsNGC0Ywg0YLQtdC60YPRidC40LxcclxuZnVuY3Rpb24gQWZ0ZXJjdXJyZW50X3NvcGx5KGRhdGEsdXBkYXRlKVxyXG57XHJcbiAgICBpZiAoIGRhdGEuc3RhdHVzPT0ncmVnJyApXHJcbiAgICB7XHJcbiAgICAgICAgV2luZG93TG9naW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGRhdGEuc3RhdHVzPT0nb2snIClcclxuICAgIHtcclxuICAgICAgICB2YXIgaXU9JCgnLmNvbnRlbnRfYmxvY2snKS5hdHRyKCdpdScpO1xyXG4gICAgICAgICQoJy5qcy1iYXNrZXQtc3VwcGx5LWFjYycpLnNob3coKTtcclxuICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5maW5kKCcuZG9wLTIxJykuZW1wdHkoKS5hcHBlbmQoJzxsYWJlbD7RgtC10LrRg9GJ0LjQuSDRgdGH0LXRgjwvbGFiZWw+JytkYXRhLnN0YXR1c19lY2hvKTtcclxuICAgICAgICAkKCcuanMtYmFza2V0LXN1cHBseS1hY2MnKS5maW5kKCdpJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5jb3VudCk7XHJcbiAgICAgICAvLyAkKCcuY3VycmVudF9zY29yZScpLnNob3coKTtcclxuXHJcbiAgICAgICAgJC5jb29raWUoXCJiYXNrZXRfc2NvcmVfXCIraXUsIG51bGwsIHtwYXRoOicvJyxkb21haW46IHdpbmRvdy5pc19zZXNzaW9uLHNlY3VyZTogZmFsc2Usc2FtZXNpdGU6J2xheCd9KTtcclxuXHJcbiAgICAgICAgQ29va2llTGlzdChcImJhc2tldF9zY29yZV9cIitpdSxkYXRhLmJhc2tldCwnYWRkJyk7XHJcblxyXG4gICAgICAgIC8v0LLRi9C00LXQu9C40YLRjCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDQtdGB0LvQuCDQvtC90Lgg0LXRgdGC0Ywg0L3QsCDRgdGC0YDQsNC90LjRhtC1INGBINGC0LDQutC40LzQuCBpZFxyXG4gICAgICAgIHZhciBjYyA9IGRhdGEuYmFza2V0LnNwbGl0KCcuJyk7XHJcbiAgICAgICAgZm9yICggdmFyIHQgPSAwOyB0IDwgY2MubGVuZ3RoOyB0KysgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCgnW3N1cHBseV9pZD0nK2NjW3RdKyddJykuYWRkQ2xhc3MoJ2NoZWNoZXJfc3VwcGx5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJhc2tldF9zdXBwbHkoKTtcclxuICAgIH1cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdlcnJvcicgKVxyXG4gICAge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHRla19hY2MoaWQpXHJcbntcclxuXHJcbiAgICAkKCcuY2hlY2hlcl9zdXBwbHknKS5yZW1vdmVDbGFzcygnY2hlY2hlcl9zdXBwbHknKTtcclxuXHJcblxyXG5cclxuICAgIHZhciBpdT0kKCcuY29udGVudF9ibG9jaycpLmF0dHIoJ2l1Jyk7XHJcbiAgICAkLmNvb2tpZShcImN1cnJlbnRfc3VwcGx5X1wiK2l1LCBudWxsLCB7cGF0aDonLycsZG9tYWluOiB3aW5kb3cuaXNfc2Vzc2lvbixzZWN1cmU6IGZhbHNlLHNhbWVzaXRlOidsYXgnfSk7XHJcbiAgICBDb29raWVMaXN0KFwiY3VycmVudF9zdXBwbHlfXCIraXUsaWQsJ2FkZCcpO1xyXG5cclxuICAgICQoJy5zY29yZV9hY3RpdmUnKS5yZW1vdmVDbGFzcygnc2NvcmVfYWN0aXZlJyk7XHJcbiAgICAkKCdbcmVsX3Njb3JlPScraWQrJ10nKS5hZGRDbGFzcygnc2NvcmVfYWN0aXZlJyk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIHZhciBkYXRhID0ndXJsPScrd2luZG93LmxvY2F0aW9uLmhyZWYrJyZpZD0nK2lkO1xyXG4gICAgQWpheENsaWVudCgnc3VwcGx5JywnY3VycmVudF9zb3BseScsJ0dFVCcsZGF0YSwnQWZ0ZXJjdXJyZW50X3NvcGx5JyxpZCwwKTtcclxuXHJcblxyXG59IiwiJChmdW5jdGlvbiAoKXtcclxuXHJcbiAgICAvL9GE0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40LUg0YLRg9GA0LAgLSDQstGL0LHQvtGAINC/0LDRgdC/0L7RgNGCINC60LDQutC+0LlcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtcGFzc3dvcmQtdGVuZGVyJyxwYXNzd29yZF90ZW5kZXIpO1xyXG4gICAgLy/QvdC+0LLRi9C5INGB0YLQsNGA0YvQuSDQv9C+0YHRgtCw0LLRidC40LpcclxuXHJcbiAgICAkKCdib2R5Jykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLmpzLWFkZC10ZW5kZXInLGFkZF90ZW5kZXJfMjAyMSk7XHJcbiAgICAvL9C90LDQsdC+0YAg0YLQtdC60YHRgtCwINCyINC/0L7QuNGB0LrQtVxyXG5cclxuXHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtYWRkLXRlbmRlci1zYXZlJyxzYXZlX3RlbmRlcik7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtZWRpdC10ZW5kZXItbW9yZScsZWRpdF9tb3JlX3RlbmRlcik7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy50YWJzXzAwN1UnLHtrZXk6IFwiMDA3VVwifSx0YWJzX3RlbmRlcik7XHJcblxyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtcmVqZWN0LXRlbmRlcicsUmVqZWN0Rm9EKTtcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtZm9yd2FyZC10ZW5kZXInLEZvcndhcmRGb0QpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtc2lnbi1hMicsU2luZ0ZvRCk7XHJcblxyXG5cclxuXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gYWRkX3RlbmRlcl8yMDIxKClcclxue1xyXG4gICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX3RlbmRlcl8yMDIxLnBocCcsXHJcbiAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcblxyXG4vL9C+0YLQutC70L7QvdC40YLRjCDQt9Cw0Y/QstC60YNcclxuZnVuY3Rpb24gUmVqZWN0Rm9EKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF90ZW5kZXJfcmVqZWN0LnBocD9pZD0nICsgcHJlLFxyXG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5hZGRDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBCb2R5U2Nyb29sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vL9C/0LXRgNC10YHQu9Cw0YLRjCDQt9Cw0Y/QstC60YNcclxuZnVuY3Rpb24gRm9yd2FyZEZvRCgpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIHByZSA9ICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyk7XHJcbiAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgdXJsOiAnZm9ybXMvZm9ybV9hZGRfdGVuZGVyX2ZvcndhcmQucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gU2luZ0ZvRCgpXHJcbntcclxuICAgIGlmKCEkKHRoaXMpLmlzKCcuZ3JheS1iYicpKSB7XHJcbiAgICAgICAgdmFyIGZvID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoIWZvLmhhc0NsYXNzKFwiZ3JheS1iYlwiKSkge1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICAgICAgaWYgKGZvLmZpbmQoJ2lucHV0JykudmFsKCkgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDQvtC60L3QviDQtNC70Y8g0LLQv9C40YHQsNC90LjQtSDQt9Cw0LzQtdGH0LDQvdC40Y9cclxuICAgICAgICAgICAgICAgIHZhciBwcmUgPSAkKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAgICAgJC5hcmN0aWNtb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX3RlbmRlcl9yZW1hcmsucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60Lgg0YTQvtGA0LzRiyDRgSBhamF4INC30LDQs9GA0YPQt9GH0LjQulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJvZHkucGFyZW50cygnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmFkZENsYXNzKCd5b2knKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/QntGC0L/RgNCw0LLQuNGC0Ywg0L/RgNGP0LzRg9GOINGE0L7RgNC80YMg0L3QsCDRgdC+0LPQu9Cw0YHQvtCy0LDQvdC40LVcclxuICAgICAgICAgICAgICAgICQoJyNqcy1mb3JtLW5leHQtc2lnbicpLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8v0YLQsNCx0YHRiyDQsiDQvtCx0YDQsNGJ0LXQvdC40Y/RhVxyXG52YXIgdGFic190ZW5kZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgLy9ldmVudC5kYXRhLmtleVxyXG5cclxuICAgIHZhciB1b289JCh0aGlzKS5hdHRyKFwiaWRcIik7XHJcblxyXG5cclxuICAgIGlmKHVvbyE9MCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykuYWRkQ2xhc3MoJ2FjdGl2ZS10cmlwcy1tZW51Jyk7XHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICQodGhpcykuaXMoXCIuYWN0aXZlXCIpIClcclxuICAgIHtcclxuICAgICAgICAvL9GD0LbQtSDQsNC60YLQuNCy0L3QsNGPINCy0LrQu9Cw0LTQutCwXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIC8vYWxlcnQoZXZlbnQuZGF0YS5rZXkpO1xyXG4gICAgICAgIGlmKHVvbyE9MCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLm5leHQoKS5lbXB0eSgpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJfbG9hZGluZ19zbWFsbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IGxlZnQ6IGNhbGMoNTAlIC0gMzBweCk7IFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLnNsaWRlRG93bihcInNsb3dcIik7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mb3JtJytldmVudC5kYXRhLmtleSsnIC5weF9iZycpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX3NtYWxsXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV93cmFwcGVyX3NtYWxsXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfb25lX3NtYWxsIGJfbG9hZGluZ19jaXJjbGVfZGVsYXllZF9zbWFsbFwiPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuanMtdGFicy1tZW51JykuZmluZCgnLnRhYnNfJyArIGV2ZW50LmRhdGEua2V5ICsgJ1tpZD0nICsgdW9vICsgJ10nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAvL3ZhciBrZXlfPScwMDJVJztcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gJ3VybD0nICsgd2luZG93LmxvY2F0aW9uLmhyZWYgKyAnJmlkX3RhYnM9JyArICQodGhpcykuYXR0cihcImlkXCIpICtcclxuICAgICAgICAgICAgICAgICcmaWQ9JyArICQodGhpcykucGFyZW50cygnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAgICAgLy9hbGVydChkYXRhKTtcclxuICAgICAgICAgICAgQWpheENsaWVudCgndGVuZGVyJywndGFic19pbmZvJywnR0VUJyxkYXRhLCdBZnRlclRhYnNJbmZvdGVuZGVyJywkKHRoaXMpLmF0dHIoXCJpZFwiKSsnLCcrJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpLDAsMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL9C/0L7RgdGC0YTRg9C90LrRhtC40Y8g0LLQutC70LDQtNC60Lgg0LIg0L7QsdGA0LDRidC10L3QuNGP0YVcclxuZnVuY3Rpb24gQWZ0ZXJUYWJzSW5mb3RlbmRlcihkYXRhLHVwZGF0ZSlcclxue1xyXG4gICAgaWYodXBkYXRlIT1udWxsKXsgaWYgKHR5cGVvZih1cGRhdGUpID09IFwic3RyaW5nXCIpIHsgdXBkYXRlID0gdXBkYXRlLnNwbGl0KCcsJyk7IH0gZWxzZSB7IHVwZGF0ZVswXT11cGRhdGU7IH0gfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdyZWcnIClcclxuICAgIHtcclxuICAgICAgICBXaW5kb3dMb2dpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZGF0YS5zdGF0dXM9PSdvaycgKVxyXG4gICAge1xyXG4gICAgICAgICQoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsW2lkX3ByZT0nK3VwZGF0ZVsxXSsnXScpLmZpbmQoJy5weF9iZ190cmlwcycpLmVtcHR5KCkuYXBwZW5kKGRhdGEucXVlcnkpO1xyXG4gICAgICAgIC8vJCgnLmZvcm0nK3VwZGF0ZVsxXSsnIC5weF9iZycpLmVtcHR5KCkuYXBwZW5kKGRhdGEucXVlcnkpO1xyXG5cclxuICAgICAgICAvLyQoJy5jaGFfMScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy53YWxsZXRfY2hlY2tib3gnLHdhbGxldF9jaGVja2JveCk7XHJcblxyXG4gICAgICAgIC8vJCgnLmZvcm0nK3VwZGF0ZVsxXSsnIC5qcy10YWJzX2RvY2MnKS5oaWRlKCk7XHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLmpzLXRhYnNfJyt1cGRhdGVbMF0pLnNob3coKTtcclxuXHJcbiAgICAgICAgTnVtYmVyQmxvY2tGaWxlKCk7XHJcbiAgICAgICAgVG9vbFRpcCgpO1xyXG4gICAgICAgIGlmKCh1cGRhdGVbMF09PTMpfHwodXBkYXRlWzBdPT00KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS51bmJpbmQoJ2NsaWNrLnN5cycpO1xyXG4gICAgICAgICAgICAkKFwiLnNsY3RcIikuYmluZCgnY2xpY2suc3lzJywgc2xjdGNsaWNrKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICQoXCIuZHJvcFwiKS5maW5kKFwibGlcIikuYmluZCgnY2xpY2snLCBkcm9wbGkpO1xyXG4gICAgICAgICAgICAvLyQoJyN0eXBlc2F5JykudW5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXkpO1xyXG4gICAgICAgICAgICAvLyQoJyN0eXBlc2F5JykuYmluZCgnY2hhbmdlJywgY2hhbmdlc2F5KTtcclxuICAgICAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdF9tb3JlX3RlbmRlcigpXHJcbntcclxuICAgIHZhciBvcHBmPSQodGhpcykucGFyZW50cygnW2lkX3ByZV0nKS5hdHRyKFwiaWRfcHJlXCIpO1xyXG5cclxuICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2VkaXRfdGVuZGVyX21vcmUucGhwP2lkPScgKyBvcHBmLFxyXG4gICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vL9GB0L7RhdGA0LDQvdC40YLRjCDRgdGH0LXRgiDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC60L7Qu9C40YfQtdGB0YLQstCwXHJcbmZ1bmN0aW9uIHNhdmVfdGVuZGVyKClcclxue1xyXG4gICAgdmFyIGVyciA9IDA7XHJcbiAgICAkKCcuanMtc2F2ZS1mb3JtLXRlbmRlcicpLmZpbmQoJy5nbG9hYicpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgaWYoKCQodGhpcykudmFsKCkgPT0gJycpfHwoJCh0aGlzKS52YWwoKSA9PSAnMCcpKSB7ICQodGhpcykucGFyZW50cygnLmlucHV0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5hZGRDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO1xyXG4gICAgICAgICAgICBlcnIrKztcclxuICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDIxJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMjEnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMjEnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAyMScpO31cclxuICAgIH0pO1xyXG5cclxuICAgIGlmKGVycj09MCkge1xyXG5cclxuICAgICAgICAkKCcuanMtc2F2ZS1mb3JtLXRlbmRlcicpLnN1Ym1pdCgpO1xyXG5cclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGFsZXJ0X21lc3NhZ2UoJ2Vycm9yJywn0J3QtSDQstGB0LUg0L/QvtC70Y8g0LfQsNC/0L7Qu9C90LXQvdGLJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8v0LLRi9Cx0L7RgCDQutCw0LrQvtC5INC/0LDRgdC/0L7RgNGCXHJcbmZ1bmN0aW9uIHBhc3N3b3JkX3RlbmRlcigpXHJcbntcclxuICAgIHZhciBjYl9oPSQodGhpcykucGFyZW50cygnLnBhc3N3b3JkX3RlbmRlcicpLmZpbmQoJ2lucHV0Jyk7XHJcbiAgICBpZihjYl9oLnZhbCgpIT0kKHRoaXMpLmF0dHIoJ2lkJykpXHJcbiAgICB7XHJcbiAgICAgICAgY2JfaC52YWwoJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucGFzc3dvcmRfdGVuZGVyJykuZmluZCgnLmNob2ljZS1yYWRpbyBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV90YXNrX2NiJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucGFzc3dvcmRfdGVuZGVyJykuZmluZCgnLmlucHV0LWNob2ljZS1jbGljay1wYXNzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZV9wYXNzJyk7XHJcblxyXG4gICAgICAgICQodGhpcykuZmluZCgnLmNob2ljZS1yYWRpbyBpJykuYWRkQ2xhc3MoJ2FjdGl2ZV90YXNrX2NiJyk7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlX3Bhc3MnKTtcclxuICAgICAgICB2aWV3X3R5cGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuLy/QvNC10L3RjiDQvtGC0LrRgNGL0YLQuNC1INCy0L3QuNC30YMg0LHQu9C+0LrQsCDQvdCw0YDRj9C00LBcclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcudGFic18wMDlVJyx7a2V5OiBcIjAwOVVcIn0sdGFic193b3JkZXIpO1xyXG4gICAgLy/QvtGC0LrRgNGL0YLRjCDQutCw0LvQtdC90LTQsNGA0Ywg0L/QtdGA0LjQvtC0XHJcbiAgICAkKCdib2R5Jykub24oXCJjbGlja1wiLCcuY2FsX3JhbmdfMjAyMScsY2FsY19vcGVuXzIwMjFfcmFuZyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5tZW51X2pqcyAuanMtbWVudS1qanMtcHJpbnQnLG1lbnVfcHJpbnQpO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtcmVqZWN0LXdvcmRlcicsUmVqZWN0V28pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGlja1wiLCcuanMtZm9yd2FyZC13b3JkZXInLEZvcndhcmRXbyk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1zaWduLXdvcmRlcicsU2luZ1dvKTtcclxuXHJcblxyXG4gICAgJCgnYm9keScpLm9uKFwiY2hhbmdlIGtleXVwIGlucHV0IGNsaWNrXCIsJy5qcy1zaWduLXNlYWwnLFNlYWxXbyk7XHJcblxyXG5cclxuICAgIC8v0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMINC90LDRgNGP0LQg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHJcbiAgICAkKFwiLmpzLWFkZC13b3JkZXJcIikuYmluZCgnY2xpY2snLCBzYXZlX3dvcmRlcik7XHJcblxyXG4gICAgc2V0VGltZW91dCAoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL9C10YHQu9C4INC/0LXRgNC10YXQvtC0INCyINC70Y7QsdC+0LUg0YDQtdC00LDQutGC0LjRgNGD0LXQvNC+0LUg0L/QvtC70LUg0L3QsNGA0Y/QtNCwINGC0L4g0YHQsdGA0LDRgdGL0LLQsNGC0Ywg0LrQvdC+0L/QutGDINC/0L7QtNC/0LjRgdCw0YLRjCDQuCDQv9C+0LrQsNC30YvQstCw0YLRjCDQutC90L7Qv9C60YMg0YHQvtGF0YDQsNC90LjRgtGMXHJcbiAgICAkKCcubXlfbm8nKS5vbihcImNoYW5nZSBrZXl1cCBpbnB1dCBjbGljay5uYXJ5ZFwiLCcuY291bnRfZmluZXJ5X21hdGVyXywucHJpY2VfZmluZXJ5X21hdGVyXywudGV4dF9maW5lcnlfbWVzc2FnZV8sLmNvdW50X2ZpbmVyeV8sLnByaWNlX2ZpbmVyeV8sLnNsY3RfYm94LCNkYXRlX3RhYmxlLCNkYXRlX3RhYmxlMSxbbmFtZT1pc3BvbF93b3JrXSwuanMtd29yZGVyLTIwLTInLFxyXG5cclxuICAgIGZ1bmN0aW9uKCl7ICBpZigoJCh0aGlzKS5hdHRyKCdyZWFkb25seScpPT11bmRlZmluZWQpfHwoKCQodGhpcykuYXR0cignZGlzYWJsZWQnKT09dW5kZWZpbmVkKSYmKCgkKHRoaXMpLmlzKCcuY2FsX3JhbmdfMjAyMScpKXx8KCQodGhpcykuaXMoJy5jYWxfMjAyMScpKSkpKSB7ICAkKCcucG9kX3pheScpLmhpZGUoKTsgJCgnLmFkZF96YXknKS5zaG93KCk7IH0gICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgKTtcclxuXHJcblxyXG59LCAyMDAwICk7XHJcblxyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBtZW51X3ByaW50KGV2ZW50KVxyXG57XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIHZhciByZWw9JCh0aGlzKS5maW5kKCdhJykuYXR0cigncmVsJyk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBTaW5nV28oKVxyXG57XHJcbiAgICBpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG4gICAgICAgIHZhciBmbyA9ICQodGhpcyk7XHJcbiAgICAgICAgaWYgKCFmby5oYXNDbGFzcyhcImdyYXktYmJcIikpIHtcclxuICAgICAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgICAgICAgICAgIGlmIChmby5maW5kKCdpbnB1dCcpLnZhbCgpID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8v0L7RgtC60YDRi9GC0Ywg0L7QutC90L4g0LTQu9GPINCy0L/QuNGB0LDQvdC40LUg0LfQsNC80LXRh9Cw0L3QuNGPXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAgICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhamF4JyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF93b3JkZXJfcmVtYXJrLnBocD9pZD0nICsgcHJlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIChkYXRhLCBlbCkgeyAvLyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAgQXJjdGljTW9kYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v0J7RgtC/0YDQsNCy0LjRgtGMINC/0YDRj9C80YPRjiDRhNC+0YDQvNGDINC90LAg0YHQvtCz0LvQsNGB0L7QstCw0L3QuNC1XHJcbiAgICAgICAgICAgICAgICAkKCcjanMtZm9ybS1uZXh0LXNpZ24nKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gU2VhbFdvKClcclxue1xyXG4gICAgLy/QntGC0L/RgNCw0LLQuNGC0Ywg0L/RgNGP0LzRg9GOINGE0L7RgNC80YMg0L3QsCDRgdC+0LPQu9Cw0YHQvtCy0LDQvdC40LVcclxuICAgICQoJyNsYWxhbGFfc2VhbF9mb3JtJykuc3VibWl0KCk7XHJcbn1cclxuXHJcblxyXG4vL9C/0LXRgNC10YHQu9Cw0YLRjCDQt9Cw0Y/QstC60YNcclxuZnVuY3Rpb24gRm9yd2FyZFdvKClcclxue1xyXG4gICAgaWYoISQodGhpcykuaXMoJy5ncmF5LWJiJykpIHtcclxuICAgICAgICB2YXIgcHJlID0gJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWwnKS5hdHRyKCdpZF9wcmUnKTtcclxuICAgICAgICAkLmFyY3RpY21vZGFsKHtcclxuICAgICAgICAgICAgdHlwZTogJ2FqYXgnLFxyXG4gICAgICAgICAgICB1cmw6ICdmb3Jtcy9mb3JtX2FkZF93b3JkZXJfZm9yd2FyZC5waHA/aWQ9JyArIHByZSxcclxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheCDQt9Cw0LPRgNGD0LfRh9C40LpcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhX2Zvcm1zJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGExX2Zvcm1zJykuYWRkQ2xhc3MoJ3NlbGVjdF9hZGEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkaW5nOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHtcclxuICAgICAgICAgICAgICAgIC8v0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4INGE0L7RgNC80Ysg0YEgYWpheFxyXG4gICAgICAgICAgICAgICAgZGF0YS5ib2R5LnBhcmVudHMoJy5hcmN0aWNtb2RhbC1jb250YWluZXInKS5hZGRDbGFzcygneW9pJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLnJlbW92ZUNsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiAoZGF0YSwgZWwpIHsgLy8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LrQvdCwIEFyY3RpY01vZGFsXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVySWQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQm9keVNjcm9vbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUmVqZWN0V28oKVxyXG57XHJcbiAgICBpZighJCh0aGlzKS5pcygnLmdyYXktYmInKSkge1xyXG4gICAgICAgIHZhciBwcmUgPSAkKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICQuYXJjdGljbW9kYWwoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYWpheCcsXHJcbiAgICAgICAgICAgIHVybDogJ2Zvcm1zL2Zvcm1fYWRkX3dvcmRlcl9yZWplY3QucGhwP2lkPScgKyBwcmUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChkYXRhLCBlbCkge1xyXG4gICAgICAgICAgICAgICAgLy/QstC+INCy0YDQtdC80Y8g0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXgg0LfQsNCz0YDRg9C30YfQuNC6XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYV9mb3JtcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkZXJfYWRhMV9mb3JtcycpLmFkZENsYXNzKCdzZWxlY3RfYWRhJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFmdGVyTG9hZGluZzogZnVuY3Rpb24gKGRhdGEsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNC+0YDQvNGLINGBIGFqYXhcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9keS5wYXJlbnRzKCcuYXJjdGljbW9kYWwtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3lvaScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRlcl9hZGFfZm9ybXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGVyX2FkYTFfZm9ybXMnKS5yZW1vdmVDbGFzcygnc2VsZWN0X2FkYScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gKGRhdGEsIGVsKSB7IC8vINC/0L7RgdC70LUg0LfQsNC60YDRi9GC0LjRjyDQvtC60L3QsCBBcmN0aWNNb2RhbFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lcklkICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJvZHlTY3Jvb2woKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vL9GB0L7RhdGA0LDQvdC40YLRjCDQt9Cw0Y/QstC60YMg0L3QsCDQvNCw0YLQtdGA0LjQsNC7XHJcbnZhciBzYXZlX3dvcmRlciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgdmFyIGVycm9yPTA7XHJcblxyXG4gICAgJCgnLm1lc3NhOnZpc2libGUnKS5maW5kKCcudGV4dF9maW5lcnlfbWVzc2FnZV8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICQoJy5tZXNzYTp2aXNpYmxlJykuZmluZCgnLnRleHRfZmluZXJ5X21lc3NhZ2VfJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuXHJcbiAgICAgICAgdmFyIHRleHQ9JCh0aGlzKS52YWwoKTtcclxuICAgICAgICBpZih0ZXh0PT0nJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcud29ya19fcycpLmZpbmQoJy5wcmljZV9maW5lcnlfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAkKCcud29ya19fcycpLmZpbmQoJy5jb3VudF9maW5lcnlfJykucmVtb3ZlQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAkKCcubWF0JykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICQoJy5tYXQnKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG5cclxuICAgICQoJy5tZXNzYTp2aXNpYmxlJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICB2YXIgaWRfd29yaz0kKHRoaXMpLmF0dHIoJ2lkX21lcycpO1xyXG4gICAgICAgIC8v0L/RgNC+0LLQtdGA0LjQvCDRh9GC0L4g0LLRgdC1INC/0L7Qu9GPINC00LvRjyDQutCw0LbQtNC+0Lkg0YHQu9GD0LbQtdCx0L3QvtC5INC30LDQv9C40YHQutC4INC30LDQv9C+0LvQvdC10L3Ri1xyXG5cclxuXHJcbiAgICAgICAgLy/QvtC/0YDQtdC00LXQu9C40Lwg0L7RgtC90L7RgdGC0LjQvNGB0Y8g0LfQsNC/0LjRgdC60LAg0Log0YDQsNCx0L7RgtC1INC40LvQuCDQvNCw0YLQtdGA0LjQsNC70YNcclxuICAgICAgICB2YXIgYWEgPSBpZF93b3JrLnNwbGl0KCdfJyk7XHJcbiAgICAgICAgaWYoYWEubGVuZ3RoPT0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy/RjdGC0L4g0YDQsNCx0L7RgtCwXHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL9C80LDRgtC10YDQuNCw0LtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWRfd29yaz1hYVswXTtcclxuXHJcbiAgICAgICAgdmFyIGNvdW50PSQoJy53b3JrX19zW3JlbF9pZD0nK2lkX3dvcmsrJ10nKS5maW5kKCcuY291bnRfZmluZXJ5XycpLnZhbCgpO1xyXG4gICAgICAgIHZhciBwcmljZT0kKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV8nKS52YWwoKTtcclxuICAgICAgICAkKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAkKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLmNvdW50X2ZpbmVyeV8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICBpZigoY291bnQ9PTApfHwoY291bnQ9PScnKXx8KCEkLmlzTnVtZXJpYyhjb3VudCkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJCgnLndvcmtfX3NbcmVsX2lkPScraWRfd29yaysnXScpLmZpbmQoJy5jb3VudF9maW5lcnlfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKChwcmljZT09MCl8fChwcmljZT09JycpfHwoISQuaXNOdW1lcmljKHByaWNlKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcud29ya19fc1tyZWxfaWQ9JytpZF93b3JrKyddJykuZmluZCgnLnByaWNlX2ZpbmVyeV8nKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgZXJyb3I9MTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkKCcubWF0W3JlbF93PScraWRfd29yaysnXScpLmVhY2goZnVuY3Rpb24oaSxlbGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudD0kKHRoaXMpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBwcmljZT0kKHRoaXMpLmZpbmQoJy5wcmljZV9maW5lcnlfbWF0ZXJfJykudmFsKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5yZW1vdmVDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY291bnRfZmluZXJ5X21hdGVyXycpLnJlbW92ZUNsYXNzKCdlcnJvcl9mb3JtaScpO1xyXG4gICAgICAgICAgICAvL2lmKChjb3VudD09MCl8fChjb3VudD09JycpfHwoISQuaXNOdW1lcmljKGNvdW50KSkpXHJcblxyXG4gICAgICAgICAgICBpZigoY291bnQ9PScnKXx8KCEkLmlzTnVtZXJpYyhjb3VudCkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jb3VudF9maW5lcnlfbWF0ZXJfJykuYWRkQ2xhc3MoJ2Vycm9yX2Zvcm1pJyk7XHJcbiAgICAgICAgICAgICAgICBlcnJvcj0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGlmKChwcmljZT09MCl8fChwcmljZT09JycpfHwoISQuaXNOdW1lcmljKHByaWNlKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnByaWNlX2ZpbmVyeV9tYXRlcl8nKS5hZGRDbGFzcygnZXJyb3JfZm9ybWknKTtcclxuICAgICAgICAgICAgICAgIGVycm9yPTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH0pO1xyXG4gICAgJCgnLmpzLWFkZC13b3JkZXItbWF0ZXJpYWwgLmdsb2FiJykuZWFjaChmdW5jdGlvbihpLGVsZW0pIHtcclxuICAgICAgICBpZigkKHRoaXMpLnZhbCgpID09ICcnKSAgeyAkKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGlzdF8yMDE4JykuYWRkQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTtcclxuICAgICAgICAgICAgZXJyb3IrKztcclxuICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfSBlbHNlIHskKHRoaXMpLnBhcmVudHMoJy5pbnB1dF8yMDE4JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkX2luXzIwMTgnKTskKHRoaXMpLnBhcmVudHMoJy5saXN0XzIwMTgnKS5yZW1vdmVDbGFzcygncmVxdWlyZWRfaW5fMjAxOCcpO31cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBpZihlcnJvciE9MClcclxuICAgIHtcclxuXHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnZXJyb3InLCfQndC1INCy0YHQtSDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90YsnKTtcclxuXHJcbiAgICB9IGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKCcjbGFsYWxhX2FkZF9mb3JtJykuc3VibWl0KCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gY2FsY19vcGVuXzIwMjFfcmFuZygpIHtcclxuICAgIC8vYWxlcnRfbWVzc2FnZSgnb2snLCfQvtGC0LrRgNGL0YLRjCcpO1xyXG4gICAgJChcIiNkYXRlX3RhYmxlMVwiKS5zaG93KCk7XHJcbi8vJChcIiNkYXRlX3RhYmxlXCIpLmZvY3VzKCk7XHJcbiAgICAkKCcuYm9va2luZ0JveDEnKS5jc3Moe1xyXG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy/RgtCw0LHRgdGLINCyINC+0LHRgNCw0YnQtdC90LjRj9GFXHJcbnZhciB0YWJzX3dvcmRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAvL2V2ZW50LmRhdGEua2V5XHJcblxyXG4gICAgdmFyIHVvbz0kKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuXHJcblxyXG4gICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5hZGRDbGFzcygnYWN0aXZlLXRyaXBzLW1lbnUnKTtcclxuICAgIH0gZWxzZVxyXG4gICAge1xyXG5cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggJCh0aGlzKS5pcyhcIi5hY3RpdmVcIikgKVxyXG4gICAge1xyXG4gICAgICAgIC8v0YPQttC1INCw0LrRgtC40LLQvdCw0Y8g0LLQutC70LDQtNC60LBcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tbV93LXByZW9yZGVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUtdHJpcHMtbWVudScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy9hbGVydChldmVudC5kYXRhLmtleSk7XHJcbiAgICAgICAgaWYodW9vIT0wKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1tX3ctcHJlb3JkZXJzJykubmV4dCgpLmVtcHR5KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX3NtYWxsXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTsgbGVmdDogY2FsYyg1MCUgLSAzMHB4KTsgXCI+PGRpdiBjbGFzcz1cImJfbG9hZGluZ19jaXJjbGVfd3JhcHBlcl9zbWFsbFwiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX29uZV9zbWFsbCBiX2xvYWRpbmdfY2lyY2xlX2RlbGF5ZWRfc21hbGxcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubW1fdy1wcmVvcmRlcnMnKS5uZXh0KCkuc2xpZGVEb3duKFwic2xvd1wiKTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmZvcm0nK2V2ZW50LmRhdGEua2V5KycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfc21hbGxcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiPjxkaXYgY2xhc3M9XCJiX2xvYWRpbmdfY2lyY2xlX3dyYXBwZXJfc21hbGxcIj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYl9sb2FkaW5nX2NpcmNsZV9vbmVfc21hbGwgYl9sb2FkaW5nX2NpcmNsZV9kZWxheWVkX3NtYWxsXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmpzLXRhYnMtbWVudScpLmZpbmQoJy50YWJzXycgKyBldmVudC5kYXRhLmtleSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5qcy10YWJzLW1lbnUnKS5maW5kKCcudGFic18nICsgZXZlbnQuZGF0YS5rZXkgKyAnW2lkPScgKyB1b28gKyAnXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vdmFyIGtleV89JzAwMlUnO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSAndXJsPScgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArICcmaWRfdGFicz0nICsgJCh0aGlzKS5hdHRyKFwiaWRcIikgK1xyXG4gICAgICAgICAgICAgICAgJyZpZD0nICsgJCh0aGlzKS5wYXJlbnRzKCcucHJlb3JkZXJzX2Jsb2NrX2dsb2JhbCcpLmF0dHIoJ2lkX3ByZScpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICBBamF4Q2xpZW50KCd3b3JkZXInLCd0YWJzX2luZm8nLCdHRVQnLGRhdGEsJ0FmdGVyVGFic0luZm9Xb3JkZXInLCQodGhpcykuYXR0cihcImlkXCIpKycsJyskKHRoaXMpLnBhcmVudHMoJy5wcmVvcmRlcnNfYmxvY2tfZ2xvYmFsJykuYXR0cignaWRfcHJlJyksMCwxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8v0L/QvtGB0YLRhNGD0L3QutGG0LjRjyDQstC60LvQsNC00LrQuCDQsiDQvtCx0YDQsNGJ0LXQvdC40Y/RhVxyXG5mdW5jdGlvbiBBZnRlclRhYnNJbmZvV29yZGVyKGRhdGEsdXBkYXRlKVxyXG57XHJcbiAgICBpZih1cGRhdGUhPW51bGwpeyBpZiAodHlwZW9mKHVwZGF0ZSkgPT0gXCJzdHJpbmdcIikgeyB1cGRhdGUgPSB1cGRhdGUuc3BsaXQoJywnKTsgfSBlbHNlIHsgdXBkYXRlWzBdPXVwZGF0ZTsgfSB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J3JlZycgKVxyXG4gICAge1xyXG4gICAgICAgIFdpbmRvd0xvZ2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBkYXRhLnN0YXR1cz09J29rJyApXHJcbiAgICB7XHJcbiAgICAgICAgJCgnLnByZW9yZGVyc19ibG9ja19nbG9iYWxbaWRfcHJlPScrdXBkYXRlWzFdKyddJykuZmluZCgnLnB4X2JnX3RyaXBzJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLnB4X2JnJykuZW1wdHkoKS5hcHBlbmQoZGF0YS5xdWVyeSk7XHJcblxyXG4gICAgICAgIC8vJCgnLmNoYV8xJykub24oXCJjaGFuZ2Uga2V5dXAgaW5wdXQgY2xpY2tcIiwnLndhbGxldF9jaGVja2JveCcsd2FsbGV0X2NoZWNrYm94KTtcclxuXHJcbiAgICAgICAgLy8kKCcuZm9ybScrdXBkYXRlWzFdKycgLmpzLXRhYnNfZG9jYycpLmhpZGUoKTtcclxuICAgICAgICAvLyQoJy5mb3JtJyt1cGRhdGVbMV0rJyAuanMtdGFic18nK3VwZGF0ZVswXSkuc2hvdygpO1xyXG5cclxuICAgICAgICBOdW1iZXJCbG9ja0ZpbGUoKTtcclxuICAgICAgICBUb29sVGlwKCk7XHJcbiAgICAgICAgaWYoKHVwZGF0ZVswXT09Myl8fCh1cGRhdGVbMF09PTQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIi5zbGN0XCIpLnVuYmluZCgnY2xpY2suc3lzJyk7XHJcbiAgICAgICAgICAgICQoXCIuc2xjdFwiKS5iaW5kKCdjbGljay5zeXMnLCBzbGN0Y2xpY2spO1xyXG4gICAgICAgICAgICAkKFwiLmRyb3BcIikuZmluZChcImxpXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAgICAgJChcIi5kcm9wXCIpLmZpbmQoXCJsaVwiKS5iaW5kKCdjbGljaycsIGRyb3BsaSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS51bmJpbmQoJ2NoYW5nZScsIGNoYW5nZXNheSk7XHJcbiAgICAgICAgICAgIC8vJCgnI3R5cGVzYXknKS5iaW5kKCdjaGFuZ2UnLCBjaGFuZ2VzYXkpO1xyXG4gICAgICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvLyBKYXZhU2NyaXB0IERvY3VtZW50XHJcbiQoZnVuY3Rpb24gKCl7XHJcblxyXG4vL9C+0L/RgNC10LTQtdC70LjRgtGMIHppbmRleCDQtNC70Y8gc2VsZWN0INC/0L7Qu9C10LlcclxuWmluZGV4KCk7XHJcblx0XHJcbn0pO1xyXG5cclxuXHJcbi8v0L7Qv9GA0LXQtNC10LvQuNGC0YwgemluZGV4INC00LvRjyBzZWxlY3Qg0L/QvtC70LXQuVxyXG4vLyAgfFxyXG4vLyBcXC9cclxuZnVuY3Rpb24gWmluZGV4KCkge1xyXG4gIHZhciB6aW5kZXg9NTA7XHJcblx0Ly9hbGVydCgkKCcuanMtemluZGV4JykubGVuZ3RoKTtcclxuICAkKCcuanMtemluZGV4JykuZWFjaChmdW5jdGlvbiAoaSwgZWxlbSkge1xyXG4gICAgICAkKHRoaXMpLmNzcyhcInotaW5kZXhcIiwgemluZGV4KTtcclxuXHQgIHppbmRleC0tO1xyXG4gICAgfSk7XHJcbiAgfSJdfQ==
